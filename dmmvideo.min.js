// function attach333() {
//     if (typeof dmmplayer === 'undefined') {
//         setTimeout(attach333);
//         return
//     }
//     dmmplayer._hls.on("hlsFragDecrypted", function(_, data) {
//         console.log(data)
//         const filename = data.frag.relurl
//         const buf = data.binary
//         injectDecryptedData(filename, buf, buf.byteLength)
//       }, dmmplayer._hls)
// }

// attach333();

!function(e, t) {
    "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define([], t) : "object" == typeof exports ? exports.dmmvideo = t() : e.dmmvideo = t()
}(this, (function() {
    return function(e) {
        var t = {};
        function a(r) {
            if (t[r])
                return t[r].exports;
            var n = t[r] = {
                i: r,
                l: !1,
                exports: {}
            };
            return e[r].call(n.exports, n, n.exports, a),
            n.l = !0,
            n.exports
        }
        return a.m = e,
        a.c = t,
        a.d = function(e, t, r) {
            a.o(e, t) || Object.defineProperty(e, t, {
                enumerable: !0,
                get: r
            })
        }
        ,
        a.r = function(e) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                value: "Module"
            }),
            Object.defineProperty(e, "__esModule", {
                value: !0
            })
        }
        ,
        a.t = function(e, t) {
            if (1 & t && (e = a(e)),
            8 & t)
                return e;
            if (4 & t && "object" == typeof e && e && e.__esModule)
                return e;
            var r = Object.create(null);
            if (a.r(r),
            Object.defineProperty(r, "default", {
                enumerable: !0,
                value: e
            }),
            2 & t && "string" != typeof e)
                for (var n in e)
                    a.d(r, n, function(t) {
                        return e[t]
                    }
                    .bind(null, n));
            return r
        }
        ,
        a.n = function(e) {
            var t = e && e.__esModule ? function() {
                return e.default
            }
            : function() {
                return e
            }
            ;
            return a.d(t, "a", t),
            t
        }
        ,
        a.o = function(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
        }
        ,
        a.p = "",
        a(a.s = 448)
    }([function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            var e = void 0
              , t = []
              , a = {}
              , r = {};
            function n(e, a) {
                for (var r in t) {
                    var n = t[r];
                    if (n.context === e && n.name === a)
                        return n.instance
                }
                return null
            }
            function i(e, t) {
                return t[e]
            }
            function o(e, t, a) {
                e in a && (a[e] = t)
            }
            function s(t, a, r) {
                var n = void 0
                  , i = t.__dashjs_factory_name
                  , o = a[i];
                if (o) {
                    var s = o.instance;
                    if (!o.override)
                        return s.apply({
                            context: a,
                            factory: e
                        }, r);
                    for (var l in n = t.apply({
                        context: a
                    }, r),
                    s = s.apply({
                        context: a,
                        factory: e,
                        parent: n
                    }, r))
                        n.hasOwnProperty(l) && (n[l] = s[l])
                } else
                    n = t.apply({
                        context: a
                    }, r);
                return n.getClassName = function() {
                    return i
                }
                ,
                n
            }
            return e = {
                extend: function(e, t, a, r) {
                    !r[e] && t && (r[e] = {
                        instance: t,
                        override: a
                    })
                },
                getSingletonInstance: n,
                setSingletonInstance: function(e, a, r) {
                    for (var n in t) {
                        var i = t[n];
                        if (i.context === e && i.name === a)
                            return void (t[n].instance = r)
                    }
                    t.push({
                        name: a,
                        context: e,
                        instance: r
                    })
                },
                getSingletonFactory: function(e) {
                    var r = i(e.__dashjs_factory_name, a);
                    return r || (r = function(a) {
                        var r = void 0;
                        return void 0 === a && (a = {}),
                        {
                            getInstance: function() {
                                return r || (r = n(a, e.__dashjs_factory_name)),
                                r || (r = s(e, a, arguments),
                                t.push({
                                    name: e.__dashjs_factory_name,
                                    context: a,
                                    instance: r
                                })),
                                r
                            }
                        }
                    }
                    ,
                    a[e.__dashjs_factory_name] = r),
                    r
                },
                getSingletonFactoryByName: function(e) {
                    return i(e, a)
                },
                updateSingletonFactory: function(e, t) {
                    o(e, t, a)
                },
                getClassFactory: function(e) {
                    var t = i(e.__dashjs_factory_name, r);
                    return t || (t = function(t) {
                        return void 0 === t && (t = {}),
                        {
                            create: function() {
                                return s(e, t, arguments)
                            }
                        }
                    }
                    ,
                    r[e.__dashjs_factory_name] = t),
                    t
                },
                getClassFactoryByName: function(e) {
                    return i(e, r)
                },
                updateClassFactory: function(e, t) {
                    o(e, t, r)
                }
            }
        }();
        t.default = r
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = new (function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.init()
            }
            return r(e, [{
                key: "init",
                value: function() {
                    this.STREAM = "stream",
                    this.VIDEO = "video",
                    this.AUDIO = "audio",
                    this.TEXT = "text",
                    this.FRAGMENTED_TEXT = "fragmentedText",
                    this.EMBEDDED_TEXT = "embeddedText",
                    this.MUXED = "muxed",
                    this.IMAGE = "image",
                    this.STPP = "stpp",
                    this.TTML = "ttml",
                    this.VTT = "vtt",
                    this.WVTT = "wvtt",
                    this.ABR_STRATEGY_DYNAMIC = "abrDynamic",
                    this.ABR_STRATEGY_BOLA = "abrBola",
                    this.ABR_STRATEGY_THROUGHPUT = "abrThroughput",
                    this.MOVING_AVERAGE_SLIDING_WINDOW = "slidingWindow",
                    this.MOVING_AVERAGE_EWMA = "ewma",
                    this.BAD_ARGUMENT_ERROR = "Invalid Arguments",
                    this.MISSING_CONFIG_ERROR = "Missing config parameter(s)",
                    this.LOCATION = "Location",
                    this.INITIALIZE = "initialize",
                    this.TEXT_SHOWING = "showing",
                    this.TEXT_HIDDEN = "hidden",
                    this.CC1 = "CC1",
                    this.CC3 = "CC3",
                    this.UTF8 = "utf-8",
                    this.SCHEME_ID_URI = "schemeIdUri",
                    this.START_TIME = "starttime",
                    this.SERVICE_DESCRIPTION_LL_SCHEME = "urn:dvb:dash:lowlatency:scope:2019",
                    this.SUPPLEMENTAL_PROPERTY_LL_SCHEME = "urn:dvb:dash:lowlatency:critical:2019",
                    this.XML = "XML",
                    this.ARRAY_BUFFER = "ArrayBuffer"
                }
            }]),
            e
        }());
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o() {
            var e = {};
            function t(t, a, r) {
                var n = -1;
                return e[t] ? (e[t].some((function(e, t) {
                    if (e && e.callback === a && (!r || r === e.scope))
                        return n = t,
                        !0
                }
                )),
                n) : n
            }
            return {
                on: function(a, r, n) {
                    var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
                    if (!a)
                        throw new Error("event type cannot be null or undefined");
                    if (!r || "function" != typeof r)
                        throw new Error("listener must be a function: " + r);
                    if (!(t(a, r, n) >= 0)) {
                        e[a] = e[a] || [];
                        var o = {
                            callback: r,
                            scope: n,
                            priority: i
                        }
                          , s = e[a].some((function(t, r) {
                            if (t && i > t.priority)
                                return e[a].splice(r, 0, o),
                                !0
                        }
                        ));
                        s || e[a].push(o)
                    }
                },
                off: function(a, r, n) {
                    if (a && r && e[a]) {
                        var i = t(a, r, n);
                        i < 0 || (e[a][i] = null)
                    }
                },
                trigger: function(t, a) {
                    if (t && e[t]) {
                        if ((a = a || {}).hasOwnProperty("type"))
                            throw new Error("'type' is a reserved word for event dispatching");
                        a.type = t,
                        e[t] = e[t].filter((function(e) {
                            return e
                        }
                        )),
                        e[t].forEach((function(e) {
                            return e && e.callback.call(e.scope, a)
                        }
                        ))
                    }
                },
                reset: function() {
                    e = {}
                }
            }
        }
        o.__dashjs_factory_name = "EventBus";
        var s = i.default.getSingletonFactory(o);
        s.EVENT_PRIORITY_LOW = 0,
        s.EVENT_PRIORITY_HIGH = 5e3,
        i.default.updateSingletonFactory(o.__dashjs_factory_name, s),
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(2))
          , n = o(a(4))
          , i = o(a(0));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = 1
          , l = 2
          , u = 3
          , d = 4
          , c = 5;
        function f(e) {
            e = e || {};
            var t, a = this.context, i = (0,
            r.default)(a).getInstance(), o = e.settings, f = [], h = void 0, p = void 0, g = void 0;
            function m(e) {
                return e && e.bind ? e.bind(window.console) : window.console.log.bind(window.console)
            }
            function y() {
                for (var e = arguments.length, t = Array(e), a = 0; a < e; a++)
                    t[a] = arguments[a];
                k.apply(void 0, [s, this].concat(t))
            }
            function _() {
                for (var e = arguments.length, t = Array(e), a = 0; a < e; a++)
                    t[a] = arguments[a];
                k.apply(void 0, [l, this].concat(t))
            }
            function v() {
                for (var e = arguments.length, t = Array(e), a = 0; a < e; a++)
                    t[a] = arguments[a];
                k.apply(void 0, [u, this].concat(t))
            }
            function b() {
                for (var e = arguments.length, t = Array(e), a = 0; a < e; a++)
                    t[a] = arguments[a];
                k.apply(void 0, [d, this].concat(t))
            }
            function E() {
                for (var e = arguments.length, t = Array(e), a = 0; a < e; a++)
                    t[a] = arguments[a];
                k.apply(void 0, [c, this].concat(t))
            }
            function k(e, t) {
                var a = ""
                  , r = null;
                h && (r = (new Date).getTime(),
                a += "[" + (r - g) + "]"),
                p && t && t.getClassName && (a += "[" + t.getClassName() + "]",
                t.getType && (a += "[" + t.getType() + "]")),
                a.length > 0 && (a += " ");
                for (var s = arguments.length, l = Array(s > 2 ? s - 2 : 0), u = 2; u < s; u++)
                    l[u - 2] = arguments[u];
                Array.apply(null, l).forEach((function(e) {
                    a += e + " "
                }
                )),
                f[e] && o.get().debug.logLevel >= e && f[e](a),
                i.trigger(n.default.LOG, {
                    message: a,
                    level: e
                })
            }
            return t = {
                getLogger: function(e) {
                    return {
                        fatal: y.bind(e),
                        error: _.bind(e),
                        warn: v.bind(e),
                        info: b.bind(e),
                        debug: E.bind(e)
                    }
                },
                setLogTimestampVisible: function(e) {
                    h = e
                },
                setCalleeNameVisible: function(e) {
                    p = e
                }
            },
            h = !0,
            p = !0,
            g = (new Date).getTime(),
            "undefined" != typeof window && window.console && (f[s] = m(window.console.error),
            f[l] = m(window.console.error),
            f[u] = m(window.console.warn),
            f[d] = m(window.console.info),
            f[c] = m(window.console.debug)),
            t
        }
        f.__dashjs_factory_name = "Debug";
        var h = i.default.getSingletonFactory(f);
        h.LOG_LEVEL_NONE = 0,
        h.LOG_LEVEL_FATAL = s,
        h.LOG_LEVEL_ERROR = l,
        h.LOG_LEVEL_WARNING = u,
        h.LOG_LEVEL_INFO = d,
        h.LOG_LEVEL_DEBUG = c,
        i.default.updateSingletonFactory(f.__dashjs_factory_name, h),
        t.default = h
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(266);
        function i(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function o(e, t) {
            if (!e)
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" != typeof t && "function" != typeof t ? e : t
        }
        var s = new (function(e) {
            function t() {
                return i(this, t),
                o(this, (t.__proto__ || Object.getPrototypeOf(t)).apply(this, arguments))
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default));
        t.default = s
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(41).f
          , i = a(26)
          , o = a(27)
          , s = a(142)
          , l = a(181)
          , u = a(94);
        e.exports = function(e, t) {
            var a, d, c, f, h, p = e.target, g = e.global, m = e.stat;
            if (a = g ? r : m ? r[p] || s(p, {}) : (r[p] || {}).prototype)
                for (d in t) {
                    if (f = t[d],
                    c = e.noTargetGet ? (h = n(a, d)) && h.value : a[d],
                    !u(g ? d : p + (m ? "." : "#") + d, e.forced) && void 0 !== c) {
                        if (typeof f == typeof c)
                            continue;
                        l(f, c)
                    }
                    (e.sham || c && c.sham) && i(f, "sham", !0),
                    o(a, d, f, e)
                }
        }
    }
    , function(e, t) {
        var a = function(e) {
            return e && e.Math == Math && e
        };
        e.exports = a("object" == typeof globalThis && globalThis) || a("object" == typeof window && window) || a("object" == typeof self && self) || a("object" == typeof global && global) || function() {
            return this
        }() || Function("return this")()
    }
    , function(e, t) {
        e.exports = function(e) {
            try {
                return !!e()
            } catch (e) {
                return !0
            }
        }
    }
    , function(e, t, a) {
        !function(e) {
            "use strict";
            function t(e) {
                return (t = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                }
                : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                }
                )(e)
            }
            function a(e, t) {
                var a = this.event && this.event.type
                  , r = "unload" === a || "beforeunload" === a
                  , n = "XMLHttpRequest"in this ? new XMLHttpRequest : new ActiveXObject("Microsoft.XMLHTTP");
                n.open("POST", e, !r),
                n.withCredentials = !0,
                n.setRequestHeader("Accept", "*/*"),
                "string" == typeof t ? (n.setRequestHeader("Content-Type", "text/plain;charset=UTF-8"),
                n.responseType = "text") : function(e) {
                    return e instanceof Blob
                }(t) && t.type && n.setRequestHeader("Content-Type", t.type);
                try {
                    n.send(t)
                } catch (e) {
                    return !1
                }
                return !0
            }
            function r(e) {
                var t = this.constructor;
                return this.then((function(a) {
                    return t.resolve(e()).then((function() {
                        return a
                    }
                    ))
                }
                ), (function(a) {
                    return t.resolve(e()).then((function() {
                        return t.reject(a)
                    }
                    ))
                }
                ))
            }
            function n(e) {
                return new this((function(t, a) {
                    if (!e || void 0 === e.length)
                        return a(new TypeError(typeof e + " " + e + " is not iterable(cannot read property Symbol(Symbol.iterator))"));
                    var r = Array.prototype.slice.call(e);
                    if (0 === r.length)
                        return t([]);
                    var n = r.length;
                    function i(e, a) {
                        if (a && ("object" == typeof a || "function" == typeof a)) {
                            var o = a.then;
                            if ("function" == typeof o)
                                return void o.call(a, (function(t) {
                                    i(e, t)
                                }
                                ), (function(a) {
                                    r[e] = {
                                        status: "rejected",
                                        reason: a
                                    },
                                    0 == --n && t(r)
                                }
                                ))
                        }
                        r[e] = {
                            status: "fulfilled",
                            value: a
                        },
                        0 == --n && t(r)
                    }
                    for (var o = 0; o < r.length; o++)
                        i(o, r[o])
                }
                ))
            }
            (function() {
                "navigator"in this || (this.navigator = {}),
                "function" != typeof this.navigator.sendBeacon && (this.navigator.sendBeacon = a.bind(this))
            }
            ).call("object" === ("undefined" == typeof window ? "undefined" : t(window)) ? window : {});
            var i = setTimeout;
            function o(e) {
                return Boolean(e && void 0 !== e.length)
            }
            function s() {}
            function l(e) {
                if (!(this instanceof l))
                    throw new TypeError("Promises must be constructed via new");
                if ("function" != typeof e)
                    throw new TypeError("not a function");
                this._state = 0,
                this._handled = !1,
                this._value = void 0,
                this._deferreds = [],
                p(e, this)
            }
            function u(e, t) {
                for (; 3 === e._state; )
                    e = e._value;
                0 !== e._state ? (e._handled = !0,
                l._immediateFn((function() {
                    var a = 1 === e._state ? t.onFulfilled : t.onRejected;
                    if (null !== a) {
                        var r;
                        try {
                            r = a(e._value)
                        } catch (e) {
                            return void c(t.promise, e)
                        }
                        d(t.promise, r)
                    } else
                        (1 === e._state ? d : c)(t.promise, e._value)
                }
                ))) : e._deferreds.push(t)
            }
            function d(e, t) {
                try {
                    if (t === e)
                        throw new TypeError("A promise cannot be resolved with itself.");
                    if (t && ("object" == typeof t || "function" == typeof t)) {
                        var a = t.then;
                        if (t instanceof l)
                            return e._state = 3,
                            e._value = t,
                            void f(e);
                        if ("function" == typeof a)
                            return void p((r = a,
                            n = t,
                            function() {
                                r.apply(n, arguments)
                            }
                            ), e)
                    }
                    e._state = 1,
                    e._value = t,
                    f(e)
                } catch (t) {
                    c(e, t)
                }
                var r, n
            }
            function c(e, t) {
                e._state = 2,
                e._value = t,
                f(e)
            }
            function f(e) {
                2 === e._state && 0 === e._deferreds.length && l._immediateFn((function() {
                    e._handled || l._unhandledRejectionFn(e._value)
                }
                ));
                for (var t = 0, a = e._deferreds.length; t < a; t++)
                    u(e, e._deferreds[t]);
                e._deferreds = null
            }
            function h(e, t, a) {
                this.onFulfilled = "function" == typeof e ? e : null,
                this.onRejected = "function" == typeof t ? t : null,
                this.promise = a
            }
            function p(e, t) {
                var a = !1;
                try {
                    e((function(e) {
                        a || (a = !0,
                        d(t, e))
                    }
                    ), (function(e) {
                        a || (a = !0,
                        c(t, e))
                    }
                    ))
                } catch (e) {
                    if (a)
                        return;
                    a = !0,
                    c(t, e)
                }
            }
            l.prototype.catch = function(e) {
                return this.then(null, e)
            }
            ,
            l.prototype.then = function(e, t) {
                var a = new this.constructor(s);
                return u(this, new h(e,t,a)),
                a
            }
            ,
            l.prototype.finally = r,
            l.all = function(e) {
                return new l((function(t, a) {
                    if (!o(e))
                        return a(new TypeError("Promise.all accepts an array"));
                    var r = Array.prototype.slice.call(e);
                    if (0 === r.length)
                        return t([]);
                    var n = r.length;
                    function i(e, o) {
                        try {
                            if (o && ("object" == typeof o || "function" == typeof o)) {
                                var s = o.then;
                                if ("function" == typeof s)
                                    return void s.call(o, (function(t) {
                                        i(e, t)
                                    }
                                    ), a)
                            }
                            r[e] = o,
                            0 == --n && t(r)
                        } catch (e) {
                            a(e)
                        }
                    }
                    for (var s = 0; s < r.length; s++)
                        i(s, r[s])
                }
                ))
            }
            ,
            l.allSettled = n,
            l.resolve = function(e) {
                return e && "object" == typeof e && e.constructor === l ? e : new l((function(t) {
                    t(e)
                }
                ))
            }
            ,
            l.reject = function(e) {
                return new l((function(t, a) {
                    a(e)
                }
                ))
            }
            ,
            l.race = function(e) {
                return new l((function(t, a) {
                    if (!o(e))
                        return a(new TypeError("Promise.race accepts an array"));
                    for (var r = 0, n = e.length; r < n; r++)
                        l.resolve(e[r]).then(t, a)
                }
                ))
            }
            ,
            l._immediateFn = "function" == typeof setImmediate && function(e) {
                setImmediate(e)
            }
            || function(e) {
                i(e, 0)
            }
            ,
            l._unhandledRejectionFn = function(e) {
                "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", e)
            }
            ;
            var g = function() {
                if ("undefined" != typeof self)
                    return self;
                if ("undefined" != typeof window)
                    return window;
                if ("undefined" != typeof global)
                    return global;
                throw new Error("unable to locate global object")
            }();
            "function" != typeof g.Promise ? g.Promise = l : g.Promise.prototype.finally ? g.Promise.allSettled || (g.Promise.allSettled = n) : g.Promise.prototype.finally = r;
            var m = "undefined" != typeof globalThis && globalThis || "undefined" != typeof self && self || void 0 !== m && m
              , y = "URLSearchParams"in m
              , _ = "Symbol"in m && "iterator"in Symbol
              , v = "FileReader"in m && "Blob"in m && function() {
                try {
                    return new Blob,
                    !0
                } catch (e) {
                    return !1
                }
            }()
              , b = "FormData"in m
              , E = "ArrayBuffer"in m;
            if (E)
                var k = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"]
                  , T = ArrayBuffer.isView || function(e) {
                    return e && k.indexOf(Object.prototype.toString.call(e)) > -1
                }
                ;
            function S(e) {
                if ("string" != typeof e && (e = String(e)),
                /[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e) || "" === e)
                    throw new TypeError('Invalid character in header field name: "' + e + '"');
                return e.toLowerCase()
            }
            function A(e) {
                return "string" != typeof e && (e = String(e)),
                e
            }
            function C(e) {
                var t = {
                    next: function() {
                        var t = e.shift();
                        return {
                            done: void 0 === t,
                            value: t
                        }
                    }
                };
                return _ && (t[Symbol.iterator] = function() {
                    return t
                }
                ),
                t
            }
            function I(e) {
                this.map = {},
                e instanceof I ? e.forEach((function(e, t) {
                    this.append(t, e)
                }
                ), this) : Array.isArray(e) ? e.forEach((function(e) {
                    this.append(e[0], e[1])
                }
                ), this) : e && Object.getOwnPropertyNames(e).forEach((function(t) {
                    this.append(t, e[t])
                }
                ), this)
            }
            function P(e) {
                if (e.bodyUsed)
                    return Promise.reject(new TypeError("Already read"));
                e.bodyUsed = !0
            }
            function w(e) {
                return new Promise((function(t, a) {
                    e.onload = function() {
                        t(e.result)
                    }
                    ,
                    e.onerror = function() {
                        a(e.error)
                    }
                }
                ))
            }
            function M(e) {
                var t = new FileReader
                  , a = w(t);
                return t.readAsArrayBuffer(e),
                a
            }
            function R(e) {
                if (e.slice)
                    return e.slice(0);
                var t = new Uint8Array(e.byteLength);
                return t.set(new Uint8Array(e)),
                t.buffer
            }
            function x() {
                return this.bodyUsed = !1,
                this._initBody = function(e) {
                    var t;
                    this.bodyUsed = this.bodyUsed,
                    this._bodyInit = e,
                    e ? "string" == typeof e ? this._bodyText = e : v && Blob.prototype.isPrototypeOf(e) ? this._bodyBlob = e : b && FormData.prototype.isPrototypeOf(e) ? this._bodyFormData = e : y && URLSearchParams.prototype.isPrototypeOf(e) ? this._bodyText = e.toString() : E && v && (t = e) && DataView.prototype.isPrototypeOf(t) ? (this._bodyArrayBuffer = R(e.buffer),
                    this._bodyInit = new Blob([this._bodyArrayBuffer])) : E && (ArrayBuffer.prototype.isPrototypeOf(e) || T(e)) ? this._bodyArrayBuffer = R(e) : this._bodyText = e = Object.prototype.toString.call(e) : this._bodyText = "",
                    this.headers.get("content-type") || ("string" == typeof e ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : y && URLSearchParams.prototype.isPrototypeOf(e) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"))
                }
                ,
                v && (this.blob = function() {
                    var e = P(this);
                    if (e)
                        return e;
                    if (this._bodyBlob)
                        return Promise.resolve(this._bodyBlob);
                    if (this._bodyArrayBuffer)
                        return Promise.resolve(new Blob([this._bodyArrayBuffer]));
                    if (this._bodyFormData)
                        throw new Error("could not read FormData body as blob");
                    return Promise.resolve(new Blob([this._bodyText]))
                }
                ,
                this.arrayBuffer = function() {
                    return this._bodyArrayBuffer ? P(this) || (ArrayBuffer.isView(this._bodyArrayBuffer) ? Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset, this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength)) : Promise.resolve(this._bodyArrayBuffer)) : this.blob().then(M)
                }
                ),
                this.text = function() {
                    var e, t, a, r = P(this);
                    if (r)
                        return r;
                    if (this._bodyBlob)
                        return e = this._bodyBlob,
                        a = w(t = new FileReader),
                        t.readAsText(e),
                        a;
                    if (this._bodyArrayBuffer)
                        return Promise.resolve(function(e) {
                            for (var t = new Uint8Array(e), a = new Array(t.length), r = 0; r < t.length; r++)
                                a[r] = String.fromCharCode(t[r]);
                            return a.join("")
                        }(this._bodyArrayBuffer));
                    if (this._bodyFormData)
                        throw new Error("could not read FormData body as text");
                    return Promise.resolve(this._bodyText)
                }
                ,
                b && (this.formData = function() {
                    return this.text().then(N)
                }
                ),
                this.json = function() {
                    return this.text().then(JSON.parse)
                }
                ,
                this
            }
            I.prototype.append = function(e, t) {
                e = S(e),
                t = A(t);
                var a = this.map[e];
                this.map[e] = a ? a + ", " + t : t
            }
            ,
            I.prototype.delete = function(e) {
                delete this.map[S(e)]
            }
            ,
            I.prototype.get = function(e) {
                return e = S(e),
                this.has(e) ? this.map[e] : null
            }
            ,
            I.prototype.has = function(e) {
                return this.map.hasOwnProperty(S(e))
            }
            ,
            I.prototype.set = function(e, t) {
                this.map[S(e)] = A(t)
            }
            ,
            I.prototype.forEach = function(e, t) {
                for (var a in this.map)
                    this.map.hasOwnProperty(a) && e.call(t, this.map[a], a, this)
            }
            ,
            I.prototype.keys = function() {
                var e = [];
                return this.forEach((function(t, a) {
                    e.push(a)
                }
                )),
                C(e)
            }
            ,
            I.prototype.values = function() {
                var e = [];
                return this.forEach((function(t) {
                    e.push(t)
                }
                )),
                C(e)
            }
            ,
            I.prototype.entries = function() {
                var e = [];
                return this.forEach((function(t, a) {
                    e.push([a, t])
                }
                )),
                C(e)
            }
            ,
            _ && (I.prototype[Symbol.iterator] = I.prototype.entries);
            var D = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
            function O(e, t) {
                if (!(this instanceof O))
                    throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
                var a, r, n = (t = t || {}).body;
                if (e instanceof O) {
                    if (e.bodyUsed)
                        throw new TypeError("Already read");
                    this.url = e.url,
                    this.credentials = e.credentials,
                    t.headers || (this.headers = new I(e.headers)),
                    this.method = e.method,
                    this.mode = e.mode,
                    this.signal = e.signal,
                    n || null == e._bodyInit || (n = e._bodyInit,
                    e.bodyUsed = !0)
                } else
                    this.url = String(e);
                if (this.credentials = t.credentials || this.credentials || "same-origin",
                !t.headers && this.headers || (this.headers = new I(t.headers)),
                this.method = (r = (a = t.method || this.method || "GET").toUpperCase(),
                D.indexOf(r) > -1 ? r : a),
                this.mode = t.mode || this.mode || null,
                this.signal = t.signal || this.signal,
                this.referrer = null,
                ("GET" === this.method || "HEAD" === this.method) && n)
                    throw new TypeError("Body not allowed for GET or HEAD requests");
                if (this._initBody(n),
                !("GET" !== this.method && "HEAD" !== this.method || "no-store" !== t.cache && "no-cache" !== t.cache)) {
                    var i = /([?&])_=[^&]*/;
                    i.test(this.url) ? this.url = this.url.replace(i, "$1_=" + (new Date).getTime()) : this.url += (/\?/.test(this.url) ? "&" : "?") + "_=" + (new Date).getTime()
                }
            }
            function N(e) {
                var t = new FormData;
                return e.trim().split("&").forEach((function(e) {
                    if (e) {
                        var a = e.split("=")
                          , r = a.shift().replace(/\+/g, " ")
                          , n = a.join("=").replace(/\+/g, " ");
                        t.append(decodeURIComponent(r), decodeURIComponent(n))
                    }
                }
                )),
                t
            }
            function L(e, t) {
                if (!(this instanceof L))
                    throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
                t || (t = {}),
                this.type = "default",
                this.status = void 0 === t.status ? 200 : t.status,
                this.ok = this.status >= 200 && this.status < 300,
                this.statusText = void 0 === t.statusText ? "" : "" + t.statusText,
                this.headers = new I(t.headers),
                this.url = t.url || "",
                this._initBody(e)
            }
            O.prototype.clone = function() {
                return new O(this,{
                    body: this._bodyInit
                })
            }
            ,
            x.call(O.prototype),
            x.call(L.prototype),
            L.prototype.clone = function() {
                return new L(this._bodyInit,{
                    status: this.status,
                    statusText: this.statusText,
                    headers: new I(this.headers),
                    url: this.url
                })
            }
            ,
            L.error = function() {
                var e = new L(null,{
                    status: 0,
                    statusText: ""
                });
                return e.type = "error",
                e
            }
            ;
            var U = [301, 302, 303, 307, 308];
            L.redirect = function(e, t) {
                if (-1 === U.indexOf(t))
                    throw new RangeError("Invalid status code");
                return new L(null,{
                    status: t,
                    headers: {
                        location: e
                    }
                })
            }
            ;
            var F = m.DOMException;
            try {
                new F
            } catch (e) {
                (F = function(e, t) {
                    this.message = e,
                    this.name = t;
                    var a = Error(e);
                    this.stack = a.stack
                }
                ).prototype = Object.create(Error.prototype),
                F.prototype.constructor = F
            }
            function B(e, t) {
                return new Promise((function(a, r) {
                    var n = new O(e,t);
                    if (n.signal && n.signal.aborted)
                        return r(new F("Aborted","AbortError"));
                    var i = new XMLHttpRequest;
                    function o() {
                        i.abort()
                    }
                    i.onload = function() {
                        var e, t, r = {
                            status: i.status,
                            statusText: i.statusText,
                            headers: (e = i.getAllResponseHeaders() || "",
                            t = new I,
                            e.replace(/\r?\n[\t ]+/g, " ").split("\r").map((function(e) {
                                return 0 === e.indexOf("\n") ? e.substr(1, e.length) : e
                            }
                            )).forEach((function(e) {
                                var a = e.split(":")
                                  , r = a.shift().trim();
                                if (r) {
                                    var n = a.join(":").trim();
                                    t.append(r, n)
                                }
                            }
                            )),
                            t)
                        };
                        r.url = "responseURL"in i ? i.responseURL : r.headers.get("X-Request-URL");
                        var n = "response"in i ? i.response : i.responseText;
                        setTimeout((function() {
                            a(new L(n,r))
                        }
                        ), 0)
                    }
                    ,
                    i.onerror = function() {
                        setTimeout((function() {
                            r(new TypeError("Network request failed"))
                        }
                        ), 0)
                    }
                    ,
                    i.ontimeout = function() {
                        setTimeout((function() {
                            r(new TypeError("Network request failed"))
                        }
                        ), 0)
                    }
                    ,
                    i.onabort = function() {
                        setTimeout((function() {
                            r(new F("Aborted","AbortError"))
                        }
                        ), 0)
                    }
                    ,
                    i.open(n.method, function(e) {
                        try {
                            return "" === e && m.location.href ? m.location.href : e
                        } catch (t) {
                            return e
                        }
                    }(n.url), !0),
                    "include" === n.credentials ? i.withCredentials = !0 : "omit" === n.credentials && (i.withCredentials = !1),
                    "responseType"in i && (v ? i.responseType = "blob" : E && n.headers.get("Content-Type") && -1 !== n.headers.get("Content-Type").indexOf("application/octet-stream") && (i.responseType = "arraybuffer")),
                    !t || "object" != typeof t.headers || t.headers instanceof I ? n.headers.forEach((function(e, t) {
                        i.setRequestHeader(t, e)
                    }
                    )) : Object.getOwnPropertyNames(t.headers).forEach((function(e) {
                        i.setRequestHeader(e, A(t.headers[e]))
                    }
                    )),
                    n.signal && (n.signal.addEventListener("abort", o),
                    i.onreadystatechange = function() {
                        4 === i.readyState && n.signal.removeEventListener("abort", o)
                    }
                    ),
                    i.send(void 0 === n._bodyInit ? null : n._bodyInit)
                }
                ))
            }
            B.polyfill = !0,
            m.fetch || (m.fetch = B,
            m.Headers = I,
            m.Request = O,
            m.Response = L),
            void 0 === Number.isFinite && (Number.isFinite = function(e) {
                return "number" == typeof e && isFinite(e)
            }
            ),
            void 0 === Array.prototype.find && (Array.prototype.find = function(e, t) {
                for (var a = 0; a < this.length; a++)
                    if (e.call(t, this[a], a, this))
                        return this[a]
            }
            ),
            void 0 === String.prototype.padStart && (String.prototype.padStart = function(e, t) {
                void 0 === t && (t = " ");
                for (var a = this.slice(0); a.length < e; )
                    a = t + a;
                return a
            }
            /*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
            );
            var j = function(e, t) {
                return (j = Object.setPrototypeOf || {
                    __proto__: []
                }instanceof Array && function(e, t) {
                    e.__proto__ = t
                }
                || function(e, t) {
                    for (var a in t)
                        Object.prototype.hasOwnProperty.call(t, a) && (e[a] = t[a])
                }
                )(e, t)
            }
              , G = function() {
                return (G = Object.assign || function(e) {
                    for (var t, a = 1, r = arguments.length; a < r; a++)
                        for (var n in t = arguments[a])
                            Object.prototype.hasOwnProperty.call(t, n) && (e[n] = t[n]);
                    return e
                }
                ).apply(this, arguments)
            };
            function V(e, t, a, r) {
                return new (a || (a = Promise))((function(n, i) {
                    function o(e) {
                        try {
                            l(r.next(e))
                        } catch (e) {
                            i(e)
                        }
                    }
                    function s(e) {
                        try {
                            l(r.throw(e))
                        } catch (e) {
                            i(e)
                        }
                    }
                    function l(e) {
                        var t;
                        e.done ? n(e.value) : (t = e.value,
                        t instanceof a ? t : new a((function(e) {
                            e(t)
                        }
                        ))).then(o, s)
                    }
                    l((r = r.apply(e, t || [])).next())
                }
                ))
            }
            function K(e, t) {
                var a, r, n, i, o = {
                    label: 0,
                    sent: function() {
                        if (1 & n[0])
                            throw n[1];
                        return n[1]
                    },
                    trys: [],
                    ops: []
                };
                return i = {
                    next: s(0),
                    throw: s(1),
                    return: s(2)
                },
                "function" == typeof Symbol && (i[Symbol.iterator] = function() {
                    return this
                }
                ),
                i;
                function s(i) {
                    return function(s) {
                        return function(i) {
                            if (a)
                                throw new TypeError("Generator is already executing.");
                            for (; o; )
                                try {
                                    if (a = 1,
                                    r && (n = 2 & i[0] ? r.return : i[0] ? r.throw || ((n = r.return) && n.call(r),
                                    0) : r.next) && !(n = n.call(r, i[1])).done)
                                        return n;
                                    switch (r = 0,
                                    n && (i = [2 & i[0], n.value]),
                                    i[0]) {
                                    case 0:
                                    case 1:
                                        n = i;
                                        break;
                                    case 4:
                                        return o.label++,
                                        {
                                            value: i[1],
                                            done: !1
                                        };
                                    case 5:
                                        o.label++,
                                        r = i[1],
                                        i = [0];
                                        continue;
                                    case 7:
                                        i = o.ops.pop(),
                                        o.trys.pop();
                                        continue;
                                    default:
                                        if (!((n = (n = o.trys).length > 0 && n[n.length - 1]) || 6 !== i[0] && 2 !== i[0])) {
                                            o = 0;
                                            continue
                                        }
                                        if (3 === i[0] && (!n || i[1] > n[0] && i[1] < n[3])) {
                                            o.label = i[1];
                                            break
                                        }
                                        if (6 === i[0] && o.label < n[1]) {
                                            o.label = n[1],
                                            n = i;
                                            break
                                        }
                                        if (n && o.label < n[2]) {
                                            o.label = n[2],
                                            o.ops.push(i);
                                            break
                                        }
                                        n[2] && o.ops.pop(),
                                        o.trys.pop();
                                        continue
                                    }
                                    i = t.call(e, o)
                                } catch (e) {
                                    i = [6, e],
                                    r = 0
                                } finally {
                                    a = n = 0
                                }
                            if (5 & i[0])
                                throw i[1];
                            return {
                                value: i[0] ? i[1] : void 0,
                                done: !0
                            }
                        }([i, s])
                    }
                }
            }
            function $(e, t) {
                var a = "function" == typeof Symbol && e[Symbol.iterator];
                if (!a)
                    return e;
                var r, n, i = a.call(e), o = [];
                try {
                    for (; (void 0 === t || t-- > 0) && !(r = i.next()).done; )
                        o.push(r.value)
                } catch (e) {
                    n = {
                        error: e
                    }
                } finally {
                    try {
                        r && !r.done && (a = i.return) && a.call(i)
                    } finally {
                        if (n)
                            throw n.error
                    }
                }
                return o
            }
            function q(e, t) {
                for (var a = 0, r = t.length, n = e.length; a < r; a++,
                n++)
                    e[n] = t[a];
                return e
            }
            var H, W = /\.dmm\.co\.jp$/.test(location.hostname) ? "dmm.co.jp" : "dmm.com", Y = function() {
                try {
                    return document.referrer || window.opener && window.opener.location.href || void 0
                } catch (e) {
                    return
                }
            }(), z = function() {
                function e(e) {
                    var t = this;
                    void 0 === e && (e = {}),
                    this.viewport = window.innerWidth + "x" + window.innerHeight,
                    this.screen = screen.width + "x" + screen.height,
                    this.site_type = "dmm.co.jp" === W ? "adult" : "general",
                    this.url = location.href,
                    this.referer = Y,
                    this.language = navigator.language,
                    this.trans_type = "ST",
                    Object.keys(e).forEach((function(a) {
                        t[a] = e[a]
                    }
                    ))
                }
                return e.prototype.isRepeatOf = function(e) {
                    var t, a;
                    if (this.event !== e.event)
                        return !1;
                    switch (this.event) {
                    case "seeking":
                        return Math.round((null === (t = this.playing_time) || void 0 === t ? void 0 : t.valueOf()) || 0) === Math.round((null === (a = e.playing_time) || void 0 === a ? void 0 : a.valueOf()) || 0)
                    }
                    return !1
                }
                ,
                e
            }(), X = function() {
                function e(e) {
                    this.value = e
                }
                return e.prototype.valueOf = function() {
                    return this.value
                }
                ,
                e.prototype.toJSON = function() {
                    return Math.floor(this.value / 1e3 / 60 / 60).toString().padStart(2, "0") + ":" + new Date(this.value).toISOString().slice(-10, -5)
                }
                ,
                e.prototype.toString = function() {
                    return this.toJSON()
                }
                ,
                e.fromSeconds = function(t) {
                    if ("number" != typeof t)
                        throw new Error("Invalid argument: " + t);
                    return new e(1e3 * t)
                }
                ,
                e.fromMilliseconds = function(t) {
                    if ("number" != typeof t)
                        throw new Error("Invalid argument: " + t);
                    return new e(t)
                }
                ,
                e
            }(), Q = new Map(document.cookie.split(/;\s*/).map((function(e) {
                var t = $(/^([^=]+)=(.*)$/.exec(e) || [], 3)
                  , a = t[1]
                  , r = t[2];
                return [a, decodeURIComponent(r)]
            }
            ))), J = "msCrypto"in window, Z = (H = function(e) {
                return /^Mac|^iPad|^iPhone/i.test(e)
            }
            ,
            V(void 0, void 0, void 0, (function() {
                var e;
                return K(this, (function(t) {
                    switch (t.label) {
                    case 0:
                        return "userAgentData"in navigator && "getHighEntropyValues"in navigator.userAgentData ? [4, navigator.userAgentData.getHighEntropyValues(["platform"])] : [3, 2];
                    case 1:
                        if ((e = t.sent()).platform)
                            return [2, H(e.platform)];
                        t.label = 2;
                    case 2:
                        return [2, H(navigator.platform)]
                    }
                }
                ))
            }
            ))), ee = function() {
                function e(e) {
                    var t = this;
                    this.settings = e,
                    this.openId = Q.get("i3_opnd"),
                    this.instantiatedAt = performance.now(),
                    this.playerCreatedAt = new Date,
                    this.started = !1,
                    this.queue = [],
                    this.targets = {},
                    this.buffering = !1,
                    this.videoPlaybackQuality = {
                        droppedVideoFrames: 0,
                        totalVideoFrames: 0
                    },
                    this.playedDuration = 0,
                    this.dashjsBitrateInfoLists = new Map,
                    this.dashjsQuarityIndices = new Map,
                    this.dashjsRequestMetrics = [],
                    this.flush = function() {
                        var e;
                        if (t.queue.length) {
                            var a = JSON.stringify({
                                data: t.queue
                            });
                            navigator.sendBeacon(t.settings.pigeonEndpoint, a),
                            t.queue = [],
                            null === (e = t.settings.logger) || void 0 === e || e.debug("flushed")
                        }
                    }
                    ,
                    this.listeners = {
                        oncanplay: function() {
                            t.targets.shakaPlayer || t.buffering && (t.send({
                                log_level: "info",
                                event: "buffer stalled recovered"
                            }),
                            t.buffering = !1)
                        },
                        onplaying: function() {
                            t.startPlayedDurationCounter(),
                            t.send({
                                log_level: "info",
                                event: "playing"
                            })
                        },
                        onpause: function() {
                            t.stopPlayedDurationCounter(),
                            t.send({
                                log_level: "info",
                                event: "pause"
                            })
                        },
                        onseeking: function() {
                            t.stopPlayedDurationCounter(),
                            t.send({
                                log_level: "info",
                                event: "seeking"
                            })
                        },
                        onseeked: function() {
                            t.send({
                                log_level: "info",
                                event: "seeked"
                            })
                        },
                        onended: function() {
                            t.stopPlayedDurationCounter(),
                            t.send({
                                log_level: "info",
                                event: "ended"
                            })
                        },
                        ontimeupdate: function() {
                            var e, a;
                            if (t.currentTime = null === (e = t.targets.$video) || void 0 === e ? void 0 : e.currentTime,
                            "function" == typeof (null === (a = t.targets.$video) || void 0 === a ? void 0 : a.getVideoPlaybackQuality)) {
                                var r = t.targets.$video.getVideoPlaybackQuality()
                                  , n = r.droppedVideoFrames
                                  , i = r.totalVideoFrames
                                  , o = n - t.videoPlaybackQuality.droppedVideoFrames
                                  , s = i - t.videoPlaybackQuality.totalVideoFrames;
                                s > 0 && o >= .05 * s && t.send({
                                    log_level: "info",
                                    event: "dropped frames",
                                    dropped_frames: n,
                                    decoded_frames: i
                                }),
                                t.videoPlaybackQuality = {
                                    droppedVideoFrames: n,
                                    totalVideoFrames: i
                                }
                            }
                            t.updatePlayedDurationCounter()
                        },
                        onwaiting: function() {
                            var e;
                            if (!J && !(null === (e = t.targets.$video) || void 0 === e ? void 0 : e.seeking)) {
                                t.stopPlayedDurationCounter();
                                var a = t.targets
                                  , r = a.dashjsPlayer
                                  , n = a.hlsjsPlayer
                                  , i = a.shakaPlayer;
                                r || n || i || (t.send({
                                    log_level: "info",
                                    event: "buffer stalled"
                                }),
                                t.buffering = !0)
                            }
                        },
                        onerror: function() {
                            t.stopPlayedDurationCounter()
                        },
                        ondashjsbufferstalled: function() {
                            var e;
                            (null === (e = t.targets.$video) || void 0 === e ? void 0 : e.seeking) || (t.send({
                                log_level: "info",
                                event: "buffer stalled"
                            }),
                            t.buffering = !0)
                        },
                        ondashjserror: function(e) {
                            if ("string" == typeof e.error)
                                t.stopPlayedDurationCounter(),
                                t.send({
                                    log_level: "error",
                                    event: "error",
                                    error_message: "" + e.error
                                });
                            else if ("code"in e.error) {
                                var a = e.error
                                  , r = a.code
                                  , n = a.message;
                                t.stopPlayedDurationCounter(),
                                t.send({
                                    log_level: "error",
                                    event: "error",
                                    error_message: r + ": " + n
                                })
                            }
                        },
                        ondashjsfragmentloadingcompleted: function(e) {
                            if ("video" === e.request.mediaType && "MediaSegment" === e.request.type && e.request.requestEndDate) {
                                t.dashjsRequestMetrics.push({
                                    bits: 8 * e.response.byteLength,
                                    seconds: (e.request.requestEndDate.getTime() - e.request.requestStartDate.getTime()) / 1e3
                                }),
                                t.dashjsRequestMetrics = t.dashjsRequestMetrics.slice(-4);
                                var a = t.dashjsRequestMetrics.reduce((function(e, t) {
                                    return e + t.bits
                                }
                                ), 0)
                                  , r = t.dashjsRequestMetrics.reduce((function(e, t) {
                                    return e + t.seconds
                                }
                                ), 0);
                                r > 0 && (t.networkSpeed = Math.round(a / r / 1e3))
                            }
                        },
                        ondashjsplaybackmetadataloaded: function() {
                            t.dashjsBitrateInfoLists.clear(),
                            t.dashjsQuarityIndices.clear();
                            var e = t.targets.dashjsPlayer;
                            if (e && (["audio", "video"].forEach((function(a) {
                                var r = e.getBitrateInfoListFor(a);
                                t.dashjsBitrateInfoLists.set(a, r),
                                1 === r.length && t.dashjsQuarityIndices.set(a, r[0].qualityIndex)
                            }
                            )),
                            q([], $(t.dashjsBitrateInfoLists)).every((function(e) {
                                return 1 === $(e, 2)[1].length
                            }
                            )))) {
                                var a = q([], $(t.dashjsBitrateInfoLists)).reduce((function(e, t) {
                                    return e + $(t, 2)[1][0].bitrate
                                }
                                ), 0);
                                t.bitrateMode = "CBR",
                                t.send({
                                    log_level: "info",
                                    event: "quality changed",
                                    bitrate: Math.floor(a / 1e3)
                                })
                            }
                        },
                        ondashjsquertychangerequested: function(e) {
                            if ("audio" !== e.mediaType && "video" !== e.mediaType || t.dashjsQuarityIndices.set(e.mediaType, e.newQuality),
                            t.dashjsQuarityIndices.has("audio") && t.dashjsQuarityIndices.has("video")) {
                                var a = q([], $(t.dashjsBitrateInfoLists)).reduce((function(e, a) {
                                    var r = $(a, 2)
                                      , n = r[0];
                                    return e + r[1][t.dashjsQuarityIndices.get(n) || 0].bitrate
                                }
                                ), 0);
                                t.bitrateMode = "ABR",
                                t.send({
                                    log_level: "info",
                                    event: "quality changed",
                                    bitrate: Math.floor(a / 1e3)
                                })
                            }
                        },
                        ondashjsstreamteardowncomplete: function() {
                            t.dashjsBitrateInfoLists.clear(),
                            t.dashjsQuarityIndices.clear(),
                            t.dashjsRequestMetrics = []
                        },
                        onhlsfragbuffered: function(e, a) {
                            var r = a.stats.bwEstimate;
                            0 <= r && r <= 1e10 && (t.networkSpeed = Math.round(r / 1e3))
                        },
                        onhlserror: function(e, a) {
                            "bufferStalledError" === a.details ? (t.send({
                                log_level: "info",
                                event: "buffer stalled"
                            }),
                            t.buffering = !0) : t.send({
                                log_level: "error",
                                event: "error",
                                error_message: a.type + ": " + a.details
                            })
                        },
                        onhlslevelswitching: function(e, a) {
                            var r, n = null === (r = t.targets.hlsjsPlayer) || void 0 === r ? void 0 : r.levels;
                            if (n) {
                                var i = n[a.level].bitrate;
                                t.bitrateMode = 1 === n.length ? "CBR" : "ABR",
                                t.send({
                                    log_level: "info",
                                    event: "quality changed",
                                    bitrate: Math.round(i / 1e3)
                                })
                            }
                        },
                        onshakaadaptation: function() {
                            var e, a = null === (e = t.targets.shakaPlayer) || void 0 === e ? void 0 : e.getVariantTracks(), r = null == a ? void 0 : a.find((function(e) {
                                return e.active
                            }
                            ));
                            a && r && (t.bitrateMode = 1 === a.length ? "CBR" : "ABR",
                            t.send({
                                log_level: "info",
                                event: "quality changed",
                                bitrate: Math.round(r.bandwidth / 1e3)
                            }))
                        },
                        onshakabuffering: function(e) {
                            e.buffering ? t.send({
                                log_level: "info",
                                event: "buffer stalled"
                            }) : t.send({
                                log_level: "info",
                                event: "buffer stalled recovered"
                            })
                        },
                        onshakaresponse: function(e) {
                            var a;
                            if (1 === e) {
                                var r = null === (a = t.targets.shakaPlayer) || void 0 === a ? void 0 : a.getStats();
                                t.networkSpeed = r && Math.round(r.estimatedBandwidth / 1e3)
                            }
                        },
                        onsidchange: function() {
                            t.send({
                                log_level: "info",
                                event: "blocked simultaneous watch"
                            })
                        }
                    },
                    e.pigeonEndpoint && window.setInterval(this.flush, 1e3 * e.pigeonInterval)
                }
                return e.prototype.send = function(e, t) {
                    var a;
                    return void 0 === t && (t = !1),
                    V(this, void 0, void 0, (function() {
                        var r, n, i, o, s, l, u, d, c;
                        return K(this, (function(f) {
                            switch (f.label) {
                            case 0:
                                return this.settings.pigeonEndpoint ? (r = this.targets,
                                n = r.$video,
                                i = r.simulWatch,
                                o = "seeking" === e.event ? this.currentTime : null == n ? void 0 : n.currentTime,
                                s = n ? -4 & Math.round(Math.min(n.videoWidth, n.videoHeight) + 2) : 0,
                                l = s > 0 ? s + "p" : void 0,
                                u = new z(G({
                                    open_id: this.openId,
                                    blocking_id: null == i ? void 0 : i.blockingId,
                                    sid: null == i ? void 0 : i.sid,
                                    content_type: this.settings.isLive ? "live" : "vod",
                                    player_name: this.settings.name,
                                    player_version: this.settings.version,
                                    content_id: this.contentId,
                                    stream_url: this.streamUrl,
                                    network_type: this.networkType,
                                    network_speed: this.networkSpeed,
                                    cpu_load: this.cpuLoad,
                                    decoder_type: this.decoderType,
                                    is_blocking_enabled: null == i ? void 0 : i.enabled,
                                    part: this.part,
                                    played_duration: Math.round(1e3 * this.playedDuration) / 1e3,
                                    player_created_at: this.playerCreatedAt,
                                    resolution: l,
                                    log_time: new Date,
                                    player_uptime: X.fromMilliseconds(performance.now() - this.instantiatedAt),
                                    playing_time: "number" == typeof o && Number.isFinite(o) ? X.fromSeconds(o) : void 0,
                                    bitrate_mode: this.bitrateMode
                                }, e)),
                                [4, Z]) : [2];
                            case 1:
                                return f.sent() || (d = -2 & Math.round(screen.width * window.devicePixelRatio),
                                c = -2 & Math.round(screen.height * window.devicePixelRatio),
                                u.screen = d + "x" + c),
                                this.queue.length && u.isRepeatOf(this.queue[this.queue.length - 1]) || (this.queue.push(u),
                                null === (a = this.settings.logger) || void 0 === a || a.debug("queued", u),
                                t && this.flush()),
                                [2]
                            }
                        }
                        ))
                    }
                    ))
                }
                ,
                e.prototype.start = function(e) {
                    var t = this;
                    this.started || (this.send(G({
                        log_level: "info",
                        event: "started player"
                    }, e)),
                    this.settings.isSPA || window.addEventListener("unload", (function() {
                        return t.end(e)
                    }
                    ), {
                        passive: !0
                    }),
                    this.started = !0)
                }
                ,
                e.prototype.end = function(e) {
                    this.started && this.send(G({
                        log_level: "info",
                        event: "ended player"
                    }, e), !0),
                    this.started = !1
                }
                ,
                e.prototype.watch = function(e) {
                    var t, a;
                    this.unwatch();
                    var r = this.targets = e
                      , n = r.$video
                      , i = r.dashjsPlayer
                      , o = r.hlsjsPlayer
                      , s = r.shakaPlayer
                      , l = r.simulWatch;
                    n && (n.addEventListener("canplay", this.listeners.oncanplay, {
                        passive: !0
                    }),
                    n.addEventListener("playing", this.listeners.onplaying, {
                        passive: !0
                    }),
                    n.addEventListener("pause", this.listeners.onpause, {
                        passive: !0
                    }),
                    n.addEventListener("seeking", this.listeners.onseeking, {
                        passive: !0
                    }),
                    n.addEventListener("seeked", this.listeners.onseeked, {
                        passive: !0
                    }),
                    n.addEventListener("ended", this.listeners.onended, {
                        passive: !0
                    }),
                    n.addEventListener("timeupdate", this.listeners.ontimeupdate, {
                        passive: !0
                    }),
                    n.addEventListener("waiting", this.listeners.onwaiting, {
                        passive: !0
                    }),
                    n.addEventListener("error", this.listeners.onerror, {
                        passive: !0
                    })),
                    i && (i.on("bufferStalled", this.listeners.ondashjsbufferstalled),
                    i.on("error", this.listeners.ondashjserror),
                    i.on("fragmentLoadingCompleted", this.listeners.ondashjsfragmentloadingcompleted),
                    i.on("playbackMetaDataLoaded", this.listeners.ondashjsplaybackmetadataloaded),
                    i.on("qualityChangeRequested", this.listeners.ondashjsquertychangerequested),
                    i.on("streamTeardownComplete", this.listeners.ondashjsstreamteardowncomplete)),
                    o && (o.on("hlsFragBuffered", this.listeners.onhlsfragbuffered),
                    o.on("hlsError", this.listeners.onhlserror),
                    o.on("hlsLevelSwitching", this.listeners.onhlslevelswitching)),
                    s && (s.addEventListener("adaptation", this.listeners.onshakaadaptation),
                    s.addEventListener("buffering", this.listeners.onshakabuffering),
                    null === (t = s.getNetworkingEngine()) || void 0 === t || t.registerResponseFilter(this.listeners.onshakaresponse)),
                    l && l.addEventListener("sidchange", this.listeners.onsidchange),
                    null === (a = this.settings.logger) || void 0 === a || a.debug("watch", this.targets)
                }
                ,
                e.prototype.unwatch = function() {
                    var e, t, a = this.targets, r = a.$video, n = a.dashjsPlayer, i = a.hlsjsPlayer, o = a.shakaPlayer, s = a.simulWatch;
                    r && (r.removeEventListener("canplay", this.listeners.oncanplay),
                    r.removeEventListener("playing", this.listeners.onplaying),
                    r.removeEventListener("pause", this.listeners.onpause),
                    r.removeEventListener("seeking", this.listeners.onseeking),
                    r.removeEventListener("seeked", this.listeners.onseeked),
                    r.removeEventListener("ended", this.listeners.onended),
                    r.removeEventListener("timeupdate", this.listeners.ontimeupdate),
                    r.removeEventListener("waiting", this.listeners.onwaiting),
                    r.removeEventListener("error", this.listeners.onerror)),
                    n && (n.off("bufferStalled", this.listeners.ondashjsbufferstalled),
                    n.off("error", this.listeners.ondashjserror),
                    n.off("fragmentLoadingCompleted", this.listeners.ondashjsfragmentloadingcompleted),
                    n.off("playbackMetaDataLoaded", this.listeners.ondashjsplaybackmetadataloaded),
                    n.off("qualityChangeRequested", this.listeners.ondashjsquertychangerequested),
                    n.off("streamTeardownComplete", this.listeners.ondashjsstreamteardowncomplete)),
                    i && (i.off("hlsFragBuffered", this.listeners.onhlsfragbuffered),
                    i.off("hlsError", this.listeners.onhlserror),
                    i.off("hlsLevelSwitching", this.listeners.onhlslevelswitching)),
                    o && (o.removeEventListener("adaptation", this.listeners.onshakaadaptation),
                    o.removeEventListener("buffering", this.listeners.onshakabuffering),
                    null === (e = o.getNetworkingEngine()) || void 0 === e || e.unregisterResponseFilter(this.listeners.onshakaresponse)),
                    s && s.removeEventListener("sidchange", this.listeners.onsidchange),
                    null === (t = this.settings.logger) || void 0 === t || t.debug("unwatch", this.targets),
                    this.targets = {},
                    this.buffering = !1,
                    this.currentTime = void 0,
                    this.playedDurationCountStartedAt = void 0,
                    this.videoPlaybackQuality = {
                        droppedVideoFrames: 0,
                        totalVideoFrames: 0
                    },
                    this.dashjsBitrateInfoLists.clear(),
                    this.dashjsQuarityIndices.clear(),
                    this.dashjsRequestMetrics = []
                }
                ,
                e.prototype.resetPlayedDuration = function() {
                    this.playedDuration = 0
                }
                ,
                e.prototype.startPlayedDurationCounter = function() {
                    var e;
                    this.stopPlayedDurationCounter(),
                    this.playedDurationCountStartedAt = performance.now(),
                    null === (e = this.settings.logger) || void 0 === e || e.debug("played_duration counter started")
                }
                ,
                e.prototype.stopPlayedDurationCounter = function() {
                    var e;
                    this.playedDurationCountStartedAt && (this.playedDuration += (performance.now() - this.playedDurationCountStartedAt) / 1e3,
                    this.playedDurationCountStartedAt = void 0,
                    null === (e = this.settings.logger) || void 0 === e || e.debug("played_duration counter stopped"))
                }
                ,
                e.prototype.updatePlayedDurationCounter = function() {
                    this.playedDurationCountStartedAt && (this.playedDuration += (performance.now() - this.playedDurationCountStartedAt) / 1e3),
                    this.playedDurationCountStartedAt = performance.now()
                }
                ,
                e
            }(), te = function() {
                function e(e, t) {
                    this.type = e,
                    this.cancelBubble = !1,
                    this.currentTarget = null,
                    this.defaultPrevented = !1,
                    this.eventPhase = 0,
                    this.isTrusted = !1,
                    this.returnValue = !1,
                    this.srcElement = null,
                    this.timeStamp = Date.now(),
                    this.NONE = 0,
                    this.CAPTURING_PHASE = 1,
                    this.AT_TARGET = 2,
                    this.BUBBLING_PHASE = 3,
                    this.bubbles = (null == t ? void 0 : t.bubbles) || !1,
                    this.cancelable = (null == t ? void 0 : t.cancelable) || !1,
                    this.composed = (null == t ? void 0 : t.composed) || !1,
                    this.target = (null == t ? void 0 : t.target) || null
                }
                return e.prototype.composedPath = function() {
                    return []
                }
                ,
                e.prototype.initEvent = function(e, t, a) {
                    this.type = e,
                    this.bubbles = t || !1,
                    this.cancelable = a || !1
                }
                ,
                e.prototype.preventDefault = function() {
                    this.defaultPrevented = !0
                }
                ,
                e.prototype.stopImmediatePropagation = function() {}
                ,
                e.prototype.stopPropagation = function() {}
                ,
                e
            }();
            function ae(e) {
                return new Promise((function(t) {
                    return setTimeout(t, 1e3 * e)
                }
                ))
            }
            function re(e) {
                return 429 === e || e >= 500
            }
            function ne(e, t) {
                return void 0 === t && (t = {}),
                V(this, void 0, void 0, (function() {
                    var a, r, n, i;
                    return K(this, (function(o) {
                        switch (o.label) {
                        case 0:
                            return [4, fetch(e, t)];
                        case 1:
                            if ((a = o.sent()).ok || !re(a.status) || !t.maxRetries)
                                return [3, 9];
                            r = 0,
                            o.label = 2;
                        case 2:
                            return r < t.maxRetries ? (n = a.headers.get("Retry-After") || "",
                            /^\d+$/.test(n) ? [4, ae(+n)] : [3, 4]) : [3, 9];
                        case 3:
                            return o.sent(),
                            [3, 6];
                        case 4:
                            return i = Math.pow(2, r) + Math.random(),
                            t.maxBackoff && (i = Math.min(i, t.maxBackoff)),
                            [4, ae(i)];
                        case 5:
                            o.sent(),
                            o.label = 6;
                        case 6:
                            return [4, fetch(e, t)];
                        case 7:
                            if ((a = o.sent()).ok || !re(a.status))
                                return [3, 9];
                            o.label = 8;
                        case 8:
                            return r++,
                            [3, 2];
                        case 9:
                            return [2, a]
                        }
                    }
                    ))
                }
                ))
            }
            var ie = function(e) {
                function t(t) {
                    var a, r = e.call(this) || this;
                    if (r.settings = t,
                    r.blockingIdFetched = Promise.resolve(),
                    r.settings.blockingIdEndpoint) {
                        if (r.blockingIdFetched = fetch("" + r.settings.blockingIdEndpoint, {
                            method: "POST",
                            credentials: "include"
                        }).then((function(e) {
                            return V(r, void 0, void 0, (function() {
                                var a, r;
                                return K(this, (function(n) {
                                    switch (n.label) {
                                    case 0:
                                        if (!e.ok)
                                            throw new Error("Failed to get blocking ID: " + e.status);
                                        return [200, 201].includes(e.status) ? (a = this,
                                        [4, e.json()]) : [3, 2];
                                    case 1:
                                        return a.blockingId = n.sent().blocking_id,
                                        [3, 3];
                                    case 2:
                                        this.blockingId = void 0,
                                        n.label = 3;
                                    case 3:
                                        return null === (r = t.logger) || void 0 === r || r.debug({
                                            blocking_id: this.blockingId
                                        }),
                                        [2]
                                    }
                                }
                                ))
                            }
                            ))
                        }
                        )).catch((function(e) {
                            var a;
                            null === (a = t.logger) || void 0 === a || a.warn(e)
                        }
                        )),
                        !r.settings.simulWatchEndpoint)
                            throw new Error("Simul watch endpoint is not specified")
                    } else
                        null === (a = t.logger) || void 0 === a || a.warn("Blocking ID endpoint is not specified");
                    return r
                }
                return function(e, t) {
                    if ("function" != typeof t && null !== t)
                        throw new TypeError("Class extends value " + String(t) + " is not a constructor or null");
                    function a() {
                        this.constructor = e
                    }
                    j(e, t),
                    e.prototype = null === t ? Object.create(t) : (a.prototype = t.prototype,
                    new a)
                }(t, e),
                Object.defineProperty(t.prototype, "active", {
                    get: function() {
                        return void 0 !== this.intervalId
                    },
                    enumerable: !1,
                    configurable: !0
                }),
                Object.defineProperty(t.prototype, "enabled", {
                    get: function() {
                        return void 0 !== this.blockingId
                    },
                    enumerable: !1,
                    configurable: !0
                }),
                t.prototype.start = function(e, t) {
                    var a;
                    return V(this, void 0, void 0, (function() {
                        var r, n = this;
                        return K(this, (function(i) {
                            switch (i.label) {
                            case 0:
                                if (null === (a = this.settings.logger) || void 0 === a || a.debug("start", {
                                    sid: e,
                                    liveStreamName: t
                                }),
                                !e)
                                    throw new Error("SID is empty");
                                if (this.settings.isLive && !t)
                                    throw new Error("live stream name is empty");
                                return [4, this.blockingIdFetched];
                            case 1:
                                return i.sent(),
                                this.blockingId ? [4, ne(this.settings.isLive ? this.settings.simulWatchEndpoint + "/live/" + this.blockingId + "/streams/" + t : this.settings.simulWatchEndpoint + "/vod/" + this.blockingId, {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json"
                                    },
                                    body: JSON.stringify({
                                        sid: e
                                    }),
                                    maxRetries: 2
                                })] : [2];
                            case 2:
                                if (!(r = i.sent()).ok)
                                    throw new Error("Failed to register SID: " + r.status);
                                return this.sid = e,
                                this.liveStreamName = t,
                                window.clearInterval(this.intervalId),
                                this.intervalId = window.setInterval((function() {
                                    n.onTick().catch((function(e) {
                                        var t;
                                        return null === (t = n.settings.logger) || void 0 === t ? void 0 : t.warn(e)
                                    }
                                    ))
                                }
                                ), 1e3 * this.settings.simulWatchInterval),
                                [2]
                            }
                        }
                        ))
                    }
                    ))
                }
                ,
                t.prototype.stop = function() {
                    var e;
                    null === (e = this.settings.logger) || void 0 === e || e.debug("stop"),
                    window.clearInterval(this.intervalId),
                    this.intervalId = void 0
                }
                ,
                t.prototype.onTick = function() {
                    var e, t, a;
                    return V(this, void 0, void 0, (function() {
                        var r, n, i, o = this;
                        return K(this, (function(s) {
                            switch (s.label) {
                            case 0:
                                return this.settings.isLive ? [4, ne(this.settings.simulWatchEndpoint + "/live/" + this.blockingId, {
                                    maxRetries: 2
                                })] : [3, 3];
                            case 1:
                                if (!(n = s.sent()).ok)
                                    throw new Error("Failed to get live streams and SIDs: " + n.status);
                                return [4, n.json()];
                            case 2:
                                return r = s.sent().streams,
                                i = null === (e = null == r ? void 0 : r.find((function(e) {
                                    return e.stream_name === o.liveStreamName
                                }
                                ))) || void 0 === e ? void 0 : e.sid,
                                this.intervalId ? (null === (t = this.settings.logger) || void 0 === t || t.debug({
                                    player_sid: this.sid,
                                    server_sid: i
                                }),
                                i !== this.sid && this.dispatchEvent(new te("sidchange")),
                                [3, 6]) : [2];
                            case 3:
                                return [4, ne(this.settings.simulWatchEndpoint + "/vod/" + this.blockingId, {
                                    maxRetries: 2
                                })];
                            case 4:
                                if (!(n = s.sent()).ok)
                                    throw new Error("Failed to get SID: " + n.status);
                                return [4, n.json()];
                            case 5:
                                if (i = s.sent().sid,
                                !this.intervalId)
                                    return [2];
                                null === (a = this.settings.logger) || void 0 === a || a.debug({
                                    player_sid: this.sid,
                                    server_sid: i
                                }),
                                i !== this.sid && this.dispatchEvent(new te("sidchange")),
                                s.label = 6;
                            case 6:
                                return [2]
                            }
                        }
                        ))
                    }
                    ))
                }
                ,
                t
            }(function() {
                function e() {
                    this.listeners = new Map
                }
                return e.prototype.addEventListener = function(e, t, a) {
                    var r;
                    if (!t)
                        throw new TypeError;
                    if (a && "boolean" != typeof a && "once"in a)
                        throw new Error("once option is not supported");
                    this.listeners.has(e) || this.listeners.set(e, new Set),
                    null === (r = this.listeners.get(e)) || void 0 === r || r.add(t)
                }
                ,
                e.prototype.dispatchEvent = function(e) {
                    var t = this.listeners.get(e.type);
                    return !t || (q([], $(t)).reverse().forEach((function(t) {
                        "handleEvent"in t ? t.handleEvent(e) : t(e)
                    }
                    )),
                    !e.defaultPrevented)
                }
                ,
                e.prototype.removeEventListener = function(e, t, a) {
                    var r;
                    if (!t)
                        throw new TypeError;
                    if (a && "boolean" != typeof a && "once"in a)
                        throw new Error("once option is not supported");
                    this.listeners.has(e) && (null === (r = this.listeners.get(e)) || void 0 === r || r.delete(t))
                }
                ,
                e
            }())
              , oe = window.crypto || window.msCrypto;
            e.PlayerLogController = ee,
            e.SimulWatchController = ie,
            e.getDefaultPlayerLogSettings = function(e) {
                switch (e) {
                default:
                case "production":
                    return {
                        pigeonEndpoint: "https://pigeon.i3.dmm.com/v2/dig_player_log/play/video",
                        pigeonInterval: 60
                    };
                case "staging":
                case "development":
                    return {
                        pigeonEndpoint: "https://pigeon.i3.dmm.com/v2/dig_player_log/play/video",
                        pigeonInterval: 10
                    }
                }
            }
            ,
            e.getDefaultSimulWatchSettings = function(e) {
                switch (e) {
                default:
                case "production":
                    return {
                        blockingIdEndpoint: "https://www." + W + "/service/digitalapi/digital/-/get_blocking_id",
                        simulWatchEndpoint: "https://dmm-dig-block-simul-watch-prod.appspot.com",
                        simulWatchInterval: 60
                    };
                case "development":
                case "staging":
                    return {
                        blockingIdEndpoint: "https://www." + W + "/service/digitalapi/digital/-/get_blocking_id",
                        simulWatchEndpoint: "https://dmm-dig-block-simul-watch-stg.appspot.com",
                        simulWatchInterval: 10
                    }
                }
            }
            ,
            e.getLiveStreamName = function(e) {
                var t = /\/livestreaming\/([^/]+)\/amlst:([^:]+):/.exec(e);
                if (t)
                    return t[1] + "-" + t[2]
            }
            ,
            e.getStreamIdForLive = function() {
                return function() {
                    var e = new Uint8Array(16);
                    oe.getRandomValues(e),
                    e[6] = 64 | 15 & e[6],
                    e[8] = 128 | 63 & e[8];
                    var t = new DataView(e.buffer);
                    return t.getUint32(0).toString(16).padStart(8, "0") + "-" + t.getUint16(4).toString(16).padStart(4, "0") + "-" + t.getUint16(6).toString(16).padStart(4, "0") + "-" + t.getUint16(8).toString(16).padStart(4, "0") + "-" + t.getUint16(10).toString(16).padStart(4, "0") + t.getUint32(12).toString(16).padStart(8, "0")
                }()
            }
            ,
            e.getStreamIdFromStreamUrl = function(e) {
                var t = function(e) {
                    if ("msCrypto"in window) {
                        var t = document.createElement("a");
                        return t.href = e,
                        {
                            protocol: t.protocol,
                            hostname: t.hostname,
                            pathname: t.pathname.replace(/^\/?/, "/"),
                            search: t.search
                        }
                    }
                    return new URL(e)
                }(e)
                  , a = t.hostname
                  , r = t.pathname;
                if ("str.dmm.com" === a)
                    return r.split("/")[3]
            }
            ,
            e.version = "1.0.0",
            Object.defineProperty(e, "__esModule", {
                value: !0
            })
        }(t)
    }
    , function(e, t, a) {
        var r;
        "undefined" != typeof window && (r = function() {
            return function(e) {
                var t = {};
                function a(r) {
                    if (t[r])
                        return t[r].exports;
                    var n = t[r] = {
                        i: r,
                        l: !1,
                        exports: {}
                    };
                    return e[r].call(n.exports, n, n.exports, a),
                    n.l = !0,
                    n.exports
                }
                return a.m = e,
                a.c = t,
                a.d = function(e, t, r) {
                    a.o(e, t) || Object.defineProperty(e, t, {
                        enumerable: !0,
                        get: r
                    })
                }
                ,
                a.r = function(e) {
                    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                        value: "Module"
                    }),
                    Object.defineProperty(e, "__esModule", {
                        value: !0
                    })
                }
                ,
                a.t = function(e, t) {
                    if (1 & t && (e = a(e)),
                    8 & t)
                        return e;
                    if (4 & t && "object" == typeof e && e && e.__esModule)
                        return e;
                    var r = Object.create(null);
                    if (a.r(r),
                    Object.defineProperty(r, "default", {
                        enumerable: !0,
                        value: e
                    }),
                    2 & t && "string" != typeof e)
                        for (var n in e)
                            a.d(r, n, function(t) {
                                return e[t]
                            }
                            .bind(null, n));
                    return r
                }
                ,
                a.n = function(e) {
                    var t = e && e.__esModule ? function() {
                        return e.default
                    }
                    : function() {
                        return e
                    }
                    ;
                    return a.d(t, "a", t),
                    t
                }
                ,
                a.o = function(e, t) {
                    return Object.prototype.hasOwnProperty.call(e, t)
                }
                ,
                a.p = "/dist/",
                a(a.s = "./src/hls.ts")
            }({
                "./node_modules/eventemitter3/index.js": /*!*********************************************!*\
  !*** ./node_modules/eventemitter3/index.js ***!
  \*********************************************/
                /*! no static exports found */
                /*! ModuleConcatenation bailout: Module is not an ECMAScript module */
                function(e, t, a) {
                    "use strict";
                    var r = Object.prototype.hasOwnProperty
                      , n = "~";
                    function i() {}
                    function o(e, t, a) {
                        this.fn = e,
                        this.context = t,
                        this.once = a || !1
                    }
                    function s(e, t, a, r, i) {
                        if ("function" != typeof a)
                            throw new TypeError("The listener must be a function");
                        var s = new o(a,r || e,i)
                          , l = n ? n + t : t;
                        return e._events[l] ? e._events[l].fn ? e._events[l] = [e._events[l], s] : e._events[l].push(s) : (e._events[l] = s,
                        e._eventsCount++),
                        e
                    }
                    function l(e, t) {
                        0 == --e._eventsCount ? e._events = new i : delete e._events[t]
                    }
                    function u() {
                        this._events = new i,
                        this._eventsCount = 0
                    }
                    Object.create && (i.prototype = Object.create(null),
                    (new i).__proto__ || (n = !1)),
                    u.prototype.eventNames = function() {
                        var e, t, a = [];
                        if (0 === this._eventsCount)
                            return a;
                        for (t in e = this._events)
                            r.call(e, t) && a.push(n ? t.slice(1) : t);
                        return Object.getOwnPropertySymbols ? a.concat(Object.getOwnPropertySymbols(e)) : a
                    }
                    ,
                    u.prototype.listeners = function(e) {
                        var t = n ? n + e : e
                          , a = this._events[t];
                        if (!a)
                            return [];
                        if (a.fn)
                            return [a.fn];
                        for (var r = 0, i = a.length, o = new Array(i); r < i; r++)
                            o[r] = a[r].fn;
                        return o
                    }
                    ,
                    u.prototype.listenerCount = function(e) {
                        var t = n ? n + e : e
                          , a = this._events[t];
                        return a ? a.fn ? 1 : a.length : 0
                    }
                    ,
                    u.prototype.emit = function(e, t, a, r, i, o) {
                        var s = n ? n + e : e;
                        if (!this._events[s])
                            return !1;
                        var l, u, d = this._events[s], c = arguments.length;
                        if (d.fn) {
                            switch (d.once && this.removeListener(e, d.fn, void 0, !0),
                            c) {
                            case 1:
                                return d.fn.call(d.context),
                                !0;
                            case 2:
                                return d.fn.call(d.context, t),
                                !0;
                            case 3:
                                return d.fn.call(d.context, t, a),
                                !0;
                            case 4:
                                return d.fn.call(d.context, t, a, r),
                                !0;
                            case 5:
                                return d.fn.call(d.context, t, a, r, i),
                                !0;
                            case 6:
                                return d.fn.call(d.context, t, a, r, i, o),
                                !0
                            }
                            for (u = 1,
                            l = new Array(c - 1); u < c; u++)
                                l[u - 1] = arguments[u];
                            d.fn.apply(d.context, l)
                        } else {
                            var f, h = d.length;
                            for (u = 0; u < h; u++)
                                switch (d[u].once && this.removeListener(e, d[u].fn, void 0, !0),
                                c) {
                                case 1:
                                    d[u].fn.call(d[u].context);
                                    break;
                                case 2:
                                    d[u].fn.call(d[u].context, t);
                                    break;
                                case 3:
                                    d[u].fn.call(d[u].context, t, a);
                                    break;
                                case 4:
                                    d[u].fn.call(d[u].context, t, a, r);
                                    break;
                                default:
                                    if (!l)
                                        for (f = 1,
                                        l = new Array(c - 1); f < c; f++)
                                            l[f - 1] = arguments[f];
                                    d[u].fn.apply(d[u].context, l)
                                }
                        }
                        return !0
                    }
                    ,
                    u.prototype.on = function(e, t, a) {
                        return s(this, e, t, a, !1)
                    }
                    ,
                    u.prototype.once = function(e, t, a) {
                        return s(this, e, t, a, !0)
                    }
                    ,
                    u.prototype.removeListener = function(e, t, a, r) {
                        var i = n ? n + e : e;
                        if (!this._events[i])
                            return this;
                        if (!t)
                            return l(this, i),
                            this;
                        var o = this._events[i];
                        if (o.fn)
                            o.fn !== t || r && !o.once || a && o.context !== a || l(this, i);
                        else {
                            for (var s = 0, u = [], d = o.length; s < d; s++)
                                (o[s].fn !== t || r && !o[s].once || a && o[s].context !== a) && u.push(o[s]);
                            u.length ? this._events[i] = 1 === u.length ? u[0] : u : l(this, i)
                        }
                        return this
                    }
                    ,
                    u.prototype.removeAllListeners = function(e) {
                        var t;
                        return e ? (t = n ? n + e : e,
                        this._events[t] && l(this, t)) : (this._events = new i,
                        this._eventsCount = 0),
                        this
                    }
                    ,
                    u.prototype.off = u.prototype.removeListener,
                    u.prototype.addListener = u.prototype.on,
                    u.prefixed = n,
                    u.EventEmitter = u,
                    e.exports = u
                },
                "./node_modules/url-toolkit/src/url-toolkit.js": /*!*****************************************************!*\
  !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
  \*****************************************************/
                /*! no static exports found */
                /*! ModuleConcatenation bailout: Module is not an ECMAScript module */
                function(e, t, a) {
                    var r, n, i, o, s;
                    r = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/,
                    n = /^([^\/?#]*)(.*)$/,
                    i = /(?:\/|^)\.(?=\/)/g,
                    o = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,
                    s = {
                        buildAbsoluteURL: function(e, t, a) {
                            if (a = a || {},
                            e = e.trim(),
                            !(t = t.trim())) {
                                if (!a.alwaysNormalize)
                                    return e;
                                var r = s.parseURL(e);
                                if (!r)
                                    throw new Error("Error trying to parse base URL.");
                                return r.path = s.normalizePath(r.path),
                                s.buildURLFromParts(r)
                            }
                            var i = s.parseURL(t);
                            if (!i)
                                throw new Error("Error trying to parse relative URL.");
                            if (i.scheme)
                                return a.alwaysNormalize ? (i.path = s.normalizePath(i.path),
                                s.buildURLFromParts(i)) : t;
                            var o = s.parseURL(e);
                            if (!o)
                                throw new Error("Error trying to parse base URL.");
                            if (!o.netLoc && o.path && "/" !== o.path[0]) {
                                var l = n.exec(o.path);
                                o.netLoc = l[1],
                                o.path = l[2]
                            }
                            o.netLoc && !o.path && (o.path = "/");
                            var u = {
                                scheme: o.scheme,
                                netLoc: i.netLoc,
                                path: null,
                                params: i.params,
                                query: i.query,
                                fragment: i.fragment
                            };
                            if (!i.netLoc && (u.netLoc = o.netLoc,
                            "/" !== i.path[0]))
                                if (i.path) {
                                    var d = o.path
                                      , c = d.substring(0, d.lastIndexOf("/") + 1) + i.path;
                                    u.path = s.normalizePath(c)
                                } else
                                    u.path = o.path,
                                    i.params || (u.params = o.params,
                                    i.query || (u.query = o.query));
                            return null === u.path && (u.path = a.alwaysNormalize ? s.normalizePath(i.path) : i.path),
                            s.buildURLFromParts(u)
                        },
                        parseURL: function(e) {
                            var t = r.exec(e);
                            return t ? {
                                scheme: t[1] || "",
                                netLoc: t[2] || "",
                                path: t[3] || "",
                                params: t[4] || "",
                                query: t[5] || "",
                                fragment: t[6] || ""
                            } : null
                        },
                        normalizePath: function(e) {
                            for (e = e.split("").reverse().join("").replace(i, ""); e.length !== (e = e.replace(o, "")).length; )
                                ;
                            return e.split("").reverse().join("")
                        },
                        buildURLFromParts: function(e) {
                            return e.scheme + e.netLoc + e.path + e.params + e.query + e.fragment
                        }
                    },
                    e.exports = s
                },
                "./node_modules/webworkify-webpack/index.js": /*!**************************************************!*\
  !*** ./node_modules/webworkify-webpack/index.js ***!
  \**************************************************/
                /*! no static exports found */
                /*! ModuleConcatenation bailout: Module is not an ECMAScript module */
                function(e, t, a) {
                    function r(e) {
                        var t = {};
                        function a(r) {
                            if (t[r])
                                return t[r].exports;
                            var n = t[r] = {
                                i: r,
                                l: !1,
                                exports: {}
                            };
                            return e[r].call(n.exports, n, n.exports, a),
                            n.l = !0,
                            n.exports
                        }
                        a.m = e,
                        a.c = t,
                        a.i = function(e) {
                            return e
                        }
                        ,
                        a.d = function(e, t, r) {
                            a.o(e, t) || Object.defineProperty(e, t, {
                                configurable: !1,
                                enumerable: !0,
                                get: r
                            })
                        }
                        ,
                        a.r = function(e) {
                            Object.defineProperty(e, "__esModule", {
                                value: !0
                            })
                        }
                        ,
                        a.n = function(e) {
                            var t = e && e.__esModule ? function() {
                                return e.default
                            }
                            : function() {
                                return e
                            }
                            ;
                            return a.d(t, "a", t),
                            t
                        }
                        ,
                        a.o = function(e, t) {
                            return Object.prototype.hasOwnProperty.call(e, t)
                        }
                        ,
                        a.p = "/",
                        a.oe = function(e) {
                            throw console.error(e),
                            e
                        }
                        ;
                        var r = a(a.s = ENTRY_MODULE);
                        return r.default || r
                    }
                    function n(e) {
                        return (e + "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&")
                    }
                    function i(e, t, r) {
                        var i = {};
                        i[r] = [];
                        var o = t.toString()
                          , s = o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);
                        if (!s)
                            return i;
                        for (var l, u = s[1], d = new RegExp("(\\\\n|\\W)" + n(u) + "\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g"); l = d.exec(o); )
                            "dll-reference" !== l[3] && i[r].push(l[3]);
                        for (d = new RegExp("\\(" + n(u) + '\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g"); l = d.exec(o); )
                            e[l[2]] || (i[r].push(l[1]),
                            e[l[2]] = a(l[1]).m),
                            i[l[2]] = i[l[2]] || [],
                            i[l[2]].push(l[4]);
                        for (var c, f = Object.keys(i), h = 0; h < f.length; h++)
                            for (var p = 0; p < i[f[h]].length; p++)
                                c = i[f[h]][p],
                                isNaN(1 * c) || (i[f[h]][p] = 1 * i[f[h]][p]);
                        return i
                    }
                    function o(e) {
                        return Object.keys(e).reduce((function(t, a) {
                            return t || e[a].length > 0
                        }
                        ), !1)
                    }
                    e.exports = function(e, t) {
                        t = t || {};
                        var n = {
                            main: a.m
                        }
                          , s = t.all ? {
                            main: Object.keys(n.main)
                        } : function(e, t) {
                            for (var a = {
                                main: [t]
                            }, r = {
                                main: []
                            }, n = {
                                main: {}
                            }; o(a); )
                                for (var s = Object.keys(a), l = 0; l < s.length; l++) {
                                    var u = s[l]
                                      , d = a[u].pop();
                                    if (n[u] = n[u] || {},
                                    !n[u][d] && e[u][d]) {
                                        n[u][d] = !0,
                                        r[u] = r[u] || [],
                                        r[u].push(d);
                                        for (var c = i(e, e[u][d], u), f = Object.keys(c), h = 0; h < f.length; h++)
                                            a[f[h]] = a[f[h]] || [],
                                            a[f[h]] = a[f[h]].concat(c[f[h]])
                                    }
                                }
                            return r
                        }(n, e)
                          , l = "";
                        Object.keys(s).filter((function(e) {
                            return "main" !== e
                        }
                        )).forEach((function(e) {
                            for (var t = 0; s[e][t]; )
                                t++;
                            s[e].push(t),
                            n[e][t] = "(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",
                            l = l + "var " + e + " = (" + r.toString().replace("ENTRY_MODULE", JSON.stringify(t)) + ")({" + s[e].map((function(t) {
                                return JSON.stringify(t) + ": " + n[e][t].toString()
                            }
                            )).join(",") + "});\n"
                        }
                        )),
                        l = l + "new ((" + r.toString().replace("ENTRY_MODULE", JSON.stringify(e)) + ")({" + s.main.map((function(e) {
                            return JSON.stringify(e) + ": " + n.main[e].toString()
                        }
                        )).join(",") + "}))(self);";
                        var u = new window.Blob([l],{
                            type: "text/javascript"
                        });
                        if (t.bare)
                            return u;
                        var d = (window.URL || window.webkitURL || window.mozURL || window.msURL).createObjectURL(u)
                          , c = new window.Worker(d);
                        return c.objectURL = d,
                        c
                    }
                },
                "./src/crypt/decrypter.js": /*!********************************************!*\
  !*** ./src/crypt/decrypter.js + 3 modules ***!
  \********************************************/
                /*! exports provided: default */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */
                function(e, t, a) {
                    "use strict";
                    a.r(t);
                    var r = function() {
                        function e(e, t) {
                            this.subtle = e,
                            this.aesIV = t
                        }
                        return e.prototype.decrypt = function(e, t) {
                            return this.subtle.decrypt({
                                name: "AES-CBC",
                                iv: this.aesIV
                            }, t, e)
                        }
                        ,
                        e
                    }()
                      , n = function() {
                        function e(e, t) {
                            this.subtle = e,
                            this.key = t
                        }
                        return e.prototype.expandKey = function() {
                            return this.subtle.importKey("raw", this.key, {
                                name: "AES-CBC"
                            }, !1, ["encrypt", "decrypt"])
                        }
                        ,
                        e
                    }()
                      , i = function() {
                        function e() {
                            this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54],
                            this.subMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)],
                            this.invSubMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)],
                            this.sBox = new Uint32Array(256),
                            this.invSBox = new Uint32Array(256),
                            this.key = new Uint32Array(0),
                            this.initTable()
                        }
                        var t = e.prototype;
                        return t.uint8ArrayToUint32Array_ = function(e) {
                            for (var t = new DataView(e), a = new Uint32Array(4), r = 0; r < 4; r++)
                                a[r] = t.getUint32(4 * r);
                            return a
                        }
                        ,
                        t.initTable = function() {
                            var e = this.sBox
                              , t = this.invSBox
                              , a = this.subMix
                              , r = a[0]
                              , n = a[1]
                              , i = a[2]
                              , o = a[3]
                              , s = this.invSubMix
                              , l = s[0]
                              , u = s[1]
                              , d = s[2]
                              , c = s[3]
                              , f = new Uint32Array(256)
                              , h = 0
                              , p = 0
                              , g = 0;
                            for (g = 0; g < 256; g++)
                                f[g] = g < 128 ? g << 1 : g << 1 ^ 283;
                            for (g = 0; g < 256; g++) {
                                var m = p ^ p << 1 ^ p << 2 ^ p << 3 ^ p << 4;
                                m = m >>> 8 ^ 255 & m ^ 99,
                                e[h] = m,
                                t[m] = h;
                                var y = f[h]
                                  , _ = f[y]
                                  , v = f[_]
                                  , b = 257 * f[m] ^ 16843008 * m;
                                r[h] = b << 24 | b >>> 8,
                                n[h] = b << 16 | b >>> 16,
                                i[h] = b << 8 | b >>> 24,
                                o[h] = b,
                                b = 16843009 * v ^ 65537 * _ ^ 257 * y ^ 16843008 * h,
                                l[m] = b << 24 | b >>> 8,
                                u[m] = b << 16 | b >>> 16,
                                d[m] = b << 8 | b >>> 24,
                                c[m] = b,
                                h ? (h = y ^ f[f[f[v ^ y]]],
                                p ^= f[f[p]]) : h = p = 1
                            }
                        }
                        ,
                        t.expandKey = function(e) {
                            for (var t = this.uint8ArrayToUint32Array_(e), a = !0, r = 0; r < t.length && a; )
                                a = t[r] === this.key[r],
                                r++;
                            if (!a) {
                                this.key = t;
                                var n = this.keySize = t.length;
                                if (4 !== n && 6 !== n && 8 !== n)
                                    throw new Error("Invalid aes key size=" + n);
                                var i, o, s, l, u = this.ksRows = 4 * (n + 6 + 1), d = this.keySchedule = new Uint32Array(u), c = this.invKeySchedule = new Uint32Array(u), f = this.sBox, h = this.rcon, p = this.invSubMix, g = p[0], m = p[1], y = p[2], _ = p[3];
                                for (i = 0; i < u; i++)
                                    i < n ? s = d[i] = t[i] : (l = s,
                                    i % n == 0 ? (l = f[(l = l << 8 | l >>> 24) >>> 24] << 24 | f[l >>> 16 & 255] << 16 | f[l >>> 8 & 255] << 8 | f[255 & l],
                                    l ^= h[i / n | 0] << 24) : n > 6 && i % n == 4 && (l = f[l >>> 24] << 24 | f[l >>> 16 & 255] << 16 | f[l >>> 8 & 255] << 8 | f[255 & l]),
                                    d[i] = s = (d[i - n] ^ l) >>> 0);
                                for (o = 0; o < u; o++)
                                    i = u - o,
                                    l = 3 & o ? d[i] : d[i - 4],
                                    c[o] = o < 4 || i <= 4 ? l : g[f[l >>> 24]] ^ m[f[l >>> 16 & 255]] ^ y[f[l >>> 8 & 255]] ^ _[f[255 & l]],
                                    c[o] = c[o] >>> 0
                            }
                        }
                        ,
                        t.networkToHostOrderSwap = function(e) {
                            return e << 24 | (65280 & e) << 8 | (16711680 & e) >> 8 | e >>> 24
                        }
                        ,
                        t.decrypt = function(e, t, a, r) {
                            for (var n, i, o, s, l, u, d, c, f, h, p, g, m, y, _, v, b, E = this.keySize + 6, k = this.invKeySchedule, T = this.invSBox, S = this.invSubMix, A = S[0], C = S[1], I = S[2], P = S[3], w = this.uint8ArrayToUint32Array_(a), M = w[0], R = w[1], x = w[2], D = w[3], O = new Int32Array(e), N = new Int32Array(O.length), L = this.networkToHostOrderSwap; t < O.length; ) {
                                for (f = L(O[t]),
                                h = L(O[t + 1]),
                                p = L(O[t + 2]),
                                g = L(O[t + 3]),
                                l = f ^ k[0],
                                u = g ^ k[1],
                                d = p ^ k[2],
                                c = h ^ k[3],
                                m = 4,
                                y = 1; y < E; y++)
                                    n = A[l >>> 24] ^ C[u >> 16 & 255] ^ I[d >> 8 & 255] ^ P[255 & c] ^ k[m],
                                    i = A[u >>> 24] ^ C[d >> 16 & 255] ^ I[c >> 8 & 255] ^ P[255 & l] ^ k[m + 1],
                                    o = A[d >>> 24] ^ C[c >> 16 & 255] ^ I[l >> 8 & 255] ^ P[255 & u] ^ k[m + 2],
                                    s = A[c >>> 24] ^ C[l >> 16 & 255] ^ I[u >> 8 & 255] ^ P[255 & d] ^ k[m + 3],
                                    l = n,
                                    u = i,
                                    d = o,
                                    c = s,
                                    m += 4;
                                n = T[l >>> 24] << 24 ^ T[u >> 16 & 255] << 16 ^ T[d >> 8 & 255] << 8 ^ T[255 & c] ^ k[m],
                                i = T[u >>> 24] << 24 ^ T[d >> 16 & 255] << 16 ^ T[c >> 8 & 255] << 8 ^ T[255 & l] ^ k[m + 1],
                                o = T[d >>> 24] << 24 ^ T[c >> 16 & 255] << 16 ^ T[l >> 8 & 255] << 8 ^ T[255 & u] ^ k[m + 2],
                                s = T[c >>> 24] << 24 ^ T[l >> 16 & 255] << 16 ^ T[u >> 8 & 255] << 8 ^ T[255 & d] ^ k[m + 3],
                                m += 3,
                                N[t] = L(n ^ M),
                                N[t + 1] = L(s ^ R),
                                N[t + 2] = L(o ^ x),
                                N[t + 3] = L(i ^ D),
                                M = f,
                                R = h,
                                x = p,
                                D = g,
                                t += 4
                            }
                            return r ? (_ = N.buffer,
                            v = _.byteLength,
                            (b = v && new DataView(_).getUint8(v - 1)) ? _.slice(0, v - b) : _) : N.buffer
                        }
                        ,
                        t.destroy = function() {
                            this.key = void 0,
                            this.keySize = void 0,
                            this.ksRows = void 0,
                            this.sBox = void 0,
                            this.invSBox = void 0,
                            this.subMix = void 0,
                            this.invSubMix = void 0,
                            this.keySchedule = void 0,
                            this.invKeySchedule = void 0,
                            this.rcon = void 0
                        }
                        ,
                        e
                    }()
                      , o = a("./src/errors.ts")
                      , s = a("./src/utils/logger.js")
                      , l = a("./src/events.js")
                      , u = a("./src/utils/get-self-scope.js")
                      , d = Object(u.getSelfScope)()
                      , c = function() {
                        function e(e, t, a) {
                            var r = (void 0 === a ? {} : a).removePKCS7Padding
                              , n = void 0 === r || r;
                            if (this.logEnabled = !0,
                            this.observer = e,
                            this.config = t,
                            this.removePKCS7Padding = n,
                            n)
                                try {
                                    var i = d.crypto;
                                    i && (this.subtle = i.subtle || i.webkitSubtle)
                                } catch (e) {}
                            this.disableWebCrypto = !this.subtle
                        }
                        var t = e.prototype;
                        return t.isSync = function() {
                            return this.disableWebCrypto && this.config.enableSoftwareAES
                        }
                        ,
                        t.decrypt = function(e, t, a, o) {
                            var l = this;
                            if (this.disableWebCrypto && this.config.enableSoftwareAES) {
                                this.logEnabled && (s.logger.log("JS AES decrypt"),
                                this.logEnabled = !1);
                                var u = this.decryptor;
                                u || (this.decryptor = u = new i),
                                u.expandKey(t),
                                o(u.decrypt(e, 0, a, this.removePKCS7Padding))
                            } else {
                                this.logEnabled && (s.logger.log("WebCrypto AES decrypt"),
                                this.logEnabled = !1);
                                var d = this.subtle;
                                this.key !== t && (this.key = t,
                                this.fastAesKey = new n(d,t)),
                                this.fastAesKey.expandKey().then((function(n) {
                                    new r(d,a).decrypt(e, n).catch((function(r) {
                                        l.onWebCryptoError(r, e, t, a, o)
                                    }
                                    )).then((function(e) {
                                        o(e)
                                    }
                                    ))
                                }
                                )).catch((function(r) {
                                    l.onWebCryptoError(r, e, t, a, o)
                                }
                                ))
                            }
                        }
                        ,
                        t.onWebCryptoError = function(e, t, a, r, n) {
                            this.config.enableSoftwareAES ? (s.logger.log("WebCrypto Error, disable WebCrypto API"),
                            this.disableWebCrypto = !0,
                            this.logEnabled = !0,
                            this.decrypt(t, a, r, n)) : (s.logger.error("decrypting error : " + e.message),
                            this.observer.trigger(l.default.ERROR, {
                                type: o.ErrorTypes.MEDIA_ERROR,
                                details: o.ErrorDetails.FRAG_DECRYPT_ERROR,
                                fatal: !0,
                                reason: e.message
                            }))
                        }
                        ,
                        t.destroy = function() {
                            var e = this.decryptor;
                            e && (e.destroy(),
                            this.decryptor = void 0)
                        }
                        ,
                        e
                    }();
                    t.default = c
                },
                "./src/demux/demuxer-inline.js": /*!**************************************************!*\
  !*** ./src/demux/demuxer-inline.js + 12 modules ***!
  \**************************************************/
                /*! exports provided: default */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/hls.ts */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/hls.ts */
                function(e, t, a) {
                    "use strict";
                    a.r(t);
                    var r = a("./src/events.js")
                      , n = a("./src/errors.ts")
                      , i = a("./src/crypt/decrypter.js")
                      , o = a("./src/polyfills/number.js")
                      , s = a("./src/utils/logger.js")
                      , l = a("./src/utils/get-self-scope.js");
                    function u(e, t) {
                        return 255 === e[t] && 240 == (246 & e[t + 1])
                    }
                    function d(e, t) {
                        return 1 & e[t + 1] ? 7 : 9
                    }
                    function c(e, t) {
                        return (3 & e[t + 3]) << 11 | e[t + 4] << 3 | (224 & e[t + 5]) >>> 5
                    }
                    function f(e, t) {
                        return !!(t + 1 < e.length && u(e, t))
                    }
                    function h(e, t) {
                        if (f(e, t)) {
                            var a = d(e, t);
                            if (t + a >= e.length)
                                return !1;
                            var r = c(e, t);
                            if (r <= a)
                                return !1;
                            var n = t + r;
                            if (n === e.length || n + 1 < e.length && u(e, n))
                                return !0
                        }
                        return !1
                    }
                    function p(e, t, a, i, o) {
                        if (!e.samplerate) {
                            var l = function(e, t, a, i) {
                                var o, l, u, d, c, f = navigator.userAgent.toLowerCase(), h = i, p = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
                                if (o = 1 + ((192 & t[a + 2]) >>> 6),
                                !((l = (60 & t[a + 2]) >>> 2) > p.length - 1))
                                    return d = (1 & t[a + 2]) << 2,
                                    d |= (192 & t[a + 3]) >>> 6,
                                    s.logger.log("manifest codec:" + i + ",ADTS data:type:" + o + ",sampleingIndex:" + l + "[" + p[l] + "Hz],channelConfig:" + d),
                                    /firefox/i.test(f) ? l >= 6 ? (o = 5,
                                    c = new Array(4),
                                    u = l - 3) : (o = 2,
                                    c = new Array(2),
                                    u = l) : -1 !== f.indexOf("android") ? (o = 2,
                                    c = new Array(2),
                                    u = l) : (o = 5,
                                    c = new Array(4),
                                    i && (-1 !== i.indexOf("mp4a.40.29") || -1 !== i.indexOf("mp4a.40.5")) || !i && l >= 6 ? u = l - 3 : ((i && -1 !== i.indexOf("mp4a.40.2") && (l >= 6 && 1 === d || /vivaldi/i.test(f)) || !i && 1 === d) && (o = 2,
                                    c = new Array(2)),
                                    u = l)),
                                    c[0] = o << 3,
                                    c[0] |= (14 & l) >> 1,
                                    c[1] |= (1 & l) << 7,
                                    c[1] |= d << 3,
                                    5 === o && (c[1] |= (14 & u) >> 1,
                                    c[2] = (1 & u) << 7,
                                    c[2] |= 8,
                                    c[3] = 0),
                                    {
                                        config: c,
                                        samplerate: p[l],
                                        channelCount: d,
                                        codec: "mp4a.40." + o,
                                        manifestCodec: h
                                    };
                                e.trigger(r.default.ERROR, {
                                    type: n.ErrorTypes.MEDIA_ERROR,
                                    details: n.ErrorDetails.FRAG_PARSING_ERROR,
                                    fatal: !0,
                                    reason: "invalid ADTS sampling index:" + l
                                })
                            }(t, a, i, o);
                            e.config = l.config,
                            e.samplerate = l.samplerate,
                            e.channelCount = l.channelCount,
                            e.codec = l.codec,
                            e.manifestCodec = l.manifestCodec,
                            s.logger.log("parsed codec:" + e.codec + ",rate:" + l.samplerate + ",nb channel:" + l.channelCount)
                        }
                    }
                    function g(e) {
                        return 9216e4 / e
                    }
                    function m(e, t, a, r, n) {
                        var i = function(e, t, a, r, n) {
                            var i, o, s = e.length;
                            if (i = d(e, t),
                            o = c(e, t),
                            (o -= i) > 0 && t + i + o <= s)
                                return {
                                    headerLength: i,
                                    frameLength: o,
                                    stamp: a + r * n
                                }
                        }(t, a, r, n, g(e.samplerate));
                        if (i) {
                            var o = i.stamp
                              , s = i.headerLength
                              , l = i.frameLength
                              , u = {
                                unit: t.subarray(a + s, a + s + l),
                                pts: o,
                                dts: o
                            };
                            return e.samples.push(u),
                            {
                                sample: u,
                                length: l + s
                            }
                        }
                    }
                    var y = a("./src/demux/id3.js")
                      , _ = function() {
                        function e(e, t, a) {
                            this.observer = e,
                            this.config = a,
                            this.remuxer = t
                        }
                        var t = e.prototype;
                        return t.resetInitSegment = function(e, t, a, r) {
                            this._audioTrack = {
                                container: "audio/adts",
                                type: "audio",
                                id: 0,
                                sequenceNumber: 0,
                                isAAC: !0,
                                samples: [],
                                len: 0,
                                manifestCodec: t,
                                duration: r,
                                inputTimeScale: 9e4
                            }
                        }
                        ,
                        t.resetTimeStamp = function() {}
                        ,
                        e.probe = function(e) {
                            if (!e)
                                return !1;
                            for (var t = (y.default.getID3Data(e, 0) || []).length, a = e.length; t < a; t++)
                                if (h(e, t))
                                    return s.logger.log("ADTS sync word found !"),
                                    !0;
                            return !1
                        }
                        ,
                        t.append = function(e, t, a, r) {
                            for (var n = this._audioTrack, i = y.default.getID3Data(e, 0) || [], l = y.default.getTimeStamp(i), u = Object(o.isFiniteNumber)(l) ? 90 * l : 9e4 * t, d = 0, c = u, h = e.length, g = i.length, _ = [{
                                pts: c,
                                dts: c,
                                data: i
                            }]; g < h - 1; )
                                if (f(e, g) && g + 5 < h) {
                                    p(n, this.observer, e, g, n.manifestCodec);
                                    var v = m(n, e, g, u, d);
                                    if (!v) {
                                        s.logger.log("Unable to parse AAC frame");
                                        break
                                    }
                                    g += v.length,
                                    c = v.sample.pts,
                                    d++
                                } else
                                    y.default.isHeader(e, g) ? (i = y.default.getID3Data(e, g),
                                    _.push({
                                        pts: c,
                                        dts: c,
                                        data: i
                                    }),
                                    g += i.length) : g++;
                            this.remuxer.remux(n, {
                                samples: []
                            }, {
                                samples: _,
                                inputTimeScale: 9e4
                            }, {
                                samples: []
                            }, t, a, r)
                        }
                        ,
                        t.destroy = function() {}
                        ,
                        e
                    }()
                      , v = a("./src/demux/mp4demuxer.js")
                      , b = {
                        BitratesMap: [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160],
                        SamplingRateMap: [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
                        SamplesCoefficients: [[0, 72, 144, 12], [0, 0, 0, 0], [0, 72, 144, 12], [0, 144, 144, 12]],
                        BytesInSlot: [0, 1, 1, 4],
                        appendFrame: function(e, t, a, r, n) {
                            if (!(a + 24 > t.length)) {
                                var i = this.parseHeader(t, a);
                                if (i && a + i.frameLength <= t.length) {
                                    var o = r + n * (9e4 * i.samplesPerFrame / i.sampleRate)
                                      , s = {
                                        unit: t.subarray(a, a + i.frameLength),
                                        pts: o,
                                        dts: o
                                    };
                                    return e.config = [],
                                    e.channelCount = i.channelCount,
                                    e.samplerate = i.sampleRate,
                                    e.samples.push(s),
                                    {
                                        sample: s,
                                        length: i.frameLength
                                    }
                                }
                            }
                        },
                        parseHeader: function(e, t) {
                            var a = e[t + 1] >> 3 & 3
                              , r = e[t + 1] >> 1 & 3
                              , n = e[t + 2] >> 4 & 15
                              , i = e[t + 2] >> 2 & 3
                              , o = e[t + 2] >> 1 & 1;
                            if (1 !== a && 0 !== n && 15 !== n && 3 !== i) {
                                var s = 3 === a ? 3 - r : 3 === r ? 3 : 4
                                  , l = 1e3 * b.BitratesMap[14 * s + n - 1]
                                  , u = 3 === a ? 0 : 2 === a ? 1 : 2
                                  , d = b.SamplingRateMap[3 * u + i]
                                  , c = e[t + 3] >> 6 == 3 ? 1 : 2
                                  , f = b.SamplesCoefficients[a][r]
                                  , h = b.BytesInSlot[r]
                                  , p = 8 * f * h;
                                return {
                                    sampleRate: d,
                                    channelCount: c,
                                    frameLength: parseInt(f * l / d + o, 10) * h,
                                    samplesPerFrame: p
                                }
                            }
                        },
                        isHeaderPattern: function(e, t) {
                            return 255 === e[t] && 224 == (224 & e[t + 1]) && 0 != (6 & e[t + 1])
                        },
                        isHeader: function(e, t) {
                            return !!(t + 1 < e.length && this.isHeaderPattern(e, t))
                        },
                        probe: function(e, t) {
                            if (t + 1 < e.length && this.isHeaderPattern(e, t)) {
                                var a = this.parseHeader(e, t)
                                  , r = 4;
                                a && a.frameLength && (r = a.frameLength);
                                var n = t + r;
                                if (n === e.length || n + 1 < e.length && this.isHeaderPattern(e, n))
                                    return !0
                            }
                            return !1
                        }
                    }
                      , E = b
                      , k = function() {
                        function e(e) {
                            this.data = e,
                            this.bytesAvailable = e.byteLength,
                            this.word = 0,
                            this.bitsAvailable = 0
                        }
                        var t = e.prototype;
                        return t.loadWord = function() {
                            var e = this.data
                              , t = this.bytesAvailable
                              , a = e.byteLength - t
                              , r = new Uint8Array(4)
                              , n = Math.min(4, t);
                            if (0 === n)
                                throw new Error("no bytes available");
                            r.set(e.subarray(a, a + n)),
                            this.word = new DataView(r.buffer).getUint32(0),
                            this.bitsAvailable = 8 * n,
                            this.bytesAvailable -= n
                        }
                        ,
                        t.skipBits = function(e) {
                            var t;
                            this.bitsAvailable > e ? (this.word <<= e,
                            this.bitsAvailable -= e) : (e -= this.bitsAvailable,
                            e -= (t = e >> 3) >> 3,
                            this.bytesAvailable -= t,
                            this.loadWord(),
                            this.word <<= e,
                            this.bitsAvailable -= e)
                        }
                        ,
                        t.readBits = function(e) {
                            var t = Math.min(this.bitsAvailable, e)
                              , a = this.word >>> 32 - t;
                            return e > 32 && s.logger.error("Cannot read more than 32 bits at a time"),
                            this.bitsAvailable -= t,
                            this.bitsAvailable > 0 ? this.word <<= t : this.bytesAvailable > 0 && this.loadWord(),
                            (t = e - t) > 0 && this.bitsAvailable ? a << t | this.readBits(t) : a
                        }
                        ,
                        t.skipLZ = function() {
                            var e;
                            for (e = 0; e < this.bitsAvailable; ++e)
                                if (0 != (this.word & 2147483648 >>> e))
                                    return this.word <<= e,
                                    this.bitsAvailable -= e,
                                    e;
                            return this.loadWord(),
                            e + this.skipLZ()
                        }
                        ,
                        t.skipUEG = function() {
                            this.skipBits(1 + this.skipLZ())
                        }
                        ,
                        t.skipEG = function() {
                            this.skipBits(1 + this.skipLZ())
                        }
                        ,
                        t.readUEG = function() {
                            var e = this.skipLZ();
                            return this.readBits(e + 1) - 1
                        }
                        ,
                        t.readEG = function() {
                            var e = this.readUEG();
                            return 1 & e ? 1 + e >>> 1 : -1 * (e >>> 1)
                        }
                        ,
                        t.readBoolean = function() {
                            return 1 === this.readBits(1)
                        }
                        ,
                        t.readUByte = function() {
                            return this.readBits(8)
                        }
                        ,
                        t.readUShort = function() {
                            return this.readBits(16)
                        }
                        ,
                        t.readUInt = function() {
                            return this.readBits(32)
                        }
                        ,
                        t.skipScalingList = function(e) {
                            var t, a = 8, r = 8;
                            for (t = 0; t < e; t++)
                                0 !== r && (r = (a + this.readEG() + 256) % 256),
                                a = 0 === r ? a : r
                        }
                        ,
                        t.readSPS = function() {
                            var e, t, a, r, n, i, o, s = 0, l = 0, u = 0, d = 0, c = this.readUByte.bind(this), f = this.readBits.bind(this), h = this.readUEG.bind(this), p = this.readBoolean.bind(this), g = this.skipBits.bind(this), m = this.skipEG.bind(this), y = this.skipUEG.bind(this), _ = this.skipScalingList.bind(this);
                            if (c(),
                            e = c(),
                            f(5),
                            g(3),
                            c(),
                            y(),
                            100 === e || 110 === e || 122 === e || 244 === e || 44 === e || 83 === e || 86 === e || 118 === e || 128 === e) {
                                var v = h();
                                if (3 === v && g(1),
                                y(),
                                y(),
                                g(1),
                                p())
                                    for (i = 3 !== v ? 8 : 12,
                                    o = 0; o < i; o++)
                                        p() && _(o < 6 ? 16 : 64)
                            }
                            y();
                            var b = h();
                            if (0 === b)
                                h();
                            else if (1 === b)
                                for (g(1),
                                m(),
                                m(),
                                t = h(),
                                o = 0; o < t; o++)
                                    m();
                            y(),
                            g(1),
                            a = h(),
                            r = h(),
                            0 === (n = f(1)) && g(1),
                            g(1),
                            p() && (s = h(),
                            l = h(),
                            u = h(),
                            d = h());
                            var E = [1, 1];
                            if (p() && p())
                                switch (c()) {
                                case 1:
                                    E = [1, 1];
                                    break;
                                case 2:
                                    E = [12, 11];
                                    break;
                                case 3:
                                    E = [10, 11];
                                    break;
                                case 4:
                                    E = [16, 11];
                                    break;
                                case 5:
                                    E = [40, 33];
                                    break;
                                case 6:
                                    E = [24, 11];
                                    break;
                                case 7:
                                    E = [20, 11];
                                    break;
                                case 8:
                                    E = [32, 11];
                                    break;
                                case 9:
                                    E = [80, 33];
                                    break;
                                case 10:
                                    E = [18, 11];
                                    break;
                                case 11:
                                    E = [15, 11];
                                    break;
                                case 12:
                                    E = [64, 33];
                                    break;
                                case 13:
                                    E = [160, 99];
                                    break;
                                case 14:
                                    E = [4, 3];
                                    break;
                                case 15:
                                    E = [3, 2];
                                    break;
                                case 16:
                                    E = [2, 1];
                                    break;
                                case 255:
                                    E = [c() << 8 | c(), c() << 8 | c()]
                                }
                            return {
                                width: Math.ceil(16 * (a + 1) - 2 * s - 2 * l),
                                height: (2 - n) * (r + 1) * 16 - (n ? 2 : 4) * (u + d),
                                pixelRatio: E
                            }
                        }
                        ,
                        t.readSliceType = function() {
                            return this.readUByte(),
                            this.readUEG(),
                            this.readUEG()
                        }
                        ,
                        e
                    }()
                      , T = function() {
                        function e(e, t, a, r) {
                            this.decryptdata = a,
                            this.discardEPB = r,
                            this.decrypter = new i.default(e,t,{
                                removePKCS7Padding: !1
                            })
                        }
                        var t = e.prototype;
                        return t.decryptBuffer = function(e, t) {
                            this.decrypter.decrypt(e, this.decryptdata.key.buffer, this.decryptdata.iv.buffer, t)
                        }
                        ,
                        t.decryptAacSample = function(e, t, a, r) {
                            var n = e[t].unit
                              , i = n.subarray(16, n.length - n.length % 16)
                              , o = i.buffer.slice(i.byteOffset, i.byteOffset + i.length)
                              , s = this;
                            this.decryptBuffer(o, (function(i) {
                                i = new Uint8Array(i),
                                n.set(i, 16),
                                r || s.decryptAacSamples(e, t + 1, a)
                            }
                            ))
                        }
                        ,
                        t.decryptAacSamples = function(e, t, a) {
                            for (; ; t++) {
                                if (t >= e.length)
                                    return void a();
                                if (!(e[t].unit.length < 32)) {
                                    var r = this.decrypter.isSync();
                                    if (this.decryptAacSample(e, t, a, r),
                                    !r)
                                        return
                                }
                            }
                        }
                        ,
                        t.getAvcEncryptedData = function(e) {
                            for (var t = 16 * Math.floor((e.length - 48) / 160) + 16, a = new Int8Array(t), r = 0, n = 32; n <= e.length - 16; n += 160,
                            r += 16)
                                a.set(e.subarray(n, n + 16), r);
                            return a
                        }
                        ,
                        t.getAvcDecryptedUnit = function(e, t) {
                            t = new Uint8Array(t);
                            for (var a = 0, r = 32; r <= e.length - 16; r += 160,
                            a += 16)
                                e.set(t.subarray(a, a + 16), r);
                            return e
                        }
                        ,
                        t.decryptAvcSample = function(e, t, a, r, n, i) {
                            var o = this.discardEPB(n.data)
                              , s = this.getAvcEncryptedData(o)
                              , l = this;
                            this.decryptBuffer(s.buffer, (function(s) {
                                n.data = l.getAvcDecryptedUnit(o, s),
                                i || l.decryptAvcSamples(e, t, a + 1, r)
                            }
                            ))
                        }
                        ,
                        t.decryptAvcSamples = function(e, t, a, r) {
                            for (; ; t++,
                            a = 0) {
                                if (t >= e.length)
                                    return void r();
                                for (var n = e[t].units; !(a >= n.length); a++) {
                                    var i = n[a];
                                    if (!(i.length <= 48 || 1 !== i.type && 5 !== i.type)) {
                                        var o = this.decrypter.isSync();
                                        if (this.decryptAvcSample(e, t, a, r, i, o),
                                        !o)
                                            return
                                    }
                                }
                            }
                        }
                        ,
                        e
                    }()
                      , S = {
                        video: 1,
                        audio: 2,
                        id3: 3,
                        text: 4
                    }
                      , A = function() {
                        function e(e, t, a, r) {
                            this.observer = e,
                            this.config = a,
                            this.typeSupported = r,
                            this.remuxer = t,
                            this.sampleAes = null,
                            this.pmtUnknownTypes = {}
                        }
                        var t = e.prototype;
                        return t.setDecryptData = function(e) {
                            null != e && null != e.key && "SAMPLE-AES" === e.method ? this.sampleAes = new T(this.observer,this.config,e,this.discardEPB) : this.sampleAes = null
                        }
                        ,
                        e.probe = function(t) {
                            var a = e._syncOffset(t);
                            return !(a < 0 || (a && s.logger.warn("MPEG2-TS detected but first sync word found @ offset " + a + ", junk ahead ?"),
                            0))
                        }
                        ,
                        e._syncOffset = function(e) {
                            for (var t = Math.min(1e3, e.length - 564), a = 0; a < t; ) {
                                if (71 === e[a] && 71 === e[a + 188] && 71 === e[a + 376])
                                    return a;
                                a++
                            }
                            return -1
                        }
                        ,
                        e.createTrack = function(e, t) {
                            return {
                                container: "video" === e || "audio" === e ? "video/mp2t" : void 0,
                                type: e,
                                id: S[e],
                                pid: -1,
                                inputTimeScale: 9e4,
                                sequenceNumber: 0,
                                samples: [],
                                dropped: "video" === e ? 0 : void 0,
                                isAAC: "audio" === e || void 0,
                                duration: "audio" === e ? t : void 0
                            }
                        }
                        ,
                        t.resetInitSegment = function(t, a, r, n) {
                            this.pmtParsed = !1,
                            this._pmtId = -1,
                            this.pmtUnknownTypes = {},
                            this._avcTrack = e.createTrack("video", n),
                            this._audioTrack = e.createTrack("audio", n),
                            this._id3Track = e.createTrack("id3", n),
                            this._txtTrack = e.createTrack("text", n),
                            this.aacOverFlow = null,
                            this.aacLastPTS = null,
                            this.avcSample = null,
                            this.audioCodec = a,
                            this.videoCodec = r,
                            this._duration = n
                        }
                        ,
                        t.resetTimeStamp = function() {}
                        ,
                        t.append = function(t, a, i, o) {
                            var l, u, d, c, f, h = t.length, p = !1;
                            this.pmtUnknownTypes = {},
                            this.contiguous = i;
                            var g = this.pmtParsed
                              , m = this._avcTrack
                              , y = this._audioTrack
                              , _ = this._id3Track
                              , v = m.pid
                              , b = y.pid
                              , E = _.pid
                              , k = this._pmtId
                              , T = m.pesData
                              , S = y.pesData
                              , A = _.pesData
                              , C = this._parsePAT
                              , I = this._parsePMT.bind(this)
                              , P = this._parsePES
                              , w = this._parseAVCPES.bind(this)
                              , M = this._parseAACPES.bind(this)
                              , R = this._parseMPEGPES.bind(this)
                              , x = this._parseID3PES.bind(this)
                              , D = e._syncOffset(t);
                            for (h -= (h + D) % 188,
                            l = D; l < h; l += 188)
                                if (71 === t[l]) {
                                    if (u = !!(64 & t[l + 1]),
                                    d = ((31 & t[l + 1]) << 8) + t[l + 2],
                                    (48 & t[l + 3]) >> 4 > 1) {
                                        if ((c = l + 5 + t[l + 4]) === l + 188)
                                            continue
                                    } else
                                        c = l + 4;
                                    switch (d) {
                                    case v:
                                        u && (T && (f = P(T)) && w(f, !1),
                                        T = {
                                            data: [],
                                            size: 0
                                        }),
                                        T && (T.data.push(t.subarray(c, l + 188)),
                                        T.size += l + 188 - c);
                                        break;
                                    case b:
                                        u && (S && (f = P(S)) && (y.isAAC ? M(f) : R(f)),
                                        S = {
                                            data: [],
                                            size: 0
                                        }),
                                        S && (S.data.push(t.subarray(c, l + 188)),
                                        S.size += l + 188 - c);
                                        break;
                                    case E:
                                        u && (A && (f = P(A)) && x(f),
                                        A = {
                                            data: [],
                                            size: 0
                                        }),
                                        A && (A.data.push(t.subarray(c, l + 188)),
                                        A.size += l + 188 - c);
                                        break;
                                    case 0:
                                        u && (c += t[c] + 1),
                                        k = this._pmtId = C(t, c);
                                        break;
                                    case k:
                                        u && (c += t[c] + 1);
                                        var O = I(t, c, !0 === this.typeSupported.mpeg || !0 === this.typeSupported.mp3, null != this.sampleAes);
                                        (v = O.avc) > 0 && (m.pid = v),
                                        (b = O.audio) > 0 && (y.pid = b,
                                        y.isAAC = O.isAAC),
                                        (E = O.id3) > 0 && (_.pid = E),
                                        p && !g && (s.logger.log("reparse from beginning"),
                                        p = !1,
                                        l = D - 188),
                                        g = this.pmtParsed = !0;
                                        break;
                                    case 17:
                                    case 8191:
                                        break;
                                    default:
                                        p = !0
                                    }
                                } else
                                    this.observer.trigger(r.default.ERROR, {
                                        type: n.ErrorTypes.MEDIA_ERROR,
                                        details: n.ErrorDetails.FRAG_PARSING_ERROR,
                                        fatal: !1,
                                        reason: "TS packet did not start with 0x47"
                                    });
                            T && (f = P(T)) ? (w(f, !0),
                            m.pesData = null) : m.pesData = T,
                            S && (f = P(S)) ? (y.isAAC ? M(f) : R(f),
                            y.pesData = null) : (S && S.size && s.logger.log("last AAC PES packet truncated,might overlap between fragments"),
                            y.pesData = S),
                            A && (f = P(A)) ? (x(f),
                            _.pesData = null) : _.pesData = A,
                            null == this.sampleAes ? this.remuxer.remux(y, m, _, this._txtTrack, a, i, o) : this.decryptAndRemux(y, m, _, this._txtTrack, a, i, o)
                        }
                        ,
                        t.decryptAndRemux = function(e, t, a, r, n, i, o) {
                            if (e.samples && e.isAAC) {
                                var s = this;
                                this.sampleAes.decryptAacSamples(e.samples, 0, (function() {
                                    s.decryptAndRemuxAvc(e, t, a, r, n, i, o)
                                }
                                ))
                            } else
                                this.decryptAndRemuxAvc(e, t, a, r, n, i, o)
                        }
                        ,
                        t.decryptAndRemuxAvc = function(e, t, a, r, n, i, o) {
                            if (t.samples) {
                                var s = this;
                                this.sampleAes.decryptAvcSamples(t.samples, 0, 0, (function() {
                                    s.remuxer.remux(e, t, a, r, n, i, o)
                                }
                                ))
                            } else
                                this.remuxer.remux(e, t, a, r, n, i, o)
                        }
                        ,
                        t.destroy = function() {
                            this._initPTS = this._initDTS = void 0,
                            this._duration = 0
                        }
                        ,
                        t._parsePAT = function(e, t) {
                            return (31 & e[t + 10]) << 8 | e[t + 11]
                        }
                        ,
                        t._trackUnknownPmt = function(e, t, a) {
                            var r = this.pmtUnknownTypes[e] || 0;
                            return 0 === r && (this.pmtUnknownTypes[e] = 0,
                            t.call(s.logger, a)),
                            this.pmtUnknownTypes[e]++,
                            r
                        }
                        ,
                        t._parsePMT = function(e, t, a, r) {
                            var n, i, o = {
                                audio: -1,
                                avc: -1,
                                id3: -1,
                                isAAC: !0
                            };
                            for (n = t + 3 + ((15 & e[t + 1]) << 8 | e[t + 2]) - 4,
                            t += 12 + ((15 & e[t + 10]) << 8 | e[t + 11]); t < n; ) {
                                switch (i = (31 & e[t + 1]) << 8 | e[t + 2],
                                e[t]) {
                                case 207:
                                    if (!r) {
                                        this._trackUnknownPmt(e[t], s.logger.warn, "ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");
                                        break
                                    }
                                case 15:
                                    -1 === o.audio && (o.audio = i);
                                    break;
                                case 21:
                                    -1 === o.id3 && (o.id3 = i);
                                    break;
                                case 219:
                                    if (!r) {
                                        this._trackUnknownPmt(e[t], s.logger.warn, "H.264 with AES-128-CBC slice encryption found in unencrypted stream");
                                        break
                                    }
                                case 27:
                                    -1 === o.avc && (o.avc = i);
                                    break;
                                case 3:
                                case 4:
                                    a ? -1 === o.audio && (o.audio = i,
                                    o.isAAC = !1) : this._trackUnknownPmt(e[t], s.logger.warn, "MPEG audio found, not supported in this browser");
                                    break;
                                case 36:
                                    this._trackUnknownPmt(e[t], s.logger.warn, "Unsupported HEVC stream type found");
                                    break;
                                default:
                                    this._trackUnknownPmt(e[t], s.logger.log, "Unknown stream type:" + e[t])
                                }
                                t += 5 + ((15 & e[t + 3]) << 8 | e[t + 4])
                            }
                            return o
                        }
                        ,
                        t._parsePES = function(e) {
                            var t, a, r, n, i, o, l, u, d = 0, c = e.data;
                            if (!e || 0 === e.size)
                                return null;
                            for (; c[0].length < 19 && c.length > 1; ) {
                                var f = new Uint8Array(c[0].length + c[1].length);
                                f.set(c[0]),
                                f.set(c[1], c[0].length),
                                c[0] = f,
                                c.splice(1, 1)
                            }
                            if (1 === ((t = c[0])[0] << 16) + (t[1] << 8) + t[2]) {
                                if ((r = (t[4] << 8) + t[5]) && r > e.size - 6)
                                    return null;
                                if (192 & (a = t[7]) && (o = 536870912 * (14 & t[9]) + 4194304 * (255 & t[10]) + 16384 * (254 & t[11]) + 128 * (255 & t[12]) + (254 & t[13]) / 2,
                                64 & a ? o - (l = 536870912 * (14 & t[14]) + 4194304 * (255 & t[15]) + 16384 * (254 & t[16]) + 128 * (255 & t[17]) + (254 & t[18]) / 2) > 54e5 && (s.logger.warn(Math.round((o - l) / 9e4) + "s delta between PTS and DTS, align them"),
                                o = l) : l = o),
                                u = (n = t[8]) + 9,
                                e.size <= u)
                                    return null;
                                e.size -= u,
                                i = new Uint8Array(e.size);
                                for (var h = 0, p = c.length; h < p; h++) {
                                    var g = (t = c[h]).byteLength;
                                    if (u) {
                                        if (u > g) {
                                            u -= g;
                                            continue
                                        }
                                        t = t.subarray(u),
                                        g -= u,
                                        u = 0
                                    }
                                    i.set(t, d),
                                    d += g
                                }
                                return r && (r -= n + 3),
                                {
                                    data: i,
                                    pts: o,
                                    dts: l,
                                    len: r
                                }
                            }
                            return null
                        }
                        ,
                        t.pushAccesUnit = function(e, t) {
                            if (e.units.length && e.frame) {
                                var a = t.samples
                                  , r = a.length;
                                if (isNaN(e.pts)) {
                                    if (!r)
                                        return void t.dropped++;
                                    var n = a[r - 1];
                                    e.pts = n.pts,
                                    e.dts = n.dts
                                }
                                !this.config.forceKeyFrameOnDiscontinuity || !0 === e.key || t.sps && (r || this.contiguous) ? (e.id = r,
                                a.push(e)) : t.dropped++
                            }
                            e.debug.length && s.logger.log(e.pts + "/" + e.dts + ":" + e.debug)
                        }
                        ,
                        t._parseAVCPES = function(e, t) {
                            var a, r, n, i = this, o = this._avcTrack, s = this._parseAVCNALu(e.data), l = this.avcSample, u = !1, d = this.pushAccesUnit.bind(this), c = function(e, t, a, r) {
                                return {
                                    key: e,
                                    pts: t,
                                    dts: a,
                                    units: [],
                                    debug: r
                                }
                            };
                            e.data = null,
                            l && s.length && !o.audFound && (d(l, o),
                            l = this.avcSample = c(!1, e.pts, e.dts, "")),
                            s.forEach((function(t) {
                                switch (t.type) {
                                case 1:
                                    r = !0,
                                    l || (l = i.avcSample = c(!0, e.pts, e.dts, "")),
                                    l.frame = !0;
                                    var s = t.data;
                                    if (u && s.length > 4) {
                                        var f = new k(s).readSliceType();
                                        2 !== f && 4 !== f && 7 !== f && 9 !== f || (l.key = !0)
                                    }
                                    break;
                                case 5:
                                    r = !0,
                                    l || (l = i.avcSample = c(!0, e.pts, e.dts, "")),
                                    l.key = !0,
                                    l.frame = !0;
                                    break;
                                case 6:
                                    r = !0,
                                    (a = new k(i.discardEPB(t.data))).readUByte();
                                    for (var h = 0, p = 0, g = !1, m = 0; !g && a.bytesAvailable > 1; ) {
                                        h = 0;
                                        do {
                                            h += m = a.readUByte()
                                        } while (255 === m);
                                        p = 0;
                                        do {
                                            p += m = a.readUByte()
                                        } while (255 === m);
                                        if (4 === h && 0 !== a.bytesAvailable) {
                                            if (g = !0,
                                            181 === a.readUByte() && 49 === a.readUShort() && 1195456820 === a.readUInt() && 3 === a.readUByte()) {
                                                var _ = a.readUByte()
                                                  , v = 31 & _
                                                  , b = [_, a.readUByte()];
                                                for (n = 0; n < v; n++)
                                                    b.push(a.readUByte()),
                                                    b.push(a.readUByte()),
                                                    b.push(a.readUByte());
                                                i._insertSampleInOrder(i._txtTrack.samples, {
                                                    type: 3,
                                                    pts: e.pts,
                                                    bytes: b
                                                })
                                            }
                                        } else if (5 === h && 0 !== a.bytesAvailable) {
                                            if (g = !0,
                                            p > 16) {
                                                var E = [];
                                                for (n = 0; n < 16; n++)
                                                    E.push(a.readUByte().toString(16)),
                                                    3 !== n && 5 !== n && 7 !== n && 9 !== n || E.push("-");
                                                var T = p - 16
                                                  , S = new Uint8Array(T);
                                                for (n = 0; n < T; n++)
                                                    S[n] = a.readUByte();
                                                i._insertSampleInOrder(i._txtTrack.samples, {
                                                    pts: e.pts,
                                                    payloadType: h,
                                                    uuid: E.join(""),
                                                    userDataBytes: S,
                                                    userData: Object(y.utf8ArrayToStr)(S.buffer)
                                                })
                                            }
                                        } else if (p < a.bytesAvailable)
                                            for (n = 0; n < p; n++)
                                                a.readUByte()
                                    }
                                    break;
                                case 7:
                                    if (r = !0,
                                    u = !0,
                                    !o.sps) {
                                        var A = (a = new k(t.data)).readSPS();
                                        o.width = A.width,
                                        o.height = A.height,
                                        o.pixelRatio = A.pixelRatio,
                                        o.sps = [t.data],
                                        o.duration = i._duration;
                                        var C = t.data.subarray(1, 4)
                                          , I = "avc1.";
                                        for (n = 0; n < 3; n++) {
                                            var P = C[n].toString(16);
                                            P.length < 2 && (P = "0" + P),
                                            I += P
                                        }
                                        o.codec = I
                                    }
                                    break;
                                case 8:
                                    r = !0,
                                    o.pps || (o.pps = [t.data]);
                                    break;
                                case 9:
                                    r = !1,
                                    o.audFound = !0,
                                    l && d(l, o),
                                    l = i.avcSample = c(!1, e.pts, e.dts, "");
                                    break;
                                case 12:
                                    r = !1;
                                    break;
                                default:
                                    r = !1,
                                    l && (l.debug += "unknown NAL " + t.type + " ")
                                }
                                l && r && l.units.push(t)
                            }
                            )),
                            t && l && (d(l, o),
                            this.avcSample = null)
                        }
                        ,
                        t._insertSampleInOrder = function(e, t) {
                            var a = e.length;
                            if (a > 0) {
                                if (t.pts >= e[a - 1].pts)
                                    e.push(t);
                                else
                                    for (var r = a - 1; r >= 0; r--)
                                        if (t.pts < e[r].pts) {
                                            e.splice(r, 0, t);
                                            break
                                        }
                            } else
                                e.push(t)
                        }
                        ,
                        t._getLastNalUnit = function() {
                            var e, t = this.avcSample;
                            if (!t || 0 === t.units.length) {
                                var a = this._avcTrack.samples;
                                t = a[a.length - 1]
                            }
                            if (t) {
                                var r = t.units;
                                e = r[r.length - 1]
                            }
                            return e
                        }
                        ,
                        t._parseAVCNALu = function(e) {
                            var t, a, r, n, i = 0, o = e.byteLength, s = this._avcTrack, l = s.naluState || 0, u = l, d = [], c = -1;
                            for (-1 === l && (c = 0,
                            n = 31 & e[0],
                            l = 0,
                            i = 1); i < o; )
                                if (t = e[i++],
                                l)
                                    if (1 !== l)
                                        if (t)
                                            if (1 === t) {
                                                if (c >= 0)
                                                    r = {
                                                        data: e.subarray(c, i - l - 1),
                                                        type: n
                                                    },
                                                    d.push(r);
                                                else {
                                                    var f = this._getLastNalUnit();
                                                    if (f && (u && i <= 4 - u && f.state && (f.data = f.data.subarray(0, f.data.byteLength - u)),
                                                    (a = i - l - 1) > 0)) {
                                                        var h = new Uint8Array(f.data.byteLength + a);
                                                        h.set(f.data, 0),
                                                        h.set(e.subarray(0, a), f.data.byteLength),
                                                        f.data = h
                                                    }
                                                }
                                                i < o ? (c = i,
                                                n = 31 & e[i],
                                                l = 0) : l = -1
                                            } else
                                                l = 0;
                                        else
                                            l = 3;
                                    else
                                        l = t ? 0 : 2;
                                else
                                    l = t ? 0 : 1;
                            if (c >= 0 && l >= 0 && (r = {
                                data: e.subarray(c, o),
                                type: n,
                                state: l
                            },
                            d.push(r)),
                            0 === d.length) {
                                var p = this._getLastNalUnit();
                                if (p) {
                                    var g = new Uint8Array(p.data.byteLength + e.byteLength);
                                    g.set(p.data, 0),
                                    g.set(e, p.data.byteLength),
                                    p.data = g
                                }
                            }
                            return s.naluState = l,
                            d
                        }
                        ,
                        t.discardEPB = function(e) {
                            for (var t, a, r = e.byteLength, n = [], i = 1; i < r - 2; )
                                0 === e[i] && 0 === e[i + 1] && 3 === e[i + 2] ? (n.push(i + 2),
                                i += 2) : i++;
                            if (0 === n.length)
                                return e;
                            t = r - n.length,
                            a = new Uint8Array(t);
                            var o = 0;
                            for (i = 0; i < t; o++,
                            i++)
                                o === n[0] && (o++,
                                n.shift()),
                                a[i] = e[o];
                            return a
                        }
                        ,
                        t._parseAACPES = function(e) {
                            var t, a, i, o, l, u, d, c = this._audioTrack, h = e.data, y = e.pts, _ = this.aacOverFlow, v = this.aacLastPTS;
                            if (_) {
                                var b = new Uint8Array(_.byteLength + h.byteLength);
                                b.set(_, 0),
                                b.set(h, _.byteLength),
                                h = b
                            }
                            for (i = 0,
                            l = h.length; i < l - 1 && !f(h, i); i++)
                                ;
                            if (!i || (i < l - 1 ? (u = "AAC PES did not start with ADTS header,offset:" + i,
                            d = !1) : (u = "no ADTS header found in AAC PES",
                            d = !0),
                            s.logger.warn("parsing error:" + u),
                            this.observer.trigger(r.default.ERROR, {
                                type: n.ErrorTypes.MEDIA_ERROR,
                                details: n.ErrorDetails.FRAG_PARSING_ERROR,
                                fatal: d,
                                reason: u
                            }),
                            !d)) {
                                if (p(c, this.observer, h, i, this.audioCodec),
                                a = 0,
                                t = g(c.samplerate),
                                _ && v) {
                                    var E = v + t;
                                    Math.abs(E - y) > 1 && (s.logger.log("AAC: align PTS for overlapping frames by " + Math.round((E - y) / 90)),
                                    y = E)
                                }
                                for (; i < l; ) {
                                    if (f(h, i)) {
                                        if (i + 5 < l) {
                                            var k = m(c, h, i, y, a);
                                            if (k) {
                                                i += k.length,
                                                o = k.sample.pts,
                                                a++;
                                                continue
                                            }
                                        }
                                        break
                                    }
                                    i++
                                }
                                _ = i < l ? h.subarray(i, l) : null,
                                this.aacOverFlow = _,
                                this.aacLastPTS = o
                            }
                        }
                        ,
                        t._parseMPEGPES = function(e) {
                            for (var t = e.data, a = t.length, r = 0, n = 0, i = e.pts; n < a; )
                                if (E.isHeader(t, n)) {
                                    var o = E.appendFrame(this._audioTrack, t, n, i, r);
                                    if (!o)
                                        break;
                                    n += o.length,
                                    r++
                                } else
                                    n++
                        }
                        ,
                        t._parseID3PES = function(e) {
                            this._id3Track.samples.push(e)
                        }
                        ,
                        e
                    }()
                      , C = function() {
                        function e(e, t, a) {
                            this.observer = e,
                            this.config = a,
                            this.remuxer = t
                        }
                        var t = e.prototype;
                        return t.resetInitSegment = function(e, t, a, r) {
                            this._audioTrack = {
                                container: "audio/mpeg",
                                type: "audio",
                                id: -1,
                                sequenceNumber: 0,
                                isAAC: !1,
                                samples: [],
                                len: 0,
                                manifestCodec: t,
                                duration: r,
                                inputTimeScale: 9e4
                            }
                        }
                        ,
                        t.resetTimeStamp = function() {}
                        ,
                        e.probe = function(e) {
                            var t, a, r = y.default.getID3Data(e, 0);
                            if (r && void 0 !== y.default.getTimeStamp(r))
                                for (t = r.length,
                                a = Math.min(e.length - 1, t + 100); t < a; t++)
                                    if (E.probe(e, t))
                                        return s.logger.log("MPEG Audio sync word found !"),
                                        !0;
                            return !1
                        }
                        ,
                        t.append = function(e, t, a, r) {
                            for (var n = y.default.getID3Data(e, 0), i = y.default.getTimeStamp(n), o = void 0 !== i ? 90 * i : 9e4 * t, s = n.length, l = e.length, u = 0, d = 0, c = this._audioTrack, f = [{
                                pts: o,
                                dts: o,
                                data: n
                            }]; s < l; )
                                if (E.isHeader(e, s)) {
                                    var h = E.appendFrame(c, e, s, o, u);
                                    if (!h)
                                        break;
                                    s += h.length,
                                    d = h.sample.pts,
                                    u++
                                } else
                                    y.default.isHeader(e, s) ? (n = y.default.getID3Data(e, s),
                                    f.push({
                                        pts: d,
                                        dts: d,
                                        data: n
                                    }),
                                    s += n.length) : s++;
                            this.remuxer.remux(c, {
                                samples: []
                            }, {
                                samples: f,
                                inputTimeScale: 9e4
                            }, {
                                samples: []
                            }, t, a, r)
                        }
                        ,
                        t.destroy = function() {}
                        ,
                        e
                    }()
                      , I = function() {
                        function e() {}
                        return e.getSilentFrame = function(e, t) {
                            switch (e) {
                            case "mp4a.40.2":
                                if (1 === t)
                                    return new Uint8Array([0, 200, 0, 128, 35, 128]);
                                if (2 === t)
                                    return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                                if (3 === t)
                                    return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                                if (4 === t)
                                    return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
                                if (5 === t)
                                    return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
                                if (6 === t)
                                    return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224]);
                                break;
                            default:
                                if (1 === t)
                                    return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                                if (2 === t)
                                    return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                                if (3 === t)
                                    return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94])
                            }
                            return null
                        }
                        ,
                        e
                    }()
                      , P = Math.pow(2, 32) - 1
                      , w = function() {
                        function e() {}
                        return e.init = function() {
                            var t;
                            for (t in e.types = {
                                avc1: [],
                                avcC: [],
                                btrt: [],
                                dinf: [],
                                dref: [],
                                esds: [],
                                ftyp: [],
                                hdlr: [],
                                mdat: [],
                                mdhd: [],
                                mdia: [],
                                mfhd: [],
                                minf: [],
                                moof: [],
                                moov: [],
                                mp4a: [],
                                ".mp3": [],
                                mvex: [],
                                mvhd: [],
                                pasp: [],
                                sdtp: [],
                                stbl: [],
                                stco: [],
                                stsc: [],
                                stsd: [],
                                stsz: [],
                                stts: [],
                                tfdt: [],
                                tfhd: [],
                                traf: [],
                                trak: [],
                                trun: [],
                                trex: [],
                                tkhd: [],
                                vmhd: [],
                                smhd: []
                            },
                            e.types)
                                e.types.hasOwnProperty(t) && (e.types[t] = [t.charCodeAt(0), t.charCodeAt(1), t.charCodeAt(2), t.charCodeAt(3)]);
                            var a = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0])
                              , r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
                            e.HDLR_TYPES = {
                                video: a,
                                audio: r
                            };
                            var n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1])
                              , i = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                            e.STTS = e.STSC = e.STCO = i,
                            e.STSZ = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]),
                            e.VMHD = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]),
                            e.SMHD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]),
                            e.STSD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
                            var o = new Uint8Array([105, 115, 111, 109])
                              , s = new Uint8Array([97, 118, 99, 49])
                              , l = new Uint8Array([0, 0, 0, 1]);
                            e.FTYP = e.box(e.types.ftyp, o, l, o, s),
                            e.DINF = e.box(e.types.dinf, e.box(e.types.dref, n))
                        }
                        ,
                        e.box = function(e) {
                            for (var t, a = Array.prototype.slice.call(arguments, 1), r = 8, n = a.length, i = n; n--; )
                                r += a[n].byteLength;
                            for ((t = new Uint8Array(r))[0] = r >> 24 & 255,
                            t[1] = r >> 16 & 255,
                            t[2] = r >> 8 & 255,
                            t[3] = 255 & r,
                            t.set(e, 4),
                            n = 0,
                            r = 8; n < i; n++)
                                t.set(a[n], r),
                                r += a[n].byteLength;
                            return t
                        }
                        ,
                        e.hdlr = function(t) {
                            return e.box(e.types.hdlr, e.HDLR_TYPES[t])
                        }
                        ,
                        e.mdat = function(t) {
                            return e.box(e.types.mdat, t)
                        }
                        ,
                        e.mdhd = function(t, a) {
                            a *= t;
                            var r = Math.floor(a / (P + 1))
                              , n = Math.floor(a % (P + 1));
                            return e.box(e.types.mdhd, new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, 85, 196, 0, 0]))
                        }
                        ,
                        e.mdia = function(t) {
                            return e.box(e.types.mdia, e.mdhd(t.timescale, t.duration), e.hdlr(t.type), e.minf(t))
                        }
                        ,
                        e.mfhd = function(t) {
                            return e.box(e.types.mfhd, new Uint8Array([0, 0, 0, 0, t >> 24, t >> 16 & 255, t >> 8 & 255, 255 & t]))
                        }
                        ,
                        e.minf = function(t) {
                            return "audio" === t.type ? e.box(e.types.minf, e.box(e.types.smhd, e.SMHD), e.DINF, e.stbl(t)) : e.box(e.types.minf, e.box(e.types.vmhd, e.VMHD), e.DINF, e.stbl(t))
                        }
                        ,
                        e.moof = function(t, a, r) {
                            return e.box(e.types.moof, e.mfhd(t), e.traf(r, a))
                        }
                        ,
                        e.moov = function(t) {
                            for (var a = t.length, r = []; a--; )
                                r[a] = e.trak(t[a]);
                            return e.box.apply(null, [e.types.moov, e.mvhd(t[0].timescale, t[0].duration)].concat(r).concat(e.mvex(t)))
                        }
                        ,
                        e.mvex = function(t) {
                            for (var a = t.length, r = []; a--; )
                                r[a] = e.trex(t[a]);
                            return e.box.apply(null, [e.types.mvex].concat(r))
                        }
                        ,
                        e.mvhd = function(t, a) {
                            a *= t;
                            var r = Math.floor(a / (P + 1))
                              , n = Math.floor(a % (P + 1))
                              , i = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
                            return e.box(e.types.mvhd, i)
                        }
                        ,
                        e.sdtp = function(t) {
                            var a, r, n = t.samples || [], i = new Uint8Array(4 + n.length);
                            for (r = 0; r < n.length; r++)
                                a = n[r].flags,
                                i[r + 4] = a.dependsOn << 4 | a.isDependedOn << 2 | a.hasRedundancy;
                            return e.box(e.types.sdtp, i)
                        }
                        ,
                        e.stbl = function(t) {
                            return e.box(e.types.stbl, e.stsd(t), e.box(e.types.stts, e.STTS), e.box(e.types.stsc, e.STSC), e.box(e.types.stsz, e.STSZ), e.box(e.types.stco, e.STCO))
                        }
                        ,
                        e.avc1 = function(t) {
                            var a, r, n, i = [], o = [];
                            for (a = 0; a < t.sps.length; a++)
                                n = (r = t.sps[a]).byteLength,
                                i.push(n >>> 8 & 255),
                                i.push(255 & n),
                                i = i.concat(Array.prototype.slice.call(r));
                            for (a = 0; a < t.pps.length; a++)
                                n = (r = t.pps[a]).byteLength,
                                o.push(n >>> 8 & 255),
                                o.push(255 & n),
                                o = o.concat(Array.prototype.slice.call(r));
                            var s = e.box(e.types.avcC, new Uint8Array([1, i[3], i[4], i[5], 255, 224 | t.sps.length].concat(i).concat([t.pps.length]).concat(o)))
                              , l = t.width
                              , u = t.height
                              , d = t.pixelRatio[0]
                              , c = t.pixelRatio[1];
                            return e.box(e.types.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, l >> 8 & 255, 255 & l, u >> 8 & 255, 255 & u, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 18, 100, 97, 105, 108, 121, 109, 111, 116, 105, 111, 110, 47, 104, 108, 115, 46, 106, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), s, e.box(e.types.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])), e.box(e.types.pasp, new Uint8Array([d >> 24, d >> 16 & 255, d >> 8 & 255, 255 & d, c >> 24, c >> 16 & 255, c >> 8 & 255, 255 & c])))
                        }
                        ,
                        e.esds = function(e) {
                            var t = e.config.length;
                            return new Uint8Array([0, 0, 0, 0, 3, 23 + t, 0, 1, 0, 4, 15 + t, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5].concat([t]).concat(e.config).concat([6, 1, 2]))
                        }
                        ,
                        e.mp4a = function(t) {
                            var a = t.samplerate;
                            return e.box(e.types.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, t.channelCount, 0, 16, 0, 0, 0, 0, a >> 8 & 255, 255 & a, 0, 0]), e.box(e.types.esds, e.esds(t)))
                        }
                        ,
                        e.mp3 = function(t) {
                            var a = t.samplerate;
                            return e.box(e.types[".mp3"], new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, t.channelCount, 0, 16, 0, 0, 0, 0, a >> 8 & 255, 255 & a, 0, 0]))
                        }
                        ,
                        e.stsd = function(t) {
                            return "audio" === t.type ? t.isAAC || "mp3" !== t.codec ? e.box(e.types.stsd, e.STSD, e.mp4a(t)) : e.box(e.types.stsd, e.STSD, e.mp3(t)) : e.box(e.types.stsd, e.STSD, e.avc1(t))
                        }
                        ,
                        e.tkhd = function(t) {
                            var a = t.id
                              , r = t.duration * t.timescale
                              , n = t.width
                              , i = t.height
                              , o = Math.floor(r / (P + 1))
                              , s = Math.floor(r % (P + 1));
                            return e.box(e.types.tkhd, new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, 255 & a, 0, 0, 0, 0, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o, s >> 24, s >> 16 & 255, s >> 8 & 255, 255 & s, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, n >> 8 & 255, 255 & n, 0, 0, i >> 8 & 255, 255 & i, 0, 0]))
                        }
                        ,
                        e.traf = function(t, a) {
                            var r = e.sdtp(t)
                              , n = t.id
                              , i = Math.floor(a / (P + 1))
                              , o = Math.floor(a % (P + 1));
                            return e.box(e.types.traf, e.box(e.types.tfhd, new Uint8Array([0, 0, 0, 0, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n])), e.box(e.types.tfdt, new Uint8Array([1, 0, 0, 0, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o])), e.trun(t, r.length + 16 + 20 + 8 + 16 + 8 + 8), r)
                        }
                        ,
                        e.trak = function(t) {
                            return t.duration = t.duration || 4294967295,
                            e.box(e.types.trak, e.tkhd(t), e.mdia(t))
                        }
                        ,
                        e.trex = function(t) {
                            var a = t.id;
                            return e.box(e.types.trex, new Uint8Array([0, 0, 0, 0, a >> 24, a >> 16 & 255, a >> 8 & 255, 255 & a, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]))
                        }
                        ,
                        e.trun = function(t, a) {
                            var r, n, i, o, s, l, u = t.samples || [], d = u.length, c = 12 + 16 * d, f = new Uint8Array(c);
                            for (a += 8 + c,
                            f.set([0, 0, 15, 1, d >>> 24 & 255, d >>> 16 & 255, d >>> 8 & 255, 255 & d, a >>> 24 & 255, a >>> 16 & 255, a >>> 8 & 255, 255 & a], 0),
                            r = 0; r < d; r++)
                                i = (n = u[r]).duration,
                                o = n.size,
                                s = n.flags,
                                l = n.cts,
                                f.set([i >>> 24 & 255, i >>> 16 & 255, i >>> 8 & 255, 255 & i, o >>> 24 & 255, o >>> 16 & 255, o >>> 8 & 255, 255 & o, s.isLeading << 2 | s.dependsOn, s.isDependedOn << 6 | s.hasRedundancy << 4 | s.paddingValue << 1 | s.isNonSync, 61440 & s.degradPrio, 15 & s.degradPrio, l >>> 24 & 255, l >>> 16 & 255, l >>> 8 & 255, 255 & l], 12 + 16 * r);
                            return e.box(e.types.trun, f)
                        }
                        ,
                        e.initSegment = function(t) {
                            e.types || e.init();
                            var a, r = e.moov(t);
                            return (a = new Uint8Array(e.FTYP.byteLength + r.byteLength)).set(e.FTYP),
                            a.set(r, e.FTYP.byteLength),
                            a
                        }
                        ,
                        e
                    }();
                    function M(e, t, a, r) {
                        void 0 === a && (a = 1),
                        void 0 === r && (r = !1);
                        var n = e * t * a;
                        return r ? Math.round(n) : n
                    }
                    function R(e, t) {
                        return void 0 === t && (t = !1),
                        M(e, 1e3, 1 / 9e4, t)
                    }
                    function x(e, t) {
                        return void 0 === t && (t = 1),
                        M(e, 9e4, 1 / t)
                    }
                    var D = x(10)
                      , O = x(.2)
                      , N = null;
                    function L(e, t) {
                        var a;
                        if (void 0 === t)
                            return e;
                        for (a = t < e ? -8589934592 : 8589934592; Math.abs(e - t) > 4294967296; )
                            e += a;
                        return e
                    }
                    var U, F = function() {
                        function e(e, t, a, r) {
                            if (this.observer = e,
                            this.config = t,
                            this.typeSupported = a,
                            this.ISGenerated = !1,
                            null === N) {
                                var n = navigator.userAgent.match(/Chrome\/(\d+)/i);
                                N = n ? parseInt(n[1]) : 0
                            }
                        }
                        var t = e.prototype;
                        return t.destroy = function() {}
                        ,
                        t.resetTimeStamp = function(e) {
                            this._initPTS = this._initDTS = e
                        }
                        ,
                        t.resetInitSegment = function() {
                            this.ISGenerated = !1
                        }
                        ,
                        t.getVideoStartPts = function(e) {
                            var t = !1
                              , a = e.reduce((function(e, a) {
                                var r = a.pts - e;
                                return r < -4294967296 ? (t = !0,
                                e) : r > 0 ? e : a.pts
                            }
                            ), e[0].pts);
                            return t && s.logger.debug("PTS rollover detected"),
                            a
                        }
                        ,
                        t.remux = function(e, t, a, n, i, o, l) {
                            if (this.ISGenerated || this.generateIS(e, t, i),
                            this.ISGenerated) {
                                var u = e.samples.length
                                  , d = t.samples.length
                                  , c = i
                                  , f = i;
                                if (u && d) {
                                    var h = this.getVideoStartPts(t.samples)
                                      , p = (e.samples[0].pts - h) / t.inputTimeScale;
                                    c += Math.max(0, p),
                                    f += Math.max(0, -p)
                                }
                                if (u) {
                                    e.timescale || (s.logger.warn("regenerate InitSegment as audio detected"),
                                    this.generateIS(e, t, i));
                                    var g, m = this.remuxAudio(e, c, o, l);
                                    d && (m && (g = m.endPTS - m.startPTS),
                                    t.timescale || (s.logger.warn("regenerate InitSegment as video detected"),
                                    this.generateIS(e, t, i)),
                                    this.remuxVideo(t, f, o, g))
                                } else if (d) {
                                    var y = this.remuxVideo(t, f, o, 0, l);
                                    y && e.codec && this.remuxEmptyAudio(e, c, o, y)
                                }
                            }
                            a.samples.length && this.remuxID3(a, i),
                            n.samples.length && this.remuxText(n, i),
                            this.observer.trigger(r.default.FRAG_PARSED)
                        }
                        ,
                        t.generateIS = function(e, t, a) {
                            var i, o, l = this.observer, u = e.samples, d = t.samples, c = this.typeSupported, f = "audio/mp4", h = {}, p = {
                                tracks: h
                            }, g = void 0 === this._initPTS;
                            if (g && (i = o = 1 / 0),
                            e.config && u.length && (e.timescale = e.samplerate,
                            s.logger.log("audio sampling rate : " + e.samplerate),
                            e.isAAC || (c.mpeg ? (f = "audio/mpeg",
                            e.codec = "") : c.mp3 && (e.codec = "mp3")),
                            h.audio = {
                                container: f,
                                codec: e.codec,
                                initSegment: !e.isAAC && c.mpeg ? new Uint8Array : w.initSegment([e]),
                                metadata: {
                                    channelCount: e.channelCount
                                }
                            },
                            g && (i = o = u[0].pts - Math.round(e.inputTimeScale * a))),
                            t.sps && t.pps && d.length) {
                                var m = t.inputTimeScale;
                                if (t.timescale = m,
                                h.video = {
                                    container: "video/mp4",
                                    codec: t.codec,
                                    initSegment: w.initSegment([t]),
                                    metadata: {
                                        width: t.width,
                                        height: t.height
                                    }
                                },
                                g) {
                                    var y = this.getVideoStartPts(d)
                                      , _ = Math.round(m * a);
                                    o = Math.min(o, d[0].dts - _),
                                    i = Math.min(i, y - _),
                                    this.observer.trigger(r.default.INIT_PTS_FOUND, {
                                        initPTS: i
                                    })
                                }
                            } else
                                g && h.audio && this.observer.trigger(r.default.INIT_PTS_FOUND, {
                                    initPTS: i
                                });
                            Object.keys(h).length ? (l.trigger(r.default.FRAG_PARSING_INIT_SEGMENT, p),
                            this.ISGenerated = !0,
                            g && (this._initPTS = i,
                            this._initDTS = o)) : l.trigger(r.default.ERROR, {
                                type: n.ErrorTypes.MEDIA_ERROR,
                                details: n.ErrorDetails.FRAG_PARSING_ERROR,
                                fatal: !1,
                                reason: "no audio/video samples found"
                            })
                        }
                        ,
                        t.remuxVideo = function(e, t, a, i) {
                            var o, l, u, d, c, f = e.timescale, h = e.samples, p = [], g = h.length, m = this._initPTS, y = 8, _ = Number.POSITIVE_INFINITY, v = Number.NEGATIVE_INFINITY, b = 0, E = !1, k = this.nextAvcDts;
                            if (0 !== g) {
                                a || (k = t * f - (h[0].pts - L(h[0].dts, h[0].pts)));
                                for (var T = 0; T < g; T++) {
                                    var S = h[T];
                                    S.pts = L(S.pts - m, k),
                                    S.dts = L(S.dts - m, k),
                                    S.dts > S.pts && (b = Math.max(Math.min(b, S.pts - S.dts), -1 * O)),
                                    S.dts < h[T > 0 ? T - 1 : T].dts && (E = !0)
                                }
                                E && h.sort((function(e, t) {
                                    var a = e.dts - t.dts
                                      , r = e.pts - t.pts;
                                    return a || r || e.id - t.id
                                }
                                )),
                                d = h[0].dts,
                                c = h[g - 1].dts;
                                var A = Math.round((c - d) / (g - 1));
                                if (b < 0) {
                                    if (b < -2 * A) {
                                        s.logger.warn("PTS < DTS detected in video samples, offsetting DTS to PTS " + R(-A, !0) + " ms");
                                        for (var C = 0; C < g; C++)
                                            h[C].dts = h[C].pts - A
                                    } else {
                                        s.logger.warn("PTS < DTS detected in video samples, shifting DTS by " + R(b, !0) + " ms to overcome this issue");
                                        for (var I = 0; I < g; I++)
                                            h[I].dts = h[I].dts + b
                                    }
                                    d = h[0].dts,
                                    c = h[g - 1].dts
                                }
                                if (a) {
                                    var P = d - k
                                      , M = P > A;
                                    if (M || P < -1) {
                                        M ? s.logger.warn("AVC: " + R(P, !0) + " ms (" + P + "dts) hole between fragments detected, filling it") : s.logger.warn("AVC: " + R(-P, !0) + " ms (" + P + "dts) overlapping between fragments detected"),
                                        d = k;
                                        var x = h[0].pts - P;
                                        h[0].dts = d,
                                        h[0].pts = x,
                                        s.logger.log("Video: First PTS/DTS adjusted: " + R(x, !0) + "/" + R(d, !0) + ", delta: " + R(P, !0) + " ms")
                                    }
                                }
                                N && N < 75 && (d = Math.max(0, d));
                                for (var D = 0, U = 0, F = 0; F < g; F++) {
                                    for (var B = h[F], j = B.units, G = j.length, V = 0, K = 0; K < G; K++)
                                        V += j[K].data.length;
                                    U += V,
                                    D += G,
                                    B.length = V,
                                    B.dts = Math.max(B.dts, d),
                                    B.pts = Math.max(B.pts, B.dts, 0),
                                    _ = Math.min(B.pts, _),
                                    v = Math.max(B.pts, v)
                                }
                                c = h[g - 1].dts;
                                var $ = U + 4 * D + 8;
                                try {
                                    l = new Uint8Array($)
                                } catch (e) {
                                    return void this.observer.trigger(r.default.ERROR, {
                                        type: n.ErrorTypes.MUX_ERROR,
                                        details: n.ErrorDetails.REMUX_ALLOC_ERROR,
                                        fatal: !1,
                                        bytes: $,
                                        reason: "fail allocating video mdat " + $
                                    })
                                }
                                var q = new DataView(l.buffer);
                                q.setUint32(0, $),
                                l.set(w.types.mdat, 4);
                                for (var H = 0; H < g; H++) {
                                    for (var W, Y = h[H], z = Y.units, X = 0, Q = 0, J = z.length; Q < J; Q++) {
                                        var Z = z[Q]
                                          , ee = Z.data
                                          , te = Z.data.byteLength;
                                        q.setUint32(y, te),
                                        y += 4,
                                        l.set(ee, y),
                                        y += te,
                                        X += 4 + te
                                    }
                                    if (H < g - 1)
                                        o = h[H + 1].dts - Y.dts;
                                    else {
                                        var ae = this.config
                                          , re = Y.dts - h[H > 0 ? H - 1 : H].dts;
                                        if (ae.stretchShortVideoTrack) {
                                            var ne = ae.maxBufferHole
                                              , ie = Math.floor(ne * f)
                                              , oe = (i ? _ + i * f : this.nextAudioPts) - Y.pts;
                                            oe > ie ? ((o = oe - re) < 0 && (o = re),
                                            s.logger.log("It is approximately " + R(oe, !1) + " ms to the next segment; using duration " + R(o, !1) + " ms for the last video frame.")) : o = re
                                        } else
                                            o = re
                                    }
                                    W = Math.round(Y.pts - Y.dts),
                                    p.push({
                                        size: X,
                                        duration: o,
                                        cts: W,
                                        flags: {
                                            isLeading: 0,
                                            isDependedOn: 0,
                                            hasRedundancy: 0,
                                            degradPrio: 0,
                                            dependsOn: Y.key ? 2 : 1,
                                            isNonSync: Y.key ? 0 : 1
                                        }
                                    })
                                }
                                this.nextAvcDts = c + o;
                                var se = e.dropped;
                                if (e.nbNalu = 0,
                                e.dropped = 0,
                                p.length && navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
                                    var le = p[0].flags;
                                    le.dependsOn = 2,
                                    le.isNonSync = 0
                                }
                                e.samples = p,
                                u = w.moof(e.sequenceNumber++, d, e),
                                e.samples = [];
                                var ue = {
                                    data1: u,
                                    data2: l,
                                    startPTS: _ / f,
                                    endPTS: (v + o) / f,
                                    startDTS: d / f,
                                    endDTS: this.nextAvcDts / f,
                                    type: "video",
                                    hasAudio: !1,
                                    hasVideo: !0,
                                    nb: p.length,
                                    dropped: se
                                };
                                return this.observer.trigger(r.default.FRAG_PARSING_DATA, ue),
                                ue
                            }
                        }
                        ,
                        t.remuxAudio = function(e, t, a, i) {
                            var o, l, u, d, c, f, h = e.inputTimeScale, p = e.timescale, g = h / p, m = (e.isAAC ? 1024 : 1152) * g, y = this._initPTS, _ = !e.isAAC && this.typeSupported.mpeg, v = _ ? 0 : 8, b = e.samples, E = [], k = this.nextAudioPts;
                            if (a |= b.length && k && (i && Math.abs(t - k / h) < .1 || Math.abs(b[0].pts - k - y) < 20 * m),
                            b.forEach((function(e) {
                                e.pts = e.dts = L(e.pts - y, t * h)
                            }
                            )),
                            0 !== (b = b.filter((function(e) {
                                return e.pts >= 0
                            }
                            ))).length) {
                                if (a || (k = i ? Math.max(0, t * h) : b[0].pts),
                                e.isAAC)
                                    for (var T = this.config.maxAudioFramesDrift, S = 0, A = k; S < b.length; ) {
                                        var C = b[S]
                                          , P = C.pts
                                          , M = P - A;
                                        if (M <= -T * m)
                                            a || S > 0 ? (s.logger.warn("Dropping 1 audio frame @ " + R(A, !0) / 1e3 + "s due to " + R(M, !0) + " ms overlap."),
                                            b.splice(S, 1)) : (s.logger.warn("Audio frame @ " + R(P, !0) / 1e3 + "s overlaps nextAudioPts by " + R(M, !0) + " ms."),
                                            A = P + m,
                                            S++);
                                        else if (M >= T * m && M < D && A) {
                                            var x = Math.round(M / m);
                                            s.logger.warn("Injecting " + x + " audio frames @ " + R(A, !0) / 1e3 + "s due to " + R(M, !0) + " ms gap.");
                                            for (var O = 0; O < x; O++) {
                                                var N = Math.max(A, 0);
                                                (l = I.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),
                                                l = C.unit.subarray()),
                                                b.splice(S, 0, {
                                                    unit: l,
                                                    pts: N,
                                                    dts: N
                                                }),
                                                A += m,
                                                S++
                                            }
                                            C.pts = C.dts = A,
                                            A += m,
                                            S++
                                        } else
                                            Math.abs(M),
                                            C.pts = C.dts = A,
                                            A += m,
                                            S++
                                    }
                                for (var U = b.length, F = 0; U--; )
                                    F += b[U].unit.byteLength;
                                for (var B = 0, j = b.length; B < j; B++) {
                                    var G = b[B]
                                      , V = G.unit
                                      , K = G.pts;
                                    if (void 0 !== f && o)
                                        o.duration = Math.round((K - f) / g);
                                    else {
                                        var $ = K - k
                                          , q = 0;
                                        if (a && e.isAAC && $) {
                                            if ($ > 0 && $ < D)
                                                q = Math.round((K - k) / m),
                                                s.logger.log(R($, !0) + " ms hole between AAC samples detected,filling it"),
                                                q > 0 && ((l = I.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (l = V.subarray()),
                                                F += q * l.length);
                                            else if ($ < -12) {
                                                s.logger.log("drop overlapping AAC sample, expected/parsed/delta: " + R(k, !0) + " ms / " + R(K, !0) + " ms / " + R(-$, !0) + " ms"),
                                                F -= V.byteLength;
                                                continue
                                            }
                                            K = k
                                        }
                                        if (c = K,
                                        !(F > 0))
                                            return;
                                        F += v;
                                        try {
                                            u = new Uint8Array(F)
                                        } catch (e) {
                                            return void this.observer.trigger(r.default.ERROR, {
                                                type: n.ErrorTypes.MUX_ERROR,
                                                details: n.ErrorDetails.REMUX_ALLOC_ERROR,
                                                fatal: !1,
                                                bytes: F,
                                                reason: "fail allocating audio mdat " + F
                                            })
                                        }
                                        _ || (new DataView(u.buffer).setUint32(0, F),
                                        u.set(w.types.mdat, 4));
                                        for (var H = 0; H < q; H++)
                                            (l = I.getSilentFrame(e.manifestCodec || e.codec, e.channelCount)) || (s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),
                                            l = V.subarray()),
                                            u.set(l, v),
                                            v += l.byteLength,
                                            o = {
                                                size: l.byteLength,
                                                cts: 0,
                                                duration: 1024,
                                                flags: {
                                                    isLeading: 0,
                                                    isDependedOn: 0,
                                                    hasRedundancy: 0,
                                                    degradPrio: 0,
                                                    dependsOn: 1
                                                }
                                            },
                                            E.push(o)
                                    }
                                    u.set(V, v);
                                    var W = V.byteLength;
                                    v += W,
                                    o = {
                                        size: W,
                                        cts: 0,
                                        duration: 0,
                                        flags: {
                                            isLeading: 0,
                                            isDependedOn: 0,
                                            hasRedundancy: 0,
                                            degradPrio: 0,
                                            dependsOn: 1
                                        }
                                    },
                                    E.push(o),
                                    f = K
                                }
                                var Y = 0;
                                if ((U = E.length) >= 2 && (Y = E[U - 2].duration,
                                o.duration = Y),
                                U) {
                                    this.nextAudioPts = k = f + g * Y,
                                    e.samples = E,
                                    d = _ ? new Uint8Array : w.moof(e.sequenceNumber++, c / g, e),
                                    e.samples = [];
                                    var z = c / h
                                      , X = k / h
                                      , Q = {
                                        data1: d,
                                        data2: u,
                                        startPTS: z,
                                        endPTS: X,
                                        startDTS: z,
                                        endDTS: X,
                                        type: "audio",
                                        hasAudio: !0,
                                        hasVideo: !1,
                                        nb: U
                                    };
                                    return this.observer.trigger(r.default.FRAG_PARSING_DATA, Q),
                                    Q
                                }
                                return null
                            }
                        }
                        ,
                        t.remuxEmptyAudio = function(e, t, a, r) {
                            var n = e.inputTimeScale
                              , i = n / (e.samplerate ? e.samplerate : n)
                              , o = this.nextAudioPts
                              , l = (void 0 !== o ? o : r.startDTS * n) + this._initDTS
                              , u = r.endDTS * n + this._initDTS
                              , d = 1024 * i
                              , c = Math.ceil((u - l) / d)
                              , f = I.getSilentFrame(e.manifestCodec || e.codec, e.channelCount);
                            if (s.logger.warn("remux empty Audio"),
                            f) {
                                for (var h = [], p = 0; p < c; p++) {
                                    var g = l + p * d;
                                    h.push({
                                        unit: f,
                                        pts: g,
                                        dts: g
                                    })
                                }
                                e.samples = h,
                                this.remuxAudio(e, t, a)
                            } else
                                s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")
                        }
                        ,
                        t.remuxID3 = function(e, t) {
                            var a = e.samples.length;
                            if (a) {
                                for (var n = e.inputTimeScale, i = this._initPTS, o = this._initDTS, s = 0; s < a; s++) {
                                    var l = e.samples[s];
                                    l.pts = L(l.pts - i, t * n) / n,
                                    l.dts = L(l.dts - o, t * n) / n
                                }
                                this.observer.trigger(r.default.FRAG_PARSING_METADATA, {
                                    samples: e.samples
                                }),
                                e.samples = []
                            }
                        }
                        ,
                        t.remuxText = function(e, t) {
                            var a = e.samples.length
                              , n = e.inputTimeScale
                              , i = this._initPTS;
                            if (a) {
                                for (var o = 0; o < a; o++) {
                                    var s = e.samples[o];
                                    s.pts = L(s.pts - i, t * n) / n
                                }
                                e.samples.sort((function(e, t) {
                                    return e.pts - t.pts
                                }
                                )),
                                this.observer.trigger(r.default.FRAG_PARSING_USERDATA, {
                                    samples: e.samples
                                })
                            }
                            e.samples = []
                        }
                        ,
                        e
                    }(), B = function() {
                        function e(e) {
                            this.observer = e
                        }
                        var t = e.prototype;
                        return t.destroy = function() {}
                        ,
                        t.resetTimeStamp = function() {}
                        ,
                        t.resetInitSegment = function() {}
                        ,
                        t.remux = function(e, t, a, n, i, o, s, l) {
                            var u = this.observer
                              , d = "";
                            e && (d += "audio"),
                            t && (d += "video"),
                            u.trigger(r.default.FRAG_PARSING_DATA, {
                                data1: l,
                                startPTS: i,
                                startDTS: i,
                                type: d,
                                hasAudio: !!e,
                                hasVideo: !!t,
                                nb: 1,
                                dropped: 0
                            }),
                            u.trigger(r.default.FRAG_PARSED)
                        }
                        ,
                        e
                    }(), j = Object(l.getSelfScope)();
                    try {
                        U = j.performance.now.bind(j.performance)
                    } catch (e) {
                        s.logger.debug("Unable to use Performance API on this environment"),
                        U = j.Date.now
                    }
                    var G = function() {
                        function e(e, t, a, r) {
                            this.observer = e,
                            this.typeSupported = t,
                            this.config = a,
                            this.vendor = r
                        }
                        var t = e.prototype;
                        return t.destroy = function() {
                            var e = this.demuxer;
                            e && e.destroy()
                        }
                        ,
                        t.push = function(e, t, a, n, o, s, l, u, d, c, f, h) {
                            var p = this;
                            if (e.byteLength > 0 && null != t && null != t.key && "AES-128" === t.method) {
                                var g = this.decrypter;
                                null == g && (g = this.decrypter = new i.default(this.observer,this.config));
                                var m = U();
                                g.decrypt(e, t.key.buffer, t.iv.buffer, (function(e) {
                                    // debugger
                                    var i = U();
                                    // @IMPORTANT
                                    p.observer.trigger(r.default.FRAG_DECRYPTED, {
                                        binary: new Uint8Array(e),
                                        stats: {
                                            tstart: m,
                                            tdecrypt: i
                                        },

                                    }),
                                    p.pushDecrypted(new Uint8Array(e), t, new Uint8Array(a), n, o, s, l, u, d, c, f, h)
                                }
                                ))
                            } else
                                this.pushDecrypted(new Uint8Array(e), t, new Uint8Array(a), n, o, s, l, u, d, c, f, h)
                        }
                        ,
                        t.pushDecrypted = function(e, t, a, i, o, s, l, u, d, c, f, h) {
                            var p = this.demuxer
                              , g = this.remuxer;
                            if (!p || l || u) {
                                for (var m, y = this.observer, b = this.typeSupported, E = this.config, k = [{
                                    demux: A,
                                    remux: F
                                }, {
                                    demux: v.default,
                                    remux: B
                                }, {
                                    demux: _,
                                    remux: F
                                }, {
                                    demux: C,
                                    remux: F
                                }], T = 0, S = k.length; T < S && !(m = k[T]).demux.probe(e); T++)
                                    ;
                                if (!m)
                                    return void y.trigger(r.default.ERROR, {
                                        type: n.ErrorTypes.MEDIA_ERROR,
                                        details: n.ErrorDetails.FRAG_PARSING_ERROR,
                                        fatal: !0,
                                        reason: "no demux matching with content found"
                                    });
                                g && g instanceof m.remux || (g = new m.remux(y,E,b,this.vendor)),
                                p && p instanceof m.demux || (p = new m.demux(y,g,E,b),
                                this.probe = m.demux.probe),
                                this.demuxer = p,
                                this.remuxer = g
                            }
                            (l || u) && (p.resetInitSegment(a, i, o, c),
                            g.resetInitSegment()),
                            l && (p.resetTimeStamp(h),
                            g.resetTimeStamp(h)),
                            "function" == typeof p.setDecryptData && p.setDecryptData(t),
                            p.append(e, s, d, f)
                        }
                        ,
                        e
                    }();
                    t.default = G
                },
                "./src/demux/demuxer-worker.js": /*!*************************************!*\
  !*** ./src/demux/demuxer-worker.js ***!
  \*************************************/
                /*! exports provided: default */
                /*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/demux/demuxer.js (referenced with require.resolve) */
                function(e, t, a) {
                    "use strict";
                    a.r(t);
                    var r = a(/*! ../demux/demuxer-inline */
                    "./src/demux/demuxer-inline.js")
                      , n = a(/*! ../events */
                    "./src/events.js")
                      , i = a(/*! ../utils/logger */
                    "./src/utils/logger.js")
                      , o = a(/*! eventemitter3 */
                    "./node_modules/eventemitter3/index.js");
                    t.default = function(e) {
                        var t = new o.EventEmitter;
                        t.trigger = function(e) {
                            for (var a = arguments.length, r = new Array(a > 1 ? a - 1 : 0), n = 1; n < a; n++)
                                r[n - 1] = arguments[n];
                            t.emit.apply(t, [e, e].concat(r))
                        }
                        ,
                        t.off = function(e) {
                            for (var a = arguments.length, r = new Array(a > 1 ? a - 1 : 0), n = 1; n < a; n++)
                                r[n - 1] = arguments[n];
                            t.removeListener.apply(t, [e].concat(r))
                        }
                        ;
                        var a = function(t, a) {
                            e.postMessage({
                                event: t,
                                data: a
                            })
                        };
                        e.addEventListener("message", (function(n) {
                            var o = n.data;
                            switch (o.cmd) {
                            case "init":
                                var s = JSON.parse(o.config);
                                e.demuxer = new r.default(t,o.typeSupported,s,o.vendor),
                                Object(i.enableLogs)(s.debug),
                                a("init", null);
                                break;
                            case "demux":
                                e.demuxer.push(o.data, o.decryptdata, o.initSegment, o.audioCodec, o.videoCodec, o.timeOffset, o.discontinuity, o.trackSwitch, o.contiguous, o.duration, o.accurateTimeOffset, o.defaultInitPTS)
                            }
                        }
                        )),
                        t.on(n.default.FRAG_DECRYPTED, a),
                        t.on(n.default.FRAG_PARSING_INIT_SEGMENT, a),
                        t.on(n.default.FRAG_PARSED, a),
                        t.on(n.default.ERROR, a),
                        t.on(n.default.FRAG_PARSING_METADATA, a),
                        t.on(n.default.FRAG_PARSING_USERDATA, a),
                        t.on(n.default.INIT_PTS_FOUND, a),
                        t.on(n.default.FRAG_PARSING_DATA, (function(t, a) {
                            var r = []
                              , n = {
                                event: t,
                                data: a
                            };
                            a.data1 && (n.data1 = a.data1.buffer,
                            r.push(a.data1.buffer),
                            delete a.data1),
                            a.data2 && (n.data2 = a.data2.buffer,
                            r.push(a.data2.buffer),
                            delete a.data2),
                            e.postMessage(n, r)
                        }
                        ))
                    }
                },
                "./src/demux/id3.js": /*!**************************!*\
  !*** ./src/demux/id3.js ***!
  \**************************/
                /*! exports provided: default, utf8ArrayToStr */
                function(e, t, a) {
                    "use strict";
                    a.r(t),
                    a.d(t, "utf8ArrayToStr", (function() {
                        return s
                    }
                    ));
                    var r, n = a(/*! ../utils/get-self-scope */
                    "./src/utils/get-self-scope.js"), i = function() {
                        function e() {}
                        return e.isHeader = function(e, t) {
                            return t + 10 <= e.length && 73 === e[t] && 68 === e[t + 1] && 51 === e[t + 2] && e[t + 3] < 255 && e[t + 4] < 255 && e[t + 6] < 128 && e[t + 7] < 128 && e[t + 8] < 128 && e[t + 9] < 128
                        }
                        ,
                        e.isFooter = function(e, t) {
                            return t + 10 <= e.length && 51 === e[t] && 68 === e[t + 1] && 73 === e[t + 2] && e[t + 3] < 255 && e[t + 4] < 255 && e[t + 6] < 128 && e[t + 7] < 128 && e[t + 8] < 128 && e[t + 9] < 128
                        }
                        ,
                        e.getID3Data = function(t, a) {
                            for (var r = a, n = 0; e.isHeader(t, a); )
                                n += 10,
                                n += e._readSize(t, a + 6),
                                e.isFooter(t, a + 10) && (n += 10),
                                a += n;
                            if (n > 0)
                                return t.subarray(r, r + n)
                        }
                        ,
                        e._readSize = function(e, t) {
                            var a = 0;
                            return a = (127 & e[t]) << 21,
                            a |= (127 & e[t + 1]) << 14,
                            a |= (127 & e[t + 2]) << 7,
                            a |= 127 & e[t + 3]
                        }
                        ,
                        e.getTimeStamp = function(t) {
                            for (var a = e.getID3Frames(t), r = 0; r < a.length; r++) {
                                var n = a[r];
                                if (e.isTimeStampFrame(n))
                                    return e._readTimeStamp(n)
                            }
                        }
                        ,
                        e.isTimeStampFrame = function(e) {
                            return e && "PRIV" === e.key && "com.apple.streaming.transportStreamTimestamp" === e.info
                        }
                        ,
                        e._getFrameData = function(t) {
                            var a = String.fromCharCode(t[0], t[1], t[2], t[3])
                              , r = e._readSize(t, 4);
                            return {
                                type: a,
                                size: r,
                                data: t.subarray(10, 10 + r)
                            }
                        }
                        ,
                        e.getID3Frames = function(t) {
                            for (var a = 0, r = []; e.isHeader(t, a); ) {
                                for (var n = e._readSize(t, a + 6), i = (a += 10) + n; a + 8 < i; ) {
                                    var o = e._getFrameData(t.subarray(a))
                                      , s = e._decodeFrame(o);
                                    s && r.push(s),
                                    a += o.size + 10
                                }
                                e.isFooter(t, a) && (a += 10)
                            }
                            return r
                        }
                        ,
                        e._decodeFrame = function(t) {
                            return "PRIV" === t.type ? e._decodePrivFrame(t) : "T" === t.type[0] ? e._decodeTextFrame(t) : "W" === t.type[0] ? e._decodeURLFrame(t) : void 0
                        }
                        ,
                        e._readTimeStamp = function(e) {
                            if (8 === e.data.byteLength) {
                                var t = new Uint8Array(e.data)
                                  , a = 1 & t[3]
                                  , r = (t[4] << 23) + (t[5] << 15) + (t[6] << 7) + t[7];
                                return r /= 45,
                                a && (r += 47721858.84),
                                Math.round(r)
                            }
                        }
                        ,
                        e._decodePrivFrame = function(t) {
                            if (!(t.size < 2)) {
                                var a = e._utf8ArrayToStr(t.data, !0)
                                  , r = new Uint8Array(t.data.subarray(a.length + 1));
                                return {
                                    key: t.type,
                                    info: a,
                                    data: r.buffer
                                }
                            }
                        }
                        ,
                        e._decodeTextFrame = function(t) {
                            if (!(t.size < 2)) {
                                if ("TXXX" === t.type) {
                                    var a = 1
                                      , r = e._utf8ArrayToStr(t.data.subarray(a), !0);
                                    a += r.length + 1;
                                    var n = e._utf8ArrayToStr(t.data.subarray(a));
                                    return {
                                        key: t.type,
                                        info: r,
                                        data: n
                                    }
                                }
                                var i = e._utf8ArrayToStr(t.data.subarray(1));
                                return {
                                    key: t.type,
                                    data: i
                                }
                            }
                        }
                        ,
                        e._decodeURLFrame = function(t) {
                            if ("WXXX" === t.type) {
                                if (t.size < 2)
                                    return;
                                var a = 1
                                  , r = e._utf8ArrayToStr(t.data.subarray(a), !0);
                                a += r.length + 1;
                                var n = e._utf8ArrayToStr(t.data.subarray(a));
                                return {
                                    key: t.type,
                                    info: r,
                                    data: n
                                }
                            }
                            var i = e._utf8ArrayToStr(t.data);
                            return {
                                key: t.type,
                                data: i
                            }
                        }
                        ,
                        e._utf8ArrayToStr = function(e, t) {
                            void 0 === t && (t = !1);
                            var a = o();
                            if (a) {
                                var r = a.decode(e);
                                if (t) {
                                    var n = r.indexOf("\0");
                                    return -1 !== n ? r.substring(0, n) : r
                                }
                                return r.replace(/\0/g, "")
                            }
                            for (var i, s, l, u = e.length, d = "", c = 0; c < u; ) {
                                if (0 === (i = e[c++]) && t)
                                    return d;
                                if (0 !== i && 3 !== i)
                                    switch (i >> 4) {
                                    case 0:
                                    case 1:
                                    case 2:
                                    case 3:
                                    case 4:
                                    case 5:
                                    case 6:
                                    case 7:
                                        d += String.fromCharCode(i);
                                        break;
                                    case 12:
                                    case 13:
                                        s = e[c++],
                                        d += String.fromCharCode((31 & i) << 6 | 63 & s);
                                        break;
                                    case 14:
                                        s = e[c++],
                                        l = e[c++],
                                        d += String.fromCharCode((15 & i) << 12 | (63 & s) << 6 | (63 & l) << 0)
                                    }
                            }
                            return d
                        }
                        ,
                        e
                    }();
                    function o() {
                        var e = Object(n.getSelfScope)();
                        return r || void 0 === e.TextDecoder || (r = new e.TextDecoder("utf-8")),
                        r
                    }
                    var s = i._utf8ArrayToStr;
                    t.default = i
                },
                "./src/demux/mp4demuxer.js": /*!*********************************!*\
  !*** ./src/demux/mp4demuxer.js ***!
  \*********************************/
                /*! exports provided: default */
                function(e, t, a) {
                    "use strict";
                    a.r(t);
                    var r = a(/*! ../utils/logger */
                    "./src/utils/logger.js")
                      , n = a(/*! ../events */
                    "./src/events.js")
                      , i = Math.pow(2, 32) - 1
                      , o = function() {
                        function e(e, t) {
                            this.observer = e,
                            this.remuxer = t
                        }
                        var t = e.prototype;
                        return t.resetTimeStamp = function(e) {
                            this.initPTS = e
                        }
                        ,
                        t.resetInitSegment = function(t, a, r, i) {
                            if (t && t.byteLength) {
                                var o = this.initData = e.parseInitSegment(t);
                                null == a && (a = "mp4a.40.5"),
                                null == r && (r = "avc1.42e01e");
                                var s = {};
                                o.audio && o.video ? s.audiovideo = {
                                    container: "video/mp4",
                                    codec: a + "," + r,
                                    initSegment: i ? t : null
                                } : (o.audio && (s.audio = {
                                    container: "audio/mp4",
                                    codec: a,
                                    initSegment: i ? t : null
                                }),
                                o.video && (s.video = {
                                    container: "video/mp4",
                                    codec: r,
                                    initSegment: i ? t : null
                                })),
                                this.observer.trigger(n.default.FRAG_PARSING_INIT_SEGMENT, {
                                    tracks: s
                                })
                            } else
                                a && (this.audioCodec = a),
                                r && (this.videoCodec = r)
                        }
                        ,
                        e.probe = function(t) {
                            return e.findBox({
                                data: t,
                                start: 0,
                                end: Math.min(t.length, 16384)
                            }, ["moof"]).length > 0
                        }
                        ,
                        e.bin2str = function(e) {
                            return String.fromCharCode.apply(null, e)
                        }
                        ,
                        e.readUint16 = function(e, t) {
                            e.data && (t += e.start,
                            e = e.data);
                            var a = e[t] << 8 | e[t + 1];
                            return a < 0 ? 65536 + a : a
                        }
                        ,
                        e.readUint32 = function(e, t) {
                            e.data && (t += e.start,
                            e = e.data);
                            var a = e[t] << 24 | e[t + 1] << 16 | e[t + 2] << 8 | e[t + 3];
                            return a < 0 ? 4294967296 + a : a
                        }
                        ,
                        e.writeUint32 = function(e, t, a) {
                            e.data && (t += e.start,
                            e = e.data),
                            e[t] = a >> 24,
                            e[t + 1] = a >> 16 & 255,
                            e[t + 2] = a >> 8 & 255,
                            e[t + 3] = 255 & a
                        }
                        ,
                        e.findBox = function(t, a) {
                            var r, n, i, o, s, l, u = [];
                            if (t.data ? (s = t.start,
                            i = t.end,
                            t = t.data) : (s = 0,
                            i = t.byteLength),
                            !a.length)
                                return null;
                            for (r = s; r < i; )
                                l = (n = e.readUint32(t, r)) > 1 ? r + n : i,
                                e.bin2str(t.subarray(r + 4, r + 8)) === a[0] && (1 === a.length ? u.push({
                                    data: t,
                                    start: r + 8,
                                    end: l
                                }) : (o = e.findBox({
                                    data: t,
                                    start: r + 8,
                                    end: l
                                }, a.slice(1))).length && (u = u.concat(o))),
                                r = l;
                            return u
                        }
                        ,
                        e.parseSegmentIndex = function(t) {
                            var a, r = e.findBox(t, ["moov"])[0], n = r ? r.end : null, i = 0, o = e.findBox(t, ["sidx"]);
                            if (!o || !o[0])
                                return null;
                            a = [];
                            var s = (o = o[0]).data[0];
                            i = 0 === s ? 8 : 16;
                            var l = e.readUint32(o, i);
                            i += 4,
                            i += 0 === s ? 8 : 16,
                            i += 2;
                            var u = o.end + 0
                              , d = e.readUint16(o, i);
                            i += 2;
                            for (var c = 0; c < d; c++) {
                                var f = i
                                  , h = e.readUint32(o, f);
                                f += 4;
                                var p = 2147483647 & h;
                                if (1 == (2147483648 & h) >>> 31)
                                    return void console.warn("SIDX has hierarchical references (not supported)");
                                var g = e.readUint32(o, f);
                                f += 4,
                                a.push({
                                    referenceSize: p,
                                    subsegmentDuration: g,
                                    info: {
                                        duration: g / l,
                                        start: u,
                                        end: u + p - 1
                                    }
                                }),
                                u += p,
                                i = f += 4
                            }
                            return {
                                earliestPresentationTime: 0,
                                timescale: l,
                                version: s,
                                referencesCount: d,
                                references: a,
                                moovEndOffset: n
                            }
                        }
                        ,
                        e.parseInitSegment = function(t) {
                            var a = [];
                            return e.findBox(t, ["moov", "trak"]).forEach((function(t) {
                                var n = e.findBox(t, ["tkhd"])[0];
                                if (n) {
                                    var i = n.data[n.start]
                                      , o = 0 === i ? 12 : 20
                                      , s = e.readUint32(n, o)
                                      , l = e.findBox(t, ["mdia", "mdhd"])[0];
                                    if (l) {
                                        o = 0 === (i = l.data[l.start]) ? 12 : 20;
                                        var u = e.readUint32(l, o)
                                          , d = e.findBox(t, ["mdia", "hdlr"])[0];
                                        if (d) {
                                            var c = {
                                                soun: "audio",
                                                vide: "video"
                                            }[e.bin2str(d.data.subarray(d.start + 8, d.start + 12))];
                                            if (c) {
                                                var f = e.findBox(t, ["mdia", "minf", "stbl", "stsd"]);
                                                if (f.length) {
                                                    f = f[0];
                                                    var h = e.bin2str(f.data.subarray(f.start + 12, f.start + 16));
                                                    r.logger.log("MP4Demuxer:" + c + ":" + h + " found")
                                                }
                                                a[s] = {
                                                    timescale: u,
                                                    type: c
                                                },
                                                a[c] = {
                                                    timescale: u,
                                                    id: s
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            )),
                            a
                        }
                        ,
                        e.getStartDTS = function(t, a) {
                            var r, n, i;
                            return r = e.findBox(a, ["moof", "traf"]),
                            n = [].concat.apply([], r.map((function(a) {
                                return e.findBox(a, ["tfhd"]).map((function(r) {
                                    var n, i;
                                    return n = e.readUint32(r, 4),
                                    i = t[n].timescale || 9e4,
                                    e.findBox(a, ["tfdt"]).map((function(t) {
                                        var a, r;
                                        return a = t.data[t.start],
                                        r = e.readUint32(t, 4),
                                        1 === a && (r *= Math.pow(2, 32),
                                        r += e.readUint32(t, 8)),
                                        r
                                    }
                                    ))[0] / i
                                }
                                ))
                            }
                            ))),
                            i = Math.min.apply(null, n),
                            isFinite(i) ? i : 0
                        }
                        ,
                        e.offsetStartDTS = function(t, a, r) {
                            e.findBox(a, ["moof", "traf"]).map((function(a) {
                                return e.findBox(a, ["tfhd"]).map((function(n) {
                                    var o = e.readUint32(n, 4)
                                      , s = t[o].timescale || 9e4;
                                    e.findBox(a, ["tfdt"]).map((function(t) {
                                        var a = t.data[t.start]
                                          , n = e.readUint32(t, 4);
                                        if (0 === a)
                                            e.writeUint32(t, 4, n - r * s);
                                        else {
                                            n *= Math.pow(2, 32),
                                            n += e.readUint32(t, 8),
                                            n -= r * s,
                                            n = Math.max(n, 0);
                                            var o = Math.floor(n / (i + 1))
                                              , l = Math.floor(n % (i + 1));
                                            e.writeUint32(t, 4, o),
                                            e.writeUint32(t, 8, l)
                                        }
                                    }
                                    ))
                                }
                                ))
                            }
                            ))
                        }
                        ,
                        t.append = function(t, a, r, i) {
                            var o = this.initData;
                            o || (this.resetInitSegment(t, this.audioCodec, this.videoCodec, !1),
                            o = this.initData);
                            var s, l = this.initPTS;
                            if (void 0 === l) {
                                var u = e.getStartDTS(o, t);
                                this.initPTS = l = u - a,
                                this.observer.trigger(n.default.INIT_PTS_FOUND, {
                                    initPTS: l
                                })
                            }
                            e.offsetStartDTS(o, t, l),
                            s = e.getStartDTS(o, t),
                            this.remuxer.remux(o.audio, o.video, null, null, s, r, i, t)
                        }
                        ,
                        t.destroy = function() {}
                        ,
                        e
                    }();
                    t.default = o
                },
                "./src/errors.ts": /*!***********************!*\
  !*** ./src/errors.ts ***!
  \***********************/
                /*! exports provided: ErrorTypes, ErrorDetails */
                function(e, t, a) {
                    "use strict";
                    var r, n;
                    a.r(t),
                    a.d(t, "ErrorTypes", (function() {
                        return r
                    }
                    )),
                    a.d(t, "ErrorDetails", (function() {
                        return n
                    }
                    )),
                    function(e) {
                        e.NETWORK_ERROR = "networkError",
                        e.MEDIA_ERROR = "mediaError",
                        e.KEY_SYSTEM_ERROR = "keySystemError",
                        e.MUX_ERROR = "muxError",
                        e.OTHER_ERROR = "otherError"
                    }(r || (r = {})),
                    function(e) {
                        e.KEY_SYSTEM_NO_KEYS = "keySystemNoKeys",
                        e.KEY_SYSTEM_NO_ACCESS = "keySystemNoAccess",
                        e.KEY_SYSTEM_NO_SESSION = "keySystemNoSession",
                        e.KEY_SYSTEM_LICENSE_REQUEST_FAILED = "keySystemLicenseRequestFailed",
                        e.KEY_SYSTEM_NO_INIT_DATA = "keySystemNoInitData",
                        e.MANIFEST_LOAD_ERROR = "manifestLoadError",
                        e.MANIFEST_LOAD_TIMEOUT = "manifestLoadTimeOut",
                        e.MANIFEST_PARSING_ERROR = "manifestParsingError",
                        e.MANIFEST_INCOMPATIBLE_CODECS_ERROR = "manifestIncompatibleCodecsError",
                        e.LEVEL_EMPTY_ERROR = "levelEmptyError",
                        e.LEVEL_LOAD_ERROR = "levelLoadError",
                        e.LEVEL_LOAD_TIMEOUT = "levelLoadTimeOut",
                        e.LEVEL_SWITCH_ERROR = "levelSwitchError",
                        e.AUDIO_TRACK_LOAD_ERROR = "audioTrackLoadError",
                        e.AUDIO_TRACK_LOAD_TIMEOUT = "audioTrackLoadTimeOut",
                        e.FRAG_LOAD_ERROR = "fragLoadError",
                        e.FRAG_LOAD_TIMEOUT = "fragLoadTimeOut",
                        e.FRAG_DECRYPT_ERROR = "fragDecryptError",
                        e.FRAG_PARSING_ERROR = "fragParsingError",
                        e.REMUX_ALLOC_ERROR = "remuxAllocError",
                        e.KEY_LOAD_ERROR = "keyLoadError",
                        e.KEY_LOAD_TIMEOUT = "keyLoadTimeOut",
                        e.BUFFER_ADD_CODEC_ERROR = "bufferAddCodecError",
                        e.BUFFER_APPEND_ERROR = "bufferAppendError",
                        e.BUFFER_APPENDING_ERROR = "bufferAppendingError",
                        e.BUFFER_STALLED_ERROR = "bufferStalledError",
                        e.BUFFER_FULL_ERROR = "bufferFullError",
                        e.BUFFER_SEEK_OVER_HOLE = "bufferSeekOverHole",
                        e.BUFFER_NUDGE_ON_STALL = "bufferNudgeOnStall",
                        e.INTERNAL_EXCEPTION = "internalException"
                    }(n || (n = {}))
                },
                "./src/events.js": /*!***********************!*\
  !*** ./src/events.js ***!
  \***********************/
                /*! exports provided: default */
                function(e, t, a) {
                    "use strict";
                    a.r(t),
                    t.default = {
                        MEDIA_ATTACHING: "hlsMediaAttaching",
                        MEDIA_ATTACHED: "hlsMediaAttached",
                        MEDIA_DETACHING: "hlsMediaDetaching",
                        MEDIA_DETACHED: "hlsMediaDetached",
                        BUFFER_RESET: "hlsBufferReset",
                        BUFFER_CODECS: "hlsBufferCodecs",
                        BUFFER_CREATED: "hlsBufferCreated",
                        BUFFER_APPENDING: "hlsBufferAppending",
                        BUFFER_APPENDED: "hlsBufferAppended",
                        BUFFER_EOS: "hlsBufferEos",
                        BUFFER_FLUSHING: "hlsBufferFlushing",
                        BUFFER_FLUSHED: "hlsBufferFlushed",
                        MANIFEST_LOADING: "hlsManifestLoading",
                        MANIFEST_LOADED: "hlsManifestLoaded",
                        MANIFEST_PARSED: "hlsManifestParsed",
                        LEVEL_SWITCHING: "hlsLevelSwitching",
                        LEVEL_SWITCHED: "hlsLevelSwitched",
                        LEVEL_LOADING: "hlsLevelLoading",
                        LEVEL_LOADED: "hlsLevelLoaded",
                        LEVEL_UPDATED: "hlsLevelUpdated",
                        LEVEL_PTS_UPDATED: "hlsLevelPtsUpdated",
                        LEVELS_UPDATED: "hlsLevelsUpdated",
                        AUDIO_TRACKS_UPDATED: "hlsAudioTracksUpdated",
                        AUDIO_TRACK_SWITCHING: "hlsAudioTrackSwitching",
                        AUDIO_TRACK_SWITCHED: "hlsAudioTrackSwitched",
                        AUDIO_TRACK_LOADING: "hlsAudioTrackLoading",
                        AUDIO_TRACK_LOADED: "hlsAudioTrackLoaded",
                        SUBTITLE_TRACKS_UPDATED: "hlsSubtitleTracksUpdated",
                        SUBTITLE_TRACK_SWITCH: "hlsSubtitleTrackSwitch",
                        SUBTITLE_TRACK_LOADING: "hlsSubtitleTrackLoading",
                        SUBTITLE_TRACK_LOADED: "hlsSubtitleTrackLoaded",
                        SUBTITLE_FRAG_PROCESSED: "hlsSubtitleFragProcessed",
                        CUES_PARSED: "hlsCuesParsed",
                        NON_NATIVE_TEXT_TRACKS_FOUND: "hlsNonNativeTextTracksFound",
                        INIT_PTS_FOUND: "hlsInitPtsFound",
                        FRAG_LOADING: "hlsFragLoading",
                        FRAG_LOAD_PROGRESS: "hlsFragLoadProgress",
                        FRAG_LOAD_EMERGENCY_ABORTED: "hlsFragLoadEmergencyAborted",
                        FRAG_LOADED: "hlsFragLoaded",
                        FRAG_DECRYPTED: "hlsFragDecrypted",
                        FRAG_PARSING_INIT_SEGMENT: "hlsFragParsingInitSegment",
                        FRAG_PARSING_USERDATA: "hlsFragParsingUserdata",
                        FRAG_PARSING_METADATA: "hlsFragParsingMetadata",
                        FRAG_PARSING_DATA: "hlsFragParsingData",
                        FRAG_PARSED: "hlsFragParsed",
                        FRAG_BUFFERED: "hlsFragBuffered",
                        FRAG_CHANGED: "hlsFragChanged",
                        FPS_DROP: "hlsFpsDrop",
                        FPS_DROP_LEVEL_CAPPING: "hlsFpsDropLevelCapping",
                        ERROR: "hlsError",
                        DESTROYING: "hlsDestroying",
                        KEY_LOADING: "hlsKeyLoading",
                        KEY_LOADED: "hlsKeyLoaded",
                        STREAM_STATE_TRANSITION: "hlsStreamStateTransition",
                        LIVE_BACK_BUFFER_REACHED: "hlsLiveBackBufferReached"
                    }
                },
                "./src/hls.ts": /*!*********************************!*\
  !*** ./src/hls.ts + 50 modules ***!
  \*********************************/
                /*! exports provided: default */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/crypt/decrypter.js because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/demuxer-inline.js because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/id3.js because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/demux/mp4demuxer.js because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/errors.ts because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/events.js because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/polyfills/number.js because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/get-self-scope.js because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./src/utils/logger.js because of ./src/demux/demuxer-worker.js */
                /*! ModuleConcatenation bailout: Cannot concat with ./node_modules/eventemitter3/index.js (<- Module is not an ECMAScript module) */
                /*! ModuleConcatenation bailout: Cannot concat with ./node_modules/url-toolkit/src/url-toolkit.js (<- Module is not an ECMAScript module) */
                function(e, t, a) {
                    "use strict";
                    a.r(t),
                    a.d(t, "default", (function() {
                        return ia
                    }
                    ));
                    var r = {};
                    a.r(r),
                    a.d(r, "newCue", (function() {
                        return ht
                    }
                    ));
                    var n, i, o = a("./node_modules/url-toolkit/src/url-toolkit.js"), s = a("./src/errors.ts"), l = a("./src/polyfills/number.js"), u = a("./src/events.js"), d = a("./src/utils/logger.js"), c = {
                        hlsEventGeneric: !0,
                        hlsHandlerDestroying: !0,
                        hlsHandlerDestroyed: !0
                    }, f = function() {
                        function e(e) {
                            this.hls = void 0,
                            this.handledEvents = void 0,
                            this.useGenericHandler = void 0,
                            this.hls = e,
                            this.onEvent = this.onEvent.bind(this);
                            for (var t = arguments.length, a = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)
                                a[r - 1] = arguments[r];
                            this.handledEvents = a,
                            this.useGenericHandler = !0,
                            this.registerListeners()
                        }
                        var t = e.prototype;
                        return t.destroy = function() {
                            this.onHandlerDestroying(),
                            this.unregisterListeners(),
                            this.onHandlerDestroyed()
                        }
                        ,
                        t.onHandlerDestroying = function() {}
                        ,
                        t.onHandlerDestroyed = function() {}
                        ,
                        t.isEventHandler = function() {
                            return "object" == typeof this.handledEvents && this.handledEvents.length && "function" == typeof this.onEvent
                        }
                        ,
                        t.registerListeners = function() {
                            this.isEventHandler() && this.handledEvents.forEach((function(e) {
                                if (c[e])
                                    throw new Error("Forbidden event-name: " + e);
                                this.hls.on(e, this.onEvent)
                            }
                            ), this)
                        }
                        ,
                        t.unregisterListeners = function() {
                            this.isEventHandler() && this.handledEvents.forEach((function(e) {
                                this.hls.off(e, this.onEvent)
                            }
                            ), this)
                        }
                        ,
                        t.onEvent = function(e, t) {
                            this.onEventGeneric(e, t)
                        }
                        ,
                        t.onEventGeneric = function(e, t) {
                            try {
                                (function(e, t) {
                                    var a = "on" + e.replace("hls", "");
                                    if ("function" != typeof this[a])
                                        throw new Error("Event " + e + " has no generic handler in this " + this.constructor.name + " class (tried " + a + ")");
                                    return this[a].bind(this, t)
                                }
                                ).call(this, e, t).call()
                            } catch (t) {
                                d.logger.error("An internal error happened while handling event " + e + '. Error message: "' + t.message + '". Here is a stacktrace:', t),
                                this.hls.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.OTHER_ERROR,
                                    details: s.ErrorDetails.INTERNAL_EXCEPTION,
                                    fatal: !1,
                                    event: e,
                                    err: t
                                })
                            }
                        }
                        ,
                        e
                    }();
                    !function(e) {
                        e.MANIFEST = "manifest",
                        e.LEVEL = "level",
                        e.AUDIO_TRACK = "audioTrack",
                        e.SUBTITLE_TRACK = "subtitleTrack"
                    }(n || (n = {})),
                    function(e) {
                        e.MAIN = "main",
                        e.AUDIO = "audio",
                        e.SUBTITLE = "subtitle"
                    }(i || (i = {}));
                    var h = a("./src/demux/mp4demuxer.js");
                    function p(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var g, m = function() {
                        function e(e, t) {
                            this._uri = null,
                            this.baseuri = void 0,
                            this.reluri = void 0,
                            this.method = null,
                            this.key = null,
                            this.iv = null,
                            this.baseuri = e,
                            this.reluri = t
                        }
                        var t, a, r;
                        return t = e,
                        (a = [{
                            key: "uri",
                            get: function() {
                                return !this._uri && this.reluri && (this._uri = Object(o.buildAbsoluteURL)(this.baseuri, this.reluri, {
                                    alwaysNormalize: !0
                                })),
                                this._uri
                            }
                        }]) && p(t.prototype, a),
                        r && p(t, r),
                        e
                    }();
                    function y(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    !function(e) {
                        e.AUDIO = "audio",
                        e.VIDEO = "video"
                    }(g || (g = {}));
                    var _ = function() {
                        function e() {
                            var e;
                            this._url = null,
                            this._byteRange = null,
                            this._decryptdata = null,
                            this._elementaryStreams = ((e = {})[g.AUDIO] = !1,
                            e[g.VIDEO] = !1,
                            e),
                            this.deltaPTS = 0,
                            this.rawProgramDateTime = null,
                            this.programDateTime = null,
                            this.title = null,
                            this.tagList = [],
                            this.cc = void 0,
                            this.type = void 0,
                            this.relurl = void 0,
                            this.baseurl = void 0,
                            this.duration = void 0,
                            this.start = void 0,
                            this.sn = 0,
                            this.urlId = 0,
                            this.level = 0,
                            this.levelkey = void 0,
                            this.loader = void 0
                        }
                        var t, a, r, n = e.prototype;
                        return n.setByteRange = function(e, t) {
                            var a = e.split("@", 2)
                              , r = [];
                            1 === a.length ? r[0] = t ? t.byteRangeEndOffset : 0 : r[0] = parseInt(a[1]),
                            r[1] = parseInt(a[0]) + r[0],
                            this._byteRange = r
                        }
                        ,
                        n.addElementaryStream = function(e) {
                            this._elementaryStreams[e] = !0
                        }
                        ,
                        n.hasElementaryStream = function(e) {
                            return !0 === this._elementaryStreams[e]
                        }
                        ,
                        n.createInitializationVector = function(e) {
                            for (var t = new Uint8Array(16), a = 12; a < 16; a++)
                                t[a] = e >> 8 * (15 - a) & 255;
                            return t
                        }
                        ,
                        n.setDecryptDataFromLevelKey = function(e, t) {
                            var a = e;
                            return (null == e ? void 0 : e.method) && e.uri && !e.iv && ((a = new m(e.baseuri,e.reluri)).method = e.method,
                            a.iv = this.createInitializationVector(t)),
                            a
                        }
                        ,
                        t = e,
                        (a = [{
                            key: "url",
                            get: function() {
                                return !this._url && this.relurl && (this._url = Object(o.buildAbsoluteURL)(this.baseurl, this.relurl, {
                                    alwaysNormalize: !0
                                })),
                                this._url
                            },
                            set: function(e) {
                                this._url = e
                            }
                        }, {
                            key: "byteRange",
                            get: function() {
                                return this._byteRange ? this._byteRange : []
                            }
                        }, {
                            key: "byteRangeStartOffset",
                            get: function() {
                                return this.byteRange[0]
                            }
                        }, {
                            key: "byteRangeEndOffset",
                            get: function() {
                                return this.byteRange[1]
                            }
                        }, {
                            key: "decryptdata",
                            get: function() {
                                if (!this.levelkey && !this._decryptdata)
                                    return null;
                                if (!this._decryptdata && this.levelkey) {
                                    var e = this.sn;
                                    "number" != typeof e && (this.levelkey && "AES-128" === this.levelkey.method && !this.levelkey.iv && d.logger.warn('missing IV for initialization segment with method="' + this.levelkey.method + '" - compliance issue'),
                                    e = 0),
                                    this._decryptdata = this.setDecryptDataFromLevelKey(this.levelkey, e)
                                }
                                return this._decryptdata
                            }
                        }, {
                            key: "endProgramDateTime",
                            get: function() {
                                if (null === this.programDateTime)
                                    return null;
                                if (!Object(l.isFiniteNumber)(this.programDateTime))
                                    return null;
                                var e = Object(l.isFiniteNumber)(this.duration) ? this.duration : 0;
                                return this.programDateTime + 1e3 * e
                            }
                        }, {
                            key: "encrypted",
                            get: function() {
                                return !(!this.decryptdata || null === this.decryptdata.uri || null !== this.decryptdata.key)
                            }
                        }]) && y(t.prototype, a),
                        r && y(t, r),
                        e
                    }();
                    function v(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var b = function() {
                        function e(e) {
                            this.endCC = 0,
                            this.endSN = 0,
                            this.fragments = [],
                            this.initSegment = null,
                            this.live = !0,
                            this.needSidxRanges = !1,
                            this.startCC = 0,
                            this.startSN = 0,
                            this.startTimeOffset = null,
                            this.targetduration = 0,
                            this.totalduration = 0,
                            this.type = null,
                            this.url = e,
                            this.version = null
                        }
                        var t, a, r;
                        return t = e,
                        (a = [{
                            key: "hasProgramDateTime",
                            get: function() {
                                return !(!this.fragments[0] || !Object(l.isFiniteNumber)(this.fragments[0].programDateTime))
                            }
                        }]) && v(t.prototype, a),
                        r && v(t, r),
                        e
                    }()
                      , E = /^(\d+)x(\d+)$/
                      , k = /\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g
                      , T = function() {
                        function e(t) {
                            for (var a in "string" == typeof t && (t = e.parseAttrList(t)),
                            t)
                                t.hasOwnProperty(a) && (this[a] = t[a])
                        }
                        var t = e.prototype;
                        return t.decimalInteger = function(e) {
                            var t = parseInt(this[e], 10);
                            return t > Number.MAX_SAFE_INTEGER ? 1 / 0 : t
                        }
                        ,
                        t.hexadecimalInteger = function(e) {
                            if (this[e]) {
                                var t = (this[e] || "0x").slice(2);
                                t = (1 & t.length ? "0" : "") + t;
                                for (var a = new Uint8Array(t.length / 2), r = 0; r < t.length / 2; r++)
                                    a[r] = parseInt(t.slice(2 * r, 2 * r + 2), 16);
                                return a
                            }
                            return null
                        }
                        ,
                        t.hexadecimalIntegerAsNumber = function(e) {
                            var t = parseInt(this[e], 16);
                            return t > Number.MAX_SAFE_INTEGER ? 1 / 0 : t
                        }
                        ,
                        t.decimalFloatingPoint = function(e) {
                            return parseFloat(this[e])
                        }
                        ,
                        t.enumeratedString = function(e) {
                            return this[e]
                        }
                        ,
                        t.decimalResolution = function(e) {
                            var t = E.exec(this[e]);
                            if (null !== t)
                                return {
                                    width: parseInt(t[1], 10),
                                    height: parseInt(t[2], 10)
                                }
                        }
                        ,
                        e.parseAttrList = function(e) {
                            var t, a = {};
                            for (k.lastIndex = 0; null !== (t = k.exec(e)); ) {
                                var r = t[2];
                                0 === r.indexOf('"') && r.lastIndexOf('"') === r.length - 1 && (r = r.slice(1, -1)),
                                a[t[1]] = r
                            }
                            return a
                        }
                        ,
                        e
                    }()
                      , S = {
                        audio: {
                            a3ds: !0,
                            "ac-3": !0,
                            "ac-4": !0,
                            alac: !0,
                            alaw: !0,
                            dra1: !0,
                            "dts+": !0,
                            "dts-": !0,
                            dtsc: !0,
                            dtse: !0,
                            dtsh: !0,
                            "ec-3": !0,
                            enca: !0,
                            g719: !0,
                            g726: !0,
                            m4ae: !0,
                            mha1: !0,
                            mha2: !0,
                            mhm1: !0,
                            mhm2: !0,
                            mlpa: !0,
                            mp4a: !0,
                            "raw ": !0,
                            Opus: !0,
                            samr: !0,
                            sawb: !0,
                            sawp: !0,
                            sevc: !0,
                            sqcp: !0,
                            ssmv: !0,
                            twos: !0,
                            ulaw: !0
                        },
                        video: {
                            avc1: !0,
                            avc2: !0,
                            avc3: !0,
                            avc4: !0,
                            avcp: !0,
                            drac: !0,
                            dvav: !0,
                            dvhe: !0,
                            encv: !0,
                            hev1: !0,
                            hvc1: !0,
                            mjp2: !0,
                            mp4v: !0,
                            mvc1: !0,
                            mvc2: !0,
                            mvc3: !0,
                            mvc4: !0,
                            resv: !0,
                            rv60: !0,
                            s263: !0,
                            svc1: !0,
                            svc2: !0,
                            "vc-1": !0,
                            vp08: !0,
                            vp09: !0
                        }
                    };
                    function A(e, t) {
                        return MediaSource.isTypeSupported((t || "video") + '/mp4;codecs="' + e + '"')
                    }
                    var C = /(?:#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)|#EXT-X-SESSION-DATA:([^\n\r]*)[\r\n]+)/g
                      , I = /#EXT-X-MEDIA:(.*)/g
                      , P = new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source, /|(?!#)([\S+ ?]+)/.source, /|#EXT-X-BYTERANGE:*(.+)/.source, /|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source, /|#.*/.source].join(""),"g")
                      , w = /(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/
                      , M = /\.(mp4|m4s|m4v|m4a)$/i
                      , R = function() {
                        function e() {}
                        return e.findGroup = function(e, t) {
                            for (var a = 0; a < e.length; a++) {
                                var r = e[a];
                                if (r.id === t)
                                    return r
                            }
                        }
                        ,
                        e.convertAVC1ToAVCOTI = function(e) {
                            var t, a = e.split(".");
                            return a.length > 2 ? (t = a.shift() + ".",
                            t += parseInt(a.shift()).toString(16),
                            t += ("000" + parseInt(a.shift()).toString(16)).substr(-4)) : t = e,
                            t
                        }
                        ,
                        e.resolve = function(e, t) {
                            return o.buildAbsoluteURL(t, e, {
                                alwaysNormalize: !0
                            })
                        }
                        ,
                        e.parseMasterPlaylist = function(t, a) {
                            var r, n = [], i = {}, o = !1;
                            function s(e, t) {
                                ["video", "audio"].forEach((function(a) {
                                    var r = e.filter((function(e) {
                                        return function(e, t) {
                                            var a = S[t];
                                            return !!a && !0 === a[e.slice(0, 4)]
                                        }(e, a)
                                    }
                                    ));
                                    if (r.length) {
                                        var n = r.filter((function(e) {
                                            return 0 === e.lastIndexOf("avc1", 0) || 0 === e.lastIndexOf("mp4a", 0)
                                        }
                                        ));
                                        t[a + "Codec"] = n.length > 0 ? n[0] : r[0],
                                        e = e.filter((function(e) {
                                            return -1 === r.indexOf(e)
                                        }
                                        ))
                                    }
                                }
                                )),
                                t.unknownCodecs = e
                            }
                            for (C.lastIndex = 0; null != (r = C.exec(t)); )
                                if (r[1]) {
                                    var l = {}
                                      , u = l.attrs = new T(r[1]);
                                    l.url = e.resolve(r[2], a);
                                    var d = u.decimalResolution("RESOLUTION");
                                    d && (l.width = d.width,
                                    l.height = d.height),
                                    l.bitrate = u.decimalInteger("AVERAGE-BANDWIDTH") || u.decimalInteger("BANDWIDTH"),
                                    l.name = u.NAME,
                                    s([].concat((u.CODECS || "").split(/[ ,]+/)), l),
                                    l.videoCodec && -1 !== l.videoCodec.indexOf("avc1") && (l.videoCodec = e.convertAVC1ToAVCOTI(l.videoCodec)),
                                    n.push(l)
                                } else if (r[3]) {
                                    var c = new T(r[3]);
                                    c["DATA-ID"] && (o = !0,
                                    i[c["DATA-ID"]] = c)
                                }
                            return {
                                levels: n,
                                sessionData: o ? i : null
                            }
                        }
                        ,
                        e.parseMasterPlaylistMedia = function(t, a, r, n) {
                            var i;
                            void 0 === n && (n = []);
                            var o = []
                              , s = 0;
                            for (I.lastIndex = 0; null !== (i = I.exec(t)); ) {
                                var l = new T(i[1]);
                                if (l.TYPE === r) {
                                    var u = {
                                        attrs: l,
                                        id: s++,
                                        groupId: l["GROUP-ID"],
                                        instreamId: l["INSTREAM-ID"],
                                        name: l.NAME || l.LANGUAGE,
                                        type: r,
                                        default: "YES" === l.DEFAULT,
                                        autoselect: "YES" === l.AUTOSELECT,
                                        forced: "YES" === l.FORCED,
                                        lang: l.LANGUAGE
                                    };
                                    if (l.URI && (u.url = e.resolve(l.URI, a)),
                                    n.length) {
                                        var d = e.findGroup(n, u.groupId);
                                        u.audioCodec = d ? d.codec : n[0].codec
                                    }
                                    o.push(u)
                                }
                            }
                            return o
                        }
                        ,
                        e.parseLevelPlaylist = function(e, t, a, r, n) {
                            var i, o, s, u = 0, c = 0, f = new b(t), h = 0, p = null, g = new _, y = null;
                            for (P.lastIndex = 0; null !== (i = P.exec(e)); ) {
                                var v = i[1];
                                if (v) {
                                    g.duration = parseFloat(v);
                                    var E = (" " + i[2]).slice(1);
                                    g.title = E || null,
                                    g.tagList.push(E ? ["INF", v, E] : ["INF", v])
                                } else if (i[3]) {
                                    if (Object(l.isFiniteNumber)(g.duration)) {
                                        var k = u++;
                                        g.type = r,
                                        g.start = c,
                                        s && (g.levelkey = s),
                                        g.sn = k,
                                        g.level = a,
                                        g.cc = h,
                                        g.urlId = n,
                                        g.baseurl = t,
                                        g.relurl = (" " + i[3]).slice(1),
                                        x(g, p),
                                        f.fragments.push(g),
                                        p = g,
                                        c += g.duration,
                                        g = new _
                                    }
                                } else if (i[4]) {
                                    var S = (" " + i[4]).slice(1);
                                    p ? g.setByteRange(S, p) : g.setByteRange(S)
                                } else if (i[5])
                                    g.rawProgramDateTime = (" " + i[5]).slice(1),
                                    g.tagList.push(["PROGRAM-DATE-TIME", g.rawProgramDateTime]),
                                    null === y && (y = f.fragments.length);
                                else {
                                    if (!(i = i[0].match(w))) {
                                        d.logger.warn("No matches on slow regex match for level playlist!");
                                        continue
                                    }
                                    for (o = 1; o < i.length && void 0 === i[o]; o++)
                                        ;
                                    var A = (" " + i[o + 1]).slice(1)
                                      , C = (" " + i[o + 2]).slice(1);
                                    switch (i[o]) {
                                    case "#":
                                        g.tagList.push(C ? [A, C] : [A]);
                                        break;
                                    case "PLAYLIST-TYPE":
                                        f.type = A.toUpperCase();
                                        break;
                                    case "MEDIA-SEQUENCE":
                                        u = f.startSN = parseInt(A);
                                        break;
                                    case "TARGETDURATION":
                                        f.targetduration = parseFloat(A);
                                        break;
                                    case "VERSION":
                                        f.version = parseInt(A);
                                        break;
                                    case "EXTM3U":
                                        break;
                                    case "ENDLIST":
                                        f.live = !1;
                                        break;
                                    case "DIS":
                                        h++,
                                        g.tagList.push(["DIS"]);
                                        break;
                                    case "DISCONTINUITY-SEQ":
                                        h = parseInt(A);
                                        break;
                                    case "KEY":
                                        var I = new T(A)
                                          , R = I.enumeratedString("METHOD")
                                          , D = I.URI
                                          , O = I.hexadecimalInteger("IV");
                                        if ("com.apple.streamingkeydelivery" === (I.KEYFORMAT || "identity")) {
                                            d.logger.warn("Keyformat com.apple.streamingkeydelivery is not supported");
                                            continue
                                        }
                                        R && (s = new m(t,D),
                                        D && ["AES-128", "SAMPLE-AES", "SAMPLE-AES-CENC"].indexOf(R) >= 0 && (s.method = R,
                                        s.key = null,
                                        s.iv = O));
                                        break;
                                    case "START":
                                        var N = new T(A).decimalFloatingPoint("TIME-OFFSET");
                                        Object(l.isFiniteNumber)(N) && (f.startTimeOffset = N);
                                        break;
                                    case "MAP":
                                        var L = new T(A);
                                        g.relurl = L.URI,
                                        L.BYTERANGE && g.setByteRange(L.BYTERANGE),
                                        g.baseurl = t,
                                        g.level = a,
                                        g.type = r,
                                        g.sn = "initSegment",
                                        f.initSegment = g,
                                        (g = new _).rawProgramDateTime = f.initSegment.rawProgramDateTime;
                                        break;
                                    default:
                                        d.logger.warn("line parsed but not handled: " + i)
                                    }
                                }
                            }
                            return (g = p) && !g.relurl && (f.fragments.pop(),
                            c -= g.duration),
                            f.totalduration = c,
                            f.averagetargetduration = c / f.fragments.length,
                            f.endSN = u - 1,
                            f.startCC = f.fragments[0] ? f.fragments[0].cc : 0,
                            f.endCC = h,
                            !f.initSegment && f.fragments.length && f.fragments.every((function(e) {
                                return M.test(e.relurl)
                            }
                            )) && (d.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),
                            (g = new _).relurl = f.fragments[0].relurl,
                            g.baseurl = t,
                            g.level = a,
                            g.type = r,
                            g.sn = "initSegment",
                            f.initSegment = g,
                            f.needSidxRanges = !0),
                            y && function(e, t) {
                                for (var a = e[t], r = t - 1; r >= 0; r--) {
                                    var n = e[r];
                                    n.programDateTime = a.programDateTime - 1e3 * n.duration,
                                    a = n
                                }
                            }(f.fragments, y),
                            f
                        }
                        ,
                        e
                    }();
                    function x(e, t) {
                        e.rawProgramDateTime ? e.programDateTime = Date.parse(e.rawProgramDateTime) : (null == t ? void 0 : t.programDateTime) && (e.programDateTime = t.endProgramDateTime),
                        Object(l.isFiniteNumber)(e.programDateTime) || (e.programDateTime = null,
                        e.rawProgramDateTime = null)
                    }
                    var D = window.performance
                      , O = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.MANIFEST_LOADING, u.default.LEVEL_LOADING, u.default.AUDIO_TRACK_LOADING, u.default.SUBTITLE_TRACK_LOADING) || this).loaders = {},
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a,
                        r.canHaveQualityLevels = function(e) {
                            return e !== n.AUDIO_TRACK && e !== n.SUBTITLE_TRACK
                        }
                        ,
                        r.mapContextToLevelType = function(e) {
                            switch (e.type) {
                            case n.AUDIO_TRACK:
                                return i.AUDIO;
                            case n.SUBTITLE_TRACK:
                                return i.SUBTITLE;
                            default:
                                return i.MAIN
                            }
                        }
                        ,
                        r.getResponseUrl = function(e, t) {
                            var a = e.url;
                            return void 0 !== a && 0 !== a.indexOf("data:") || (a = t.url),
                            a
                        }
                        ;
                        var o = r.prototype;
                        return o.createInternalLoader = function(e) {
                            var t = this.hls.config
                              , a = t.pLoader
                              , r = t.loader
                              , n = new (a || r)(t);
                            return e.loader = n,
                            this.loaders[e.type] = n,
                            n
                        }
                        ,
                        o.getInternalLoader = function(e) {
                            return this.loaders[e.type]
                        }
                        ,
                        o.resetInternalLoader = function(e) {
                            this.loaders[e] && delete this.loaders[e]
                        }
                        ,
                        o.destroyInternalLoaders = function() {
                            for (var e in this.loaders) {
                                var t = this.loaders[e];
                                t && t.destroy(),
                                this.resetInternalLoader(e)
                            }
                        }
                        ,
                        o.destroy = function() {
                            this.destroyInternalLoaders(),
                            e.prototype.destroy.call(this)
                        }
                        ,
                        o.onManifestLoading = function(e) {
                            this.load({
                                url: e.url,
                                type: n.MANIFEST,
                                level: 0,
                                id: null,
                                responseType: "text"
                            })
                        }
                        ,
                        o.onLevelLoading = function(e) {
                            this.load({
                                url: e.url,
                                type: n.LEVEL,
                                level: e.level,
                                id: e.id,
                                responseType: "text"
                            })
                        }
                        ,
                        o.onAudioTrackLoading = function(e) {
                            this.load({
                                url: e.url,
                                type: n.AUDIO_TRACK,
                                level: null,
                                id: e.id,
                                responseType: "text"
                            })
                        }
                        ,
                        o.onSubtitleTrackLoading = function(e) {
                            this.load({
                                url: e.url,
                                type: n.SUBTITLE_TRACK,
                                level: null,
                                id: e.id,
                                responseType: "text"
                            })
                        }
                        ,
                        o.load = function(e) {
                            var t = this.hls.config;
                            d.logger.debug("Loading playlist of type " + e.type + ", level: " + e.level + ", id: " + e.id);
                            var a, r, i, o, s = this.getInternalLoader(e);
                            if (s) {
                                var l = s.context;
                                if (l && l.url === e.url)
                                    return d.logger.trace("playlist request ongoing"),
                                    !1;
                                d.logger.warn("aborting previous loader for type: " + e.type),
                                s.abort()
                            }
                            switch (e.type) {
                            case n.MANIFEST:
                                a = t.manifestLoadingMaxRetry,
                                r = t.manifestLoadingTimeOut,
                                i = t.manifestLoadingRetryDelay,
                                o = t.manifestLoadingMaxRetryTimeout;
                                break;
                            case n.LEVEL:
                                a = 0,
                                o = 0,
                                i = 0,
                                r = t.levelLoadingTimeOut;
                                break;
                            default:
                                a = t.levelLoadingMaxRetry,
                                r = t.levelLoadingTimeOut,
                                i = t.levelLoadingRetryDelay,
                                o = t.levelLoadingMaxRetryTimeout
                            }
                            s = this.createInternalLoader(e);
                            var u = {
                                timeout: r,
                                maxRetry: a,
                                retryDelay: i,
                                maxRetryDelay: o
                            }
                              , c = {
                                onSuccess: this.loadsuccess.bind(this),
                                onError: this.loaderror.bind(this),
                                onTimeout: this.loadtimeout.bind(this)
                            };
                            return d.logger.debug("Calling internal loader delegate for URL: " + e.url),
                            s.load(e, u, c),
                            !0
                        }
                        ,
                        o.loadsuccess = function(e, t, a, r) {
                            if (void 0 === r && (r = null),
                            a.isSidxRequest)
                                return this._handleSidxRequest(e, a),
                                void this._handlePlaylistLoaded(e, t, a, r);
                            if (this.resetInternalLoader(a.type),
                            "string" != typeof e.data)
                                throw new Error('expected responseType of "text" for PlaylistLoader');
                            var n = e.data;
                            t.tload = D.now(),
                            0 === n.indexOf("#EXTM3U") ? n.indexOf("#EXTINF:") > 0 || n.indexOf("#EXT-X-TARGETDURATION:") > 0 ? this._handleTrackOrLevelPlaylist(e, t, a, r) : this._handleMasterPlaylist(e, t, a, r) : this._handleManifestParsingError(e, a, "no EXTM3U delimiter", r)
                        }
                        ,
                        o.loaderror = function(e, t, a) {
                            void 0 === a && (a = null),
                            this._handleNetworkError(t, a, !1, e)
                        }
                        ,
                        o.loadtimeout = function(e, t, a) {
                            void 0 === a && (a = null),
                            this._handleNetworkError(t, a, !0)
                        }
                        ,
                        o._handleMasterPlaylist = function(e, t, a, n) {
                            var i = this.hls
                              , o = e.data
                              , s = r.getResponseUrl(e, a)
                              , l = R.parseMasterPlaylist(o, s)
                              , c = l.levels
                              , f = l.sessionData;
                            if (c.length) {
                                var h = c.map((function(e) {
                                    return {
                                        id: e.attrs.AUDIO,
                                        codec: e.audioCodec
                                    }
                                }
                                ))
                                  , p = R.parseMasterPlaylistMedia(o, s, "AUDIO", h)
                                  , g = R.parseMasterPlaylistMedia(o, s, "SUBTITLES")
                                  , m = R.parseMasterPlaylistMedia(o, s, "CLOSED-CAPTIONS");
                                if (p.length) {
                                    var y = !1;
                                    p.forEach((function(e) {
                                        e.url || (y = !0)
                                    }
                                    )),
                                    !1 === y && c[0].audioCodec && !c[0].attrs.AUDIO && (d.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),
                                    p.unshift({
                                        type: "main",
                                        name: "main",
                                        default: !1,
                                        autoselect: !1,
                                        forced: !1,
                                        id: -1,
                                        attrs: {},
                                        url: ""
                                    }))
                                }
                                i.trigger(u.default.MANIFEST_LOADED, {
                                    levels: c,
                                    audioTracks: p,
                                    subtitles: g,
                                    captions: m,
                                    url: s,
                                    stats: t,
                                    networkDetails: n,
                                    sessionData: f
                                })
                            } else
                                this._handleManifestParsingError(e, a, "no level found in manifest", n)
                        }
                        ,
                        o._handleTrackOrLevelPlaylist = function(e, t, a, i) {
                            var o = this.hls
                              , d = a.id
                              , c = a.level
                              , f = a.type
                              , h = r.getResponseUrl(e, a)
                              , p = Object(l.isFiniteNumber)(d) ? d : 0
                              , g = Object(l.isFiniteNumber)(c) ? c : p
                              , m = r.mapContextToLevelType(a)
                              , y = R.parseLevelPlaylist(e.data, h, g, m, p);
                            if (y.tload = t.tload,
                            y.fragments.length) {
                                if (f === n.MANIFEST) {
                                    var _ = {
                                        url: h,
                                        details: y
                                    };
                                    o.trigger(u.default.MANIFEST_LOADED, {
                                        levels: [_],
                                        audioTracks: [],
                                        url: h,
                                        stats: t,
                                        networkDetails: i,
                                        sessionData: null
                                    })
                                }
                                if (t.tparsed = D.now(),
                                y.needSidxRanges) {
                                    var v = y.initSegment.url;
                                    this.load({
                                        url: v,
                                        isSidxRequest: !0,
                                        type: f,
                                        level: c,
                                        levelDetails: y,
                                        id: d,
                                        rangeStart: 0,
                                        rangeEnd: 2048,
                                        responseType: "arraybuffer"
                                    })
                                } else
                                    a.levelDetails = y,
                                    this._handlePlaylistLoaded(e, t, a, i)
                            } else
                                o.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.NETWORK_ERROR,
                                    details: s.ErrorDetails.LEVEL_EMPTY_ERROR,
                                    fatal: !1,
                                    url: h,
                                    reason: "no fragments found in level",
                                    level: "number" == typeof a.level ? a.level : void 0
                                })
                        }
                        ,
                        o._handleSidxRequest = function(e, t) {
                            if ("string" == typeof e.data)
                                throw new Error("sidx request must be made with responseType of array buffer");
                            var a = h.default.parseSegmentIndex(new Uint8Array(e.data));
                            if (a) {
                                var r = a.references
                                  , n = t.levelDetails;
                                r.forEach((function(e, t) {
                                    var a = e.info;
                                    if (n) {
                                        var r = n.fragments[t];
                                        0 === r.byteRange.length && r.setByteRange(String(1 + a.end - a.start) + "@" + String(a.start))
                                    }
                                }
                                )),
                                n && n.initSegment.setByteRange(String(a.moovEndOffset) + "@0")
                            }
                        }
                        ,
                        o._handleManifestParsingError = function(e, t, a, r) {
                            this.hls.trigger(u.default.ERROR, {
                                type: s.ErrorTypes.NETWORK_ERROR,
                                details: s.ErrorDetails.MANIFEST_PARSING_ERROR,
                                fatal: !0,
                                url: e.url,
                                reason: a,
                                networkDetails: r
                            })
                        }
                        ,
                        o._handleNetworkError = function(e, t, a, r) {
                            var i, o;
                            void 0 === a && (a = !1),
                            void 0 === r && (r = null),
                            d.logger.info("A network error occured while loading a " + e.type + "-type playlist");
                            var l = this.getInternalLoader(e);
                            switch (e.type) {
                            case n.MANIFEST:
                                i = a ? s.ErrorDetails.MANIFEST_LOAD_TIMEOUT : s.ErrorDetails.MANIFEST_LOAD_ERROR,
                                o = !0;
                                break;
                            case n.LEVEL:
                                i = a ? s.ErrorDetails.LEVEL_LOAD_TIMEOUT : s.ErrorDetails.LEVEL_LOAD_ERROR,
                                o = !1;
                                break;
                            case n.AUDIO_TRACK:
                                i = a ? s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT : s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,
                                o = !1;
                                break;
                            default:
                                o = !1
                            }
                            l && (l.abort(),
                            this.resetInternalLoader(e.type));
                            var c = {
                                type: s.ErrorTypes.NETWORK_ERROR,
                                details: i,
                                fatal: o,
                                url: e.url,
                                loader: l,
                                context: e,
                                networkDetails: t
                            };
                            r && (c.response = r),
                            this.hls.trigger(u.default.ERROR, c)
                        }
                        ,
                        o._handlePlaylistLoaded = function(e, t, a, i) {
                            var o = a.type
                              , s = a.level
                              , l = a.id
                              , d = a.levelDetails;
                            if (d && d.targetduration)
                                if (r.canHaveQualityLevels(a.type))
                                    this.hls.trigger(u.default.LEVEL_LOADED, {
                                        details: d,
                                        level: s || 0,
                                        id: l || 0,
                                        stats: t,
                                        networkDetails: i
                                    });
                                else
                                    switch (o) {
                                    case n.AUDIO_TRACK:
                                        this.hls.trigger(u.default.AUDIO_TRACK_LOADED, {
                                            details: d,
                                            id: l,
                                            stats: t,
                                            networkDetails: i
                                        });
                                        break;
                                    case n.SUBTITLE_TRACK:
                                        this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED, {
                                            details: d,
                                            id: l,
                                            stats: t,
                                            networkDetails: i
                                        })
                                    }
                            else
                                this._handleManifestParsingError(e, a, "invalid target duration", i)
                        }
                        ,
                        r
                    }(f)
                      , N = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.FRAG_LOADING) || this).loaders = {},
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.destroy = function() {
                            var t = this.loaders;
                            for (var a in t) {
                                var r = t[a];
                                r && r.destroy()
                            }
                            this.loaders = {},
                            e.prototype.destroy.call(this)
                        }
                        ,
                        n.onFragLoading = function(e) {
                            var t = e.frag
                              , a = t.type
                              , r = this.loaders
                              , n = this.hls.config
                              , i = n.fLoader
                              , o = n.loader;
                            t.loaded = 0;
                            var s, u, c, f = r[a];
                            f && (d.logger.warn("abort previous fragment loader for type: " + a),
                            f.abort()),
                            f = r[a] = t.loader = n.fLoader ? new i(n) : new o(n),
                            s = {
                                url: t.url,
                                frag: t,
                                responseType: "arraybuffer",
                                progressData: !1
                            };
                            var h = t.byteRangeStartOffset
                              , p = t.byteRangeEndOffset;
                            Object(l.isFiniteNumber)(h) && Object(l.isFiniteNumber)(p) && (s.rangeStart = h,
                            s.rangeEnd = p),
                            u = {
                                timeout: n.fragLoadingTimeOut,
                                maxRetry: 0,
                                retryDelay: 0,
                                maxRetryDelay: n.fragLoadingMaxRetryTimeout
                            },
                            c = {
                                onSuccess: this.loadsuccess.bind(this),
                                onError: this.loaderror.bind(this),
                                onTimeout: this.loadtimeout.bind(this),
                                onProgress: this.loadprogress.bind(this)
                            },
                            f.load(s, u, c)
                        }
                        ,
                        n.loadsuccess = function(e, t, a, r) {
                            void 0 === r && (r = null);
                            var n = e.data
                              , i = a.frag;
                            i.loader = void 0,
                            this.loaders[i.type] = void 0,
                            this.hls.trigger(u.default.FRAG_LOADED, {
                                payload: n,
                                frag: i,
                                stats: t,
                                networkDetails: r
                            })
                        }
                        ,
                        n.loaderror = function(e, t, a) {
                            void 0 === a && (a = null);
                            var r = t.frag
                              , n = r.loader;
                            n && n.abort(),
                            this.loaders[r.type] = void 0,
                            this.hls.trigger(u.default.ERROR, {
                                type: s.ErrorTypes.NETWORK_ERROR,
                                details: s.ErrorDetails.FRAG_LOAD_ERROR,
                                fatal: !1,
                                frag: t.frag,
                                response: e,
                                networkDetails: a
                            })
                        }
                        ,
                        n.loadtimeout = function(e, t, a) {
                            void 0 === a && (a = null);
                            var r = t.frag
                              , n = r.loader;
                            n && n.abort(),
                            this.loaders[r.type] = void 0,
                            this.hls.trigger(u.default.ERROR, {
                                type: s.ErrorTypes.NETWORK_ERROR,
                                details: s.ErrorDetails.FRAG_LOAD_TIMEOUT,
                                fatal: !1,
                                frag: t.frag,
                                networkDetails: a
                            })
                        }
                        ,
                        n.loadprogress = function(e, t, a, r) {
                            void 0 === r && (r = null);
                            var n = t.frag;
                            n.loaded = e.loaded,
                            this.hls.trigger(u.default.FRAG_LOAD_PROGRESS, {
                                frag: n,
                                stats: e,
                                networkDetails: r
                            })
                        }
                        ,
                        r
                    }(f)
                      , L = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.KEY_LOADING) || this).loaders = {},
                            a.decryptkey = null,
                            a.decrypturl = null,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.destroy = function() {
                            for (var t in this.loaders) {
                                var a = this.loaders[t];
                                a && a.destroy()
                            }
                            this.loaders = {},
                            e.prototype.destroy.call(this)
                        }
                        ,
                        n.onKeyLoading = function(e) {
                            var t = e.frag
                              , a = t.type
                              , r = this.loaders[a];
                            if (t.decryptdata) {
                                var n = t.decryptdata.uri;
                                if (n !== this.decrypturl || null === this.decryptkey) {
                                    var i = this.hls.config;
                                    if (r && (d.logger.warn("abort previous key loader for type:" + a),
                                    r.abort()),
                                    !n)
                                        return void d.logger.warn("key uri is falsy");
                                    t.loader = this.loaders[a] = new i.loader(i),
                                    this.decrypturl = n,
                                    this.decryptkey = null;
                                    var o = {
                                        url: n,
                                        frag: t,
                                        responseType: "arraybuffer"
                                    }
                                      , s = {
                                        timeout: i.fragLoadingTimeOut,
                                        maxRetry: 0,
                                        retryDelay: i.fragLoadingRetryDelay,
                                        maxRetryDelay: i.fragLoadingMaxRetryTimeout
                                    }
                                      , l = {
                                        onSuccess: this.loadsuccess.bind(this),
                                        onError: this.loaderror.bind(this),
                                        onTimeout: this.loadtimeout.bind(this)
                                    };
                                    t.loader.load(o, s, l)
                                } else
                                    this.decryptkey && (t.decryptdata.key = this.decryptkey,
                                    this.hls.trigger(u.default.KEY_LOADED, {
                                        frag: t
                                    }))
                            } else
                                d.logger.warn("Missing decryption data on fragment in onKeyLoading")
                        }
                        ,
                        n.loadsuccess = function(e, t, a) {
                            var r = a.frag;
                            r.decryptdata ? (this.decryptkey = r.decryptdata.key = new Uint8Array(e.data),
                            r.loader = void 0,
                            delete this.loaders[r.type],
                            this.hls.trigger(u.default.KEY_LOADED, {
                                frag: r
                            })) : d.logger.error("after key load, decryptdata unset")
                        }
                        ,
                        n.loaderror = function(e, t) {
                            var a = t.frag
                              , r = a.loader;
                            r && r.abort(),
                            delete this.loaders[a.type],
                            this.hls.trigger(u.default.ERROR, {
                                type: s.ErrorTypes.NETWORK_ERROR,
                                details: s.ErrorDetails.KEY_LOAD_ERROR,
                                fatal: !1,
                                frag: a,
                                response: e
                            })
                        }
                        ,
                        n.loadtimeout = function(e, t) {
                            var a = t.frag
                              , r = a.loader;
                            r && r.abort(),
                            delete this.loaders[a.type],
                            this.hls.trigger(u.default.ERROR, {
                                type: s.ErrorTypes.NETWORK_ERROR,
                                details: s.ErrorDetails.KEY_LOAD_TIMEOUT,
                                fatal: !1,
                                frag: a
                            })
                        }
                        ,
                        r
                    }(f)
                      , U = "NOT_LOADED"
                      , F = "APPENDING"
                      , B = "PARTIAL"
                      , j = "OK"
                      , G = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.BUFFER_APPENDED, u.default.FRAG_BUFFERED, u.default.FRAG_LOADED) || this).bufferPadding = .2,
                            a.fragments = Object.create(null),
                            a.timeRanges = Object.create(null),
                            a.config = t.config,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.destroy = function() {
                            this.fragments = Object.create(null),
                            this.timeRanges = Object.create(null),
                            this.config = null,
                            f.prototype.destroy.call(this),
                            e.prototype.destroy.call(this)
                        }
                        ,
                        n.getBufferedFrag = function(e, t) {
                            var a = this.fragments
                              , r = Object.keys(a).filter((function(r) {
                                var n = a[r];
                                if (n.body.type !== t)
                                    return !1;
                                if (!n.buffered)
                                    return !1;
                                var i = n.body;
                                return i.startPTS <= e && e <= i.endPTS
                            }
                            ));
                            if (0 === r.length)
                                return null;
                            var n = r.pop();
                            return a[n].body
                        }
                        ,
                        n.detectEvictedFragments = function(e, t) {
                            var a = this;
                            Object.keys(this.fragments).forEach((function(r) {
                                var n = a.fragments[r];
                                if (n && n.buffered) {
                                    var i = n.range[e];
                                    if (i)
                                        for (var o = i.time, s = 0; s < o.length; s++) {
                                            var l = o[s];
                                            if (!a.isTimeBuffered(l.startPTS, l.endPTS, t)) {
                                                a.removeFragment(n.body);
                                                break
                                            }
                                        }
                                }
                            }
                            ))
                        }
                        ,
                        n.detectPartialFragments = function(e) {
                            var t = this
                              , a = this.getFragmentKey(e)
                              , r = this.fragments[a];
                            r && (r.buffered = !0,
                            Object.keys(this.timeRanges).forEach((function(a) {
                                if (e.hasElementaryStream(a)) {
                                    var n = t.timeRanges[a];
                                    r.range[a] = t.getBufferedTimes(e.startPTS, e.endPTS, n)
                                }
                            }
                            )))
                        }
                        ,
                        n.getBufferedTimes = function(e, t, a) {
                            for (var r, n, i = [], o = !1, s = 0; s < a.length; s++) {
                                if (r = a.start(s) - this.bufferPadding,
                                n = a.end(s) + this.bufferPadding,
                                e >= r && t <= n) {
                                    i.push({
                                        startPTS: Math.max(e, a.start(s)),
                                        endPTS: Math.min(t, a.end(s))
                                    });
                                    break
                                }
                                if (e < n && t > r)
                                    i.push({
                                        startPTS: Math.max(e, a.start(s)),
                                        endPTS: Math.min(t, a.end(s))
                                    }),
                                    o = !0;
                                else if (t <= r)
                                    break
                            }
                            return {
                                time: i,
                                partial: o
                            }
                        }
                        ,
                        n.getFragmentKey = function(e) {
                            return e.type + "_" + e.level + "_" + e.urlId + "_" + e.sn
                        }
                        ,
                        n.getPartialFragment = function(e) {
                            var t, a, r, n = this, i = null, o = 0;
                            return Object.keys(this.fragments).forEach((function(s) {
                                var l = n.fragments[s];
                                n.isPartial(l) && (a = l.body.startPTS - n.bufferPadding,
                                r = l.body.endPTS + n.bufferPadding,
                                e >= a && e <= r && (t = Math.min(e - a, r - e),
                                o <= t && (i = l.body,
                                o = t)))
                            }
                            )),
                            i
                        }
                        ,
                        n.getState = function(e) {
                            var t = this.getFragmentKey(e)
                              , a = this.fragments[t]
                              , r = U;
                            return void 0 !== a && (r = a.buffered ? !0 === this.isPartial(a) ? B : j : F),
                            r
                        }
                        ,
                        n.isPartial = function(e) {
                            return !0 === e.buffered && (void 0 !== e.range.video && !0 === e.range.video.partial || void 0 !== e.range.audio && !0 === e.range.audio.partial)
                        }
                        ,
                        n.isTimeBuffered = function(e, t, a) {
                            for (var r, n, i = 0; i < a.length; i++) {
                                if (r = a.start(i) - this.bufferPadding,
                                n = a.end(i) + this.bufferPadding,
                                e >= r && t <= n)
                                    return !0;
                                if (t <= r)
                                    return !1
                            }
                            return !1
                        }
                        ,
                        n.onFragLoaded = function(e) {
                            var t = e.frag;
                            Object(l.isFiniteNumber)(t.sn) && !t.bitrateTest && (this.fragments[this.getFragmentKey(t)] = {
                                body: t,
                                range: Object.create(null),
                                buffered: !1
                            })
                        }
                        ,
                        n.onBufferAppended = function(e) {
                            var t = this;
                            this.timeRanges = e.timeRanges,
                            Object.keys(this.timeRanges).forEach((function(e) {
                                var a = t.timeRanges[e];
                                t.detectEvictedFragments(e, a)
                            }
                            ))
                        }
                        ,
                        n.onFragBuffered = function(e) {
                            this.detectPartialFragments(e.frag)
                        }
                        ,
                        n.hasFragment = function(e) {
                            var t = this.getFragmentKey(e);
                            return void 0 !== this.fragments[t]
                        }
                        ,
                        n.removeFragment = function(e) {
                            var t = this.getFragmentKey(e);
                            delete this.fragments[t]
                        }
                        ,
                        n.removeAllFragments = function() {
                            this.fragments = Object.create(null)
                        }
                        ,
                        r
                    }(f)
                      , V = {
                        search: function(e, t) {
                            for (var a = 0, r = e.length - 1, n = null, i = null; a <= r; ) {
                                var o = t(i = e[n = (a + r) / 2 | 0]);
                                if (o > 0)
                                    a = n + 1;
                                else {
                                    if (!(o < 0))
                                        return i;
                                    r = n - 1
                                }
                            }
                            return null
                        }
                    }
                      , K = function() {
                        function e() {}
                        return e.isBuffered = function(e, t) {
                            try {
                                if (e)
                                    for (var a = e.buffered, r = 0; r < a.length; r++)
                                        if (t >= a.start(r) && t <= a.end(r))
                                            return !0
                            } catch (e) {}
                            return !1
                        }
                        ,
                        e.bufferInfo = function(e, t, a) {
                            try {
                                if (e) {
                                    var r, n = e.buffered, i = [];
                                    for (r = 0; r < n.length; r++)
                                        i.push({
                                            start: n.start(r),
                                            end: n.end(r)
                                        });
                                    return this.bufferedInfo(i, t, a)
                                }
                            } catch (e) {}
                            return {
                                len: 0,
                                start: t,
                                end: t,
                                nextStart: void 0
                            }
                        }
                        ,
                        e.bufferedInfo = function(e, t, a) {
                            e.sort((function(e, t) {
                                var a = e.start - t.start;
                                return a || t.end - e.end
                            }
                            ));
                            var r = [];
                            if (a)
                                for (var n = 0; n < e.length; n++) {
                                    var i = r.length;
                                    if (i) {
                                        var o = r[i - 1].end;
                                        e[n].start - o < a ? e[n].end > o && (r[i - 1].end = e[n].end) : r.push(e[n])
                                    } else
                                        r.push(e[n])
                                }
                            else
                                r = e;
                            for (var s, l = 0, u = t, d = t, c = 0; c < r.length; c++) {
                                var f = r[c].start
                                  , h = r[c].end;
                                if (t + a >= f && t < h)
                                    u = f,
                                    l = (d = h) - t;
                                else if (t + a < f) {
                                    s = f;
                                    break
                                }
                            }
                            return {
                                len: l,
                                start: u,
                                end: d,
                                nextStart: s
                            }
                        }
                        ,
                        e
                    }()
                      , $ = a("./node_modules/eventemitter3/index.js")
                      , q = a("./node_modules/webworkify-webpack/index.js")
                      , H = a("./src/demux/demuxer-inline.js");
                    function W() {
                        return window.MediaSource || window.WebKitMediaSource
                    }
                    var Y = a("./src/utils/get-self-scope.js")
                      , z = function(e) {
                        var t, a;
                        function r() {
                            return e.apply(this, arguments) || this
                        }
                        return a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a,
                        r.prototype.trigger = function(e) {
                            for (var t = arguments.length, a = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)
                                a[r - 1] = arguments[r];
                            this.emit.apply(this, [e, e].concat(a))
                        }
                        ,
                        r
                    }($.EventEmitter)
                      , X = Object(Y.getSelfScope)()
                      , Q = W() || {
                        isTypeSupported: function() {
                            return !1
                        }
                    }
                      , J = function() {
                        function e(e, t) {
                            var a = this;
                            this.hls = e,
                            this.id = t;
                            var r = this.observer = new z
                              , n = e.config
                              , i = function(t, r) {
                                (r = r || {}).frag = a.frag,
                                r.id = a.id,
                                e.trigger(t, r)
                            };
                            r.on(u.default.FRAG_DECRYPTED, i),
                            r.on(u.default.FRAG_PARSING_INIT_SEGMENT, i),
                            r.on(u.default.FRAG_PARSING_DATA, i),
                            r.on(u.default.FRAG_PARSED, i),
                            r.on(u.default.ERROR, i),
                            r.on(u.default.FRAG_PARSING_METADATA, i),
                            r.on(u.default.FRAG_PARSING_USERDATA, i),
                            r.on(u.default.INIT_PTS_FOUND, i);
                            var o = {
                                mp4: Q.isTypeSupported("video/mp4"),
                                mpeg: Q.isTypeSupported("audio/mpeg"),
                                mp3: Q.isTypeSupported('audio/mp4; codecs="mp3"')
                            }
                              , l = navigator.vendor;
                            if (n.enableWorker && "undefined" != typeof Worker) {
                                var c;
                                d.logger.log("demuxing in webworker");
                                try {
                                    c = this.w = q(/*! ../demux/demuxer-worker.js */
                                    "./src/demux/demuxer-worker.js"),
                                    this.onwmsg = this.onWorkerMessage.bind(this),
                                    c.addEventListener("message", this.onwmsg),
                                    c.onerror = function(t) {
                                        e.trigger(u.default.ERROR, {
                                            type: s.ErrorTypes.OTHER_ERROR,
                                            details: s.ErrorDetails.INTERNAL_EXCEPTION,
                                            fatal: !0,
                                            event: "demuxerWorker",
                                            err: {
                                                message: t.message + " (" + t.filename + ":" + t.lineno + ")"
                                            }
                                        })
                                    }
                                    ,
                                    c.postMessage({
                                        cmd: "init",
                                        typeSupported: o,
                                        vendor: l,
                                        id: t,
                                        config: JSON.stringify(n)
                                    })
                                } catch (e) {
                                    d.logger.warn("Error in worker:", e),
                                    d.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),
                                    c && X.URL.revokeObjectURL(c.objectURL),
                                    this.demuxer = new H.default(r,o,n,l),
                                    this.w = void 0
                                }
                            } else
                                this.demuxer = new H.default(r,o,n,l)
                        }
                        var t = e.prototype;
                        return t.destroy = function() {
                            var e = this.w;
                            if (e)
                                e.removeEventListener("message", this.onwmsg),
                                e.terminate(),
                                this.w = null;
                            else {
                                var t = this.demuxer;
                                t && (t.destroy(),
                                this.demuxer = null)
                            }
                            var a = this.observer;
                            a && (a.removeAllListeners(),
                            this.observer = null)
                        }
                        ,
                        t.push = function(e, t, a, r, n, i, o, s) {
                            var u = this.w
                              , c = Object(l.isFiniteNumber)(n.startPTS) ? n.startPTS : n.start
                              , f = n.decryptdata
                              , h = this.frag
                              , p = !(h && n.cc === h.cc)
                              , g = !(h && n.level === h.level)
                              , m = h && n.sn === h.sn + 1
                              , y = !g && m;
                            if (p && d.logger.log(this.id + ":discontinuity detected"),
                            g && d.logger.log(this.id + ":switch detected"),
                            this.frag = n,
                            u)
                                u.postMessage({
                                    cmd: "demux",
                                    data: e,
                                    decryptdata: f,
                                    initSegment: t,
                                    audioCodec: a,
                                    videoCodec: r,
                                    timeOffset: c,
                                    discontinuity: p,
                                    trackSwitch: g,
                                    contiguous: y,
                                    duration: i,
                                    accurateTimeOffset: o,
                                    defaultInitPTS: s
                                }, e instanceof ArrayBuffer ? [e] : []);
                            else {
                                var _ = this.demuxer;
                                _ && _.push(e, f, t, a, r, c, p, g, y, i, o, s)
                            }
                        }
                        ,
                        t.onWorkerMessage = function(e) {
                            var t = e.data
                              , a = this.hls;
                            switch (t.event) {
                            case "init":
                                X.URL.revokeObjectURL(this.w.objectURL);
                                break;
                            case u.default.FRAG_PARSING_DATA:
                                t.data.data1 = new Uint8Array(t.data1),
                                t.data2 && (t.data.data2 = new Uint8Array(t.data2));
                            default:
                                t.data = t.data || {},
                                t.data.frag = this.frag,
                                t.data.id = this.id,
                                a.trigger(t.event, t.data)
                                if (t.event === 'hlsFragDecrypted') {
                                    injectDecryptedData(this.frag.relurl, t.data.binary, t.data.binary.byteLength);
                                }
                            }
                        }
                        ,
                        e
                    }();
                    function Z(e, t, a) {
                        switch (t) {
                        case "audio":
                            e.audioGroupIds || (e.audioGroupIds = []),
                            e.audioGroupIds.push(a);
                            break;
                        case "text":
                            e.textGroupIds || (e.textGroupIds = []),
                            e.textGroupIds.push(a)
                        }
                    }
                    function ee(e, t, a) {
                        var r = e[t]
                          , n = e[a]
                          , i = n.startPTS;
                        if (Object(l.isFiniteNumber)(i))
                            a > t ? (r.duration = i - r.start,
                            r.duration < 0 && d.logger.warn("negative duration computed for frag " + r.sn + ",level " + r.level + ", there should be some duration drift between playlist and fragment!")) : (n.duration = r.start - i,
                            n.duration < 0 && d.logger.warn("negative duration computed for frag " + n.sn + ",level " + n.level + ", there should be some duration drift between playlist and fragment!"));
                        else if (a > t) {
                            var o = r.cc === n.cc;
                            n.start = r.start + (o && r.minEndPTS ? r.minEndPTS - r.start : r.duration)
                        } else
                            n.start = Math.max(r.start - n.duration, 0)
                    }
                    function te(e, t, a, r, n, i) {
                        var o = a
                          , s = r;
                        if (Object(l.isFiniteNumber)(t.startPTS)) {
                            var u = Math.abs(t.startPTS - a);
                            Object(l.isFiniteNumber)(t.deltaPTS) ? t.deltaPTS = Math.max(u, t.deltaPTS) : t.deltaPTS = u,
                            o = Math.max(a, t.startPTS),
                            a = Math.min(a, t.startPTS),
                            s = Math.min(r, t.endPTS),
                            r = Math.max(r, t.endPTS),
                            n = Math.min(n, t.startDTS),
                            i = Math.max(i, t.endDTS)
                        }
                        var d = a - t.start;
                        t.start = t.startPTS = a,
                        t.maxStartPTS = o,
                        t.endPTS = r,
                        t.minEndPTS = s,
                        t.startDTS = n,
                        t.endDTS = i,
                        t.duration = r - a;
                        var c, f, h, p = t.sn;
                        if (!e || p < e.startSN || p > e.endSN)
                            return 0;
                        for (c = p - e.startSN,
                        (f = e.fragments)[c] = t,
                        h = c; h > 0; h--)
                            ee(f, h, h - 1);
                        for (h = c; h < f.length - 1; h++)
                            ee(f, h, h + 1);
                        return e.PTSKnown = !0,
                        d
                    }
                    function ae(e, t) {
                        t.initSegment && e.initSegment && (t.initSegment = e.initSegment);
                        var a, r = 0;
                        if (re(e, t, (function(e, n) {
                            r = e.cc - n.cc,
                            Object(l.isFiniteNumber)(e.startPTS) && (n.start = n.startPTS = e.startPTS,
                            n.endPTS = e.endPTS,
                            n.duration = e.duration,
                            n.backtracked = e.backtracked,
                            n.dropped = e.dropped,
                            a = n),
                            t.PTSKnown = !0
                        }
                        )),
                        t.PTSKnown) {
                            if (r) {
                                d.logger.log("discontinuity sliding from playlist, take drift into account");
                                for (var n = t.fragments, i = 0; i < n.length; i++)
                                    n[i].cc += r
                            }
                            a ? te(t, a, a.startPTS, a.endPTS, a.startDTS, a.endDTS) : function(e, t) {
                                var a = t.startSN - e.startSN
                                  , r = e.fragments
                                  , n = t.fragments;
                                if (!(a < 0 || a > r.length))
                                    for (var i = 0; i < n.length; i++)
                                        n[i].start += r[a].start
                            }(e, t),
                            t.PTSKnown = e.PTSKnown
                        }
                    }
                    function re(e, t, a) {
                        if (e && t)
                            for (var r = Math.max(e.startSN, t.startSN) - t.startSN, n = Math.min(e.endSN, t.endSN) - t.startSN, i = t.startSN - e.startSN, o = r; o <= n; o++) {
                                var s = e.fragments[i + o]
                                  , l = t.fragments[o];
                                if (!s || !l)
                                    break;
                                a(s, l, o)
                            }
                    }
                    function ne(e, t, a) {
                        var r = 1e3 * (t.averagetargetduration ? t.averagetargetduration : t.targetduration)
                          , n = r / 2;
                        return e && t.endSN === e.endSN && (r = n),
                        a && (r = Math.max(n, r - (window.performance.now() - a))),
                        Math.round(r)
                    }
                    var ie = {
                        toString: function(e) {
                            for (var t = "", a = e.length, r = 0; r < a; r++)
                                t += "[" + e.start(r).toFixed(3) + "," + e.end(r).toFixed(3) + "]";
                            return t
                        }
                    };
                    function oe(e, t) {
                        t.fragments.forEach((function(t) {
                            if (t) {
                                var a = t.start + e;
                                t.start = t.startPTS = a,
                                t.endPTS = a + t.duration
                            }
                        }
                        )),
                        t.PTSKnown = !0
                    }
                    function se(e, t, a) {
                        !function(e, t, a) {
                            if (function(e, t, a) {
                                var r = !1;
                                return t && t.details && a && (a.endCC > a.startCC || e && e.cc < a.startCC) && (r = !0),
                                r
                            }(e, a, t)) {
                                var r = function(e, t) {
                                    var a = e.fragments
                                      , r = t.fragments;
                                    if (r.length && a.length) {
                                        var n = function(e, t) {
                                            for (var a = null, r = 0; r < e.length; r += 1) {
                                                var n = e[r];
                                                if (n && n.cc === t) {
                                                    a = n;
                                                    break
                                                }
                                            }
                                            return a
                                        }(a, r[0].cc);
                                        if (n && (!n || n.startPTS))
                                            return n;
                                        d.logger.log("No frag in previous level to align on")
                                    } else
                                        d.logger.log("No fragments to align")
                                }(a.details, t);
                                r && (d.logger.log("Adjusting PTS using last level due to CC increase within current level"),
                                oe(r.start, t))
                            }
                        }(e, a, t),
                        !a.PTSKnown && t && function(e, t) {
                            if (t && t.fragments.length) {
                                if (!e.hasProgramDateTime || !t.hasProgramDateTime)
                                    return;
                                var a = t.fragments[0].programDateTime
                                  , r = (e.fragments[0].programDateTime - a) / 1e3 + t.fragments[0].start;
                                Object(l.isFiniteNumber)(r) && (d.logger.log("adjusting PTS using programDateTime delta, sliding:" + r.toFixed(3)),
                                oe(r, e))
                            }
                        }(a, t.details)
                    }
                    function le(e, t, a) {
                        if (null === t || !Array.isArray(e) || !e.length || !Object(l.isFiniteNumber)(t))
                            return null;
                        if (t < (e[0].programDateTime || 0))
                            return null;
                        if (t >= (e[e.length - 1].endProgramDateTime || 0))
                            return null;
                        a = a || 0;
                        for (var r = 0; r < e.length; ++r) {
                            var n = e[r];
                            if (ce(t, a, n))
                                return n
                        }
                        return null
                    }
                    function ue(e, t, a, r) {
                        void 0 === a && (a = 0),
                        void 0 === r && (r = 0);
                        var n = null;
                        if (e ? n = t[e.sn - t[0].sn + 1] : 0 === a && 0 === t[0].start && (n = t[0]),
                        n && 0 === de(a, r, n))
                            return n;
                        var i = V.search(t, de.bind(null, a, r));
                        return i || n
                    }
                    function de(e, t, a) {
                        void 0 === e && (e = 0),
                        void 0 === t && (t = 0);
                        var r = Math.min(t, a.duration + (a.deltaPTS ? a.deltaPTS : 0));
                        return a.start + a.duration - r <= e ? 1 : a.start - r > e && a.start ? -1 : 0
                    }
                    function ce(e, t, a) {
                        var r = 1e3 * Math.min(t, a.duration + (a.deltaPTS ? a.deltaPTS : 0));
                        return (a.endProgramDateTime || 0) - r > e
                    }
                    var fe = function() {
                        function e(e, t, a, r) {
                            this.config = e,
                            this.media = t,
                            this.fragmentTracker = a,
                            this.hls = r,
                            this.nudgeRetry = 0,
                            this.stallReported = !1,
                            this.stalled = null,
                            this.moved = !1,
                            this.seeking = !1
                        }
                        var t = e.prototype;
                        return t.poll = function(e) {
                            var t = this.config
                              , a = this.media
                              , r = this.stalled
                              , n = a.currentTime
                              , i = a.seeking
                              , o = this.seeking && !i
                              , s = !this.seeking && i;
                            if (this.seeking = i,
                            n === e) {
                                if ((s || o) && (this.stalled = null),
                                !a.paused && !a.ended && 0 !== a.playbackRate && a.buffered.length) {
                                    var l = K.bufferInfo(a, n, 0)
                                      , u = l.len > 0
                                      , c = l.nextStart || 0;
                                    if (u || c) {
                                        if (i) {
                                            var f = l.len > 2
                                              , h = !c || c - n > 2 && !this.fragmentTracker.getPartialFragment(n);
                                            if (f || h)
                                                return;
                                            this.moved = !1
                                        }
                                        if (!this.moved && this.stalled) {
                                            var p = Math.max(c, l.start || 0) - n;
                                            if (p > 0 && p <= 2)
                                                return void this._trySkipBufferHole(null)
                                        }
                                        var g = self.performance.now();
                                        if (null !== r) {
                                            var m = g - r;
                                            !i && m >= 250 && this._reportStall(l.len);
                                            var y = K.bufferInfo(a, n, t.maxBufferHole);
                                            this._tryFixBufferStall(y, m)
                                        } else
                                            this.stalled = g
                                    }
                                }
                            } else if (this.moved = !0,
                            null !== r) {
                                if (this.stallReported) {
                                    var _ = self.performance.now() - r;
                                    d.logger.warn("playback not stuck anymore @" + n + ", after " + Math.round(_) + "ms"),
                                    this.stallReported = !1
                                }
                                this.stalled = null,
                                this.nudgeRetry = 0
                            }
                        }
                        ,
                        t._tryFixBufferStall = function(e, t) {
                            var a = this.config
                              , r = this.fragmentTracker
                              , n = this.media.currentTime
                              , i = r.getPartialFragment(n);
                            i && this._trySkipBufferHole(i) || e.len > a.maxBufferHole && t > 1e3 * a.highBufferWatchdogPeriod && (d.logger.warn("Trying to nudge playhead over buffer-hole"),
                            this.stalled = null,
                            this._tryNudgeBuffer())
                        }
                        ,
                        t._reportStall = function(e) {
                            var t = this.hls
                              , a = this.media;
                            this.stallReported || (this.stallReported = !0,
                            d.logger.warn("Playback stalling at @" + a.currentTime + " due to low buffer (buffer=" + e + ")"),
                            t.trigger(u.default.ERROR, {
                                type: s.ErrorTypes.MEDIA_ERROR,
                                details: s.ErrorDetails.BUFFER_STALLED_ERROR,
                                fatal: !1,
                                buffer: e
                            }))
                        }
                        ,
                        t._trySkipBufferHole = function(e) {
                            for (var t = this.config, a = this.hls, r = this.media, n = r.currentTime, i = 0, o = 0; o < r.buffered.length; o++) {
                                var l = r.buffered.start(o);
                                if (n + t.maxBufferHole >= i && n < l) {
                                    var c = Math.max(l + .05, r.currentTime + .1);
                                    return d.logger.warn("skipping hole, adjusting currentTime from " + n + " to " + c),
                                    this.moved = !0,
                                    this.stalled = null,
                                    r.currentTime = c,
                                    e && a.trigger(u.default.ERROR, {
                                        type: s.ErrorTypes.MEDIA_ERROR,
                                        details: s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,
                                        fatal: !1,
                                        reason: "fragment loaded with buffer holes, seeking from " + n + " to " + c,
                                        frag: e
                                    }),
                                    c
                                }
                                i = r.buffered.end(o)
                            }
                            return 0
                        }
                        ,
                        t._tryNudgeBuffer = function() {
                            var e = this.config
                              , t = this.hls
                              , a = this.media
                              , r = a.currentTime
                              , n = (this.nudgeRetry || 0) + 1;
                            if (this.nudgeRetry = n,
                            n < e.nudgeMaxRetry) {
                                var i = r + n * e.nudgeOffset;
                                d.logger.warn("Nudging 'currentTime' from " + r + " to " + i),
                                a.currentTime = i,
                                t.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.MEDIA_ERROR,
                                    details: s.ErrorDetails.BUFFER_NUDGE_ON_STALL,
                                    fatal: !1
                                })
                            } else
                                d.logger.error("Playhead still not moving while enough data buffered @" + r + " after " + e.nudgeMaxRetry + " nudges"),
                                t.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.MEDIA_ERROR,
                                    details: s.ErrorDetails.BUFFER_STALLED_ERROR,
                                    fatal: !0
                                })
                        }
                        ,
                        e
                    }();
                    function he(e) {
                        if (void 0 === e)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }
                    var pe = function(e) {
                        var t, a;
                        function r(t) {
                            for (var a, r = arguments.length, n = new Array(r > 1 ? r - 1 : 0), i = 1; i < r; i++)
                                n[i - 1] = arguments[i];
                            return (a = e.call.apply(e, [this, t].concat(n)) || this)._boundTick = void 0,
                            a._tickTimer = null,
                            a._tickInterval = null,
                            a._tickCallCount = 0,
                            a._boundTick = a.tick.bind(he(a)),
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.onHandlerDestroying = function() {
                            this.clearNextTick(),
                            this.clearInterval()
                        }
                        ,
                        n.hasInterval = function() {
                            return !!this._tickInterval
                        }
                        ,
                        n.hasNextTick = function() {
                            return !!this._tickTimer
                        }
                        ,
                        n.setInterval = function(e) {
                            return !this._tickInterval && (this._tickInterval = self.setInterval(this._boundTick, e),
                            !0)
                        }
                        ,
                        n.clearInterval = function() {
                            return !!this._tickInterval && (self.clearInterval(this._tickInterval),
                            this._tickInterval = null,
                            !0)
                        }
                        ,
                        n.clearNextTick = function() {
                            return !!this._tickTimer && (self.clearTimeout(this._tickTimer),
                            this._tickTimer = null,
                            !0)
                        }
                        ,
                        n.tick = function() {
                            this._tickCallCount++,
                            1 === this._tickCallCount && (this.doTick(),
                            this._tickCallCount > 1 && (this.clearNextTick(),
                            this._tickTimer = self.setTimeout(this._boundTick, 0)),
                            this._tickCallCount = 0)
                        }
                        ,
                        n.doTick = function() {}
                        ,
                        r
                    }(f)
                      , ge = "STOPPED"
                      , me = "STARTING"
                      , ye = "IDLE"
                      , _e = "PAUSED"
                      , ve = "KEY_LOADING"
                      , be = "FRAG_LOADING"
                      , Ee = "FRAG_LOADING_WAITING_RETRY"
                      , ke = "WAITING_TRACK"
                      , Te = "PARSING"
                      , Se = "PARSED"
                      , Ae = "BUFFER_FLUSHING"
                      , Ce = "ENDED"
                      , Ie = "ERROR"
                      , Pe = "WAITING_INIT_PTS"
                      , we = "WAITING_LEVEL"
                      , Me = function(e) {
                        var t, a;
                        function r() {
                            return e.apply(this, arguments) || this
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.doTick = function() {}
                        ,
                        n.startLoad = function() {}
                        ,
                        n.stopLoad = function() {
                            var e = this.fragCurrent;
                            e && (e.loader && e.loader.abort(),
                            this.fragmentTracker.removeFragment(e)),
                            this.demuxer && (this.demuxer.destroy(),
                            this.demuxer = null),
                            this.fragCurrent = null,
                            this.fragPrevious = null,
                            this.clearInterval(),
                            this.clearNextTick(),
                            this.state = ge
                        }
                        ,
                        n._streamEnded = function(e, t) {
                            var a = this.fragCurrent
                              , r = this.fragmentTracker;
                            if (!t.live && a && !a.backtracked && a.sn === t.endSN && !e.nextStart) {
                                var n = r.getState(a);
                                return n === B || n === j
                            }
                            return !1
                        }
                        ,
                        n.onMediaSeeking = function() {
                            var e = this.config
                              , t = this.media
                              , a = this.mediaBuffer
                              , r = this.state
                              , n = t ? t.currentTime : null
                              , i = K.bufferInfo(a || t, n, this.config.maxBufferHole);
                            if (d.logger.log("media seeking to " + (Object(l.isFiniteNumber)(n) ? n.toFixed(3) : n)),
                            r === be) {
                                var o = this.fragCurrent;
                                if (0 === i.len && o) {
                                    var s = e.maxFragLookUpTolerance
                                      , u = o.start - s
                                      , c = o.start + o.duration + s;
                                    n < u || n > c ? (o.loader && (d.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),
                                    o.loader.abort()),
                                    this.fragCurrent = null,
                                    this.fragPrevious = null,
                                    this.state = ye) : d.logger.log("seeking outside of buffer but within currently loaded fragment range")
                                }
                            } else
                                r === Ce && (0 === i.len && (this.fragPrevious = null,
                                this.fragCurrent = null),
                                this.state = ye);
                            t && (this.lastCurrentTime = n),
                            this.loadedmetadata || (this.nextLoadPosition = this.startPosition = n),
                            this.tick()
                        }
                        ,
                        n.onMediaEnded = function() {
                            this.startPosition = this.lastCurrentTime = 0
                        }
                        ,
                        n.onHandlerDestroying = function() {
                            this.stopLoad(),
                            e.prototype.onHandlerDestroying.call(this)
                        }
                        ,
                        n.onHandlerDestroyed = function() {
                            this.state = ge,
                            this.fragmentTracker = null
                        }
                        ,
                        n.computeLivePosition = function(e, t) {
                            var a = void 0 !== this.config.liveSyncDuration ? this.config.liveSyncDuration : this.config.liveSyncDurationCount * t.targetduration;
                            return e + Math.max(0, t.totalduration - a)
                        }
                        ,
                        r
                    }(pe);
                    function Re(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var xe, De = function(e) {
                        var t, a;
                        function r(t, a) {
                            var r;
                            return (r = e.call(this, t, u.default.MEDIA_ATTACHED, u.default.MEDIA_DETACHING, u.default.MANIFEST_LOADING, u.default.MANIFEST_PARSED, u.default.LEVEL_LOADED, u.default.LEVELS_UPDATED, u.default.KEY_LOADED, u.default.FRAG_LOADED, u.default.FRAG_LOAD_EMERGENCY_ABORTED, u.default.FRAG_PARSING_INIT_SEGMENT, u.default.FRAG_PARSING_DATA, u.default.FRAG_PARSED, u.default.ERROR, u.default.AUDIO_TRACK_SWITCHING, u.default.AUDIO_TRACK_SWITCHED, u.default.BUFFER_CREATED, u.default.BUFFER_APPENDED, u.default.BUFFER_FLUSHED) || this).fragmentTracker = a,
                            r.config = t.config,
                            r.audioCodecSwap = !1,
                            r._state = ge,
                            r.stallReported = !1,
                            r.gapController = null,
                            r.altAudio = !1,
                            r.audioOnly = !1,
                            r.bitrateTest = !1,
                            r
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n, o, c, f = r.prototype;
                        return f.startLoad = function(e) {
                            if (this.levels) {
                                var t = this.lastCurrentTime
                                  , a = this.hls;
                                if (this.stopLoad(),
                                this.setInterval(100),
                                this.level = -1,
                                this.fragLoadError = 0,
                                !this.startFragRequested) {
                                    var r = a.startLevel;
                                    -1 === r && (a.config.testBandwidth ? (r = 0,
                                    this.bitrateTest = !0) : r = a.nextAutoLevel),
                                    this.level = a.nextLoadLevel = r,
                                    this.loadedmetadata = !1
                                }
                                t > 0 && -1 === e && (d.logger.log("override startPosition with lastCurrentTime @" + t.toFixed(3)),
                                e = t),
                                this.state = ye,
                                this.nextLoadPosition = this.startPosition = this.lastCurrentTime = e,
                                this.tick()
                            } else
                                this.forceStartLoad = !0,
                                this.state = ge
                        }
                        ,
                        f.stopLoad = function() {
                            this.forceStartLoad = !1,
                            e.prototype.stopLoad.call(this)
                        }
                        ,
                        f.doTick = function() {
                            switch (this.state) {
                            case Ae:
                                this.fragLoadError = 0;
                                break;
                            case ye:
                                this._doTickIdle();
                                break;
                            case we:
                                var e = this.levels[this.level];
                                e && e.details && (this.state = ye);
                                break;
                            case Ee:
                                var t = window.performance.now()
                                  , a = this.retryDate;
                                (!a || t >= a || this.media && this.media.seeking) && (d.logger.log("mediaController: retryDate reached, switch back to IDLE state"),
                                this.state = ye)
                            }
                            this._checkBuffer(),
                            this._checkFragmentChanged()
                        }
                        ,
                        f._doTickIdle = function() {
                            var e = this.hls
                              , t = e.config
                              , a = this.media;
                            if (void 0 !== this.levelLastLoaded && (a || !this.startFragRequested && t.startFragPrefetch))
                                if (this.altAudio && this.audioOnly)
                                    this.demuxer.frag = null;
                                else {
                                    var r;
                                    r = this.loadedmetadata ? a.currentTime : this.nextLoadPosition;
                                    var n = e.nextLoadLevel
                                      , i = this.levels[n];
                                    if (i) {
                                        var o, s = i.bitrate;
                                        o = s ? Math.max(8 * t.maxBufferSize / s, t.maxBufferLength) : t.maxBufferLength,
                                        o = Math.min(o, t.maxMaxBufferLength);
                                        var l = r < t.maxBufferHole ? Math.max(2, t.maxBufferHole) : t.maxBufferHole
                                          , c = K.bufferInfo(this.mediaBuffer ? this.mediaBuffer : a, r, l)
                                          , f = c.len;
                                        if (!(f >= o)) {
                                            d.logger.trace("buffer length of " + f.toFixed(3) + " is below max of " + o.toFixed(3) + ". checking for more payload ..."),
                                            this.level = e.nextLoadLevel = n;
                                            var h = i.details;
                                            if (!h || h.live && this.levelLastLoaded !== n)
                                                this.state = we;
                                            else {
                                                if (this._streamEnded(c, h)) {
                                                    var p = {};
                                                    return this.altAudio && (p.type = "video"),
                                                    this.hls.trigger(u.default.BUFFER_EOS, p),
                                                    void (this.state = Ce)
                                                }
                                                this._fetchPayloadOrEos(r, c, h)
                                            }
                                        }
                                    }
                                }
                        }
                        ,
                        f._fetchPayloadOrEos = function(e, t, a) {
                            var r = this.fragPrevious
                              , n = (this.level,
                            a.fragments)
                              , i = n.length;
                            if (0 !== i) {
                                var o, s = n[0].start, l = n[i - 1].start + n[i - 1].duration, u = t.end;
                                if (a.initSegment && !a.initSegment.data)
                                    o = a.initSegment;
                                else if (a.live) {
                                    var c = this.config.initialLiveManifestSize;
                                    if (i < c)
                                        return void d.logger.warn("Can not start playback of a level, reason: not enough fragments " + i + " < " + c);
                                    if (null === (o = this._ensureFragmentAtLivePoint(a, u, s, l, r, n)))
                                        return
                                } else
                                    u < s && (o = n[0]);
                                o || (o = this._findFragment(s, r, i, n, u, l, a)),
                                o && (o.encrypted ? this._loadKey(o, a) : this._loadFragment(o, a, e, u))
                            }
                        }
                        ,
                        f._ensureFragmentAtLivePoint = function(e, t, a, r, n, i) {
                            var o, s = this.hls.config, u = this.media, c = 1 / 0;
                            if (void 0 !== s.liveMaxLatencyDuration ? c = s.liveMaxLatencyDuration : Object(l.isFiniteNumber)(s.liveMaxLatencyDurationCount) && (c = s.liveMaxLatencyDurationCount * e.targetduration),
                            t < Math.max(a - s.maxFragLookUpTolerance, r - c)) {
                                var f = this.liveSyncPosition = this.computeLivePosition(a, e);
                                t = f,
                                u && !u.paused && u.readyState && u.duration > f && f > u.currentTime && (d.logger.log("buffer end: " + t.toFixed(3) + " is located too far from the end of live sliding playlist, reset currentTime to : " + f.toFixed(3)),
                                u.currentTime = f),
                                this.nextLoadPosition = f
                            }
                            if (e.PTSKnown && t > r && u && u.readyState)
                                return null;
                            if (this.startFragRequested && !e.PTSKnown && n)
                                if (e.hasProgramDateTime)
                                    d.logger.log("live playlist, switching playlist, load frag with same PDT: " + n.programDateTime),
                                    o = le(i, n.endProgramDateTime, s.maxFragLookUpTolerance);
                                else {
                                    var h = n.sn + 1;
                                    if (h >= e.startSN && h <= e.endSN) {
                                        var p = i[h - e.startSN];
                                        n.cc === p.cc && (o = p,
                                        d.logger.log("live playlist, switching playlist, load frag with next SN: " + o.sn))
                                    }
                                    o || (o = V.search(i, (function(e) {
                                        return n.cc - e.cc
                                    }
                                    ))) && d.logger.log("live playlist, switching playlist, load frag with same CC: " + o.sn)
                                }
                            return o
                        }
                        ,
                        f._findFragment = function(e, t, a, r, n, i, o) {
                            var s, l = this.hls.config;
                            if (s = n < i ? ue(t, r, n, n > i - l.maxFragLookUpTolerance ? 0 : l.maxFragLookUpTolerance) : r[a - 1]) {
                                var u = s.sn - o.startSN
                                  , c = t && s.level === t.level
                                  , f = r[u - 1]
                                  , h = r[u + 1];
                                if (t && s.sn === t.sn)
                                    if (c && !s.backtracked)
                                        if (s.sn < o.endSN) {
                                            var p = t.deltaPTS;
                                            p && p > l.maxBufferHole && t.dropped && u ? (s = f,
                                            d.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")) : (s = h,
                                            this.fragmentTracker.getState(s) !== j && d.logger.log("Re-loading fragment with SN: " + s.sn))
                                        } else
                                            s = null;
                                    else
                                        s.backtracked && (h && h.backtracked ? (d.logger.warn("Already backtracked from fragment " + h.sn + ", will not backtrack to fragment " + s.sn + ". Loading fragment " + h.sn),
                                        s = h) : (d.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),
                                        s.dropped = 0,
                                        f ? (s = f).backtracked = !0 : u && (s = null)))
                            }
                            return s
                        }
                        ,
                        f._loadKey = function(e, t) {
                            d.logger.log("Loading key for " + e.sn + " of [" + t.startSN + "-" + t.endSN + "], level " + this.level),
                            this.state = ve,
                            this.hls.trigger(u.default.KEY_LOADING, {
                                frag: e
                            })
                        }
                        ,
                        f._loadFragment = function(e, t, a, r) {
                            var n = this.fragmentTracker.getState(e);
                            this.fragCurrent = e,
                            "initSegment" !== e.sn && (this.startFragRequested = !0),
                            Object(l.isFiniteNumber)(e.sn) && !e.bitrateTest && (this.nextLoadPosition = e.start + e.duration),
                            e.backtracked || n === U || n === B ? (e.autoLevel = this.hls.autoLevelEnabled,
                            e.bitrateTest = this.bitrateTest,
                            d.logger.log("Loading " + e.sn + " of [" + t.startSN + "-" + t.endSN + "], level " + this.level + ", " + (this.loadedmetadata ? "currentTime" : "nextLoadPosition") + ": " + parseFloat(a.toFixed(3)) + ", bufferEnd: " + parseFloat(r.toFixed(3))),
                            this.hls.trigger(u.default.FRAG_LOADING, {
                                frag: e
                            }),
                            this.demuxer || (this.demuxer = new J(this.hls,"main")),
                            this.state = be) : n === F && this._reduceMaxBufferLength(e.duration) && this.fragmentTracker.removeFragment(e)
                        }
                        ,
                        f.getBufferedFrag = function(e) {
                            return this.fragmentTracker.getBufferedFrag(e, i.MAIN)
                        }
                        ,
                        f.followingBufferedFrag = function(e) {
                            return e ? this.getBufferedFrag(e.endPTS + .5) : null
                        }
                        ,
                        f._checkFragmentChanged = function() {
                            var e, t, a = this.media;
                            if (a && a.readyState && !1 === a.seeking && ((t = a.currentTime) > this.lastCurrentTime && (this.lastCurrentTime = t),
                            K.isBuffered(a, t) ? e = this.getBufferedFrag(t) : K.isBuffered(a, t + .1) && (e = this.getBufferedFrag(t + .1)),
                            e)) {
                                var r = e;
                                if (r !== this.fragPlaying) {
                                    this.hls.trigger(u.default.FRAG_CHANGED, {
                                        frag: r
                                    });
                                    var n = r.level;
                                    this.fragPlaying && this.fragPlaying.level === n || this.hls.trigger(u.default.LEVEL_SWITCHED, {
                                        level: n
                                    }),
                                    this.fragPlaying = r
                                }
                            }
                        }
                        ,
                        f.immediateLevelSwitch = function() {
                            if (d.logger.log("immediateLevelSwitch"),
                            !this.immediateSwitch) {
                                this.immediateSwitch = !0;
                                var e, t = this.media;
                                t ? (e = t.paused) || t.pause() : e = !0,
                                this.previouslyPaused = e
                            }
                            var a = this.fragCurrent;
                            a && a.loader && a.loader.abort(),
                            this.fragCurrent = null,
                            this.flushMainBuffer(0, Number.POSITIVE_INFINITY)
                        }
                        ,
                        f.immediateLevelSwitchEnd = function() {
                            var e = this.media;
                            e && e.buffered.length && (this.immediateSwitch = !1,
                            e.currentTime > 0 && K.isBuffered(e, e.currentTime) && (e.currentTime -= 1e-4),
                            this.previouslyPaused || e.play())
                        }
                        ,
                        f.nextLevelSwitch = function() {
                            var e = this.media;
                            if (e && e.readyState) {
                                var t, a = this.getBufferedFrag(e.currentTime);
                                if (a && a.startPTS > 1 && this.flushMainBuffer(0, a.startPTS - 1),
                                e.paused)
                                    t = 0;
                                else {
                                    var r = this.hls.nextLoadLevel
                                      , n = this.levels[r]
                                      , i = this.fragLastKbps;
                                    t = i && this.fragCurrent ? this.fragCurrent.duration * n.bitrate / (1e3 * i) + 1 : 0
                                }
                                var o = this.getBufferedFrag(e.currentTime + t);
                                if (o) {
                                    var s = this.followingBufferedFrag(o);
                                    if (s) {
                                        var l = this.fragCurrent;
                                        l && l.loader && l.loader.abort(),
                                        this.fragCurrent = null;
                                        var u = Math.max(o.endPTS, s.maxStartPTS + Math.min(this.config.maxFragLookUpTolerance, s.duration));
                                        this.flushMainBuffer(u, Number.POSITIVE_INFINITY)
                                    }
                                }
                            }
                        }
                        ,
                        f.flushMainBuffer = function(e, t) {
                            this.state = Ae;
                            var a = {
                                startOffset: e,
                                endOffset: t
                            };
                            this.altAudio && (a.type = "video"),
                            this.hls.trigger(u.default.BUFFER_FLUSHING, a)
                        }
                        ,
                        f.onMediaAttached = function(e) {
                            var t = this.media = this.mediaBuffer = e.media;
                            this.onvseeking = this.onMediaSeeking.bind(this),
                            this.onvseeked = this.onMediaSeeked.bind(this),
                            this.onvended = this.onMediaEnded.bind(this),
                            t.addEventListener("seeking", this.onvseeking),
                            t.addEventListener("seeked", this.onvseeked),
                            t.addEventListener("ended", this.onvended);
                            var a = this.config;
                            this.levels && a.autoStartLoad && this.hls.startLoad(a.startPosition),
                            this.gapController = new fe(a,t,this.fragmentTracker,this.hls)
                        }
                        ,
                        f.onMediaDetaching = function() {
                            var e = this.media;
                            e && e.ended && (d.logger.log("MSE detaching and video ended, reset startPosition"),
                            this.startPosition = this.lastCurrentTime = 0);
                            var t = this.levels;
                            t && t.forEach((function(e) {
                                e.details && e.details.fragments.forEach((function(e) {
                                    e.backtracked = void 0
                                }
                                ))
                            }
                            )),
                            e && (e.removeEventListener("seeking", this.onvseeking),
                            e.removeEventListener("seeked", this.onvseeked),
                            e.removeEventListener("ended", this.onvended),
                            this.onvseeking = this.onvseeked = this.onvended = null),
                            this.fragmentTracker.removeAllFragments(),
                            this.media = this.mediaBuffer = null,
                            this.loadedmetadata = !1,
                            this.stopLoad()
                        }
                        ,
                        f.onMediaSeeked = function() {
                            var e = this.media
                              , t = e ? e.currentTime : void 0;
                            Object(l.isFiniteNumber)(t) && d.logger.log("media seeked to " + t.toFixed(3)),
                            this.tick()
                        }
                        ,
                        f.onManifestLoading = function() {
                            d.logger.log("trigger BUFFER_RESET"),
                            this.hls.trigger(u.default.BUFFER_RESET),
                            this.fragmentTracker.removeAllFragments(),
                            this.stalled = !1,
                            this.startPosition = this.lastCurrentTime = 0
                        }
                        ,
                        f.onManifestParsed = function(e) {
                            var t, a = !1, r = !1;
                            e.levels.forEach((function(e) {
                                (t = e.audioCodec) && (-1 !== t.indexOf("mp4a.40.2") && (a = !0),
                                -1 !== t.indexOf("mp4a.40.5") && (r = !0))
                            }
                            )),
                            this.audioCodecSwitch = a && r,
                            this.audioCodecSwitch && d.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),
                            this.altAudio = e.altAudio,
                            this.levels = e.levels,
                            this.startFragRequested = !1;
                            var n = this.config;
                            (n.autoStartLoad || this.forceStartLoad) && this.hls.startLoad(n.startPosition)
                        }
                        ,
                        f.onLevelLoaded = function(e) {
                            var t = e.details
                              , a = e.level
                              , r = this.levels[this.levelLastLoaded]
                              , n = this.levels[a]
                              , i = t.totalduration
                              , o = 0;
                            if (d.logger.log("level " + a + " loaded [" + t.startSN + "," + t.endSN + "],duration:" + i),
                            t.live) {
                                var s = n.details;
                                s && t.fragments.length > 0 ? (ae(s, t),
                                o = t.fragments[0].start,
                                this.liveSyncPosition = this.computeLivePosition(o, s),
                                t.PTSKnown && Object(l.isFiniteNumber)(o) ? d.logger.log("live playlist sliding:" + o.toFixed(3)) : (d.logger.log("live playlist - outdated PTS, unknown sliding"),
                                se(this.fragPrevious, r, t))) : (d.logger.log("live playlist - first load, unknown sliding"),
                                t.PTSKnown = !1,
                                se(this.fragPrevious, r, t))
                            } else
                                t.PTSKnown = !1;
                            if (n.details = t,
                            this.levelLastLoaded = a,
                            this.hls.trigger(u.default.LEVEL_UPDATED, {
                                details: t,
                                level: a
                            }),
                            !1 === this.startFragRequested) {
                                if (-1 === this.startPosition || -1 === this.lastCurrentTime) {
                                    var c = t.startTimeOffset;
                                    Object(l.isFiniteNumber)(c) ? (c < 0 && (d.logger.log("negative start time offset " + c + ", count from end of last fragment"),
                                    c = o + i + c),
                                    d.logger.log("start time offset found in playlist, adjust startPosition to " + c),
                                    this.startPosition = c) : t.live ? (this.startPosition = this.computeLivePosition(o, t),
                                    d.logger.log("configure startPosition to " + this.startPosition)) : this.startPosition = 0,
                                    this.lastCurrentTime = this.startPosition
                                }
                                this.nextLoadPosition = this.startPosition
                            }
                            this.state === we && (this.state = ye),
                            this.tick()
                        }
                        ,
                        f.onKeyLoaded = function() {
                            this.state === ve && (this.state = ye,
                            this.tick())
                        }
                        ,
                        f.onFragLoaded = function(e) {
                            var t = this.fragCurrent
                              , a = this.hls
                              , r = this.levels
                              , n = this.media
                              , i = e.frag;
                            if (this.state === be && t && "main" === i.type && i.level === t.level && i.sn === t.sn) {
                                var o = e.stats
                                  , s = r[t.level]
                                  , l = s.details;
                                if (this.bitrateTest = !1,
                                this.stats = o,
                                d.logger.log("Loaded " + t.sn + " of [" + l.startSN + " ," + l.endSN + "],level " + t.level),
                                i.bitrateTest && a.nextLoadLevel)
                                    this.state = ye,
                                    this.startFragRequested = !1,
                                    o.tparsed = o.tbuffered = window.performance.now(),
                                    a.trigger(u.default.FRAG_BUFFERED, {
                                        stats: o,
                                        frag: t,
                                        id: "main"
                                    }),
                                    this.tick();
                                else if ("initSegment" === i.sn)
                                    this.state = ye,
                                    o.tparsed = o.tbuffered = window.performance.now(),
                                    l.initSegment.data = e.payload,
                                    a.trigger(u.default.FRAG_BUFFERED, {
                                        stats: o,
                                        frag: t,
                                        id: "main"
                                    }),
                                    this.tick();
                                else {
                                    d.logger.log("Parsing " + t.sn + " of [" + l.startSN + " ," + l.endSN + "],level " + t.level + ", cc " + t.cc),
                                    this.state = Te,
                                    this.pendingBuffering = !0,
                                    this.appended = !1,
                                    i.bitrateTest && (i.bitrateTest = !1,
                                    this.fragmentTracker.onFragLoaded({
                                        frag: i
                                    }));
                                    var c = !(n && n.seeking) && (l.PTSKnown || !l.live)
                                      , f = l.initSegment ? l.initSegment.data : []
                                      , h = this._getAudioCodec(s);
                                    (this.demuxer = this.demuxer || new J(this.hls,"main")).push(e.payload, f, h, s.videoCodec, t, l.totalduration, c)
                                }
                            }
                            this.fragLoadError = 0
                        }
                        ,
                        f.onFragParsingInitSegment = function(e) {
                            var t = this.fragCurrent
                              , a = e.frag;
                            if (t && "main" === e.id && a.sn === t.sn && a.level === t.level && this.state === Te) {
                                var r, n, i = e.tracks;
                                if (this.audioOnly = i.audio && !i.video,
                                this.altAudio && !this.audioOnly && delete i.audio,
                                n = i.audio) {
                                    var o = this.levels[this.level].audioCodec
                                      , s = navigator.userAgent.toLowerCase();
                                    o && this.audioCodecSwap && (d.logger.log("swapping playlist audio codec"),
                                    o = -1 !== o.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"),
                                    this.audioCodecSwitch && 1 !== n.metadata.channelCount && -1 === s.indexOf("firefox") && (o = "mp4a.40.5"),
                                    -1 !== s.indexOf("android") && "audio/mpeg" !== n.container && (o = "mp4a.40.2",
                                    d.logger.log("Android: force audio codec to " + o)),
                                    n.levelCodec = o,
                                    n.id = e.id
                                }
                                for (r in (n = i.video) && (n.levelCodec = this.levels[this.level].videoCodec,
                                n.id = e.id),
                                this.hls.trigger(u.default.BUFFER_CODECS, i),
                                i) {
                                    n = i[r],
                                    d.logger.log("main track:" + r + ",container:" + n.container + ",codecs[level/parsed]=[" + n.levelCodec + "/" + n.codec + "]");
                                    var l = n.initSegment;
                                    l && (this.appended = !0,
                                    this.pendingBuffering = !0,
                                    this.hls.trigger(u.default.BUFFER_APPENDING, {
                                        type: r,
                                        data: l,
                                        parent: "main",
                                        content: "initSegment"
                                    }))
                                }
                                this.tick()
                            }
                        }
                        ,
                        f.onFragParsingData = function(e) {
                            var t = this
                              , a = this.fragCurrent
                              , r = e.frag;
                            if (a && "main" === e.id && r.sn === a.sn && r.level === a.level && ("audio" !== e.type || !this.altAudio) && this.state === Te) {
                                var n = this.levels[this.level]
                                  , i = a;
                                if (Object(l.isFiniteNumber)(e.endPTS) || (e.endPTS = e.startPTS + a.duration,
                                e.endDTS = e.startDTS + a.duration),
                                !0 === e.hasAudio && i.addElementaryStream(g.AUDIO),
                                !0 === e.hasVideo && i.addElementaryStream(g.VIDEO),
                                d.logger.log("Parsed " + e.type + ",PTS:[" + e.startPTS.toFixed(3) + "," + e.endPTS.toFixed(3) + "],DTS:[" + e.startDTS.toFixed(3) + "/" + e.endDTS.toFixed(3) + "],nb:" + e.nb + ",dropped:" + (e.dropped || 0)),
                                "video" === e.type)
                                    if (i.dropped = e.dropped,
                                    i.dropped)
                                        if (i.backtracked)
                                            d.logger.warn("Already backtracked on this fragment, appending with the gap", i.sn);
                                        else {
                                            var o = n.details;
                                            if (!o || i.sn !== o.startSN)
                                                return d.logger.warn("missing video frame(s), backtracking fragment", i.sn),
                                                this.fragmentTracker.removeFragment(i),
                                                i.backtracked = !0,
                                                this.nextLoadPosition = e.startPTS,
                                                this.state = ye,
                                                this.fragPrevious = i,
                                                this.demuxer && (this.demuxer.destroy(),
                                                this.demuxer = null),
                                                void this.tick();
                                            d.logger.warn("missing video frame(s) on first frag, appending with gap", i.sn)
                                        }
                                    else
                                        i.backtracked = !1;
                                var s = te(n.details, i, e.startPTS, e.endPTS, e.startDTS, e.endDTS)
                                  , c = this.hls;
                                c.trigger(u.default.LEVEL_PTS_UPDATED, {
                                    details: n.details,
                                    level: this.level,
                                    drift: s,
                                    type: e.type,
                                    start: e.startPTS,
                                    end: e.endPTS
                                }),
                                [e.data1, e.data2].forEach((function(a) {
                                    a && a.length && t.state === Te && (t.appended = !0,
                                    t.pendingBuffering = !0,
                                    c.trigger(u.default.BUFFER_APPENDING, {
                                        type: e.type,
                                        data: a,
                                        parent: "main",
                                        content: "data"
                                    }))
                                }
                                )),
                                this.tick()
                            }
                        }
                        ,
                        f.onFragParsed = function(e) {
                            var t = this.fragCurrent
                              , a = e.frag;
                            t && "main" === e.id && a.sn === t.sn && a.level === t.level && this.state === Te && (this.stats.tparsed = window.performance.now(),
                            this.state = Se,
                            this._checkAppendedParsed())
                        }
                        ,
                        f.onAudioTrackSwitching = function(e) {
                            var t = this.altAudio
                              , a = !!e.url
                              , r = e.id;
                            if (!a) {
                                if (this.mediaBuffer !== this.media) {
                                    d.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),
                                    this.mediaBuffer = this.media;
                                    var n = this.fragCurrent;
                                    n.loader && (d.logger.log("switching to main audio track, cancel main fragment load"),
                                    n.loader.abort()),
                                    this.fragCurrent = null,
                                    this.fragPrevious = null,
                                    this.demuxer && (this.demuxer.destroy(),
                                    this.demuxer = null),
                                    this.state = ye
                                }
                                var i = this.hls;
                                t && i.trigger(u.default.BUFFER_FLUSHING, {
                                    startOffset: 0,
                                    endOffset: Number.POSITIVE_INFINITY,
                                    type: "audio"
                                }),
                                i.trigger(u.default.AUDIO_TRACK_SWITCHED, {
                                    id: r
                                })
                            }
                        }
                        ,
                        f.onAudioTrackSwitched = function(e) {
                            var t = e.id
                              , a = !!this.hls.audioTracks[t].url;
                            if (a) {
                                var r = this.videoBuffer;
                                r && this.mediaBuffer !== r && (d.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),
                                this.mediaBuffer = r)
                            }
                            this.altAudio = a,
                            this.tick()
                        }
                        ,
                        f.onBufferCreated = function(e) {
                            var t, a, r = e.tracks, n = !1;
                            for (var i in r) {
                                var o = r[i];
                                "main" === o.id ? (a = i,
                                t = o,
                                "video" === i && (this.videoBuffer = r[i].buffer)) : n = !0
                            }
                            n && t ? (d.logger.log("alternate track found, use " + a + ".buffered to schedule main fragment loading"),
                            this.mediaBuffer = t.buffer) : this.mediaBuffer = this.media
                        }
                        ,
                        f.onBufferAppended = function(e) {
                            if ("main" === e.parent) {
                                var t = this.state;
                                t !== Te && t !== Se || (this.pendingBuffering = e.pending > 0,
                                this._checkAppendedParsed())
                            }
                        }
                        ,
                        f._checkAppendedParsed = function() {
                            if (!(this.state !== Se || this.appended && this.pendingBuffering)) {
                                var e = this.fragCurrent;
                                if (e) {
                                    var t = this.mediaBuffer ? this.mediaBuffer : this.media;
                                    d.logger.log("main buffered : " + ie.toString(t.buffered)),
                                    this.fragPrevious = e;
                                    var a = this.stats;
                                    a.tbuffered = window.performance.now(),
                                    this.fragLastKbps = Math.round(8 * a.total / (a.tbuffered - a.tfirst)),
                                    this.hls.trigger(u.default.FRAG_BUFFERED, {
                                        stats: a,
                                        frag: e,
                                        id: "main"
                                    }),
                                    this.state = ye
                                }
                                (this.loadedmetadata || this.startPosition <= 0) && this.tick()
                            }
                        }
                        ,
                        f.onError = function(e) {
                            var t = e.frag || this.fragCurrent;
                            if (!t || "main" === t.type) {
                                var a = !!this.media && K.isBuffered(this.media, this.media.currentTime) && K.isBuffered(this.media, this.media.currentTime + .5);
                                switch (e.details) {
                                case s.ErrorDetails.FRAG_LOAD_ERROR:
                                case s.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                case s.ErrorDetails.KEY_LOAD_ERROR:
                                case s.ErrorDetails.KEY_LOAD_TIMEOUT:
                                    if (!e.fatal)
                                        if (this.fragLoadError + 1 <= this.config.fragLoadingMaxRetry) {
                                            var r = Math.min(Math.pow(2, this.fragLoadError) * this.config.fragLoadingRetryDelay, this.config.fragLoadingMaxRetryTimeout);
                                            d.logger.warn("mediaController: frag loading failed, retry in " + r + " ms"),
                                            this.retryDate = window.performance.now() + r,
                                            this.loadedmetadata || (this.startFragRequested = !1,
                                            this.nextLoadPosition = this.startPosition),
                                            this.fragLoadError++,
                                            this.state = Ee
                                        } else
                                            d.logger.error("mediaController: " + e.details + " reaches max retry, redispatch as fatal ..."),
                                            e.fatal = !0,
                                            this.state = Ie;
                                    break;
                                case s.ErrorDetails.LEVEL_LOAD_ERROR:
                                case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:
                                    this.state !== Ie && (e.fatal ? (this.state = Ie,
                                    d.logger.warn("streamController: " + e.details + ",switch to " + this.state + " state ...")) : e.levelRetry || this.state !== we || (this.state = ye));
                                    break;
                                case s.ErrorDetails.BUFFER_FULL_ERROR:
                                    "main" !== e.parent || this.state !== Te && this.state !== Se || (a ? (this._reduceMaxBufferLength(this.config.maxBufferLength),
                                    this.state = ye) : (d.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),
                                    this.fragCurrent = null,
                                    this.flushMainBuffer(0, Number.POSITIVE_INFINITY)))
                                }
                            }
                        }
                        ,
                        f._reduceMaxBufferLength = function(e) {
                            var t = this.config;
                            return t.maxMaxBufferLength >= e && (t.maxMaxBufferLength /= 2,
                            d.logger.warn("main:reduce max buffer length to " + t.maxMaxBufferLength + "s"),
                            !0)
                        }
                        ,
                        f._checkBuffer = function() {
                            var e = this.media;
                            if (e && 0 !== e.readyState) {
                                var t = (this.mediaBuffer ? this.mediaBuffer : e).buffered;
                                !this.loadedmetadata && t.length ? (this.loadedmetadata = !0,
                                this._seekToStartPos()) : this.immediateSwitch ? this.immediateLevelSwitchEnd() : this.gapController.poll(this.lastCurrentTime, t)
                            }
                        }
                        ,
                        f.onFragLoadEmergencyAborted = function() {
                            this.state = ye,
                            this.loadedmetadata || (this.startFragRequested = !1,
                            this.nextLoadPosition = this.startPosition),
                            this.tick()
                        }
                        ,
                        f.onBufferFlushed = function() {
                            var e = this.mediaBuffer ? this.mediaBuffer : this.media;
                            if (e) {
                                var t = this.audioOnly ? g.AUDIO : g.VIDEO;
                                this.fragmentTracker.detectEvictedFragments(t, e.buffered)
                            }
                            this.state = ye,
                            this.fragPrevious = null
                        }
                        ,
                        f.onLevelsUpdated = function(e) {
                            this.levels = e.levels
                        }
                        ,
                        f.swapAudioCodec = function() {
                            this.audioCodecSwap = !this.audioCodecSwap
                        }
                        ,
                        f._seekToStartPos = function() {
                            var e = this.media
                              , t = e.currentTime
                              , a = this.startPosition;
                            if (t !== a && a >= 0) {
                                if (e.seeking)
                                    return void d.logger.log("could not seek to " + a + ", already seeking at " + t);
                                var r = (e.buffered.length ? e.buffered.start(0) : 0) - a;
                                r > 0 && r < this.config.maxBufferHole && (d.logger.log("adjusting start position by " + r + " to match buffer start"),
                                a += r,
                                this.startPosition = a),
                                d.logger.log("seek to target start position " + a + " from current time " + t + ". ready state " + e.readyState),
                                e.currentTime = a
                            }
                        }
                        ,
                        f._getAudioCodec = function(e) {
                            var t = this.config.defaultAudioCodec || e.audioCodec;
                            return this.audioCodecSwap && (d.logger.log("swapping playlist audio codec"),
                            t && (t = -1 !== t.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5")),
                            t
                        }
                        ,
                        n = r,
                        (o = [{
                            key: "state",
                            set: function(e) {
                                if (this.state !== e) {
                                    var t = this.state;
                                    this._state = e,
                                    d.logger.log("main stream-controller: " + t + "->" + e),
                                    this.hls.trigger(u.default.STREAM_STATE_TRANSITION, {
                                        previousState: t,
                                        nextState: e
                                    })
                                }
                            },
                            get: function() {
                                return this._state
                            }
                        }, {
                            key: "currentLevel",
                            get: function() {
                                var e = this.media;
                                if (e) {
                                    var t = this.getBufferedFrag(e.currentTime);
                                    if (t)
                                        return t.level
                                }
                                return -1
                            }
                        }, {
                            key: "nextBufferedFrag",
                            get: function() {
                                var e = this.media;
                                return e ? this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)) : null
                            }
                        }, {
                            key: "nextLevel",
                            get: function() {
                                var e = this.nextBufferedFrag;
                                return e ? e.level : -1
                            }
                        }, {
                            key: "liveSyncPosition",
                            get: function() {
                                return this._liveSyncPosition
                            },
                            set: function(e) {
                                this._liveSyncPosition = e
                            }
                        }]) && Re(n.prototype, o),
                        c && Re(n, c),
                        r
                    }(Me);
                    function Oe(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var Ne = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.MANIFEST_LOADED, u.default.LEVEL_LOADED, u.default.AUDIO_TRACK_SWITCHED, u.default.FRAG_LOADED, u.default.ERROR) || this).canload = !1,
                            a.currentLevelIndex = null,
                            a.manualLevelIndex = -1,
                            a.timer = null,
                            xe = /chrome|firefox/.test(navigator.userAgent.toLowerCase()),
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n, i, o, l = r.prototype;
                        return l.onHandlerDestroying = function() {
                            this.clearTimer(),
                            this.manualLevelIndex = -1
                        }
                        ,
                        l.clearTimer = function() {
                            null !== this.timer && (clearTimeout(this.timer),
                            this.timer = null)
                        }
                        ,
                        l.startLoad = function() {
                            var e = this._levels;
                            this.canload = !0,
                            this.levelRetryCount = 0,
                            e && e.forEach((function(e) {
                                e.loadError = 0;
                                var t = e.details;
                                t && t.live && (e.details = void 0)
                            }
                            )),
                            null !== this.timer && this.loadLevel()
                        }
                        ,
                        l.stopLoad = function() {
                            this.canload = !1
                        }
                        ,
                        l.onManifestLoaded = function(e) {
                            var t, a = [], r = [], n = {}, i = null, o = !1, l = !1;
                            if (e.levels.forEach((function(e) {
                                var t = e.attrs;
                                e.loadError = 0,
                                e.fragmentError = !1,
                                o = o || !!e.videoCodec,
                                l = l || !!e.audioCodec,
                                xe && e.audioCodec && -1 !== e.audioCodec.indexOf("mp4a.40.34") && (e.audioCodec = void 0),
                                (i = n[e.bitrate]) ? i.url.push(e.url) : (e.url = [e.url],
                                e.urlId = 0,
                                n[e.bitrate] = e,
                                a.push(e)),
                                t && (t.AUDIO && Z(i || e, "audio", t.AUDIO),
                                t.SUBTITLES && Z(i || e, "text", t.SUBTITLES))
                            }
                            )),
                            o && l && (a = a.filter((function(e) {
                                return !!e.videoCodec
                            }
                            ))),
                            a = a.filter((function(e) {
                                var t = e.audioCodec
                                  , a = e.videoCodec;
                                return (!t || A(t, "audio")) && (!a || A(a, "video"))
                            }
                            )),
                            e.audioTracks && (r = e.audioTracks.filter((function(e) {
                                return !e.audioCodec || A(e.audioCodec, "audio")
                            }
                            ))).forEach((function(e, t) {
                                e.id = t
                            }
                            )),
                            a.length > 0) {
                                t = a[0].bitrate,
                                a.sort((function(e, t) {
                                    return e.bitrate - t.bitrate
                                }
                                )),
                                this._levels = a;
                                for (var c = 0; c < a.length; c++)
                                    if (a[c].bitrate === t) {
                                        this._firstLevel = c,
                                        d.logger.log("manifest loaded," + a.length + " level(s) found, first bitrate:" + t);
                                        break
                                    }
                                var f = l && !o;
                                this.hls.trigger(u.default.MANIFEST_PARSED, {
                                    levels: a,
                                    audioTracks: r,
                                    firstLevel: this._firstLevel,
                                    stats: e.stats,
                                    audio: l,
                                    video: o,
                                    altAudio: !f && r.some((function(e) {
                                        return !!e.url
                                    }
                                    ))
                                })
                            } else
                                this.hls.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.MEDIA_ERROR,
                                    details: s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
                                    fatal: !0,
                                    url: this.hls.url,
                                    reason: "no level with compatible codecs found in manifest"
                                })
                        }
                        ,
                        l.setLevelInternal = function(e) {
                            var t = this._levels
                              , a = this.hls;
                            if (e >= 0 && e < t.length) {
                                if (this.clearTimer(),
                                this.currentLevelIndex !== e) {
                                    d.logger.log("switching to level " + e),
                                    this.currentLevelIndex = e;
                                    var r = t[e];
                                    r.level = e,
                                    a.trigger(u.default.LEVEL_SWITCHING, r)
                                }
                                var n = t[e]
                                  , i = n.details;
                                if (!i || i.live) {
                                    var o = n.urlId;
                                    a.trigger(u.default.LEVEL_LOADING, {
                                        url: n.url[o],
                                        level: e,
                                        id: o
                                    })
                                }
                            } else
                                a.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.OTHER_ERROR,
                                    details: s.ErrorDetails.LEVEL_SWITCH_ERROR,
                                    level: e,
                                    fatal: !1,
                                    reason: "invalid level idx"
                                })
                        }
                        ,
                        l.onError = function(e) {
                            if (e.fatal)
                                e.type === s.ErrorTypes.NETWORK_ERROR && this.clearTimer();
                            else {
                                var t, a = !1, r = !1;
                                switch (e.details) {
                                case s.ErrorDetails.FRAG_LOAD_ERROR:
                                case s.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                case s.ErrorDetails.KEY_LOAD_ERROR:
                                case s.ErrorDetails.KEY_LOAD_TIMEOUT:
                                    t = e.frag.level,
                                    r = !0;
                                    break;
                                case s.ErrorDetails.LEVEL_LOAD_ERROR:
                                case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:
                                    t = e.context.level,
                                    a = !0;
                                    break;
                                case s.ErrorDetails.REMUX_ALLOC_ERROR:
                                    t = e.level,
                                    a = !0
                                }
                                void 0 !== t && this.recoverLevel(e, t, a, r)
                            }
                        }
                        ,
                        l.recoverLevel = function(e, t, a, r) {
                            var n, i, o, s = this, l = this.hls.config, u = e.details, c = this._levels[t];
                            if (c.loadError++,
                            c.fragmentError = r,
                            a) {
                                if (!(this.levelRetryCount + 1 <= l.levelLoadingMaxRetry))
                                    return d.logger.error("level controller, cannot recover from " + u + " error"),
                                    this.currentLevelIndex = null,
                                    this.clearTimer(),
                                    void (e.fatal = !0);
                                i = Math.min(Math.pow(2, this.levelRetryCount) * l.levelLoadingRetryDelay, l.levelLoadingMaxRetryTimeout),
                                this.timer = setTimeout((function() {
                                    return s.loadLevel()
                                }
                                ), i),
                                e.levelRetry = !0,
                                this.levelRetryCount++,
                                d.logger.warn("level controller, " + u + ", retry in " + i + " ms, current retry count is " + this.levelRetryCount)
                            }
                            (a || r) && ((n = c.url.length) > 1 && c.loadError < n ? (c.urlId = (c.urlId + 1) % n,
                            c.details = void 0,
                            d.logger.warn("level controller, " + u + " for level " + t + ": switching to redundant URL-id " + c.urlId)) : -1 === this.manualLevelIndex ? (o = 0 === t ? this._levels.length - 1 : t - 1,
                            d.logger.warn("level controller, " + u + ": switch to " + o),
                            this.hls.nextAutoLevel = this.currentLevelIndex = o) : r && (d.logger.warn("level controller, " + u + ": reload a fragment"),
                            this.currentLevelIndex = null))
                        }
                        ,
                        l.onFragLoaded = function(e) {
                            var t = e.frag;
                            if (void 0 !== t && "main" === t.type) {
                                var a = this._levels[t.level];
                                void 0 !== a && (a.fragmentError = !1,
                                a.loadError = 0,
                                this.levelRetryCount = 0)
                            }
                        }
                        ,
                        l.onLevelLoaded = function(e) {
                            var t = this
                              , a = e.level
                              , r = e.details;
                            if (a === this.currentLevelIndex) {
                                var n = this._levels[a];
                                if (n.fragmentError || (n.loadError = 0,
                                this.levelRetryCount = 0),
                                r.live) {
                                    var i = ne(n.details, r, e.stats.trequest);
                                    d.logger.log("live playlist, reload in " + Math.round(i) + " ms"),
                                    this.timer = setTimeout((function() {
                                        return t.loadLevel()
                                    }
                                    ), i)
                                } else
                                    this.clearTimer()
                            }
                        }
                        ,
                        l.onAudioTrackSwitched = function(e) {
                            var t = this.hls.audioTracks[e.id].groupId
                              , a = this.hls.levels[this.currentLevelIndex];
                            if (a && a.audioGroupIds) {
                                for (var r = -1, n = 0; n < a.audioGroupIds.length; n++)
                                    if (a.audioGroupIds[n] === t) {
                                        r = n;
                                        break
                                    }
                                r !== a.urlId && (a.urlId = r,
                                this.startLoad())
                            }
                        }
                        ,
                        l.loadLevel = function() {
                            if (d.logger.debug("call to loadLevel"),
                            null !== this.currentLevelIndex && this.canload) {
                                var e = this._levels[this.currentLevelIndex];
                                if ("object" == typeof e && e.url.length > 0) {
                                    var t = this.currentLevelIndex
                                      , a = e.urlId
                                      , r = e.url[a];
                                    d.logger.log("Attempt loading level index " + t + " with URL-id " + a),
                                    this.hls.trigger(u.default.LEVEL_LOADING, {
                                        url: r,
                                        level: t,
                                        id: a
                                    })
                                }
                            }
                        }
                        ,
                        l.removeLevel = function(e, t) {
                            var a = this.levels.filter((function(a, r) {
                                return r !== e || a.url.length > 1 && void 0 !== t && (a.url = a.url.filter((function(e, a) {
                                    return a !== t
                                }
                                )),
                                a.urlId = 0,
                                !0)
                            }
                            )).map((function(e, t) {
                                var a = e.details;
                                return a && a.fragments && a.fragments.forEach((function(e) {
                                    e.level = t
                                }
                                )),
                                e
                            }
                            ));
                            this._levels = a,
                            this.hls.trigger(u.default.LEVELS_UPDATED, {
                                levels: a
                            })
                        }
                        ,
                        n = r,
                        (i = [{
                            key: "levels",
                            get: function() {
                                return this._levels
                            }
                        }, {
                            key: "level",
                            get: function() {
                                return this.currentLevelIndex
                            },
                            set: function(e) {
                                var t = this._levels;
                                t && (e = Math.min(e, t.length - 1),
                                this.currentLevelIndex === e && t[e].details || this.setLevelInternal(e))
                            }
                        }, {
                            key: "manualLevel",
                            get: function() {
                                return this.manualLevelIndex
                            },
                            set: function(e) {
                                this.manualLevelIndex = e,
                                void 0 === this._startLevel && (this._startLevel = e),
                                -1 !== e && (this.level = e)
                            }
                        }, {
                            key: "firstLevel",
                            get: function() {
                                return this._firstLevel
                            },
                            set: function(e) {
                                this._firstLevel = e
                            }
                        }, {
                            key: "startLevel",
                            get: function() {
                                if (void 0 === this._startLevel) {
                                    var e = this.hls.config.startLevel;
                                    return void 0 !== e ? e : this._firstLevel
                                }
                                return this._startLevel
                            },
                            set: function(e) {
                                this._startLevel = e
                            }
                        }, {
                            key: "nextLoadLevel",
                            get: function() {
                                return -1 !== this.manualLevelIndex ? this.manualLevelIndex : this.hls.nextAutoLevel
                            },
                            set: function(e) {
                                this.level = e,
                                -1 === this.manualLevelIndex && (this.hls.nextAutoLevel = e)
                            }
                        }]) && Oe(n.prototype, i),
                        o && Oe(n, o),
                        r
                    }(f)
                      , Le = a("./src/demux/id3.js");
                    function Ue(e, t) {
                        var a;
                        try {
                            a = new Event("addtrack")
                        } catch (e) {
                            (a = document.createEvent("Event")).initEvent("addtrack", !1, !1)
                        }
                        a.track = e,
                        t.dispatchEvent(a)
                    }
                    function Fe(e) {
                        if (null == e ? void 0 : e.cues)
                            for (; e.cues.length > 0; )
                                e.removeCue(e.cues[0])
                    }
                    var Be = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.MEDIA_ATTACHED, u.default.MEDIA_DETACHING, u.default.FRAG_PARSING_METADATA, u.default.LIVE_BACK_BUFFER_REACHED) || this).id3Track = void 0,
                            a.media = void 0,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.destroy = function() {
                            f.prototype.destroy.call(this)
                        }
                        ,
                        n.onMediaAttached = function(e) {
                            this.media = e.media,
                            this.media
                        }
                        ,
                        n.onMediaDetaching = function() {
                            Fe(this.id3Track),
                            this.id3Track = void 0,
                            this.media = void 0
                        }
                        ,
                        n.getID3Track = function(e) {
                            for (var t = 0; t < e.length; t++) {
                                var a = e[t];
                                if ("metadata" === a.kind && "id3" === a.label)
                                    return Ue(a, this.media),
                                    a
                            }
                            return this.media.addTextTrack("metadata", "id3")
                        }
                        ,
                        n.onFragParsingMetadata = function(e) {
                            var t = e.frag
                              , a = e.samples;
                            this.id3Track || (this.id3Track = this.getID3Track(this.media.textTracks),
                            this.id3Track.mode = "hidden");
                            for (var r = window.WebKitDataCue || window.VTTCue || window.TextTrackCue, n = 0; n < a.length; n++) {
                                var i = Le.default.getID3Frames(a[n].data);
                                if (i) {
                                    var o = Math.max(a[n].pts, 0)
                                      , s = n < a.length - 1 ? a[n + 1].pts : t.endPTS;
                                    s || (s = t.start + t.duration),
                                    s - o <= 0 && (s = o + .25);
                                    for (var l = 0; l < i.length; l++) {
                                        var u = i[l];
                                        if (!Le.default.isTimeStampFrame(u)) {
                                            var d = new r(o,s,"");
                                            d.value = u,
                                            this.id3Track.addCue(d)
                                        }
                                    }
                                }
                            }
                        }
                        ,
                        n.onLiveBackBufferReached = function(e) {
                            var t = e.bufferEnd
                              , a = this.id3Track;
                            if (a && a.cues && a.cues.length) {
                                var r = function(e, t) {
                                    if (t < e[0].endTime)
                                        return e[0];
                                    if (t > e[e.length - 1].endTime)
                                        return e[e.length - 1];
                                    for (var a = 0, r = e.length - 1; a <= r; ) {
                                        var n = Math.floor((r + a) / 2);
                                        if (t < e[n].endTime)
                                            r = n - 1;
                                        else {
                                            if (!(t > e[n].endTime))
                                                return e[n];
                                            a = n + 1
                                        }
                                    }
                                    return e[a].endTime - t < t - e[r].endTime ? e[a] : e[r]
                                }(a.cues, t);
                                if (r)
                                    for (; a.cues[0] !== r; )
                                        a.removeCue(a.cues[0])
                            }
                        }
                        ,
                        r
                    }(f)
                      , je = function() {
                        function e(e) {
                            this.alpha_ = void 0,
                            this.estimate_ = void 0,
                            this.totalWeight_ = void 0,
                            this.alpha_ = e ? Math.exp(Math.log(.5) / e) : 0,
                            this.estimate_ = 0,
                            this.totalWeight_ = 0
                        }
                        var t = e.prototype;
                        return t.sample = function(e, t) {
                            var a = Math.pow(this.alpha_, e);
                            this.estimate_ = t * (1 - a) + a * this.estimate_,
                            this.totalWeight_ += e
                        }
                        ,
                        t.getTotalWeight = function() {
                            return this.totalWeight_
                        }
                        ,
                        t.getEstimate = function() {
                            if (this.alpha_) {
                                var e = 1 - Math.pow(this.alpha_, this.totalWeight_);
                                return this.estimate_ / e
                            }
                            return this.estimate_
                        }
                        ,
                        e
                    }()
                      , Ge = function() {
                        function e(e, t, a, r) {
                            this.hls = void 0,
                            this.defaultEstimate_ = void 0,
                            this.minWeight_ = void 0,
                            this.minDelayMs_ = void 0,
                            this.slow_ = void 0,
                            this.fast_ = void 0,
                            this.hls = e,
                            this.defaultEstimate_ = r,
                            this.minWeight_ = .001,
                            this.minDelayMs_ = 50,
                            this.slow_ = new je(t),
                            this.fast_ = new je(a)
                        }
                        var t = e.prototype;
                        return t.sample = function(e, t) {
                            var a = (e = Math.max(e, this.minDelayMs_)) / 1e3
                              , r = 8 * t / a;
                            this.fast_.sample(a, r),
                            this.slow_.sample(a, r)
                        }
                        ,
                        t.canEstimate = function() {
                            var e = this.fast_;
                            return e && e.getTotalWeight() >= this.minWeight_
                        }
                        ,
                        t.getEstimate = function() {
                            return this.canEstimate() ? Math.min(this.fast_.getEstimate(), this.slow_.getEstimate()) : this.defaultEstimate_
                        }
                        ,
                        t.destroy = function() {}
                        ,
                        e
                    }();
                    function Ve(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var Ke = window.performance
                      , $e = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.FRAG_LOADING, u.default.FRAG_LOADED, u.default.FRAG_BUFFERED, u.default.ERROR) || this).lastLoadedFragLevel = 0,
                            a._nextAutoLevel = -1,
                            a.hls = t,
                            a.timer = null,
                            a._bwEstimator = null,
                            a.onCheck = a._abandonRulesCheck.bind(function(e) {
                                if (void 0 === e)
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return e
                            }(a)),
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n, i, o, c = r.prototype;
                        return c.destroy = function() {
                            this.clearTimer(),
                            f.prototype.destroy.call(this)
                        }
                        ,
                        c.onFragLoading = function(e) {
                            var t = e.frag;
                            if ("main" === t.type && (this.timer || (this.fragCurrent = t,
                            this.timer = setInterval(this.onCheck, 100)),
                            !this._bwEstimator)) {
                                var a, r, n = this.hls, i = n.config, o = t.level;
                                n.levels[o].details.live ? (a = i.abrEwmaFastLive,
                                r = i.abrEwmaSlowLive) : (a = i.abrEwmaFastVoD,
                                r = i.abrEwmaSlowVoD),
                                this._bwEstimator = new Ge(n,r,a,i.abrEwmaDefaultEstimate)
                            }
                        }
                        ,
                        c._abandonRulesCheck = function() {
                            var e = this.hls
                              , t = e.media
                              , a = this.fragCurrent;
                            if (a) {
                                var r = a.loader;
                                if (!r || r.stats && r.stats.aborted)
                                    return d.logger.warn("frag loader destroy or aborted, disarm abandonRules"),
                                    this.clearTimer(),
                                    void (this._nextAutoLevel = -1);
                                var n = r.stats;
                                if (t && n && (!t.paused && 0 !== t.playbackRate || !t.readyState) && a.autoLevel && a.level) {
                                    var i = Ke.now() - n.trequest
                                      , o = Math.abs(t.playbackRate);
                                    if (i > 500 * a.duration / o) {
                                        var s = e.levels
                                          , l = Math.max(1, n.bw ? n.bw / 8 : 1e3 * n.loaded / i)
                                          , c = s[a.level];
                                        if (!c)
                                            return;
                                        var f = c.realBitrate ? Math.max(c.realBitrate, c.bitrate) : c.bitrate
                                          , h = n.total ? n.total : Math.max(n.loaded, Math.round(a.duration * f / 8))
                                          , p = t.currentTime
                                          , g = (h - n.loaded) / l
                                          , m = (K.bufferInfo(t, p, e.config.maxBufferHole).end - p) / o;
                                        if (m < 2 * a.duration / o && g > m) {
                                            var y, _ = e.minAutoLevel;
                                            for (y = a.level - 1; y > _; y--) {
                                                var v = s[y].realBitrate ? Math.max(s[y].realBitrate, s[y].bitrate) : s[y].bitrate;
                                                if (a.duration * v / (6.4 * l) < m)
                                                    break
                                            }
                                            void 0 < g && (d.logger.warn("loading too slow, abort fragment loading and switch to level " + y + ":fragLoadedDelay[" + y + "]<fragLoadedDelay[" + (a.level - 1) + "];bufferStarvationDelay:" + (void 0).toFixed(1) + "<" + g.toFixed(1) + ":" + m.toFixed(1)),
                                            e.nextLoadLevel = y,
                                            this._bwEstimator.sample(i, n.loaded),
                                            r.abort(),
                                            this.clearTimer(),
                                            e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED, {
                                                frag: a,
                                                stats: n
                                            }))
                                        }
                                    }
                                }
                            }
                        }
                        ,
                        c.onFragLoaded = function(e) {
                            var t = e.frag;
                            if ("main" === t.type && Object(l.isFiniteNumber)(t.sn)) {
                                if (this.clearTimer(),
                                this.lastLoadedFragLevel = t.level,
                                this._nextAutoLevel = -1,
                                this.hls.config.abrMaxWithRealBitrate) {
                                    var a = this.hls.levels[t.level]
                                      , r = (a.loaded ? a.loaded.bytes : 0) + e.stats.loaded
                                      , n = (a.loaded ? a.loaded.duration : 0) + e.frag.duration;
                                    a.loaded = {
                                        bytes: r,
                                        duration: n
                                    },
                                    a.realBitrate = Math.round(8 * r / n)
                                }
                                if (e.frag.bitrateTest) {
                                    var i = e.stats;
                                    i.tparsed = i.tbuffered = i.tload,
                                    this.onFragBuffered(e)
                                }
                            }
                        }
                        ,
                        c.onFragBuffered = function(e) {
                            var t = e.stats
                              , a = e.frag;
                            if (!0 !== t.aborted && "main" === a.type && Object(l.isFiniteNumber)(a.sn) && (!a.bitrateTest || t.tload === t.tbuffered)) {
                                var r = t.tparsed - t.trequest;
                                d.logger.log("latency/loading/parsing/append/kbps:" + Math.round(t.tfirst - t.trequest) + "/" + Math.round(t.tload - t.tfirst) + "/" + Math.round(t.tparsed - t.tload) + "/" + Math.round(t.tbuffered - t.tparsed) + "/" + Math.round(8 * t.loaded / (t.tbuffered - t.trequest))),
                                this._bwEstimator.sample(r, t.loaded),
                                t.bwEstimate = this._bwEstimator.getEstimate(),
                                a.bitrateTest ? this.bitrateTestDelay = r / 1e3 : this.bitrateTestDelay = 0
                            }
                        }
                        ,
                        c.onError = function(e) {
                            switch (e.details) {
                            case s.ErrorDetails.FRAG_LOAD_ERROR:
                            case s.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                this.clearTimer()
                            }
                        }
                        ,
                        c.clearTimer = function() {
                            clearInterval(this.timer),
                            this.timer = null
                        }
                        ,
                        c._findBestLevel = function(e, t, a, r, n, i, o, s, l) {
                            for (var u = n; u >= r; u--) {
                                var c = l[u];
                                if (c) {
                                    var f = c.details
                                      , h = f ? f.totalduration / f.fragments.length : t
                                      , p = !!f && f.live
                                      , g = void 0;
                                    g = u <= e ? o * a : s * a;
                                    var m = l[u].realBitrate ? Math.max(l[u].realBitrate, l[u].bitrate) : l[u].bitrate
                                      , y = m * h / g;
                                    if (d.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: " + u + "/" + Math.round(g) + "/" + m + "/" + h + "/" + i + "/" + y),
                                    g > m && (!y || p && !this.bitrateTestDelay || y < i))
                                        return u
                                }
                            }
                            return -1
                        }
                        ,
                        n = r,
                        (i = [{
                            key: "nextAutoLevel",
                            get: function() {
                                var e = this._nextAutoLevel
                                  , t = this._bwEstimator;
                                if (!(-1 === e || t && t.canEstimate()))
                                    return e;
                                var a = this._nextABRAutoLevel;
                                return -1 !== e && (a = Math.min(e, a)),
                                a
                            },
                            set: function(e) {
                                this._nextAutoLevel = e
                            }
                        }, {
                            key: "_nextABRAutoLevel",
                            get: function() {
                                var e = this.hls
                                  , t = e.maxAutoLevel
                                  , a = e.levels
                                  , r = e.config
                                  , n = e.minAutoLevel
                                  , i = e.media
                                  , o = this.lastLoadedFragLevel
                                  , s = this.fragCurrent ? this.fragCurrent.duration : 0
                                  , l = i ? i.currentTime : 0
                                  , u = i && 0 !== i.playbackRate ? Math.abs(i.playbackRate) : 1
                                  , c = this._bwEstimator ? this._bwEstimator.getEstimate() : r.abrEwmaDefaultEstimate
                                  , f = (K.bufferInfo(i, l, r.maxBufferHole).end - l) / u
                                  , h = this._findBestLevel(o, s, c, n, t, f, r.abrBandWidthFactor, r.abrBandWidthUpFactor, a);
                                if (h >= 0)
                                    return h;
                                d.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");
                                var p = s ? Math.min(s, r.maxStarvationDelay) : r.maxStarvationDelay
                                  , g = r.abrBandWidthFactor
                                  , m = r.abrBandWidthUpFactor;
                                if (0 === f) {
                                    var y = this.bitrateTestDelay;
                                    y && (p = (s ? Math.min(s, r.maxLoadingDelay) : r.maxLoadingDelay) - y,
                                    d.logger.trace("bitrate test took " + Math.round(1e3 * y) + "ms, set first fragment max fetchDuration to " + Math.round(1e3 * p) + " ms"),
                                    g = m = 1)
                                }
                                return h = this._findBestLevel(o, s, c, n, t, f + p, g, m, a),
                                Math.max(h, 0)
                            }
                        }]) && Ve(n.prototype, i),
                        o && Ve(n, o),
                        r
                    }(f)
                      , qe = W()
                      , He = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.MEDIA_ATTACHING, u.default.MEDIA_DETACHING, u.default.MANIFEST_PARSED, u.default.BUFFER_RESET, u.default.BUFFER_APPENDING, u.default.BUFFER_CODECS, u.default.BUFFER_EOS, u.default.BUFFER_FLUSHING, u.default.LEVEL_PTS_UPDATED, u.default.LEVEL_UPDATED) || this)._msDuration = null,
                            a._levelDuration = null,
                            a._levelTargetDuration = 10,
                            a._live = null,
                            a._objectUrl = null,
                            a._needsFlush = !1,
                            a._needsEos = !1,
                            a.config = void 0,
                            a.audioTimestampOffset = void 0,
                            a.bufferCodecEventsExpected = 0,
                            a._bufferCodecEventsTotal = 0,
                            a.media = null,
                            a.mediaSource = null,
                            a.segments = [],
                            a.parent = void 0,
                            a.appending = !1,
                            a.appended = 0,
                            a.appendError = 0,
                            a.flushBufferCounter = 0,
                            a.tracks = {},
                            a.pendingTracks = {},
                            a.sourceBuffer = {},
                            a.flushRange = [],
                            a._onMediaSourceOpen = function() {
                                d.logger.log("media source opened"),
                                a.hls.trigger(u.default.MEDIA_ATTACHED, {
                                    media: a.media
                                });
                                var e = a.mediaSource;
                                e && e.removeEventListener("sourceopen", a._onMediaSourceOpen),
                                a.checkPendingTracks()
                            }
                            ,
                            a._onMediaSourceClose = function() {
                                d.logger.log("media source closed")
                            }
                            ,
                            a._onMediaSourceEnded = function() {
                                d.logger.log("media source ended")
                            }
                            ,
                            a._onSBUpdateEnd = function() {
                                if (a.audioTimestampOffset && a.sourceBuffer.audio) {
                                    var e = a.sourceBuffer.audio;
                                    d.logger.warn("change mpeg audio timestamp offset from " + e.timestampOffset + " to " + a.audioTimestampOffset),
                                    e.timestampOffset = a.audioTimestampOffset,
                                    delete a.audioTimestampOffset
                                }
                                a._needsFlush && a.doFlush(),
                                a._needsEos && a.checkEos(),
                                a.appending = !1;
                                var t = a.parent
                                  , r = a.segments.reduce((function(e, a) {
                                    return a.parent === t ? e + 1 : e
                                }
                                ), 0)
                                  , n = {}
                                  , i = a.sourceBuffer;
                                for (var o in i) {
                                    var s = i[o];
                                    if (!s)
                                        throw Error("handling source buffer update end error: source buffer for " + o + " uninitilized and unable to update buffered TimeRanges.");
                                    n[o] = s.buffered
                                }
                                a.hls.trigger(u.default.BUFFER_APPENDED, {
                                    parent: t,
                                    pending: r,
                                    timeRanges: n
                                }),
                                a._needsFlush || a.doAppending(),
                                a.updateMediaElementDuration(),
                                0 === r && a.flushLiveBackBuffer()
                            }
                            ,
                            a._onSBUpdateError = function(e) {
                                d.logger.error("sourceBuffer error:", e),
                                a.hls.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.MEDIA_ERROR,
                                    details: s.ErrorDetails.BUFFER_APPENDING_ERROR,
                                    fatal: !1
                                })
                            }
                            ,
                            a.config = t.config,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.destroy = function() {
                            f.prototype.destroy.call(this)
                        }
                        ,
                        n.onLevelPtsUpdated = function(e) {
                            var t = e.type
                              , a = this.tracks.audio;
                            if ("audio" === t && a && "audio/mpeg" === a.container) {
                                var r = this.sourceBuffer.audio;
                                if (!r)
                                    throw Error("Level PTS Updated and source buffer for audio uninitalized");
                                if (Math.abs(r.timestampOffset - e.start) > .1) {
                                    var n = r.updating;
                                    try {
                                        r.abort()
                                    } catch (e) {
                                        d.logger.warn("can not abort audio buffer: " + e)
                                    }
                                    n ? this.audioTimestampOffset = e.start : (d.logger.warn("change mpeg audio timestamp offset from " + r.timestampOffset + " to " + e.start),
                                    r.timestampOffset = e.start)
                                }
                            }
                        }
                        ,
                        n.onManifestParsed = function(e) {
                            var t = 2;
                            (e.audio && !e.video || !e.altAudio) && (t = 1),
                            this.bufferCodecEventsExpected = this._bufferCodecEventsTotal = t,
                            d.logger.log(this.bufferCodecEventsExpected + " bufferCodec event(s) expected")
                        }
                        ,
                        n.onMediaAttaching = function(e) {
                            var t = this.media = e.media;
                            if (t && qe) {
                                var a = this.mediaSource = new qe;
                                a.addEventListener("sourceopen", this._onMediaSourceOpen),
                                a.addEventListener("sourceended", this._onMediaSourceEnded),
                                a.addEventListener("sourceclose", this._onMediaSourceClose),
                                t.src = window.URL.createObjectURL(a),
                                this._objectUrl = t.src
                            }
                        }
                        ,
                        n.onMediaDetaching = function() {
                            d.logger.log("media source detaching");
                            var e = this.mediaSource;
                            if (e) {
                                if ("open" === e.readyState)
                                    try {
                                        e.endOfStream()
                                    } catch (e) {
                                        d.logger.warn("onMediaDetaching:" + e.message + " while calling endOfStream")
                                    }
                                e.removeEventListener("sourceopen", this._onMediaSourceOpen),
                                e.removeEventListener("sourceended", this._onMediaSourceEnded),
                                e.removeEventListener("sourceclose", this._onMediaSourceClose),
                                this.media && (this._objectUrl && window.URL.revokeObjectURL(this._objectUrl),
                                this.media.src === this._objectUrl ? (this.media.removeAttribute("src"),
                                this.media.load()) : d.logger.warn("media.src was changed by a third party - skip cleanup")),
                                this.mediaSource = null,
                                this.media = null,
                                this._objectUrl = null,
                                this.bufferCodecEventsExpected = this._bufferCodecEventsTotal,
                                this.pendingTracks = {},
                                this.tracks = {},
                                this.sourceBuffer = {},
                                this.flushRange = [],
                                this.segments = [],
                                this.appended = 0
                            }
                            this.hls.trigger(u.default.MEDIA_DETACHED)
                        }
                        ,
                        n.checkPendingTracks = function() {
                            var e = this.bufferCodecEventsExpected
                              , t = this.pendingTracks
                              , a = Object.keys(t).length;
                            (a && !e || 2 === a) && (this.createSourceBuffers(t),
                            this.pendingTracks = {},
                            this.doAppending())
                        }
                        ,
                        n.onBufferReset = function() {
                            var e = this.sourceBuffer;
                            for (var t in e) {
                                var a = e[t];
                                try {
                                    a && (this.mediaSource && this.mediaSource.removeSourceBuffer(a),
                                    a.removeEventListener("updateend", this._onSBUpdateEnd),
                                    a.removeEventListener("error", this._onSBUpdateError))
                                } catch (e) {}
                            }
                            this.sourceBuffer = {},
                            this.flushRange = [],
                            this.segments = [],
                            this.appended = 0
                        }
                        ,
                        n.onBufferCodecs = function(e) {
                            var t = this;
                            Object.keys(this.sourceBuffer).length || (Object.keys(e).forEach((function(a) {
                                t.pendingTracks[a] = e[a]
                            }
                            )),
                            this.bufferCodecEventsExpected = Math.max(this.bufferCodecEventsExpected - 1, 0),
                            this.mediaSource && "open" === this.mediaSource.readyState && this.checkPendingTracks())
                        }
                        ,
                        n.createSourceBuffers = function(e) {
                            var t = this.sourceBuffer
                              , a = this.mediaSource;
                            if (!a)
                                throw Error("createSourceBuffers called when mediaSource was null");
                            for (var r in e)
                                if (!t[r]) {
                                    var n = e[r];
                                    if (!n)
                                        throw Error("source buffer exists for track " + r + ", however track does not");
                                    var i = n.levelCodec || n.codec
                                      , o = n.container + ";codecs=" + i;
                                    d.logger.log("creating sourceBuffer(" + o + ")");
                                    try {
                                        var l = t[r] = a.addSourceBuffer(o);
                                        l.addEventListener("updateend", this._onSBUpdateEnd),
                                        l.addEventListener("error", this._onSBUpdateError),
                                        this.tracks[r] = {
                                            buffer: l,
                                            codec: i,
                                            id: n.id,
                                            container: n.container,
                                            levelCodec: n.levelCodec
                                        }
                                    } catch (e) {
                                        d.logger.error("error while trying to add sourceBuffer:" + e.message),
                                        this.hls.trigger(u.default.ERROR, {
                                            type: s.ErrorTypes.MEDIA_ERROR,
                                            details: s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,
                                            fatal: !1,
                                            err: e,
                                            mimeType: o
                                        })
                                    }
                                }
                            this.hls.trigger(u.default.BUFFER_CREATED, {
                                tracks: this.tracks
                            })
                        }
                        ,
                        n.onBufferAppending = function(e) {
                            this._needsFlush || (this.segments ? this.segments.push(e) : this.segments = [e],
                            this.doAppending())
                        }
                        ,
                        n.onBufferEos = function(e) {
                            for (var t in this.sourceBuffer)
                                if (!e.type || e.type === t) {
                                    var a = this.sourceBuffer[t];
                                    a && !a.ended && (a.ended = !0,
                                    d.logger.log(t + " sourceBuffer now EOS"))
                                }
                            this.checkEos()
                        }
                        ,
                        n.checkEos = function() {
                            var e = this.sourceBuffer
                              , t = this.mediaSource;
                            if (t && "open" === t.readyState) {
                                for (var a in e) {
                                    var r = e[a];
                                    if (r) {
                                        if (!r.ended)
                                            return;
                                        if (r.updating)
                                            return void (this._needsEos = !0)
                                    }
                                }
                                d.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");
                                try {
                                    t.endOfStream()
                                } catch (e) {
                                    d.logger.warn("exception while calling mediaSource.endOfStream()")
                                }
                                this._needsEos = !1
                            } else
                                this._needsEos = !1
                        }
                        ,
                        n.onBufferFlushing = function(e) {
                            e.type ? this.flushRange.push({
                                start: e.startOffset,
                                end: e.endOffset,
                                type: e.type
                            }) : (this.flushRange.push({
                                start: e.startOffset,
                                end: e.endOffset,
                                type: "video"
                            }),
                            this.flushRange.push({
                                start: e.startOffset,
                                end: e.endOffset,
                                type: "audio"
                            })),
                            this.flushBufferCounter = 0,
                            this.doFlush()
                        }
                        ,
                        n.flushLiveBackBuffer = function() {
                            if (this._live) {
                                var e = this.config.liveBackBufferLength;
                                if (isFinite(e) && !(e < 0))
                                    if (this.media)
                                        for (var t = this.media.currentTime, a = this.sourceBuffer, r = Object.keys(a), n = t - Math.max(e, this._levelTargetDuration), i = r.length - 1; i >= 0; i--) {
                                            var o = r[i]
                                              , s = a[o];
                                            if (s) {
                                                var l = s.buffered;
                                                l.length > 0 && n > l.start(0) && this.removeBufferRange(o, s, 0, n) && this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED, {
                                                    bufferEnd: n
                                                })
                                            }
                                        }
                                    else
                                        d.logger.error("flushLiveBackBuffer called without attaching media")
                            }
                        }
                        ,
                        n.onLevelUpdated = function(e) {
                            var t = e.details;
                            t.fragments.length > 0 && (this._levelDuration = t.totalduration + t.fragments[0].start,
                            this._levelTargetDuration = t.averagetargetduration || t.targetduration || 10,
                            this._live = t.live,
                            this.updateMediaElementDuration())
                        }
                        ,
                        n.updateMediaElementDuration = function() {
                            var e, t = this.config;
                            if (null !== this._levelDuration && this.media && this.mediaSource && this.sourceBuffer && 0 !== this.media.readyState && "open" === this.mediaSource.readyState) {
                                for (var a in this.sourceBuffer) {
                                    var r = this.sourceBuffer[a];
                                    if (r && !0 === r.updating)
                                        return
                                }
                                e = this.media.duration,
                                null === this._msDuration && (this._msDuration = this.mediaSource.duration),
                                !0 === this._live && !0 === t.liveDurationInfinity ? (d.logger.log("Media Source duration is set to Infinity"),
                                this._msDuration = this.mediaSource.duration = 1 / 0) : (this._levelDuration > this._msDuration && this._levelDuration > e || !Object(l.isFiniteNumber)(e)) && (d.logger.log("Updating Media Source duration to " + this._levelDuration.toFixed(3)),
                                this._msDuration = this.mediaSource.duration = this._levelDuration)
                            }
                        }
                        ,
                        n.doFlush = function() {
                            for (; this.flushRange.length; ) {
                                var e = this.flushRange[0];
                                if (!this.flushBuffer(e.start, e.end, e.type))
                                    return void (this._needsFlush = !0);
                                this.flushRange.shift(),
                                this.flushBufferCounter = 0
                            }
                            if (0 === this.flushRange.length) {
                                this._needsFlush = !1;
                                var t = 0
                                  , a = this.sourceBuffer;
                                try {
                                    for (var r in a) {
                                        var n = a[r];
                                        n && (t += n.buffered.length)
                                    }
                                } catch (e) {
                                    d.logger.error("error while accessing sourceBuffer.buffered")
                                }
                                this.appended = t,
                                this.hls.trigger(u.default.BUFFER_FLUSHED)
                            }
                        }
                        ,
                        n.doAppending = function() {
                            var e = this.config
                              , t = this.hls
                              , a = this.segments
                              , r = this.sourceBuffer;
                            if (Object.keys(r).length) {
                                if (!this.media || this.media.error)
                                    return this.segments = [],
                                    void d.logger.error("trying to append although a media error occured, flush segment and abort");
                                if (!this.appending) {
                                    var n = a.shift();
                                    if (n)
                                        try {
                                            var i = r[n.type];
                                            if (!i)
                                                return void this._onSBUpdateEnd();
                                            if (i.updating)
                                                return void a.unshift(n);
                                            i.ended = !1,
                                            this.parent = n.parent,
                                            i.appendBuffer(n.data),
                                            this.appendError = 0,
                                            this.appended++,
                                            this.appending = !0
                                        } catch (r) {
                                            d.logger.error("error while trying to append buffer:" + r.message),
                                            a.unshift(n);
                                            var o = {
                                                type: s.ErrorTypes.MEDIA_ERROR,
                                                parent: n.parent,
                                                details: "",
                                                fatal: !1
                                            };
                                            22 === r.code ? (this.segments = [],
                                            o.details = s.ErrorDetails.BUFFER_FULL_ERROR) : (this.appendError++,
                                            o.details = s.ErrorDetails.BUFFER_APPEND_ERROR,
                                            this.appendError > e.appendErrorMaxRetry && (d.logger.log("fail " + e.appendErrorMaxRetry + " times to append segment in sourceBuffer"),
                                            this.segments = [],
                                            o.fatal = !0)),
                                            t.trigger(u.default.ERROR, o)
                                        }
                                }
                            }
                        }
                        ,
                        n.flushBuffer = function(e, t, a) {
                            var r = this.sourceBuffer;
                            if (!Object.keys(r).length)
                                return !0;
                            var n = "null";
                            if (this.media && (n = this.media.currentTime.toFixed(3)),
                            d.logger.log("flushBuffer,pos/start/end: " + n + "/" + e + "/" + t),
                            this.flushBufferCounter >= this.appended)
                                return d.logger.warn("abort flushing too many retries"),
                                !0;
                            var i = r[a];
                            if (i) {
                                if (i.ended = !1,
                                i.updating)
                                    return d.logger.warn("cannot flush, sb updating in progress"),
                                    !1;
                                if (this.removeBufferRange(a, i, e, t))
                                    return this.flushBufferCounter++,
                                    !1
                            }
                            return d.logger.log("buffer flushed"),
                            !0
                        }
                        ,
                        n.removeBufferRange = function(e, t, a, r) {
                            try {
                                for (var n = 0; n < t.buffered.length; n++) {
                                    var i = t.buffered.start(n)
                                      , o = t.buffered.end(n)
                                      , s = Math.max(i, a)
                                      , l = Math.min(o, r);
                                    if (Math.min(l, o) - s > .5) {
                                        var u = "null";
                                        return this.media && (u = this.media.currentTime.toString()),
                                        d.logger.log("sb remove " + e + " [" + s + "," + l + "], of [" + i + "," + o + "], pos:" + u),
                                        t.remove(s, l),
                                        !0
                                    }
                                }
                            } catch (e) {
                                d.logger.warn("removeBufferRange failed", e)
                            }
                            return !1
                        }
                        ,
                        r
                    }(f);
                    function We(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var Ye = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.FPS_DROP_LEVEL_CAPPING, u.default.MEDIA_ATTACHING, u.default.MANIFEST_PARSED, u.default.LEVELS_UPDATED, u.default.BUFFER_CODECS, u.default.MEDIA_DETACHING) || this).autoLevelCapping = Number.POSITIVE_INFINITY,
                            a.firstLevel = null,
                            a.levels = [],
                            a.media = null,
                            a.restrictedLevels = [],
                            a.timer = null,
                            a.clientRect = null,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n, i, o, s = r.prototype;
                        return s.destroy = function() {
                            this.hls.config.capLevelToPlayerSize && (this.media = null,
                            this.clientRect = null,
                            this.stopCapping())
                        }
                        ,
                        s.onFpsDropLevelCapping = function(e) {
                            r.isLevelAllowed(e.droppedLevel, this.restrictedLevels) && this.restrictedLevels.push(e.droppedLevel)
                        }
                        ,
                        s.onMediaAttaching = function(e) {
                            this.media = e.media instanceof window.HTMLVideoElement ? e.media : null
                        }
                        ,
                        s.onManifestParsed = function(e) {
                            var t = this.hls;
                            this.restrictedLevels = [],
                            this.levels = e.levels,
                            this.firstLevel = e.firstLevel,
                            t.config.capLevelToPlayerSize && e.video && this.startCapping()
                        }
                        ,
                        s.onBufferCodecs = function(e) {
                            this.hls.config.capLevelToPlayerSize && e.video && this.startCapping()
                        }
                        ,
                        s.onLevelsUpdated = function(e) {
                            this.levels = e.levels
                        }
                        ,
                        s.onMediaDetaching = function() {
                            this.stopCapping()
                        }
                        ,
                        s.detectPlayerSize = function() {
                            if (this.media) {
                                var e = this.levels ? this.levels.length : 0;
                                if (e) {
                                    var t = this.hls;
                                    t.autoLevelCapping = this.getMaxLevel(e - 1),
                                    t.autoLevelCapping > this.autoLevelCapping && t.streamController.nextLevelSwitch(),
                                    this.autoLevelCapping = t.autoLevelCapping
                                }
                            }
                        }
                        ,
                        s.getMaxLevel = function(e) {
                            var t = this;
                            if (!this.levels)
                                return -1;
                            var a = this.levels.filter((function(a, n) {
                                return r.isLevelAllowed(n, t.restrictedLevels) && n <= e
                            }
                            ));
                            return this.clientRect = null,
                            r.getMaxLevelByMediaSize(a, this.mediaWidth, this.mediaHeight)
                        }
                        ,
                        s.startCapping = function() {
                            this.timer || (this.autoLevelCapping = Number.POSITIVE_INFINITY,
                            this.hls.firstLevel = this.getMaxLevel(this.firstLevel),
                            clearInterval(this.timer),
                            this.timer = setInterval(this.detectPlayerSize.bind(this), 1e3),
                            this.detectPlayerSize())
                        }
                        ,
                        s.stopCapping = function() {
                            this.restrictedLevels = [],
                            this.firstLevel = null,
                            this.autoLevelCapping = Number.POSITIVE_INFINITY,
                            this.timer && (this.timer = clearInterval(this.timer),
                            this.timer = null)
                        }
                        ,
                        s.getDimensions = function() {
                            if (this.clientRect)
                                return this.clientRect;
                            var e = this.media
                              , t = {
                                width: 0,
                                height: 0
                            };
                            if (e) {
                                var a = e.getBoundingClientRect();
                                t.width = a.width,
                                t.height = a.height,
                                t.width || t.height || (t.width = a.right - a.left || e.width || 0,
                                t.height = a.bottom - a.top || e.height || 0)
                            }
                            return this.clientRect = t,
                            t
                        }
                        ,
                        r.isLevelAllowed = function(e, t) {
                            return void 0 === t && (t = []),
                            -1 === t.indexOf(e)
                        }
                        ,
                        r.getMaxLevelByMediaSize = function(e, t, a) {
                            if (!e || e && !e.length)
                                return -1;
                            for (var r, n, i = e.length - 1, o = 0; o < e.length; o += 1) {
                                var s = e[o];
                                if ((s.width >= t || s.height >= a) && (r = s,
                                !(n = e[o + 1]) || r.width !== n.width || r.height !== n.height)) {
                                    i = o;
                                    break
                                }
                            }
                            return i
                        }
                        ,
                        n = r,
                        o = [{
                            key: "contentScaleFactor",
                            get: function() {
                                var e = 1;
                                try {
                                    e = window.devicePixelRatio
                                } catch (e) {}
                                return e
                            }
                        }],
                        (i = [{
                            key: "mediaWidth",
                            get: function() {
                                return this.getDimensions().width * r.contentScaleFactor
                            }
                        }, {
                            key: "mediaHeight",
                            get: function() {
                                return this.getDimensions().height * r.contentScaleFactor
                            }
                        }]) && We(n.prototype, i),
                        o && We(n, o),
                        r
                    }(f)
                      , ze = window.performance
                      , Xe = function(e) {
                        var t, a;
                        function r(t) {
                            return e.call(this, t, u.default.MEDIA_ATTACHING) || this
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.destroy = function() {
                            this.timer && clearInterval(this.timer),
                            this.isVideoPlaybackQualityAvailable = !1
                        }
                        ,
                        n.onMediaAttaching = function(e) {
                            var t = this.hls.config;
                            t.capLevelOnFPSDrop && ("function" == typeof (this.video = e.media instanceof window.HTMLVideoElement ? e.media : null).getVideoPlaybackQuality && (this.isVideoPlaybackQualityAvailable = !0),
                            clearInterval(this.timer),
                            this.timer = setInterval(this.checkFPSInterval.bind(this), t.fpsDroppedMonitoringPeriod))
                        }
                        ,
                        n.checkFPS = function(e, t, a) {
                            var r = ze.now();
                            if (t) {
                                if (this.lastTime) {
                                    var n = r - this.lastTime
                                      , i = a - this.lastDroppedFrames
                                      , o = t - this.lastDecodedFrames
                                      , s = 1e3 * i / n
                                      , l = this.hls;
                                    if (l.trigger(u.default.FPS_DROP, {
                                        currentDropped: i,
                                        currentDecoded: o,
                                        totalDroppedFrames: a
                                    }),
                                    s > 0 && i > l.config.fpsDroppedMonitoringThreshold * o) {
                                        var c = l.currentLevel;
                                        d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: " + c),
                                        c > 0 && (-1 === l.autoLevelCapping || l.autoLevelCapping >= c) && (c -= 1,
                                        l.trigger(u.default.FPS_DROP_LEVEL_CAPPING, {
                                            level: c,
                                            droppedLevel: l.currentLevel
                                        }),
                                        l.autoLevelCapping = c,
                                        l.streamController.nextLevelSwitch())
                                    }
                                }
                                this.lastTime = r,
                                this.lastDroppedFrames = a,
                                this.lastDecodedFrames = t
                            }
                        }
                        ,
                        n.checkFPSInterval = function() {
                            var e = this.video;
                            if (e)
                                if (this.isVideoPlaybackQualityAvailable) {
                                    var t = e.getVideoPlaybackQuality();
                                    this.checkFPS(e, t.totalVideoFrames, t.droppedVideoFrames)
                                } else
                                    this.checkFPS(e, e.webkitDecodedFrameCount, e.webkitDroppedFrameCount)
                        }
                        ,
                        r
                    }(f)
                      , Qe = function() {
                        function e(e) {
                            e && e.xhrSetup && (this.xhrSetup = e.xhrSetup)
                        }
                        var t = e.prototype;
                        return t.destroy = function() {
                            this.abort(),
                            this.loader = null
                        }
                        ,
                        t.abort = function() {
                            var e = this.loader;
                            e && 4 !== e.readyState && (this.stats.aborted = !0,
                            e.abort()),
                            window.clearTimeout(this.requestTimeout),
                            this.requestTimeout = null,
                            window.clearTimeout(this.retryTimeout),
                            this.retryTimeout = null
                        }
                        ,
                        t.load = function(e, t, a) {
                            this.context = e,
                            this.config = t,
                            this.callbacks = a,
                            this.stats = {
                                trequest: window.performance.now(),
                                retry: 0
                            },
                            this.retryDelay = t.retryDelay,
                            this.loadInternal()
                        }
                        ,
                        t.loadInternal = function() {
                            var e, t = this.context;
                            e = this.loader = new window.XMLHttpRequest;
                            var a = this.stats;
                            a.tfirst = 0,
                            a.loaded = 0;
                            var r = this.xhrSetup;
                            try {
                                if (r)
                                    try {
                                        r(e, t.url)
                                    } catch (a) {
                                        e.open("GET", t.url, !0),
                                        r(e, t.url)
                                    }
                                e.readyState || e.open("GET", t.url, !0)
                            } catch (a) {
                                return void this.callbacks.onError({
                                    code: e.status,
                                    text: a.message
                                }, t, e)
                            }
                            t.rangeEnd && e.setRequestHeader("Range", "bytes=" + t.rangeStart + "-" + (t.rangeEnd - 1)),
                            e.onreadystatechange = this.readystatechange.bind(this),
                            e.onprogress = this.loadprogress.bind(this),
                            e.responseType = t.responseType,
                            this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), this.config.timeout),
                            e.send()
                        }
                        ,
                        t.readystatechange = function(e) {
                            var t = e.currentTarget
                              , a = t.readyState
                              , r = this.stats
                              , n = this.context
                              , i = this.config;
                            if (!r.aborted && a >= 2)
                                if (window.clearTimeout(this.requestTimeout),
                                0 === r.tfirst && (r.tfirst = Math.max(window.performance.now(), r.trequest)),
                                4 === a) {
                                    var o = t.status;
                                    if (o >= 200 && o < 300) {
                                        var s, l;
                                        r.tload = Math.max(r.tfirst, window.performance.now()),
                                        l = "arraybuffer" === n.responseType ? (s = t.response).byteLength : (s = t.responseText).length,
                                        r.loaded = r.total = l;
                                        var u = {
                                            url: t.responseURL,
                                            data: s
                                        };
                                        this.callbacks.onSuccess(u, r, n, t)
                                    } else
                                        r.retry >= i.maxRetry || o >= 400 && o < 499 ? (d.logger.error(o + " while loading " + n.url),
                                        this.callbacks.onError({
                                            code: o,
                                            text: t.statusText
                                        }, n, t)) : (d.logger.warn(o + " while loading " + n.url + ", retrying in " + this.retryDelay + "..."),
                                        this.destroy(),
                                        this.retryTimeout = window.setTimeout(this.loadInternal.bind(this), this.retryDelay),
                                        this.retryDelay = Math.min(2 * this.retryDelay, i.maxRetryDelay),
                                        r.retry++)
                                } else
                                    this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), i.timeout)
                        }
                        ,
                        t.loadtimeout = function() {
                            d.logger.warn("timeout while loading " + this.context.url),
                            this.callbacks.onTimeout(this.stats, this.context, null)
                        }
                        ,
                        t.loadprogress = function(e) {
                            var t = e.currentTarget
                              , a = this.stats;
                            a.loaded = e.loaded,
                            e.lengthComputable && (a.total = e.total);
                            var r = this.callbacks.onProgress;
                            r && r(a, this.context, null, t)
                        }
                        ,
                        e
                    }();
                    function Je(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var Ze = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.MANIFEST_LOADING, u.default.MANIFEST_PARSED, u.default.AUDIO_TRACK_LOADED, u.default.AUDIO_TRACK_SWITCHED, u.default.LEVEL_LOADED, u.default.ERROR) || this)._trackId = -1,
                            a._selectDefaultTrack = !0,
                            a.tracks = [],
                            a.trackIdBlacklist = Object.create(null),
                            a.audioGroupId = null,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n, i, o, l = r.prototype;
                        return l.onManifestLoading = function() {
                            this.tracks = [],
                            this._trackId = -1,
                            this._selectDefaultTrack = !0
                        }
                        ,
                        l.onManifestParsed = function(e) {
                            var t = this.tracks = e.audioTracks || [];
                            this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED, {
                                audioTracks: t
                            }),
                            this._selectAudioGroup(this.hls.nextLoadLevel)
                        }
                        ,
                        l.onAudioTrackLoaded = function(e) {
                            if (e.id >= this.tracks.length)
                                d.logger.warn("Invalid audio track id:", e.id);
                            else {
                                if (d.logger.log("audioTrack " + e.id + " loaded"),
                                this.tracks[e.id].details = e.details,
                                e.details.live && !this.hasInterval()) {
                                    var t = 1e3 * e.details.targetduration;
                                    this.setInterval(t)
                                }
                                !e.details.live && this.hasInterval() && this.clearInterval()
                            }
                        }
                        ,
                        l.onAudioTrackSwitched = function(e) {
                            var t = this.tracks[e.id].groupId;
                            t && this.audioGroupId !== t && (this.audioGroupId = t)
                        }
                        ,
                        l.onLevelLoaded = function(e) {
                            this._selectAudioGroup(e.level)
                        }
                        ,
                        l.onError = function(e) {
                            e.type === s.ErrorTypes.NETWORK_ERROR && (e.fatal && this.clearInterval(),
                            e.details === s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR && (d.logger.warn("Network failure on audio-track id:", e.context.id),
                            this._handleLoadError()))
                        }
                        ,
                        l._setAudioTrack = function(e) {
                            if (this._trackId === e && this.tracks[this._trackId].details)
                                d.logger.debug("Same id as current audio-track passed, and track details available -> no-op");
                            else if (e < 0 || e >= this.tracks.length)
                                d.logger.warn("Invalid id passed to audio-track controller");
                            else {
                                var t = this.tracks[e];
                                d.logger.log("Now switching to audio-track index " + e),
                                this.clearInterval(),
                                this._trackId = e;
                                var a = t.url
                                  , r = t.type
                                  , n = t.id;
                                this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING, {
                                    id: n,
                                    type: r,
                                    url: a
                                }),
                                this._loadTrackDetailsIfNeeded(t)
                            }
                        }
                        ,
                        l.doTick = function() {
                            this._updateTrack(this._trackId)
                        }
                        ,
                        l._selectAudioGroup = function(e) {
                            var t = this.hls.levels[e];
                            if (t && t.audioGroupIds) {
                                var a = t.audioGroupIds[t.urlId];
                                this.audioGroupId !== a && (this.audioGroupId = a,
                                this._selectInitialAudioTrack())
                            }
                        }
                        ,
                        l._selectInitialAudioTrack = function() {
                            var e = this
                              , t = this.tracks;
                            if (t.length) {
                                var a = this.tracks[this._trackId]
                                  , r = null;
                                if (a && (r = a.name),
                                this._selectDefaultTrack) {
                                    var n = t.filter((function(e) {
                                        return e.default
                                    }
                                    ));
                                    n.length ? t = n : d.logger.warn("No default audio tracks defined")
                                }
                                var i = !1
                                  , o = function() {
                                    t.forEach((function(t) {
                                        i || e.audioGroupId && t.groupId !== e.audioGroupId || r && r !== t.name || (e._setAudioTrack(t.id),
                                        i = !0)
                                    }
                                    ))
                                };
                                o(),
                                i || (r = null,
                                o()),
                                i || (d.logger.error("No track found for running audio group-ID: " + this.audioGroupId),
                                this.hls.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.MEDIA_ERROR,
                                    details: s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,
                                    fatal: !0
                                }))
                            }
                        }
                        ,
                        l._needsTrackLoading = function(e) {
                            var t = e.details
                              , a = e.url;
                            return !(t && !t.live || !a)
                        }
                        ,
                        l._loadTrackDetailsIfNeeded = function(e) {
                            if (this._needsTrackLoading(e)) {
                                var t = e.url
                                  , a = e.id;
                                d.logger.log("loading audio-track playlist for id: " + a),
                                this.hls.trigger(u.default.AUDIO_TRACK_LOADING, {
                                    url: t,
                                    id: a
                                })
                            }
                        }
                        ,
                        l._updateTrack = function(e) {
                            if (!(e < 0 || e >= this.tracks.length)) {
                                this.clearInterval(),
                                this._trackId = e,
                                d.logger.log("trying to update audio-track " + e);
                                var t = this.tracks[e];
                                this._loadTrackDetailsIfNeeded(t)
                            }
                        }
                        ,
                        l._handleLoadError = function() {
                            this.trackIdBlacklist[this._trackId] = !0;
                            var e = this._trackId
                              , t = this.tracks[e]
                              , a = t.name
                              , r = t.language
                              , n = t.groupId;
                            d.logger.warn("Loading failed on audio track id: " + e + ", group-id: " + n + ', name/language: "' + a + '" / "' + r + '"');
                            for (var i = e, o = 0; o < this.tracks.length; o++)
                                if (!this.trackIdBlacklist[o] && this.tracks[o].name === a) {
                                    i = o;
                                    break
                                }
                            i !== e ? (d.logger.log("Attempting audio-track fallback id:", i, "group-id:", this.tracks[i].groupId),
                            this._setAudioTrack(i)) : d.logger.warn('No fallback audio-track found for name/language: "' + a + '" / "' + r + '"')
                        }
                        ,
                        n = r,
                        (i = [{
                            key: "audioTracks",
                            get: function() {
                                return this.tracks
                            }
                        }, {
                            key: "audioTrack",
                            get: function() {
                                return this._trackId
                            },
                            set: function(e) {
                                this._setAudioTrack(e),
                                this._selectDefaultTrack = !1
                            }
                        }]) && Je(n.prototype, i),
                        o && Je(n, o),
                        r
                    }(pe);
                    function et(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var tt = window.performance
                      , at = function(e) {
                        var t, a;
                        function r(t, a) {
                            var r;
                            return (r = e.call(this, t, u.default.MEDIA_ATTACHED, u.default.MEDIA_DETACHING, u.default.AUDIO_TRACKS_UPDATED, u.default.AUDIO_TRACK_SWITCHING, u.default.AUDIO_TRACK_LOADED, u.default.KEY_LOADED, u.default.FRAG_LOADED, u.default.FRAG_PARSING_INIT_SEGMENT, u.default.FRAG_PARSING_DATA, u.default.FRAG_PARSED, u.default.ERROR, u.default.BUFFER_RESET, u.default.BUFFER_CREATED, u.default.BUFFER_APPENDED, u.default.BUFFER_FLUSHED, u.default.INIT_PTS_FOUND) || this).fragmentTracker = a,
                            r.config = t.config,
                            r.audioCodecSwap = !1,
                            r._state = ge,
                            r.initPTS = [],
                            r.waitingFragment = null,
                            r.videoTrackCC = null,
                            r.waitingVideoCC = null,
                            r
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n, i, o, c = r.prototype;
                        return c.onInitPtsFound = function(e) {
                            var t = e.id
                              , a = e.frag.cc
                              , r = e.initPTS;
                            "main" === t && (this.initPTS[a] = r,
                            this.videoTrackCC = a,
                            d.logger.log("InitPTS for cc: " + a + " found from main: " + r),
                            this.state === Pe && this.tick())
                        }
                        ,
                        c.startLoad = function(e) {
                            if (this.tracks) {
                                var t = this.lastCurrentTime;
                                this.stopLoad(),
                                this.setInterval(100),
                                this.fragLoadError = 0,
                                t > 0 && -1 === e ? (d.logger.log("audio:override startPosition with lastCurrentTime @" + t.toFixed(3)),
                                this.state = ye) : (this.lastCurrentTime = this.startPosition ? this.startPosition : e,
                                this.state = me),
                                this.nextLoadPosition = this.startPosition = this.lastCurrentTime,
                                this.tick()
                            } else
                                this.startPosition = e,
                                this.state = ge
                        }
                        ,
                        c.doTick = function() {
                            var e, t, a, r = this.hls, n = r.config;
                            switch (this.state) {
                            case Ie:
                            case _e:
                            case Ae:
                                break;
                            case me:
                                this.state = ke,
                                this.loadedmetadata = !1;
                                break;
                            case ye:
                                var i = this.tracks;
                                if (!i)
                                    break;
                                if (!this.media && (this.startFragRequested || !n.startFragPrefetch))
                                    break;
                                if (this.loadedmetadata)
                                    e = this.media.currentTime;
                                else if (void 0 === (e = this.nextLoadPosition))
                                    break;
                                var o = this.mediaBuffer ? this.mediaBuffer : this.media
                                  , s = this.videoBuffer ? this.videoBuffer : this.media
                                  , c = e < n.maxBufferHole ? Math.max(2, n.maxBufferHole) : n.maxBufferHole
                                  , f = K.bufferInfo(o, e, c)
                                  , h = K.bufferInfo(s, e, c)
                                  , p = f.len
                                  , g = f.end
                                  , m = this.fragPrevious
                                  , y = Math.min(n.maxBufferLength, n.maxMaxBufferLength)
                                  , _ = Math.max(y, h.len)
                                  , v = this.audioSwitch
                                  , b = this.trackId;
                                if ((p < _ || v) && b < i.length) {
                                    if (void 0 === (a = i[b].details)) {
                                        this.state = ke;
                                        break
                                    }
                                    if (!v && this._streamEnded(f, a))
                                        return this.hls.trigger(u.default.BUFFER_EOS, {
                                            type: "audio"
                                        }),
                                        void (this.state = Ce);
                                    var E, k = a.fragments, T = k.length, S = k[0].start, A = k[T - 1].start + k[T - 1].duration;
                                    if (v)
                                        if (a.live && !a.PTSKnown)
                                            d.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),
                                            g = 0;
                                        else if (g = e,
                                        a.PTSKnown && e < S) {
                                            if (!(f.end > S || f.nextStart))
                                                return;
                                            d.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),
                                            this.media.currentTime = S + .05
                                        }
                                    if (a.initSegment && !a.initSegment.data)
                                        E = a.initSegment;
                                    else if (g <= S) {
                                        if (E = k[0],
                                        null !== this.videoTrackCC && E.cc !== this.videoTrackCC && (E = function(e, t) {
                                            return V.search(e, (function(e) {
                                                return e.cc < t ? 1 : e.cc > t ? -1 : 0
                                            }
                                            ))
                                        }(k, this.videoTrackCC)),
                                        a.live && E.loadIdx && E.loadIdx === this.fragLoadIdx) {
                                            var C = f.nextStart ? f.nextStart : S;
                                            return d.logger.log("no alt audio available @currentTime:" + this.media.currentTime + ", seeking @" + (C + .05)),
                                            void (this.media.currentTime = C + .05)
                                        }
                                    } else {
                                        var I, P = n.maxFragLookUpTolerance, w = m ? k[m.sn - k[0].sn + 1] : void 0;
                                        g < A ? (g > A - P && (P = 0),
                                        I = w && !de(g, P, w) ? w : V.search(k, (function(e) {
                                            return de(g, P, e)
                                        }
                                        ))) : I = k[T - 1],
                                        I && (E = I,
                                        S = I.start,
                                        m && E.level === m.level && E.sn === m.sn && (E.sn < a.endSN ? (E = k[E.sn + 1 - a.startSN],
                                        this.fragmentTracker.getState(E) !== j && d.logger.log("SN just loaded, load next one: " + E.sn)) : E = null))
                                    }
                                    E && (E.encrypted ? (d.logger.log("Loading key for " + E.sn + " of [" + a.startSN + " ," + a.endSN + "],track " + b),
                                    this.state = ve,
                                    r.trigger(u.default.KEY_LOADING, {
                                        frag: E
                                    })) : (this.fragCurrent = E,
                                    (v || this.fragmentTracker.getState(E) === U) && (d.logger.log("Loading " + E.sn + ", cc: " + E.cc + " of [" + a.startSN + " ," + a.endSN + "],track " + b + ", " + (this.loadedmetadata ? "currentTime" : "nextLoadPosition") + ": " + e + ", bufferEnd: " + g.toFixed(3)),
                                    "initSegment" !== E.sn && (this.startFragRequested = !0),
                                    Object(l.isFiniteNumber)(E.sn) && (this.nextLoadPosition = E.start + E.duration),
                                    r.trigger(u.default.FRAG_LOADING, {
                                        frag: E
                                    }),
                                    this.state = be)))
                                }
                                break;
                            case ke:
                                (t = this.tracks[this.trackId]) && t.details && (this.state = ye);
                                break;
                            case Ee:
                                var M = tt.now()
                                  , R = this.retryDate
                                  , x = (o = this.media) && o.seeking;
                                (!R || M >= R || x) && (d.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),
                                this.state = ye);
                                break;
                            case Pe:
                                var D = this.waitingFragment;
                                if (D) {
                                    var O = D.frag.cc;
                                    if (void 0 !== this.initPTS[O])
                                        this.waitingFragment = null,
                                        this.state = be,
                                        this.onFragLoaded(D);
                                    else if (this.videoTrackCC !== this.waitingVideoCC)
                                        d.logger.log("Waiting fragment cc (" + O + ") cancelled because video is at cc " + this.videoTrackCC),
                                        this.clearWaitingFragment();
                                    else {
                                        var N = K.bufferInfo(this.mediaBuffer, this.media.currentTime, n.maxBufferHole);
                                        de(N.end, n.maxFragLookUpTolerance, D.frag) < 0 && (d.logger.log("Waiting fragment cc (" + O + ") @ " + D.frag.start + " cancelled because another fragment at " + N.end + " is needed"),
                                        this.clearWaitingFragment())
                                    }
                                } else
                                    this.state = ye
                            }
                        }
                        ,
                        c.clearWaitingFragment = function() {
                            var e = this.waitingFragment;
                            e && (this.fragmentTracker.removeFragment(e.frag),
                            this.waitingFragment = null,
                            this.waitingVideoCC = null,
                            this.state = ye)
                        }
                        ,
                        c.onMediaAttached = function(e) {
                            var t = this.media = this.mediaBuffer = e.media;
                            this.onvseeking = this.onMediaSeeking.bind(this),
                            this.onvended = this.onMediaEnded.bind(this),
                            t.addEventListener("seeking", this.onvseeking),
                            t.addEventListener("ended", this.onvended);
                            var a = this.config;
                            this.tracks && a.autoStartLoad && this.startLoad(a.startPosition)
                        }
                        ,
                        c.onMediaDetaching = function() {
                            var e = this.media;
                            e && e.ended && (d.logger.log("MSE detaching and video ended, reset startPosition"),
                            this.startPosition = this.lastCurrentTime = 0),
                            e && (e.removeEventListener("seeking", this.onvseeking),
                            e.removeEventListener("ended", this.onvended),
                            this.onvseeking = this.onvseeked = this.onvended = null),
                            this.media = this.mediaBuffer = this.videoBuffer = null,
                            this.loadedmetadata = !1,
                            this.fragmentTracker.removeAllFragments(),
                            this.stopLoad()
                        }
                        ,
                        c.onAudioTracksUpdated = function(e) {
                            d.logger.log("audio tracks updated"),
                            this.tracks = e.audioTracks
                        }
                        ,
                        c.onAudioTrackSwitching = function(e) {
                            var t = !!e.url;
                            this.trackId = e.id,
                            this.fragCurrent = null,
                            this.clearWaitingFragment(),
                            this.state = _e,
                            t ? this.setInterval(100) : this.demuxer && (this.demuxer.destroy(),
                            this.demuxer = null),
                            t && (this.audioSwitch = !0,
                            this.state = ye),
                            this.tick()
                        }
                        ,
                        c.onAudioTrackLoaded = function(e) {
                            var t = e.details
                              , a = e.id
                              , r = this.tracks[a]
                              , n = t.totalduration
                              , i = 0;
                            if (d.logger.log("track " + a + " loaded [" + t.startSN + "," + t.endSN + "],duration:" + n),
                            t.live) {
                                var o = r.details;
                                o && t.fragments.length > 0 ? (ae(o, t),
                                i = t.fragments[0].start,
                                t.PTSKnown ? d.logger.log("live audio playlist sliding:" + i.toFixed(3)) : d.logger.log("live audio playlist - outdated PTS, unknown sliding")) : (t.PTSKnown = !1,
                                d.logger.log("live audio playlist - first load, unknown sliding"))
                            } else
                                t.PTSKnown = !1;
                            if (r.details = t,
                            !this.startFragRequested) {
                                if (-1 === this.startPosition) {
                                    var s = t.startTimeOffset;
                                    Object(l.isFiniteNumber)(s) ? (d.logger.log("start time offset found in playlist, adjust startPosition to " + s),
                                    this.startPosition = s) : t.live ? (this.startPosition = this.computeLivePosition(i, t),
                                    d.logger.log("compute startPosition for audio-track to " + this.startPosition)) : this.startPosition = 0
                                }
                                this.nextLoadPosition = this.startPosition
                            }
                            this.state === ke && (this.state = ye),
                            this.tick()
                        }
                        ,
                        c.onKeyLoaded = function() {
                            this.state === ve && (this.state = ye,
                            this.tick())
                        }
                        ,
                        c.onFragLoaded = function(e) {
                            var t = this.fragCurrent
                              , a = e.frag;
                            if (this.state === be && t && "audio" === a.type && a.level === t.level && a.sn === t.sn) {
                                var r = this.tracks[this.trackId]
                                  , n = r.details
                                  , i = n.totalduration
                                  , o = t.level
                                  , s = t.sn
                                  , l = t.cc
                                  , c = this.config.defaultAudioCodec || r.audioCodec || "mp4a.40.2"
                                  , f = this.stats = e.stats;
                                if ("initSegment" === s)
                                    this.state = ye,
                                    f.tparsed = f.tbuffered = tt.now(),
                                    n.initSegment.data = e.payload,
                                    this.hls.trigger(u.default.FRAG_BUFFERED, {
                                        stats: f,
                                        frag: t,
                                        id: "audio"
                                    }),
                                    this.tick();
                                else {
                                    this.state = Te,
                                    this.appended = !1,
                                    this.demuxer || (this.demuxer = new J(this.hls,"audio"));
                                    var h = this.initPTS[l]
                                      , p = n.initSegment ? n.initSegment.data : [];
                                    void 0 !== h ? (this.pendingBuffering = !0,
                                    d.logger.log("Demuxing " + s + " of [" + n.startSN + " ," + n.endSN + "],track " + o),
                                    this.demuxer.push(e.payload, p, c, null, t, i, !1, h)) : (d.logger.log("Unknown video PTS for cc " + l + ", waiting for video PTS before demuxing audio frag " + s + " of [" + n.startSN + " ," + n.endSN + "],track " + o),
                                    this.waitingFragment = e,
                                    this.waitingVideoCC = this.videoTrackCC,
                                    this.state = Pe)
                                }
                            }
                            this.fragLoadError = 0
                        }
                        ,
                        c.onFragParsingInitSegment = function(e) {
                            var t = this.fragCurrent
                              , a = e.frag;
                            if (t && "audio" === e.id && a.sn === t.sn && a.level === t.level && this.state === Te) {
                                var r, n = e.tracks;
                                if (n.video && delete n.video,
                                r = n.audio) {
                                    r.levelCodec = r.codec,
                                    r.id = e.id,
                                    this.hls.trigger(u.default.BUFFER_CODECS, n),
                                    d.logger.log("audio track:audio,container:" + r.container + ",codecs[level/parsed]=[" + r.levelCodec + "/" + r.codec + "]");
                                    var i = r.initSegment;
                                    if (i) {
                                        var o = {
                                            type: "audio",
                                            data: i,
                                            parent: "audio",
                                            content: "initSegment"
                                        };
                                        this.audioSwitch ? this.pendingData = [o] : (this.appended = !0,
                                        this.pendingBuffering = !0,
                                        this.hls.trigger(u.default.BUFFER_APPENDING, o))
                                    }
                                    this.tick()
                                }
                            }
                        }
                        ,
                        c.onFragParsingData = function(e) {
                            var t = this
                              , a = this.fragCurrent
                              , r = e.frag;
                            if (a && "audio" === e.id && "audio" === e.type && r.sn === a.sn && r.level === a.level && this.state === Te) {
                                var n = this.trackId
                                  , i = this.tracks[n]
                                  , o = this.hls;
                                Object(l.isFiniteNumber)(e.endPTS) || (e.endPTS = e.startPTS + a.duration,
                                e.endDTS = e.startDTS + a.duration),
                                a.addElementaryStream(g.AUDIO),
                                d.logger.log("parsed " + e.type + ",PTS:[" + e.startPTS.toFixed(3) + "," + e.endPTS.toFixed(3) + "],DTS:[" + e.startDTS.toFixed(3) + "/" + e.endDTS.toFixed(3) + "],nb:" + e.nb),
                                te(i.details, a, e.startPTS, e.endPTS);
                                var c = this.media
                                  , f = !1;
                                if (this.audioSwitch)
                                    if (c && c.readyState) {
                                        var h = c.currentTime;
                                        d.logger.log("switching audio track : currentTime:" + h),
                                        h >= e.startPTS && (d.logger.log("switching audio track : flushing all audio"),
                                        this.state = Ae,
                                        o.trigger(u.default.BUFFER_FLUSHING, {
                                            startOffset: 0,
                                            endOffset: Number.POSITIVE_INFINITY,
                                            type: "audio"
                                        }),
                                        f = !0,
                                        this.audioSwitch = !1,
                                        o.trigger(u.default.AUDIO_TRACK_SWITCHED, {
                                            id: n
                                        }))
                                    } else
                                        this.audioSwitch = !1,
                                        o.trigger(u.default.AUDIO_TRACK_SWITCHED, {
                                            id: n
                                        });
                                var p = this.pendingData;
                                if (!p)
                                    return d.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),
                                    void o.trigger(u.default.ERROR, {
                                        type: s.ErrorTypes.MEDIA_ERROR,
                                        details: null,
                                        fatal: !0
                                    });
                                this.audioSwitch || ([e.data1, e.data2].forEach((function(t) {
                                    t && t.length && p.push({
                                        type: e.type,
                                        data: t,
                                        parent: "audio",
                                        content: "data"
                                    })
                                }
                                )),
                                !f && p.length && (p.forEach((function(e) {
                                    t.state === Te && (t.pendingBuffering = !0,
                                    t.hls.trigger(u.default.BUFFER_APPENDING, e))
                                }
                                )),
                                this.pendingData = [],
                                this.appended = !0)),
                                this.tick()
                            }
                        }
                        ,
                        c.onFragParsed = function(e) {
                            var t = this.fragCurrent
                              , a = e.frag;
                            t && "audio" === e.id && a.sn === t.sn && a.level === t.level && this.state === Te && (this.stats.tparsed = tt.now(),
                            this.state = Se,
                            this._checkAppendedParsed())
                        }
                        ,
                        c.onBufferReset = function() {
                            this.mediaBuffer = this.videoBuffer = null,
                            this.loadedmetadata = !1
                        }
                        ,
                        c.onBufferCreated = function(e) {
                            var t = e.tracks.audio;
                            t && (this.mediaBuffer = t.buffer,
                            this.loadedmetadata = !0),
                            e.tracks.video && (this.videoBuffer = e.tracks.video.buffer)
                        }
                        ,
                        c.onBufferAppended = function(e) {
                            if ("audio" === e.parent) {
                                var t = this.state;
                                t !== Te && t !== Se || (this.pendingBuffering = e.pending > 0,
                                this._checkAppendedParsed())
                            }
                        }
                        ,
                        c._checkAppendedParsed = function() {
                            if (!(this.state !== Se || this.appended && this.pendingBuffering)) {
                                var e = this.fragCurrent
                                  , t = this.stats
                                  , a = this.hls;
                                if (e) {
                                    this.fragPrevious = e,
                                    t.tbuffered = tt.now(),
                                    a.trigger(u.default.FRAG_BUFFERED, {
                                        stats: t,
                                        frag: e,
                                        id: "audio"
                                    });
                                    var r = this.mediaBuffer ? this.mediaBuffer : this.media;
                                    r && d.logger.log("audio buffered : " + ie.toString(r.buffered)),
                                    this.audioSwitch && this.appended && (this.audioSwitch = !1,
                                    a.trigger(u.default.AUDIO_TRACK_SWITCHED, {
                                        id: this.trackId
                                    })),
                                    this.state = ye
                                }
                                this.tick()
                            }
                        }
                        ,
                        c.onError = function(e) {
                            var t = e.frag;
                            if (!t || "audio" === t.type)
                                switch (e.details) {
                                case s.ErrorDetails.FRAG_LOAD_ERROR:
                                case s.ErrorDetails.FRAG_LOAD_TIMEOUT:
                                    var a = e.frag;
                                    if (a && "audio" !== a.type)
                                        break;
                                    if (!e.fatal) {
                                        var r = this.fragLoadError;
                                        r ? r++ : r = 1;
                                        var n = this.config;
                                        if (r <= n.fragLoadingMaxRetry) {
                                            this.fragLoadError = r;
                                            var i = Math.min(Math.pow(2, r - 1) * n.fragLoadingRetryDelay, n.fragLoadingMaxRetryTimeout);
                                            d.logger.warn("AudioStreamController: frag loading failed, retry in " + i + " ms"),
                                            this.retryDate = tt.now() + i,
                                            this.state = Ee
                                        } else
                                            d.logger.error("AudioStreamController: " + e.details + " reaches max retry, redispatch as fatal ..."),
                                            e.fatal = !0,
                                            this.state = Ie
                                    }
                                    break;
                                case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:
                                case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:
                                case s.ErrorDetails.KEY_LOAD_ERROR:
                                case s.ErrorDetails.KEY_LOAD_TIMEOUT:
                                    this.state !== Ie && (this.state = e.fatal ? Ie : ye,
                                    d.logger.warn("AudioStreamController: " + e.details + " while loading frag, now switching to " + this.state + " state ..."));
                                    break;
                                case s.ErrorDetails.BUFFER_FULL_ERROR:
                                    if ("audio" === e.parent && (this.state === Te || this.state === Se)) {
                                        var o = this.mediaBuffer
                                          , l = this.media.currentTime;
                                        if (o && K.isBuffered(o, l) && K.isBuffered(o, l + .5)) {
                                            var c = this.config;
                                            c.maxMaxBufferLength >= c.maxBufferLength && (c.maxMaxBufferLength /= 2,
                                            d.logger.warn("AudioStreamController: reduce max buffer length to " + c.maxMaxBufferLength + "s")),
                                            this.state = ye
                                        } else
                                            d.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),
                                            this.fragCurrent = null,
                                            this.state = Ae,
                                            this.hls.trigger(u.default.BUFFER_FLUSHING, {
                                                startOffset: 0,
                                                endOffset: Number.POSITIVE_INFINITY,
                                                type: "audio"
                                            })
                                    }
                                }
                        }
                        ,
                        c.onBufferFlushed = function() {
                            var e = this
                              , t = this.pendingData;
                            t && t.length ? (d.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),
                            t.forEach((function(t) {
                                e.hls.trigger(u.default.BUFFER_APPENDING, t)
                            }
                            )),
                            this.appended = !0,
                            this.pendingData = [],
                            this.state = Se) : (this.state = ye,
                            this.fragPrevious = null,
                            this.tick())
                        }
                        ,
                        n = r,
                        (i = [{
                            key: "state",
                            set: function(e) {
                                if (this.state !== e) {
                                    var t = this.state;
                                    this._state = e,
                                    d.logger.log("audio stream:" + t + "->" + e)
                                }
                            },
                            get: function() {
                                return this._state
                            }
                        }]) && et(n.prototype, i),
                        o && et(n, o),
                        r
                    }(Me)
                      , rt = function() {
                        if ("undefined" != typeof window && window.VTTCue)
                            return window.VTTCue;
                        var e = {
                            "": !0,
                            lr: !0,
                            rl: !0
                        }
                          , t = {
                            start: !0,
                            middle: !0,
                            end: !0,
                            left: !0,
                            right: !0
                        };
                        function a(e) {
                            return "string" == typeof e && !!t[e.toLowerCase()] && e.toLowerCase()
                        }
                        function r(e) {
                            for (var t = 1; t < arguments.length; t++) {
                                var a = arguments[t];
                                for (var r in a)
                                    e[r] = a[r]
                            }
                            return e
                        }
                        function n(t, n, i) {
                            var o = this
                              , s = {
                                enumerable: !0
                            };
                            o.hasBeenReset = !1;
                            var l = ""
                              , u = !1
                              , d = t
                              , c = n
                              , f = i
                              , h = null
                              , p = ""
                              , g = !0
                              , m = "auto"
                              , y = "start"
                              , _ = 50
                              , v = "middle"
                              , b = 50
                              , E = "middle";
                            Object.defineProperty(o, "id", r({}, s, {
                                get: function() {
                                    return l
                                },
                                set: function(e) {
                                    l = "" + e
                                }
                            })),
                            Object.defineProperty(o, "pauseOnExit", r({}, s, {
                                get: function() {
                                    return u
                                },
                                set: function(e) {
                                    u = !!e
                                }
                            })),
                            Object.defineProperty(o, "startTime", r({}, s, {
                                get: function() {
                                    return d
                                },
                                set: function(e) {
                                    if ("number" != typeof e)
                                        throw new TypeError("Start time must be set to a number.");
                                    d = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "endTime", r({}, s, {
                                get: function() {
                                    return c
                                },
                                set: function(e) {
                                    if ("number" != typeof e)
                                        throw new TypeError("End time must be set to a number.");
                                    c = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "text", r({}, s, {
                                get: function() {
                                    return f
                                },
                                set: function(e) {
                                    f = "" + e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "region", r({}, s, {
                                get: function() {
                                    return h
                                },
                                set: function(e) {
                                    h = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "vertical", r({}, s, {
                                get: function() {
                                    return p
                                },
                                set: function(t) {
                                    var a = function(t) {
                                        return "string" == typeof t && !!e[t.toLowerCase()] && t.toLowerCase()
                                    }(t);
                                    if (!1 === a)
                                        throw new SyntaxError("An invalid or illegal string was specified.");
                                    p = a,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "snapToLines", r({}, s, {
                                get: function() {
                                    return g
                                },
                                set: function(e) {
                                    g = !!e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "line", r({}, s, {
                                get: function() {
                                    return m
                                },
                                set: function(e) {
                                    if ("number" != typeof e && "auto" !== e)
                                        throw new SyntaxError("An invalid number or illegal string was specified.");
                                    m = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "lineAlign", r({}, s, {
                                get: function() {
                                    return y
                                },
                                set: function(e) {
                                    var t = a(e);
                                    if (!t)
                                        throw new SyntaxError("An invalid or illegal string was specified.");
                                    y = t,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "position", r({}, s, {
                                get: function() {
                                    return _
                                },
                                set: function(e) {
                                    if (e < 0 || e > 100)
                                        throw new Error("Position must be between 0 and 100.");
                                    _ = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "positionAlign", r({}, s, {
                                get: function() {
                                    return v
                                },
                                set: function(e) {
                                    var t = a(e);
                                    if (!t)
                                        throw new SyntaxError("An invalid or illegal string was specified.");
                                    v = t,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "size", r({}, s, {
                                get: function() {
                                    return b
                                },
                                set: function(e) {
                                    if (e < 0 || e > 100)
                                        throw new Error("Size must be between 0 and 100.");
                                    b = e,
                                    this.hasBeenReset = !0
                                }
                            })),
                            Object.defineProperty(o, "align", r({}, s, {
                                get: function() {
                                    return E
                                },
                                set: function(e) {
                                    var t = a(e);
                                    if (!t)
                                        throw new SyntaxError("An invalid or illegal string was specified.");
                                    E = t,
                                    this.hasBeenReset = !0
                                }
                            })),
                            o.displayState = void 0
                        }
                        return n.prototype.getCueAsHTML = function() {
                            return window.WebVTT.convertCueToDOMTree(window, this.text)
                        }
                        ,
                        n
                    }()
                      , nt = function() {
                        return {
                            decode: function(e) {
                                if (!e)
                                    return "";
                                if ("string" != typeof e)
                                    throw new Error("Error - expected string data.");
                                return decodeURIComponent(encodeURIComponent(e))
                            }
                        }
                    };
                    function it() {
                        this.window = window,
                        this.state = "INITIAL",
                        this.buffer = "",
                        this.decoder = new nt,
                        this.regionList = []
                    }
                    function ot() {
                        this.values = Object.create(null)
                    }
                    function st(e, t, a, r) {
                        var n = r ? e.split(r) : [e];
                        for (var i in n)
                            if ("string" == typeof n[i]) {
                                var o = n[i].split(a);
                                2 === o.length && t(o[0], o[1])
                            }
                    }
                    ot.prototype = {
                        set: function(e, t) {
                            this.get(e) || "" === t || (this.values[e] = t)
                        },
                        get: function(e, t, a) {
                            return a ? this.has(e) ? this.values[e] : t[a] : this.has(e) ? this.values[e] : t
                        },
                        has: function(e) {
                            return e in this.values
                        },
                        alt: function(e, t, a) {
                            for (var r = 0; r < a.length; ++r)
                                if (t === a[r]) {
                                    this.set(e, t);
                                    break
                                }
                        },
                        integer: function(e, t) {
                            /^-?\d+$/.test(t) && this.set(e, parseInt(t, 10))
                        },
                        percent: function(e, t) {
                            return !!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/) && (t = parseFloat(t)) >= 0 && t <= 100) && (this.set(e, t),
                            !0)
                        }
                    };
                    var lt = new rt(0,0,0)
                      , ut = "middle" === lt.align ? "middle" : "center";
                    function dt(e, t, a) {
                        var r = e;
                        function n() {
                            var t = function(e) {
                                function t(e, t, a, r) {
                                    return 3600 * (0 | e) + 60 * (0 | t) + (0 | a) + (0 | r) / 1e3
                                }
                                var a = e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
                                return a ? a[3] ? t(a[1], a[2], a[3].replace(":", ""), a[4]) : a[1] > 59 ? t(a[1], a[2], 0, a[4]) : t(0, a[1], a[2], a[4]) : null
                            }(e);
                            if (null === t)
                                throw new Error("Malformed timestamp: " + r);
                            return e = e.replace(/^[^\sa-zA-Z-]+/, ""),
                            t
                        }
                        function i() {
                            e = e.replace(/^\s+/, "")
                        }
                        if (i(),
                        t.startTime = n(),
                        i(),
                        "--\x3e" !== e.substr(0, 3))
                            throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): " + r);
                        e = e.substr(3),
                        i(),
                        t.endTime = n(),
                        i(),
                        function(e, t) {
                            var r = new ot;
                            st(e, (function(e, t) {
                                switch (e) {
                                case "region":
                                    for (var n = a.length - 1; n >= 0; n--)
                                        if (a[n].id === t) {
                                            r.set(e, a[n].region);
                                            break
                                        }
                                    break;
                                case "vertical":
                                    r.alt(e, t, ["rl", "lr"]);
                                    break;
                                case "line":
                                    var i = t.split(",")
                                      , o = i[0];
                                    r.integer(e, o),
                                    r.percent(e, o) && r.set("snapToLines", !1),
                                    r.alt(e, o, ["auto"]),
                                    2 === i.length && r.alt("lineAlign", i[1], ["start", ut, "end"]);
                                    break;
                                case "position":
                                    i = t.split(","),
                                    r.percent(e, i[0]),
                                    2 === i.length && r.alt("positionAlign", i[1], ["start", ut, "end", "line-left", "line-right", "auto"]);
                                    break;
                                case "size":
                                    r.percent(e, t);
                                    break;
                                case "align":
                                    r.alt(e, t, ["start", ut, "end", "left", "right"])
                                }
                            }
                            ), /:/, /\s/),
                            t.region = r.get("region", null),
                            t.vertical = r.get("vertical", "");
                            var n = r.get("line", "auto");
                            "auto" === n && -1 === lt.line && (n = -1),
                            t.line = n,
                            t.lineAlign = r.get("lineAlign", "start"),
                            t.snapToLines = r.get("snapToLines", !0),
                            t.size = r.get("size", 100),
                            t.align = r.get("align", ut);
                            var i = r.get("position", "auto");
                            "auto" === i && 50 === lt.position && (i = "start" === t.align || "left" === t.align ? 0 : "end" === t.align || "right" === t.align ? 100 : 50),
                            t.position = i
                        }(e, t)
                    }
                    function ct(e) {
                        return e.replace(/<br(?: \/)?>/gi, "\n")
                    }
                    it.prototype = {
                        parse: function(e) {
                            var t = this;
                            function a() {
                                var e = t.buffer
                                  , a = 0;
                                for (e = ct(e); a < e.length && "\r" !== e[a] && "\n" !== e[a]; )
                                    ++a;
                                var r = e.substr(0, a);
                                return "\r" === e[a] && ++a,
                                "\n" === e[a] && ++a,
                                t.buffer = e.substr(a),
                                r
                            }
                            e && (t.buffer += t.decoder.decode(e, {
                                stream: !0
                            }));
                            try {
                                var r;
                                if ("INITIAL" === t.state) {
                                    if (!/\r\n|\n/.test(t.buffer))
                                        return this;
                                    var n = (r = a()).match(/^()?WEBVTT([ \t].*)?$/);
                                    if (!n || !n[0])
                                        throw new Error("Malformed WebVTT signature.");
                                    t.state = "HEADER"
                                }
                                for (var i = !1; t.buffer; ) {
                                    if (!/\r\n|\n/.test(t.buffer))
                                        return this;
                                    switch (i ? i = !1 : r = a(),
                                    t.state) {
                                    case "HEADER":
                                        /:/.test(r) ? st(r, (function(e, t) {}
                                        ), /:/) : r || (t.state = "ID");
                                        continue;
                                    case "NOTE":
                                        r || (t.state = "ID");
                                        continue;
                                    case "ID":
                                        if (/^NOTE($|[ \t])/.test(r)) {
                                            t.state = "NOTE";
                                            break
                                        }
                                        if (!r)
                                            continue;
                                        if (t.cue = new rt(0,0,""),
                                        t.state = "CUE",
                                        -1 === r.indexOf("--\x3e")) {
                                            t.cue.id = r;
                                            continue
                                        }
                                    case "CUE":
                                        try {
                                            dt(r, t.cue, t.regionList)
                                        } catch (e) {
                                            t.cue = null,
                                            t.state = "BADCUE";
                                            continue
                                        }
                                        t.state = "CUETEXT";
                                        continue;
                                    case "CUETEXT":
                                        var o = -1 !== r.indexOf("--\x3e");
                                        if (!r || o && (i = !0)) {
                                            t.oncue && t.oncue(t.cue),
                                            t.cue = null,
                                            t.state = "ID";
                                            continue
                                        }
                                        t.cue.text && (t.cue.text += "\n"),
                                        t.cue.text += r;
                                        continue;
                                    case "BADCUE":
                                        r || (t.state = "ID");
                                        continue
                                    }
                                }
                            } catch (e) {
                                "CUETEXT" === t.state && t.cue && t.oncue && t.oncue(t.cue),
                                t.cue = null,
                                t.state = "INITIAL" === t.state ? "BADWEBVTT" : "BADCUE"
                            }
                            return this
                        },
                        flush: function() {
                            try {
                                if (this.buffer += this.decoder.decode(),
                                (this.cue || "HEADER" === this.state) && (this.buffer += "\n\n",
                                this.parse()),
                                "INITIAL" === this.state)
                                    throw new Error("Malformed WebVTT signature.")
                            } catch (e) {
                                throw e
                            }
                            return this.onflush && this.onflush(),
                            this
                        }
                    };
                    var ft = it;
                    function ht(e, t, a, r) {
                        for (var n, i, o, s, l, u = [], d = window.VTTCue || TextTrackCue, c = 0; c < r.rows.length; c++)
                            if (o = !0,
                            s = 0,
                            l = "",
                            !(n = r.rows[c]).isEmpty()) {
                                for (var f = 0; f < n.chars.length; f++)
                                    n.chars[f].uchar.match(/\s/) && o ? s++ : (l += n.chars[f].uchar,
                                    o = !1);
                                n.cueStartTime = t,
                                t === a && (a += 1e-4),
                                i = new d(t,a,ct(l.trim())),
                                s >= 16 ? s-- : s++,
                                navigator.userAgent.match(/Firefox\//) ? i.line = c + 1 : i.line = c > 7 ? c - 2 : c + 1,
                                i.align = "left",
                                i.position = Math.max(0, Math.min(100, s / 32 * 100)),
                                u.push(i),
                                e && e.addCue(i)
                            }
                        return u
                    }
                    var pt, gt = {
                        42: 225,
                        92: 233,
                        94: 237,
                        95: 243,
                        96: 250,
                        123: 231,
                        124: 247,
                        125: 209,
                        126: 241,
                        127: 9608,
                        128: 174,
                        129: 176,
                        130: 189,
                        131: 191,
                        132: 8482,
                        133: 162,
                        134: 163,
                        135: 9834,
                        136: 224,
                        137: 32,
                        138: 232,
                        139: 226,
                        140: 234,
                        141: 238,
                        142: 244,
                        143: 251,
                        144: 193,
                        145: 201,
                        146: 211,
                        147: 218,
                        148: 220,
                        149: 252,
                        150: 8216,
                        151: 161,
                        152: 42,
                        153: 8217,
                        154: 9473,
                        155: 169,
                        156: 8480,
                        157: 8226,
                        158: 8220,
                        159: 8221,
                        160: 192,
                        161: 194,
                        162: 199,
                        163: 200,
                        164: 202,
                        165: 203,
                        166: 235,
                        167: 206,
                        168: 207,
                        169: 239,
                        170: 212,
                        171: 217,
                        172: 249,
                        173: 219,
                        174: 171,
                        175: 187,
                        176: 195,
                        177: 227,
                        178: 205,
                        179: 204,
                        180: 236,
                        181: 210,
                        182: 242,
                        183: 213,
                        184: 245,
                        185: 123,
                        186: 125,
                        187: 92,
                        188: 94,
                        189: 95,
                        190: 124,
                        191: 8764,
                        192: 196,
                        193: 228,
                        194: 214,
                        195: 246,
                        196: 223,
                        197: 165,
                        198: 164,
                        199: 9475,
                        200: 197,
                        201: 229,
                        202: 216,
                        203: 248,
                        204: 9487,
                        205: 9491,
                        206: 9495,
                        207: 9499
                    }, mt = function(e) {
                        var t = e;
                        return gt.hasOwnProperty(e) && (t = gt[e]),
                        String.fromCharCode(t)
                    }, yt = {
                        17: 1,
                        18: 3,
                        21: 5,
                        22: 7,
                        23: 9,
                        16: 11,
                        19: 12,
                        20: 14
                    }, _t = {
                        17: 2,
                        18: 4,
                        21: 6,
                        22: 8,
                        23: 10,
                        19: 13,
                        20: 15
                    }, vt = {
                        25: 1,
                        26: 3,
                        29: 5,
                        30: 7,
                        31: 9,
                        24: 11,
                        27: 12,
                        28: 14
                    }, bt = {
                        25: 2,
                        26: 4,
                        29: 6,
                        30: 8,
                        31: 10,
                        27: 13,
                        28: 15
                    }, Et = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"];
                    !function(e) {
                        e[e.ERROR = 0] = "ERROR",
                        e[e.TEXT = 1] = "TEXT",
                        e[e.WARNING = 2] = "WARNING",
                        e[e.INFO = 2] = "INFO",
                        e[e.DEBUG = 3] = "DEBUG",
                        e[e.DATA = 3] = "DATA"
                    }(pt || (pt = {}));
                    var kt = function() {
                        function e() {
                            this.time = null,
                            this.verboseLevel = pt.ERROR
                        }
                        return e.prototype.log = function(e, t) {
                            this.verboseLevel >= e && d.logger.log(this.time + " [" + e + "] " + t)
                        }
                        ,
                        e
                    }()
                      , Tt = function(e) {
                        for (var t = [], a = 0; a < e.length; a++)
                            t.push(e[a].toString(16));
                        return t
                    }
                      , St = function() {
                        function e(e, t, a, r, n) {
                            this.foreground = void 0,
                            this.underline = void 0,
                            this.italics = void 0,
                            this.background = void 0,
                            this.flash = void 0,
                            this.foreground = e || "white",
                            this.underline = t || !1,
                            this.italics = a || !1,
                            this.background = r || "black",
                            this.flash = n || !1
                        }
                        var t = e.prototype;
                        return t.reset = function() {
                            this.foreground = "white",
                            this.underline = !1,
                            this.italics = !1,
                            this.background = "black",
                            this.flash = !1
                        }
                        ,
                        t.setStyles = function(e) {
                            for (var t = ["foreground", "underline", "italics", "background", "flash"], a = 0; a < t.length; a++) {
                                var r = t[a];
                                e.hasOwnProperty(r) && (this[r] = e[r])
                            }
                        }
                        ,
                        t.isDefault = function() {
                            return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
                        }
                        ,
                        t.equals = function(e) {
                            return this.foreground === e.foreground && this.underline === e.underline && this.italics === e.italics && this.background === e.background && this.flash === e.flash
                        }
                        ,
                        t.copy = function(e) {
                            this.foreground = e.foreground,
                            this.underline = e.underline,
                            this.italics = e.italics,
                            this.background = e.background,
                            this.flash = e.flash
                        }
                        ,
                        t.toString = function() {
                            return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
                        }
                        ,
                        e
                    }()
                      , At = function() {
                        function e(e, t, a, r, n, i) {
                            this.uchar = void 0,
                            this.penState = void 0,
                            this.uchar = e || " ",
                            this.penState = new St(t,a,r,n,i)
                        }
                        var t = e.prototype;
                        return t.reset = function() {
                            this.uchar = " ",
                            this.penState.reset()
                        }
                        ,
                        t.setChar = function(e, t) {
                            this.uchar = e,
                            this.penState.copy(t)
                        }
                        ,
                        t.setPenState = function(e) {
                            this.penState.copy(e)
                        }
                        ,
                        t.equals = function(e) {
                            return this.uchar === e.uchar && this.penState.equals(e.penState)
                        }
                        ,
                        t.copy = function(e) {
                            this.uchar = e.uchar,
                            this.penState.copy(e.penState)
                        }
                        ,
                        t.isEmpty = function() {
                            return " " === this.uchar && this.penState.isDefault()
                        }
                        ,
                        e
                    }()
                      , Ct = function() {
                        function e(e) {
                            this.chars = void 0,
                            this.pos = void 0,
                            this.currPenState = void 0,
                            this.cueStartTime = void 0,
                            this.logger = void 0,
                            this.chars = [];
                            for (var t = 0; t < 100; t++)
                                this.chars.push(new At);
                            this.logger = e,
                            this.pos = 0,
                            this.currPenState = new St
                        }
                        var t = e.prototype;
                        return t.equals = function(e) {
                            for (var t = !0, a = 0; a < 100; a++)
                                if (!this.chars[a].equals(e.chars[a])) {
                                    t = !1;
                                    break
                                }
                            return t
                        }
                        ,
                        t.copy = function(e) {
                            for (var t = 0; t < 100; t++)
                                this.chars[t].copy(e.chars[t])
                        }
                        ,
                        t.isEmpty = function() {
                            for (var e = !0, t = 0; t < 100; t++)
                                if (!this.chars[t].isEmpty()) {
                                    e = !1;
                                    break
                                }
                            return e
                        }
                        ,
                        t.setCursor = function(e) {
                            this.pos !== e && (this.pos = e),
                            this.pos < 0 ? (this.logger.log(pt.DEBUG, "Negative cursor position " + this.pos),
                            this.pos = 0) : this.pos > 100 && (this.logger.log(pt.DEBUG, "Too large cursor position " + this.pos),
                            this.pos = 100)
                        }
                        ,
                        t.moveCursor = function(e) {
                            var t = this.pos + e;
                            if (e > 1)
                                for (var a = this.pos + 1; a < t + 1; a++)
                                    this.chars[a].setPenState(this.currPenState);
                            this.setCursor(t)
                        }
                        ,
                        t.backSpace = function() {
                            this.moveCursor(-1),
                            this.chars[this.pos].setChar(" ", this.currPenState)
                        }
                        ,
                        t.insertChar = function(e) {
                            e >= 144 && this.backSpace();
                            var t = mt(e);
                            this.pos >= 100 ? this.logger.log(pt.ERROR, "Cannot insert " + e.toString(16) + " (" + t + ") at position " + this.pos + ". Skipping it!") : (this.chars[this.pos].setChar(t, this.currPenState),
                            this.moveCursor(1))
                        }
                        ,
                        t.clearFromPos = function(e) {
                            var t;
                            for (t = e; t < 100; t++)
                                this.chars[t].reset()
                        }
                        ,
                        t.clear = function() {
                            this.clearFromPos(0),
                            this.pos = 0,
                            this.currPenState.reset()
                        }
                        ,
                        t.clearToEndOfRow = function() {
                            this.clearFromPos(this.pos)
                        }
                        ,
                        t.getTextString = function() {
                            for (var e = [], t = !0, a = 0; a < 100; a++) {
                                var r = this.chars[a].uchar;
                                " " !== r && (t = !1),
                                e.push(r)
                            }
                            return t ? "" : e.join("")
                        }
                        ,
                        t.setPenStyles = function(e) {
                            this.currPenState.setStyles(e),
                            this.chars[this.pos].setPenState(this.currPenState)
                        }
                        ,
                        e
                    }()
                      , It = function() {
                        function e(e) {
                            this.rows = void 0,
                            this.currRow = void 0,
                            this.nrRollUpRows = void 0,
                            this.lastOutputScreen = void 0,
                            this.logger = void 0,
                            this.rows = [];
                            for (var t = 0; t < 15; t++)
                                this.rows.push(new Ct(e));
                            this.logger = e,
                            this.currRow = 14,
                            this.nrRollUpRows = null,
                            this.lastOutputScreen = null,
                            this.reset()
                        }
                        var t = e.prototype;
                        return t.reset = function() {
                            for (var e = 0; e < 15; e++)
                                this.rows[e].clear();
                            this.currRow = 14
                        }
                        ,
                        t.equals = function(e) {
                            for (var t = !0, a = 0; a < 15; a++)
                                if (!this.rows[a].equals(e.rows[a])) {
                                    t = !1;
                                    break
                                }
                            return t
                        }
                        ,
                        t.copy = function(e) {
                            for (var t = 0; t < 15; t++)
                                this.rows[t].copy(e.rows[t])
                        }
                        ,
                        t.isEmpty = function() {
                            for (var e = !0, t = 0; t < 15; t++)
                                if (!this.rows[t].isEmpty()) {
                                    e = !1;
                                    break
                                }
                            return e
                        }
                        ,
                        t.backSpace = function() {
                            this.rows[this.currRow].backSpace()
                        }
                        ,
                        t.clearToEndOfRow = function() {
                            this.rows[this.currRow].clearToEndOfRow()
                        }
                        ,
                        t.insertChar = function(e) {
                            this.rows[this.currRow].insertChar(e)
                        }
                        ,
                        t.setPen = function(e) {
                            this.rows[this.currRow].setPenStyles(e)
                        }
                        ,
                        t.moveCursor = function(e) {
                            this.rows[this.currRow].moveCursor(e)
                        }
                        ,
                        t.setCursor = function(e) {
                            this.logger.log(pt.INFO, "setCursor: " + e),
                            this.rows[this.currRow].setCursor(e)
                        }
                        ,
                        t.setPAC = function(e) {
                            this.logger.log(pt.INFO, "pacData = " + JSON.stringify(e));
                            var t = e.row - 1;
                            if (this.nrRollUpRows && t < this.nrRollUpRows - 1 && (t = this.nrRollUpRows - 1),
                            this.nrRollUpRows && this.currRow !== t) {
                                for (var a = 0; a < 15; a++)
                                    this.rows[a].clear();
                                var r = this.currRow + 1 - this.nrRollUpRows
                                  , n = this.lastOutputScreen;
                                if (n) {
                                    var i = n.rows[r].cueStartTime
                                      , o = this.logger.time;
                                    if (i && null !== o && i < o)
                                        for (var s = 0; s < this.nrRollUpRows; s++)
                                            this.rows[t - this.nrRollUpRows + s + 1].copy(n.rows[r + s])
                                }
                            }
                            this.currRow = t;
                            var l = this.rows[this.currRow];
                            if (null !== e.indent) {
                                var u = e.indent
                                  , d = Math.max(u - 1, 0);
                                l.setCursor(e.indent),
                                e.color = l.chars[d].penState.foreground
                            }
                            var c = {
                                foreground: e.color,
                                underline: e.underline,
                                italics: e.italics,
                                background: "black",
                                flash: !1
                            };
                            this.setPen(c)
                        }
                        ,
                        t.setBkgData = function(e) {
                            this.logger.log(pt.INFO, "bkgData = " + JSON.stringify(e)),
                            this.backSpace(),
                            this.setPen(e),
                            this.insertChar(32)
                        }
                        ,
                        t.setRollUpRows = function(e) {
                            this.nrRollUpRows = e
                        }
                        ,
                        t.rollUp = function() {
                            if (null !== this.nrRollUpRows) {
                                this.logger.log(pt.TEXT, this.getDisplayText());
                                var e = this.currRow + 1 - this.nrRollUpRows
                                  , t = this.rows.splice(e, 1)[0];
                                t.clear(),
                                this.rows.splice(this.currRow, 0, t),
                                this.logger.log(pt.INFO, "Rolling up")
                            } else
                                this.logger.log(pt.DEBUG, "roll_up but nrRollUpRows not set yet")
                        }
                        ,
                        t.getDisplayText = function(e) {
                            e = e || !1;
                            for (var t = [], a = "", r = -1, n = 0; n < 15; n++) {
                                var i = this.rows[n].getTextString();
                                i && (r = n + 1,
                                e ? t.push("Row " + r + ": '" + i + "'") : t.push(i.trim()))
                            }
                            return t.length > 0 && (a = e ? "[" + t.join(" | ") + "]" : t.join("\n")),
                            a
                        }
                        ,
                        t.getTextAndFormat = function() {
                            return this.rows
                        }
                        ,
                        e
                    }()
                      , Pt = function() {
                        function e(e, t, a) {
                            this.chNr = void 0,
                            this.outputFilter = void 0,
                            this.mode = void 0,
                            this.verbose = void 0,
                            this.displayedMemory = void 0,
                            this.nonDisplayedMemory = void 0,
                            this.lastOutputScreen = void 0,
                            this.currRollUpRow = void 0,
                            this.writeScreen = void 0,
                            this.cueStartTime = void 0,
                            this.logger = void 0,
                            this.chNr = e,
                            this.outputFilter = t,
                            this.mode = null,
                            this.verbose = 0,
                            this.displayedMemory = new It(a),
                            this.nonDisplayedMemory = new It(a),
                            this.lastOutputScreen = new It(a),
                            this.currRollUpRow = this.displayedMemory.rows[14],
                            this.writeScreen = this.displayedMemory,
                            this.mode = null,
                            this.cueStartTime = null,
                            this.logger = a
                        }
                        var t = e.prototype;
                        return t.reset = function() {
                            this.mode = null,
                            this.displayedMemory.reset(),
                            this.nonDisplayedMemory.reset(),
                            this.lastOutputScreen.reset(),
                            this.outputFilter.reset(),
                            this.currRollUpRow = this.displayedMemory.rows[14],
                            this.writeScreen = this.displayedMemory,
                            this.mode = null,
                            this.cueStartTime = null
                        }
                        ,
                        t.getHandler = function() {
                            return this.outputFilter
                        }
                        ,
                        t.setHandler = function(e) {
                            this.outputFilter = e
                        }
                        ,
                        t.setPAC = function(e) {
                            this.writeScreen.setPAC(e)
                        }
                        ,
                        t.setBkgData = function(e) {
                            this.writeScreen.setBkgData(e)
                        }
                        ,
                        t.setMode = function(e) {
                            e !== this.mode && (this.mode = e,
                            this.logger.log(pt.INFO, "MODE=" + e),
                            "MODE_POP-ON" === this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory,
                            this.writeScreen.reset()),
                            "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null,
                            this.nonDisplayedMemory.nrRollUpRows = null),
                            this.mode = e)
                        }
                        ,
                        t.insertChars = function(e) {
                            for (var t = 0; t < e.length; t++)
                                this.writeScreen.insertChar(e[t]);
                            var a = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                            this.logger.log(pt.INFO, a + ": " + this.writeScreen.getDisplayText(!0)),
                            "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (this.logger.log(pt.TEXT, "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)),
                            this.outputDataUpdate())
                        }
                        ,
                        t.ccRCL = function() {
                            this.logger.log(pt.INFO, "RCL - Resume Caption Loading"),
                            this.setMode("MODE_POP-ON")
                        }
                        ,
                        t.ccBS = function() {
                            this.logger.log(pt.INFO, "BS - BackSpace"),
                            "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(),
                            this.writeScreen === this.displayedMemory && this.outputDataUpdate())
                        }
                        ,
                        t.ccAOF = function() {}
                        ,
                        t.ccAON = function() {}
                        ,
                        t.ccDER = function() {
                            this.logger.log(pt.INFO, "DER- Delete to End of Row"),
                            this.writeScreen.clearToEndOfRow(),
                            this.outputDataUpdate()
                        }
                        ,
                        t.ccRU = function(e) {
                            this.logger.log(pt.INFO, "RU(" + e + ") - Roll Up"),
                            this.writeScreen = this.displayedMemory,
                            this.setMode("MODE_ROLL-UP"),
                            this.writeScreen.setRollUpRows(e)
                        }
                        ,
                        t.ccFON = function() {
                            this.logger.log(pt.INFO, "FON - Flash On"),
                            this.writeScreen.setPen({
                                flash: !0
                            })
                        }
                        ,
                        t.ccRDC = function() {
                            this.logger.log(pt.INFO, "RDC - Resume Direct Captioning"),
                            this.setMode("MODE_PAINT-ON")
                        }
                        ,
                        t.ccTR = function() {
                            this.logger.log(pt.INFO, "TR"),
                            this.setMode("MODE_TEXT")
                        }
                        ,
                        t.ccRTD = function() {
                            this.logger.log(pt.INFO, "RTD"),
                            this.setMode("MODE_TEXT")
                        }
                        ,
                        t.ccEDM = function() {
                            this.logger.log(pt.INFO, "EDM - Erase Displayed Memory"),
                            this.displayedMemory.reset(),
                            this.outputDataUpdate(!0)
                        }
                        ,
                        t.ccCR = function() {
                            this.logger.log(pt.INFO, "CR - Carriage Return"),
                            this.writeScreen.rollUp(),
                            this.outputDataUpdate(!0)
                        }
                        ,
                        t.ccENM = function() {
                            this.logger.log(pt.INFO, "ENM - Erase Non-displayed Memory"),
                            this.nonDisplayedMemory.reset()
                        }
                        ,
                        t.ccEOC = function() {
                            if (this.logger.log(pt.INFO, "EOC - End Of Caption"),
                            "MODE_POP-ON" === this.mode) {
                                var e = this.displayedMemory;
                                this.displayedMemory = this.nonDisplayedMemory,
                                this.nonDisplayedMemory = e,
                                this.writeScreen = this.nonDisplayedMemory,
                                this.logger.log(pt.TEXT, "DISP: " + this.displayedMemory.getDisplayText())
                            }
                            this.outputDataUpdate(!0)
                        }
                        ,
                        t.ccTO = function(e) {
                            this.logger.log(pt.INFO, "TO(" + e + ") - Tab Offset"),
                            this.writeScreen.moveCursor(e)
                        }
                        ,
                        t.ccMIDROW = function(e) {
                            var t = {
                                flash: !1
                            };
                            if (t.underline = e % 2 == 1,
                            t.italics = e >= 46,
                            t.italics)
                                t.foreground = "white";
                            else {
                                var a = Math.floor(e / 2) - 16;
                                t.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][a]
                            }
                            this.logger.log(pt.INFO, "MIDROW: " + JSON.stringify(t)),
                            this.writeScreen.setPen(t)
                        }
                        ,
                        t.outputDataUpdate = function(e) {
                            void 0 === e && (e = !1);
                            var t = this.logger.time;
                            null !== t && this.outputFilter && (null !== this.cueStartTime || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue(this.cueStartTime, t, this.lastOutputScreen),
                            e && this.outputFilter.dispatchCue && this.outputFilter.dispatchCue(),
                            this.cueStartTime = this.displayedMemory.isEmpty() ? null : t) : this.cueStartTime = t,
                            this.lastOutputScreen.copy(this.displayedMemory))
                        }
                        ,
                        t.cueSplitAtTime = function(e) {
                            this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, e, this.displayedMemory),
                            this.cueStartTime = e))
                        }
                        ,
                        e
                    }();
                    function wt(e, t, a) {
                        a.a = e,
                        a.b = t
                    }
                    function Mt(e, t, a) {
                        return a.a === e && a.b === t
                    }
                    var Rt = function() {
                        function e(e, t, a) {
                            this.channels = void 0,
                            this.currentChannel = 0,
                            this.cmdHistory = void 0,
                            this.logger = void 0;
                            var r = new kt;
                            this.channels = [null, new Pt(e,t,r), new Pt(e + 1,a,r)],
                            this.cmdHistory = {
                                a: null,
                                b: null
                            },
                            this.logger = r
                        }
                        var t = e.prototype;
                        return t.getHandler = function(e) {
                            return this.channels[e].getHandler()
                        }
                        ,
                        t.setHandler = function(e, t) {
                            this.channels[e].setHandler(t)
                        }
                        ,
                        t.addData = function(e, t) {
                            var a, r, n, i = !1;
                            this.logger.time = e;
                            for (var o = 0; o < t.length; o += 2)
                                if (r = 127 & t[o],
                                n = 127 & t[o + 1],
                                0 !== r || 0 !== n) {
                                    if (this.logger.log(pt.DATA, "[" + Tt([t[o], t[o + 1]]) + "] -> (" + Tt([r, n]) + ")"),
                                    (a = this.parseCmd(r, n)) || (a = this.parseMidrow(r, n)),
                                    a || (a = this.parsePAC(r, n)),
                                    a || (a = this.parseBackgroundAttributes(r, n)),
                                    !a && (i = this.parseChars(r, n))) {
                                        var s = this.currentChannel;
                                        s && s > 0 ? this.channels[s].insertChars(i) : this.logger.log(pt.WARNING, "No channel found yet. TEXT-MODE?")
                                    }
                                    a || i || this.logger.log(pt.WARNING, "Couldn't parse cleaned data " + Tt([r, n]) + " orig: " + Tt([t[o], t[o + 1]]))
                                }
                        }
                        ,
                        t.parseCmd = function(e, t) {
                            var a = this.cmdHistory;
                            if (!((20 === e || 28 === e || 21 === e || 29 === e) && t >= 32 && t <= 47 || (23 === e || 31 === e) && t >= 33 && t <= 35))
                                return !1;
                            if (Mt(e, t, a))
                                return wt(null, null, a),
                                this.logger.log(pt.DEBUG, "Repeated command (" + Tt([e, t]) + ") is dropped"),
                                !0;
                            var r = 20 === e || 21 === e || 23 === e ? 1 : 2
                              , n = this.channels[r];
                            return 20 === e || 21 === e || 28 === e || 29 === e ? 32 === t ? n.ccRCL() : 33 === t ? n.ccBS() : 34 === t ? n.ccAOF() : 35 === t ? n.ccAON() : 36 === t ? n.ccDER() : 37 === t ? n.ccRU(2) : 38 === t ? n.ccRU(3) : 39 === t ? n.ccRU(4) : 40 === t ? n.ccFON() : 41 === t ? n.ccRDC() : 42 === t ? n.ccTR() : 43 === t ? n.ccRTD() : 44 === t ? n.ccEDM() : 45 === t ? n.ccCR() : 46 === t ? n.ccENM() : 47 === t && n.ccEOC() : n.ccTO(t - 32),
                            wt(e, t, a),
                            this.currentChannel = r,
                            !0
                        }
                        ,
                        t.parseMidrow = function(e, t) {
                            var a = 0;
                            if ((17 === e || 25 === e) && t >= 32 && t <= 47) {
                                if ((a = 17 === e ? 1 : 2) !== this.currentChannel)
                                    return this.logger.log(pt.ERROR, "Mismatch channel in midrow parsing"),
                                    !1;
                                var r = this.channels[a];
                                return !!r && (r.ccMIDROW(t),
                                this.logger.log(pt.DEBUG, "MIDROW (" + Tt([e, t]) + ")"),
                                !0)
                            }
                            return !1
                        }
                        ,
                        t.parsePAC = function(e, t) {
                            var a, r = this.cmdHistory;
                            if (!((e >= 17 && e <= 23 || e >= 25 && e <= 31) && t >= 64 && t <= 127 || (16 === e || 24 === e) && t >= 64 && t <= 95))
                                return !1;
                            if (Mt(e, t, r))
                                return wt(null, null, r),
                                !0;
                            var n = e <= 23 ? 1 : 2;
                            a = t >= 64 && t <= 95 ? 1 === n ? yt[e] : vt[e] : 1 === n ? _t[e] : bt[e];
                            var i = this.channels[n];
                            return !!i && (i.setPAC(this.interpretPAC(a, t)),
                            wt(e, t, r),
                            this.currentChannel = n,
                            !0)
                        }
                        ,
                        t.interpretPAC = function(e, t) {
                            var a = t
                              , r = {
                                color: null,
                                italics: !1,
                                indent: null,
                                underline: !1,
                                row: e
                            };
                            return a = t > 95 ? t - 96 : t - 64,
                            r.underline = 1 == (1 & a),
                            a <= 13 ? r.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(a / 2)] : a <= 15 ? (r.italics = !0,
                            r.color = "white") : r.indent = 4 * Math.floor((a - 16) / 2),
                            r
                        }
                        ,
                        t.parseChars = function(e, t) {
                            var a, r = null, n = null;
                            if (e >= 25 ? (a = 2,
                            n = e - 8) : (a = 1,
                            n = e),
                            n >= 17 && n <= 19) {
                                var i = t;
                                i = 17 === n ? t + 80 : 18 === n ? t + 112 : t + 144,
                                this.logger.log(pt.INFO, "Special char '" + mt(i) + "' in channel " + a),
                                r = [i]
                            } else
                                e >= 32 && e <= 127 && (r = 0 === t ? [e] : [e, t]);
                            if (r) {
                                var o = Tt(r);
                                this.logger.log(pt.DEBUG, "Char codes =  " + o.join(",")),
                                wt(e, t, this.cmdHistory)
                            }
                            return r
                        }
                        ,
                        t.parseBackgroundAttributes = function(e, t) {
                            var a;
                            if (!((16 === e || 24 === e) && t >= 32 && t <= 47 || (23 === e || 31 === e) && t >= 45 && t <= 47))
                                return !1;
                            var r = {};
                            16 === e || 24 === e ? (a = Math.floor((t - 32) / 2),
                            r.background = Et[a],
                            t % 2 == 1 && (r.background = r.background + "_semi")) : 45 === t ? r.background = "transparent" : (r.foreground = "black",
                            47 === t && (r.underline = !0));
                            var n = e <= 23 ? 1 : 2;
                            return this.channels[n].setBkgData(r),
                            wt(e, t, this.cmdHistory),
                            !0
                        }
                        ,
                        t.reset = function() {
                            for (var e = 0; e < Object.keys(this.channels).length; e++) {
                                var t = this.channels[e];
                                t && t.reset()
                            }
                            this.cmdHistory = {
                                a: null,
                                b: null
                            }
                        }
                        ,
                        t.cueSplitAtTime = function(e) {
                            for (var t = 0; t < this.channels.length; t++) {
                                var a = this.channels[t];
                                a && a.cueSplitAtTime(e)
                            }
                        }
                        ,
                        e
                    }()
                      , xt = function() {
                        function e(e, t) {
                            this.timelineController = void 0,
                            this.cueRanges = [],
                            this.trackName = void 0,
                            this.startTime = null,
                            this.endTime = null,
                            this.screen = null,
                            this.timelineController = e,
                            this.trackName = t
                        }
                        var t = e.prototype;
                        return t.dispatchCue = function() {
                            null !== this.startTime && (this.timelineController.addCues(this.trackName, this.startTime, this.endTime, this.screen, this.cueRanges),
                            this.startTime = null)
                        }
                        ,
                        t.newCue = function(e, t, a) {
                            (null === this.startTime || this.startTime > e) && (this.startTime = e),
                            this.endTime = t,
                            this.screen = a,
                            this.timelineController.createCaptionsTrack(this.trackName)
                        }
                        ,
                        t.reset = function() {
                            this.cueRanges = []
                        }
                        ,
                        e
                    }()
                      , Dt = function(e, t, a) {
                        return e.substr(a || 0, t.length) === t
                    }
                      , Ot = function(e) {
                        for (var t = 5381, a = e.length; a; )
                            t = 33 * t ^ e.charCodeAt(--a);
                        return (t >>> 0).toString()
                    }
                      , Nt = {
                        parse: function(e, t, a, r, n, i) {
                            var o, s = Object(Le.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g, "\n").split("\n"), u = "00:00.000", d = 0, c = 0, f = 0, h = [], p = !0, g = !1, m = new ft;
                            m.oncue = function(e) {
                                var t = a[r]
                                  , n = a.ccOffset;
                                t && t.new && (void 0 !== c ? n = a.ccOffset = t.start : function(e, t, a) {
                                    var r = e[t]
                                      , n = e[r.prevCC];
                                    if (!n || !n.new && r.new)
                                        return e.ccOffset = e.presentationOffset = r.start,
                                        void (r.new = !1);
                                    for (; n && n.new; )
                                        e.ccOffset += r.start - n.start,
                                        r.new = !1,
                                        n = e[(r = n).prevCC];
                                    e.presentationOffset = a
                                }(a, r, f)),
                                f && (n = f - a.presentationOffset),
                                g && (e.startTime += n - c,
                                e.endTime += n - c),
                                e.id = Ot(e.startTime.toString()) + Ot(e.endTime.toString()) + Ot(e.text),
                                e.text = decodeURIComponent(encodeURIComponent(e.text)),
                                e.endTime > 0 && h.push(e)
                            }
                            ,
                            m.onparsingerror = function(e) {
                                o = e
                            }
                            ,
                            m.onflush = function() {
                                o && i ? i(o) : n(h)
                            }
                            ,
                            s.forEach((function(e) {
                                if (p) {
                                    if (Dt(e, "X-TIMESTAMP-MAP=")) {
                                        p = !1,
                                        g = !0,
                                        e.substr(16).split(",").forEach((function(e) {
                                            Dt(e, "LOCAL:") ? u = e.substr(6) : Dt(e, "MPEGTS:") && (d = parseInt(e.substr(7)))
                                        }
                                        ));
                                        try {
                                            t + (9e4 * a[r].start || 0) < 0 && (t += 8589934592),
                                            d -= t,
                                            c = function(e) {
                                                var t = parseInt(e.substr(-3))
                                                  , a = parseInt(e.substr(-6, 2))
                                                  , r = parseInt(e.substr(-9, 2))
                                                  , n = e.length > 9 ? parseInt(e.substr(0, e.indexOf(":"))) : 0;
                                                if (!(Object(l.isFiniteNumber)(t) && Object(l.isFiniteNumber)(a) && Object(l.isFiniteNumber)(r) && Object(l.isFiniteNumber)(n)))
                                                    throw Error("Malformed X-TIMESTAMP-MAP: Local:" + e);
                                                return t += 1e3 * a,
                                                t += 6e4 * r,
                                                t += 36e5 * n
                                            }(u) / 1e3,
                                            f = d / 9e4
                                        } catch (e) {
                                            g = !1,
                                            o = e
                                        }
                                        return
                                    }
                                    "" === e && (p = !1)
                                }
                                m.parse(e + "\n")
                            }
                            )),
                            m.flush()
                        }
                    };
                    function Lt(e) {
                        if (void 0 === e)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }
                    function Ut(e, t) {
                        return e && e.label === t.name && !(e.textTrack1 || e.textTrack2)
                    }
                    var Ft = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            if ((a = e.call(this, t, u.default.MEDIA_ATTACHING, u.default.MEDIA_DETACHING, u.default.FRAG_PARSING_USERDATA, u.default.FRAG_DECRYPTED, u.default.MANIFEST_LOADING, u.default.MANIFEST_LOADED, u.default.FRAG_LOADED, u.default.INIT_PTS_FOUND) || this).media = null,
                            a.config = void 0,
                            a.enabled = !0,
                            a.Cues = void 0,
                            a.textTracks = [],
                            a.tracks = [],
                            a.initPTS = [],
                            a.unparsedVttFrags = [],
                            a.captionsTracks = {},
                            a.nonNativeCaptionsTracks = {},
                            a.captionsProperties = void 0,
                            a.cea608Parser1 = void 0,
                            a.cea608Parser2 = void 0,
                            a.lastSn = -1,
                            a.prevCC = -1,
                            a.vttCCs = {
                                ccOffset: 0,
                                presentationOffset: 0,
                                0: {
                                    start: 0,
                                    prevCC: -1,
                                    new: !1
                                }
                            },
                            a.hls = t,
                            a.config = t.config,
                            a.Cues = t.config.cueHandler,
                            a.captionsProperties = {
                                textTrack1: {
                                    label: a.config.captionsTextTrack1Label,
                                    languageCode: a.config.captionsTextTrack1LanguageCode
                                },
                                textTrack2: {
                                    label: a.config.captionsTextTrack2Label,
                                    languageCode: a.config.captionsTextTrack2LanguageCode
                                },
                                textTrack3: {
                                    label: a.config.captionsTextTrack3Label,
                                    languageCode: a.config.captionsTextTrack3LanguageCode
                                },
                                textTrack4: {
                                    label: a.config.captionsTextTrack4Label,
                                    languageCode: a.config.captionsTextTrack4LanguageCode
                                }
                            },
                            a.config.enableCEA708Captions) {
                                var r = new xt(Lt(a),"textTrack1")
                                  , n = new xt(Lt(a),"textTrack2")
                                  , i = new xt(Lt(a),"textTrack3")
                                  , o = new xt(Lt(a),"textTrack4");
                                a.cea608Parser1 = new Rt(1,r,n),
                                a.cea608Parser2 = new Rt(3,i,o)
                            }
                            return a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.addCues = function(e, t, a, r, n) {
                            for (var i, o, s, l, d = !1, c = n.length; c--; ) {
                                var f = n[c]
                                  , h = (i = f[0],
                                o = f[1],
                                s = t,
                                l = a,
                                Math.min(o, l) - Math.max(i, s));
                                if (h >= 0 && (f[0] = Math.min(f[0], t),
                                f[1] = Math.max(f[1], a),
                                d = !0,
                                h / (a - t) > .5))
                                    return
                            }
                            if (d || n.push([t, a]),
                            this.config.renderTextTracksNatively)
                                this.Cues.newCue(this.captionsTracks[e], t, a, r);
                            else {
                                var p = this.Cues.newCue(null, t, a, r);
                                this.hls.trigger(u.default.CUES_PARSED, {
                                    type: "captions",
                                    cues: p,
                                    track: e
                                })
                            }
                        }
                        ,
                        n.onInitPtsFound = function(e) {
                            var t = this
                              , a = e.frag
                              , r = e.id
                              , n = e.initPTS
                              , i = this.unparsedVttFrags;
                            "main" === r && (this.initPTS[a.cc] = n),
                            i.length && (this.unparsedVttFrags = [],
                            i.forEach((function(e) {
                                t.onFragLoaded(e)
                            }
                            )))
                        }
                        ,
                        n.getExistingTrack = function(e) {
                            var t = this.media;
                            if (t)
                                for (var a = 0; a < t.textTracks.length; a++) {
                                    var r = t.textTracks[a];
                                    if (r[e])
                                        return r
                                }
                            return null
                        }
                        ,
                        n.createCaptionsTrack = function(e) {
                            this.config.renderTextTracksNatively ? this.createNativeTrack(e) : this.createNonNativeTrack(e)
                        }
                        ,
                        n.createNativeTrack = function(e) {
                            if (!this.captionsTracks[e]) {
                                var t = this.captionsProperties
                                  , a = this.captionsTracks
                                  , r = this.media
                                  , n = t[e]
                                  , i = n.label
                                  , o = n.languageCode
                                  , s = this.getExistingTrack(e);
                                if (s)
                                    a[e] = s,
                                    Fe(a[e]),
                                    Ue(a[e], r);
                                else {
                                    var l = this.createTextTrack("captions", i, o);
                                    l && (l[e] = !0,
                                    a[e] = l)
                                }
                            }
                        }
                        ,
                        n.createNonNativeTrack = function(e) {
                            if (!this.nonNativeCaptionsTracks[e]) {
                                var t = this.captionsProperties[e];
                                if (t) {
                                    var a = {
                                        _id: e,
                                        label: t.label,
                                        kind: "captions",
                                        default: !!t.media && !!t.media.default,
                                        closedCaptions: t.media
                                    };
                                    this.nonNativeCaptionsTracks[e] = a,
                                    this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND, {
                                        tracks: [a]
                                    })
                                }
                            }
                        }
                        ,
                        n.createTextTrack = function(e, t, a) {
                            var r = this.media;
                            if (r)
                                return r.addTextTrack(e, t, a)
                        }
                        ,
                        n.destroy = function() {
                            e.prototype.destroy.call(this)
                        }
                        ,
                        n.onMediaAttaching = function(e) {
                            this.media = e.media,
                            this._cleanTracks()
                        }
                        ,
                        n.onMediaDetaching = function() {
                            var e = this.captionsTracks;
                            Object.keys(e).forEach((function(t) {
                                Fe(e[t]),
                                delete e[t]
                            }
                            )),
                            this.nonNativeCaptionsTracks = {}
                        }
                        ,
                        n.onManifestLoading = function() {
                            this.lastSn = -1,
                            this.prevCC = -1,
                            this.vttCCs = {
                                ccOffset: 0,
                                presentationOffset: 0,
                                0: {
                                    start: 0,
                                    prevCC: -1,
                                    new: !1
                                }
                            },
                            this._cleanTracks(),
                            this.tracks = [],
                            this.captionsTracks = {},
                            this.nonNativeCaptionsTracks = {}
                        }
                        ,
                        n._cleanTracks = function() {
                            var e = this.media;
                            if (e) {
                                var t = e.textTracks;
                                if (t)
                                    for (var a = 0; a < t.length; a++)
                                        Fe(t[a])
                            }
                        }
                        ,
                        n.onManifestLoaded = function(e) {
                            var t = this;
                            if (this.textTracks = [],
                            this.unparsedVttFrags = this.unparsedVttFrags || [],
                            this.initPTS = [],
                            this.cea608Parser1 && this.cea608Parser2 && (this.cea608Parser1.reset(),
                            this.cea608Parser2.reset()),
                            this.config.enableWebVTT) {
                                var a = e.subtitles || []
                                  , r = this.tracks && a && this.tracks.length === a.length;
                                if (this.tracks = e.subtitles || [],
                                this.config.renderTextTracksNatively) {
                                    var n = this.media ? this.media.textTracks : [];
                                    this.tracks.forEach((function(e, a) {
                                        var r;
                                        if (a < n.length) {
                                            for (var i = null, o = 0; o < n.length; o++)
                                                if (Ut(n[o], e)) {
                                                    i = n[o];
                                                    break
                                                }
                                            i && (r = i)
                                        }
                                        r || (r = t.createTextTrack("subtitles", e.name, e.lang)),
                                        e.default ? r.mode = t.hls.subtitleDisplay ? "showing" : "hidden" : r.mode = "disabled",
                                        t.textTracks.push(r)
                                    }
                                    ))
                                } else if (!r && this.tracks && this.tracks.length) {
                                    var i = this.tracks.map((function(e) {
                                        return {
                                            label: e.name,
                                            kind: e.type.toLowerCase(),
                                            default: e.default,
                                            subtitleTrack: e
                                        }
                                    }
                                    ));
                                    this.hls.trigger(u.default.NON_NATIVE_TEXT_TRACKS_FOUND, {
                                        tracks: i
                                    })
                                }
                            }
                            this.config.enableCEA708Captions && e.captions && e.captions.forEach((function(e) {
                                var a = /(?:CC|SERVICE)([1-4])/.exec(e.instreamId);
                                if (a) {
                                    var r = "textTrack" + a[1]
                                      , n = t.captionsProperties[r];
                                    n && (n.label = e.name,
                                    e.lang && (n.languageCode = e.lang),
                                    n.media = e)
                                }
                            }
                            ))
                        }
                        ,
                        n.onFragLoaded = function(e) {
                            var t = e.frag
                              , a = e.payload
                              , r = this.cea608Parser1
                              , n = this.cea608Parser2
                              , i = this.initPTS
                              , o = this.lastSn
                              , s = this.unparsedVttFrags;
                            if ("main" === t.type) {
                                var d = t.sn;
                                t.sn !== o + 1 && r && n && (r.reset(),
                                n.reset()),
                                this.lastSn = d
                            } else if ("subtitle" === t.type)
                                if (a.byteLength) {
                                    if (!Object(l.isFiniteNumber)(i[t.cc]))
                                        return s.push(e),
                                        void (i.length && this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED, {
                                            success: !1,
                                            frag: t
                                        }));
                                    var c = t.decryptdata;
                                    null != c && null != c.key && "AES-128" === c.method || this._parseVTTs(t, a)
                                } else
                                    this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED, {
                                        success: !1,
                                        frag: t
                                    })
                        }
                        ,
                        n._parseVTTs = function(e, t) {
                            var a = this
                              , r = this.hls
                              , n = this.prevCC
                              , i = this.textTracks
                              , o = this.vttCCs;
                            o[e.cc] || (o[e.cc] = {
                                start: e.start,
                                prevCC: n,
                                new: !0
                            },
                            this.prevCC = e.cc),
                            Nt.parse(t, this.initPTS[e.cc], o, e.cc, (function(t) {
                                if (a.config.renderTextTracksNatively) {
                                    var n = i[e.level];
                                    if ("disabled" === n.mode)
                                        return void r.trigger(u.default.SUBTITLE_FRAG_PROCESSED, {
                                            success: !1,
                                            frag: e
                                        });
                                    t.forEach((function(e) {
                                        if (!n.cues.getCueById(e.id))
                                            try {
                                                if (n.addCue(e),
                                                !n.cues.getCueById(e.id))
                                                    throw new Error("addCue is failed for: " + e)
                                            } catch (a) {
                                                d.logger.debug("Failed occurred on adding cues: " + a);
                                                var t = new window.TextTrackCue(e.startTime,e.endTime,e.text);
                                                t.id = e.id,
                                                n.addCue(t)
                                            }
                                    }
                                    ))
                                } else {
                                    var o = a.tracks[e.level].default ? "default" : "subtitles" + e.level;
                                    r.trigger(u.default.CUES_PARSED, {
                                        type: "subtitles",
                                        cues: t,
                                        track: o
                                    })
                                }
                                r.trigger(u.default.SUBTITLE_FRAG_PROCESSED, {
                                    success: !0,
                                    frag: e
                                })
                            }
                            ), (function(t) {
                                d.logger.log("Failed to parse VTT cue: " + t),
                                r.trigger(u.default.SUBTITLE_FRAG_PROCESSED, {
                                    success: !1,
                                    frag: e
                                })
                            }
                            ))
                        }
                        ,
                        n.onFragDecrypted = function(e) {
                            var t = e.frag
                              , a = e.payload;
                            if ("subtitle" === t.type) {
                                if (!Object(l.isFiniteNumber)(this.initPTS[t.cc]))
                                    return void this.unparsedVttFrags.push(e);
                                this._parseVTTs(t, a)
                            }
                        }
                        ,
                        n.onFragParsingUserdata = function(e) {
                            var t = this.cea608Parser1
                              , a = this.cea608Parser2;
                            if (this.enabled && t && a)
                                for (var r = 0; r < e.samples.length; r++) {
                                    var n = e.samples[r].bytes;
                                    if (n) {
                                        var i = this.extractCea608Data(n);
                                        t.addData(e.samples[r].pts, i[0]),
                                        a.addData(e.samples[r].pts, i[1])
                                    }
                                }
                        }
                        ,
                        n.extractCea608Data = function(e) {
                            for (var t = 31 & e[0], a = 2, r = [[], []], n = 0; n < t; n++) {
                                var i = e[a++]
                                  , o = 127 & e[a++]
                                  , s = 127 & e[a++]
                                  , l = 3 & i;
                                0 === o && 0 === s || 0 != (4 & i) && (0 !== l && 1 !== l || (r[l].push(o),
                                r[l].push(s)))
                            }
                            return r
                        }
                        ,
                        r
                    }(f);
                    function Bt(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    function jt(e) {
                        for (var t = [], a = 0; a < e.length; a++) {
                            var r = e[a];
                            "subtitles" === r.kind && r.label && t.push(e[a])
                        }
                        return t
                    }
                    var Gt, Vt = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.MEDIA_ATTACHED, u.default.MEDIA_DETACHING, u.default.MANIFEST_LOADED, u.default.SUBTITLE_TRACK_LOADED) || this).tracks = [],
                            a.trackId = -1,
                            a.media = null,
                            a.stopped = !0,
                            a.subtitleDisplay = !0,
                            a.queuedDefaultTrack = null,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n, i, o, s = r.prototype;
                        return s.destroy = function() {
                            f.prototype.destroy.call(this)
                        }
                        ,
                        s.onMediaAttached = function(e) {
                            var t = this;
                            this.media = e.media,
                            this.media && (Object(l.isFiniteNumber)(this.queuedDefaultTrack) && (this.subtitleTrack = this.queuedDefaultTrack,
                            this.queuedDefaultTrack = null),
                            this.trackChangeListener = this._onTextTracksChanged.bind(this),
                            this.useTextTrackPolling = !(this.media.textTracks && "onchange"in this.media.textTracks),
                            this.useTextTrackPolling ? this.subtitlePollingInterval = setInterval((function() {
                                t.trackChangeListener()
                            }
                            ), 500) : this.media.textTracks.addEventListener("change", this.trackChangeListener))
                        }
                        ,
                        s.onMediaDetaching = function() {
                            this.media && (this.useTextTrackPolling ? clearInterval(this.subtitlePollingInterval) : this.media.textTracks.removeEventListener("change", this.trackChangeListener),
                            Object(l.isFiniteNumber)(this.subtitleTrack) && (this.queuedDefaultTrack = this.subtitleTrack),
                            jt(this.media.textTracks).forEach((function(e) {
                                Fe(e)
                            }
                            )),
                            this.subtitleTrack = -1,
                            this.media = null)
                        }
                        ,
                        s.onManifestLoaded = function(e) {
                            var t = this
                              , a = e.subtitles || [];
                            this.tracks = a,
                            this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED, {
                                subtitleTracks: a
                            }),
                            a.forEach((function(e) {
                                e.default && (t.media ? t.subtitleTrack = e.id : t.queuedDefaultTrack = e.id)
                            }
                            ))
                        }
                        ,
                        s.onSubtitleTrackLoaded = function(e) {
                            var t = this
                              , a = e.id
                              , r = e.details
                              , n = this.trackId
                              , i = this.tracks
                              , o = i[n];
                            if (a >= i.length || a !== n || !o || this.stopped)
                                this._clearReloadTimer();
                            else if (d.logger.log("subtitle track " + a + " loaded"),
                            r.live) {
                                var s = ne(o.details, r, e.stats.trequest);
                                d.logger.log("Reloading live subtitle playlist in " + s + "ms"),
                                this.timer = setTimeout((function() {
                                    t._loadCurrentTrack()
                                }
                                ), s)
                            } else
                                this._clearReloadTimer()
                        }
                        ,
                        s.startLoad = function() {
                            this.stopped = !1,
                            this._loadCurrentTrack()
                        }
                        ,
                        s.stopLoad = function() {
                            this.stopped = !0,
                            this._clearReloadTimer()
                        }
                        ,
                        s._clearReloadTimer = function() {
                            this.timer && (clearTimeout(this.timer),
                            this.timer = null)
                        }
                        ,
                        s._loadCurrentTrack = function() {
                            var e = this.trackId
                              , t = this.tracks
                              , a = this.hls
                              , r = t[e];
                            e < 0 || !r || r.details && !r.details.live || (d.logger.log("Loading subtitle track " + e),
                            a.trigger(u.default.SUBTITLE_TRACK_LOADING, {
                                url: r.url,
                                id: e
                            }))
                        }
                        ,
                        s._toggleTrackModes = function(e) {
                            var t = this.media
                              , a = this.subtitleDisplay
                              , r = this.trackId;
                            if (t) {
                                var n = jt(t.textTracks);
                                if (-1 === e)
                                    [].slice.call(n).forEach((function(e) {
                                        e.mode = "disabled"
                                    }
                                    ));
                                else {
                                    var i = n[r];
                                    i && (i.mode = "disabled")
                                }
                                var o = n[e];
                                o && (o.mode = a ? "showing" : "hidden")
                            }
                        }
                        ,
                        s._setSubtitleTrackInternal = function(e) {
                            var t = this.hls
                              , a = this.tracks;
                            !Object(l.isFiniteNumber)(e) || e < -1 || e >= a.length || (this.trackId = e,
                            d.logger.log("Switching to subtitle track " + e),
                            t.trigger(u.default.SUBTITLE_TRACK_SWITCH, {
                                id: e
                            }),
                            this._loadCurrentTrack())
                        }
                        ,
                        s._onTextTracksChanged = function() {
                            if (this.media && this.hls.config.renderTextTracksNatively) {
                                for (var e = -1, t = jt(this.media.textTracks), a = 0; a < t.length; a++)
                                    if ("hidden" === t[a].mode)
                                        e = a;
                                    else if ("showing" === t[a].mode) {
                                        e = a;
                                        break
                                    }
                                this.subtitleTrack = e
                            }
                        }
                        ,
                        n = r,
                        (i = [{
                            key: "subtitleTracks",
                            get: function() {
                                return this.tracks
                            }
                        }, {
                            key: "subtitleTrack",
                            get: function() {
                                return this.trackId
                            },
                            set: function(e) {
                                this.trackId !== e && (this._toggleTrackModes(e),
                                this._setSubtitleTrackInternal(e))
                            }
                        }]) && Bt(n.prototype, i),
                        o && Bt(n, o),
                        r
                    }(f), Kt = a("./src/crypt/decrypter.js"), $t = window.performance, qt = function(e) {
                        var t, a;
                        function r(t, a) {
                            var r;
                            return (r = e.call(this, t, u.default.MEDIA_ATTACHED, u.default.MEDIA_DETACHING, u.default.ERROR, u.default.KEY_LOADED, u.default.FRAG_LOADED, u.default.SUBTITLE_TRACKS_UPDATED, u.default.SUBTITLE_TRACK_SWITCH, u.default.SUBTITLE_TRACK_LOADED, u.default.SUBTITLE_FRAG_PROCESSED, u.default.LEVEL_UPDATED) || this).fragmentTracker = a,
                            r.config = t.config,
                            r.state = ge,
                            r.tracks = [],
                            r.tracksBuffered = [],
                            r.currentTrackId = -1,
                            r.decrypter = new Kt.default(t,t.config),
                            r.lastAVStart = 0,
                            r._onMediaSeeking = r.onMediaSeeking.bind(function(e) {
                                if (void 0 === e)
                                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                return e
                            }(r)),
                            r
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n = r.prototype;
                        return n.onSubtitleFragProcessed = function(e) {
                            var t = e.frag
                              , a = e.success;
                            if (this.fragPrevious = t,
                            this.state = ye,
                            a) {
                                var r = this.tracksBuffered[this.currentTrackId];
                                if (r) {
                                    for (var n, i = t.start, o = 0; o < r.length; o++)
                                        if (i >= r[o].start && i <= r[o].end) {
                                            n = r[o];
                                            break
                                        }
                                    var s = t.start + t.duration;
                                    n ? n.end = s : (n = {
                                        start: i,
                                        end: s
                                    },
                                    r.push(n))
                                }
                            }
                        }
                        ,
                        n.onMediaAttached = function(e) {
                            var t = e.media;
                            this.media = t,
                            t.addEventListener("seeking", this._onMediaSeeking),
                            this.state = ye
                        }
                        ,
                        n.onMediaDetaching = function() {
                            var e = this;
                            this.media && (this.media.removeEventListener("seeking", this._onMediaSeeking),
                            this.fragmentTracker.removeAllFragments(),
                            this.currentTrackId = -1,
                            this.tracks.forEach((function(t) {
                                e.tracksBuffered[t.id] = []
                            }
                            )),
                            this.media = null,
                            this.state = ge)
                        }
                        ,
                        n.onError = function(e) {
                            var t = e.frag;
                            t && "subtitle" === t.type && (this.state = ye)
                        }
                        ,
                        n.onSubtitleTracksUpdated = function(e) {
                            var t = this;
                            d.logger.log("subtitle tracks updated"),
                            this.tracksBuffered = [],
                            this.tracks = e.subtitleTracks,
                            this.tracks.forEach((function(e) {
                                t.tracksBuffered[e.id] = []
                            }
                            ))
                        }
                        ,
                        n.onSubtitleTrackSwitch = function(e) {
                            if (this.currentTrackId = e.id,
                            this.tracks && this.tracks.length && -1 !== this.currentTrackId) {
                                var t = this.tracks[this.currentTrackId];
                                t && t.details && this.setInterval(500)
                            } else
                                this.clearInterval()
                        }
                        ,
                        n.onSubtitleTrackLoaded = function(e) {
                            var t = e.id
                              , a = e.details
                              , r = this.currentTrackId
                              , n = this.tracks
                              , i = n[r];
                            t >= n.length || t !== r || !i || (a.live && function(e, t, a) {
                                void 0 === a && (a = 0);
                                var r = -1;
                                re(e, t, (function(e, t, a) {
                                    t.start = e.start,
                                    r = a
                                }
                                ));
                                var n = t.fragments;
                                if (r < 0)
                                    n.forEach((function(e) {
                                        e.start += a
                                    }
                                    ));
                                else
                                    for (var i = r + 1; i < n.length; i++)
                                        n[i].start = n[i - 1].start + n[i - 1].duration
                            }(i.details, a, this.lastAVStart),
                            i.details = a,
                            this.setInterval(500))
                        }
                        ,
                        n.onKeyLoaded = function() {
                            this.state === ve && (this.state = ye)
                        }
                        ,
                        n.onFragLoaded = function(e) {
                            var t = this.fragCurrent
                              , a = e.frag.decryptdata
                              , r = e.frag
                              , n = this.hls;
                            if (this.state === be && t && "subtitle" === e.frag.type && t.sn === e.frag.sn && e.payload.byteLength > 0 && a && a.key && "AES-128" === a.method) {
                                var i = $t.now();
                                this.decrypter.decrypt(e.payload, a.key.buffer, a.iv.buffer, (function(e) {
                                    // debugger
                                    var t = $t.now();
                                    n.trigger(u.default.FRAG_DECRYPTED, {
                                        frag: r,
                                        payload: e,
                                        stats: {
                                            tstart: i,
                                            tdecrypt: t
                                        }
                                    })
                                }
                                ))
                            }
                        }
                        ,
                        n.onLevelUpdated = function(e) {
                            var t = e.details.fragments;
                            this.lastAVStart = t.length ? t[0].start : 0
                        }
                        ,
                        n.doTick = function() {
                            if (this.media)
                                switch (this.state) {
                                case ye:
                                    var e = this.config
                                      , t = this.currentTrackId
                                      , a = this.fragmentTracker
                                      , r = this.media
                                      , n = this.tracks;
                                    if (!n || !n[t] || !n[t].details)
                                        break;
                                    var i, o = e.maxBufferHole, s = e.maxFragLookUpTolerance, l = Math.min(e.maxBufferLength, e.maxMaxBufferLength), c = K.bufferedInfo(this._getBuffered(), r.currentTime, o), f = c.end, h = c.len, p = n[t].details, g = p.fragments, m = g.length, y = g[m - 1].start + g[m - 1].duration;
                                    if (h > l)
                                        return;
                                    var _ = this.fragPrevious;
                                    f < y ? (_ && p.hasProgramDateTime && (i = le(g, _.endProgramDateTime, s)),
                                    i || (i = ue(_, g, f, s))) : i = g[m - 1],
                                    i && i.encrypted ? (d.logger.log("Loading key for " + i.sn),
                                    this.state = ve,
                                    this.hls.trigger(u.default.KEY_LOADING, {
                                        frag: i
                                    })) : i && a.getState(i) === U && (this.fragCurrent = i,
                                    this.state = be,
                                    this.hls.trigger(u.default.FRAG_LOADING, {
                                        frag: i
                                    }))
                                }
                            else
                                this.state = ye
                        }
                        ,
                        n.stopLoad = function() {
                            this.lastAVStart = 0,
                            e.prototype.stopLoad.call(this)
                        }
                        ,
                        n._getBuffered = function() {
                            return this.tracksBuffered[this.currentTrackId] || []
                        }
                        ,
                        n.onMediaSeeking = function() {
                            this.fragPrevious = null
                        }
                        ,
                        r
                    }(Me);
                    !function(e) {
                        e.WIDEVINE = "com.widevine.alpha",
                        e.PLAYREADY = "com.microsoft.playready"
                    }(Gt || (Gt = {}));
                    var Ht = "undefined" != typeof window && window.navigator && window.navigator.requestMediaKeySystemAccess ? window.navigator.requestMediaKeySystemAccess.bind(window.navigator) : null;
                    function Wt(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    var Yt = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            return (a = e.call(this, t, u.default.MEDIA_ATTACHED, u.default.MEDIA_DETACHED, u.default.MANIFEST_PARSED) || this)._widevineLicenseUrl = void 0,
                            a._licenseXhrSetup = void 0,
                            a._emeEnabled = void 0,
                            a._requestMediaKeySystemAccess = void 0,
                            a._drmSystemOptions = void 0,
                            a._config = void 0,
                            a._mediaKeysList = [],
                            a._media = null,
                            a._hasSetMediaKeys = !1,
                            a._requestLicenseFailureCount = 0,
                            a.mediaKeysPromise = null,
                            a._onMediaEncrypted = function(e) {
                                if (d.logger.log('Media is encrypted using "' + e.initDataType + '" init data type'),
                                !a.mediaKeysPromise)
                                    return d.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),
                                    void a.hls.trigger(u.default.ERROR, {
                                        type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: s.ErrorDetails.KEY_SYSTEM_NO_KEYS,
                                        fatal: !0
                                    });
                                var t = function(t) {
                                    a._media && (a._attemptSetMediaKeys(t),
                                    a._generateRequestWithPreferredKeySession(e.initDataType, e.initData))
                                };
                                a.mediaKeysPromise.then(t).catch(t)
                            }
                            ,
                            a._config = t.config,
                            a._widevineLicenseUrl = a._config.widevineLicenseUrl,
                            a._licenseXhrSetup = a._config.licenseXhrSetup,
                            a._emeEnabled = a._config.emeEnabled,
                            a._requestMediaKeySystemAccess = a._config.requestMediaKeySystemAccessFunc,
                            a._drmSystemOptions = t.config.drmSystemOptions,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a;
                        var n, i, o, l = r.prototype;
                        return l.getLicenseServerUrl = function(e) {
                            switch (e) {
                            case Gt.WIDEVINE:
                                if (!this._widevineLicenseUrl)
                                    break;
                                return this._widevineLicenseUrl
                            }
                            throw new Error('no license server URL configured for key-system "' + e + '"')
                        }
                        ,
                        l._attemptKeySystemAccess = function(e, t, a) {
                            var r = this
                              , n = function(e, t, a, r) {
                                switch (e) {
                                case Gt.WIDEVINE:
                                    return function(e, t, a) {
                                        var r = {
                                            audioCapabilities: [],
                                            videoCapabilities: []
                                        };
                                        return e.forEach((function(e) {
                                            r.audioCapabilities.push({
                                                contentType: 'audio/mp4; codecs="' + e + '"',
                                                robustness: a.audioRobustness || ""
                                            })
                                        }
                                        )),
                                        t.forEach((function(e) {
                                            r.videoCapabilities.push({
                                                contentType: 'video/mp4; codecs="' + e + '"',
                                                robustness: a.videoRobustness || ""
                                            })
                                        }
                                        )),
                                        [r]
                                    }(t, a, r);
                                default:
                                    throw new Error("Unknown key-system: " + e)
                                }
                            }(e, t, a, this._drmSystemOptions);
                            d.logger.log("Requesting encrypted media key-system access");
                            var i = this.requestMediaKeySystemAccess(e, n);
                            this.mediaKeysPromise = i.then((function(t) {
                                return r._onMediaKeySystemAccessObtained(e, t)
                            }
                            )),
                            i.catch((function(t) {
                                d.logger.error('Failed to obtain key-system "' + e + '" access:', t)
                            }
                            ))
                        }
                        ,
                        l._onMediaKeySystemAccessObtained = function(e, t) {
                            var a = this;
                            d.logger.log('Access for key-system "' + e + '" obtained');
                            var r = {
                                mediaKeysSessionInitialized: !1,
                                mediaKeySystemAccess: t,
                                mediaKeySystemDomain: e
                            };
                            this._mediaKeysList.push(r);
                            var n = Promise.resolve().then((function() {
                                return t.createMediaKeys()
                            }
                            )).then((function(t) {
                                return r.mediaKeys = t,
                                d.logger.log('Media-keys created for key-system "' + e + '"'),
                                a._onMediaKeysCreated(),
                                t
                            }
                            ));
                            return n.catch((function(e) {
                                d.logger.error("Failed to create media-keys:", e)
                            }
                            )),
                            n
                        }
                        ,
                        l._onMediaKeysCreated = function() {
                            var e = this;
                            this._mediaKeysList.forEach((function(t) {
                                t.mediaKeysSession || (t.mediaKeysSession = t.mediaKeys.createSession(),
                                e._onNewMediaKeySession(t.mediaKeysSession))
                            }
                            ))
                        }
                        ,
                        l._onNewMediaKeySession = function(e) {
                            var t = this;
                            d.logger.log("New key-system session " + e.sessionId),
                            e.addEventListener("message", (function(a) {
                                t._onKeySessionMessage(e, a.message)
                            }
                            ), !1)
                        }
                        ,
                        l._onKeySessionMessage = function(e, t) {
                            d.logger.log("Got EME message event, creating license request"),
                            this._requestLicense(t, (function(t) {
                                d.logger.log("Received license data (length: " + (t ? t.byteLength : t) + "), updating key-session"),
                                e.update(t)
                            }
                            ))
                        }
                        ,
                        l._attemptSetMediaKeys = function(e) {
                            if (!this._media)
                                throw new Error("Attempted to set mediaKeys without first attaching a media element");
                            if (!this._hasSetMediaKeys) {
                                var t = this._mediaKeysList[0];
                                if (!t || !t.mediaKeys)
                                    return d.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),
                                    void this.hls.trigger(u.default.ERROR, {
                                        type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: s.ErrorDetails.KEY_SYSTEM_NO_KEYS,
                                        fatal: !0
                                    });
                                d.logger.log("Setting keys for encrypted media"),
                                this._media.setMediaKeys(t.mediaKeys),
                                this._hasSetMediaKeys = !0
                            }
                        }
                        ,
                        l._generateRequestWithPreferredKeySession = function(e, t) {
                            var a = this
                              , r = this._mediaKeysList[0];
                            if (!r)
                                return d.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),
                                void this.hls.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,
                                    fatal: !0
                                });
                            if (r.mediaKeysSessionInitialized)
                                d.logger.warn("Key-Session already initialized but requested again");
                            else {
                                var n = r.mediaKeysSession;
                                if (!n)
                                    return d.logger.error("Fatal: Media is encrypted but no key-session existing"),
                                    void this.hls.trigger(u.default.ERROR, {
                                        type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: s.ErrorDetails.KEY_SYSTEM_NO_SESSION,
                                        fatal: !0
                                    });
                                if (!t)
                                    return d.logger.warn("Fatal: initData required for generating a key session is null"),
                                    void this.hls.trigger(u.default.ERROR, {
                                        type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,
                                        fatal: !0
                                    });
                                d.logger.log('Generating key-session request for "' + e + '" init data type'),
                                r.mediaKeysSessionInitialized = !0,
                                n.generateRequest(e, t).then((function() {
                                    d.logger.debug("Key-session generation succeeded")
                                }
                                )).catch((function(e) {
                                    d.logger.error("Error generating key-session request:", e),
                                    a.hls.trigger(u.default.ERROR, {
                                        type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                        details: s.ErrorDetails.KEY_SYSTEM_NO_SESSION,
                                        fatal: !1
                                    })
                                }
                                ))
                            }
                        }
                        ,
                        l._createLicenseXhr = function(e, t, a) {
                            var r = new XMLHttpRequest
                              , n = this._licenseXhrSetup;
                            try {
                                if (n)
                                    try {
                                        n(r, e)
                                    } catch (t) {
                                        r.open("POST", e, !0),
                                        n(r, e)
                                    }
                                r.readyState || r.open("POST", e, !0)
                            } catch (e) {
                                throw new Error("issue setting up KeySystem license XHR " + e)
                            }
                            return r.responseType = "arraybuffer",
                            r.onreadystatechange = this._onLicenseRequestReadyStageChange.bind(this, r, e, t, a),
                            r
                        }
                        ,
                        l._onLicenseRequestReadyStageChange = function(e, t, a, r) {
                            switch (e.readyState) {
                            case 4:
                                if (200 === e.status)
                                    this._requestLicenseFailureCount = 0,
                                    d.logger.log("License request succeeded"),
                                    "arraybuffer" !== e.responseType && d.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),
                                    r(e.response);
                                else {
                                    if (d.logger.error("License Request XHR failed (" + t + "). Status: " + e.status + " (" + e.statusText + ")"),
                                    this._requestLicenseFailureCount++,
                                    this._requestLicenseFailureCount > 3)
                                        return void this.hls.trigger(u.default.ERROR, {
                                            type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                            details: s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                            fatal: !0
                                        });
                                    var n = 3 - this._requestLicenseFailureCount + 1;
                                    d.logger.warn("Retrying license request, " + n + " attempts left"),
                                    this._requestLicense(a, r)
                                }
                            }
                        }
                        ,
                        l._generateLicenseRequestChallenge = function(e, t) {
                            switch (e.mediaKeySystemDomain) {
                            case Gt.WIDEVINE:
                                return t
                            }
                            throw new Error("unsupported key-system: " + e.mediaKeySystemDomain)
                        }
                        ,
                        l._requestLicense = function(e, t) {
                            d.logger.log("Requesting content license for key-system");
                            var a = this._mediaKeysList[0];
                            if (!a)
                                return d.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),
                                void this.hls.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,
                                    fatal: !0
                                });
                            try {
                                var r = this.getLicenseServerUrl(a.mediaKeySystemDomain)
                                  , n = this._createLicenseXhr(r, e, t);
                                d.logger.log("Sending license request to URL: " + r);
                                var i = this._generateLicenseRequestChallenge(a, e);
                                n.send(i)
                            } catch (e) {
                                d.logger.error("Failure requesting DRM license: " + e),
                                this.hls.trigger(u.default.ERROR, {
                                    type: s.ErrorTypes.KEY_SYSTEM_ERROR,
                                    details: s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                    fatal: !0
                                })
                            }
                        }
                        ,
                        l.onMediaAttached = function(e) {
                            if (this._emeEnabled) {
                                var t = e.media;
                                this._media = t,
                                t.addEventListener("encrypted", this._onMediaEncrypted)
                            }
                        }
                        ,
                        l.onMediaDetached = function() {
                            var e = this._media
                              , t = this._mediaKeysList;
                            e && (e.removeEventListener("encrypted", this._onMediaEncrypted),
                            this._media = null,
                            this._mediaKeysList = [],
                            Promise.all(t.map((function(e) {
                                if (e.mediaKeysSession)
                                    return e.mediaKeysSession.close().catch((function() {}
                                    ))
                            }
                            ))).then((function() {
                                return e.setMediaKeys(null)
                            }
                            )).catch((function() {}
                            )))
                        }
                        ,
                        l.onManifestParsed = function(e) {
                            if (this._emeEnabled) {
                                var t = e.levels.map((function(e) {
                                    return e.audioCodec
                                }
                                ))
                                  , a = e.levels.map((function(e) {
                                    return e.videoCodec
                                }
                                ));
                                this._attemptKeySystemAccess(Gt.WIDEVINE, t, a)
                            }
                        }
                        ,
                        n = r,
                        (i = [{
                            key: "requestMediaKeySystemAccess",
                            get: function() {
                                if (!this._requestMediaKeySystemAccess)
                                    throw new Error("No requestMediaKeySystemAccess function configured");
                                return this._requestMediaKeySystemAccess
                            }
                        }]) && Wt(n.prototype, i),
                        o && Wt(n, o),
                        r
                    }(f);
                    function zt(e, t) {
                        var a = Object.keys(e);
                        if (Object.getOwnPropertySymbols) {
                            var r = Object.getOwnPropertySymbols(e);
                            t && (r = r.filter((function(t) {
                                return Object.getOwnPropertyDescriptor(e, t).enumerable
                            }
                            ))),
                            a.push.apply(a, r)
                        }
                        return a
                    }
                    function Xt(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var a = null != arguments[t] ? arguments[t] : {};
                            t % 2 ? zt(Object(a), !0).forEach((function(t) {
                                Qt(e, t, a[t])
                            }
                            )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : zt(Object(a)).forEach((function(t) {
                                Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                            }
                            ))
                        }
                        return e
                    }
                    function Qt(e, t, a) {
                        return t in e ? Object.defineProperty(e, t, {
                            value: a,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : e[t] = a,
                        e
                    }
                    var Jt = Xt(Xt({
                        autoStartLoad: !0,
                        startPosition: -1,
                        defaultAudioCodec: void 0,
                        debug: !1,
                        capLevelOnFPSDrop: !1,
                        capLevelToPlayerSize: !1,
                        initialLiveManifestSize: 1,
                        maxBufferLength: 30,
                        maxBufferSize: 6e7,
                        maxBufferHole: .5,
                        lowBufferWatchdogPeriod: .5,
                        highBufferWatchdogPeriod: 3,
                        nudgeOffset: .1,
                        nudgeMaxRetry: 3,
                        maxFragLookUpTolerance: .25,
                        liveSyncDurationCount: 3,
                        liveMaxLatencyDurationCount: 1 / 0,
                        liveSyncDuration: void 0,
                        liveMaxLatencyDuration: void 0,
                        liveDurationInfinity: !1,
                        liveBackBufferLength: 1 / 0,
                        maxMaxBufferLength: 600,
                        enableWorker: !0,
                        enableSoftwareAES: !0,
                        manifestLoadingTimeOut: 1e4,
                        manifestLoadingMaxRetry: 1,
                        manifestLoadingRetryDelay: 1e3,
                        manifestLoadingMaxRetryTimeout: 64e3,
                        startLevel: void 0,
                        levelLoadingTimeOut: 1e4,
                        levelLoadingMaxRetry: 4,
                        levelLoadingRetryDelay: 1e3,
                        levelLoadingMaxRetryTimeout: 64e3,
                        fragLoadingTimeOut: 2e4,
                        fragLoadingMaxRetry: 6,
                        fragLoadingRetryDelay: 1e3,
                        fragLoadingMaxRetryTimeout: 64e3,
                        startFragPrefetch: !1,
                        fpsDroppedMonitoringPeriod: 5e3,
                        fpsDroppedMonitoringThreshold: .2,
                        appendErrorMaxRetry: 3,
                        loader: Qe,
                        fLoader: void 0,
                        pLoader: void 0,
                        xhrSetup: void 0,
                        licenseXhrSetup: void 0,
                        abrController: $e,
                        bufferController: He,
                        capLevelController: Ye,
                        fpsController: Xe,
                        stretchShortVideoTrack: !1,
                        maxAudioFramesDrift: 1,
                        forceKeyFrameOnDiscontinuity: !0,
                        abrEwmaFastLive: 3,
                        abrEwmaSlowLive: 9,
                        abrEwmaFastVoD: 3,
                        abrEwmaSlowVoD: 9,
                        abrEwmaDefaultEstimate: 5e5,
                        abrBandWidthFactor: .95,
                        abrBandWidthUpFactor: .7,
                        abrMaxWithRealBitrate: !1,
                        maxStarvationDelay: 4,
                        maxLoadingDelay: 4,
                        minAutoBitrate: 0,
                        emeEnabled: !1,
                        widevineLicenseUrl: void 0,
                        drmSystemOptions: {},
                        requestMediaKeySystemAccessFunc: Ht,
                        testBandwidth: !0
                    }, {
                        cueHandler: r,
                        enableCEA708Captions: !0,
                        enableWebVTT: !0,
                        captionsTextTrack1Label: "English",
                        captionsTextTrack1LanguageCode: "en",
                        captionsTextTrack2Label: "Spanish",
                        captionsTextTrack2LanguageCode: "es",
                        captionsTextTrack3Label: "Unknown CC",
                        captionsTextTrack3LanguageCode: "",
                        captionsTextTrack4Label: "Unknown CC",
                        captionsTextTrack4LanguageCode: "",
                        renderTextTracksNatively: !0
                    }), {}, {
                        subtitleStreamController: qt,
                        subtitleTrackController: Vt,
                        timelineController: Ft,
                        audioStreamController: at,
                        audioTrackController: Ze,
                        emeController: Yt
                    });
                    function Zt(e, t) {
                        var a = Object.keys(e);
                        if (Object.getOwnPropertySymbols) {
                            var r = Object.getOwnPropertySymbols(e);
                            t && (r = r.filter((function(t) {
                                return Object.getOwnPropertyDescriptor(e, t).enumerable
                            }
                            ))),
                            a.push.apply(a, r)
                        }
                        return a
                    }
                    function ea(e) {
                        for (var t = 1; t < arguments.length; t++) {
                            var a = null != arguments[t] ? arguments[t] : {};
                            t % 2 ? Zt(Object(a), !0).forEach((function(t) {
                                ta(e, t, a[t])
                            }
                            )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : Zt(Object(a)).forEach((function(t) {
                                Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                            }
                            ))
                        }
                        return e
                    }
                    function ta(e, t, a) {
                        return t in e ? Object.defineProperty(e, t, {
                            value: a,
                            enumerable: !0,
                            configurable: !0,
                            writable: !0
                        }) : e[t] = a,
                        e
                    }
                    function aa(e) {
                        if (void 0 === e)
                            throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e
                    }
                    function ra(e, t) {
                        for (var a = 0; a < t.length; a++) {
                            var r = t[a];
                            r.enumerable = r.enumerable || !1,
                            r.configurable = !0,
                            "value"in r && (r.writable = !0),
                            Object.defineProperty(e, r.key, r)
                        }
                    }
                    function na(e, t, a) {
                        return t && ra(e.prototype, t),
                        a && ra(e, a),
                        e
                    }
                    var ia = function(e) {
                        var t, a;
                        function r(t) {
                            var a;
                            void 0 === t && (t = {}),
                            (a = e.call(this) || this).config = void 0,
                            a._autoLevelCapping = void 0,
                            a.abrController = void 0,
                            a.capLevelController = void 0,
                            a.levelController = void 0,
                            a.streamController = void 0,
                            a.networkControllers = void 0,
                            a.audioTrackController = void 0,
                            a.subtitleTrackController = void 0,
                            a.emeController = void 0,
                            a.coreComponents = void 0,
                            a.media = null,
                            a.url = null;
                            var n = r.DefaultConfig;
                            if ((t.liveSyncDurationCount || t.liveMaxLatencyDurationCount) && (t.liveSyncDuration || t.liveMaxLatencyDuration))
                                throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");
                            a.config = ea(ea({}, n), t);
                            var i = aa(a).config;
                            if (void 0 !== i.liveMaxLatencyDurationCount && i.liveMaxLatencyDurationCount <= i.liveSyncDurationCount)
                                throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');
                            if (void 0 !== i.liveMaxLatencyDuration && (void 0 === i.liveSyncDuration || i.liveMaxLatencyDuration <= i.liveSyncDuration))
                                throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');
                            Object(d.enableLogs)(i.debug),
                            a._autoLevelCapping = -1;
                            var o = a.abrController = new i.abrController(aa(a))
                              , s = new i.bufferController(aa(a))
                              , l = a.capLevelController = new i.capLevelController(aa(a))
                              , u = new i.fpsController(aa(a))
                              , c = new O(aa(a))
                              , f = new N(aa(a))
                              , h = new L(aa(a))
                              , p = new Be(aa(a))
                              , g = a.levelController = new Ne(aa(a))
                              , m = new G(aa(a))
                              , y = [g, a.streamController = new De(aa(a),m)]
                              , _ = i.audioStreamController;
                            _ && y.push(new _(aa(a),m)),
                            a.networkControllers = y;
                            var v = [c, f, h, o, s, l, u, p, m];
                            if (_ = i.audioTrackController) {
                                var b = new _(aa(a));
                                a.audioTrackController = b,
                                v.push(b)
                            }
                            if (_ = i.subtitleTrackController) {
                                var E = new _(aa(a));
                                a.subtitleTrackController = E,
                                y.push(E)
                            }
                            if (_ = i.emeController) {
                                var k = new _(aa(a));
                                a.emeController = k,
                                v.push(k)
                            }
                            return (_ = i.subtitleStreamController) && y.push(new _(aa(a),m)),
                            (_ = i.timelineController) && v.push(new _(aa(a))),
                            a.coreComponents = v,
                            a
                        }
                        a = e,
                        (t = r).prototype = Object.create(a.prototype),
                        t.prototype.constructor = t,
                        t.__proto__ = a,
                        r.isSupported = function() {
                            return function() {
                                var e = W();
                                if (!e)
                                    return !1;
                                var t = self.SourceBuffer || self.WebKitSourceBuffer
                                  , a = e && "function" == typeof e.isTypeSupported && e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')
                                  , r = !t || t.prototype && "function" == typeof t.prototype.appendBuffer && "function" == typeof t.prototype.remove;
                                return !!a && !!r
                            }()
                        }
                        ,
                        na(r, null, [{
                            key: "version",
                            get: function() {
                                return "0.14.11"
                            }
                        }, {
                            key: "Events",
                            get: function() {
                                return u.default
                            }
                        }, {
                            key: "ErrorTypes",
                            get: function() {
                                return s.ErrorTypes
                            }
                        }, {
                            key: "ErrorDetails",
                            get: function() {
                                return s.ErrorDetails
                            }
                        }, {
                            key: "DefaultConfig",
                            get: function() {
                                return r.defaultConfig ? r.defaultConfig : Jt
                            },
                            set: function(e) {
                                r.defaultConfig = e
                            }
                        }]);
                        var n = r.prototype;
                        return n.destroy = function() {
                            d.logger.log("destroy"),
                            this.trigger(u.default.DESTROYING),
                            this.detachMedia(),
                            this.coreComponents.concat(this.networkControllers).forEach((function(e) {
                                e.destroy()
                            }
                            )),
                            this.url = null,
                            this.removeAllListeners(),
                            this._autoLevelCapping = -1
                        }
                        ,
                        n.attachMedia = function(e) {
                            d.logger.log("attachMedia"),
                            this.media = e,
                            this.trigger(u.default.MEDIA_ATTACHING, {
                                media: e
                            })
                        }
                        ,
                        n.detachMedia = function() {
                            d.logger.log("detachMedia"),
                            this.trigger(u.default.MEDIA_DETACHING),
                            this.media = null
                        }
                        ,
                        n.loadSource = function(e) {
                            e = o.buildAbsoluteURL(window.location.href, e, {
                                alwaysNormalize: !0
                            }),
                            d.logger.log("loadSource:" + e),
                            this.url = e,
                            this.trigger(u.default.MANIFEST_LOADING, {
                                url: e
                            })
                        }
                        ,
                        n.startLoad = function(e) {
                            void 0 === e && (e = -1),
                            d.logger.log("startLoad(" + e + ")"),
                            this.networkControllers.forEach((function(t) {
                                t.startLoad(e)
                            }
                            ))
                        }
                        ,
                        n.stopLoad = function() {
                            d.logger.log("stopLoad"),
                            this.networkControllers.forEach((function(e) {
                                e.stopLoad()
                            }
                            ))
                        }
                        ,
                        n.swapAudioCodec = function() {
                            d.logger.log("swapAudioCodec"),
                            this.streamController.swapAudioCodec()
                        }
                        ,
                        n.recoverMediaError = function() {
                            d.logger.log("recoverMediaError");
                            var e = this.media;
                            this.detachMedia(),
                            e && this.attachMedia(e)
                        }
                        ,
                        n.removeLevel = function(e, t) {
                            void 0 === t && (t = 0),
                            this.levelController.removeLevel(e, t)
                        }
                        ,
                        na(r, [{
                            key: "levels",
                            get: function() {
                                return this.levelController.levels
                            }
                        }, {
                            key: "currentLevel",
                            get: function() {
                                return this.streamController.currentLevel
                            },
                            set: function(e) {
                                d.logger.log("set currentLevel:" + e),
                                this.loadLevel = e,
                                this.streamController.immediateLevelSwitch()
                            }
                        }, {
                            key: "nextLevel",
                            get: function() {
                                return this.streamController.nextLevel
                            },
                            set: function(e) {
                                d.logger.log("set nextLevel:" + e),
                                this.levelController.manualLevel = e,
                                this.streamController.nextLevelSwitch()
                            }
                        }, {
                            key: "loadLevel",
                            get: function() {
                                return this.levelController.level
                            },
                            set: function(e) {
                                d.logger.log("set loadLevel:" + e),
                                this.levelController.manualLevel = e
                            }
                        }, {
                            key: "nextLoadLevel",
                            get: function() {
                                return this.levelController.nextLoadLevel
                            },
                            set: function(e) {
                                this.levelController.nextLoadLevel = e
                            }
                        }, {
                            key: "firstLevel",
                            get: function() {
                                return Math.max(this.levelController.firstLevel, this.minAutoLevel)
                            },
                            set: function(e) {
                                d.logger.log("set firstLevel:" + e),
                                this.levelController.firstLevel = e
                            }
                        }, {
                            key: "startLevel",
                            get: function() {
                                return this.levelController.startLevel
                            },
                            set: function(e) {
                                d.logger.log("set startLevel:" + e),
                                -1 !== e && (e = Math.max(e, this.minAutoLevel)),
                                this.levelController.startLevel = e
                            }
                        }, {
                            key: "capLevelToPlayerSize",
                            set: function(e) {
                                var t = !!e;
                                t !== this.config.capLevelToPlayerSize && (t ? this.capLevelController.startCapping() : (this.capLevelController.stopCapping(),
                                this.autoLevelCapping = -1,
                                this.streamController.nextLevelSwitch()),
                                this.config.capLevelToPlayerSize = t)
                            }
                        }, {
                            key: "autoLevelCapping",
                            get: function() {
                                return this._autoLevelCapping
                            },
                            set: function(e) {
                                d.logger.log("set autoLevelCapping:" + e),
                                this._autoLevelCapping = e
                            }
                        }, {
                            key: "bandwidthEstimate",
                            get: function() {
                                var e = this.abrController._bwEstimator;
                                return e ? e.getEstimate() : NaN
                            }
                        }, {
                            key: "autoLevelEnabled",
                            get: function() {
                                return -1 === this.levelController.manualLevel
                            }
                        }, {
                            key: "manualLevel",
                            get: function() {
                                return this.levelController.manualLevel
                            }
                        }, {
                            key: "minAutoLevel",
                            get: function() {
                                for (var e = this.levels, t = this.config.minAutoBitrate, a = e ? e.length : 0, r = 0; r < a; r++)
                                    if ((e[r].realBitrate ? Math.max(e[r].realBitrate, e[r].bitrate) : e[r].bitrate) > t)
                                        return r;
                                return 0
                            }
                        }, {
                            key: "maxAutoLevel",
                            get: function() {
                                var e = this.levels
                                  , t = this.autoLevelCapping;
                                return -1 === t && e && e.length ? e.length - 1 : t
                            }
                        }, {
                            key: "nextAutoLevel",
                            get: function() {
                                return Math.min(Math.max(this.abrController.nextAutoLevel, this.minAutoLevel), this.maxAutoLevel)
                            },
                            set: function(e) {
                                this.abrController.nextAutoLevel = Math.max(this.minAutoLevel, e)
                            }
                        }, {
                            key: "audioTracks",
                            get: function() {
                                var e = this.audioTrackController;
                                return e ? e.audioTracks : []
                            }
                        }, {
                            key: "audioTrack",
                            get: function() {
                                var e = this.audioTrackController;
                                return e ? e.audioTrack : -1
                            },
                            set: function(e) {
                                var t = this.audioTrackController;
                                t && (t.audioTrack = e)
                            }
                        }, {
                            key: "liveSyncPosition",
                            get: function() {
                                return this.streamController.liveSyncPosition
                            }
                        }, {
                            key: "subtitleTracks",
                            get: function() {
                                var e = this.subtitleTrackController;
                                return e ? e.subtitleTracks : []
                            }
                        }, {
                            key: "subtitleTrack",
                            get: function() {
                                var e = this.subtitleTrackController;
                                return e ? e.subtitleTrack : -1
                            },
                            set: function(e) {
                                var t = this.subtitleTrackController;
                                t && (t.subtitleTrack = e)
                            }
                        }, {
                            key: "subtitleDisplay",
                            get: function() {
                                var e = this.subtitleTrackController;
                                return !!e && e.subtitleDisplay
                            },
                            set: function(e) {
                                var t = this.subtitleTrackController;
                                t && (t.subtitleDisplay = e)
                            }
                        }]),
                        r
                    }(z);
                    ia.defaultConfig = void 0
                },
                "./src/polyfills/number.js": /*!*********************************!*\
  !*** ./src/polyfills/number.js ***!
  \*********************************/
                /*! exports provided: isFiniteNumber, MAX_SAFE_INTEGER */
                function(e, t, a) {
                    "use strict";
                    a.r(t),
                    a.d(t, "isFiniteNumber", (function() {
                        return r
                    }
                    )),
                    a.d(t, "MAX_SAFE_INTEGER", (function() {
                        return n
                    }
                    ));
                    var r = Number.isFinite || function(e) {
                        return "number" == typeof e && isFinite(e)
                    }
                      , n = Number.MAX_SAFE_INTEGER || 9007199254740991
                },
                "./src/utils/get-self-scope.js": /*!*************************************!*\
  !*** ./src/utils/get-self-scope.js ***!
  \*************************************/
                /*! exports provided: getSelfScope */
                function(e, t, a) {
                    "use strict";
                    function r() {
                        return "undefined" == typeof window ? self : window
                    }
                    a.r(t),
                    a.d(t, "getSelfScope", (function() {
                        return r
                    }
                    ))
                },
                "./src/utils/logger.js": /*!*****************************!*\
  !*** ./src/utils/logger.js ***!
  \*****************************/
                /*! exports provided: enableLogs, logger */
                function(e, t, a) {
                    "use strict";
                    a.r(t),
                    a.d(t, "enableLogs", (function() {
                        return d
                    }
                    )),
                    a.d(t, "logger", (function() {
                        return c
                    }
                    ));
                    var r = a(/*! ./get-self-scope */
                    "./src/utils/get-self-scope.js");
                    function n() {}
                    var i = {
                        trace: n,
                        debug: n,
                        log: n,
                        warn: n,
                        info: n,
                        error: n
                    }
                      , o = i;
                    function s(e, t) {
                        return t = "[" + e + "] > " + t
                    }
                    var l = Object(r.getSelfScope)();
                    function u(e) {
                        var t = l.console[e];
                        return t ? function() {
                            for (var a = arguments.length, r = new Array(a), n = 0; n < a; n++)
                                r[n] = arguments[n];
                            r[0] && (r[0] = s(e, r[0])),
                            t.apply(l.console, r)
                        }
                        : n
                    }
                    var d = function(e) {
                        if (l.console && !0 === e || "object" == typeof e) {
                            !function(e) {
                                for (var t = arguments.length, a = new Array(t > 1 ? t - 1 : 0), r = 1; r < t; r++)
                                    a[r - 1] = arguments[r];
                                a.forEach((function(t) {
                                    o[t] = e[t] ? e[t].bind(e) : u(t)
                                }
                                ))
                            }(e, "debug", "log", "info", "warn", "error");
                            try {
                                o.log()
                            } catch (e) {
                                o = i
                            }
                        } else
                            o = i
                    }
                      , c = o
                }
            }).default
        }
        ,
        e.exports = r())
    }
    , function(e, t, a) {
        "use strict";
        var r, n = a(236), i = a(15), o = a(6), s = a(13), l = a(16), u = a(83), d = a(26), c = a(27), f = a(18).f, h = a(84), p = a(85), g = a(11), m = a(76), y = o.Int8Array, _ = y && y.prototype, v = o.Uint8ClampedArray, b = v && v.prototype, E = y && h(y), k = _ && h(_), T = Object.prototype, S = T.isPrototypeOf, A = g("toStringTag"), C = m("TYPED_ARRAY_TAG"), I = n && !!p && "Opera" !== u(o.opera), P = !1, w = {
            Int8Array: 1,
            Uint8Array: 1,
            Uint8ClampedArray: 1,
            Int16Array: 2,
            Uint16Array: 2,
            Int32Array: 4,
            Uint32Array: 4,
            Float32Array: 4,
            Float64Array: 8
        }, M = function(e) {
            return s(e) && l(w, u(e))
        };
        for (r in w)
            o[r] || (I = !1);
        if ((!I || "function" != typeof E || E === Function.prototype) && (E = function() {
            throw TypeError("Incorrect invocation")
        }
        ,
        I))
            for (r in w)
                o[r] && p(o[r], E);
        if ((!I || !k || k === T) && (k = E.prototype,
        I))
            for (r in w)
                o[r] && p(o[r].prototype, k);
        if (I && h(b) !== k && p(b, k),
        i && !l(k, A))
            for (r in P = !0,
            f(k, A, {
                get: function() {
                    return s(this) ? this[C] : void 0
                }
            }),
            w)
                o[r] && d(o[r], C, r);
        e.exports = {
            NATIVE_ARRAY_BUFFER_VIEWS: I,
            TYPED_ARRAY_TAG: P && C,
            aTypedArray: function(e) {
                if (M(e))
                    return e;
                throw TypeError("Target is not a typed array")
            },
            aTypedArrayConstructor: function(e) {
                if (p) {
                    if (S.call(E, e))
                        return e
                } else
                    for (var t in w)
                        if (l(w, r)) {
                            var a = o[t];
                            if (a && (e === a || S.call(a, e)))
                                return e
                        }
                throw TypeError("Target is not a typed array constructor")
            },
            exportTypedArrayMethod: function(e, t, a) {
                if (i) {
                    if (a)
                        for (var r in w) {
                            var n = o[r];
                            n && l(n.prototype, e) && delete n.prototype[e]
                        }
                    k[e] && !a || c(k, e, a ? t : I && _[e] || t)
                }
            },
            exportTypedArrayStaticMethod: function(e, t, a) {
                var r, n;
                if (i) {
                    if (p) {
                        if (a)
                            for (r in w)
                                (n = o[r]) && l(n, e) && delete n[e];
                        if (E[e] && !a)
                            return;
                        try {
                            return c(E, e, a ? t : I && y[e] || t)
                        } catch (e) {}
                    }
                    for (r in w)
                        !(n = o[r]) || n[e] && !a || c(n, e, t)
                }
            },
            isView: function(e) {
                var t = u(e);
                return "DataView" === t || l(w, t)
            },
            isTypedArray: M,
            TypedArray: E,
            TypedArrayPrototype: k
        }
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(145)
          , i = a(16)
          , o = a(76)
          , s = a(148)
          , l = a(185)
          , u = n("wks")
          , d = r.Symbol
          , c = l ? d : d && d.withoutSetter || o;
        e.exports = function(e) {
            return i(u, e) || (s && i(d, e) ? u[e] = d[e] : u[e] = c("Symbol." + e)),
            u[e]
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e(t, a, r) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.code = t || null,
            this.message = a || null,
            this.data = r || null
        }
    }
    , function(e, t) {
        e.exports = function(e) {
            return "object" == typeof e ? null !== e : "function" == typeof e
        }
    }
    , function(e, t, a) {
        var r = a(35)
          , n = Math.min;
        e.exports = function(e) {
            return e > 0 ? n(r(e), 9007199254740991) : 0
        }
    }
    , function(e, t, a) {
        var r = a(7);
        e.exports = !r((function() {
            return 7 != Object.defineProperty({}, 1, {
                get: function() {
                    return 7
                }
            })[1]
        }
        ))
    }
    , function(e, t) {
        var a = {}.hasOwnProperty;
        e.exports = function(e, t) {
            return a.call(e, t)
        }
    }
    , function(e, t, a) {
        var r = a(13);
        e.exports = function(e) {
            if (!r(e))
                throw TypeError(String(e) + " is not an object");
            return e
        }
    }
    , function(e, t, a) {
        var r = a(15)
          , n = a(180)
          , i = a(17)
          , o = a(63)
          , s = Object.defineProperty;
        t.f = r ? s : function(e, t, a) {
            if (i(e),
            t = o(t, !0),
            i(a),
            n)
                try {
                    return s(e, t, a)
                } catch (e) {}
            if ("get"in a || "set"in a)
                throw TypeError("Accessors not supported");
            return "value"in a && (e[t] = a.value),
            e
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = new (function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.init()
            }
            return r(e, [{
                key: "init",
                value: function() {
                    this.BASE_URL = "BaseURL",
                    this.SEGMENT_BASE = "SegmentBase",
                    this.SEGMENT_TEMPLATE = "SegmentTemplate",
                    this.SEGMENT_LIST = "SegmentList",
                    this.SEGMENT_URL = "SegmentURL",
                    this.SEGMENT_TIMELINE = "SegmentTimeline",
                    this.SEGMENT_PROFILES = "segmentProfiles",
                    this.ADAPTATION_SET = "AdaptationSet",
                    this.REPRESENTATION = "Representation",
                    this.REPRESENTATION_INDEX = "RepresentationIndex",
                    this.SUB_REPRESENTATION = "SubRepresentation",
                    this.INITIALIZATION = "Initialization",
                    this.INITIALIZATION_MINUS = "initialization",
                    this.MPD = "MPD",
                    this.PERIOD = "Period",
                    this.ASSET_IDENTIFIER = "AssetIdentifier",
                    this.EVENT_STREAM = "EventStream",
                    this.ID = "id",
                    this.PROFILES = "profiles",
                    this.SERVICE_LOCATION = "serviceLocation",
                    this.RANGE = "range",
                    this.INDEX = "index",
                    this.MEDIA = "media",
                    this.BYTE_RANGE = "byteRange",
                    this.INDEX_RANGE = "indexRange",
                    this.MEDIA_RANGE = "mediaRange",
                    this.VALUE = "value",
                    this.CONTENT_TYPE = "contentType",
                    this.MIME_TYPE = "mimeType",
                    this.BITSTREAM_SWITCHING = "BitstreamSwitching",
                    this.BITSTREAM_SWITCHING_MINUS = "bitstreamSwitching",
                    this.CODECS = "codecs",
                    this.DEPENDENCY_ID = "dependencyId",
                    this.MEDIA_STREAM_STRUCTURE_ID = "mediaStreamStructureId",
                    this.METRICS = "Metrics",
                    this.METRICS_MINUS = "metrics",
                    this.REPORTING = "Reporting",
                    this.WIDTH = "width",
                    this.HEIGHT = "height",
                    this.SAR = "sar",
                    this.FRAMERATE = "frameRate",
                    this.AUDIO_SAMPLING_RATE = "audioSamplingRate",
                    this.MAXIMUM_SAP_PERIOD = "maximumSAPPeriod",
                    this.START_WITH_SAP = "startWithSAP",
                    this.MAX_PLAYOUT_RATE = "maxPlayoutRate",
                    this.CODING_DEPENDENCY = "codingDependency",
                    this.SCAN_TYPE = "scanType",
                    this.FRAME_PACKING = "FramePacking",
                    this.AUDIO_CHANNEL_CONFIGURATION = "AudioChannelConfiguration",
                    this.CONTENT_PROTECTION = "ContentProtection",
                    this.ESSENTIAL_PROPERTY = "EssentialProperty",
                    this.SUPPLEMENTAL_PROPERTY = "SupplementalProperty",
                    this.INBAND_EVENT_STREAM = "InbandEventStream",
                    this.ACCESSIBILITY = "Accessibility",
                    this.ROLE = "Role",
                    this.RATING = "Rating",
                    this.CONTENT_COMPONENT = "ContentComponent",
                    this.SUBSET = "Subset",
                    this.LANG = "lang",
                    this.VIEWPOINT = "Viewpoint",
                    this.ROLE_ASARRAY = "Role_asArray",
                    this.ACCESSIBILITY_ASARRAY = "Accessibility_asArray",
                    this.AUDIOCHANNELCONFIGURATION_ASARRAY = "AudioChannelConfiguration_asArray",
                    this.CONTENTPROTECTION_ASARRAY = "ContentProtection_asArray",
                    this.MAIN = "main",
                    this.DYNAMIC = "dynamic",
                    this.STATIC = "static",
                    this.MEDIA_PRESENTATION_DURATION = "mediaPresentationDuration",
                    this.MINIMUM_UPDATE_PERIOD = "minimumUpdatePeriod",
                    this.CODEC_PRIVATE_DATA = "codecPrivateData",
                    this.BANDWITH = "bandwidth",
                    this.SOURCE_URL = "sourceURL",
                    this.TIMESCALE = "timescale",
                    this.DURATION = "duration",
                    this.START_NUMBER = "startNumber",
                    this.PRESENTATION_TIME_OFFSET = "presentationTimeOffset",
                    this.AVAILABILITY_START_TIME = "availabilityStartTime",
                    this.AVAILABILITY_END_TIME = "availabilityEndTime",
                    this.TIMESHIFT_BUFFER_DEPTH = "timeShiftBufferDepth",
                    this.MAX_SEGMENT_DURATION = "maxSegmentDuration",
                    this.PRESENTATION_TIME = "presentationTime",
                    this.MIN_BUFFER_TIME = "minBufferTime",
                    this.MAX_SUBSEGMENT_DURATION = "maxSubsegmentDuration",
                    this.START = "start",
                    this.AVAILABILITY_TIME_OFFSET = "availabilityTimeOffset",
                    this.AVAILABILITY_TIME_COMPLETE = "availabilityTimeComplete",
                    this.CENC_DEFAULT_KID = "cenc:default_KID",
                    this.DVB_PRIORITY = "dvb:priority",
                    this.DVB_WEIGHT = "dvb:weight",
                    this.SUGGESTED_PRESENTATION_DELAY = "suggestedPresentationDelay",
                    this.SERVICE_DESCRIPTION = "ServiceDescription",
                    this.SERVICE_DESCRIPTION_SCOPE = "Scope",
                    this.SERVICE_DESCRIPTION_LATENCY = "Latency",
                    this.SERVICE_DESCRIPTION_PLAYBACK_RATE = "PlaybackRate"
                }
            }]),
            e
        }());
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        function r(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function e() {
            r(this, e),
            this.tcpid = null,
            this.type = null,
            this.url = null,
            this.actualurl = null,
            this.range = null,
            this.trequest = null,
            this.tresponse = null,
            this.responsecode = null,
            this.interval = null,
            this.trace = [],
            this._stream = null,
            this._tfinish = null,
            this._mediaduration = null,
            this._quality = null,
            this._responseHeaders = null,
            this._serviceLocation = null
        };
        n.GET = "GET",
        n.HEAD = "HEAD",
        n.MPD_TYPE = "MPD",
        n.XLINK_EXPANSION_TYPE = "XLinkExpansion",
        n.INIT_SEGMENT_TYPE = "InitializationSegment",
        n.INDEX_SEGMENT_TYPE = "IndexSegment",
        n.MEDIA_SEGMENT_TYPE = "MediaSegment",
        n.BITSTREAM_SWITCHING_SEGMENT_TYPE = "BitstreamSwitchingSegment",
        n.OTHER_TYPE = "other",
        t.HTTPRequest = n,
        t.HTTPRequestTrace = function e() {
            r(this, e),
            this.s = null,
            this.d = null,
            this.b = []
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(163);
        var i = new (function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE = 10,
                e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE = 11,
                e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE = 12,
                e.SEGMENTS_UPDATE_FAILED_ERROR_CODE = 13,
                e.SEGMENTS_UNAVAILABLE_ERROR_CODE = 14,
                e.SEGMENT_BASE_LOADER_ERROR_CODE = 15,
                e.TIME_SYNC_FAILED_ERROR_CODE = 16,
                e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE = 17,
                e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE = 18,
                e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE = 19,
                e.APPEND_ERROR_CODE = 20,
                e.REMOVE_ERROR_CODE = 21,
                e.DATA_UPDATE_FAILED_ERROR_CODE = 22,
                e.CAPABILITY_MEDIASOURCE_ERROR_CODE = 23,
                e.CAPABILITY_MEDIAKEYS_ERROR_CODE = 24,
                e.DOWNLOAD_ERROR_ID_MANIFEST_CODE = 25,
                e.DOWNLOAD_ERROR_ID_SIDX_CODE = 26,
                e.DOWNLOAD_ERROR_ID_CONTENT_CODE = 27,
                e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE = 28,
                e.DOWNLOAD_ERROR_ID_XLINK_CODE = 29,
                e.MANIFEST_ERROR_ID_CODEC_CODE = 30,
                e.MANIFEST_ERROR_ID_PARSE_CODE = 31,
                e.MANIFEST_ERROR_ID_NOSTREAMS_CODE = 32,
                e.TIMED_TEXT_ERROR_ID_PARSE_CODE = 33,
                e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE = 34,
                e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE = 35,
                e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE = "parsing failed for ",
                e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE = "Failed loading manifest: ",
                e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE = "Failed loading Xlink element: ",
                e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE = "Segments update failed",
                e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE = "no segments are available yet",
                e.SEGMENT_BASE_LOADER_ERROR_MESSAGE = "error loading segments",
                e.TIME_SYNC_FAILED_ERROR_MESSAGE = "Failed to synchronize time",
                e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE = "request is null",
                e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE = "Failed to resolve a valid URL",
                e.APPEND_ERROR_MESSAGE = "chunk is not defined",
                e.REMOVE_ERROR_MESSAGE = "buffer is not defined",
                e.DATA_UPDATE_FAILED_ERROR_MESSAGE = "Data update failed",
                e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE = "mediasource is not supported",
                e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE = "mediakeys is not supported",
                e.TIMED_TEXT_ERROR_MESSAGE_PARSE = "parsing error :",
                e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE = "Error creating source buffer of type : ",
                e
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default));
        t.default = i
    }
    , function(e, t, a) {
        var r = a(42);
        e.exports = function(e) {
            return Object(r(e))
        }
    }
    , function(e, t, a) {
        var r = a(59)
          , n = a(92)
          , i = a(22)
          , o = a(14)
          , s = a(190)
          , l = [].push
          , u = function(e) {
            var t = 1 == e
              , a = 2 == e
              , u = 3 == e
              , d = 4 == e
              , c = 6 == e
              , f = 5 == e || c;
            return function(h, p, g, m) {
                for (var y, _, v = i(h), b = n(v), E = r(p, g, 3), k = o(b.length), T = 0, S = m || s, A = t ? S(h, k) : a ? S(h, 0) : void 0; k > T; T++)
                    if ((f || T in b) && (_ = E(y = b[T], T, v),
                    e))
                        if (t)
                            A[T] = _;
                        else if (_)
                            switch (e) {
                            case 3:
                                return !0;
                            case 5:
                                return y;
                            case 6:
                                return T;
                            case 2:
                                l.call(A, y)
                            }
                        else if (d)
                            return !1;
                return c ? -1 : u || d ? d : A
            }
        };
        e.exports = {
            forEach: u(0),
            map: u(1),
            filter: u(2),
            some: u(3),
            every: u(4),
            find: u(5),
            findIndex: u(6)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(33)
          , n = a(152)
          , i = a(81)
          , o = a(34)
          , s = a(153)
          , l = o.set
          , u = o.getterFor("Array Iterator");
        e.exports = s(Array, "Array", (function(e, t) {
            l(this, {
                type: "Array Iterator",
                target: r(e),
                index: 0,
                kind: t
            })
        }
        ), (function() {
            var e = u(this)
              , t = e.target
              , a = e.kind
              , r = e.index++;
            return !t || r >= t.length ? (e.target = void 0,
            {
                value: void 0,
                done: !0
            }) : "keys" == a ? {
                value: r,
                done: !1
            } : "values" == a ? {
                value: t[r],
                done: !1
            } : {
                value: [r, t[r]],
                done: !1
            }
        }
        ), "values"),
        i.Arguments = i.Array,
        n("keys"),
        n("values"),
        n("entries")
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = new (function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.init()
            }
            return r(e, [{
                key: "init",
                value: function() {
                    this.TCP_CONNECTION = "TcpList",
                    this.HTTP_REQUEST = "HttpList",
                    this.TRACK_SWITCH = "RepSwitchList",
                    this.BUFFER_LEVEL = "BufferLevel",
                    this.BUFFER_LOADED = "bufferLoaded",
                    this.ABANDON_LOAD = "abandonload",
                    this.ALLOW_LOAD = "allowload",
                    this.BUFFER_EMPTY = "bufferStalled",
                    this.BUFFER_STATE = "BufferState",
                    this.DVR_INFO = "DVRInfo",
                    this.DROPPED_FRAMES = "DroppedFrames",
                    this.SCHEDULING_INFO = "SchedulingInfo",
                    this.REQUESTS_QUEUE = "RequestsQueue",
                    this.MANIFEST_UPDATE = "ManifestUpdate",
                    this.MANIFEST_UPDATE_STREAM_INFO = "ManifestUpdatePeriodInfo",
                    this.MANIFEST_UPDATE_TRACK_INFO = "ManifestUpdateRepresentationInfo",
                    this.PLAY_LIST = "PlayList",
                    this.DVB_ERRORS = "DVBErrors"
                }
            }]),
            e
        }());
        t.default = n
    }
    , function(e, t, a) {
        var r = a(15)
          , n = a(18)
          , i = a(57);
        e.exports = r ? function(e, t, a) {
            return n.f(e, t, i(1, a))
        }
        : function(e, t, a) {
            return e[t] = a,
            e
        }
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(26)
          , i = a(16)
          , o = a(142)
          , s = a(143)
          , l = a(34)
          , u = l.get
          , d = l.enforce
          , c = String(String).split("String");
        (e.exports = function(e, t, a, s) {
            var l, u = !!s && !!s.unsafe, f = !!s && !!s.enumerable, h = !!s && !!s.noTargetGet;
            "function" == typeof a && ("string" != typeof t || i(a, "name") || n(a, "name", t),
            (l = d(a)).source || (l.source = c.join("string" == typeof t ? t : ""))),
            e !== r ? (u ? !h && e[t] && (f = !0) : delete e[t],
            f ? e[t] = a : n(e, t, a)) : f ? e[t] = a : o(t, a)
        }
        )(Function.prototype, "toString", (function() {
            return "function" == typeof this && u(this).source || s(this)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(6)
          , i = a(46)
          , o = a(58)
          , s = a(15)
          , l = a(148)
          , u = a(185)
          , d = a(7)
          , c = a(16)
          , f = a(95)
          , h = a(13)
          , p = a(17)
          , g = a(22)
          , m = a(33)
          , y = a(63)
          , _ = a(57)
          , v = a(47)
          , b = a(96)
          , E = a(64)
          , k = a(247)
          , T = a(147)
          , S = a(41)
          , A = a(18)
          , C = a(140)
          , I = a(26)
          , P = a(27)
          , w = a(145)
          , M = a(93)
          , R = a(77)
          , x = a(76)
          , D = a(11)
          , O = a(188)
          , N = a(189)
          , L = a(48)
          , U = a(34)
          , F = a(23).forEach
          , B = M("hidden")
          , j = D("toPrimitive")
          , G = U.set
          , V = U.getterFor("Symbol")
          , K = Object.prototype
          , $ = n.Symbol
          , q = i("JSON", "stringify")
          , H = S.f
          , W = A.f
          , Y = k.f
          , z = C.f
          , X = w("symbols")
          , Q = w("op-symbols")
          , J = w("string-to-symbol-registry")
          , Z = w("symbol-to-string-registry")
          , ee = w("wks")
          , te = n.QObject
          , ae = !te || !te.prototype || !te.prototype.findChild
          , re = s && d((function() {
            return 7 != v(W({}, "a", {
                get: function() {
                    return W(this, "a", {
                        value: 7
                    }).a
                }
            })).a
        }
        )) ? function(e, t, a) {
            var r = H(K, t);
            r && delete K[t],
            W(e, t, a),
            r && e !== K && W(K, t, r)
        }
        : W
          , ne = function(e, t) {
            var a = X[e] = v($.prototype);
            return G(a, {
                type: "Symbol",
                tag: e,
                description: t
            }),
            s || (a.description = t),
            a
        }
          , ie = u ? function(e) {
            return "symbol" == typeof e
        }
        : function(e) {
            return Object(e)instanceof $
        }
          , oe = function(e, t, a) {
            e === K && oe(Q, t, a),
            p(e);
            var r = y(t, !0);
            return p(a),
            c(X, r) ? (a.enumerable ? (c(e, B) && e[B][r] && (e[B][r] = !1),
            a = v(a, {
                enumerable: _(0, !1)
            })) : (c(e, B) || W(e, B, _(1, {})),
            e[B][r] = !0),
            re(e, r, a)) : W(e, r, a)
        }
          , se = function(e, t) {
            p(e);
            var a = m(t)
              , r = b(a).concat(ce(a));
            return F(r, (function(t) {
                s && !le.call(a, t) || oe(e, t, a[t])
            }
            )),
            e
        }
          , le = function(e) {
            var t = y(e, !0)
              , a = z.call(this, t);
            return !(this === K && c(X, t) && !c(Q, t)) && (!(a || !c(this, t) || !c(X, t) || c(this, B) && this[B][t]) || a)
        }
          , ue = function(e, t) {
            var a = m(e)
              , r = y(t, !0);
            if (a !== K || !c(X, r) || c(Q, r)) {
                var n = H(a, r);
                return !n || !c(X, r) || c(a, B) && a[B][r] || (n.enumerable = !0),
                n
            }
        }
          , de = function(e) {
            var t = Y(m(e))
              , a = [];
            return F(t, (function(e) {
                c(X, e) || c(R, e) || a.push(e)
            }
            )),
            a
        }
          , ce = function(e) {
            var t = e === K
              , a = Y(t ? Q : m(e))
              , r = [];
            return F(a, (function(e) {
                !c(X, e) || t && !c(K, e) || r.push(X[e])
            }
            )),
            r
        };
        (l || (P(($ = function() {
            if (this instanceof $)
                throw TypeError("Symbol is not a constructor");
            var e = arguments.length && void 0 !== arguments[0] ? String(arguments[0]) : void 0
              , t = x(e)
              , a = function(e) {
                this === K && a.call(Q, e),
                c(this, B) && c(this[B], t) && (this[B][t] = !1),
                re(this, t, _(1, e))
            };
            return s && ae && re(K, t, {
                configurable: !0,
                set: a
            }),
            ne(t, e)
        }
        ).prototype, "toString", (function() {
            return V(this).tag
        }
        )),
        P($, "withoutSetter", (function(e) {
            return ne(x(e), e)
        }
        )),
        C.f = le,
        A.f = oe,
        S.f = ue,
        E.f = k.f = de,
        T.f = ce,
        O.f = function(e) {
            return ne(D(e), e)
        }
        ,
        s && (W($.prototype, "description", {
            configurable: !0,
            get: function() {
                return V(this).description
            }
        }),
        o || P(K, "propertyIsEnumerable", le, {
            unsafe: !0
        }))),
        r({
            global: !0,
            wrap: !0,
            forced: !l,
            sham: !l
        }, {
            Symbol: $
        }),
        F(b(ee), (function(e) {
            N(e)
        }
        )),
        r({
            target: "Symbol",
            stat: !0,
            forced: !l
        }, {
            for: function(e) {
                var t = String(e);
                if (c(J, t))
                    return J[t];
                var a = $(t);
                return J[t] = a,
                Z[a] = t,
                a
            },
            keyFor: function(e) {
                if (!ie(e))
                    throw TypeError(e + " is not a symbol");
                if (c(Z, e))
                    return Z[e]
            },
            useSetter: function() {
                ae = !0
            },
            useSimple: function() {
                ae = !1
            }
        }),
        r({
            target: "Object",
            stat: !0,
            forced: !l,
            sham: !s
        }, {
            create: function(e, t) {
                return void 0 === t ? v(e) : se(v(e), t)
            },
            defineProperty: oe,
            defineProperties: se,
            getOwnPropertyDescriptor: ue
        }),
        r({
            target: "Object",
            stat: !0,
            forced: !l
        }, {
            getOwnPropertyNames: de,
            getOwnPropertySymbols: ce
        }),
        r({
            target: "Object",
            stat: !0,
            forced: d((function() {
                T.f(1)
            }
            ))
        }, {
            getOwnPropertySymbols: function(e) {
                return T.f(g(e))
            }
        }),
        q) && r({
            target: "JSON",
            stat: !0,
            forced: !l || d((function() {
                var e = $();
                return "[null]" != q([e]) || "{}" != q({
                    a: e
                }) || "{}" != q(Object(e))
            }
            ))
        }, {
            stringify: function(e, t, a) {
                for (var r, n = [e], i = 1; arguments.length > i; )
                    n.push(arguments[i++]);
                if (r = t,
                (h(t) || void 0 !== e) && !ie(e))
                    return f(t) || (t = function(e, t) {
                        if ("function" == typeof r && (t = r.call(this, e, t)),
                        !ie(t))
                            return t
                    }
                    ),
                    n[1] = t,
                    q.apply(null, n)
            }
        });
        $.prototype[j] || I($.prototype, j, $.prototype.valueOf),
        L($, "Symbol"),
        R[B] = !0
    }
    , function(e, t, a) {
        var r = a(151)
          , n = a(27)
          , i = a(252);
        r || n(Object.prototype, "toString", i, {
            unsafe: !0
        })
    }
    , function(e, t, a) {
        "use strict";
        var r = a(157).charAt
          , n = a(34)
          , i = a(153)
          , o = n.set
          , s = n.getterFor("String Iterator");
        i(String, "String", (function(e) {
            o(this, {
                type: "String Iterator",
                string: String(e),
                index: 0
            })
        }
        ), (function() {
            var e, t = s(this), a = t.string, n = t.index;
            return n >= a.length ? {
                value: void 0,
                done: !0
            } : (e = r(a, n),
            t.index += e.length,
            {
                value: e,
                done: !1
            })
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(27)
          , n = a(17)
          , i = a(7)
          , o = a(203)
          , s = RegExp.prototype
          , l = s.toString
          , u = i((function() {
            return "/a/b" != l.call({
                source: "a",
                flags: "b"
            })
        }
        ))
          , d = "toString" != l.name;
        (u || d) && r(RegExp.prototype, "toString", (function() {
            var e = n(this)
              , t = String(e.source)
              , a = e.flags;
            return "/" + t + "/" + String(void 0 === a && e instanceof RegExp && !("flags"in s) ? o.call(e) : a)
        }
        ), {
            unsafe: !0
        })
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(205)
          , i = a(24)
          , o = a(26)
          , s = a(11)
          , l = s("iterator")
          , u = s("toStringTag")
          , d = i.values;
        for (var c in n) {
            var f = r[c]
              , h = f && f.prototype;
            if (h) {
                if (h[l] !== d)
                    try {
                        o(h, l, d)
                    } catch (e) {
                        h[l] = d
                    }
                if (h[u] || o(h, u, c),
                n[c])
                    for (var p in i)
                        if (h[p] !== i[p])
                            try {
                                o(h, p, i[p])
                            } catch (e) {
                                h[p] = i[p]
                            }
            }
        }
    }
    , function(e, t, a) {
        var r = a(92)
          , n = a(42);
        e.exports = function(e) {
            return r(n(e))
        }
    }
    , function(e, t, a) {
        var r, n, i, o = a(246), s = a(6), l = a(13), u = a(26), d = a(16), c = a(144), f = a(93), h = a(77), p = s.WeakMap;
        if (o) {
            var g = c.state || (c.state = new p)
              , m = g.get
              , y = g.has
              , _ = g.set;
            r = function(e, t) {
                return t.facade = e,
                _.call(g, e, t),
                t
            }
            ,
            n = function(e) {
                return m.call(g, e) || {}
            }
            ,
            i = function(e) {
                return y.call(g, e)
            }
        } else {
            var v = f("state");
            h[v] = !0,
            r = function(e, t) {
                return t.facade = e,
                u(e, v, t),
                t
            }
            ,
            n = function(e) {
                return d(e, v) ? e[v] : {}
            }
            ,
            i = function(e) {
                return d(e, v)
            }
        }
        e.exports = {
            set: r,
            get: n,
            has: i,
            enforce: function(e) {
                return i(e) ? n(e) : r(e, {})
            },
            getterFor: function(e) {
                return function(t) {
                    var a;
                    if (!l(t) || (a = n(t)).type !== e)
                        throw TypeError("Incompatible receiver, " + e + " required");
                    return a
                }
            }
        }
    }
    , function(e, t) {
        var a = Math.ceil
          , r = Math.floor;
        e.exports = function(e) {
            return isNaN(e = +e) ? 0 : (e > 0 ? r : a)(e)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(15)
          , i = a(6)
          , o = a(16)
          , s = a(13)
          , l = a(18).f
          , u = a(181)
          , d = i.Symbol;
        if (n && "function" == typeof d && (!("description"in d.prototype) || void 0 !== d().description)) {
            var c = {}
              , f = function() {
                var e = arguments.length < 1 || void 0 === arguments[0] ? void 0 : String(arguments[0])
                  , t = this instanceof f ? new d(e) : void 0 === e ? d() : d(e);
                return "" === e && (c[t] = !0),
                t
            };
            u(f, d);
            var h = f.prototype = d.prototype;
            h.constructor = f;
            var p = h.toString
              , g = "Symbol(test)" == String(d("test"))
              , m = /^Symbol\((.*)\)[^)]+$/;
            l(h, "description", {
                configurable: !0,
                get: function() {
                    var e = s(this) ? this.valueOf() : this
                      , t = p.call(e);
                    if (o(c, e))
                        return "";
                    var a = g ? t.slice(7, -1) : t.replace(m, "$1");
                    return "" === a ? void 0 : a
                }
            }),
            r({
                global: !0,
                forced: !0
            }, {
                Symbol: f
            })
        }
    }
    , function(e, t, a) {
        a(189)("iterator")
    }
    , function(e, t, a) {
        var r = a(15)
          , n = a(7)
          , i = a(16)
          , o = Object.defineProperty
          , s = {}
          , l = function(e) {
            throw e
        };
        e.exports = function(e, t) {
            if (i(s, e))
                return s[e];
            t || (t = {});
            var a = [][e]
              , u = !!i(t, "ACCESSORS") && t.ACCESSORS
              , d = i(t, 0) ? t[0] : l
              , c = i(t, 1) ? t[1] : void 0;
            return s[e] = !!a && !n((function() {
                if (u && !r)
                    return !0;
                var e = {
                    length: -1
                };
                u ? o(e, 1, {
                    enumerable: !0,
                    get: l
                }) : e[1] = 1,
                a.call(e, d, c)
            }
            ))
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(310));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            var e = void 0
              , t = []
              , a = this.context;
            function r(a, r, n) {
                var i = function(a) {
                    var r = void 0;
                    for (r = 0; r < t.length; r++) {
                        if (t[r].regex.test(a))
                            return t[r].utils
                    }
                    return e
                }(n || r);
                return i && "function" == typeof i[a] ? i[a](r, n) : e[a](r, n)
            }
            return e = (0,
            n.default)(a).getInstance(),
            {
                registerUrlRegex: function(e, a) {
                    t.push({
                        regex: e,
                        utils: a
                    })
                },
                parseBaseUrl: function(e) {
                    return r("parseBaseUrl", e)
                },
                parseOrigin: function(e) {
                    return r("parseOrigin", e)
                },
                parseScheme: function(e) {
                    return r("parseScheme", e)
                },
                isRelative: function(e) {
                    return r("isRelative", e)
                },
                isPathAbsolute: function(e) {
                    return r("isPathAbsolute", e)
                },
                isSchemeRelative: function(e) {
                    return r("isSchemeRelative", e)
                },
                isHTTPURL: function(e) {
                    return r("isHTTPURL", e)
                },
                isHTTPS: function(e) {
                    return r("isHTTPS", e)
                },
                removeHostname: function(e) {
                    return r("removeHostname", e)
                },
                resolve: function(e, t) {
                    return r("resolve", e, t)
                }
            }
        }
        o.__dashjs_factory_name = "URLUtils";
        var s = r.default.getSingletonFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.Debug = t.MediaPlayerFactory = t.MetricsReporting = t.Protection = t.MediaPlayer = void 0;
        var r = a(264)
          , n = l(a(378))
          , i = l(a(397))
          , o = l(a(412))
          , s = l(a(3));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        dashjs.Protection = i.default,
        dashjs.MetricsReporting = n.default,
        dashjs.MediaPlayerFactory = o.default,
        dashjs.Debug = s.default,
        t.default = dashjs,
        t.MediaPlayer = r.MediaPlayer,
        t.Protection = i.default,
        t.MetricsReporting = n.default,
        t.MediaPlayerFactory = o.default,
        t.Debug = s.default
    }
    , function(e, t, a) {
        var r = a(15)
          , n = a(140)
          , i = a(57)
          , o = a(33)
          , s = a(63)
          , l = a(16)
          , u = a(180)
          , d = Object.getOwnPropertyDescriptor;
        t.f = r ? d : function(e, t) {
            if (e = o(e),
            t = s(t, !0),
            u)
                try {
                    return d(e, t)
                } catch (e) {}
            if (l(e, t))
                return i(!n.f.call(e, t), e[t])
        }
    }
    , function(e, t) {
        e.exports = function(e) {
            if (null == e)
                throw TypeError("Can't call method on " + e);
            return e
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }()
          , n = a(20);
        var i = function() {
            function e(t) {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.action = e.ACTION_DOWNLOAD,
                this.startTime = NaN,
                this.mediaType = null,
                this.mediaInfo = null,
                this.type = null,
                this.duration = NaN,
                this.timescale = NaN,
                this.range = null,
                this.url = t || null,
                this.serviceLocation = null,
                this.requestStartDate = null,
                this.firstByteDate = null,
                this.requestEndDate = null,
                this.quality = NaN,
                this.index = NaN,
                this.availabilityStartTime = null,
                this.availabilityEndTime = null,
                this.wallStartTime = null,
                this.bytesLoaded = NaN,
                this.bytesTotal = NaN,
                this.delayLoadingTime = NaN,
                this.responseType = "arraybuffer",
                this.representationId = null
            }
            return r(e, [{
                key: "isInitializationRequest",
                value: function() {
                    return this.type && this.type === n.HTTPRequest.INIT_SEGMENT_TYPE
                }
            }, {
                key: "setInfo",
                value: function(e) {
                    this.type = e && e.init ? n.HTTPRequest.INIT_SEGMENT_TYPE : n.HTTPRequest.MEDIA_SEGMENT_TYPE,
                    this.url = e && e.url ? e.url : null,
                    this.range = e && e.range ? e.range.start + "-" + e.range.end : null,
                    this.mediaType = e && e.mediaType ? e.mediaType : null
                }
            }]),
            e
        }();
        i.ACTION_DOWNLOAD = "download",
        i.ACTION_COMPLETE = "complete",
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        var o = {
            DEFAULT: .5,
            STRONG: 1,
            WEAK: 0
        };
        function s(e, t, a) {
            return {
                quality: void 0 === e ? -1 : e,
                reason: void 0 === t ? null : t,
                priority: function(e) {
                    var t = o.DEFAULT;
                    return e !== o.DEFAULT && e !== o.STRONG && e !== o.WEAK || (t = e),
                    t
                }(a)
            }
        }
        s.__dashjs_factory_name = "SwitchRequest";
        var l = i.default.getClassFactory(s);
        l.NO_CHANGE = -1,
        l.PRIORITY = o,
        i.default.updateClassFactory(s.__dashjs_factory_name, l),
        t.default = l
    }
    , function(e, t) {
        var a = {}.toString;
        e.exports = function(e) {
            return a.call(e).slice(8, -1)
        }
    }
    , function(e, t, a) {
        var r = a(183)
          , n = a(6)
          , i = function(e) {
            return "function" == typeof e ? e : void 0
        };
        e.exports = function(e, t) {
            return arguments.length < 2 ? i(r[e]) || i(n[e]) : r[e] && r[e][t] || n[e] && n[e][t]
        }
    }
    , function(e, t, a) {
        var r, n = a(17), i = a(186), o = a(146), s = a(77), l = a(187), u = a(141), d = a(93), c = d("IE_PROTO"), f = function() {}, h = function(e) {
            return "<script>" + e + "<\/script>"
        }, p = function() {
            try {
                r = document.domain && new ActiveXObject("htmlfile")
            } catch (e) {}
            var e, t;
            p = r ? function(e) {
                e.write(h("")),
                e.close();
                var t = e.parentWindow.Object;
                return e = null,
                t
            }(r) : ((t = u("iframe")).style.display = "none",
            l.appendChild(t),
            t.src = String("javascript:"),
            (e = t.contentWindow.document).open(),
            e.write(h("document.F=Object")),
            e.close(),
            e.F);
            for (var a = o.length; a--; )
                delete p.prototype[o[a]];
            return p()
        };
        s[c] = !0,
        e.exports = Object.create || function(e, t) {
            var a;
            return null !== e ? (f.prototype = n(e),
            a = new f,
            f.prototype = null,
            a[c] = e) : a = p(),
            void 0 === t ? a : i(a, t)
        }
    }
    , function(e, t, a) {
        var r = a(18).f
          , n = a(16)
          , i = a(11)("toStringTag");
        e.exports = function(e, t, a) {
            e && !n(e = a ? e : e.prototype, i) && r(e, i, {
                configurable: !0,
                value: t
            })
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(23).filter
          , i = a(98)
          , o = a(38)
          , s = i("filter")
          , l = o("filter");
        r({
            target: "Array",
            proto: !0,
            forced: !s || !l
        }, {
            filter: function(e) {
                return n(this, e, arguments.length > 1 ? arguments[1] : void 0)
            }
        })
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(191);
        r({
            target: "Array",
            proto: !0,
            forced: [].forEach != n
        }, {
            forEach: n
        })
    }
    , function(e, t, a) {
        var r = a(5)
          , n = a(7)
          , i = a(33)
          , o = a(41).f
          , s = a(15)
          , l = n((function() {
            o(1)
        }
        ));
        r({
            target: "Object",
            stat: !0,
            forced: !s || l,
            sham: !s
        }, {
            getOwnPropertyDescriptor: function(e, t) {
                return o(i(e), t)
            }
        })
    }
    , function(e, t, a) {
        var r = a(5)
          , n = a(15)
          , i = a(182)
          , o = a(33)
          , s = a(41)
          , l = a(97);
        r({
            target: "Object",
            stat: !0,
            sham: !n
        }, {
            getOwnPropertyDescriptors: function(e) {
                for (var t, a, r = o(e), n = s.f, u = i(r), d = {}, c = 0; u.length > c; )
                    void 0 !== (a = n(r, t = u[c++])) && l(d, t, a);
                return d
            }
        })
    }
    , function(e, t, a) {
        var r = a(5)
          , n = a(22)
          , i = a(96);
        r({
            target: "Object",
            stat: !0,
            forced: a(7)((function() {
                i(1)
            }
            ))
        }, {
            keys: function(e) {
                return i(n(e))
            }
        })
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(205)
          , i = a(191)
          , o = a(26);
        for (var s in n) {
            var l = r[s]
              , u = l && l.prototype;
            if (u && u.forEach !== i)
                try {
                    o(u, "forEach", i)
                } catch (e) {
                    u.forEach = i
                }
        }
    }
    , function(e, t, a) {
        var r = a(5)
          , n = a(46)
          , i = a(60)
          , o = a(17)
          , s = a(13)
          , l = a(47)
          , u = a(263)
          , d = a(7)
          , c = n("Reflect", "construct")
          , f = d((function() {
            function e() {}
            return !(c((function() {}
            ), [], e)instanceof e)
        }
        ))
          , h = !d((function() {
            c((function() {}
            ))
        }
        ))
          , p = f || h;
        r({
            target: "Reflect",
            stat: !0,
            forced: p,
            sham: p
        }, {
            construct: function(e, t) {
                i(e),
                o(t);
                var a = arguments.length < 3 ? e : i(arguments[2]);
                if (h && !f)
                    return c(e, t, a);
                if (e == a) {
                    switch (t.length) {
                    case 0:
                        return new e;
                    case 1:
                        return new e(t[0]);
                    case 2:
                        return new e(t[0],t[1]);
                    case 3:
                        return new e(t[0],t[1],t[2]);
                    case 4:
                        return new e(t[0],t[1],t[2],t[3])
                    }
                    var r = [null];
                    return r.push.apply(r, t),
                    new (u.apply(e, r))
                }
                var n = a.prototype
                  , d = l(s(n) ? n : Object.prototype)
                  , p = Function.apply.call(e, d, t);
                return s(p) ? p : d
            }
        })
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        }
        : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        }
        ;
        t.checkParameterType = function(e, t) {
            if ((void 0 === e ? "undefined" : r(e)) !== t)
                throw o.default.BAD_ARGUMENT_ERROR
        }
        ,
        t.checkInteger = function(e) {
            if (null === e || isNaN(e) || e % 1 != 0)
                throw o.default.BAD_ARGUMENT_ERROR + " : argument is not an integer"
        }
        ,
        t.checkRange = function(e, t, a) {
            if (e < t || e > a)
                throw o.default.BAD_ARGUMENT_ERROR + " : argument out of range"
        }
        ,
        t.checkIsVideoOrAudioType = function(e) {
            if ("string" != typeof e || e !== o.default.AUDIO && e !== o.default.VIDEO)
                throw o.default.BAD_ARGUMENT_ERROR
        }
        ;
        var n, i = a(1), o = (n = i) && n.__esModule ? n : {
            default: n
        }
    }
    , function(e, t) {
        e.exports = function(e, t) {
            return {
                enumerable: !(1 & e),
                configurable: !(2 & e),
                writable: !(4 & e),
                value: t
            }
        }
    }
    , function(e, t) {
        e.exports = !1
    }
    , function(e, t, a) {
        var r = a(60);
        e.exports = function(e, t, a) {
            if (r(e),
            void 0 === t)
                return e;
            switch (a) {
            case 0:
                return function() {
                    return e.call(t)
                }
                ;
            case 1:
                return function(a) {
                    return e.call(t, a)
                }
                ;
            case 2:
                return function(a, r) {
                    return e.call(t, a, r)
                }
                ;
            case 3:
                return function(a, r, n) {
                    return e.call(t, a, r, n)
                }
            }
            return function() {
                return e.apply(t, arguments)
            }
        }
    }
    , function(e, t) {
        e.exports = function(e) {
            if ("function" != typeof e)
                throw TypeError(String(e) + " is not a function");
            return e
        }
    }
    , function(e, t) {
        e.exports = function(e, t, a) {
            if (!(e instanceof t))
                throw TypeError("Incorrect " + (a ? a + " " : "") + "invocation");
            return e
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = new (function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.init()
            }
            return r(e, [{
                key: "init",
                value: function() {
                    this.CLEARKEY_KEYSTEM_STRING = "org.w3.clearkey",
                    this.WIDEVINE_KEYSTEM_STRING = "com.widevine.alpha",
                    this.PLAYREADY_KEYSTEM_STRING = "com.microsoft.playready"
                }
            }]),
            e
        }());
        t.default = n
    }
    , function(e, t, a) {
        var r = a(13);
        e.exports = function(e, t) {
            if (!r(e))
                return e;
            var a, n;
            if (t && "function" == typeof (a = e.toString) && !r(n = a.call(e)))
                return n;
            if ("function" == typeof (a = e.valueOf) && !r(n = a.call(e)))
                return n;
            if (!t && "function" == typeof (a = e.toString) && !r(n = a.call(e)))
                return n;
            throw TypeError("Can't convert object to primitive value")
        }
    }
    , function(e, t, a) {
        var r = a(184)
          , n = a(146).concat("length", "prototype");
        t.f = Object.getOwnPropertyNames || function(e) {
            return r(e, n)
        }
    }
    , function(e, t, a) {
        var r = a(35)
          , n = Math.max
          , i = Math.min;
        e.exports = function(e, t) {
            var a = r(e);
            return a < 0 ? n(a + t, 0) : i(a, t)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(13)
          , i = a(95)
          , o = a(65)
          , s = a(14)
          , l = a(33)
          , u = a(97)
          , d = a(11)
          , c = a(98)
          , f = a(38)
          , h = c("slice")
          , p = f("slice", {
            ACCESSORS: !0,
            0: 0,
            1: 2
        })
          , g = d("species")
          , m = [].slice
          , y = Math.max;
        r({
            target: "Array",
            proto: !0,
            forced: !h || !p
        }, {
            slice: function(e, t) {
                var a, r, d, c = l(this), f = s(c.length), h = o(e, f), p = o(void 0 === t ? f : t, f);
                if (i(c) && ("function" != typeof (a = c.constructor) || a !== Array && !i(a.prototype) ? n(a) && null === (a = a[g]) && (a = void 0) : a = void 0,
                a === Array || void 0 === a))
                    return m.call(c, h, p);
                for (r = new (void 0 === a ? Array : a)(y(p - h, 0)),
                d = 0; h < p; h++,
                d++)
                    h in c && u(r, d, c[h]);
                return r.length = d,
                r
            }
        })
    }
    , function(e, t, a) {
        var r = a(15)
          , n = a(18).f
          , i = Function.prototype
          , o = i.toString
          , s = /^\s*function ([^ (]*)/;
        r && !("name"in i) && n(i, "name", {
            configurable: !0,
            get: function() {
                try {
                    return o.call(this).match(s)[1]
                } catch (e) {
                    return ""
                }
            }
        })
    }
    , function(e, t, a) {
        "use strict";
        var r, n, i, o, s = a(5), l = a(58), u = a(6), d = a(46), c = a(253), f = a(27), h = a(103), p = a(48), g = a(104), m = a(13), y = a(60), _ = a(61), v = a(143), b = a(154), E = a(101), k = a(69), T = a(200).set, S = a(254), A = a(255), C = a(256), I = a(202), P = a(257), w = a(34), M = a(94), R = a(11), x = a(105), D = a(99), O = R("species"), N = "Promise", L = w.get, U = w.set, F = w.getterFor(N), B = c, j = u.TypeError, G = u.document, V = u.process, K = d("fetch"), $ = I.f, q = $, H = !!(G && G.createEvent && u.dispatchEvent), W = "function" == typeof PromiseRejectionEvent, Y = M(N, (function() {
            if (!(v(B) !== String(B))) {
                if (66 === D)
                    return !0;
                if (!x && !W)
                    return !0
            }
            if (l && !B.prototype.finally)
                return !0;
            if (D >= 51 && /native code/.test(B))
                return !1;
            var e = B.resolve(1)
              , t = function(e) {
                e((function() {}
                ), (function() {}
                ))
            };
            return (e.constructor = {})[O] = t,
            !(e.then((function() {}
            ))instanceof t)
        }
        )), z = Y || !E((function(e) {
            B.all(e).catch((function() {}
            ))
        }
        )), X = function(e) {
            var t;
            return !(!m(e) || "function" != typeof (t = e.then)) && t
        }, Q = function(e, t) {
            if (!e.notified) {
                e.notified = !0;
                var a = e.reactions;
                S((function() {
                    for (var r = e.value, n = 1 == e.state, i = 0; a.length > i; ) {
                        var o, s, l, u = a[i++], d = n ? u.ok : u.fail, c = u.resolve, f = u.reject, h = u.domain;
                        try {
                            d ? (n || (2 === e.rejection && te(e),
                            e.rejection = 1),
                            !0 === d ? o = r : (h && h.enter(),
                            o = d(r),
                            h && (h.exit(),
                            l = !0)),
                            o === u.promise ? f(j("Promise-chain cycle")) : (s = X(o)) ? s.call(o, c, f) : c(o)) : f(r)
                        } catch (e) {
                            h && !l && h.exit(),
                            f(e)
                        }
                    }
                    e.reactions = [],
                    e.notified = !1,
                    t && !e.rejection && Z(e)
                }
                ))
            }
        }, J = function(e, t, a) {
            var r, n;
            H ? ((r = G.createEvent("Event")).promise = t,
            r.reason = a,
            r.initEvent(e, !1, !0),
            u.dispatchEvent(r)) : r = {
                promise: t,
                reason: a
            },
            !W && (n = u["on" + e]) ? n(r) : "unhandledrejection" === e && C("Unhandled promise rejection", a)
        }, Z = function(e) {
            T.call(u, (function() {
                var t, a = e.facade, r = e.value;
                if (ee(e) && (t = P((function() {
                    x ? V.emit("unhandledRejection", r, a) : J("unhandledrejection", a, r)
                }
                )),
                e.rejection = x || ee(e) ? 2 : 1,
                t.error))
                    throw t.value
            }
            ))
        }, ee = function(e) {
            return 1 !== e.rejection && !e.parent
        }, te = function(e) {
            T.call(u, (function() {
                var t = e.facade;
                x ? V.emit("rejectionHandled", t) : J("rejectionhandled", t, e.value)
            }
            ))
        }, ae = function(e, t, a) {
            return function(r) {
                e(t, r, a)
            }
        }, re = function(e, t, a) {
            e.done || (e.done = !0,
            a && (e = a),
            e.value = t,
            e.state = 2,
            Q(e, !0))
        }, ne = function(e, t, a) {
            if (!e.done) {
                e.done = !0,
                a && (e = a);
                try {
                    if (e.facade === t)
                        throw j("Promise can't be resolved itself");
                    var r = X(t);
                    r ? S((function() {
                        var a = {
                            done: !1
                        };
                        try {
                            r.call(t, ae(ne, a, e), ae(re, a, e))
                        } catch (t) {
                            re(a, t, e)
                        }
                    }
                    )) : (e.value = t,
                    e.state = 1,
                    Q(e, !1))
                } catch (t) {
                    re({
                        done: !1
                    }, t, e)
                }
            }
        };
        Y && (B = function(e) {
            _(this, B, N),
            y(e),
            r.call(this);
            var t = L(this);
            try {
                e(ae(ne, t), ae(re, t))
            } catch (e) {
                re(t, e)
            }
        }
        ,
        (r = function(e) {
            U(this, {
                type: N,
                done: !1,
                notified: !1,
                parent: !1,
                reactions: [],
                rejection: !1,
                state: 0,
                value: void 0
            })
        }
        ).prototype = h(B.prototype, {
            then: function(e, t) {
                var a = F(this)
                  , r = $(k(this, B));
                return r.ok = "function" != typeof e || e,
                r.fail = "function" == typeof t && t,
                r.domain = x ? V.domain : void 0,
                a.parent = !0,
                a.reactions.push(r),
                0 != a.state && Q(a, !1),
                r.promise
            },
            catch: function(e) {
                return this.then(void 0, e)
            }
        }),
        n = function() {
            var e = new r
              , t = L(e);
            this.promise = e,
            this.resolve = ae(ne, t),
            this.reject = ae(re, t)
        }
        ,
        I.f = $ = function(e) {
            return e === B || e === i ? new n(e) : q(e)
        }
        ,
        l || "function" != typeof c || (o = c.prototype.then,
        f(c.prototype, "then", (function(e, t) {
            var a = this;
            return new B((function(e, t) {
                o.call(a, e, t)
            }
            )).then(e, t)
        }
        ), {
            unsafe: !0
        }),
        "function" == typeof K && s({
            global: !0,
            enumerable: !0,
            forced: !0
        }, {
            fetch: function(e) {
                return A(B, K.apply(u, arguments))
            }
        }))),
        s({
            global: !0,
            wrap: !0,
            forced: Y
        }, {
            Promise: B
        }),
        p(B, N, !1, !0),
        g(N),
        i = d(N),
        s({
            target: N,
            stat: !0,
            forced: Y
        }, {
            reject: function(e) {
                var t = $(this);
                return t.reject.call(void 0, e),
                t.promise
            }
        }),
        s({
            target: N,
            stat: !0,
            forced: l || Y
        }, {
            resolve: function(e) {
                return A(l && this === i ? B : this, e)
            }
        }),
        s({
            target: N,
            stat: !0,
            forced: z
        }, {
            all: function(e) {
                var t = this
                  , a = $(t)
                  , r = a.resolve
                  , n = a.reject
                  , i = P((function() {
                    var a = y(t.resolve)
                      , i = []
                      , o = 0
                      , s = 1;
                    b(e, (function(e) {
                        var l = o++
                          , u = !1;
                        i.push(void 0),
                        s++,
                        a.call(t, e).then((function(e) {
                            u || (u = !0,
                            i[l] = e,
                            --s || r(i))
                        }
                        ), n)
                    }
                    )),
                    --s || r(i)
                }
                ));
                return i.error && n(i.value),
                a.promise
            },
            race: function(e) {
                var t = this
                  , a = $(t)
                  , r = a.reject
                  , n = P((function() {
                    var n = y(t.resolve);
                    b(e, (function(e) {
                        n.call(t, e).then(a.resolve, r)
                    }
                    ))
                }
                ));
                return n.error && r(n.value),
                a.promise
            }
        })
    }
    , function(e, t, a) {
        var r = a(17)
          , n = a(60)
          , i = a(11)("species");
        e.exports = function(e, t) {
            var a, o = r(e).constructor;
            return void 0 === o || null == (a = r(o)[i]) ? t : n(a)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(156);
        r({
            target: "RegExp",
            proto: !0,
            forced: /./.exec !== n
        }, {
            exec: n
        })
    }
    , function(e, t, a) {
        var r = function(e) {
            "use strict";
            var t = Object.prototype
              , a = t.hasOwnProperty
              , r = "function" == typeof Symbol ? Symbol : {}
              , n = r.iterator || "@@iterator"
              , i = r.asyncIterator || "@@asyncIterator"
              , o = r.toStringTag || "@@toStringTag";
            function s(e, t, a) {
                return Object.defineProperty(e, t, {
                    value: a,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }),
                e[t]
            }
            try {
                s({}, "")
            } catch (e) {
                s = function(e, t, a) {
                    return e[t] = a
                }
            }
            function l(e, t, a, r) {
                var n = t && t.prototype instanceof c ? t : c
                  , i = Object.create(n.prototype)
                  , o = new T(r || []);
                return i._invoke = function(e, t, a) {
                    var r = "suspendedStart";
                    return function(n, i) {
                        if ("executing" === r)
                            throw new Error("Generator is already running");
                        if ("completed" === r) {
                            if ("throw" === n)
                                throw i;
                            return A()
                        }
                        for (a.method = n,
                        a.arg = i; ; ) {
                            var o = a.delegate;
                            if (o) {
                                var s = b(o, a);
                                if (s) {
                                    if (s === d)
                                        continue;
                                    return s
                                }
                            }
                            if ("next" === a.method)
                                a.sent = a._sent = a.arg;
                            else if ("throw" === a.method) {
                                if ("suspendedStart" === r)
                                    throw r = "completed",
                                    a.arg;
                                a.dispatchException(a.arg)
                            } else
                                "return" === a.method && a.abrupt("return", a.arg);
                            r = "executing";
                            var l = u(e, t, a);
                            if ("normal" === l.type) {
                                if (r = a.done ? "completed" : "suspendedYield",
                                l.arg === d)
                                    continue;
                                return {
                                    value: l.arg,
                                    done: a.done
                                }
                            }
                            "throw" === l.type && (r = "completed",
                            a.method = "throw",
                            a.arg = l.arg)
                        }
                    }
                }(e, a, o),
                i
            }
            function u(e, t, a) {
                try {
                    return {
                        type: "normal",
                        arg: e.call(t, a)
                    }
                } catch (e) {
                    return {
                        type: "throw",
                        arg: e
                    }
                }
            }
            e.wrap = l;
            var d = {};
            function c() {}
            function f() {}
            function h() {}
            var p = {};
            p[n] = function() {
                return this
            }
            ;
            var g = Object.getPrototypeOf
              , m = g && g(g(S([])));
            m && m !== t && a.call(m, n) && (p = m);
            var y = h.prototype = c.prototype = Object.create(p);
            function _(e) {
                ["next", "throw", "return"].forEach((function(t) {
                    s(e, t, (function(e) {
                        return this._invoke(t, e)
                    }
                    ))
                }
                ))
            }
            function v(e, t) {
                var r;
                this._invoke = function(n, i) {
                    function o() {
                        return new t((function(r, o) {
                            !function r(n, i, o, s) {
                                var l = u(e[n], e, i);
                                if ("throw" !== l.type) {
                                    var d = l.arg
                                      , c = d.value;
                                    return c && "object" == typeof c && a.call(c, "__await") ? t.resolve(c.__await).then((function(e) {
                                        r("next", e, o, s)
                                    }
                                    ), (function(e) {
                                        r("throw", e, o, s)
                                    }
                                    )) : t.resolve(c).then((function(e) {
                                        d.value = e,
                                        o(d)
                                    }
                                    ), (function(e) {
                                        return r("throw", e, o, s)
                                    }
                                    ))
                                }
                                s(l.arg)
                            }(n, i, r, o)
                        }
                        ))
                    }
                    return r = r ? r.then(o, o) : o()
                }
            }
            function b(e, t) {
                var a = e.iterator[t.method];
                if (void 0 === a) {
                    if (t.delegate = null,
                    "throw" === t.method) {
                        if (e.iterator.return && (t.method = "return",
                        t.arg = void 0,
                        b(e, t),
                        "throw" === t.method))
                            return d;
                        t.method = "throw",
                        t.arg = new TypeError("The iterator does not provide a 'throw' method")
                    }
                    return d
                }
                var r = u(a, e.iterator, t.arg);
                if ("throw" === r.type)
                    return t.method = "throw",
                    t.arg = r.arg,
                    t.delegate = null,
                    d;
                var n = r.arg;
                return n ? n.done ? (t[e.resultName] = n.value,
                t.next = e.nextLoc,
                "return" !== t.method && (t.method = "next",
                t.arg = void 0),
                t.delegate = null,
                d) : n : (t.method = "throw",
                t.arg = new TypeError("iterator result is not an object"),
                t.delegate = null,
                d)
            }
            function E(e) {
                var t = {
                    tryLoc: e[0]
                };
                1 in e && (t.catchLoc = e[1]),
                2 in e && (t.finallyLoc = e[2],
                t.afterLoc = e[3]),
                this.tryEntries.push(t)
            }
            function k(e) {
                var t = e.completion || {};
                t.type = "normal",
                delete t.arg,
                e.completion = t
            }
            function T(e) {
                this.tryEntries = [{
                    tryLoc: "root"
                }],
                e.forEach(E, this),
                this.reset(!0)
            }
            function S(e) {
                if (e) {
                    var t = e[n];
                    if (t)
                        return t.call(e);
                    if ("function" == typeof e.next)
                        return e;
                    if (!isNaN(e.length)) {
                        var r = -1
                          , i = function t() {
                            for (; ++r < e.length; )
                                if (a.call(e, r))
                                    return t.value = e[r],
                                    t.done = !1,
                                    t;
                            return t.value = void 0,
                            t.done = !0,
                            t
                        };
                        return i.next = i
                    }
                }
                return {
                    next: A
                }
            }
            function A() {
                return {
                    value: void 0,
                    done: !0
                }
            }
            return f.prototype = y.constructor = h,
            h.constructor = f,
            f.displayName = s(h, o, "GeneratorFunction"),
            e.isGeneratorFunction = function(e) {
                var t = "function" == typeof e && e.constructor;
                return !!t && (t === f || "GeneratorFunction" === (t.displayName || t.name))
            }
            ,
            e.mark = function(e) {
                return Object.setPrototypeOf ? Object.setPrototypeOf(e, h) : (e.__proto__ = h,
                s(e, o, "GeneratorFunction")),
                e.prototype = Object.create(y),
                e
            }
            ,
            e.awrap = function(e) {
                return {
                    __await: e
                }
            }
            ,
            _(v.prototype),
            v.prototype[i] = function() {
                return this
            }
            ,
            e.AsyncIterator = v,
            e.async = function(t, a, r, n, i) {
                void 0 === i && (i = Promise);
                var o = new v(l(t, a, r, n),i);
                return e.isGeneratorFunction(a) ? o : o.next().then((function(e) {
                    return e.done ? e.value : o.next()
                }
                ))
            }
            ,
            _(y),
            s(y, o, "Generator"),
            y[n] = function() {
                return this
            }
            ,
            y.toString = function() {
                return "[object Generator]"
            }
            ,
            e.keys = function(e) {
                var t = [];
                for (var a in e)
                    t.push(a);
                return t.reverse(),
                function a() {
                    for (; t.length; ) {
                        var r = t.pop();
                        if (r in e)
                            return a.value = r,
                            a.done = !1,
                            a
                    }
                    return a.done = !0,
                    a
                }
            }
            ,
            e.values = S,
            T.prototype = {
                constructor: T,
                reset: function(e) {
                    if (this.prev = 0,
                    this.next = 0,
                    this.sent = this._sent = void 0,
                    this.done = !1,
                    this.delegate = null,
                    this.method = "next",
                    this.arg = void 0,
                    this.tryEntries.forEach(k),
                    !e)
                        for (var t in this)
                            "t" === t.charAt(0) && a.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
                },
                stop: function() {
                    this.done = !0;
                    var e = this.tryEntries[0].completion;
                    if ("throw" === e.type)
                        throw e.arg;
                    return this.rval
                },
                dispatchException: function(e) {
                    if (this.done)
                        throw e;
                    var t = this;
                    function r(a, r) {
                        return o.type = "throw",
                        o.arg = e,
                        t.next = a,
                        r && (t.method = "next",
                        t.arg = void 0),
                        !!r
                    }
                    for (var n = this.tryEntries.length - 1; n >= 0; --n) {
                        var i = this.tryEntries[n]
                          , o = i.completion;
                        if ("root" === i.tryLoc)
                            return r("end");
                        if (i.tryLoc <= this.prev) {
                            var s = a.call(i, "catchLoc")
                              , l = a.call(i, "finallyLoc");
                            if (s && l) {
                                if (this.prev < i.catchLoc)
                                    return r(i.catchLoc, !0);
                                if (this.prev < i.finallyLoc)
                                    return r(i.finallyLoc)
                            } else if (s) {
                                if (this.prev < i.catchLoc)
                                    return r(i.catchLoc, !0)
                            } else {
                                if (!l)
                                    throw new Error("try statement without catch or finally");
                                if (this.prev < i.finallyLoc)
                                    return r(i.finallyLoc)
                            }
                        }
                    }
                },
                abrupt: function(e, t) {
                    for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                        var n = this.tryEntries[r];
                        if (n.tryLoc <= this.prev && a.call(n, "finallyLoc") && this.prev < n.finallyLoc) {
                            var i = n;
                            break
                        }
                    }
                    i && ("break" === e || "continue" === e) && i.tryLoc <= t && t <= i.finallyLoc && (i = null);
                    var o = i ? i.completion : {};
                    return o.type = e,
                    o.arg = t,
                    i ? (this.method = "next",
                    this.next = i.finallyLoc,
                    d) : this.complete(o)
                },
                complete: function(e, t) {
                    if ("throw" === e.type)
                        throw e.arg;
                    return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg,
                    this.method = "return",
                    this.next = "end") : "normal" === e.type && t && (this.next = t),
                    d
                },
                finish: function(e) {
                    for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                        var a = this.tryEntries[t];
                        if (a.finallyLoc === e)
                            return this.complete(a.completion, a.afterLoc),
                            k(a),
                            d
                    }
                },
                catch: function(e) {
                    for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                        var a = this.tryEntries[t];
                        if (a.tryLoc === e) {
                            var r = a.completion;
                            if ("throw" === r.type) {
                                var n = r.arg;
                                k(a)
                            }
                            return n
                        }
                    }
                    throw new Error("illegal catch attempt")
                },
                delegateYield: function(e, t, a) {
                    return this.delegate = {
                        iterator: S(e),
                        resultName: t,
                        nextLoc: a
                    },
                    "next" === this.method && (this.arg = void 0),
                    d
                }
            },
            e
        }(e.exports);
        try {
            regeneratorRuntime = r
        } catch (e) {
            Function("r", "regeneratorRuntime = r")(r)
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.unescapeDollarsInTemplate = function(e) {
            return e ? e.split("$$").join("$") : e
        }
        ,
        t.replaceIDForTemplate = function(e, t) {
            if (!t || !e || -1 === e.indexOf("$RepresentationID$"))
                return e;
            var a = t.toString();
            return e.split("$RepresentationID$").join(a)
        }
        ,
        t.replaceTokenForTemplate = s,
        t.getIndexBasedSegment = function(e, t, a, r) {
            var n, i, o = void 0;
            o = a.segmentDuration,
            isNaN(o) && (o = a.adaptation.period.duration);
            n = parseFloat((a.adaptation.period.start + r * o).toFixed(5)),
            i = parseFloat((n + o).toFixed(5));
            var s = l(a, o, n, e.calcMediaTimeFromPresentationTime(n, a), e.calcAvailabilityStartTimeFromPresentationTime(n, a.adaptation.period.mpd, t), e, i, t, r);
            if (!u(e, a, s, t))
                return null;
            return s
        }
        ,
        t.getTimeBasedSegment = function(e, t, a, r, n, i, o, d, c, f) {
            var h, p, g = r / i, m = Math.min(n / i, a.adaptation.period.mpd.maxSegmentDuration), y = void 0;
            if (h = e.calcPresentationTimeFromMediaTime(g, a),
            p = h + m,
            y = l(a, m, h, g, a.adaptation.period.mpd.manifest.loadedTime, e, p, t, c),
            !u(e, a, y, t))
                return null;
            return y.replacementTime = f || r,
            o = s(o, "Number", y.replacementNumber),
            o = s(o, "Time", y.replacementTime),
            y.media = o,
            y.mediaRange = d,
            y
        }
        ;
        var r, n = a(165), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e, t) {
            for (; e.length < t; )
                e = "0" + e;
            return e
        }
        function s(e, t, a) {
            var r = void 0
              , n = void 0
              , i = void 0
              , s = void 0
              , l = void 0
              , u = void 0
              , d = t.length
              , c = "%0".length;
            if (!e)
                return e;
            for (; ; ) {
                if ((r = e.indexOf("$" + t)) < 0)
                    return e;
                if ((n = e.indexOf("$", r + d)) < 0)
                    return e;
                if ((i = e.indexOf("%0", r + d)) > r && i < n)
                    switch (s = e.charAt(n - 1),
                    l = parseInt(e.substring(i + c, n - 1), 10),
                    s) {
                    case "d":
                    case "i":
                    case "u":
                        u = o(a.toString(), l);
                        break;
                    case "x":
                        u = o(a.toString(16), l);
                        break;
                    case "X":
                        u = o(a.toString(16), l).toUpperCase();
                        break;
                    case "o":
                        u = o(a.toString(8), l);
                        break;
                    default:
                        return e
                    }
                else
                    u = a;
                e = e.substring(0, r) + u + e.substring(n + 1)
            }
        }
        function l(e, t, a, r, n, o, s, l, u) {
            var d, c = new i.default;
            return c.representation = e,
            c.duration = t,
            c.presentationStartTime = a,
            c.mediaStartTime = r,
            c.availabilityStartTime = n,
            c.availabilityEndTime = o.calcAvailabilityEndTimeFromPresentationTime(s, e.adaptation.period.mpd, l),
            c.wallStartTime = o.calcWallTimeForSegment(c, l),
            c.replacementNumber = (d = u,
            c.representation.startNumber + d),
            c.availabilityIdx = u,
            c
        }
        function u(e, t, a, r) {
            var n = e.getPeriodEnd(t, r)
              , i = e.calcPeriodRelativeTimeFromMpdRelativeTime(t, n);
            if (e.calcPeriodRelativeTimeFromMpdRelativeTime(t, a.presentationStartTime) >= i) {
                if (!r)
                    return !1;
                if (t.segmentAvailabilityRange && a.presentationStartTime >= t.segmentAvailabilityRange.end)
                    return !1
            }
            return !0
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            return r(e, null, [{
                key: "findCencContentProtection",
                value: function(e) {
                    for (var t = null, a = 0; a < e.length; ++a) {
                        var r = e[a];
                        "urn:mpeg:dash:mp4protection:2011" !== r.schemeIdUri.toLowerCase() || "cenc" !== r.value.toLowerCase() && "cbcs" !== r.value.toLowerCase() || (t = r)
                    }
                    return t
                }
            }, {
                key: "getPSSHData",
                value: function(e) {
                    var t = 8
                      , a = new DataView(e)
                      , r = a.getUint8(t);
                    return t += 20,
                    r > 0 && (t += 4 + 16 * a.getUint32(t)),
                    t += 4,
                    e.slice(t)
                }
            }, {
                key: "getPSSHForKeySystem",
                value: function(t, a) {
                    var r = e.parsePSSHList(a);
                    return t && r.hasOwnProperty(t.uuid.toLowerCase()) ? r[t.uuid.toLowerCase()] : null
                }
            }, {
                key: "parseInitDataFromContentProtection",
                value: function(e, t) {
                    return "pssh"in e ? (e.pssh.__text = e.pssh.__text.replace(/\r?\n|\r/g, "").replace(/\s+/g, ""),
                    t.decodeArray(e.pssh.__text).buffer) : null
                }
            }, {
                key: "parsePSSHList",
                value: function(e) {
                    if (null == e)
                        return [];
                    for (var t = new DataView(e.buffer || e), a = {}, r = 0; ; ) {
                        var n, i, o = void 0, s = r;
                        if (r >= t.buffer.byteLength)
                            break;
                        if (n = r + t.getUint32(r),
                        r += 4,
                        1886614376 === t.getUint32(r))
                            if (r += 4,
                            0 === (i = t.getUint8(r)) || 1 === i) {
                                r++,
                                r += 3,
                                o = "";
                                var l = void 0
                                  , u = void 0;
                                for (l = 0; l < 4; l++)
                                    o += 1 === (u = t.getUint8(r + l).toString(16)).length ? "0" + u : u;
                                for (r += 4,
                                o += "-",
                                l = 0; l < 2; l++)
                                    o += 1 === (u = t.getUint8(r + l).toString(16)).length ? "0" + u : u;
                                for (r += 2,
                                o += "-",
                                l = 0; l < 2; l++)
                                    o += 1 === (u = t.getUint8(r + l).toString(16)).length ? "0" + u : u;
                                for (r += 2,
                                o += "-",
                                l = 0; l < 2; l++)
                                    o += 1 === (u = t.getUint8(r + l).toString(16)).length ? "0" + u : u;
                                for (r += 2,
                                o += "-",
                                l = 0; l < 6; l++)
                                    o += 1 === (u = t.getUint8(r + l).toString(16)).length ? "0" + u : u;
                                r += 6,
                                o = o.toLowerCase(),
                                t.getUint32(r),
                                r += 4,
                                a[o] = t.buffer.slice(s, n),
                                r = n
                            } else
                                r = n;
                        else
                            r = n
                    }
                    return a
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        var r = a(5)
          , n = a(7)
          , i = a(22)
          , o = a(84)
          , s = a(196);
        r({
            target: "Object",
            stat: !0,
            forced: n((function() {
                o(1)
            }
            )),
            sham: !s
        }, {
            getPrototypeOf: function(e) {
                return o(i(e))
            }
        })
    }
    , function(e) {
        e.exports = JSON.parse('{"a":"dmmvideo.js","b":"1.15.0"}')
    }
    , function(e, t) {
        var a = 0
          , r = Math.random();
        e.exports = function(e) {
            return "Symbol(" + String(void 0 === e ? "" : e) + ")_" + (++a + r).toString(36)
        }
    }
    , function(e, t) {
        e.exports = {}
    }
    , function(e, t, a) {
        var r = a(33)
          , n = a(14)
          , i = a(65)
          , o = function(e) {
            return function(t, a, o) {
                var s, l = r(t), u = n(l.length), d = i(o, u);
                if (e && a != a) {
                    for (; u > d; )
                        if ((s = l[d++]) != s)
                            return !0
                } else
                    for (; u > d; d++)
                        if ((e || d in l) && l[d] === a)
                            return e || d || 0;
                return !e && -1
            }
        };
        e.exports = {
            includes: o(!0),
            indexOf: o(!1)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(7)
          , i = a(95)
          , o = a(13)
          , s = a(22)
          , l = a(14)
          , u = a(97)
          , d = a(190)
          , c = a(98)
          , f = a(11)
          , h = a(99)
          , p = f("isConcatSpreadable")
          , g = h >= 51 || !n((function() {
            var e = [];
            return e[p] = !1,
            e.concat()[0] !== e
        }
        ))
          , m = c("concat")
          , y = function(e) {
            if (!o(e))
                return !1;
            var t = e[p];
            return void 0 !== t ? !!t : i(e)
        };
        r({
            target: "Array",
            proto: !0,
            forced: !g || !m
        }, {
            concat: function(e) {
                var t, a, r, n, i, o = s(this), c = d(o, 0), f = 0;
                for (t = -1,
                r = arguments.length; t < r; t++)
                    if (y(i = -1 === t ? o : arguments[t])) {
                        if (f + (n = l(i.length)) > 9007199254740991)
                            throw TypeError("Maximum allowed index exceeded");
                        for (a = 0; a < n; a++,
                        f++)
                            a in i && u(c, f, i[a])
                    } else {
                        if (f >= 9007199254740991)
                            throw TypeError("Maximum allowed index exceeded");
                        u(c, f++, i)
                    }
                return c.length = f,
                c
            }
        })
    }
    , function(e, t, a) {
        "use strict";
        var r = a(7);
        e.exports = function(e, t) {
            var a = [][e];
            return !!a && r((function() {
                a.call(null, t || function() {
                    throw 1
                }
                , 1)
            }
            ))
        }
    }
    , function(e, t) {
        e.exports = {}
    }
    , function(e, t, a) {
        var r = a(83)
          , n = a(81)
          , i = a(11)("iterator");
        e.exports = function(e) {
            if (null != e)
                return e[i] || e["@@iterator"] || n[r(e)]
        }
    }
    , function(e, t, a) {
        var r = a(151)
          , n = a(45)
          , i = a(11)("toStringTag")
          , o = "Arguments" == n(function() {
            return arguments
        }());
        e.exports = r ? n : function(e) {
            var t, a, r;
            return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (a = function(e, t) {
                try {
                    return e[t]
                } catch (e) {}
            }(t = Object(e), i)) ? a : o ? n(t) : "Object" == (r = n(t)) && "function" == typeof t.callee ? "Arguments" : r
        }
    }
    , function(e, t, a) {
        var r = a(16)
          , n = a(22)
          , i = a(93)
          , o = a(196)
          , s = i("IE_PROTO")
          , l = Object.prototype;
        e.exports = o ? Object.getPrototypeOf : function(e) {
            return e = n(e),
            r(e, s) ? e[s] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? l : null
        }
    }
    , function(e, t, a) {
        var r = a(17)
          , n = a(249);
        e.exports = Object.setPrototypeOf || ("__proto__"in {} ? function() {
            var e, t = !1, a = {};
            try {
                (e = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set).call(a, []),
                t = a instanceof Array
            } catch (e) {}
            return function(a, i) {
                return r(a),
                n(i),
                t ? e.call(a, i) : a.__proto__ = i,
                a
            }
        }() : void 0)
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(23).map
          , i = a(98)
          , o = a(38)
          , s = i("map")
          , l = o("map");
        r({
            target: "Array",
            proto: !0,
            forced: !s || !l
        }, {
            map: function(e) {
                return n(this, e, arguments.length > 1 ? arguments[1] : void 0)
            }
        })
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(43));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            var t = (e = e || {}).eventBus
              , a = e.events
              , r = e.dashMetrics
              , i = e.fragmentLoader
              , o = e.debug
              , s = e.streamId
              , l = void 0
              , u = void 0
              , d = void 0
              , c = void 0;
            function f(e) {
                var t;
                return !!e && (t = !1,
                d.some((function(a) {
                    if (r = e,
                    i = a,
                    !isNaN(r.index) && r.startTime === i.startTime && r.adaptationIndex === i.adaptationIndex && r.type === i.type || function(e, t) {
                        return isNaN(e.index) && isNaN(t.index) && e.quality === t.quality
                    }(e, a) || function(e, t) {
                        return e.action === n.default.ACTION_COMPLETE && e.action === t.action
                    }(e, a))
                        return t = !0;
                    var r, i
                }
                )),
                t)
            }
            function h(e) {
                return isNaN(e.duration) ? .25 : Math.min(e.duration / 8, .5)
            }
            function p(e) {
                d = d.filter((function(t) {
                    var a = h(t);
                    return isNaN(t.startTime) || void 0 !== e && t.startTime >= e - a
                }
                ))
            }
            function g(e, t) {
                t <= e + .5 || (d = d.filter((function(a) {
                    var r = h(a);
                    return isNaN(a.startTime) || a.startTime >= t - r || isNaN(a.duration) || a.startTime + a.duration <= e + r
                }
                )))
            }
            function m(e, t, a) {
                for (var r = e.length - 1; r >= 0; r--) {
                    var n = e[r]
                      , i = n.startTime
                      , o = i + n.duration;
                    if (a = isNaN(a) ? h(n) : a,
                    !isNaN(i) && !isNaN(o) && t + a >= i && t - a < o || isNaN(i) && isNaN(t))
                        return n
                }
                return null
            }
            function y(e, t) {
                r.addSchedulingInfo(e, t),
                r.addRequestsQueue(e.mediaType, c, d)
            }
            function _(e) {
                e.sender === i && (c.splice(c.indexOf(e.request), 1),
                e.response && !e.error && d.push(e.request),
                y(e.request, e.error ? "failed" : "executed"),
                t.trigger(a.FRAGMENT_LOADING_COMPLETED, {
                    request: e.request,
                    response: e.response,
                    error: e.error,
                    sender: this
                }))
            }
            function v(e) {
                e.sender === i && t.trigger(a.FRAGMENT_LOADING_PROGRESS, {
                    request: e.request,
                    response: e.response,
                    error: e.error,
                    sender: this
                })
            }
            function b(e) {
                e.sender === i && t.trigger(a.FRAGMENT_LOADING_ABANDONED, {
                    streamId: s,
                    request: e.request,
                    mediaType: e.mediaType
                })
            }
            function E() {
                d = [],
                c = []
            }
            return l = {
                getRequests: function(e) {
                    var t = e ? e.state instanceof Array ? e.state : [e.state] : []
                      , a = [];
                    return t.forEach((function(t) {
                        var r = function(e) {
                            var t = void 0;
                            switch (e) {
                            case "loading":
                                t = c;
                                break;
                            case "executed":
                                t = d;
                                break;
                            default:
                                t = []
                            }
                            return t
                        }(t);
                        a = a.concat(function(e, t) {
                            if (t.hasOwnProperty("time"))
                                return [m(e, t.time, t.threshold)];
                            return e.filter((function(e) {
                                for (var a in t)
                                    if ("state" !== a && t.hasOwnProperty(a) && e[a] != t[a])
                                        return !1;
                                return !0
                            }
                            ))
                        }(r, e))
                    }
                    )),
                    a
                },
                isFragmentLoaded: f,
                isFragmentLoadedOrPending: function(e) {
                    var t = !1
                      , a = 0
                      , r = void 0;
                    if (!(t = f(e)))
                        for (a = 0; a < c.length; a++)
                            r = c[a],
                            e.url === r.url && e.startTime === r.startTime && (t = !0);
                    return t
                },
                removeExecutedRequestsBeforeTime: p,
                removeExecutedRequestsAfterTime: function(e) {
                    d = d.filter((function(t) {
                        return isNaN(t.startTime) || void 0 !== e && t.startTime < e
                    }
                    ))
                },
                syncExecutedRequestsWithBufferedRange: function(e, t) {
                    if (e && 0 !== e.length) {
                        for (var a = 0, r = 0, n = e.length; r < n; r++)
                            g(a, e.start(r)),
                            a = e.end(r);
                        t > 0 && g(a, t)
                    } else
                        p()
                },
                abortRequests: function() {
                    u.debug("abort requests"),
                    i.abort(),
                    c = []
                },
                executeRequest: function(e) {
                    switch (e.action) {
                    case n.default.ACTION_COMPLETE:
                        d.push(e),
                        y(e, "executed"),
                        u.debug("STREAM_COMPLETED"),
                        t.trigger(a.STREAM_COMPLETED, {
                            request: e
                        });
                        break;
                    case n.default.ACTION_DOWNLOAD:
                        y(e, "loading"),
                        c.push(e),
                        function(e) {
                            t.trigger(a.FRAGMENT_LOADING_STARTED, {
                                streamId: s,
                                request: e
                            }),
                            i.load(e)
                        }(e);
                        break;
                    default:
                        u.warn("Unknown request action.")
                    }
                },
                reset: function() {
                    t.off(a.LOADING_COMPLETED, _, this),
                    t.off(a.LOADING_DATA_PROGRESS, v, this),
                    t.off(a.LOADING_ABANDONED, b, this),
                    i && i.reset(),
                    E()
                },
                addExecutedRequest: function(e) {
                    d.push(e)
                }
            },
            u = o.getLogger(l),
            E(),
            t.on(a.LOADING_COMPLETED, _, l),
            t.on(a.LOADING_DATA_PROGRESS, v, l),
            t.on(a.LOADING_ABANDONED, b, l),
            l
        }
        o.__dashjs_factory_name = "FragmentModel";
        var s = r.default.getClassFactory(o);
        s.FRAGMENT_MODEL_LOADING = "loading",
        s.FRAGMENT_MODEL_EXECUTED = "executed",
        s.FRAGMENT_MODEL_CANCELED = "canceled",
        s.FRAGMENT_MODEL_FAILED = "failed",
        r.default.updateClassFactory(o.__dashjs_factory_name, s),
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(3))
          , n = l(a(272))
          , i = l(a(0))
          , o = l(a(160))
          , s = l(a(274));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u() {
            var e = void 0
              , t = void 0
              , a = this.context;
            function i(e) {
                if (!e)
                    return null;
                void 0 === e.fileStart && (e.fileStart = 0);
                var t = o.default.parseBuffer(e)
                  , r = (0,
                n.default)(a).create();
                return r.setData(t),
                r
            }
            function l(e, t) {
                return e[t + 3] >>> 0 | e[t + 2] << 8 >>> 0 | e[t + 1] << 16 >>> 0 | e[t] << 24 >>> 0
            }
            function u(e, t) {
                return String.fromCharCode(e[t++]) + String.fromCharCode(e[t++]) + String.fromCharCode(e[t++]) + String.fromCharCode(e[t])
            }
            return t = {
                parse: i,
                findLastTopIsoBoxCompleted: function(e, t, a) {
                    if (void 0 === a && (a = 0),
                    !t || a + 8 >= t.byteLength)
                        return new s.default(0,!1);
                    for (var r = t instanceof ArrayBuffer ? new Uint8Array(t) : t, n = void 0, i = 0; a < r.byteLength; ) {
                        var o = l(r, a)
                          , d = u(r, a + 4);
                        if (0 === o)
                            break;
                        a + o <= r.byteLength && (e.indexOf(d) >= 0 ? n = new s.default(a,!0,o) : i = a + o),
                        a += o
                    }
                    return n || new s.default(i,!1)
                },
                getMediaTimescaleFromMoov: function(e) {
                    var t = i(e)
                      , a = t ? t.getBox("mdhd") : void 0;
                    return a ? a.timescale : NaN
                },
                getSamplesInfo: function(e) {
                    if (!e || 0 === e.byteLength)
                        return {
                            sampleList: [],
                            lastSequenceNumber: NaN,
                            totalDuration: NaN,
                            numSequences: NaN
                        };
                    var t, a, r = i(e), n = r.getBoxes("moof"), o = r.getBoxes("mfhd"), s = void 0, l = void 0, u = void 0, d = void 0, c = void 0, f = void 0, h = void 0, p = void 0, g = void 0, m = void 0, y = void 0, _ = void 0, v = void 0, b = void 0;
                    a = r.getBoxes("moof").length,
                    t = o[o.length - 1].sequence_number,
                    l = 0,
                    c = [];
                    var E = -1
                      , k = -1;
                    for (m = 0; m < n.length; m++) {
                        var T = n[m]
                          , S = T.getChildBoxes("traf");
                        for (p = 0; p < S.length; p++) {
                            var A = S[p]
                              , C = A.getChildBox("tfhd")
                              , I = A.getChildBox("tfdt");
                            d = I.baseMediaDecodeTime;
                            var P = A.getChildBoxes("trun")
                              , w = A.getChildBoxes("subs");
                            for (g = 0; g < P.length; g++) {
                                var M = P[g];
                                for (l = M.sample_count,
                                v = (C.base_data_offset || 0) + (M.data_offset || 0),
                                h = 0; h < l; h++) {
                                    s = void 0 !== (f = M.samples[h]).sample_duration ? f.sample_duration : C.default_sample_duration,
                                    u = void 0 !== f.sample_size ? f.sample_size : C.default_sample_size;
                                    var R = {
                                        dts: d,
                                        cts: d + (void 0 !== f.sample_composition_time_offset ? f.sample_composition_time_offset : 0),
                                        duration: s,
                                        offset: T.offset + v,
                                        size: u,
                                        subSizes: [u]
                                    };
                                    if (w)
                                        for (y = 0; y < w.length; y++) {
                                            var x = w[y];
                                            if (E < x.entry_count - 1 && h > k && (E++,
                                            k += x.entries[E].sample_delta),
                                            h == k) {
                                                R.subSizes = [];
                                                var D = x.entries[E];
                                                for (_ = 0; _ < D.subsample_count; _++)
                                                    R.subSizes.push(D.subsamples[_].subsample_size)
                                            }
                                        }
                                    c.push(R),
                                    v += u,
                                    d += s
                                }
                            }
                            b = d - I.baseMediaDecodeTime
                        }
                    }
                    return {
                        sampleList: c,
                        lastSequenceNumber: t,
                        totalDuration: b,
                        numSequences: a
                    }
                },
                findInitRange: function(t) {
                    var a = null
                      , r = i(t);
                    if (!r)
                        return a;
                    var n = r.getBox("ftyp")
                      , o = r.getBox("moov");
                    return e.debug("Searching for initialization."),
                    o && o.isComplete && (a = (n ? n.offset : o.offset) + "-" + (o.offset + o.size - 1),
                    e.debug("Found the initialization.  Range: " + a)),
                    a
                }
            },
            e = (0,
            r.default)(a).getInstance().getLogger(t),
            t
        }
        u.__dashjs_factory_name = "BoxParser",
        t.default = i.default.getSingletonFactory(u)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(218));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            e = e || {};
            var t = this.context
              , a = void 0
              , r = void 0;
            return a = (0,
            n.default)(t).getInstance(),
            {
                load: function(n) {
                    var i = a.getLoader(n && n.request ? n.request.url : null);
                    (r = i(t).create({
                        errHandler: e.errHandler,
                        mediaPlayerModel: e.mediaPlayerModel,
                        requestModifier: e.requestModifier,
                        useFetch: e.useFetch || null,
                        dashMetrics: e.dashMetrics,
                        boxParser: e.boxParser ? e.boxParser : null,
                        constants: e.constants ? e.constants : null,
                        dashConstants: e.dashConstants ? e.dashConstants : null,
                        urlUtils: e.urlUtils ? e.urlUtils : null,
                        errors: e.errors
                    })).load(n)
                },
                abort: function() {
                    r && r.abort()
                }
            }
        }
        o.__dashjs_factory_name = "URLLoader";
        var s = r.default.getClassFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(163);
        var i = new (function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return e.MEDIA_KEYERR_CODE = 100,
                e.MEDIA_KEYERR_UNKNOWN_CODE = 101,
                e.MEDIA_KEYERR_CLIENT_CODE = 102,
                e.MEDIA_KEYERR_SERVICE_CODE = 103,
                e.MEDIA_KEYERR_OUTPUT_CODE = 104,
                e.MEDIA_KEYERR_HARDWARECHANGE_CODE = 105,
                e.MEDIA_KEYERR_DOMAIN_CODE = 106,
                e.MEDIA_KEY_MESSAGE_ERROR_CODE = 107,
                e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE = 108,
                e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE = 109,
                e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE = 110,
                e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE = 111,
                e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE = 112,
                e.KEY_SESSION_CREATED_ERROR_CODE = 113,
                e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE = 114,
                e.MEDIA_KEYERR_UNKNOWN_MESSAGE = "An unspecified error occurred. This value is used for errors that don't match any of the other codes.",
                e.MEDIA_KEYERR_CLIENT_MESSAGE = "The Key System could not be installed or updated.",
                e.MEDIA_KEYERR_SERVICE_MESSAGE = "The message passed into update indicated an error from the license service.",
                e.MEDIA_KEYERR_OUTPUT_MESSAGE = "There is no available output device with the required characteristics for the content protection system.",
                e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE = "A hardware configuration change caused a content protection error.",
                e.MEDIA_KEYERR_DOMAIN_MESSAGE = "An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",
                e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE = "Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",
                e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE = "DRM: Empty key message from CDM",
                e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE = "Error updating server certificate -- ",
                e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE = "DRM: KeyStatusChange error! -- License has expired",
                e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE = "DRM: No license server URL specified!",
                e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE = "DRM: KeySystem Access Denied! -- ",
                e.KEY_SESSION_CREATED_ERROR_MESSAGE = "DRM: unable to create session! --",
                e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE = "DRM: licenser error! --",
                e
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default));
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(7)
          , i = a(179)
          , o = a(17)
          , s = a(65)
          , l = a(14)
          , u = a(69)
          , d = i.ArrayBuffer
          , c = i.DataView
          , f = d.prototype.slice;
        r({
            target: "ArrayBuffer",
            proto: !0,
            unsafe: !0,
            forced: n((function() {
                return !new d(2).slice(1, void 0).byteLength
            }
            ))
        }, {
            slice: function(e, t) {
                if (void 0 !== f && void 0 === t)
                    return f.call(o(this), e);
                for (var a = o(this).byteLength, r = s(e, a), n = s(void 0 === t ? a : t, a), i = new (u(this, d))(l(n - r)), h = new c(this), p = new c(i), g = 0; r < n; )
                    p.setUint8(g++, h.getUint8(r++));
                return i
            }
        })
    }
    , function(e, t, a) {
        var r = a(7)
          , n = a(45)
          , i = "".split;
        e.exports = r((function() {
            return !Object("z").propertyIsEnumerable(0)
        }
        )) ? function(e) {
            return "String" == n(e) ? i.call(e, "") : Object(e)
        }
        : Object
    }
    , function(e, t, a) {
        var r = a(145)
          , n = a(76)
          , i = r("keys");
        e.exports = function(e) {
            return i[e] || (i[e] = n(e))
        }
    }
    , function(e, t, a) {
        var r = a(7)
          , n = /#|\.prototype\./
          , i = function(e, t) {
            var a = s[o(e)];
            return a == u || a != l && ("function" == typeof t ? r(t) : !!t)
        }
          , o = i.normalize = function(e) {
            return String(e).replace(n, ".").toLowerCase()
        }
          , s = i.data = {}
          , l = i.NATIVE = "N"
          , u = i.POLYFILL = "P";
        e.exports = i
    }
    , function(e, t, a) {
        var r = a(45);
        e.exports = Array.isArray || function(e) {
            return "Array" == r(e)
        }
    }
    , function(e, t, a) {
        var r = a(184)
          , n = a(146);
        e.exports = Object.keys || function(e) {
            return r(e, n)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(63)
          , n = a(18)
          , i = a(57);
        e.exports = function(e, t, a) {
            var o = r(t);
            o in e ? n.f(e, o, i(0, a)) : e[o] = a
        }
    }
    , function(e, t, a) {
        var r = a(7)
          , n = a(11)
          , i = a(99)
          , o = n("species");
        e.exports = function(e) {
            return i >= 51 || !r((function() {
                var t = [];
                return (t.constructor = {})[o] = function() {
                    return {
                        foo: 1
                    }
                }
                ,
                1 !== t[e](Boolean).foo
            }
            ))
        }
    }
    , function(e, t, a) {
        var r, n, i = a(6), o = a(149), s = i.process, l = s && s.versions, u = l && l.v8;
        u ? n = (r = u.split("."))[0] + r[1] : o && (!(r = o.match(/Edge\/(\d+)/)) || r[1] >= 74) && (r = o.match(/Chrome\/(\d+)/)) && (n = r[1]),
        e.exports = n && +n
    }
    , function(e, t, a) {
        var r = a(5)
          , n = a(192);
        r({
            target: "Array",
            stat: !0,
            forced: !a(101)((function(e) {
                Array.from(e)
            }
            ))
        }, {
            from: n
        })
    }
    , function(e, t, a) {
        var r = a(11)("iterator")
          , n = !1;
        try {
            var i = 0
              , o = {
                next: function() {
                    return {
                        done: !!i++
                    }
                },
                return: function() {
                    n = !0
                }
            };
            o[r] = function() {
                return this
            }
            ,
            Array.from(o, (function() {
                throw 2
            }
            ))
        } catch (e) {}
        e.exports = function(e, t) {
            if (!t && !n)
                return !1;
            var a = !1;
            try {
                var i = {};
                i[r] = function() {
                    return {
                        next: function() {
                            return {
                                done: a = !0
                            }
                        }
                    }
                }
                ,
                e(i)
            } catch (e) {}
            return a
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(197)
          , n = a(199);
        e.exports = r("Map", (function(e) {
            return function() {
                return e(this, arguments.length ? arguments[0] : void 0)
            }
        }
        ), n)
    }
    , function(e, t, a) {
        var r = a(27);
        e.exports = function(e, t, a) {
            for (var n in t)
                r(e, n, t[n], a);
            return e
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(46)
          , n = a(18)
          , i = a(11)
          , o = a(15)
          , s = i("species");
        e.exports = function(e) {
            var t = r(e)
              , a = n.f;
            o && t && !t[s] && a(t, s, {
                configurable: !0,
                get: function() {
                    return this
                }
            })
        }
    }
    , function(e, t, a) {
        var r = a(45)
          , n = a(6);
        e.exports = "process" == r(n.process)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            return r(e, [{
                key: "extend",
                value: function(e, t) {
                    if (e) {
                        var a = !!t && t.override
                          , r = !!t && t.publicOnly;
                        for (var n in e)
                            !e.hasOwnProperty(n) || this[n] && !a || r && -1 === e[n].indexOf("public_") || (this[n] = e[n])
                    }
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        !function(e) {
            e.ns_tt = "http://www.w3.org/ns/ttml",
            e.ns_tts = "http://www.w3.org/ns/ttml#styling",
            e.ns_ttp = "http://www.w3.org/ns/ttml#parameter",
            e.ns_xml = "http://www.w3.org/XML/1998/namespace",
            e.ns_itts = "http://www.w3.org/ns/ttml/profile/imsc1#styling",
            e.ns_ittp = "http://www.w3.org/ns/ttml/profile/imsc1#parameter",
            e.ns_smpte = "http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",
            e.ns_ebutts = "urn:ebu:tt:style"
        }(t)
    }
    , function(e, t, a) {
        !function(e) {
            var t = /#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/
              , a = /rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/
              , r = /rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/
              , n = {
                transparent: [0, 0, 0, 0],
                black: [0, 0, 0, 255],
                silver: [192, 192, 192, 255],
                gray: [128, 128, 128, 255],
                white: [255, 255, 255, 255],
                maroon: [128, 0, 0, 255],
                red: [255, 0, 0, 255],
                purple: [128, 0, 128, 255],
                fuchsia: [255, 0, 255, 255],
                magenta: [255, 0, 255, 255],
                green: [0, 128, 0, 255],
                lime: [0, 255, 0, 255],
                olive: [128, 128, 0, 255],
                yellow: [255, 255, 0, 255],
                navy: [0, 0, 128, 255],
                blue: [0, 0, 255, 255],
                teal: [0, 128, 128, 255],
                aqua: [0, 255, 255, 255],
                cyan: [0, 255, 255, 255]
            };
            e.parseColor = function(e) {
                var i, o = null, s = n[e.toLowerCase()];
                return void 0 !== s ? o = s : null !== (i = t.exec(e)) ? o = [parseInt(i[1], 16), parseInt(i[2], 16), parseInt(i[3], 16), void 0 !== i[4] ? parseInt(i[4], 16) : 255] : null !== (i = a.exec(e)) ? o = [parseInt(i[1]), parseInt(i[2]), parseInt(i[3]), 255] : null !== (i = r.exec(e)) && (o = [parseInt(i[1]), parseInt(i[2]), parseInt(i[3]), parseInt(i[4])]),
                o
            }
            ;
            var i = /^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;
            e.parseLength = function(e) {
                var t, a = null;
                return null !== (t = i.exec(e)) && (a = {
                    value: parseFloat(t[1]),
                    unit: t[2]
                }),
                a
            }
            ,
            e.parseTextShadow = function(t) {
                var a = t.split(",")
                  , r = [];
                for (var n in a) {
                    var i = a[n].split(" ");
                    if (1 === i.length && "none" === i[0])
                        return "none";
                    if (i.length > 1 && i.length < 5) {
                        var o = [null, null, null, null]
                          , s = e.parseLength(i.shift());
                        if (null === s)
                            return null;
                        if (o[0] = s,
                        null === (s = e.parseLength(i.shift())))
                            return null;
                        if (o[1] = s,
                        0 === i.length) {
                            r.push(o);
                            continue
                        }
                        if (null !== (s = e.parseLength(i[0])) && (o[2] = s,
                        i.shift()),
                        0 === i.length) {
                            r.push(o);
                            continue
                        }
                        var l = e.parseColor(i[0]);
                        if (null === l)
                            return null;
                        o[3] = l,
                        r.push(o)
                    }
                }
                return r
            }
            ,
            e.parsePosition = function(t) {
                var a = t.split(" ")
                  , r = function(e) {
                    return "center" === e || "left" === e || "top" === e || "bottom" === e || "right" === e
                };
                if (a.length > 4)
                    return null;
                for (var n in a)
                    if (!r(a[n])) {
                        var i = e.parseLength(a[n]);
                        if (null === i)
                            return null;
                        a[n] = i
                    }
                for (var o = {
                    h: {
                        edge: "left",
                        offset: {
                            value: 50,
                            unit: "%"
                        }
                    },
                    v: {
                        edge: "top",
                        offset: {
                            value: 50,
                            unit: "%"
                        }
                    }
                }, s = 0; s < a.length; ) {
                    var l = a[s++];
                    if (r(l)) {
                        var u = {
                            value: 0,
                            unit: "%"
                        };
                        2 !== a.length && s < a.length && !r(a[s]) && (u = a[s++]),
                        "right" === l ? (o.h.edge = l,
                        o.h.offset = u) : "bottom" === l ? (o.v.edge = l,
                        o.v.offset = u) : "left" === l ? o.h.offset = u : "top" === l && (o.v.offset = u)
                    } else {
                        if (1 !== a.length && 2 !== a.length)
                            return null;
                        1 === s ? o.h.offset = l : o.v.offset = l
                    }
                }
                return o
            }
            ,
            e.ComputedLength = function(e, t) {
                this.rw = e,
                this.rh = t
            }
            ,
            e.ComputedLength.prototype.toUsedLength = function(e, t) {
                return e * this.rw + t * this.rh
            }
            ,
            e.ComputedLength.prototype.isZero = function() {
                return 0 === this.rw && 0 === this.rh
            }
            ,
            e.toComputedLength = function(t, a, r, n, i, o) {
                return "%" === a && n ? new e.ComputedLength(n.rw * t / 100,n.rh * t / 100) : "em" === a && r ? new e.ComputedLength(r.rw * t,r.rh * t) : "c" === a && i ? new e.ComputedLength(t * i.rw,t * i.rh) : "px" === a && o ? new e.ComputedLength(t * o.rw,t * o.rh) : "rh" === a ? new e.ComputedLength(0,t / 100) : "rw" === a ? new e.ComputedLength(t / 100,0) : null
            }
        }(t)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o() {
            var e = {};
            return {
                save: function(t) {
                    var a = t.streamId
                      , r = t.representationId;
                    e[a] = e[a] || {},
                    e[a][r] = t
                },
                extract: function(t, a) {
                    return e && e[t] && e[t][a] ? e[t][a] : null
                },
                reset: function() {
                    e = {}
                }
            }
        }
        o.__dashjs_factory_name = "InitCache",
        t.default = i.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(106);
        var i = new (function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return e.AST_IN_FUTURE = "astInFuture",
                e.BUFFER_EMPTY = "bufferStalled",
                e.BUFFER_LOADED = "bufferLoaded",
                e.BUFFER_LEVEL_STATE_CHANGED = "bufferStateChanged",
                e.ERROR = "error",
                e.FRAGMENT_LOADING_COMPLETED = "fragmentLoadingCompleted",
                e.FRAGMENT_LOADING_PROGRESS = "fragmentLoadingProgress",
                e.FRAGMENT_LOADING_STARTED = "fragmentLoadingStarted",
                e.FRAGMENT_LOADING_ABANDONED = "fragmentLoadingAbandoned",
                e.LOG = "log",
                e.MANIFEST_LOADED = "manifestLoaded",
                e.METRICS_CHANGED = "metricsChanged",
                e.METRIC_CHANGED = "metricChanged",
                e.METRIC_ADDED = "metricAdded",
                e.METRIC_UPDATED = "metricUpdated",
                e.PERIOD_SWITCH_COMPLETED = "periodSwitchCompleted",
                e.PERIOD_SWITCH_STARTED = "periodSwitchStarted",
                e.QUALITY_CHANGE_REQUESTED = "qualityChangeRequested",
                e.QUALITY_CHANGE_RENDERED = "qualityChangeRendered",
                e.TRACK_CHANGE_RENDERED = "trackChangeRendered",
                e.SOURCE_INITIALIZED = "sourceInitialized",
                e.STREAM_INITIALIZING = "streamInitializing",
                e.STREAM_UPDATED = "streamUpdated",
                e.STREAM_INITIALIZED = "streamInitialized",
                e.STREAM_TEARDOWN_COMPLETE = "streamTeardownComplete",
                e.TEXT_TRACKS_ADDED = "allTextTracksAdded",
                e.TEXT_TRACK_ADDED = "textTrackAdded",
                e.TTML_PARSED = "ttmlParsed",
                e.TTML_TO_PARSE = "ttmlToParse",
                e.CAPTION_RENDERED = "captionRendered",
                e.CAPTION_CONTAINER_RESIZE = "captionContainerResize",
                e.CAN_PLAY = "canPlay",
                e.PLAYBACK_ENDED = "playbackEnded",
                e.PLAYBACK_ERROR = "playbackError",
                e.PLAYBACK_NOT_ALLOWED = "playbackNotAllowed",
                e.PLAYBACK_METADATA_LOADED = "playbackMetaDataLoaded",
                e.PLAYBACK_PAUSED = "playbackPaused",
                e.PLAYBACK_PLAYING = "playbackPlaying",
                e.PLAYBACK_PROGRESS = "playbackProgress",
                e.PLAYBACK_RATE_CHANGED = "playbackRateChanged",
                e.PLAYBACK_SEEKED = "playbackSeeked",
                e.PLAYBACK_SEEKING = "playbackSeeking",
                e.PLAYBACK_SEEK_ASKED = "playbackSeekAsked",
                e.PLAYBACK_STALLED = "playbackStalled",
                e.PLAYBACK_STARTED = "playbackStarted",
                e.PLAYBACK_TIME_UPDATED = "playbackTimeUpdated",
                e.PLAYBACK_WAITING = "playbackWaiting",
                e.MANIFEST_VALIDITY_CHANGED = "manifestValidityChanged",
                e.GAP_CAUSED_SEEK_TO_PERIOD_END = "gapCausedSeekToPeriodEnd",
                e
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default));
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        }
        : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        }
          , n = u(a(0))
          , i = u(a(169))
          , o = u(a(3))
          , s = u(a(1))
          , l = a(20);
        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function d(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function c() {
            var e, t, a = {
                debug: {
                    logLevel: o.default.LOG_LEVEL_WARNING
                },
                streaming: {
                    metricsMaxListDepth: 1e3,
                    abandonLoadTimeout: 1e4,
                    liveDelayFragmentCount: NaN,
                    liveDelay: null,
                    scheduleWhilePaused: !0,
                    fastSwitchEnabled: !1,
                    flushBufferAtTrackSwitch: !1,
                    calcSegmentAvailabilityRangeFromTimeline: !0,
                    bufferPruningInterval: 10,
                    bufferToKeep: 20,
                    jumpGaps: !0,
                    jumpLargeGaps: !0,
                    smallGapLimit: 1.5,
                    stableBufferTime: 12,
                    bufferTimeAtTopQuality: 30,
                    bufferTimeAtTopQualityLongForm: 60,
                    longFormContentDurationThreshold: 600,
                    wallclockTimeUpdateInterval: 50,
                    lowLatencyEnabled: !1,
                    keepProtectionMediaKeys: !1,
                    useManifestDateHeaderTimeSource: !0,
                    useSuggestedPresentationDelay: !0,
                    useAppendWindow: !0,
                    manifestUpdateRetryInterval: 100,
                    liveCatchUpMinDrift: .02,
                    liveCatchUpMaxDrift: 0,
                    liveCatchUpPlaybackRate: .5,
                    liveCatchupLatencyThreshold: NaN,
                    lastBitrateCachingInfo: {
                        enabled: !0,
                        ttl: 36e4
                    },
                    lastMediaSettingsCachingInfo: {
                        enabled: !0,
                        ttl: 36e4
                    },
                    cacheLoadThresholds: {
                        video: 50,
                        audio: 5
                    },
                    retryIntervals: (e = {},
                    d(e, l.HTTPRequest.MPD_TYPE, 500),
                    d(e, l.HTTPRequest.XLINK_EXPANSION_TYPE, 500),
                    d(e, l.HTTPRequest.MEDIA_SEGMENT_TYPE, 1e3),
                    d(e, l.HTTPRequest.INIT_SEGMENT_TYPE, 1e3),
                    d(e, l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE, 1e3),
                    d(e, l.HTTPRequest.INDEX_SEGMENT_TYPE, 1e3),
                    d(e, l.HTTPRequest.OTHER_TYPE, 1e3),
                    d(e, "lowLatencyReductionFactor", 10),
                    e),
                    retryAttempts: (t = {},
                    d(t, l.HTTPRequest.MPD_TYPE, 3),
                    d(t, l.HTTPRequest.XLINK_EXPANSION_TYPE, 1),
                    d(t, l.HTTPRequest.MEDIA_SEGMENT_TYPE, 3),
                    d(t, l.HTTPRequest.INIT_SEGMENT_TYPE, 3),
                    d(t, l.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE, 3),
                    d(t, l.HTTPRequest.INDEX_SEGMENT_TYPE, 3),
                    d(t, l.HTTPRequest.OTHER_TYPE, 3),
                    d(t, "lowLatencyMultiplyFactor", 5),
                    t),
                    abr: {
                        movingAverageMethod: s.default.MOVING_AVERAGE_SLIDING_WINDOW,
                        ABRStrategy: s.default.ABR_STRATEGY_DYNAMIC,
                        bandwidthSafetyFactor: .9,
                        useDefaultABRRules: !0,
                        useBufferOccupancyABR: !1,
                        useDeadTimeLatency: !0,
                        limitBitrateByPortal: !1,
                        usePixelRatioInLimitBitrateByPortal: !1,
                        maxBitrate: {
                            audio: -1,
                            video: -1
                        },
                        minBitrate: {
                            audio: -1,
                            video: -1
                        },
                        maxRepresentationRatio: {
                            audio: 1,
                            video: 1
                        },
                        initialBitrate: {
                            audio: -1,
                            video: -1
                        },
                        initialRepresentationRatio: {
                            audio: -1,
                            video: -1
                        },
                        autoSwitchBitrate: {
                            audio: !0,
                            video: !0
                        }
                    },
                    cmcd: {
                        enabled: !1,
                        sid: null,
                        cid: null,
                        did: null
                    }
                }
            }, n = i.default.clone(a);
            return {
                get: function() {
                    return n
                },
                update: function(e) {
                    "object" === (void 0 === e ? "undefined" : r(e)) && function e(t, a, n) {
                        for (var o in t)
                            t.hasOwnProperty(o) && a.hasOwnProperty(o) && ("object" === r(t[o]) && null !== t[o] ? e(t[o], a[o], n.slice() + o + ".") : a[o] = i.default.clone(t[o]))
                    }(e, n, "")
                },
                reset: function() {
                    n = i.default.clone(a)
                }
            }
        }
        c.__dashjs_factory_name = "Settings";
        var f = n.default.getSingletonFactory(c);
        t.default = f
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e(t, a) {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this._test = t,
                this._converter = a
            }
            return r(e, [{
                key: "test",
                get: function() {
                    return this._test
                }
            }, {
                key: "converter",
                get: function() {
                    return this._converter
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(106);
        var i = new (function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return e.METRICS_INITIALISATION_COMPLETE = "internal_metricsReportingInitialized",
                e.BECAME_REPORTING_PLAYER = "internal_becameReportingPlayer",
                e
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default));
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = h(a(73))
          , n = h(a(400))
          , i = h(a(401))
          , o = h(a(402))
          , s = h(a(403))
          , l = h(a(404))
          , u = h(a(405))
          , d = h(a(406))
          , c = h(a(407))
          , f = h(a(62));
        function h(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function p() {
            var e = this.context
              , t = void 0
              , a = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0;
            return t = {
                initialize: function() {
                    p = [];
                    var t = void 0;
                    t = (0,
                    s.default)(e).getInstance({
                        BASE64: g
                    }),
                    p.push(t),
                    t = (0,
                    o.default)(e).getInstance({
                        BASE64: g
                    }),
                    p.push(t),
                    t = (0,
                    n.default)(e).getInstance({
                        BASE64: g
                    }),
                    p.push(t),
                    m = t,
                    t = (0,
                    i.default)(e).getInstance({
                        BASE64: g,
                        debug: a
                    }),
                    p.push(t),
                    y = t
                },
                setProtectionData: function(e) {
                    for (var t, a, r = 0; r < p.length; r++) {
                        var n = p[r];
                        n.hasOwnProperty("init") && n.init((t = n.systemString,
                        a = void 0,
                        a = null,
                        e && (a = t in e ? e[t] : null),
                        a))
                    }
                },
                isClearKey: function(e) {
                    return e === m || e === y
                },
                initDataEquals: function(e, t) {
                    if (e.byteLength === t.byteLength) {
                        for (var a = new Uint8Array(e), r = new Uint8Array(t), n = 0; n < a.length; n++)
                            if (a[n] !== r[n])
                                return !1;
                        return !0
                    }
                    return !1
                },
                getKeySystems: function() {
                    return p
                },
                setKeySystems: function(e) {
                    p = e
                },
                getKeySystemBySystemString: function(e) {
                    for (var t = 0; t < p.length; t++)
                        if (p[t].systemString === e)
                            return p[t];
                    return null
                },
                getSupportedKeySystemsFromContentProtection: function(e) {
                    var t = void 0
                      , a = void 0
                      , n = void 0
                      , i = void 0
                      , o = [];
                    if (e) {
                        var s = r.default.findCencContentProtection(e);
                        for (n = 0; n < p.length; ++n)
                            for (a = p[n],
                            i = 0; i < e.length; ++i)
                                if ((t = e[i]).schemeIdUri.toLowerCase() === a.schemeIdURI) {
                                    var l = a.getInitData(t, s);
                                    o.push({
                                        ks: p[n],
                                        initData: l,
                                        cdmData: a.getCDMData(),
                                        sessionId: a.getSessionId(t)
                                    })
                                }
                    }
                    return o
                },
                getSupportedKeySystems: function(e, t) {
                    for (var a = [], n = r.default.parsePSSHList(e), i = void 0, o = void 0, s = void 0, l = 0; l < p.length; ++l)
                        o = (i = p[l]).systemString,
                        s = !t || o in t,
                        i.uuid in n && s && a.push({
                            ks: i,
                            initData: n[i.uuid],
                            cdmData: i.getCDMData(),
                            sessionId: i.getSessionId()
                        });
                    return a
                },
                getLicenseServer: function(t, a, r) {
                    if ("license-release" === r || "individualization-request" === r)
                        return null;
                    var n = null;
                    return a && a.hasOwnProperty("drmtoday") ? n = (0,
                    l.default)(e).getInstance({
                        BASE64: g
                    }) : t.systemString === f.default.WIDEVINE_KEYSTEM_STRING ? n = (0,
                    d.default)(e).getInstance() : t.systemString === f.default.PLAYREADY_KEYSTEM_STRING ? n = (0,
                    u.default)(e).getInstance() : t.systemString === f.default.CLEARKEY_KEYSTEM_STRING && (n = (0,
                    c.default)(e).getInstance()),
                    n
                },
                processClearKeyLicenseRequest: function(e, t, a) {
                    try {
                        return e.getClearKeysFromProtectionData(t, a)
                    } catch (e) {
                        return h.error("Failed to retrieve clearkeys from ProtectionData"),
                        null
                    }
                },
                setConfig: function(e) {
                    e && (e.debug && (a = e.debug,
                    h = a.getLogger(t)),
                    e.BASE64 && (g = e.BASE64))
                }
            }
        }
        p.__dashjs_factory_name = "ProtectionKeyController",
        t.default = dashjs.FactoryMaker.getSingletonFactory(p)
    }
    , function(e, t, a) {
        "use strict";
        var r = a(424)
          , n = a(17)
          , i = a(22)
          , o = a(14)
          , s = a(35)
          , l = a(42)
          , u = a(425)
          , d = a(426)
          , c = Math.max
          , f = Math.min
          , h = Math.floor
          , p = /\$([$&'`]|\d\d?|<[^>]*>)/g
          , g = /\$([$&'`]|\d\d?)/g;
        r("replace", 2, (function(e, t, a, r) {
            var m = r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE
              , y = r.REPLACE_KEEPS_$0
              , _ = m ? "$" : "$0";
            return [function(a, r) {
                var n = l(this)
                  , i = null == a ? void 0 : a[e];
                return void 0 !== i ? i.call(a, n, r) : t.call(String(n), a, r)
            }
            , function(e, r) {
                if (!m && y || "string" == typeof r && -1 === r.indexOf(_)) {
                    var i = a(t, e, this, r);
                    if (i.done)
                        return i.value
                }
                var l = n(e)
                  , h = String(this)
                  , p = "function" == typeof r;
                p || (r = String(r));
                var g = l.global;
                if (g) {
                    var b = l.unicode;
                    l.lastIndex = 0
                }
                for (var E = []; ; ) {
                    var k = d(l, h);
                    if (null === k)
                        break;
                    if (E.push(k),
                    !g)
                        break;
                    "" === String(k[0]) && (l.lastIndex = u(h, o(l.lastIndex), b))
                }
                for (var T, S = "", A = 0, C = 0; C < E.length; C++) {
                    k = E[C];
                    for (var I = String(k[0]), P = c(f(s(k.index), h.length), 0), w = [], M = 1; M < k.length; M++)
                        w.push(void 0 === (T = k[M]) ? T : String(T));
                    var R = k.groups;
                    if (p) {
                        var x = [I].concat(w, P, h);
                        void 0 !== R && x.push(R);
                        var D = String(r.apply(void 0, x))
                    } else
                        D = v(I, h, P, w, R, r);
                    P >= A && (S += h.slice(A, P) + D,
                    A = P + I.length)
                }
                return S + h.slice(A)
            }
            ];
            function v(e, a, r, n, o, s) {
                var l = r + e.length
                  , u = n.length
                  , d = g;
                return void 0 !== o && (o = i(o),
                d = p),
                t.call(s, d, (function(t, i) {
                    var s;
                    switch (i.charAt(0)) {
                    case "$":
                        return "$";
                    case "&":
                        return e;
                    case "`":
                        return a.slice(0, r);
                    case "'":
                        return a.slice(l);
                    case "<":
                        s = o[i.slice(1, -1)];
                        break;
                    default:
                        var d = +i;
                        if (0 === d)
                            return t;
                        if (d > u) {
                            var c = h(d / 10);
                            return 0 === c ? t : c <= u ? void 0 === n[c - 1] ? i.charAt(1) : n[c - 1] + i.charAt(1) : t
                        }
                        s = n[d - 1]
                    }
                    return void 0 === s ? "" : s
                }
                ))
            }
        }
        ))
    }
    , function(e, t, a) {
        a(239)("Uint8", (function(e) {
            return function(t, a, r) {
                return e(this, t, a, r)
            }
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(434)
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("copyWithin", (function(e, t) {
            return n.call(i(this), e, t, arguments.length > 2 ? arguments[2] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(23).every
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("every", (function(e) {
            return n(i(this), e, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(238)
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("fill", (function(e) {
            return n.apply(i(this), arguments)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(23).filter
          , i = a(69)
          , o = r.aTypedArray
          , s = r.aTypedArrayConstructor;
        (0,
        r.exportTypedArrayMethod)("filter", (function(e) {
            for (var t = n(o(this), e, arguments.length > 1 ? arguments[1] : void 0), a = i(this, this.constructor), r = 0, l = t.length, u = new (s(a))(l); l > r; )
                u[r] = t[r++];
            return u
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(23).find
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("find", (function(e) {
            return n(i(this), e, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(23).findIndex
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("findIndex", (function(e) {
            return n(i(this), e, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(23).forEach
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("forEach", (function(e) {
            n(i(this), e, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(78).includes
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("includes", (function(e) {
            return n(i(this), e, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(78).indexOf
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("indexOf", (function(e) {
            return n(i(this), e, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(6)
          , n = a(10)
          , i = a(24)
          , o = a(11)("iterator")
          , s = r.Uint8Array
          , l = i.values
          , u = i.keys
          , d = i.entries
          , c = n.aTypedArray
          , f = n.exportTypedArrayMethod
          , h = s && s.prototype[o]
          , p = !!h && ("values" == h.name || null == h.name)
          , g = function() {
            return l.call(c(this))
        };
        f("entries", (function() {
            return d.call(c(this))
        }
        )),
        f("keys", (function() {
            return u.call(c(this))
        }
        )),
        f("values", g, !p),
        f(o, g, !p)
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = r.aTypedArray
          , i = r.exportTypedArrayMethod
          , o = [].join;
        i("join", (function(e) {
            return o.apply(n(this), arguments)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(435)
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("lastIndexOf", (function(e) {
            return n.apply(i(this), arguments)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(23).map
          , i = a(69)
          , o = r.aTypedArray
          , s = r.aTypedArrayConstructor;
        (0,
        r.exportTypedArrayMethod)("map", (function(e) {
            return n(o(this), e, arguments.length > 1 ? arguments[1] : void 0, (function(e, t) {
                return new (s(i(e, e.constructor)))(t)
            }
            ))
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(158).left
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("reduce", (function(e) {
            return n(i(this), e, arguments.length, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(158).right
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("reduceRight", (function(e) {
            return n(i(this), e, arguments.length, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = r.aTypedArray
          , i = r.exportTypedArrayMethod
          , o = Math.floor;
        i("reverse", (function() {
            for (var e, t = n(this).length, a = o(t / 2), r = 0; r < a; )
                e = this[r],
                this[r++] = this[--t],
                this[t] = e;
            return this
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(14)
          , i = a(241)
          , o = a(22)
          , s = a(7)
          , l = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("set", (function(e) {
            l(this);
            var t = i(arguments.length > 1 ? arguments[1] : void 0, 1)
              , a = this.length
              , r = o(e)
              , s = n(r.length)
              , u = 0;
            if (s + t > a)
                throw RangeError("Wrong length");
            for (; u < s; )
                this[t + u] = r[u++]
        }
        ), s((function() {
            new Int8Array(1).set({})
        }
        )))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(69)
          , i = a(7)
          , o = r.aTypedArray
          , s = r.aTypedArrayConstructor
          , l = r.exportTypedArrayMethod
          , u = [].slice;
        l("slice", (function(e, t) {
            for (var a = u.call(o(this), e, t), r = n(this, this.constructor), i = 0, l = a.length, d = new (s(r))(l); l > i; )
                d[i] = a[i++];
            return d
        }
        ), i((function() {
            new Int8Array(1).slice()
        }
        )))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(23).some
          , i = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("some", (function(e) {
            return n(i(this), e, arguments.length > 1 ? arguments[1] : void 0)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = r.aTypedArray
          , i = r.exportTypedArrayMethod
          , o = [].sort;
        i("sort", (function(e) {
            return o.call(n(this), e)
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(14)
          , i = a(65)
          , o = a(69)
          , s = r.aTypedArray;
        (0,
        r.exportTypedArrayMethod)("subarray", (function(e, t) {
            var a = s(this)
              , r = a.length
              , l = i(e, r);
            return new (o(a, a.constructor))(a.buffer,a.byteOffset + l * a.BYTES_PER_ELEMENT,n((void 0 === t ? r : i(t, r)) - l))
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(6)
          , n = a(10)
          , i = a(7)
          , o = r.Int8Array
          , s = n.aTypedArray
          , l = n.exportTypedArrayMethod
          , u = [].toLocaleString
          , d = [].slice
          , c = !!o && i((function() {
            u.call(new o(1))
        }
        ));
        l("toLocaleString", (function() {
            return u.apply(c ? d.call(s(this)) : s(this), arguments)
        }
        ), i((function() {
            return [1, 2].toLocaleString() != new o([1, 2]).toLocaleString()
        }
        )) || !i((function() {
            o.prototype.toLocaleString.call([1, 2])
        }
        )))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10).exportTypedArrayMethod
          , n = a(7)
          , i = a(6).Uint8Array
          , o = i && i.prototype || {}
          , s = [].toString
          , l = [].join;
        n((function() {
            s.call({})
        }
        )) && (s = function() {
            return l.call(this)
        }
        );
        var u = o.toString != s;
        r("toString", s, u)
    }
    , function(e, t, a) {
        "use strict";
        var r = {}.propertyIsEnumerable
          , n = Object.getOwnPropertyDescriptor
          , i = n && !r.call({
            1: 2
        }, 1);
        t.f = i ? function(e) {
            var t = n(this, e);
            return !!t && t.enumerable
        }
        : r
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(13)
          , i = r.document
          , o = n(i) && n(i.createElement);
        e.exports = function(e) {
            return o ? i.createElement(e) : {}
        }
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(26);
        e.exports = function(e, t) {
            try {
                n(r, e, t)
            } catch (a) {
                r[e] = t
            }
            return t
        }
    }
    , function(e, t, a) {
        var r = a(144)
          , n = Function.toString;
        "function" != typeof r.inspectSource && (r.inspectSource = function(e) {
            return n.call(e)
        }
        ),
        e.exports = r.inspectSource
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(142)
          , i = r["__core-js_shared__"] || n("__core-js_shared__", {});
        e.exports = i
    }
    , function(e, t, a) {
        var r = a(58)
          , n = a(144);
        (e.exports = function(e, t) {
            return n[e] || (n[e] = void 0 !== t ? t : {})
        }
        )("versions", []).push({
            version: "3.7.0",
            mode: r ? "pure" : "global",
            copyright: " 2020 Denis Pushkarev (zloirock.ru)"
        })
    }
    , function(e, t) {
        e.exports = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"]
    }
    , function(e, t) {
        t.f = Object.getOwnPropertySymbols
    }
    , function(e, t, a) {
        var r = a(7);
        e.exports = !!Object.getOwnPropertySymbols && !r((function() {
            return !String(Symbol())
        }
        ))
    }
    , function(e, t, a) {
        var r = a(46);
        e.exports = r("navigator", "userAgent") || ""
    }
    , function(e, t, a) {
        var r = a(11)
          , n = a(81)
          , i = r("iterator")
          , o = Array.prototype;
        e.exports = function(e) {
            return void 0 !== e && (n.Array === e || o[i] === e)
        }
    }
    , function(e, t, a) {
        var r = {};
        r[a(11)("toStringTag")] = "z",
        e.exports = "[object z]" === String(r)
    }
    , function(e, t, a) {
        var r = a(11)
          , n = a(47)
          , i = a(18)
          , o = r("unscopables")
          , s = Array.prototype;
        null == s[o] && i.f(s, o, {
            configurable: !0,
            value: n(null)
        }),
        e.exports = function(e) {
            s[o][e] = !0
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(194)
          , i = a(84)
          , o = a(85)
          , s = a(48)
          , l = a(26)
          , u = a(27)
          , d = a(11)
          , c = a(58)
          , f = a(81)
          , h = a(195)
          , p = h.IteratorPrototype
          , g = h.BUGGY_SAFARI_ITERATORS
          , m = d("iterator")
          , y = function() {
            return this
        };
        e.exports = function(e, t, a, d, h, _, v) {
            n(a, t, d);
            var b, E, k, T = function(e) {
                if (e === h && P)
                    return P;
                if (!g && e in C)
                    return C[e];
                switch (e) {
                case "keys":
                case "values":
                case "entries":
                    return function() {
                        return new a(this,e)
                    }
                }
                return function() {
                    return new a(this)
                }
            }, S = t + " Iterator", A = !1, C = e.prototype, I = C[m] || C["@@iterator"] || h && C[h], P = !g && I || T(h), w = "Array" == t && C.entries || I;
            if (w && (b = i(w.call(new e)),
            p !== Object.prototype && b.next && (c || i(b) === p || (o ? o(b, p) : "function" != typeof b[m] && l(b, m, y)),
            s(b, S, !0, !0),
            c && (f[S] = y))),
            "values" == h && I && "values" !== I.name && (A = !0,
            P = function() {
                return I.call(this)
            }
            ),
            c && !v || C[m] === P || l(C, m, P),
            f[t] = P,
            h)
                if (E = {
                    values: T("values"),
                    keys: _ ? P : T("keys"),
                    entries: T("entries")
                },
                v)
                    for (k in E)
                        (g || A || !(k in C)) && u(C, k, E[k]);
                else
                    r({
                        target: t,
                        proto: !0,
                        forced: g || A
                    }, E);
            return E
        }
    }
    , function(e, t, a) {
        var r = a(17)
          , n = a(150)
          , i = a(14)
          , o = a(59)
          , s = a(82)
          , l = a(193)
          , u = function(e, t) {
            this.stopped = e,
            this.result = t
        };
        e.exports = function(e, t, a) {
            var d, c, f, h, p, g, m, y = a && a.that, _ = !(!a || !a.AS_ENTRIES), v = !(!a || !a.IS_ITERATOR), b = !(!a || !a.INTERRUPTED), E = o(t, y, 1 + _ + b), k = function(e) {
                return d && l(d),
                new u(!0,e)
            }, T = function(e) {
                return _ ? (r(e),
                b ? E(e[0], e[1], k) : E(e[0], e[1])) : b ? E(e, k) : E(e)
            };
            if (v)
                d = e;
            else {
                if ("function" != typeof (c = s(e)))
                    throw TypeError("Target is not iterable");
                if (n(c)) {
                    for (f = 0,
                    h = i(e.length); h > f; f++)
                        if ((p = T(e[f])) && p instanceof u)
                            return p;
                    return new u(!1)
                }
                d = c.call(e)
            }
            for (g = d.next; !(m = g.call(d)).done; ) {
                try {
                    p = T(m.value)
                } catch (e) {
                    throw l(d),
                    e
                }
                if ("object" == typeof p && p && p instanceof u)
                    return p
            }
            return new u(!1)
        }
    }
    , function(e, t, a) {
        var r = a(13)
          , n = a(85);
        e.exports = function(e, t, a) {
            var i, o;
            return n && "function" == typeof (i = t.constructor) && i !== a && r(o = i.prototype) && o !== a.prototype && n(e, o),
            e
        }
    }
    , function(e, t, a) {
        "use strict";
        var r, n, i = a(203), o = a(258), s = RegExp.prototype.exec, l = String.prototype.replace, u = s, d = (r = /a/,
        n = /b*/g,
        s.call(r, "a"),
        s.call(n, "a"),
        0 !== r.lastIndex || 0 !== n.lastIndex), c = o.UNSUPPORTED_Y || o.BROKEN_CARET, f = void 0 !== /()??/.exec("")[1];
        (d || f || c) && (u = function(e) {
            var t, a, r, n, o = this, u = c && o.sticky, h = i.call(o), p = o.source, g = 0, m = e;
            return u && (-1 === (h = h.replace("y", "")).indexOf("g") && (h += "g"),
            m = String(e).slice(o.lastIndex),
            o.lastIndex > 0 && (!o.multiline || o.multiline && "\n" !== e[o.lastIndex - 1]) && (p = "(?: " + p + ")",
            m = " " + m,
            g++),
            a = new RegExp("^(?:" + p + ")",h)),
            f && (a = new RegExp("^" + p + "$(?!\\s)",h)),
            d && (t = o.lastIndex),
            r = s.call(u ? a : o, m),
            u ? r ? (r.input = r.input.slice(g),
            r[0] = r[0].slice(g),
            r.index = o.lastIndex,
            o.lastIndex += r[0].length) : o.lastIndex = 0 : d && r && (o.lastIndex = o.global ? r.index + r[0].length : t),
            f && r && r.length > 1 && l.call(r[0], a, (function() {
                for (n = 1; n < arguments.length - 2; n++)
                    void 0 === arguments[n] && (r[n] = void 0)
            }
            )),
            r
        }
        ),
        e.exports = u
    }
    , function(e, t, a) {
        var r = a(35)
          , n = a(42)
          , i = function(e) {
            return function(t, a) {
                var i, o, s = String(n(t)), l = r(a), u = s.length;
                return l < 0 || l >= u ? e ? "" : void 0 : (i = s.charCodeAt(l)) < 55296 || i > 56319 || l + 1 === u || (o = s.charCodeAt(l + 1)) < 56320 || o > 57343 ? e ? s.charAt(l) : i : e ? s.slice(l, l + 2) : o - 56320 + (i - 55296 << 10) + 65536
            }
        };
        e.exports = {
            codeAt: i(!1),
            charAt: i(!0)
        }
    }
    , function(e, t, a) {
        var r = a(60)
          , n = a(22)
          , i = a(92)
          , o = a(14)
          , s = function(e) {
            return function(t, a, s, l) {
                r(a);
                var u = n(t)
                  , d = i(u)
                  , c = o(u.length)
                  , f = e ? c - 1 : 0
                  , h = e ? -1 : 1;
                if (s < 2)
                    for (; ; ) {
                        if (f in d) {
                            l = d[f],
                            f += h;
                            break
                        }
                        if (f += h,
                        e ? f < 0 : c <= f)
                            throw TypeError("Reduce of empty array with no initial value")
                    }
                for (; e ? f >= 0 : c > f; f += h)
                    f in d && (l = a(l, d[f], f, u));
                return l
            }
        };
        e.exports = {
            left: s(!1),
            right: s(!0)
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = f(a(1))
          , n = f(a(0))
          , i = f(a(270))
          , o = f(a(161))
          , s = f(a(286))
          , l = f(a(287))
          , u = f(a(2))
          , d = f(a(4))
          , c = a(56);
        function f(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function h() {
            var e = this.context
              , t = void 0
              , a = void 0
              , n = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0
              , T = void 0
              , S = void 0
              , A = void 0
              , C = void 0
              , I = void 0
              , P = void 0
              , w = void 0;
            function M(e) {
                void 0 === w && null !== e.fromStreamInfo && (w = this.getCurrentTrackIdx())
            }
            function R() {
                void 0 === w && (w = this.getCurrentTrackIdx())
            }
            function x() {
                void 0 !== w && (this.setTextTrack(w),
                w = void 0)
            }
            function D(e) {
                var t = this
                  , a = e.tracks
                  , r = e.index;
                E && a.some((function(e, a) {
                    if (p.matchSettings(E, e))
                        return t.setTextTrack(a),
                        r = a,
                        !0
                }
                )),
                (!1 === S || void 0 === S && !E || P) && this.setTextTrack(-1),
                T = r,
                b.trigger(d.default.TEXT_TRACKS_ADDED, {
                    enabled: N(),
                    index: r,
                    tracks: a
                }),
                I = !0
            }
            function O(e) {
                if (!k && e && e.newMediaInfo) {
                    var t = e.newMediaInfo;
                    t.type === r.default.FRAGMENTED_TEXT && (E = {
                        lang: t.lang,
                        role: t.roles[0],
                        accessibility: t.accessibility[0]
                    })
                }
            }
            function N() {
                var e = !0;
                return A && !C && (e = !1),
                e
            }
            function L() {
                A = !0,
                I = !1,
                P = !1
            }
            return t = {
                setConfig: function(e) {
                    e && (e.errHandler && (n = e.errHandler),
                    e.adapter && (f = e.adapter),
                    e.manifestModel && (h = e.manifestModel),
                    e.mediaController && (p = e.mediaController),
                    e.videoModel && (g = e.videoModel),
                    e.streamController && (m = e.streamController),
                    e.textTracks && (y = e.textTracks),
                    e.vttParser && (_ = e.vttParser),
                    e.ttmlParser && (v = e.ttmlParser),
                    a.setConfig({
                        errHandler: n,
                        adapter: f,
                        manifestModel: h,
                        mediaController: p,
                        videoModel: g,
                        streamController: m,
                        textTracks: y,
                        vttParser: _,
                        ttmlParser: v
                    }))
                },
                getTextSourceBuffer: function() {
                    return a
                },
                getAllTracksAreDisabled: function() {
                    return A
                },
                addEmbeddedTrack: function(e) {
                    a.addEmbeddedTrack(e)
                },
                getTextDefaultLanguage: function() {
                    return E && E.lang || ""
                },
                setTextDefaultLanguage: function(e) {
                    (0,
                    c.checkParameterType)(e, "string"),
                    E || (E = {}),
                    E.lang = e,
                    k = !0
                },
                setTextDefaultEnabled: function(e) {
                    (0,
                    c.checkParameterType)(e, "boolean"),
                    (S = e) ? A = !1 : this.setTextTrack(-1)
                },
                getTextDefaultEnabled: function() {
                    return void 0 !== S && S
                },
                setInitialSettings: function(e) {
                    E = e,
                    k = !0
                },
                enableText: function(e) {
                    (0,
                    c.checkParameterType)(e, "boolean"),
                    !S && e && (S = !0),
                    N() !== e && (e && this.setTextTrack(T),
                    e || (T = this.getCurrentTrackIdx(),
                    I ? this.setTextTrack(-1) : P = !0))
                },
                isTextEnabled: N,
                setTextTrack: function(e) {
                    var t = a.getConfig()
                      , n = t.fragmentModel
                      , i = t.fragmentedTracks
                      , o = t.videoModel
                      , s = void 0
                      , l = void 0;
                    A = -1 === e;
                    var u = y.getCurrentTrackIdx();
                    if (u !== e) {
                        A && p && p.saveTextSettingsDisabled(),
                        y.setModeForTrackIdx(u, r.default.TEXT_HIDDEN),
                        y.setCurrentTrackIdx(e),
                        y.setModeForTrackIdx(e, r.default.TEXT_SHOWING);
                        var d = y.getCurrentTrackInfo();
                        if (d && d.isFragmented && !d.isEmbedded)
                            for (var c = 0; c < i.length; c++) {
                                var f = i[c];
                                if (d.lang === f.lang && d.index === f.index && (f.id ? d.id === f.id : d.id === f.index))
                                    if (f !== p.getCurrentTrackFor(r.default.FRAGMENTED_TEXT, m.getActiveStreamInfo()))
                                        n.abortRequests(),
                                        n.removeExecutedRequestsBeforeTime(),
                                        a.remove(),
                                        y.deleteCuesFromTrackIdx(u),
                                        p.setTrack(f),
                                        a.setCurrentFragmentedTrackIdx(c);
                                    else if (-1 === u) {
                                        for (var h = m.getActiveStreamProcessors(), g = 0; g < h.length; g++)
                                            if (h[g].getType() === r.default.FRAGMENTED_TEXT) {
                                                l = h[g];
                                                break
                                            }
                                        l.setBufferingTime(o.getTime()),
                                        l.getScheduleController().start()
                                    }
                            }
                        else if (d && !d.isFragmented) {
                            for (var _ = m.getActiveStreamProcessors(), v = 0; v < _.length; v++)
                                if (_[v].getType() === r.default.TEXT) {
                                    s = (l = _[v]).getMediaInfoArr();
                                    break
                                }
                            if (l && s)
                                for (var b = 0; b < s.length; b++)
                                    if (s[b].index === d.index && s[b].lang === d.lang) {
                                        l.selectMediaInfo(s[b]);
                                        break
                                    }
                        }
                    }
                },
                getCurrentTrackIdx: function() {
                    return y.getCurrentTrackIdx()
                },
                enableForcedTextStreaming: function(e) {
                    (0,
                    c.checkParameterType)(e, "boolean"),
                    C = e
                },
                reset: function() {
                    L(),
                    a.resetEmbedded(),
                    a.reset()
                }
            },
            E = null,
            T = -1,
            C = !1,
            I = !1,
            k = !1,
            P = !1,
            y = (0,
            o.default)(e).getInstance(),
            _ = (0,
            s.default)(e).getInstance(),
            v = (0,
            l.default)(e).getInstance(),
            a = (0,
            i.default)(e).getInstance(),
            b = (0,
            u.default)(e).getInstance(),
            y.initialize(),
            b.on(d.default.TEXT_TRACKS_QUEUE_INITIALIZED, D, t),
            b.on(d.default.CURRENT_TRACK_CHANGED, O, t),
            b.on(d.default.PERIOD_SWITCH_STARTED, M, t),
            b.on(d.default.STREAM_COMPLETED, R, t),
            b.on(d.default.PERIOD_SWITCH_COMPLETED, x, t),
            L(),
            t
        }
        h.__dashjs_factory_name = "TextController",
        t.default = n.default.getSingletonFactory(h)
    }
    , function(e, t, a) {
        /*! codem-isoboxer v0.3.6 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
        var r = {
            parseBuffer: function(e) {
                return new n(e).parse()
            },
            addBoxProcessor: function(e, t) {
                "string" == typeof e && "function" == typeof t && (i.prototype._boxProcessors[e] = t)
            },
            createFile: function() {
                return new n
            },
            createBox: function(e, t, a) {
                var r = i.create(e);
                return t && t.append(r, a),
                r
            },
            createFullBox: function(e, t, a) {
                var n = r.createBox(e, t, a);
                return n.version = 0,
                n.flags = 0,
                n
            },
            Utils: {}
        };
        r.Utils.dataViewToString = function(e, t) {
            var a = t || "utf-8";
            if ("undefined" != typeof TextDecoder)
                return new TextDecoder(a).decode(e);
            var r = []
              , n = 0;
            if ("utf-8" === a)
                for (; n < e.byteLength; ) {
                    var i = e.getUint8(n++);
                    i < 128 || (i < 224 ? (i = (31 & i) << 6,
                    i |= 63 & e.getUint8(n++)) : i < 240 ? (i = (15 & i) << 12,
                    i |= (63 & e.getUint8(n++)) << 6,
                    i |= 63 & e.getUint8(n++)) : (i = (7 & i) << 18,
                    i |= (63 & e.getUint8(n++)) << 12,
                    i |= (63 & e.getUint8(n++)) << 6,
                    i |= 63 & e.getUint8(n++))),
                    r.push(String.fromCharCode(i))
                }
            else
                for (; n < e.byteLength; )
                    r.push(String.fromCharCode(e.getUint8(n++)));
            return r.join("")
        }
        ,
        r.Utils.utf8ToByteArray = function(e) {
            var t, a;
            if ("undefined" != typeof TextEncoder)
                t = (new TextEncoder).encode(e);
            else
                for (t = [],
                a = 0; a < e.length; ++a) {
                    var r = e.charCodeAt(a);
                    r < 128 ? t.push(r) : r < 2048 ? (t.push(192 | r >> 6),
                    t.push(128 | 63 & r)) : r < 65536 ? (t.push(224 | r >> 12),
                    t.push(128 | 63 & r >> 6),
                    t.push(128 | 63 & r)) : (t.push(240 | r >> 18),
                    t.push(128 | 63 & r >> 12),
                    t.push(128 | 63 & r >> 6),
                    t.push(128 | 63 & r))
                }
            return t
        }
        ,
        r.Utils.appendBox = function(e, t, a) {
            if (t._offset = e._cursor.offset,
            t._root = e._root ? e._root : e,
            t._raw = e._raw,
            t._parent = e,
            -1 !== a)
                if (null != a) {
                    var r, n = -1;
                    if ("number" == typeof a)
                        n = a;
                    else {
                        if ("string" == typeof a)
                            r = a;
                        else {
                            if ("object" != typeof a || !a.type)
                                return void e.boxes.push(t);
                            r = a.type
                        }
                        for (var i = 0; i < e.boxes.length; i++)
                            if (r === e.boxes[i].type) {
                                n = i + 1;
                                break
                            }
                    }
                    e.boxes.splice(n, 0, t)
                } else
                    e.boxes.push(t)
        }
        ,
        t.parseBuffer = r.parseBuffer,
        t.addBoxProcessor = r.addBoxProcessor,
        t.createFile = r.createFile,
        t.createBox = r.createBox,
        t.createFullBox = r.createFullBox,
        t.Utils = r.Utils,
        r.Cursor = function(e) {
            this.offset = void 0 === e ? 0 : e
        }
        ;
        var n = function(e) {
            this._cursor = new r.Cursor,
            this.boxes = [],
            e && (this._raw = new DataView(e))
        };
        n.prototype.fetch = function(e) {
            var t = this.fetchAll(e, !0);
            return t.length ? t[0] : null
        }
        ,
        n.prototype.fetchAll = function(e, t) {
            var a = [];
            return n._sweep.call(this, e, a, t),
            a
        }
        ,
        n.prototype.parse = function() {
            for (this._cursor.offset = 0,
            this.boxes = []; this._cursor.offset < this._raw.byteLength; ) {
                var e = i.parse(this);
                if (void 0 === e.type)
                    break;
                this.boxes.push(e)
            }
            return this
        }
        ,
        n._sweep = function(e, t, a) {
            for (var r in this.type && this.type == e && t.push(this),
            this.boxes) {
                if (t.length && a)
                    return;
                n._sweep.call(this.boxes[r], e, t, a)
            }
        }
        ,
        n.prototype.write = function() {
            var e, t = 0;
            for (e = 0; e < this.boxes.length; e++)
                t += this.boxes[e].getLength(!1);
            var a = new Uint8Array(t);
            for (this._rawo = new DataView(a.buffer),
            this.bytes = a,
            this._cursor.offset = 0,
            e = 0; e < this.boxes.length; e++)
                this.boxes[e].write();
            return a.buffer
        }
        ,
        n.prototype.append = function(e, t) {
            r.Utils.appendBox(this, e, t)
        }
        ;
        var i = function() {
            this._cursor = new r.Cursor
        };
        i.parse = function(e) {
            var t = new i;
            return t._offset = e._cursor.offset,
            t._root = e._root ? e._root : e,
            t._raw = e._raw,
            t._parent = e,
            t._parseBox(),
            e._cursor.offset = t._raw.byteOffset + t._raw.byteLength,
            t
        }
        ,
        i.create = function(e) {
            var t = new i;
            return t.type = e,
            t.boxes = [],
            t
        }
        ,
        i.prototype._boxContainers = ["dinf", "edts", "mdia", "meco", "mfra", "minf", "moof", "moov", "mvex", "stbl", "strk", "traf", "trak", "tref", "udta", "vttc", "sinf", "schi", "encv", "enca"],
        i.prototype._boxProcessors = {},
        i.prototype._procField = function(e, t, a) {
            this._parsing ? this[e] = this._readField(t, a) : this._writeField(t, a, this[e])
        }
        ,
        i.prototype._procFieldArray = function(e, t, a, r) {
            var n;
            if (this._parsing)
                for (this[e] = [],
                n = 0; n < t; n++)
                    this[e][n] = this._readField(a, r);
            else
                for (n = 0; n < this[e].length; n++)
                    this._writeField(a, r, this[e][n])
        }
        ,
        i.prototype._procFullBox = function() {
            this._procField("version", "uint", 8),
            this._procField("flags", "uint", 24)
        }
        ,
        i.prototype._procEntries = function(e, t, a) {
            var r;
            if (this._parsing)
                for (this[e] = [],
                r = 0; r < t; r++)
                    this[e].push({}),
                    a.call(this, this[e][r]);
            else
                for (r = 0; r < t; r++)
                    a.call(this, this[e][r])
        }
        ,
        i.prototype._procSubEntries = function(e, t, a, r) {
            var n;
            if (this._parsing)
                for (e[t] = [],
                n = 0; n < a; n++)
                    e[t].push({}),
                    r.call(this, e[t][n]);
            else
                for (n = 0; n < a; n++)
                    r.call(this, e[t][n])
        }
        ,
        i.prototype._procEntryField = function(e, t, a, r) {
            this._parsing ? e[t] = this._readField(a, r) : this._writeField(a, r, e[t])
        }
        ,
        i.prototype._procSubBoxes = function(e, t) {
            var a;
            if (this._parsing)
                for (this[e] = [],
                a = 0; a < t; a++)
                    this[e].push(i.parse(this));
            else
                for (a = 0; a < t; a++)
                    this._rawo ? this[e][a].write() : this.size += this[e][a].getLength()
        }
        ,
        i.prototype._readField = function(e, t) {
            switch (e) {
            case "uint":
                return this._readUint(t);
            case "int":
                return this._readInt(t);
            case "template":
                return this._readTemplate(t);
            case "string":
                return -1 === t ? this._readTerminatedString() : this._readString(t);
            case "data":
                return this._readData(t);
            case "utf8":
                return this._readUTF8String();
            default:
                return -1
            }
        }
        ,
        i.prototype._readInt = function(e) {
            var t = null
              , a = this._cursor.offset - this._raw.byteOffset;
            switch (e) {
            case 8:
                t = this._raw.getInt8(a);
                break;
            case 16:
                t = this._raw.getInt16(a);
                break;
            case 32:
                t = this._raw.getInt32(a);
                break;
            case 64:
                var r = this._raw.getInt32(a)
                  , n = this._raw.getInt32(a + 4);
                t = r * Math.pow(2, 32) + n
            }
            return this._cursor.offset += e >> 3,
            t
        }
        ,
        i.prototype._readUint = function(e) {
            var t, a, r = null, n = this._cursor.offset - this._raw.byteOffset;
            switch (e) {
            case 8:
                r = this._raw.getUint8(n);
                break;
            case 16:
                r = this._raw.getUint16(n);
                break;
            case 24:
                r = ((t = this._raw.getUint16(n)) << 8) + (a = this._raw.getUint8(n + 2));
                break;
            case 32:
                r = this._raw.getUint32(n);
                break;
            case 64:
                t = this._raw.getUint32(n),
                a = this._raw.getUint32(n + 4),
                r = t * Math.pow(2, 32) + a
            }
            return this._cursor.offset += e >> 3,
            r
        }
        ,
        i.prototype._readString = function(e) {
            for (var t = "", a = 0; a < e; a++) {
                var r = this._readUint(8);
                t += String.fromCharCode(r)
            }
            return t
        }
        ,
        i.prototype._readTemplate = function(e) {
            return this._readUint(e / 2) + this._readUint(e / 2) / Math.pow(2, e / 2)
        }
        ,
        i.prototype._readTerminatedString = function() {
            for (var e = ""; this._cursor.offset - this._offset < this._raw.byteLength; ) {
                var t = this._readUint(8);
                if (0 === t)
                    break;
                e += String.fromCharCode(t)
            }
            return e
        }
        ,
        i.prototype._readData = function(e) {
            var t = e > 0 ? e : this._raw.byteLength - (this._cursor.offset - this._offset);
            if (t > 0) {
                var a = new Uint8Array(this._raw.buffer,this._cursor.offset,t);
                return this._cursor.offset += t,
                a
            }
            return null
        }
        ,
        i.prototype._readUTF8String = function() {
            var e = this._raw.byteLength - (this._cursor.offset - this._offset)
              , t = null;
            return e > 0 && (t = new DataView(this._raw.buffer,this._cursor.offset,e),
            this._cursor.offset += e),
            t ? r.Utils.dataViewToString(t) : t
        }
        ,
        i.prototype._parseBox = function() {
            if (this._parsing = !0,
            this._cursor.offset = this._offset,
            this._offset + 8 > this._raw.buffer.byteLength)
                this._root._incomplete = !0;
            else {
                switch (this._procField("size", "uint", 32),
                this._procField("type", "string", 4),
                1 === this.size && this._procField("largesize", "uint", 64),
                "uuid" === this.type && this._procFieldArray("usertype", 16, "uint", 8),
                this.size) {
                case 0:
                    this._raw = new DataView(this._raw.buffer,this._offset,this._raw.byteLength - this._cursor.offset + 8);
                    break;
                case 1:
                    this._offset + this.size > this._raw.buffer.byteLength ? (this._incomplete = !0,
                    this._root._incomplete = !0) : this._raw = new DataView(this._raw.buffer,this._offset,this.largesize);
                    break;
                default:
                    this._offset + this.size > this._raw.buffer.byteLength ? (this._incomplete = !0,
                    this._root._incomplete = !0) : this._raw = new DataView(this._raw.buffer,this._offset,this.size)
                }
                this._incomplete || (this._boxProcessors[this.type] && this._boxProcessors[this.type].call(this),
                -1 !== this._boxContainers.indexOf(this.type) ? this._parseContainerBox() : this._data = this._readData())
            }
        }
        ,
        i.prototype._parseFullBox = function() {
            this.version = this._readUint(8),
            this.flags = this._readUint(24)
        }
        ,
        i.prototype._parseContainerBox = function() {
            for (this.boxes = []; this._cursor.offset - this._raw.byteOffset < this._raw.byteLength; )
                this.boxes.push(i.parse(this))
        }
        ,
        i.prototype.append = function(e, t) {
            r.Utils.appendBox(this, e, t)
        }
        ,
        i.prototype.getLength = function() {
            if (this._parsing = !1,
            this._rawo = null,
            this.size = 0,
            this._procField("size", "uint", 32),
            this._procField("type", "string", 4),
            1 === this.size && this._procField("largesize", "uint", 64),
            "uuid" === this.type && this._procFieldArray("usertype", 16, "uint", 8),
            this._boxProcessors[this.type] && this._boxProcessors[this.type].call(this),
            -1 !== this._boxContainers.indexOf(this.type))
                for (var e = 0; e < this.boxes.length; e++)
                    this.size += this.boxes[e].getLength();
            return this._data && this._writeData(this._data),
            this.size
        }
        ,
        i.prototype.write = function() {
            switch (this._parsing = !1,
            this._cursor.offset = this._parent._cursor.offset,
            this.size) {
            case 0:
                this._rawo = new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength - this._cursor.offset);
                break;
            case 1:
                this._rawo = new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);
                break;
            default:
                this._rawo = new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)
            }
            if (this._procField("size", "uint", 32),
            this._procField("type", "string", 4),
            1 === this.size && this._procField("largesize", "uint", 64),
            "uuid" === this.type && this._procFieldArray("usertype", 16, "uint", 8),
            this._boxProcessors[this.type] && this._boxProcessors[this.type].call(this),
            -1 !== this._boxContainers.indexOf(this.type))
                for (var e = 0; e < this.boxes.length; e++)
                    this.boxes[e].write();
            return this._data && this._writeData(this._data),
            this._parent._cursor.offset += this.size,
            this.size
        }
        ,
        i.prototype._writeInt = function(e, t) {
            if (this._rawo) {
                var a = this._cursor.offset - this._rawo.byteOffset;
                switch (e) {
                case 8:
                    this._rawo.setInt8(a, t);
                    break;
                case 16:
                    this._rawo.setInt16(a, t);
                    break;
                case 32:
                    this._rawo.setInt32(a, t);
                    break;
                case 64:
                    var r = Math.floor(t / Math.pow(2, 32))
                      , n = t - r * Math.pow(2, 32);
                    this._rawo.setUint32(a, r),
                    this._rawo.setUint32(a + 4, n)
                }
                this._cursor.offset += e >> 3
            } else
                this.size += e >> 3
        }
        ,
        i.prototype._writeUint = function(e, t) {
            if (this._rawo) {
                var a, r, n = this._cursor.offset - this._rawo.byteOffset;
                switch (e) {
                case 8:
                    this._rawo.setUint8(n, t);
                    break;
                case 16:
                    this._rawo.setUint16(n, t);
                    break;
                case 24:
                    a = (16776960 & t) >> 8,
                    r = 255 & t,
                    this._rawo.setUint16(n, a),
                    this._rawo.setUint8(n + 2, r);
                    break;
                case 32:
                    this._rawo.setUint32(n, t);
                    break;
                case 64:
                    r = t - (a = Math.floor(t / Math.pow(2, 32))) * Math.pow(2, 32),
                    this._rawo.setUint32(n, a),
                    this._rawo.setUint32(n + 4, r)
                }
                this._cursor.offset += e >> 3
            } else
                this.size += e >> 3
        }
        ,
        i.prototype._writeString = function(e, t) {
            for (var a = 0; a < e; a++)
                this._writeUint(8, t.charCodeAt(a))
        }
        ,
        i.prototype._writeTerminatedString = function(e) {
            if (0 !== e.length) {
                for (var t = 0; t < e.length; t++)
                    this._writeUint(8, e.charCodeAt(t));
                this._writeUint(8, 0)
            }
        }
        ,
        i.prototype._writeTemplate = function(e, t) {
            var a = Math.floor(t)
              , r = (t - a) * Math.pow(2, e / 2);
            this._writeUint(e / 2, a),
            this._writeUint(e / 2, r)
        }
        ,
        i.prototype._writeData = function(e) {
            if (e)
                if (this._rawo) {
                    if (e instanceof Array) {
                        for (var t = this._cursor.offset - this._rawo.byteOffset, a = 0; a < e.length; a++)
                            this._rawo.setInt8(t + a, e[a]);
                        this._cursor.offset += e.length
                    }
                    e instanceof Uint8Array && (this._root.bytes.set(e, this._cursor.offset),
                    this._cursor.offset += e.length)
                } else
                    this.size += e.length
        }
        ,
        i.prototype._writeUTF8String = function(e) {
            var t = r.Utils.utf8ToByteArray(e);
            if (this._rawo)
                for (var a = new DataView(this._rawo.buffer,this._cursor.offset,t.length), n = 0; n < t.length; n++)
                    a.setUint8(n, t[n]);
            else
                this.size += t.length
        }
        ,
        i.prototype._writeField = function(e, t, a) {
            switch (e) {
            case "uint":
                this._writeUint(t, a);
                break;
            case "int":
                this._writeInt(t, a);
                break;
            case "template":
                this._writeTemplate(t, a);
                break;
            case "string":
                -1 == t ? this._writeTerminatedString(a) : this._writeString(t, a);
                break;
            case "data":
                this._writeData(a);
                break;
            case "utf8":
                this._writeUTF8String(a)
            }
        }
        ,
        i.prototype._boxProcessors.avc1 = i.prototype._boxProcessors.encv = function() {
            this._procFieldArray("reserved1", 6, "uint", 8),
            this._procField("data_reference_index", "uint", 16),
            this._procField("pre_defined1", "uint", 16),
            this._procField("reserved2", "uint", 16),
            this._procFieldArray("pre_defined2", 3, "uint", 32),
            this._procField("width", "uint", 16),
            this._procField("height", "uint", 16),
            this._procField("horizresolution", "template", 32),
            this._procField("vertresolution", "template", 32),
            this._procField("reserved3", "uint", 32),
            this._procField("frame_count", "uint", 16),
            this._procFieldArray("compressorname", 32, "uint", 8),
            this._procField("depth", "uint", 16),
            this._procField("pre_defined3", "int", 16),
            this._procField("config", "data", -1)
        }
        ,
        i.prototype._boxProcessors.dref = function() {
            this._procFullBox(),
            this._procField("entry_count", "uint", 32),
            this._procSubBoxes("entries", this.entry_count)
        }
        ,
        i.prototype._boxProcessors.elst = function() {
            this._procFullBox(),
            this._procField("entry_count", "uint", 32),
            this._procEntries("entries", this.entry_count, (function(e) {
                this._procEntryField(e, "segment_duration", "uint", 1 === this.version ? 64 : 32),
                this._procEntryField(e, "media_time", "int", 1 === this.version ? 64 : 32),
                this._procEntryField(e, "media_rate_integer", "int", 16),
                this._procEntryField(e, "media_rate_fraction", "int", 16)
            }
            ))
        }
        ,
        i.prototype._boxProcessors.emsg = function() {
            this._procFullBox(),
            1 == this.version ? (this._procField("timescale", "uint", 32),
            this._procField("presentation_time", "uint", 64),
            this._procField("event_duration", "uint", 32),
            this._procField("id", "uint", 32),
            this._procField("scheme_id_uri", "string", -1),
            this._procField("value", "string", -1)) : (this._procField("scheme_id_uri", "string", -1),
            this._procField("value", "string", -1),
            this._procField("timescale", "uint", 32),
            this._procField("presentation_time_delta", "uint", 32),
            this._procField("event_duration", "uint", 32),
            this._procField("id", "uint", 32)),
            this._procField("message_data", "data", -1)
        }
        ,
        i.prototype._boxProcessors.free = i.prototype._boxProcessors.skip = function() {
            this._procField("data", "data", -1)
        }
        ,
        i.prototype._boxProcessors.frma = function() {
            this._procField("data_format", "uint", 32)
        }
        ,
        i.prototype._boxProcessors.ftyp = i.prototype._boxProcessors.styp = function() {
            this._procField("major_brand", "string", 4),
            this._procField("minor_version", "uint", 32);
            var e = -1;
            this._parsing && (e = (this._raw.byteLength - (this._cursor.offset - this._raw.byteOffset)) / 4),
            this._procFieldArray("compatible_brands", e, "string", 4)
        }
        ,
        i.prototype._boxProcessors.hdlr = function() {
            this._procFullBox(),
            this._procField("pre_defined", "uint", 32),
            this._procField("handler_type", "string", 4),
            this._procFieldArray("reserved", 3, "uint", 32),
            this._procField("name", "string", -1)
        }
        ,
        i.prototype._boxProcessors.mdat = function() {
            this._procField("data", "data", -1)
        }
        ,
        i.prototype._boxProcessors.mdhd = function() {
            this._procFullBox(),
            this._procField("creation_time", "uint", 1 == this.version ? 64 : 32),
            this._procField("modification_time", "uint", 1 == this.version ? 64 : 32),
            this._procField("timescale", "uint", 32),
            this._procField("duration", "uint", 1 == this.version ? 64 : 32),
            this._parsing || "string" != typeof this.language || (this.language = this.language.charCodeAt(0) - 96 << 10 | this.language.charCodeAt(1) - 96 << 5 | this.language.charCodeAt(2) - 96),
            this._procField("language", "uint", 16),
            this._parsing && (this.language = String.fromCharCode(96 + (this.language >> 10 & 31), 96 + (this.language >> 5 & 31), 96 + (31 & this.language))),
            this._procField("pre_defined", "uint", 16)
        }
        ,
        i.prototype._boxProcessors.mehd = function() {
            this._procFullBox(),
            this._procField("fragment_duration", "uint", 1 == this.version ? 64 : 32)
        }
        ,
        i.prototype._boxProcessors.mfhd = function() {
            this._procFullBox(),
            this._procField("sequence_number", "uint", 32)
        }
        ,
        i.prototype._boxProcessors.mfro = function() {
            this._procFullBox(),
            this._procField("mfra_size", "uint", 32)
        }
        ,
        i.prototype._boxProcessors.mp4a = i.prototype._boxProcessors.enca = function() {
            this._procFieldArray("reserved1", 6, "uint", 8),
            this._procField("data_reference_index", "uint", 16),
            this._procFieldArray("reserved2", 2, "uint", 32),
            this._procField("channelcount", "uint", 16),
            this._procField("samplesize", "uint", 16),
            this._procField("pre_defined", "uint", 16),
            this._procField("reserved3", "uint", 16),
            this._procField("samplerate", "template", 32),
            this._procField("esds", "data", -1)
        }
        ,
        i.prototype._boxProcessors.mvhd = function() {
            this._procFullBox(),
            this._procField("creation_time", "uint", 1 == this.version ? 64 : 32),
            this._procField("modification_time", "uint", 1 == this.version ? 64 : 32),
            this._procField("timescale", "uint", 32),
            this._procField("duration", "uint", 1 == this.version ? 64 : 32),
            this._procField("rate", "template", 32),
            this._procField("volume", "template", 16),
            this._procField("reserved1", "uint", 16),
            this._procFieldArray("reserved2", 2, "uint", 32),
            this._procFieldArray("matrix", 9, "template", 32),
            this._procFieldArray("pre_defined", 6, "uint", 32),
            this._procField("next_track_ID", "uint", 32)
        }
        ,
        i.prototype._boxProcessors.payl = function() {
            this._procField("cue_text", "utf8")
        }
        ,
        i.prototype._boxProcessors.pssh = function() {
            this._procFullBox(),
            this._procFieldArray("SystemID", 16, "uint", 8),
            this._procField("DataSize", "uint", 32),
            this._procFieldArray("Data", this.DataSize, "uint", 8)
        }
        ,
        i.prototype._boxProcessors.schm = function() {
            this._procFullBox(),
            this._procField("scheme_type", "uint", 32),
            this._procField("scheme_version", "uint", 32),
            1 & this.flags && this._procField("scheme_uri", "string", -1)
        }
        ,
        i.prototype._boxProcessors.sdtp = function() {
            this._procFullBox();
            var e = -1;
            this._parsing && (e = this._raw.byteLength - (this._cursor.offset - this._raw.byteOffset)),
            this._procFieldArray("sample_dependency_table", e, "uint", 8)
        }
        ,
        i.prototype._boxProcessors.sidx = function() {
            this._procFullBox(),
            this._procField("reference_ID", "uint", 32),
            this._procField("timescale", "uint", 32),
            this._procField("earliest_presentation_time", "uint", 1 == this.version ? 64 : 32),
            this._procField("first_offset", "uint", 1 == this.version ? 64 : 32),
            this._procField("reserved", "uint", 16),
            this._procField("reference_count", "uint", 16),
            this._procEntries("references", this.reference_count, (function(e) {
                this._parsing || (e.reference = (1 & e.reference_type) << 31,
                e.reference |= 2147483647 & e.referenced_size,
                e.sap = (1 & e.starts_with_SAP) << 31,
                e.sap |= (3 & e.SAP_type) << 28,
                e.sap |= 268435455 & e.SAP_delta_time),
                this._procEntryField(e, "reference", "uint", 32),
                this._procEntryField(e, "subsegment_duration", "uint", 32),
                this._procEntryField(e, "sap", "uint", 32),
                this._parsing && (e.reference_type = e.reference >> 31 & 1,
                e.referenced_size = 2147483647 & e.reference,
                e.starts_with_SAP = e.sap >> 31 & 1,
                e.SAP_type = e.sap >> 28 & 7,
                e.SAP_delta_time = 268435455 & e.sap)
            }
            ))
        }
        ,
        i.prototype._boxProcessors.smhd = function() {
            this._procFullBox(),
            this._procField("balance", "uint", 16),
            this._procField("reserved", "uint", 16)
        }
        ,
        i.prototype._boxProcessors.ssix = function() {
            this._procFullBox(),
            this._procField("subsegment_count", "uint", 32),
            this._procEntries("subsegments", this.subsegment_count, (function(e) {
                this._procEntryField(e, "ranges_count", "uint", 32),
                this._procSubEntries(e, "ranges", e.ranges_count, (function(e) {
                    this._procEntryField(e, "level", "uint", 8),
                    this._procEntryField(e, "range_size", "uint", 24)
                }
                ))
            }
            ))
        }
        ,
        i.prototype._boxProcessors.stsd = function() {
            this._procFullBox(),
            this._procField("entry_count", "uint", 32),
            this._procSubBoxes("entries", this.entry_count)
        }
        ,
        i.prototype._boxProcessors.subs = function() {
            this._procFullBox(),
            this._procField("entry_count", "uint", 32),
            this._procEntries("entries", this.entry_count, (function(e) {
                this._procEntryField(e, "sample_delta", "uint", 32),
                this._procEntryField(e, "subsample_count", "uint", 16),
                this._procSubEntries(e, "subsamples", e.subsample_count, (function(e) {
                    this._procEntryField(e, "subsample_size", "uint", 1 === this.version ? 32 : 16),
                    this._procEntryField(e, "subsample_priority", "uint", 8),
                    this._procEntryField(e, "discardable", "uint", 8),
                    this._procEntryField(e, "codec_specific_parameters", "uint", 32)
                }
                ))
            }
            ))
        }
        ,
        i.prototype._boxProcessors.tenc = function() {
            this._procFullBox(),
            this._procField("default_IsEncrypted", "uint", 24),
            this._procField("default_IV_size", "uint", 8),
            this._procFieldArray("default_KID", 16, "uint", 8)
        }
        ,
        i.prototype._boxProcessors.tfdt = function() {
            this._procFullBox(),
            this._procField("baseMediaDecodeTime", "uint", 1 == this.version ? 64 : 32)
        }
        ,
        i.prototype._boxProcessors.tfhd = function() {
            this._procFullBox(),
            this._procField("track_ID", "uint", 32),
            1 & this.flags && this._procField("base_data_offset", "uint", 64),
            2 & this.flags && this._procField("sample_description_offset", "uint", 32),
            8 & this.flags && this._procField("default_sample_duration", "uint", 32),
            16 & this.flags && this._procField("default_sample_size", "uint", 32),
            32 & this.flags && this._procField("default_sample_flags", "uint", 32)
        }
        ,
        i.prototype._boxProcessors.tfra = function() {
            this._procFullBox(),
            this._procField("track_ID", "uint", 32),
            this._parsing || (this.reserved = 0,
            this.reserved |= (48 & this.length_size_of_traf_num) << 4,
            this.reserved |= (12 & this.length_size_of_trun_num) << 2,
            this.reserved |= 3 & this.length_size_of_sample_num),
            this._procField("reserved", "uint", 32),
            this._parsing && (this.length_size_of_traf_num = (48 & this.reserved) >> 4,
            this.length_size_of_trun_num = (12 & this.reserved) >> 2,
            this.length_size_of_sample_num = 3 & this.reserved),
            this._procField("number_of_entry", "uint", 32),
            this._procEntries("entries", this.number_of_entry, (function(e) {
                this._procEntryField(e, "time", "uint", 1 === this.version ? 64 : 32),
                this._procEntryField(e, "moof_offset", "uint", 1 === this.version ? 64 : 32),
                this._procEntryField(e, "traf_number", "uint", 8 * (this.length_size_of_traf_num + 1)),
                this._procEntryField(e, "trun_number", "uint", 8 * (this.length_size_of_trun_num + 1)),
                this._procEntryField(e, "sample_number", "uint", 8 * (this.length_size_of_sample_num + 1))
            }
            ))
        }
        ,
        i.prototype._boxProcessors.tkhd = function() {
            this._procFullBox(),
            this._procField("creation_time", "uint", 1 == this.version ? 64 : 32),
            this._procField("modification_time", "uint", 1 == this.version ? 64 : 32),
            this._procField("track_ID", "uint", 32),
            this._procField("reserved1", "uint", 32),
            this._procField("duration", "uint", 1 == this.version ? 64 : 32),
            this._procFieldArray("reserved2", 2, "uint", 32),
            this._procField("layer", "uint", 16),
            this._procField("alternate_group", "uint", 16),
            this._procField("volume", "template", 16),
            this._procField("reserved3", "uint", 16),
            this._procFieldArray("matrix", 9, "template", 32),
            this._procField("width", "template", 32),
            this._procField("height", "template", 32)
        }
        ,
        i.prototype._boxProcessors.trex = function() {
            this._procFullBox(),
            this._procField("track_ID", "uint", 32),
            this._procField("default_sample_description_index", "uint", 32),
            this._procField("default_sample_duration", "uint", 32),
            this._procField("default_sample_size", "uint", 32),
            this._procField("default_sample_flags", "uint", 32)
        }
        ,
        i.prototype._boxProcessors.trun = function() {
            this._procFullBox(),
            this._procField("sample_count", "uint", 32),
            1 & this.flags && this._procField("data_offset", "int", 32),
            4 & this.flags && this._procField("first_sample_flags", "uint", 32),
            this._procEntries("samples", this.sample_count, (function(e) {
                256 & this.flags && this._procEntryField(e, "sample_duration", "uint", 32),
                512 & this.flags && this._procEntryField(e, "sample_size", "uint", 32),
                1024 & this.flags && this._procEntryField(e, "sample_flags", "uint", 32),
                2048 & this.flags && this._procEntryField(e, "sample_composition_time_offset", 1 === this.version ? "int" : "uint", 32)
            }
            ))
        }
        ,
        i.prototype._boxProcessors["url "] = i.prototype._boxProcessors["urn "] = function() {
            this._procFullBox(),
            "urn " === this.type && this._procField("name", "string", -1),
            this._procField("location", "string", -1)
        }
        ,
        i.prototype._boxProcessors.vlab = function() {
            this._procField("source_label", "utf8")
        }
        ,
        i.prototype._boxProcessors.vmhd = function() {
            this._procFullBox(),
            this._procField("graphicsmode", "uint", 16),
            this._procFieldArray("opcolor", 3, "uint", 16)
        }
        ,
        i.prototype._boxProcessors.vttC = function() {
            this._procField("config", "utf8")
        }
        ,
        i.prototype._boxProcessors.vtte = function() {}
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(1))
          , n = d(a(2))
          , i = d(a(4))
          , o = d(a(0))
          , s = d(a(3))
          , l = a(212)
          , u = a(56);
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c() {
            var e = this.context
              , t = (0,
            n.default)(e).getInstance()
              , a = void 0
              , o = void 0
              , d = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0
              , T = void 0
              , S = void 0;
            function A(e) {
                var t = f[e].kind
                  , a = void 0 !== f[e].id ? f[e].id : f[e].lang
                  , r = f[e].lang
                  , n = f[e].isTTML
                  , i = f[e].isEmbedded;
                return c.addTextTrack(t, a, r, n, i)
            }
            function C(e, t, a, r, n, i) {
                var o = 0
                  , s = 0;
                e / t > a / r ? o = (s = t) / r * a : s = (o = e) / a * r;
                var l, u, d = 0, c = 0;
                return o / s > n ? (c = s,
                d = s * n) : (d = o,
                c = o / n),
                l = (e - d) / 2,
                u = (t - c) / 2,
                i ? {
                    x: l + .1 * d,
                    y: u + .1 * c,
                    w: .8 * d,
                    h: .8 * c
                } : {
                    x: l,
                    y: u,
                    w: d,
                    h: c
                }
            }
            function I(e, a) {
                var r = c.getClientWidth()
                  , n = c.getClientHeight()
                  , o = c.getVideoWidth()
                  , s = c.getVideoHeight()
                  , l = c.getVideoRelativeOffsetTop()
                  , u = c.getVideoRelativeOffsetLeft();
                if (0 !== o && 0 !== s) {
                    var d = o / s
                      , f = !1;
                    e.isFromCEA608 && (d = 3.5 / 3,
                    f = !0);
                    var h = C.call(this, r, n, o, s, d, f)
                      , p = h.w
                      , b = h.h
                      , T = h.x
                      , A = h.y;
                    if (p != y || b != _ || T != g || A != m || a) {
                        if (g = T + u,
                        m = A + l,
                        y = p,
                        _ = b,
                        v) {
                            var I = v.style;
                            I && (I.left = g + "px",
                            I.top = m + "px",
                            I.width = y + "px",
                            I.height = _ + "px",
                            I.zIndex = E && document[E] || k ? S : null,
                            t.trigger(i.default.CAPTION_CONTAINER_RESIZE, {}))
                        }
                        var P = e.activeCues;
                        if (P)
                            for (var w = P.length, M = 0; M < w; ++M) {
                                var R = P[M];
                                R.scaleCue(R)
                            }
                    }
                }
            }
            function P(e) {
                var t = y
                  , a = _
                  , r = void 0
                  , n = void 0
                  , i = void 0
                  , o = void 0
                  , s = void 0;
                if (e.cellResolution) {
                    var l = [t / e.cellResolution[0], a / e.cellResolution[1]];
                    if (e.linePadding)
                        for (r in e.linePadding)
                            if (e.linePadding.hasOwnProperty(r)) {
                                n = (e.linePadding[r] * l[0]).toString();
                                for (var u = document.getElementsByClassName("spanPadding"), d = 0; d < u.length; d++)
                                    u[d].style.cssText = u[d].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi, "$1" + n),
                                    u[d].style.cssText = u[d].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi, "$1" + n)
                            }
                    if (e.fontSize) {
                        for (r in e.fontSize)
                            if (e.fontSize.hasOwnProperty(r)) {
                                "%" === e.fontSize[r][0] ? i = e.fontSize[r][1] / 100 : "c" === e.fontSize[r][0] && (i = e.fontSize[r][1]),
                                n = (i * l[1]).toString(),
                                s = "defaultFontSize" !== r ? document.getElementsByClassName(r) : document.getElementsByClassName("paragraph");
                                for (var c = 0; c < s.length; c++)
                                    s[c].style.cssText = s[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi, "$1" + n)
                            }
                        if (e.lineHeight)
                            for (r in e.lineHeight)
                                if (e.lineHeight.hasOwnProperty(r)) {
                                    "%" === e.lineHeight[r][0] ? o = e.lineHeight[r][1] / 100 : "c" === e.fontSize[r][0] && (o = e.lineHeight[r][1]),
                                    n = (o * l[1]).toString(),
                                    s = document.getElementsByClassName(r);
                                    for (var f = 0; f < s.length; f++)
                                        s[f].style.cssText = s[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi, "$1" + n)
                                }
                    }
                }
                if (e.isd) {
                    var h = document.getElementById(e.cueID);
                    h && v.removeChild(h),
                    w(e)
                }
            }
            function w(e) {
                if (v) {
                    var a = document.createElement("div");
                    v.appendChild(a),
                    T = (0,
                    l.renderHTML)(e.isd, a, (function(t) {
                        var a = /^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/
                          , r = /^#(.*)$/;
                        if (a.test(t)) {
                            var n = a.exec(t)
                              , i = parseInt(n[4], 10) - 1;
                            return "data:image/png;base64," + btoa(e.images[i])
                        }
                        if (r.test(t)) {
                            var o = r.exec(t)[1];
                            return "data:image/png;base64," + e.embeddedImages[o]
                        }
                        return null
                    }
                    ), v.clientHeight, v.clientWidth, !1, (function(e) {
                        o.info("renderCaption :", e)
                    }
                    ), T, !0),
                    a.id = e.cueID,
                    t.trigger(i.default.CAPTION_RENDERED, {
                        captionDiv: a,
                        currentTrackIdx: p
                    })
                }
            }
            function M(e) {
                return e >= 0 && f[e] ? c.getTextTrack(f[e].kind, f[e].id, f[e].lang, f[e].isTTML, f[e].isEmbedded) : null
            }
            function R(e) {
                if (e !== p) {
                    var t = M(p = e);
                    x.call(this, t),
                    b && (clearInterval(b),
                    b = null),
                    t && "html" === t.renderingType && (I.call(this, t, !0),
                    b = setInterval(I.bind(this, t), 500))
                }
            }
            function x(e) {
                U.call(this),
                e && "html" === e.renderingType ? N.call(this) : L.call(this)
            }
            function D(e, t, a) {
                return (isNaN(t) || e.startTime >= t) && (isNaN(a) || e.endTime <= a)
            }
            function O(e, t, a) {
                if (e.cues)
                    for (var r = e.cues, n = r.length - 1; n >= 0; n--)
                        D(r[n], t, a) && e.removeCue(r[n])
            }
            function N() {
                var e = document.getElementById("native-cue-style");
                if (!e) {
                    (e = document.createElement("style")).id = "native-cue-style",
                    document.head.appendChild(e);
                    var t = e.sheet
                      , a = c.getElement();
                    try {
                        a && (a.id ? t.insertRule("#" + a.id + "::cue {background: transparent}", 0) : 0 !== a.classList.length ? t.insertRule("." + a.className + "::cue {background: transparent}", 0) : t.insertRule("video::cue {background: transparent}", 0))
                    } catch (e) {
                        o.info("" + e.message)
                    }
                }
            }
            function L() {
                var e = document.getElementById("native-cue-style");
                e && document.head.removeChild(e)
            }
            function U() {
                if (v)
                    for (; v.firstChild; )
                        v.removeChild(v.firstChild)
            }
            return a = {
                initialize: function() {
                    "undefined" != typeof window && "undefined" != typeof navigator && (d = window.VTTCue || window.TextTrackCue,
                    f = [],
                    h = [],
                    p = -1,
                    g = 0,
                    m = 0,
                    y = 0,
                    _ = 0,
                    v = null,
                    b = null,
                    k = !1,
                    S = 2147483647,
                    T = null,
                    void 0 !== document.fullscreenElement ? E = "fullscreenElement" : void 0 !== document.webkitIsFullScreen ? E = "webkitIsFullScreen" : document.msFullscreenElement ? E = "msFullscreenElement" : document.mozFullScreen && (E = "mozFullScreen"))
                },
                setDisplayCConTop: function(e) {
                    (0,
                    u.checkParameterType)(e, "boolean"),
                    k = e,
                    v && !document[E] && (v.style.zIndex = e ? S : null)
                },
                addTextTrack: function(e, a) {
                    if (f.length !== a) {
                        if (f.push(e),
                        f.length === a) {
                            f.sort((function(e, t) {
                                return e.index - t.index
                            }
                            )),
                            v = c.getTTMLRenderingDiv();
                            for (var n = -1, s = 0; s < f.length; s++) {
                                var l = A.call(this, s);
                                h.push(l),
                                f[s].defaultTrack && (l.default = !0,
                                n = s);
                                var u = M(s);
                                u && (u.mode = r.default.TEXT_SHOWING,
                                v && (f[s].isTTML || f[s].isEmbedded) ? u.renderingType = "html" : u.renderingType = "default"),
                                this.addCaptions(s, 0, f[s].captionData),
                                t.trigger(i.default.TEXT_TRACK_ADDED)
                            }
                            if (R.call(this, n),
                            n >= 0) {
                                t.on(i.default.PLAYBACK_METADATA_LOADED, (function e() {
                                    var a = M(n);
                                    a && I.call(this, a, !0),
                                    t.off(i.default.PLAYBACK_METADATA_LOADED, e, this)
                                }
                                ), this);
                                for (var d = 0; d < f.length; d++) {
                                    var g = M(d);
                                    g && (g.mode = d === n ? r.default.TEXT_SHOWING : r.default.TEXT_HIDDEN)
                                }
                            }
                            t.trigger(i.default.TEXT_TRACKS_QUEUE_INITIALIZED, {
                                index: p,
                                tracks: f
                            })
                        }
                    } else
                        o.error("Trying to add too many tracks.")
                },
                addCaptions: function(e, a, n) {
                    var s = M(e)
                      , l = this;
                    if (s && Array.isArray(n) && 0 !== n.length)
                        for (var u = 0; u < n.length; u++) {
                            var c = void 0
                              , f = n[u];
                            s.cellResolution = f.cellResolution,
                            s.isFromCEA608 = f.isFromCEA608,
                            "html" === f.type && v ? ((c = new d(f.start - a,f.end - a,"")).cueHTMLElement = f.cueHTMLElement,
                            c.isd = f.isd,
                            c.images = f.images,
                            c.embeddedImages = f.embeddedImages,
                            c.cueID = f.cueID,
                            c.scaleCue = P.bind(l),
                            c.cellResolution = f.cellResolution,
                            c.lineHeight = f.lineHeight,
                            c.linePadding = f.linePadding,
                            c.fontSize = f.fontSize,
                            v.style.left = g + "px",
                            v.style.top = m + "px",
                            v.style.width = y + "px",
                            v.style.height = _ + "px",
                            c.onenter = function() {
                                s.mode === r.default.TEXT_SHOWING && (this.isd ? (w(this),
                                o.debug("Cue enter id:" + this.cueID)) : (v.appendChild(this.cueHTMLElement),
                                P.call(l, this),
                                t.trigger(i.default.CAPTION_RENDERED, {
                                    captionDiv: this.cueHTMLElement,
                                    currentTrackIdx: p
                                })))
                            }
                            ,
                            c.onexit = function() {
                                if (v)
                                    for (var e = v.childNodes, t = 0; t < e.length; ++t)
                                        e[t].id === this.cueID && (o.debug("Cue exit id:" + e[t].id),
                                        v.removeChild(e[t]),
                                        --t)
                            }
                            ) : f.data && (c = new d(f.start - a,f.end - a,f.data),
                            f.styles && (void 0 !== f.styles.align && "align"in c && (c.align = f.styles.align),
                            void 0 !== f.styles.line && "line"in c && (c.line = f.styles.line),
                            void 0 !== f.styles.position && "position"in c && (c.position = f.styles.position),
                            void 0 !== f.styles.size && "size"in c && (c.size = f.styles.size)),
                            c.onenter = function() {
                                s.mode === r.default.TEXT_SHOWING && t.trigger(i.default.CAPTION_RENDERED, {
                                    currentTrackIdx: p
                                })
                            }
                            );
                            try {
                                c ? s.addCue(c) : o.error("impossible to display subtitles.")
                            } catch (e) {
                                throw O(s),
                                s.addCue(c),
                                e
                            }
                        }
                },
                getCurrentTrackIdx: function() {
                    return p
                },
                setCurrentTrackIdx: R,
                getTrackIdxForId: function(e) {
                    for (var t = -1, a = 0; a < f.length; a++)
                        if (f[a].id === e) {
                            t = a;
                            break
                        }
                    return t
                },
                getCurrentTrackInfo: function() {
                    return f[p]
                },
                setModeForTrackIdx: function(e, t) {
                    var a = M(e);
                    a && a.mode !== t && (a.mode = t)
                },
                deleteCuesFromTrackIdx: function(e, t, a) {
                    var r = M(e);
                    r && O(r, t, a)
                },
                deleteAllTextTracks: function() {
                    for (var e = h ? h.length : 0, t = 0; t < e; t++) {
                        var a = M(t);
                        a && (O.call(this, a),
                        a.mode = "disabled")
                    }
                    h = [],
                    f = [],
                    b && (clearInterval(b),
                    b = null),
                    p = -1,
                    U.call(this)
                },
                deleteTextTrack: function(e) {
                    c.removeChild(h[e]),
                    h.splice(e, 1)
                },
                setConfig: function(e) {
                    e && e.videoModel && (c = e.videoModel)
                }
            },
            o = (0,
            s.default)(e).getInstance().getLogger(a),
            a
        }
        c.__dashjs_factory_name = "TextTracks",
        t.default = o.default.getSingletonFactory(c)
    }
    , function(e, t, a) {
        !function(e, t, a) {
            function r(e, t, a, r, n, i, o, s) {
                this.name = t,
                this.ns = e,
                this.qname = e + " " + t,
                this.inherit = n,
                this.animatable = i,
                this.initial = a,
                this.applies = r,
                this.parse = o,
                this.compute = s
            }
            for (var n in e.all = [new r(t.ns_tts,"backgroundColor","transparent",["body", "div", "p", "region", "span"],!1,!0,a.parseColor,null), new r(t.ns_tts,"color","white",["span"],!0,!0,a.parseColor,null), new r(t.ns_tts,"direction","ltr",["p", "span"],!0,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"display","auto",["body", "div", "p", "region", "span"],!1,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"extent","auto",["tt", "region"],!1,!0,(function(e) {
                if ("auto" === e)
                    return e;
                var t = e.split(" ");
                if (2 !== t.length)
                    return null;
                var r = a.parseLength(t[0])
                  , n = a.parseLength(t[1]);
                return n && r ? {
                    h: n,
                    w: r
                } : null
            }
            ),(function(e, t, r, n, i) {
                var o, s;
                if ("auto" === n)
                    o = new a.ComputedLength(0,1);
                else if (null === (o = a.toComputedLength(n.h.value, n.h.unit, null, e.dimensions.h, null, e.pxLength.h)))
                    return null;
                if ("auto" === n)
                    s = new a.ComputedLength(1,0);
                else if (null === (s = a.toComputedLength(n.w.value, n.w.unit, null, e.dimensions.w, null, e.pxLength.w)))
                    return null;
                return {
                    h: o,
                    w: s
                }
            }
            )), new r(t.ns_tts,"fontFamily","default",["span"],!0,!0,(function(e) {
                var t = e.split(",")
                  , a = [];
                for (var r in t)
                    "'" !== t[r].charAt(0) && '"' !== t[r].charAt(0) && "default" === t[r] ? a.push("monospaceSerif") : a.push(t[r]);
                return a
            }
            ),null), new r(t.ns_tts,"shear","0%",["p"],!0,!0,a.parseLength,(function(e, t, a, r) {
                return "%" !== r.unit ? null : Math.abs(r.value) > 100 ? 100 * Math.sign(r.value) : r.value
            }
            )), new r(t.ns_tts,"fontSize","1c",["span"],!0,!0,a.parseLength,(function(t, r, n, i, o) {
                return a.toComputedLength(i.value, i.unit, null !== r ? r.styleAttrs[e.byName.fontSize.qname] : t.cellLength.h, null !== r ? r.styleAttrs[e.byName.fontSize.qname] : t.cellLength.h, t.cellLength.h, t.pxLength.h)
            }
            )), new r(t.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(e) {
                return "normal" === e ? e : a.parseLength(e)
            }
            ),(function(t, r, n, i, o) {
                var s;
                if ("normal" === i)
                    s = i;
                else if (null === (s = a.toComputedLength(i.value, i.unit, n.styleAttrs[e.byName.fontSize.qname], n.styleAttrs[e.byName.fontSize.qname], t.cellLength.h, t.pxLength.h)))
                    return null;
                return s
            }
            )), new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null), new r(t.ns_tts,"origin","auto",["region"],!1,!0,(function(e) {
                if ("auto" === e)
                    return e;
                var t = e.split(" ");
                if (2 !== t.length)
                    return null;
                var r = a.parseLength(t[0])
                  , n = a.parseLength(t[1]);
                return n && r ? {
                    h: n,
                    w: r
                } : null
            }
            ),(function(e, t, r, n, i) {
                var o, s;
                if ("auto" === n)
                    o = new a.ComputedLength(0,0);
                else if (null === (o = a.toComputedLength(n.h.value, n.h.unit, null, e.dimensions.h, null, e.pxLength.h)))
                    return null;
                if ("auto" === n)
                    s = new a.ComputedLength(0,0);
                else if (null === (s = a.toComputedLength(n.w.value, n.w.unit, null, e.dimensions.w, null, e.pxLength.w)))
                    return null;
                return {
                    h: o,
                    w: s
                }
            }
            )), new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"padding","0px",["region"],!1,!0,(function(e) {
                var t = e.split(" ");
                if (t.length > 4)
                    return null;
                var r = [];
                for (var n in t) {
                    var i = a.parseLength(t[n]);
                    if (!i)
                        return null;
                    r.push(i)
                }
                return r
            }
            ),(function(t, r, n, i, o) {
                var s;
                if (1 === i.length)
                    s = [i[0], i[0], i[0], i[0]];
                else if (2 === i.length)
                    s = [i[0], i[1], i[0], i[1]];
                else if (3 === i.length)
                    s = [i[0], i[1], i[2], i[1]];
                else {
                    if (4 !== i.length)
                        return null;
                    s = [i[0], i[1], i[2], i[3]]
                }
                var l = n.styleAttrs[e.byName.writingMode.qname];
                if ("lrtb" === l || "lr" === l)
                    s = [s[0], s[3], s[2], s[1]];
                else if ("rltb" === l || "rl" === l)
                    s = [s[0], s[1], s[2], s[3]];
                else if ("tblr" === l)
                    s = [s[3], s[0], s[1], s[2]];
                else {
                    if ("tbrl" !== l && "tb" !== l)
                        return null;
                    s = [s[3], s[2], s[1], s[0]]
                }
                var u = [];
                for (var d in s)
                    if (0 === s[d].value)
                        u[d] = new a.ComputedLength(0,0);
                    else if (u[d] = a.toComputedLength(s[d].value, s[d].unit, n.styleAttrs[e.byName.fontSize.qname], "0" === d || "2" === d ? n.styleAttrs[e.byName.extent.qname].h : n.styleAttrs[e.byName.extent.qname].w, "0" === d || "2" === d ? t.cellLength.h : t.cellLength.w, "0" === d || "2" === d ? t.pxLength.h : t.pxLength.w),
                    null === u[d])
                        return null;
                return u
            }
            )), new r(t.ns_tts,"position","top left",["region"],!1,!0,(function(e) {
                return a.parsePosition(e)
            }
            ),(function(t, r, n, i) {
                var o, s;
                return null === (o = a.toComputedLength(i.v.offset.value, i.v.offset.unit, null, new a.ComputedLength(-n.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh - n.styleAttrs[e.byName.extent.qname].h.rh), null, t.pxLength.h)) ? null : ("bottom" === i.v.edge && (o = new a.ComputedLength(-o.rw - n.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh - o.rh - n.styleAttrs[e.byName.extent.qname].h.rh)),
                s = a.toComputedLength(i.h.offset.value, i.h.offset.unit, null, new a.ComputedLength(t.dimensions.w.rw - n.styleAttrs[e.byName.extent.qname].w.rw,-n.styleAttrs[e.byName.extent.qname].w.rh), null, t.pxLength.w),
                null === o ? null : ("right" === i.h.edge && (s = new a.ComputedLength(t.dimensions.w.rw - s.rw - n.styleAttrs[e.byName.extent.qname].w.rw,-s.rh - n.styleAttrs[e.byName.extent.qname].w.rh)),
                {
                    h: o,
                    w: s
                }))
            }
            )), new r(t.ns_tts,"ruby","none",["span"],!1,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"rubyAlign","center",["span"],!0,!0,(function(e) {
                return "center" !== e && "spaceAround" !== e ? null : e
            }
            ),null), new r(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"rubyReserve","none",["p"],!0,!0,(function(e) {
                var t = e.split(" ")
                  , r = [null, null];
                if (0 === t.length || t.length > 2)
                    return null;
                if ("none" !== t[0] && "both" !== t[0] && "after" !== t[0] && "before" !== t[0] && "outside" !== t[0])
                    return null;
                if (r[0] = t[0],
                2 === t.length && "none" !== t[0]) {
                    var n = a.parseLength(t[1]);
                    if (!n)
                        return null;
                    r[1] = n
                }
                return r
            }
            ),(function(t, r, n, i, o) {
                if ("none" === i[0])
                    return i;
                var s = null;
                return null === (s = null === i[1] ? new a.ComputedLength(.5 * n.styleAttrs[e.byName.fontSize.qname].rw,.5 * n.styleAttrs[e.byName.fontSize.qname].rh) : a.toComputedLength(i[1].value, i[1].unit, n.styleAttrs[e.byName.fontSize.qname], n.styleAttrs[e.byName.fontSize.qname], t.cellLength.h, t.pxLength.h)) ? null : [i[0], s]
            }
            )), new r(t.ns_tts,"showBackground","always",["region"],!1,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"textAlign","start",["p"],!0,!0,(function(e) {
                return e
            }
            ),(function(e, t, a, r, n) {
                return "left" === r ? "start" : "right" === r ? "end" : r
            }
            )), new r(t.ns_tts,"textCombine","none",["span"],!0,!0,(function(e) {
                var t = e.split(" ");
                return 1 !== t.length || "none" !== t[0] && "all" !== t[0] ? null : [t[0]]
            }
            ),null), new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,(function(e) {
                return e.split(" ")
            }
            ),null), new r(t.ns_tts,"textEmphasis","none",["span"],!0,!0,(function(e) {
                var t = e.split(" ")
                  , r = {
                    style: null,
                    symbol: null,
                    color: null,
                    position: null
                };
                for (var n in t)
                    if ("none" === t[n] || "auto" === t[n])
                        r.style = t[n];
                    else if ("filled" === t[n] || "open" === t[n])
                        r.style = t[n];
                    else if ("circle" === t[n] || "dot" === t[n] || "sesame" === t[n])
                        r.symbol = t[n];
                    else if ("current" === t[n])
                        r.color = t[n];
                    else if ("outside" === t[n] || "before" === t[n] || "after" === t[n])
                        r.position = t[n];
                    else if (r.color = a.parseColor(t[n]),
                    null === r.color)
                        return null;
                return null == r.style && null == r.symbol ? r.style = "auto" : (r.symbol = r.symbol || "circle",
                r.style = r.style || "filled"),
                r.position = r.position || "outside",
                r.color = r.color || "current",
                r
            }
            ),null), new r(t.ns_tts,"textOutline","none",["span"],!0,!0,(function(e) {
                if ("none" === e)
                    return e;
                var t = {}
                  , r = e.split(" ");
                if (0 === r.length || r.length > 2)
                    return null;
                var n = a.parseColor(r[0]);
                if (t.color = n,
                null !== n && r.shift(),
                1 !== r.length)
                    return null;
                var i = a.parseLength(r[0]);
                return i ? (t.thickness = i,
                t) : null
            }
            ),(function(t, r, n, i, o) {
                if ("none" === i)
                    return i;
                var s = {};
                return null === i.color ? s.color = n.styleAttrs[e.byName.color.qname] : s.color = i.color,
                s.thickness = a.toComputedLength(i.thickness.value, i.thickness.unit, n.styleAttrs[e.byName.fontSize.qname], n.styleAttrs[e.byName.fontSize.qname], t.cellLength.h, t.pxLength.h),
                null === s.thickness ? null : s
            }
            )), new r(t.ns_tts,"textShadow","none",["span"],!0,!0,a.parseTextShadow,(function(t, r, n, i) {
                if ("none" === i)
                    return i;
                var o = [];
                for (var s in i) {
                    var l = {};
                    if (l.x_off = a.toComputedLength(i[s][0].value, i[s][0].unit, null, n.styleAttrs[e.byName.fontSize.qname], null, t.pxLength.w),
                    null === l.x_off)
                        return null;
                    if (l.y_off = a.toComputedLength(i[s][1].value, i[s][1].unit, null, n.styleAttrs[e.byName.fontSize.qname], null, t.pxLength.h),
                    null === l.y_off)
                        return null;
                    if (null === i[s][2])
                        l.b_radius = 0;
                    else if (l.b_radius = a.toComputedLength(i[s][2].value, i[s][2].unit, null, n.styleAttrs[e.byName.fontSize.qname], null, t.pxLength.h),
                    null === l.b_radius)
                        return null;
                    null === i[s][3] ? l.color = n.styleAttrs[e.byName.color.qname] : l.color = i[s][3],
                    o.push(l)
                }
                return o
            }
            )), new r(t.ns_tts,"unicodeBidi","normal",["span", "p"],!1,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"visibility","visible",["body", "div", "p", "region", "span"],!0,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(e) {
                return e
            }
            ),null), new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,(function(e) {
                var t;
                return "auto" === e ? t = e : (t = parseInt(e),
                isNaN(t) && (t = null)),
                t
            }
            ),null), new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,a.parseLength,(function(e, t, r, n, i) {
                return a.toComputedLength(n.value, n.unit, null, null, e.cellLength.w, null)
            }
            )), new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(e) {
                return e
            }
            ),null), new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(e) {
                return e
            }
            ),null), new r(t.ns_itts,"forcedDisplay","false",["body", "div", "p", "region", "span"],!0,!0,(function(e) {
                return "true" === e
            }
            ),null), new r(t.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(e) {
                return "true" === e
            }
            ),null)],
            e.byQName = {},
            e.all)
                e.byQName[e.all[n].qname] = e.all[n];
            for (var i in e.byName = {},
            e.all)
                e.byName[e.all[i].name] = e.all[i]
        }(t, "undefined" == typeof imscNames ? a(107) : imscNames, "undefined" == typeof imscUtils ? a(108) : imscUtils)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            return r(e, [{
                key: "extend",
                value: function(e, t) {
                    if (e) {
                        var a = !!t && t.override
                          , r = !!t && t.publicOnly;
                        for (var n in e)
                            !e.hasOwnProperty(n) || this[n] && !a || r && -1 === e[n].indexOf("public_") || (this[n] = e[n])
                    }
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(1))
          , n = l(a(4))
          , i = l(a(2))
          , o = l(a(0))
          , s = l(a(3));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u() {
            var e = this.context
              , t = (0,
            i.default)(e).getInstance()
              , a = void 0
              , o = void 0
              , l = void 0
              , u = void 0
              , d = void 0
              , c = void 0
              , f = void 0
              , h = ["alwaysReplace", "neverReplace"]
              , p = ["highestBitrate", "widestRange"];
            function g(e, t) {
                if (!e || !t)
                    return [];
                var a = t.id;
                return l[a] && l[a][e] ? l[a][e].list : []
            }
            function m(e, t) {
                return !e || !t || t && !l[t.id] ? null : l[t.id][e].current
            }
            function y(e, a) {
                if (e && e.streamInfo) {
                    var i = e.type
                      , o = e.streamInfo
                      , s = o.id
                      , u = m(i, o);
                    if (l[s] && l[s][i] && !k(e, u) && (l[s][i].current = e,
                    !l[s][i].current || a && i === r.default.FRAGMENTED_TEXT || t.trigger(n.default.CURRENT_TRACK_CHANGED, {
                        oldMediaInfo: u,
                        newMediaInfo: e,
                        switchMode: c[i]
                    }),
                    !a)) {
                        var d = function(e) {
                            var t = {
                                lang: e.lang,
                                viewpoint: e.viewpoint,
                                roles: e.roles,
                                accessibility: e.accessibility,
                                audioChannelConfiguration: e.audioChannelConfiguration
                            };
                            return t.lang || t.viewpoint || t.role && t.role.length > 0 || t.accessibility && t.accessibility.length > 0 || t.audioChannelConfiguration && t.audioChannelConfiguration.length > 0 ? t : null
                        }(e);
                        if (!d || !l[s][i].storeLastSettings)
                            return;
                        d.roles && (d.role = d.roles[0],
                        delete d.roles),
                        d.accessibility && (d.accessibility = d.accessibility[0]),
                        d.audioChannelConfiguration && (d.audioChannelConfiguration = d.audioChannelConfiguration[0]),
                        f.setSavedMediaSettings(i, d)
                    }
                }
            }
            function _(e, t) {
                e && t && (u[e] = t)
            }
            function v(e) {
                return e ? u[e] : null
            }
            function b() {
                return d || "highestBitrate"
            }
            function E(e) {
                return e === r.default.AUDIO || e === r.default.VIDEO || e === r.default.TEXT || e === r.default.FRAGMENTED_TEXT || e === r.default.IMAGE
            }
            function k(e, t) {
                if (!e && !t)
                    return !0;
                if (!e || !t)
                    return !1;
                var a = e.id === t.id
                  , r = e.viewpoint === t.viewpoint
                  , n = e.lang === t.lang
                  , i = e.roles.toString() === t.roles.toString()
                  , o = e.accessibility.toString() === t.accessibility.toString()
                  , s = e.audioChannelConfiguration.toString() === t.audioChannelConfiguration.toString();
                return a && r && n && i && o && s
            }
            function T() {
                l = {},
                u = {
                    audio: null,
                    video: null,
                    fragmentedText: null
                },
                c = {
                    audio: "alwaysReplace",
                    video: "neverReplace"
                }
            }
            function S(e, t) {
                var a = !e.lang || t.lang.match(e.lang)
                  , r = !e.viewpoint || e.viewpoint === t.viewpoint
                  , n = !e.role || !!t.roles.filter((function(t) {
                    return t === e.role
                }
                ))[0]
                  , i = !e.accessibility || !!t.accessibility.filter((function(t) {
                    return t === e.accessibility
                }
                ))[0]
                  , o = !e.audioChannelConfiguration || !!t.audioChannelConfiguration.filter((function(t) {
                    return t === e.audioChannelConfiguration
                }
                ))[0];
                return a && r && n && i && o
            }
            function A(e, t) {
                if (e === r.default.FRAGMENTED_TEXT)
                    return t[0];
                var a = b()
                  , n = []
                  , i = function(e) {
                    var t = 0
                      , a = []
                      , r = void 0;
                    return e.forEach((function(e) {
                        (r = Math.max.apply(Math, e.bitrateList.map((function(e) {
                            return e.bandwidth
                        }
                        )))) > t ? (t = r,
                        a = [e]) : r === t && a.push(e)
                    }
                    )),
                    a
                }
                  , s = function(e) {
                    var t = 0
                      , a = []
                      , r = void 0;
                    return e.forEach((function(e) {
                        (r = e.representationCount) > t ? (t = r,
                        a = [e]) : r === t && a.push(e)
                    }
                    )),
                    a
                };
                switch (a) {
                case "highestBitrate":
                    (n = i(t)).length > 1 && (n = s(n));
                    break;
                case "widestRange":
                    (n = s(t)).length > 1 && (n = i(t));
                    break;
                default:
                    o.warn("Track selection mode is not supported: " + a)
                }
                return n[0]
            }
            return a = {
                checkInitialMediaSettingsForType: function(e, t) {
                    var a = v(e)
                      , r = g(e, t)
                      , n = [];
                    a || _(e, a = f.getSavedMediaSettings(e)),
                    r && 0 !== r.length && (a && r.forEach((function(e) {
                        S(a, e) && n.push(e)
                    }
                    )),
                    0 === n.length ? y(A(e, r), !0) : n.length > 1 ? y(A(e, n)) : y(n[0]))
                },
                addTrack: function(e) {
                    if (e) {
                        var t = e.type;
                        if (E(t)) {
                            var a = e.streamInfo.id;
                            l[a] || (l[a] = {
                                audio: {
                                    list: [],
                                    storeLastSettings: !0,
                                    current: null
                                },
                                video: {
                                    list: [],
                                    storeLastSettings: !0,
                                    current: null
                                },
                                text: {
                                    list: [],
                                    storeLastSettings: !0,
                                    current: null
                                },
                                fragmentedText: {
                                    list: [],
                                    storeLastSettings: !0,
                                    current: null
                                },
                                image: {
                                    list: [],
                                    storeLastSettings: !0,
                                    current: null
                                }
                            });
                            for (var r = l[a][t].list, n = 0, i = r.length; n < i; ++n)
                                if (k(r[n], e))
                                    return;
                            r.push(e);
                            var o = v(t);
                            o && S(o, e) && !m(t, e.streamInfo) && y(e)
                        }
                    }
                },
                getTracksFor: g,
                getCurrentTrackFor: m,
                isCurrentTrack: function(e) {
                    if (!e)
                        return !1;
                    var t = e.type
                      , a = e.streamInfo.id;
                    return l[a] && l[a][t] && k(l[a][t].current, e)
                },
                setTrack: y,
                setInitialSettings: _,
                getInitialSettings: v,
                setSwitchMode: function(e, t) {
                    -1 !== h.indexOf(t) ? c[e] = t : o.warn("Track switch mode is not supported: " + t)
                },
                getSwitchMode: function(e) {
                    return c[e]
                },
                setSelectionModeForInitialTrack: function(e) {
                    -1 !== p.indexOf(e) ? d = e : o.warn("Track selection mode is not supported: " + e)
                },
                getSelectionModeForInitialTrack: b,
                isMultiTrackSupportedByType: E,
                isTracksEqual: k,
                matchSettings: S,
                saveTextSettingsDisabled: function() {
                    f.setSavedMediaSettings(r.default.FRAGMENTED_TEXT, null)
                },
                setConfig: function(e) {
                    e && e.domStorage && (f = e.domStorage)
                },
                reset: T
            },
            o = (0,
            s.default)(e).getInstance().getLogger(a),
            T(),
            a
        }
        u.__dashjs_factory_name = "MediaController";
        var d = o.default.getSingletonFactory(u);
        d.TRACK_SWITCH_MODE_NEVER_REPLACE = "neverReplace",
        d.TRACK_SWITCH_MODE_ALWAYS_REPLACE = "alwaysReplace",
        d.TRACK_SELECTION_MODE_HIGHEST_BITRATE = "highestBitrate",
        d.TRACK_SELECTION_MODE_WIDEST_RANGE = "widestRange",
        d.DEFAULT_INIT_TRACK_SELECTION_MODE = "highestBitrate",
        o.default.updateSingletonFactory(u.__dashjs_factory_name, d),
        t.default = d
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.indexRange = null,
            this.index = null,
            this.mediaRange = null,
            this.media = null,
            this.duration = NaN,
            this.replacementTime = null,
            this.replacementNumber = NaN,
            this.mediaStartTime = NaN,
            this.presentationStartTime = NaN,
            this.availabilityStartTime = NaN,
            this.availabilityEndTime = NaN,
            this.availabilityIdx = NaN,
            this.wallStartTime = NaN,
            this.representation = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o() {
            return {
                modifyRequestURL: function(e) {
                    return e
                },
                modifyRequestHeader: function(e) {
                    return e
                }
            }
        }
        o.__dashjs_factory_name = "RequestModifier",
        t.default = i.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        function r(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var n = function e() {
            r(this, e),
            this.start = null,
            this.mstart = null,
            this.starttype = null,
            this.trace = []
        };
        n.INITIAL_PLAYOUT_START_REASON = "initial_playout",
        n.SEEK_START_REASON = "seek",
        n.RESUME_FROM_PAUSE_START_REASON = "resume",
        n.METRICS_COLLECTION_START_REASON = "metrics_collection_start";
        var i = function e() {
            r(this, e),
            this.representationid = null,
            this.subreplevel = null,
            this.start = null,
            this.mstart = null,
            this.duration = null,
            this.playbackspeed = null,
            this.stopreason = null
        };
        i.REPRESENTATION_SWITCH_STOP_REASON = "representation_switch",
        i.REBUFFERING_REASON = "rebuffering",
        i.USER_REQUEST_STOP_REASON = "user_request",
        i.END_OF_PERIOD_STOP_REASON = "end_of_period",
        i.END_OF_CONTENT_STOP_REASON = "end_of_content",
        i.METRICS_COLLECTION_STOP_REASON = "metrics_collection_end",
        i.FAILURE_STOP_REASON = "failure",
        t.PlayList = n,
        t.PlayListTrace = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = (e = e || {}).requestModifier;
            return {
                load: function(e) {
                    var a = new Date
                      , r = e.request
                      , n = new XMLHttpRequest;
                    n.open(e.method, e.url, !0),
                    r.responseType && (n.responseType = r.responseType),
                    r.range && n.setRequestHeader("Range", "bytes=" + r.range),
                    r.requestStartDate || (r.requestStartDate = a),
                    t && (n = t.modifyRequestHeader(n)),
                    n.withCredentials = e.withCredentials,
                    n.onload = e.onload,
                    n.onloadend = e.onend,
                    n.onerror = e.onerror,
                    n.onprogress = e.progress,
                    n.onabort = e.onabort,
                    n.send(),
                    e.response = n
                },
                abort: function(e) {
                    var t = e.response;
                    t.onloadend = t.onerror = t.onprogress = void 0,
                    t.abort()
                }
            }
        }
        o.__dashjs_factory_name = "XHRLoader";
        var s = i.default.getClassFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        }
        : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        }
          , n = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var i = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            return n(e, null, [{
                key: "mixin",
                value: function(t, a, n) {
                    var i = void 0
                      , o = {};
                    if (t)
                        for (var s in a)
                            a.hasOwnProperty(s) && (i = a[s],
                            s in t && (t[s] === i || s in o && o[s] === i) || ("object" === r(t[s]) && null !== t[s] ? t[s] = e.mixin(t[s], i, n) : t[s] = n(i)));
                    return t
                }
            }, {
                key: "clone",
                value: function(t) {
                    if (!t || "object" !== (void 0 === t ? "undefined" : r(t)))
                        return t;
                    var a = void 0;
                    if (t instanceof Array) {
                        a = [];
                        for (var n = 0, i = t.length; n < i; ++n)
                            n in t && a.push(e.clone(t[n]))
                    } else
                        a = {};
                    return e.mixin(a, t, e.clone)
                }
            }, {
                key: "addAditionalQueryParameterToUrl",
                value: function(e, t) {
                    try {
                        if (!t || 0 === t.length)
                            return e;
                        var a = new URL(e);
                        return t.forEach((function(e) {
                            e.key && e.value && a.searchParams.set(e.key, e.value)
                        }
                        )),
                        a.href
                    } catch (t) {
                        return e
                    }
                }
            }, {
                key: "generateUuid",
                value: function() {
                    var e = (new Date).getTime();
                    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (function(t) {
                        var a = (e + 16 * Math.random()) % 16 | 0;
                        return e = Math.floor(e / 16),
                        ("x" == t ? a : 3 & a | 8).toString(16)
                    }
                    ))
                }
            }, {
                key: "generateHashCode",
                value: function(e) {
                    var t = 0;
                    if (0 === e.length)
                        return t;
                    for (var a = 0; a < e.length; a++) {
                        t = (t << 5) - t + e.charCodeAt(a),
                        t |= 0
                    }
                    return t
                }
            }]),
            e
        }();
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = b(a(1))
          , n = b(a(19))
          , i = b(a(315))
          , o = b(a(316))
          , s = b(a(317))
          , l = b(a(318))
          , u = b(a(220))
          , d = b(a(221))
          , c = b(a(222))
          , f = b(a(319))
          , h = b(a(223))
          , p = b(a(39))
          , g = b(a(0))
          , m = b(a(3))
          , y = b(a(12))
          , _ = b(a(21))
          , v = a(224);
        function b(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function E() {
            var e = void 0
              , t = void 0
              , a = void 0
              , g = void 0
              , b = this.context
              , E = (0,
            p.default)(b).getInstance()
              , k = Number.isInteger || function(e) {
                return "number" == typeof e && isFinite(e) && Math.floor(e) === e
            }
            ;
            function T(e, t) {
                var a = void 0
                  , i = void 0
                  , o = void 0
                  , s = void 0
                  , l = void 0
                  , u = void 0
                  , d = !1
                  , c = !1;
                if (!e)
                    throw new Error("adaptation is not defined");
                if (!t)
                    throw new Error("type is not defined");
                if (e.hasOwnProperty("ContentComponent_asArray") && (s = e.ContentComponent_asArray),
                l = t !== r.default.TEXT ? new RegExp(t) : new RegExp("(vtt|ttml)"),
                e.Representation_asArray && e.Representation_asArray.length && e.Representation_asArray.length > 0) {
                    var f = D(e.Representation_asArray[0]);
                    if (f && f.length > 0 && v.THUMBNAILS_SCHEME_ID_URIS.indexOf(f[0].schemeIdUri) >= 0)
                        return t === r.default.IMAGE;
                    if (e.Representation_asArray[0].hasOwnProperty(n.default.CODECS) && (0 === (u = e.Representation_asArray[0].codecs).search(r.default.STPP) || 0 === u.search(r.default.WVTT)))
                        return t === r.default.FRAGMENTED_TEXT
                }
                if (s) {
                    if (s.length > 1)
                        return t === r.default.MUXED;
                    s[0] && s[0].contentType === t && (d = !0,
                    c = !0)
                }
                if (e.hasOwnProperty(n.default.MIME_TYPE) && (d = l.test(e.mimeType),
                c = !0),
                !c)
                    for (a = 0,
                    i = e.Representation_asArray && e.Representation_asArray.length ? e.Representation_asArray.length : 0; !c && a < i; )
                        (o = e.Representation_asArray[a]).hasOwnProperty(n.default.MIME_TYPE) && (d = l.test(o.mimeType),
                        c = !0),
                        a++;
                return d
            }
            function S(e) {
                return T(e, r.default.AUDIO)
            }
            function A(e) {
                return T(e, r.default.VIDEO)
            }
            function C(e) {
                return T(e, r.default.FRAGMENTED_TEXT)
            }
            function I(e) {
                return T(e, r.default.IMAGE)
            }
            function P(e) {
                return "text/vtt" === e || "application/ttml+xml" === e
            }
            function w() {
                return function(e, t) {
                    return e.bandwidth - t.bandwidth
                }
            }
            function M(e) {
                return e && Array.isArray(e.Representation_asArray) && e.Representation_asArray.sort((function(e, t) {
                    return e.bandwidth - t.bandwidth
                }
                )),
                e
            }
            function R(e, t) {
                return e && e.Period_asArray && k(t) && e.Period_asArray[t] ? e.Period_asArray[t].AdaptationSet_asArray : []
            }
            function x(e) {
                var t = !1;
                return e && e.hasOwnProperty("type") && (t = e.type === n.default.DYNAMIC),
                t
            }
            function D(e) {
                return e && e.EssentialProperty_asArray && e.EssentialProperty_asArray.length ? e.EssentialProperty_asArray.map((function(e) {
                    return {
                        schemeIdUri: e.schemeIdUri,
                        value: e.value
                    }
                }
                )) : null
            }
            function O(e, t) {
                if (!e)
                    throw new Error("Period cannot be null or undefined");
                var a = s.default.DEFAULT_ID + "_" + t;
                return e.hasOwnProperty(n.default.ID) && e.id.length > 0 && "__proto__" !== e.id && (a = e.id),
                a
            }
            function N(e, t) {
                var a = []
                  , i = void 0;
                if (!e)
                    return a;
                for (i = 0; i < e.length; i++) {
                    var o = new f.default;
                    if (o.timescale = 1,
                    o.representation = t,
                    !e[i].hasOwnProperty(r.default.SCHEME_ID_URI))
                        throw new Error("Invalid EventStream. SchemeIdUri has to be set");
                    o.schemeIdUri = e[i].schemeIdUri,
                    e[i].hasOwnProperty(n.default.TIMESCALE) && (o.timescale = e[i].timescale),
                    e[i].hasOwnProperty(n.default.VALUE) && (o.value = e[i].value),
                    a.push(o)
                }
                return a
            }
            function L(e) {
                var t = []
                  , a = e.BaseURL_asArray || [e.baseUri]
                  , r = !1;
                return a.some((function(a) {
                    if (a) {
                        var i = new c.default
                          , o = a.__text || a;
                        return E.isRelative(o) && (r = !0,
                        e.baseUri && (o = E.resolve(o, e.baseUri))),
                        i.url = o,
                        a.hasOwnProperty(n.default.SERVICE_LOCATION) && a.serviceLocation.length ? i.serviceLocation = a.serviceLocation : i.serviceLocation = o,
                        a.hasOwnProperty(n.default.DVB_PRIORITY) && (i.dvb_priority = a[n.default.DVB_PRIORITY]),
                        a.hasOwnProperty(n.default.DVB_WEIGHT) && (i.dvb_weight = a[n.default.DVB_WEIGHT]),
                        a.hasOwnProperty(n.default.AVAILABILITY_TIME_OFFSET) && (i.availabilityTimeOffset = a[n.default.AVAILABILITY_TIME_OFFSET]),
                        a.hasOwnProperty(n.default.AVAILABILITY_TIME_COMPLETE) && (i.availabilityTimeComplete = "false" !== a[n.default.AVAILABILITY_TIME_COMPLETE]),
                        t.push(i),
                        r
                    }
                }
                )),
                t
            }
            return e = {
                getIsTypeOf: T,
                getIsTextTrack: P,
                getLanguageForAdaptation: function(e) {
                    var t = "";
                    return e && e.hasOwnProperty(n.default.LANG) && (t = e.lang.replace(/[^A-Za-z0-9-]/g, "")),
                    t
                },
                getViewpointForAdaptation: function(e) {
                    return e && e.hasOwnProperty(n.default.VIEWPOINT) ? e.Viewpoint : null
                },
                getRolesForAdaptation: function(e) {
                    return e && e.hasOwnProperty(n.default.ROLE_ASARRAY) ? e.Role_asArray : []
                },
                getAccessibilityForAdaptation: function(e) {
                    return e && e.hasOwnProperty(n.default.ACCESSIBILITY_ASARRAY) ? e.Accessibility_asArray : []
                },
                getAudioChannelConfigurationForAdaptation: function(e) {
                    return e && e.hasOwnProperty(n.default.AUDIOCHANNELCONFIGURATION_ASARRAY) ? e.AudioChannelConfiguration_asArray : []
                },
                getAudioChannelConfigurationForRepresentation: function(e) {
                    return e && e.hasOwnProperty(n.default.AUDIOCHANNELCONFIGURATION_ASARRAY) ? e.AudioChannelConfiguration_asArray : []
                },
                getAdaptationForIndex: function(e, t, a) {
                    var r = R(t, a);
                    return r.length > 0 && k(e) ? r[e] : null
                },
                getIndexForAdaptation: function(e, t, a) {
                    if (!e)
                        return -1;
                    for (var r = R(t, a), n = 0; n < r.length; n++) {
                        if ((0,
                        h.default)(b).getInstance().areEqual(r[n], e))
                            return n
                    }
                    return -1
                },
                getAdaptationForId: function(e, t, a) {
                    var r, i = R(t, a), o = void 0;
                    for (o = 0,
                    r = i.length; o < r; o++)
                        if (i[o].hasOwnProperty(n.default.ID) && i[o].id === e)
                            return i[o];
                    return null
                },
                getAdaptationsForType: function(e, t, a) {
                    var r, n = R(e, t), i = void 0, o = [];
                    for (i = 0,
                    r = n.length; i < r; i++)
                        T(n[i], a) && o.push(M(n[i]));
                    return o
                },
                getCodec: function(e, t, a) {
                    var r = null;
                    if (e && e.Representation_asArray && e.Representation_asArray.length > 0) {
                        var n = k(t) && t >= 0 && t < e.Representation_asArray.length ? e.Representation_asArray[t] : e.Representation_asArray[0];
                        n && (r = n.mimeType + ';codecs="' + n.codecs + '"',
                        a && void 0 !== n.width && (r += ';width="' + n.width + '";height="' + n.height + '"'))
                    }
                    return r && (r = r.replace(/\sprofiles=[^;]*/g, "")),
                    r
                },
                getMimeType: function(e) {
                    return e && e.Representation_asArray && e.Representation_asArray.length > 0 ? e.Representation_asArray[0].mimeType : null
                },
                getKID: function(e) {
                    return e && e.hasOwnProperty(n.default.CENC_DEFAULT_KID) ? e[n.default.CENC_DEFAULT_KID] : null
                },
                getLabelsForAdaptation: function(e) {
                    if (!e || !Array.isArray(e.Label_asArray))
                        return [];
                    for (var t = [], a = 0; a < e.Label_asArray.length; a++)
                        t.push({
                            lang: e.Label_asArray[a].lang,
                            text: e.Label_asArray[a].__text || e.Label_asArray[a]
                        });
                    return t
                },
                getContentProtectionData: function(e) {
                    return e && e.hasOwnProperty(n.default.CONTENTPROTECTION_ASARRAY) && 0 !== e.ContentProtection_asArray.length ? e.ContentProtection_asArray : null
                },
                getIsDynamic: x,
                hasProfile: function(e, t) {
                    var a = !1;
                    return e && e.profiles && e.profiles.length > 0 && (a = -1 !== e.profiles.indexOf(t)),
                    a
                },
                getDuration: function(e) {
                    return e && e.hasOwnProperty(n.default.MEDIA_PRESENTATION_DURATION) ? e.mediaPresentationDuration : e && "dynamic" == e.type ? Number.POSITIVE_INFINITY : Number.MAX_SAFE_INTEGER || Number.MAX_VALUE
                },
                getBandwidth: function(e) {
                    return e && e.bandwidth ? e.bandwidth : NaN
                },
                getManifestUpdatePeriod: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0
                      , a = NaN;
                    return e && e.hasOwnProperty(n.default.MINIMUM_UPDATE_PERIOD) && (a = e.minimumUpdatePeriod),
                    isNaN(a) ? a : Math.max(a - t, 1)
                },
                getRepresentationCount: function(e) {
                    return e && Array.isArray(e.Representation_asArray) ? e.Representation_asArray.length : 0
                },
                getBitrateListForAdaptation: function(e) {
                    var t = M(e);
                    return (t && Array.isArray(t.Representation_asArray) ? t.Representation_asArray : []).map((function(e) {
                        return {
                            bandwidth: e.bandwidth,
                            width: e.width || 0,
                            height: e.height || 0,
                            scanType: e.scanType || null,
                            id: e.id || null
                        }
                    }
                    ))
                },
                getRepresentationFor: function(e, t) {
                    return t && t.Representation_asArray && t.Representation_asArray.length > 0 && k(e) ? t.Representation_asArray[e] : null
                },
                getRepresentationsForAdaptation: function(e) {
                    var t, a, r, o, s, l = [], u = function(e) {
                        if (e && e.period && k(e.period.index)) {
                            var t = e.period.mpd.manifest.Period_asArray[e.period.index];
                            if (t && t.AdaptationSet_asArray && k(e.index))
                                return M(t.AdaptationSet_asArray[e.index])
                        }
                    }(e), d = void 0, c = void 0;
                    if (u && u.Representation_asArray) {
                        if (e && e.period && k(e.period.index)) {
                            var f = L(e.period.mpd.manifest);
                            f && (c = f[0])
                        }
                        for (var h = 0, p = u.Representation_asArray.length; h < p; ++h) {
                            var g = u.Representation_asArray[h]
                              , m = new i.default;
                            if (m.index = h,
                            m.adaptation = e,
                            g.hasOwnProperty(n.default.ID) && (m.id = g.id),
                            g.hasOwnProperty(n.default.CODECS) && (m.codecs = g.codecs),
                            g.hasOwnProperty(n.default.CODEC_PRIVATE_DATA) && (m.codecPrivateData = g.codecPrivateData),
                            g.hasOwnProperty(n.default.BANDWITH) && (m.bandwidth = g.bandwidth),
                            g.hasOwnProperty(n.default.WIDTH) && (m.width = g.width),
                            g.hasOwnProperty(n.default.HEIGHT) && (m.height = g.height),
                            g.hasOwnProperty(n.default.SCAN_TYPE) && (m.scanType = g.scanType),
                            g.hasOwnProperty(n.default.MAX_PLAYOUT_RATE) && (m.maxPlayoutRate = g.maxPlayoutRate),
                            g.hasOwnProperty(n.default.SEGMENT_BASE) ? (d = g.SegmentBase,
                            m.segmentInfoType = n.default.SEGMENT_BASE) : g.hasOwnProperty(n.default.SEGMENT_LIST) ? (d = g.SegmentList).hasOwnProperty(n.default.SEGMENT_TIMELINE) ? m.segmentInfoType = n.default.SEGMENT_TIMELINE : m.segmentInfoType = n.default.SEGMENT_LIST : g.hasOwnProperty(n.default.SEGMENT_TEMPLATE) ? ((d = g.SegmentTemplate).hasOwnProperty(n.default.SEGMENT_TIMELINE) ? m.segmentInfoType = n.default.SEGMENT_TIMELINE : m.segmentInfoType = n.default.SEGMENT_TEMPLATE,
                            d.hasOwnProperty(n.default.INITIALIZATION_MINUS) && (m.initialization = d.initialization.split("$Bandwidth$").join(g.bandwidth).split("$RepresentationID$").join(g.id))) : m.segmentInfoType = n.default.BASE_URL,
                            m.essentialProperties = D(g),
                            d) {
                                if (d.hasOwnProperty(n.default.INITIALIZATION)) {
                                    var y = d.Initialization;
                                    y.hasOwnProperty(n.default.SOURCE_URL) && (m.initialization = y.sourceURL),
                                    y.hasOwnProperty(n.default.RANGE) && (m.range = y.range)
                                } else
                                    g.hasOwnProperty(n.default.MIME_TYPE) && P(g.mimeType) && (m.range = 0);
                                d.hasOwnProperty(n.default.TIMESCALE) && (m.timescale = d.timescale),
                                d.hasOwnProperty(n.default.DURATION) ? m.segmentDuration = d.duration / m.timescale : g.hasOwnProperty(n.default.SEGMENT_TEMPLATE) && (d = g.SegmentTemplate).hasOwnProperty(n.default.SEGMENT_TIMELINE) && (m.segmentDuration = (r = d.SegmentTimeline,
                                o = void 0,
                                s = void 0,
                                o = r.S_asArray[0],
                                s = r.S_asArray[1],
                                (o.hasOwnProperty("d") ? o.d : s.t - o.t) / m.timescale)),
                                d.hasOwnProperty(n.default.MEDIA) && (m.media = d.media),
                                d.hasOwnProperty(n.default.START_NUMBER) && (m.startNumber = d.startNumber),
                                d.hasOwnProperty(n.default.INDEX_RANGE) && (m.indexRange = d.indexRange),
                                d.hasOwnProperty(n.default.PRESENTATION_TIME_OFFSET) && (m.presentationTimeOffset = d.presentationTimeOffset / m.timescale),
                                d.hasOwnProperty(n.default.AVAILABILITY_TIME_OFFSET) ? m.availabilityTimeOffset = d.availabilityTimeOffset : c && void 0 !== c.availabilityTimeOffset && (m.availabilityTimeOffset = c.availabilityTimeOffset),
                                d.hasOwnProperty(n.default.AVAILABILITY_TIME_COMPLETE) ? m.availabilityTimeComplete = "false" !== d.availabilityTimeComplete : c && void 0 !== c.availabilityTimeComplete && (m.availabilityTimeComplete = c.availabilityTimeComplete)
                            }
                            m.MSETimeOffset = (a = void 0,
                            void 0,
                            a = (t = m).presentationTimeOffset,
                            t.adaptation.period.start - a),
                            m.path = [e.period.index, e.index, h],
                            l.push(m)
                        }
                    }
                    return l
                },
                getAdaptationsForPeriod: function(e) {
                    var t = e && k(e.index) ? e.mpd.manifest.Period_asArray[e.index] : null
                      , a = []
                      , i = void 0
                      , s = void 0
                      , l = void 0;
                    if (t && t.AdaptationSet_asArray)
                        for (l = 0; l < t.AdaptationSet_asArray.length; l++)
                            s = t.AdaptationSet_asArray[l],
                            i = new o.default,
                            s.hasOwnProperty(n.default.ID) && (i.id = s.id),
                            i.index = l,
                            i.period = e,
                            T(s, r.default.MUXED) ? i.type = r.default.MUXED : S(s) ? i.type = r.default.AUDIO : A(s) ? i.type = r.default.VIDEO : C(s) ? i.type = r.default.FRAGMENTED_TEXT : I(s) ? i.type = r.default.IMAGE : i.type = r.default.TEXT,
                            a.push(i);
                    return a
                },
                getRegularPeriods: function(e) {
                    var i, o = !!e && x(e.manifest), l = [], u = null, d = null, c = null, f = null, h = void 0;
                    for (h = 0,
                    i = e && e.manifest && e.manifest.Period_asArray ? e.manifest.Period_asArray.length : 0; h < i; h++)
                        (d = e.manifest.Period_asArray[h]).hasOwnProperty(n.default.START) ? (f = new s.default).start = d.start : null !== u && u.hasOwnProperty(n.default.DURATION) && null !== c ? (f = new s.default).start = parseFloat((c.start + c.duration).toFixed(5)) : 0 !== h || o || ((f = new s.default).start = 0),
                        null !== c && isNaN(c.duration) && (null !== f ? c.duration = parseFloat((f.start - c.start).toFixed(5)) : t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),
                        null !== f && (f.id = O(d, h),
                        f.index = h,
                        f.mpd = e,
                        d.hasOwnProperty(n.default.DURATION) && (f.duration = d.duration),
                        l.push(f),
                        u = d,
                        c = f),
                        d = null,
                        f = null;
                    return 0 === l.length || null !== c && isNaN(c.duration) && (c.duration = parseFloat((function(e) {
                        !function() {
                            if (!a || !a.hasOwnProperty("error"))
                                throw new Error(r.default.MISSING_CONFIG_ERROR)
                        }();
                        var t = x(e.mpd.manifest)
                          , n = void 0;
                        e.mpd.manifest.mediaPresentationDuration ? n = e.mpd.manifest.mediaPresentationDuration : e.duration ? n = e.duration : t ? n = Number.POSITIVE_INFINITY : a.error(new y.default(_.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e));
                        return n
                    }(c) - c.start).toFixed(5))),
                    l
                },
                getMpd: function(e) {
                    var t = new l.default;
                    return e && (t.manifest = e,
                    e.hasOwnProperty(n.default.AVAILABILITY_START_TIME) ? t.availabilityStartTime = new Date(e.availabilityStartTime.getTime()) : e.loadedTime && (t.availabilityStartTime = new Date(e.loadedTime.getTime())),
                    e.hasOwnProperty(n.default.AVAILABILITY_END_TIME) && (t.availabilityEndTime = new Date(e.availabilityEndTime.getTime())),
                    e.hasOwnProperty(n.default.MINIMUM_UPDATE_PERIOD) && (t.minimumUpdatePeriod = e.minimumUpdatePeriod),
                    e.hasOwnProperty(n.default.MEDIA_PRESENTATION_DURATION) && (t.mediaPresentationDuration = e.mediaPresentationDuration),
                    e.hasOwnProperty(n.default.SUGGESTED_PRESENTATION_DELAY) && (t.suggestedPresentationDelay = e.suggestedPresentationDelay),
                    e.hasOwnProperty(n.default.TIMESHIFT_BUFFER_DEPTH) && (t.timeShiftBufferDepth = e.timeShiftBufferDepth),
                    e.hasOwnProperty(n.default.MAX_SEGMENT_DURATION) && (t.maxSegmentDuration = e.maxSegmentDuration)),
                    t
                },
                getEventsForPeriod: function(e) {
                    var t = e && e.mpd && e.mpd.manifest ? e.mpd.manifest : null
                      , a = t ? t.Period_asArray : null
                      , i = a && e && k(e.index) ? a[e.index].EventStream_asArray : null
                      , o = []
                      , s = void 0
                      , l = void 0;
                    if (i)
                        for (s = 0; s < i.length; s++) {
                            var u = new f.default;
                            if (u.period = e,
                            u.timescale = 1,
                            !i[s].hasOwnProperty(r.default.SCHEME_ID_URI))
                                throw new Error("Invalid EventStream. SchemeIdUri has to be set");
                            for (u.schemeIdUri = i[s].schemeIdUri,
                            i[s].hasOwnProperty(n.default.TIMESCALE) && (u.timescale = i[s].timescale),
                            i[s].hasOwnProperty(n.default.VALUE) && (u.value = i[s].value),
                            l = 0; i[s].Event_asArray && l < i[s].Event_asArray.length; l++) {
                                var c = new d.default;
                                if (c.presentationTime = 0,
                                c.eventStream = u,
                                i[s].Event_asArray[l].hasOwnProperty(n.default.PRESENTATION_TIME)) {
                                    c.presentationTime = i[s].Event_asArray[l].presentationTime;
                                    var h = u.presentationTimeOffset ? u.presentationTimeOffset * u.timescale : 0;
                                    c.calculatedPresentationTime = c.presentationTime + e.start * u.timescale + h
                                }
                                i[s].Event_asArray[l].hasOwnProperty(n.default.DURATION) && (c.duration = i[s].Event_asArray[l].duration),
                                i[s].Event_asArray[l].hasOwnProperty(n.default.ID) && (c.id = i[s].Event_asArray[l].id),
                                i[s].Event_asArray[l].Signal && i[s].Event_asArray[l].Signal.Binary ? c.messageData = g.decodeArray(i[s].Event_asArray[l].Signal.Binary.toString()) : c.messageData = i[s].Event_asArray[l].messageData || i[s].Event_asArray[l].__text,
                                o.push(c)
                            }
                        }
                    return o
                },
                getEventStreamForAdaptationSet: function(e, t) {
                    var a = void 0
                      , r = void 0
                      , n = void 0;
                    return e && e.Period_asArray && t && t.period && k(t.period.index) && (r = e.Period_asArray[t.period.index]) && r.AdaptationSet_asArray && k(t.index) && (n = r.AdaptationSet_asArray[t.index]) && (a = n.InbandEventStream_asArray),
                    N(a, null)
                },
                getEventStreamForRepresentation: function(e, t) {
                    var a = void 0
                      , r = void 0
                      , n = void 0
                      , i = void 0;
                    return e && e.Period_asArray && t && t.adaptation && t.adaptation.period && k(t.adaptation.period.index) && (r = e.Period_asArray[t.adaptation.period.index]) && r.AdaptationSet_asArray && k(t.adaptation.index) && (n = r.AdaptationSet_asArray[t.adaptation.index]) && n.Representation_asArray && k(t.index) && (i = n.Representation_asArray[t.index]) && (a = i.InbandEventStream_asArray),
                    N(a, t)
                },
                getUTCTimingSources: function(e) {
                    var t = x(e)
                      , a = !!e && e.hasOwnProperty(n.default.AVAILABILITY_START_TIME)
                      , i = e ? e.UTCTiming_asArray : null
                      , o = [];
                    return (t || a) && i && i.forEach((function(e) {
                        var t = new u.default;
                        e.hasOwnProperty(r.default.SCHEME_ID_URI) && (t.schemeIdUri = e.schemeIdUri,
                        e.hasOwnProperty(n.default.VALUE) && (t.value = e.value.toString(),
                        o.push(t)))
                    }
                    )),
                    o
                },
                getBaseURLsFromElement: L,
                getRepresentationSortFunction: w,
                getLocation: function(e) {
                    if (e && e.hasOwnProperty(r.default.LOCATION))
                        return e.Location = e.Location_asArray[0],
                        e.Location
                },
                getSuggestedPresentationDelay: function(e) {
                    return e && e.hasOwnProperty(n.default.SUGGESTED_PRESENTATION_DELAY) ? e.suggestedPresentationDelay : null
                },
                getAvailabilityStartTime: function(e) {
                    return e && e.hasOwnProperty(n.default.AVAILABILITY_START_TIME) && null !== e.availabilityStartTime ? e.availabilityStartTime.getTime() : null
                },
                getServiceDescriptions: function(e) {
                    var t = [];
                    if (e && e.hasOwnProperty(n.default.SERVICE_DESCRIPTION)) {
                        var a = !0
                          , i = !1
                          , o = void 0;
                        try {
                            for (var s, l = e.ServiceDescription_asArray[Symbol.iterator](); !(a = (s = l.next()).done); a = !0) {
                                var u = s.value
                                  , d = void 0
                                  , c = void 0
                                  , f = void 0
                                  , h = void 0;
                                for (var p in u)
                                    u.hasOwnProperty(p) && (p === n.default.ID ? d = u[p] : p === n.default.SERVICE_DESCRIPTION_SCOPE ? c = u[p].schemeIdUri : p === n.default.SERVICE_DESCRIPTION_LATENCY ? f = {
                                        target: u[p].target,
                                        max: u[p].max,
                                        min: u[p].min
                                    } : p === n.default.SERVICE_DESCRIPTION_PLAYBACK_RATE && (h = {
                                        max: u[p].max,
                                        min: u[p].min
                                    }));
                                c === r.default.SERVICE_DESCRIPTION_LL_SCHEME && (f || h) && t.push({
                                    id: d,
                                    schemeIdUri: c,
                                    latency: f,
                                    playbackRate: h
                                })
                            }
                        } catch (e) {
                            i = !0,
                            o = e
                        } finally {
                            try {
                                !a && l.return && l.return()
                            } finally {
                                if (i)
                                    throw o
                            }
                        }
                    }
                    return t
                },
                getSupplementalPropperties: function(e) {
                    var t = {};
                    if (e && e.hasOwnProperty(n.default.SUPPLEMENTAL_PROPERTY)) {
                        var a = !0
                          , i = !1
                          , o = void 0;
                        try {
                            for (var s, l = e.SupplementalProperty_asArray[Symbol.iterator](); !(a = (s = l.next()).done); a = !0) {
                                var u = s.value;
                                u.hasOwnProperty(r.default.SCHEME_ID_URI) && u.hasOwnProperty(n.default.VALUE) && (t[u[r.default.SCHEME_ID_URI]] = u[n.default.VALUE])
                            }
                        } catch (e) {
                            i = !0,
                            o = e
                        } finally {
                            try {
                                !a && l.return && l.return()
                            } finally {
                                if (i)
                                    throw o
                            }
                        }
                    }
                    return t
                },
                setConfig: function(e) {
                    e && (e.errHandler && (a = e.errHandler),
                    e.BASE64 && (g = e.BASE64))
                }
            },
            t = (0,
            m.default)(b).getInstance().getLogger(e),
            e
        }
        E.__dashjs_factory_name = "DashManifestModel",
        t.default = g.default.getSingletonFactory(E)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.getVersionString = function() {
            return "3.1.3"
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e(t, a, r, n, i) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.initDataTypes = ["cenc"],
            t && t.length && (this.audioCapabilities = t),
            a && a.length && (this.videoCapabilities = a),
            this.distinctiveIdentifier = r,
            this.persistentState = n,
            this.sessionTypes = i
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e(t, a) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.keyID = t,
            this.key = a
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e(t, a) {
                if (function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                a && "persistent" !== a && "temporary" !== a)
                    throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");
                this.keyPairs = t,
                this.type = a
            }
            return r(e, [{
                key: "toJWK",
                value: function() {
                    var e = void 0
                      , t = this.keyPairs.length
                      , a = {
                        keys: []
                    };
                    for (e = 0; e < t; e++) {
                        var r = {
                            kty: "oct",
                            alg: "A128KW",
                            kid: this.keyPairs[e].keyID,
                            k: this.keyPairs[e].key
                        };
                        a.keys.push(r)
                    }
                    this.type && (a.type = this.type);
                    var n = JSON.stringify(a)
                      , i = n.length
                      , o = new ArrayBuffer(i)
                      , s = new Uint8Array(o);
                    for (e = 0; e < i; e++)
                        s[e] = n.charCodeAt(e);
                    return o
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e(t, a) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.initData = t,
            this.initDataType = a
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e(t, a, r, n) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.sessionToken = t,
            this.message = a,
            this.defaultURL = r,
            this.messageType = n || "license-request"
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e(t, a) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.keySystem = t,
            this.ksConfiguration = a
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(163);
        var i = new (function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return e.MSS_NO_TFRF_CODE = 200,
                e.MSS_UNSUPPORTED_CODEC_CODE = 201,
                e.MSS_NO_TFRF_MESSAGE = "Missing tfrf in live media segment",
                e.MSS_UNSUPPORTED_CODEC_MESSAGE = "Unsupported codec",
                e
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default));
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        var r = a(6)
          , n = a(15)
          , i = a(236)
          , o = a(26)
          , s = a(103)
          , l = a(7)
          , u = a(61)
          , d = a(35)
          , c = a(14)
          , f = a(237)
          , h = a(431)
          , p = a(84)
          , g = a(85)
          , m = a(64).f
          , y = a(18).f
          , _ = a(238)
          , v = a(48)
          , b = a(34)
          , E = b.get
          , k = b.set
          , T = r.ArrayBuffer
          , S = T
          , A = r.DataView
          , C = A && A.prototype
          , I = Object.prototype
          , P = r.RangeError
          , w = h.pack
          , M = h.unpack
          , R = function(e) {
            return [255 & e]
        }
          , x = function(e) {
            return [255 & e, e >> 8 & 255]
        }
          , D = function(e) {
            return [255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255]
        }
          , O = function(e) {
            return e[3] << 24 | e[2] << 16 | e[1] << 8 | e[0]
        }
          , N = function(e) {
            return w(e, 23, 4)
        }
          , L = function(e) {
            return w(e, 52, 8)
        }
          , U = function(e, t) {
            y(e.prototype, t, {
                get: function() {
                    return E(this)[t]
                }
            })
        }
          , F = function(e, t, a, r) {
            var n = f(a)
              , i = E(e);
            if (n + t > i.byteLength)
                throw P("Wrong index");
            var o = E(i.buffer).bytes
              , s = n + i.byteOffset
              , l = o.slice(s, s + t);
            return r ? l : l.reverse()
        }
          , B = function(e, t, a, r, n, i) {
            var o = f(a)
              , s = E(e);
            if (o + t > s.byteLength)
                throw P("Wrong index");
            for (var l = E(s.buffer).bytes, u = o + s.byteOffset, d = r(+n), c = 0; c < t; c++)
                l[u + c] = d[i ? c : t - c - 1]
        };
        if (i) {
            if (!l((function() {
                T(1)
            }
            )) || !l((function() {
                new T(-1)
            }
            )) || l((function() {
                return new T,
                new T(1.5),
                new T(NaN),
                "ArrayBuffer" != T.name
            }
            ))) {
                for (var j, G = (S = function(e) {
                    return u(this, S),
                    new T(f(e))
                }
                ).prototype = T.prototype, V = m(T), K = 0; V.length > K; )
                    (j = V[K++])in S || o(S, j, T[j]);
                G.constructor = S
            }
            g && p(C) !== I && g(C, I);
            var $ = new A(new S(2))
              , q = C.setInt8;
            $.setInt8(0, 2147483648),
            $.setInt8(1, 2147483649),
            !$.getInt8(0) && $.getInt8(1) || s(C, {
                setInt8: function(e, t) {
                    q.call(this, e, t << 24 >> 24)
                },
                setUint8: function(e, t) {
                    q.call(this, e, t << 24 >> 24)
                }
            }, {
                unsafe: !0
            })
        } else
            S = function(e) {
                u(this, S, "ArrayBuffer");
                var t = f(e);
                k(this, {
                    bytes: _.call(new Array(t), 0),
                    byteLength: t
                }),
                n || (this.byteLength = t)
            }
            ,
            A = function(e, t, a) {
                u(this, A, "DataView"),
                u(e, S, "DataView");
                var r = E(e).byteLength
                  , i = d(t);
                if (i < 0 || i > r)
                    throw P("Wrong offset");
                if (i + (a = void 0 === a ? r - i : c(a)) > r)
                    throw P("Wrong length");
                k(this, {
                    buffer: e,
                    byteLength: a,
                    byteOffset: i
                }),
                n || (this.buffer = e,
                this.byteLength = a,
                this.byteOffset = i)
            }
            ,
            n && (U(S, "byteLength"),
            U(A, "buffer"),
            U(A, "byteLength"),
            U(A, "byteOffset")),
            s(A.prototype, {
                getInt8: function(e) {
                    return F(this, 1, e)[0] << 24 >> 24
                },
                getUint8: function(e) {
                    return F(this, 1, e)[0]
                },
                getInt16: function(e) {
                    var t = F(this, 2, e, arguments.length > 1 ? arguments[1] : void 0);
                    return (t[1] << 8 | t[0]) << 16 >> 16
                },
                getUint16: function(e) {
                    var t = F(this, 2, e, arguments.length > 1 ? arguments[1] : void 0);
                    return t[1] << 8 | t[0]
                },
                getInt32: function(e) {
                    return O(F(this, 4, e, arguments.length > 1 ? arguments[1] : void 0))
                },
                getUint32: function(e) {
                    return O(F(this, 4, e, arguments.length > 1 ? arguments[1] : void 0)) >>> 0
                },
                getFloat32: function(e) {
                    return M(F(this, 4, e, arguments.length > 1 ? arguments[1] : void 0), 23)
                },
                getFloat64: function(e) {
                    return M(F(this, 8, e, arguments.length > 1 ? arguments[1] : void 0), 52)
                },
                setInt8: function(e, t) {
                    B(this, 1, e, R, t)
                },
                setUint8: function(e, t) {
                    B(this, 1, e, R, t)
                },
                setInt16: function(e, t) {
                    B(this, 2, e, x, t, arguments.length > 2 ? arguments[2] : void 0)
                },
                setUint16: function(e, t) {
                    B(this, 2, e, x, t, arguments.length > 2 ? arguments[2] : void 0)
                },
                setInt32: function(e, t) {
                    B(this, 4, e, D, t, arguments.length > 2 ? arguments[2] : void 0)
                },
                setUint32: function(e, t) {
                    B(this, 4, e, D, t, arguments.length > 2 ? arguments[2] : void 0)
                },
                setFloat32: function(e, t) {
                    B(this, 4, e, N, t, arguments.length > 2 ? arguments[2] : void 0)
                },
                setFloat64: function(e, t) {
                    B(this, 8, e, L, t, arguments.length > 2 ? arguments[2] : void 0)
                }
            });
        v(S, "ArrayBuffer"),
        v(A, "DataView"),
        e.exports = {
            ArrayBuffer: S,
            DataView: A
        }
    }
    , function(e, t, a) {
        var r = a(15)
          , n = a(7)
          , i = a(141);
        e.exports = !r && !n((function() {
            return 7 != Object.defineProperty(i("div"), "a", {
                get: function() {
                    return 7
                }
            }).a
        }
        ))
    }
    , function(e, t, a) {
        var r = a(16)
          , n = a(182)
          , i = a(41)
          , o = a(18);
        e.exports = function(e, t) {
            for (var a = n(t), s = o.f, l = i.f, u = 0; u < a.length; u++) {
                var d = a[u];
                r(e, d) || s(e, d, l(t, d))
            }
        }
    }
    , function(e, t, a) {
        var r = a(46)
          , n = a(64)
          , i = a(147)
          , o = a(17);
        e.exports = r("Reflect", "ownKeys") || function(e) {
            var t = n.f(o(e))
              , a = i.f;
            return a ? t.concat(a(e)) : t
        }
    }
    , function(e, t, a) {
        var r = a(6);
        e.exports = r
    }
    , function(e, t, a) {
        var r = a(16)
          , n = a(33)
          , i = a(78).indexOf
          , o = a(77);
        e.exports = function(e, t) {
            var a, s = n(e), l = 0, u = [];
            for (a in s)
                !r(o, a) && r(s, a) && u.push(a);
            for (; t.length > l; )
                r(s, a = t[l++]) && (~i(u, a) || u.push(a));
            return u
        }
    }
    , function(e, t, a) {
        var r = a(148);
        e.exports = r && !Symbol.sham && "symbol" == typeof Symbol.iterator
    }
    , function(e, t, a) {
        var r = a(15)
          , n = a(18)
          , i = a(17)
          , o = a(96);
        e.exports = r ? Object.defineProperties : function(e, t) {
            i(e);
            for (var a, r = o(t), s = r.length, l = 0; s > l; )
                n.f(e, a = r[l++], t[a]);
            return e
        }
    }
    , function(e, t, a) {
        var r = a(46);
        e.exports = r("document", "documentElement")
    }
    , function(e, t, a) {
        var r = a(11);
        t.f = r
    }
    , function(e, t, a) {
        var r = a(183)
          , n = a(16)
          , i = a(188)
          , o = a(18).f;
        e.exports = function(e) {
            var t = r.Symbol || (r.Symbol = {});
            n(t, e) || o(t, e, {
                value: i.f(e)
            })
        }
    }
    , function(e, t, a) {
        var r = a(13)
          , n = a(95)
          , i = a(11)("species");
        e.exports = function(e, t) {
            var a;
            return n(e) && ("function" != typeof (a = e.constructor) || a !== Array && !n(a.prototype) ? r(a) && null === (a = a[i]) && (a = void 0) : a = void 0),
            new (void 0 === a ? Array : a)(0 === t ? 0 : t)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(23).forEach
          , n = a(80)
          , i = a(38)
          , o = n("forEach")
          , s = i("forEach");
        e.exports = o && s ? [].forEach : function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(59)
          , n = a(22)
          , i = a(248)
          , o = a(150)
          , s = a(14)
          , l = a(97)
          , u = a(82);
        e.exports = function(e) {
            var t, a, d, c, f, h, p = n(e), g = "function" == typeof this ? this : Array, m = arguments.length, y = m > 1 ? arguments[1] : void 0, _ = void 0 !== y, v = u(p), b = 0;
            if (_ && (y = r(y, m > 2 ? arguments[2] : void 0, 2)),
            null == v || g == Array && o(v))
                for (a = new g(t = s(p.length)); t > b; b++)
                    h = _ ? y(p[b], b) : p[b],
                    l(a, b, h);
            else
                for (f = (c = v.call(p)).next,
                a = new g; !(d = f.call(c)).done; b++)
                    h = _ ? i(c, y, [d.value, b], !0) : d.value,
                    l(a, b, h);
            return a.length = b,
            a
        }
    }
    , function(e, t, a) {
        var r = a(17);
        e.exports = function(e) {
            var t = e.return;
            if (void 0 !== t)
                return r(t.call(e)).value
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(195).IteratorPrototype
          , n = a(47)
          , i = a(57)
          , o = a(48)
          , s = a(81)
          , l = function() {
            return this
        };
        e.exports = function(e, t, a) {
            var u = t + " Iterator";
            return e.prototype = n(r, {
                next: i(1, a)
            }),
            o(e, u, !1, !0),
            s[u] = l,
            e
        }
    }
    , function(e, t, a) {
        "use strict";
        var r, n, i, o = a(84), s = a(26), l = a(16), u = a(11), d = a(58), c = u("iterator"), f = !1;
        [].keys && ("next"in (i = [].keys()) ? (n = o(o(i))) !== Object.prototype && (r = n) : f = !0),
        null == r && (r = {}),
        d || l(r, c) || s(r, c, (function() {
            return this
        }
        )),
        e.exports = {
            IteratorPrototype: r,
            BUGGY_SAFARI_ITERATORS: f
        }
    }
    , function(e, t, a) {
        var r = a(7);
        e.exports = !r((function() {
            function e() {}
            return e.prototype.constructor = null,
            Object.getPrototypeOf(new e) !== e.prototype
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(6)
          , i = a(94)
          , o = a(27)
          , s = a(198)
          , l = a(154)
          , u = a(61)
          , d = a(13)
          , c = a(7)
          , f = a(101)
          , h = a(48)
          , p = a(155);
        e.exports = function(e, t, a) {
            var g = -1 !== e.indexOf("Map")
              , m = -1 !== e.indexOf("Weak")
              , y = g ? "set" : "add"
              , _ = n[e]
              , v = _ && _.prototype
              , b = _
              , E = {}
              , k = function(e) {
                var t = v[e];
                o(v, e, "add" == e ? function(e) {
                    return t.call(this, 0 === e ? 0 : e),
                    this
                }
                : "delete" == e ? function(e) {
                    return !(m && !d(e)) && t.call(this, 0 === e ? 0 : e)
                }
                : "get" == e ? function(e) {
                    return m && !d(e) ? void 0 : t.call(this, 0 === e ? 0 : e)
                }
                : "has" == e ? function(e) {
                    return !(m && !d(e)) && t.call(this, 0 === e ? 0 : e)
                }
                : function(e, a) {
                    return t.call(this, 0 === e ? 0 : e, a),
                    this
                }
                )
            };
            if (i(e, "function" != typeof _ || !(m || v.forEach && !c((function() {
                (new _).entries().next()
            }
            )))))
                b = a.getConstructor(t, e, g, y),
                s.REQUIRED = !0;
            else if (i(e, !0)) {
                var T = new b
                  , S = T[y](m ? {} : -0, 1) != T
                  , A = c((function() {
                    T.has(1)
                }
                ))
                  , C = f((function(e) {
                    new _(e)
                }
                ))
                  , I = !m && c((function() {
                    for (var e = new _, t = 5; t--; )
                        e[y](t, t);
                    return !e.has(-0)
                }
                ));
                C || ((b = t((function(t, a) {
                    u(t, b, e);
                    var r = p(new _, t, b);
                    return null != a && l(a, r[y], {
                        that: r,
                        AS_ENTRIES: g
                    }),
                    r
                }
                ))).prototype = v,
                v.constructor = b),
                (A || I) && (k("delete"),
                k("has"),
                g && k("get")),
                (I || S) && k(y),
                m && v.clear && delete v.clear
            }
            return E[e] = b,
            r({
                global: !0,
                forced: b != _
            }, E),
            h(b, e),
            m || a.setStrong(b, e, g),
            b
        }
    }
    , function(e, t, a) {
        var r = a(77)
          , n = a(13)
          , i = a(16)
          , o = a(18).f
          , s = a(76)
          , l = a(251)
          , u = s("meta")
          , d = 0
          , c = Object.isExtensible || function() {
            return !0
        }
          , f = function(e) {
            o(e, u, {
                value: {
                    objectID: "O" + ++d,
                    weakData: {}
                }
            })
        }
          , h = e.exports = {
            REQUIRED: !1,
            fastKey: function(e, t) {
                if (!n(e))
                    return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
                if (!i(e, u)) {
                    if (!c(e))
                        return "F";
                    if (!t)
                        return "E";
                    f(e)
                }
                return e[u].objectID
            },
            getWeakData: function(e, t) {
                if (!i(e, u)) {
                    if (!c(e))
                        return !0;
                    if (!t)
                        return !1;
                    f(e)
                }
                return e[u].weakData
            },
            onFreeze: function(e) {
                return l && h.REQUIRED && c(e) && !i(e, u) && f(e),
                e
            }
        };
        r[u] = !0
    }
    , function(e, t, a) {
        "use strict";
        var r = a(18).f
          , n = a(47)
          , i = a(103)
          , o = a(59)
          , s = a(61)
          , l = a(154)
          , u = a(153)
          , d = a(104)
          , c = a(15)
          , f = a(198).fastKey
          , h = a(34)
          , p = h.set
          , g = h.getterFor;
        e.exports = {
            getConstructor: function(e, t, a, u) {
                var d = e((function(e, r) {
                    s(e, d, t),
                    p(e, {
                        type: t,
                        index: n(null),
                        first: void 0,
                        last: void 0,
                        size: 0
                    }),
                    c || (e.size = 0),
                    null != r && l(r, e[u], {
                        that: e,
                        AS_ENTRIES: a
                    })
                }
                ))
                  , h = g(t)
                  , m = function(e, t, a) {
                    var r, n, i = h(e), o = y(e, t);
                    return o ? o.value = a : (i.last = o = {
                        index: n = f(t, !0),
                        key: t,
                        value: a,
                        previous: r = i.last,
                        next: void 0,
                        removed: !1
                    },
                    i.first || (i.first = o),
                    r && (r.next = o),
                    c ? i.size++ : e.size++,
                    "F" !== n && (i.index[n] = o)),
                    e
                }
                  , y = function(e, t) {
                    var a, r = h(e), n = f(t);
                    if ("F" !== n)
                        return r.index[n];
                    for (a = r.first; a; a = a.next)
                        if (a.key == t)
                            return a
                };
                return i(d.prototype, {
                    clear: function() {
                        for (var e = h(this), t = e.index, a = e.first; a; )
                            a.removed = !0,
                            a.previous && (a.previous = a.previous.next = void 0),
                            delete t[a.index],
                            a = a.next;
                        e.first = e.last = void 0,
                        c ? e.size = 0 : this.size = 0
                    },
                    delete: function(e) {
                        var t = h(this)
                          , a = y(this, e);
                        if (a) {
                            var r = a.next
                              , n = a.previous;
                            delete t.index[a.index],
                            a.removed = !0,
                            n && (n.next = r),
                            r && (r.previous = n),
                            t.first == a && (t.first = r),
                            t.last == a && (t.last = n),
                            c ? t.size-- : this.size--
                        }
                        return !!a
                    },
                    forEach: function(e) {
                        for (var t, a = h(this), r = o(e, arguments.length > 1 ? arguments[1] : void 0, 3); t = t ? t.next : a.first; )
                            for (r(t.value, t.key, this); t && t.removed; )
                                t = t.previous
                    },
                    has: function(e) {
                        return !!y(this, e)
                    }
                }),
                i(d.prototype, a ? {
                    get: function(e) {
                        var t = y(this, e);
                        return t && t.value
                    },
                    set: function(e, t) {
                        return m(this, 0 === e ? 0 : e, t)
                    }
                } : {
                    add: function(e) {
                        return m(this, e = 0 === e ? 0 : e, e)
                    }
                }),
                c && r(d.prototype, "size", {
                    get: function() {
                        return h(this).size
                    }
                }),
                d
            },
            setStrong: function(e, t, a) {
                var r = t + " Iterator"
                  , n = g(t)
                  , i = g(r);
                u(e, t, (function(e, t) {
                    p(this, {
                        type: r,
                        target: e,
                        state: n(e),
                        kind: t,
                        last: void 0
                    })
                }
                ), (function() {
                    for (var e = i(this), t = e.kind, a = e.last; a && a.removed; )
                        a = a.previous;
                    return e.target && (e.last = a = a ? a.next : e.state.first) ? "keys" == t ? {
                        value: a.key,
                        done: !1
                    } : "values" == t ? {
                        value: a.value,
                        done: !1
                    } : {
                        value: [a.key, a.value],
                        done: !1
                    } : (e.target = void 0,
                    {
                        value: void 0,
                        done: !0
                    })
                }
                ), a ? "entries" : "values", !a, !0),
                d(t)
            }
        }
    }
    , function(e, t, a) {
        var r, n, i, o = a(6), s = a(7), l = a(59), u = a(187), d = a(141), c = a(201), f = a(105), h = o.location, p = o.setImmediate, g = o.clearImmediate, m = o.process, y = o.MessageChannel, _ = o.Dispatch, v = 0, b = {}, E = function(e) {
            if (b.hasOwnProperty(e)) {
                var t = b[e];
                delete b[e],
                t()
            }
        }, k = function(e) {
            return function() {
                E(e)
            }
        }, T = function(e) {
            E(e.data)
        }, S = function(e) {
            o.postMessage(e + "", h.protocol + "//" + h.host)
        };
        p && g || (p = function(e) {
            for (var t = [], a = 1; arguments.length > a; )
                t.push(arguments[a++]);
            return b[++v] = function() {
                ("function" == typeof e ? e : Function(e)).apply(void 0, t)
            }
            ,
            r(v),
            v
        }
        ,
        g = function(e) {
            delete b[e]
        }
        ,
        f ? r = function(e) {
            m.nextTick(k(e))
        }
        : _ && _.now ? r = function(e) {
            _.now(k(e))
        }
        : y && !c ? (i = (n = new y).port2,
        n.port1.onmessage = T,
        r = l(i.postMessage, i, 1)) : o.addEventListener && "function" == typeof postMessage && !o.importScripts && h && "file:" !== h.protocol && !s(S) ? (r = S,
        o.addEventListener("message", T, !1)) : r = "onreadystatechange"in d("script") ? function(e) {
            u.appendChild(d("script")).onreadystatechange = function() {
                u.removeChild(this),
                E(e)
            }
        }
        : function(e) {
            setTimeout(k(e), 0)
        }
        ),
        e.exports = {
            set: p,
            clear: g
        }
    }
    , function(e, t, a) {
        var r = a(149);
        e.exports = /(iphone|ipod|ipad).*applewebkit/i.test(r)
    }
    , function(e, t, a) {
        "use strict";
        var r = a(60)
          , n = function(e) {
            var t, a;
            this.promise = new e((function(e, r) {
                if (void 0 !== t || void 0 !== a)
                    throw TypeError("Bad Promise constructor");
                t = e,
                a = r
            }
            )),
            this.resolve = r(t),
            this.reject = r(a)
        };
        e.exports.f = function(e) {
            return new n(e)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(17);
        e.exports = function() {
            var e = r(this)
              , t = "";
            return e.global && (t += "g"),
            e.ignoreCase && (t += "i"),
            e.multiline && (t += "m"),
            e.dotAll && (t += "s"),
            e.unicode && (t += "u"),
            e.sticky && (t += "y"),
            t
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(197)
          , n = a(199);
        e.exports = r("Set", (function(e) {
            return function() {
                return e(this, arguments.length ? arguments[0] : void 0)
            }
        }
        ), n)
    }
    , function(e, t) {
        e.exports = {
            CSSRuleList: 0,
            CSSStyleDeclaration: 0,
            CSSValueList: 0,
            ClientRectList: 0,
            DOMRectList: 0,
            DOMStringList: 0,
            DOMTokenList: 1,
            DataTransferItemList: 0,
            FileList: 0,
            HTMLAllCollection: 0,
            HTMLCollection: 0,
            HTMLFormElement: 0,
            HTMLSelectElement: 0,
            MediaList: 0,
            MimeTypeArray: 0,
            NamedNodeMap: 0,
            NodeList: 1,
            PaintRequestList: 0,
            Plugin: 0,
            PluginArray: 0,
            SVGLengthList: 0,
            SVGNumberList: 0,
            SVGPathSegList: 0,
            SVGPointList: 0,
            SVGStringList: 0,
            SVGTransformList: 0,
            SourceBufferList: 0,
            StyleSheetList: 0,
            TextTrackCueList: 0,
            TextTrackList: 0,
            TouchList: 0
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(15)
          , n = a(6)
          , i = a(94)
          , o = a(27)
          , s = a(16)
          , l = a(45)
          , u = a(155)
          , d = a(63)
          , c = a(7)
          , f = a(47)
          , h = a(64).f
          , p = a(41).f
          , g = a(18).f
          , m = a(260).trim
          , y = n.Number
          , _ = y.prototype
          , v = "Number" == l(f(_))
          , b = function(e) {
            var t, a, r, n, i, o, s, l, u = d(e, !1);
            if ("string" == typeof u && u.length > 2)
                if (43 === (t = (u = m(u)).charCodeAt(0)) || 45 === t) {
                    if (88 === (a = u.charCodeAt(2)) || 120 === a)
                        return NaN
                } else if (48 === t) {
                    switch (u.charCodeAt(1)) {
                    case 66:
                    case 98:
                        r = 2,
                        n = 49;
                        break;
                    case 79:
                    case 111:
                        r = 8,
                        n = 55;
                        break;
                    default:
                        return +u
                    }
                    for (o = (i = u.slice(2)).length,
                    s = 0; s < o; s++)
                        if ((l = i.charCodeAt(s)) < 48 || l > n)
                            return NaN;
                    return parseInt(i, r)
                }
            return +u
        };
        if (i("Number", !y(" 0o1") || !y("0b1") || y("+0x1"))) {
            for (var E, k = function(e) {
                var t = arguments.length < 1 ? 0 : e
                  , a = this;
                return a instanceof k && (v ? c((function() {
                    _.valueOf.call(a)
                }
                )) : "Number" != l(a)) ? u(new y(b(t)), a, k) : b(t)
            }, T = r ? h(y) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), S = 0; T.length > S; S++)
                s(y, E = T[S]) && !s(k, E) && g(k, E, p(y, E));
            k.prototype = _,
            _.constructor = k,
            o(n, "Number", k)
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = H(a(208))
          , n = H(a(1))
          , i = H(a(19))
          , o = H(a(25))
          , s = H(a(265))
          , l = H(a(267))
          , u = H(a(328))
          , d = H(a(164))
          , c = H(a(329))
          , f = H(a(335))
          , h = H(a(347))
          , p = H(a(348))
          , g = H(a(161))
          , m = H(a(166))
          , y = H(a(159))
          , _ = H(a(349))
          , v = H(a(351))
          , b = H(a(352))
          , E = H(a(213))
          , k = H(a(218))
          , T = H(a(353))
          , S = H(a(219))
          , A = H(a(354))
          , C = H(a(3))
          , I = H(a(21))
          , P = H(a(2))
          , w = H(a(4))
          , M = H(a(110))
          , R = H(a(0))
          , x = H(a(111))
          , D = a(171)
          , O = H(a(355))
          , N = H(a(359))
          , L = H(a(364))
          , U = H(a(376))
          , F = a(20)
          , B = H(a(377))
          , j = H(a(160))
          , G = H(a(12))
          , V = a(56)
          , K = H(a(225))
          , $ = H(a(39))
          , q = H(a(88));
        function H(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function W() {
            var e = "You must first call initialize() and set a source before calling this method"
              , t = "You must first call initialize() and set a valid source and view before calling this method"
              , a = "You must first call attachView() to set the video element before calling this method"
              , H = "You must first call attachSource() with a valid source before calling this method"
              , W = this.context
              , Y = (0,
            P.default)(W).getInstance()
              , z = (0,
            x.default)(W).getInstance()
              , X = (0,
            C.default)(W).getInstance({
                settings: z
            })
              , Q = void 0
              , J = void 0
              , Z = void 0
              , ee = void 0
              , te = void 0
              , ae = void 0
              , re = void 0
              , ne = void 0
              , ie = void 0
              , oe = void 0
              , se = void 0
              , le = void 0
              , ue = void 0
              , de = void 0
              , ce = void 0
              , fe = void 0
              , he = void 0
              , pe = void 0
              , ge = void 0
              , me = void 0
              , ye = void 0
              , _e = void 0
              , ve = void 0
              , be = void 0
              , Ee = void 0
              , ke = void 0
              , Te = void 0
              , Se = void 0
              , Ae = void 0
              , Ce = void 0
              , Ie = void 0
              , Pe = void 0;
            function we() {
                return !!Z && !!Se.getElement()
            }
            function Me() {
                return (0,
                D.getVersionString)()
            }
            function Re() {
                if (!re)
                    throw t;
                return be.isPaused()
            }
            function xe(e) {
                var t = Ee.getCurrentDVRInfo();
                if (!t)
                    return 0;
                var a = be.getLiveDelay()
                  , r = t.range.start + e;
                return r > t.range.end - a && (r = t.range.end - a),
                r
            }
            function De(e) {
                if (!re)
                    throw t;
                var a = Fe().currentTime;
                if (void 0 !== e)
                    a = _e.getTimeRelativeToStreamId(a, e);
                else if (be.getIsDynamic()) {
                    var r = Ee.getCurrentDVRInfo();
                    a = null === r ? 0 : Oe() - (r.range.end - r.time)
                }
                return a
            }
            function Oe() {
                if (!re)
                    throw t;
                var e = Fe().duration;
                if (be.getIsDynamic()) {
                    var a, r = Ee.getCurrentDVRInfo();
                    if (!r)
                        return 0;
                    e = (a = r.range.end - r.range.start) < r.manifestInfo.DVRWindowSize ? a : r.manifestInfo.DVRWindowSize
                }
                return e
            }
            function Ne(e) {
                (0,
                V.checkParameterType)(e, "boolean"),
                ne = e
            }
            function Le() {
                pe.restoreDefaultUTCTimingSources()
            }
            function Ue() {
                return Ee
            }
            function Fe() {
                if (!Se.getElement())
                    throw a;
                return Se.getElement()
            }
            function Be(e) {
                if (!te)
                    throw "MediaPlayer not initialized!";
                Se.setElement(e),
                e && (qe(),
                function() {
                    if (de)
                        return;
                    var e = dashjs.MetricsReporting;
                    if ("function" == typeof e) {
                        var t = e(W).create();
                        de = t.createMetricsReporting({
                            debug: X,
                            eventBus: Y,
                            mediaElement: Fe(),
                            adapter: he,
                            dashMetrics: Ee,
                            events: w.default,
                            constants: n.default,
                            metricsConstants: o.default
                        })
                    }
                }(),
                function() {
                    if (ce)
                        return;
                    var e = dashjs.MssHandler;
                    "function" == typeof e && (I.default.extend(e.errors),
                    ce = e(W).create({
                        eventBus: Y,
                        mediaPlayerModel: pe,
                        dashMetrics: Ee,
                        manifestModel: ke,
                        playbackController: be,
                        streamController: _e,
                        protectionController: ue,
                        baseURLController: me,
                        errHandler: ge,
                        events: w.default,
                        constants: n.default,
                        debug: X,
                        initSegmentType: F.HTTPRequest.INIT_SEGMENT_TYPE,
                        BASE64: B.default,
                        ISOBoxer: j.default,
                        settings: z
                    }))
                }(),
                _e && _e.switchToVideoElement()),
                re && Ke(),
                Ye()
            }
            function je(t) {
                if (!ae)
                    throw e;
                var a = _e.getActiveStreamInfo();
                return le.getTracksFor(t, a)
            }
            function Ge(e) {
                if (!te)
                    throw "MediaPlayer not initialized!";
                "string" == typeof e && Ce.initialize(e),
                Z = e,
                (ae || re) && Ke(),
                we() && Ye()
            }
            function Ve() {
                if (!ae)
                    throw e;
                var t = _e.getActiveStreamInfo();
                return t ? _e.getStreamById(t.id) : null
            }
            function Ke() {
                re = !1,
                ae = !1,
                he.reset(),
                _e.reset(),
                ve.reset(),
                be.reset(),
                ie.reset(),
                le.reset(),
                Ae.reset(),
                ue && (z.get().streaming.keepProtectionMediaKeys ? ue.stop() : (ue.reset(),
                ue = null,
                qe())),
                Te.reset()
            }
            function $e() {
                return (0,
                f.default)(W).create({
                    debug: X,
                    errHandler: ge,
                    dashMetrics: Ee,
                    mediaPlayerModel: pe,
                    requestModifier: (0,
                    m.default)(W).getInstance(),
                    mssHandler: ce,
                    settings: z
                })
            }
            function qe() {
                if (ue)
                    return ue;
                var e = dashjs.Protection;
                if ("function" == typeof e) {
                    var t = e(W).create();
                    return w.default.extend(e.events),
                    M.default.extend(e.events, {
                        publicOnly: !0
                    }),
                    I.default.extend(e.errors),
                    ye || (ye = (0,
                    p.default)(W).getInstance()),
                    ue = t.createProtectionSystem({
                        debug: X,
                        errHandler: ge,
                        videoModel: Se,
                        capabilities: ye,
                        eventBus: Y,
                        events: w.default,
                        BASE64: B.default,
                        constants: n.default
                    })
                }
                return null
            }
            function He() {
                if (!te)
                    throw "MediaPlayer not initialized!";
                if (fe)
                    return fe;
                var e = dashjs.OfflineController;
                if ("function" == typeof e) {
                    w.default.extend(e.events),
                    M.default.extend(e.events, {
                        publicOnly: !0
                    }),
                    I.default.extend(e.errors);
                    var t = $e()
                      , a = (0,
                    K.default)(W).create();
                    return a.setConfig({
                        manifestModel: ke,
                        adapter: he,
                        manifestLoader: t,
                        errHandler: ge
                    }),
                    fe = e(W).create({
                        debug: X,
                        manifestUpdater: a,
                        baseURLController: me,
                        manifestLoader: t,
                        manifestModel: ke,
                        mediaPlayerModel: pe,
                        abrController: ie,
                        playbackController: be,
                        adapter: he,
                        errHandler: ge,
                        dashMetrics: Ee,
                        timelineConverter: se,
                        schemeLoaderFactory: oe,
                        eventBus: Y,
                        events: w.default,
                        errors: I.default,
                        constants: n.default,
                        settings: z,
                        dashConstants: i.default,
                        urlUtils: (0,
                        $.default)(W).getInstance()
                    })
                }
                return null
            }
            function We(e) {
                var t = Ee.getCurrentDVRInfo();
                return t ? e + (t.manifestInfo.availableFrom.getTime() / 1e3 + t.range.start) : 0
            }
            function Ye() {
                var e;
                fe && fe.resetRecords(),
                !ae && Z && (ae = !0,
                J.info("Streaming Initialized"),
                e = $e(),
                _e || (_e = (0,
                l.default)(W).getInstance()),
                le.setConfig({
                    domStorage: Ie
                }),
                _e.setConfig({
                    capabilities: ye,
                    manifestLoader: e,
                    manifestModel: ke,
                    mediaPlayerModel: pe,
                    protectionController: ue,
                    adapter: he,
                    dashMetrics: Ee,
                    errHandler: ge,
                    timelineConverter: se,
                    videoModel: Se,
                    playbackController: be,
                    abrController: ie,
                    mediaController: le,
                    textController: Ae,
                    settings: z,
                    baseURLController: me
                }),
                ve.setConfig({
                    settings: z,
                    playbackController: be,
                    streamController: _e,
                    videoModel: Se,
                    timelineConverter: se,
                    adapter: he
                }),
                be.setConfig({
                    streamController: _e,
                    dashMetrics: Ee,
                    mediaPlayerModel: pe,
                    adapter: he,
                    videoModel: Se,
                    timelineConverter: se,
                    uriFragmentModel: Ce,
                    settings: z
                }),
                ie.setConfig({
                    streamController: _e,
                    domStorage: Ie,
                    mediaPlayerModel: pe,
                    dashMetrics: Ee,
                    adapter: he,
                    videoModel: Se,
                    settings: z
                }),
                ie.createAbrRulesCollection(),
                Ae.setConfig({
                    errHandler: ge,
                    manifestModel: ke,
                    adapter: he,
                    mediaController: le,
                    streamController: _e,
                    videoModel: Se
                }),
                Te.setConfig({
                    abrController: ie,
                    dashMetrics: Ee,
                    playbackController: be
                }),
                _e.initialize(ne, ee),
                ve.initialize(),
                Te.initialize(),
                "string" == typeof Z ? _e.load(Z) : _e.loadWithManifest(Z)),
                !re && we() && (re = !0,
                J.info("Playback Initialized"))
            }
            return Q = {
                initialize: function(e, t, a) {
                    ye || (ye = (0,
                    p.default)(W).getInstance()),
                    ge = (0,
                    h.default)(W).getInstance(),
                    ye.supportsMediaSource() ? te || (te = !0,
                    se = (0,
                    U.default)(W).getInstance(),
                    ie || (ie = (0,
                    E.default)(W).getInstance()).setConfig({
                        settings: z
                    }),
                    oe || (oe = (0,
                    k.default)(W).getInstance()),
                    be || (be = (0,
                    s.default)(W).getInstance()),
                    le || (le = (0,
                    d.default)(W).getInstance()),
                    _e || (_e = (0,
                    l.default)(W).getInstance()),
                    ve || (ve = (0,
                    u.default)(W).getInstance()),
                    he = (0,
                    N.default)(W).getInstance(),
                    ke = (0,
                    v.default)(W).getInstance(),
                    Te = (0,
                    S.default)(W).getInstance(),
                    Ee = (0,
                    L.default)(W).getInstance({
                        settings: z
                    }),
                    Ae = (0,
                    y.default)(W).getInstance(),
                    Ie = (0,
                    A.default)(W).getInstance({
                        settings: z
                    }),
                    he.setConfig({
                        constants: n.default,
                        cea608parser: r.default,
                        errHandler: ge,
                        BASE64: B.default
                    }),
                    me || (me = (0,
                    c.default)(W).create()),
                    me.setConfig({
                        adapter: he
                    }),
                    (Pe = (0,
                    O.default)(W).getInstance({
                        dashMetrics: Ee,
                        mediaPlayerModel: pe,
                        errHandler: ge,
                        baseURLController: me,
                        events: w.default,
                        eventBus: Y,
                        debug: X,
                        boxParser: (0,
                        q.default)(W).getInstance(),
                        requestModifier: (0,
                        m.default)(W).getInstance(),
                        errors: I.default
                    })).initialize(),
                    Le(),
                    Ne(void 0 === a || a),
                    He(),
                    e && Be(e),
                    t && Ge(t),
                    J.info("[dash.js " + Me() + "] MediaPlayer has been initialized")) : ge.error(new G.default(I.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,I.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))
                },
                setConfig: function(e) {
                    e && (e.capabilities && (ye = e.capabilities),
                    e.streamController && (_e = e.streamController),
                    e.gapController && (ve = e.gapController),
                    e.playbackController && (be = e.playbackController),
                    e.mediaPlayerModel && (pe = e.mediaPlayerModel),
                    e.abrController && (ie = e.abrController),
                    e.schemeLoaderFactory && (oe = e.schemeLoaderFactory),
                    e.mediaController && (le = e.mediaController),
                    e.settings && (z = e.settings))
                },
                on: function(e, t, a) {
                    Y.on(e, t, a)
                },
                off: function(e, t, a) {
                    Y.off(e, t, a)
                },
                extend: function(e, t, a) {
                    R.default.extend(e, t, a, W)
                },
                attachView: Be,
                attachSource: Ge,
                isReady: we,
                preload: function() {
                    if (Se.getElement() || ae)
                        return !1;
                    if (!Z)
                        throw H;
                    Ye()
                },
                play: function() {
                    if (!re)
                        throw t;
                    (!ne || Re() && re) && be.play()
                },
                isPaused: Re,
                pause: function() {
                    if (!re)
                        throw t;
                    be.pause()
                },
                isSeeking: function() {
                    if (!re)
                        throw t;
                    return be.isSeeking()
                },
                isDynamic: function() {
                    if (!re)
                        throw t;
                    return be.getIsDynamic()
                },
                seek: function(e) {
                    if (!re)
                        throw t;
                    if ((0,
                    V.checkParameterType)(e, "number"),
                    isNaN(e))
                        throw n.default.BAD_ARGUMENT_ERROR;
                    var a = be.getIsDynamic() ? xe(e) : e;
                    be.seek(a)
                },
                setPlaybackRate: function(e) {
                    Fe().playbackRate = e
                },
                getPlaybackRate: function() {
                    return Fe().playbackRate
                },
                setMute: function(e) {
                    (0,
                    V.checkParameterType)(e, "boolean"),
                    Fe().muted = e
                },
                isMuted: function() {
                    return Fe().muted
                },
                setVolume: function(e) {
                    if ("number" != typeof e || isNaN(e) || e < 0 || e > 1)
                        throw n.default.BAD_ARGUMENT_ERROR;
                    Fe().volume = e
                },
                getVolume: function() {
                    return Fe().volume
                },
                time: De,
                duration: Oe,
                timeAsUTC: function() {
                    if (!re)
                        throw t;
                    return De() < 0 ? NaN : We(De())
                },
                durationAsUTC: function() {
                    if (!re)
                        throw t;
                    return We(Oe())
                },
                getActiveStream: Ve,
                getDVRWindowSize: function() {
                    var e = Ee.getCurrentDVRInfo();
                    return e ? e.manifestInfo.DVRWindowSize : 0
                },
                getDVRSeekOffset: xe,
                convertToTimeCode: function(e) {
                    e = Math.max(e, 0);
                    var t = Math.floor(e / 3600)
                      , a = Math.floor(e % 3600 / 60)
                      , r = Math.floor(e % 3600 % 60);
                    return (0 === t ? "" : t < 10 ? "0" + t.toString() + ":" : t.toString() + ":") + (a < 10 ? "0" + a.toString() : a.toString()) + ":" + (r < 10 ? "0" + r.toString() : r.toString())
                },
                formatUTC: function(e, t, a) {
                    var r = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]
                      , n = new Date(1e3 * e)
                      , i = n.toLocaleDateString(t)
                      , o = n.toLocaleTimeString(t, {
                        hour12: a
                    });
                    return r ? o + " " + i : o
                },
                getVersion: Me,
                getDebug: function() {
                    return X
                },
                getBufferLength: function(e) {
                    var t = [n.default.VIDEO, n.default.AUDIO, n.default.FRAGMENTED_TEXT];
                    if (e) {
                        if (-1 !== t.indexOf(e)) {
                            var a = Ue().getCurrentBufferLevel(e);
                            return a || NaN
                        }
                        return J.warn("getBufferLength requested for invalid type"),
                        NaN
                    }
                    var r = t.map((function(e) {
                        return je(e).length > 0 ? Ue().getCurrentBufferLevel(e) : Number.MAX_VALUE
                    }
                    )).reduce((function(e, t) {
                        return Math.min(e, t)
                    }
                    ));
                    return r === Number.MAX_VALUE ? NaN : r
                },
                getTTMLRenderingDiv: function() {
                    return Se ? Se.getTTMLRenderingDiv() : null
                },
                getVideoElement: Fe,
                getSource: function() {
                    if (!Z)
                        throw H;
                    return Z
                },
                getCurrentLiveLatency: function() {
                    if (!te)
                        throw "MediaPlayer not initialized!";
                    return re ? be.getCurrentLiveLatency() : NaN
                },
                getTopBitrateInfoFor: function(t) {
                    if (!ae)
                        throw e;
                    return ie.getTopBitrateInfoFor(t)
                },
                setAutoPlay: Ne,
                getAutoPlay: function() {
                    return ne
                },
                getDashMetrics: Ue,
                getQualityFor: function(t) {
                    if (!ae)
                        throw e;
                    if (t === n.default.IMAGE) {
                        var a = Ve();
                        if (!a)
                            return -1;
                        var r = a.getThumbnailController();
                        return r ? r.getCurrentTrackIndex() : -1
                    }
                    return ie.getQualityFor(t)
                },
                setQualityFor: function(t, a) {
                    if (!ae)
                        throw e;
                    if (t === n.default.IMAGE) {
                        var r = Ve();
                        if (!r)
                            return;
                        var i = r.getThumbnailController();
                        i && i.setTrackByIndex(a)
                    }
                    ie.setPlaybackQuality(t, _e.getActiveStreamInfo(), a)
                },
                updatePortalSize: function() {
                    ie.setElementSize(),
                    ie.setWindowResizeEventCalled(!0)
                },
                setTextDefaultLanguage: function(e) {
                    J.warn('setTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use setInitialMediaSettingsFor("fragmentedText", { lang: lang }) instead'),
                    void 0 === Ae && (Ae = (0,
                    y.default)(W).getInstance()),
                    Ae.setTextDefaultLanguage(e)
                },
                getTextDefaultLanguage: function() {
                    return J.warn('getTextDefaultLanguage is deprecated and will be removed in version 3.2.0. Please use getInitialMediaSettingsFor("fragmentedText").lang instead'),
                    void 0 === Ae && (Ae = (0,
                    y.default)(W).getInstance()),
                    Ae.getTextDefaultLanguage()
                },
                setTextDefaultEnabled: function(e) {
                    void 0 === Ae && (Ae = (0,
                    y.default)(W).getInstance()),
                    Ae.setTextDefaultEnabled(e)
                },
                getTextDefaultEnabled: function() {
                    return void 0 === Ae && (Ae = (0,
                    y.default)(W).getInstance()),
                    Ae.getTextDefaultEnabled()
                },
                enableText: function(e) {
                    void 0 === Ae && (Ae = (0,
                    y.default)(W).getInstance()),
                    Ae.enableText(e)
                },
                enableForcedTextStreaming: function(e) {
                    void 0 === Ae && (Ae = (0,
                    y.default)(W).getInstance()),
                    Ae.enableForcedTextStreaming(e)
                },
                isTextEnabled: function() {
                    return void 0 === Ae && (Ae = (0,
                    y.default)(W).getInstance()),
                    Ae.isTextEnabled()
                },
                setTextTrack: function(e) {
                    if (!re)
                        throw t;
                    void 0 === Ae && (Ae = (0,
                    y.default)(W).getInstance()),
                    Ae.setTextTrack(e)
                },
                getBitrateInfoListFor: function(t) {
                    if (!ae)
                        throw e;
                    var a = Ve();
                    return a ? a.getBitrateListFor(t) : []
                },
                getStreamsFromManifest: function(t) {
                    if (!ae)
                        throw e;
                    return he.getStreamsInfo(t)
                },
                getTracksFor: je,
                getTracksForTypeFromManifest: function(t, a, r) {
                    if (!ae)
                        throw e;
                    return (r = r || he.getStreamsInfo(a, 1)[0]) ? he.getAllMediaInfoForType(r, t, a) : []
                },
                getCurrentTrackFor: function(t) {
                    if (!ae)
                        throw e;
                    var a = _e.getActiveStreamInfo();
                    return le.getCurrentTrackFor(t, a)
                },
                setInitialMediaSettingsFor: function(e, t) {
                    if (!te)
                        throw "MediaPlayer not initialized!";
                    le.setInitialSettings(e, t),
                    e === n.default.FRAGMENTED_TEXT && Ae.setInitialSettings(t)
                },
                getInitialMediaSettingsFor: function(e) {
                    if (!te)
                        throw "MediaPlayer not initialized!";
                    return le.getInitialSettings(e)
                },
                setCurrentTrack: function(t) {
                    if (!ae)
                        throw e;
                    le.setTrack(t)
                },
                getTrackSwitchModeFor: function(e) {
                    if (!te)
                        throw "MediaPlayer not initialized!";
                    return le.getSwitchMode(e)
                },
                setTrackSwitchModeFor: function(e, t) {
                    if (!te)
                        throw "MediaPlayer not initialized!";
                    le.setSwitchMode(e, t)
                },
                setSelectionModeForInitialTrack: function(e) {
                    if (!te)
                        throw "MediaPlayer not initialized!";
                    le.setSelectionModeForInitialTrack(e)
                },
                getSelectionModeForInitialTrack: function() {
                    if (!te)
                        throw "MediaPlayer not initialized!";
                    return le.getSelectionModeForInitialTrack()
                },
                addABRCustomRule: function(e, t, a) {
                    pe.addABRCustomRule(e, t, a)
                },
                removeABRCustomRule: function(e) {
                    pe.removeABRCustomRule(e)
                },
                removeAllABRCustomRule: function() {
                    pe.removeABRCustomRule()
                },
                getAverageThroughput: function(e) {
                    var t = ie.getThroughputHistory();
                    return t ? t.getAverageThroughput(e) : 0
                },
                retrieveManifest: function(e, t) {
                    var a = $e()
                      , r = this;
                    Y.on(w.default.INTERNAL_MANIFEST_LOADED, (function e(n) {
                        n.error ? t(null, n.error) : t(n.manifest),
                        Y.off(w.default.INTERNAL_MANIFEST_LOADED, e, r),
                        a.reset()
                    }
                    ), r),
                    Ce.initialize(e),
                    a.load(e)
                },
                addUTCTimingSource: function(e, t) {
                    pe.addUTCTimingSource(e, t)
                },
                removeUTCTimingSource: function(e, t) {
                    pe.removeUTCTimingSource(e, t)
                },
                clearDefaultUTCTimingSources: function() {
                    pe.clearDefaultUTCTimingSources()
                },
                restoreDefaultUTCTimingSources: Le,
                setXHRWithCredentialsForType: function(e, t) {
                    pe.setXHRWithCredentialsForType(e, t)
                },
                getXHRWithCredentialsForType: function(e) {
                    return pe.getXHRWithCredentialsForType(e)
                },
                getProtectionController: function() {
                    return qe()
                },
                attachProtectionController: function(e) {
                    ue = e
                },
                setProtectionData: function(e) {
                    ee = e,
                    _e && _e.setProtectionData(ee)
                },
                displayCaptionsOnTop: function(e) {
                    var t = (0,
                    g.default)(W).getInstance();
                    t.setConfig({
                        videoModel: Se
                    }),
                    t.initialize(),
                    t.setDisplayCConTop(e)
                },
                attachTTMLRenderingDiv: function(e) {
                    if (!Se.getElement())
                        throw a;
                    Se.setTTMLRenderingDiv(e)
                },
                getCurrentTextTrackIndex: function() {
                    var e = NaN;
                    return Ae && (e = Ae.getCurrentTrackIdx()),
                    e
                },
                provideThumbnail: function(e, t) {
                    if ("function" == typeof t)
                        if (e < 0)
                            t(null);
                        else {
                            var a = be.getIsDynamic() ? xe(e) : e
                              , r = _e.getStreamForTime(a);
                            if (null !== r) {
                                var n = r.getThumbnailController();
                                if (n) {
                                    var i = _e.getTimeRelativeToStreamId(a, r.getId());
                                    return n.provide(i, t)
                                }
                                t(null)
                            } else
                                t(null)
                        }
                },
                getDashAdapter: function() {
                    return he
                },
                getOfflineController: function() {
                    return He()
                },
                getSettings: function() {
                    return z.get()
                },
                updateSettings: function(e) {
                    z.update(e)
                },
                resetSettings: function() {
                    z.reset()
                },
                reset: function() {
                    Ge(null),
                    Be(null),
                    ee = null,
                    ue && (ue.reset(),
                    ue = null),
                    de && (de.reset(),
                    de = null),
                    Pe.reset(),
                    z.reset(),
                    fe && (fe.reset(),
                    fe = null)
                }
            },
            J = X.getLogger(Q),
            te = !1,
            re = !1,
            ae = !1,
            ne = !0,
            ue = null,
            fe = null,
            ee = null,
            he = null,
            Pe = null,
            w.default.extend(M.default),
            pe = (0,
            b.default)(W).getInstance(),
            Se = (0,
            T.default)(W).getInstance(),
            Ce = (0,
            _.default)(W).getInstance(),
            Q
        }
        W.__dashjs_factory_name = "MediaPlayer";
        var Y = R.default.getClassFactory(W);
        Y.events = M.default,
        Y.errors = I.default,
        R.default.updateClassFactory(W.__dashjs_factory_name, Y),
        t.default = Y
    }
    , function(e, t, a) {
        "use strict";
        !function(e) {
            var t = {
                42: 225,
                92: 233,
                94: 237,
                95: 243,
                96: 250,
                123: 231,
                124: 247,
                125: 209,
                126: 241,
                127: 9608,
                128: 174,
                129: 176,
                130: 189,
                131: 191,
                132: 8482,
                133: 162,
                134: 163,
                135: 9834,
                136: 224,
                137: 32,
                138: 232,
                139: 226,
                140: 234,
                141: 238,
                142: 244,
                143: 251,
                144: 193,
                145: 201,
                146: 211,
                147: 218,
                148: 220,
                149: 252,
                150: 8216,
                151: 161,
                152: 42,
                153: 8217,
                154: 9473,
                155: 169,
                156: 8480,
                157: 8226,
                158: 8220,
                159: 8221,
                160: 192,
                161: 194,
                162: 199,
                163: 200,
                164: 202,
                165: 203,
                166: 235,
                167: 206,
                168: 207,
                169: 239,
                170: 212,
                171: 217,
                172: 249,
                173: 219,
                174: 171,
                175: 187,
                176: 195,
                177: 227,
                178: 205,
                179: 204,
                180: 236,
                181: 210,
                182: 242,
                183: 213,
                184: 245,
                185: 123,
                186: 125,
                187: 92,
                188: 94,
                189: 95,
                190: 124,
                191: 8764,
                192: 196,
                193: 228,
                194: 214,
                195: 246,
                196: 223,
                197: 165,
                198: 164,
                199: 9475,
                200: 197,
                201: 229,
                202: 216,
                203: 248,
                204: 9487,
                205: 9491,
                206: 9495,
                207: 9499
            }
              , a = function(e) {
                var a = e;
                return t.hasOwnProperty(e) && (a = t[e]),
                String.fromCharCode(a)
            }
              , r = {
                17: 1,
                18: 3,
                21: 5,
                22: 7,
                23: 9,
                16: 11,
                19: 12,
                20: 14
            }
              , n = {
                17: 2,
                18: 4,
                21: 6,
                22: 8,
                23: 10,
                19: 13,
                20: 15
            }
              , i = {
                25: 1,
                26: 3,
                29: 5,
                30: 7,
                31: 9,
                24: 11,
                27: 12,
                28: 14
            }
              , o = {
                25: 2,
                26: 4,
                29: 6,
                30: 8,
                31: 10,
                27: 13,
                28: 15
            }
              , s = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"]
              , l = {
                verboseFilter: {
                    DATA: 3,
                    DEBUG: 3,
                    INFO: 2,
                    WARNING: 2,
                    TEXT: 1,
                    ERROR: 0
                },
                time: null,
                verboseLevel: 0,
                setTime: function(e) {
                    this.time = e
                },
                log: function(e, t) {
                    var a = this.verboseFilter[e];
                    this.verboseLevel >= a && console.log(this.time + " [" + e + "] " + t)
                }
            }
              , u = function(e) {
                for (var t = [], a = 0; a < e.length; a++)
                    t.push(e[a].toString(16));
                return t
            }
              , d = function(e, t, a, r, n) {
                this.foreground = e || "white",
                this.underline = t || !1,
                this.italics = a || !1,
                this.background = r || "black",
                this.flash = n || !1
            };
            d.prototype = {
                reset: function() {
                    this.foreground = "white",
                    this.underline = !1,
                    this.italics = !1,
                    this.background = "black",
                    this.flash = !1
                },
                setStyles: function(e) {
                    for (var t = ["foreground", "underline", "italics", "background", "flash"], a = 0; a < t.length; a++) {
                        var r = t[a];
                        e.hasOwnProperty(r) && (this[r] = e[r])
                    }
                },
                isDefault: function() {
                    return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
                },
                equals: function(e) {
                    return this.foreground === e.foreground && this.underline === e.underline && this.italics === e.italics && this.background === e.background && this.flash === e.flash
                },
                copy: function(e) {
                    this.foreground = e.foreground,
                    this.underline = e.underline,
                    this.italics = e.italics,
                    this.background = e.background,
                    this.flash = e.flash
                },
                toString: function() {
                    return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
                }
            };
            var c = function(e, t, a, r, n, i) {
                this.uchar = e || " ",
                this.penState = new d(t,a,r,n,i)
            };
            c.prototype = {
                reset: function() {
                    this.uchar = " ",
                    this.penState.reset()
                },
                setChar: function(e, t) {
                    this.uchar = e,
                    this.penState.copy(t)
                },
                setPenState: function(e) {
                    this.penState.copy(e)
                },
                equals: function(e) {
                    return this.uchar === e.uchar && this.penState.equals(e.penState)
                },
                copy: function(e) {
                    this.uchar = e.uchar,
                    this.penState.copy(e.penState)
                },
                isEmpty: function() {
                    return " " === this.uchar && this.penState.isDefault()
                }
            };
            var f = function() {
                this.chars = [];
                for (var e = 0; e < 32; e++)
                    this.chars.push(new c);
                this.pos = 0,
                this.currPenState = new d
            };
            f.prototype = {
                equals: function(e) {
                    for (var t = !0, a = 0; a < 32; a++)
                        if (!this.chars[a].equals(e.chars[a])) {
                            t = !1;
                            break
                        }
                    return t
                },
                copy: function(e) {
                    for (var t = 0; t < 32; t++)
                        this.chars[t].copy(e.chars[t])
                },
                isEmpty: function() {
                    for (var e = !0, t = 0; t < 32; t++)
                        if (!this.chars[t].isEmpty()) {
                            e = !1;
                            break
                        }
                    return e
                },
                setCursor: function(e) {
                    this.pos !== e && (this.pos = e),
                    this.pos < 0 ? (l.log("ERROR", "Negative cursor position " + this.pos),
                    this.pos = 0) : this.pos > 32 && (l.log("ERROR", "Too large cursor position " + this.pos),
                    this.pos = 32)
                },
                moveCursor: function(e) {
                    var t = this.pos + e;
                    if (e > 1)
                        for (var a = this.pos + 1; a < t + 1; a++)
                            this.chars[a].setPenState(this.currPenState);
                    this.setCursor(t)
                },
                backSpace: function() {
                    this.moveCursor(-1),
                    this.chars[this.pos].setChar(" ", this.currPenState)
                },
                insertChar: function(e) {
                    e >= 144 && this.backSpace();
                    var t = a(e);
                    this.pos >= 32 ? l.log("ERROR", "Cannot insert " + e.toString(16) + " (" + t + ") at position " + this.pos + ". Skipping it!") : (this.chars[this.pos].setChar(t, this.currPenState),
                    this.moveCursor(1))
                },
                clearFromPos: function(e) {
                    var t;
                    for (t = e; t < 32; t++)
                        this.chars[t].reset()
                },
                clear: function() {
                    this.clearFromPos(0),
                    this.pos = 0,
                    this.currPenState.reset()
                },
                clearToEndOfRow: function() {
                    this.clearFromPos(this.pos)
                },
                getTextString: function() {
                    for (var e = [], t = !0, a = 0; a < 32; a++) {
                        var r = this.chars[a].uchar;
                        " " !== r && (t = !1),
                        e.push(r)
                    }
                    return t ? "" : e.join("")
                },
                setPenStyles: function(e) {
                    this.currPenState.setStyles(e),
                    this.chars[this.pos].setPenState(this.currPenState)
                }
            };
            var h = function() {
                this.rows = [];
                for (var e = 0; e < 15; e++)
                    this.rows.push(new f);
                this.currRow = 14,
                this.nrRollUpRows = null,
                this.reset()
            };
            h.prototype = {
                reset: function() {
                    for (var e = 0; e < 15; e++)
                        this.rows[e].clear();
                    this.currRow = 14
                },
                equals: function(e) {
                    for (var t = !0, a = 0; a < 15; a++)
                        if (!this.rows[a].equals(e.rows[a])) {
                            t = !1;
                            break
                        }
                    return t
                },
                copy: function(e) {
                    for (var t = 0; t < 15; t++)
                        this.rows[t].copy(e.rows[t])
                },
                isEmpty: function() {
                    for (var e = !0, t = 0; t < 15; t++)
                        if (!this.rows[t].isEmpty()) {
                            e = !1;
                            break
                        }
                    return e
                },
                backSpace: function() {
                    this.rows[this.currRow].backSpace()
                },
                clearToEndOfRow: function() {
                    this.rows[this.currRow].clearToEndOfRow()
                },
                insertChar: function(e) {
                    this.rows[this.currRow].insertChar(e)
                },
                setPen: function(e) {
                    this.rows[this.currRow].setPenStyles(e)
                },
                moveCursor: function(e) {
                    this.rows[this.currRow].moveCursor(e)
                },
                setCursor: function(e) {
                    l.log("INFO", "setCursor: " + e),
                    this.rows[this.currRow].setCursor(e)
                },
                setPAC: function(e) {
                    l.log("INFO", "pacData = " + JSON.stringify(e));
                    var t = e.row - 1;
                    this.nrRollUpRows && t < this.nrRollUpRows - 1 && (t = this.nrRollUpRows - 1),
                    this.currRow = t;
                    var a = this.rows[this.currRow];
                    if (null !== e.indent) {
                        var r = e.indent
                          , n = Math.max(r - 1, 0);
                        a.setCursor(e.indent),
                        e.color = a.chars[n].penState.foreground
                    }
                    var i = {
                        foreground: e.color,
                        underline: e.underline,
                        italics: e.italics,
                        background: "black",
                        flash: !1
                    };
                    this.setPen(i)
                },
                setBkgData: function(e) {
                    l.log("INFO", "bkgData = " + JSON.stringify(e)),
                    this.backSpace(),
                    this.setPen(e),
                    this.insertChar(32)
                },
                setRollUpRows: function(e) {
                    this.nrRollUpRows = e
                },
                rollUp: function() {
                    if (null !== this.nrRollUpRows) {
                        l.log("TEXT", this.getDisplayText());
                        var e = this.currRow + 1 - this.nrRollUpRows
                          , t = this.rows.splice(e, 1)[0];
                        t.clear(),
                        this.rows.splice(this.currRow, 0, t),
                        l.log("INFO", "Rolling up")
                    } else
                        l.log("DEBUG", "roll_up but nrRollUpRows not set yet")
                },
                getDisplayText: function(e) {
                    e = e || !1;
                    for (var t = [], a = "", r = -1, n = 0; n < 15; n++) {
                        var i = this.rows[n].getTextString();
                        i && (r = n + 1,
                        e ? t.push("Row " + r + ': "' + i + '"') : t.push(i.trim()))
                    }
                    return t.length > 0 && (a = e ? "[" + t.join(" | ") + "]" : t.join("\n")),
                    a
                },
                getTextAndFormat: function() {
                    return this.rows
                }
            };
            var p = function(e, t) {
                this.chNr = e,
                this.outputFilter = t,
                this.mode = null,
                this.verbose = 0,
                this.displayedMemory = new h,
                this.nonDisplayedMemory = new h,
                this.lastOutputScreen = new h,
                this.currRollUpRow = this.displayedMemory.rows[14],
                this.writeScreen = this.displayedMemory,
                this.mode = null,
                this.cueStartTime = null
            };
            p.prototype = {
                modes: ["MODE_ROLL-UP", "MODE_POP-ON", "MODE_PAINT-ON", "MODE_TEXT"],
                reset: function() {
                    this.mode = null,
                    this.displayedMemory.reset(),
                    this.nonDisplayedMemory.reset(),
                    this.lastOutputScreen.reset(),
                    this.currRollUpRow = this.displayedMemory.rows[14],
                    this.writeScreen = this.displayedMemory,
                    this.mode = null,
                    this.cueStartTime = null,
                    this.lastCueEndTime = null
                },
                getHandler: function() {
                    return this.outputFilter
                },
                setHandler: function(e) {
                    this.outputFilter = e
                },
                setPAC: function(e) {
                    this.writeScreen.setPAC(e)
                },
                setBkgData: function(e) {
                    this.writeScreen.setBkgData(e)
                },
                setMode: function(e) {
                    e !== this.mode && (this.mode = e,
                    l.log("INFO", "MODE=" + e),
                    "MODE_POP-ON" == this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory,
                    this.writeScreen.reset()),
                    "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null,
                    this.nonDisplayedMemory.nrRollUpRows = null),
                    this.mode = e)
                },
                insertChars: function(e) {
                    for (var t = 0; t < e.length; t++)
                        this.writeScreen.insertChar(e[t]);
                    var a = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                    l.log("INFO", a + ": " + this.writeScreen.getDisplayText(!0)),
                    "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (l.log("TEXT", "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)),
                    this.outputDataUpdate())
                },
                cc_RCL: function() {
                    l.log("INFO", "RCL - Resume Caption Loading"),
                    this.setMode("MODE_POP-ON")
                },
                cc_BS: function() {
                    l.log("INFO", "BS - BackSpace"),
                    "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(),
                    this.writeScreen === this.displayedMemory && this.outputDataUpdate())
                },
                cc_AOF: function() {},
                cc_AON: function() {},
                cc_DER: function() {
                    l.log("INFO", "DER- Delete to End of Row"),
                    this.writeScreen.clearToEndOfRow(),
                    this.outputDataUpdate()
                },
                cc_RU: function(e) {
                    l.log("INFO", "RU(" + e + ") - Roll Up"),
                    this.writeScreen = this.displayedMemory,
                    this.setMode("MODE_ROLL-UP"),
                    this.writeScreen.setRollUpRows(e)
                },
                cc_FON: function() {
                    l.log("INFO", "FON - Flash On"),
                    this.writeScreen.setPen({
                        flash: !0
                    })
                },
                cc_RDC: function() {
                    l.log("INFO", "RDC - Resume Direct Captioning"),
                    this.setMode("MODE_PAINT-ON")
                },
                cc_TR: function() {
                    l.log("INFO", "TR"),
                    this.setMode("MODE_TEXT")
                },
                cc_RTD: function() {
                    l.log("INFO", "RTD"),
                    this.setMode("MODE_TEXT")
                },
                cc_EDM: function() {
                    l.log("INFO", "EDM - Erase Displayed Memory"),
                    this.displayedMemory.reset(),
                    this.outputDataUpdate()
                },
                cc_CR: function() {
                    l.log("CR - Carriage Return"),
                    this.writeScreen.rollUp(),
                    this.outputDataUpdate()
                },
                cc_ENM: function() {
                    l.log("INFO", "ENM - Erase Non-displayed Memory"),
                    this.nonDisplayedMemory.reset()
                },
                cc_EOC: function() {
                    if (l.log("INFO", "EOC - End Of Caption"),
                    "MODE_POP-ON" === this.mode) {
                        var e = this.displayedMemory;
                        this.displayedMemory = this.nonDisplayedMemory,
                        this.nonDisplayedMemory = e,
                        this.writeScreen = this.nonDisplayedMemory,
                        l.log("TEXT", "DISP: " + this.displayedMemory.getDisplayText())
                    }
                    this.outputDataUpdate()
                },
                cc_TO: function(e) {
                    l.log("INFO", "TO(" + e + ") - Tab Offset"),
                    this.writeScreen.moveCursor(e)
                },
                cc_MIDROW: function(e) {
                    var t = {
                        flash: !1
                    };
                    if (t.underline = e % 2 == 1,
                    t.italics = e >= 46,
                    t.italics)
                        t.foreground = "white";
                    else {
                        var a = Math.floor(e / 2) - 16;
                        t.foreground = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"][a]
                    }
                    l.log("INFO", "MIDROW: " + JSON.stringify(t)),
                    this.writeScreen.setPen(t)
                },
                outputDataUpdate: function() {
                    var e = l.time;
                    null !== e && this.outputFilter && (this.outputFilter.updateData && this.outputFilter.updateData(e, this.displayedMemory),
                    null !== this.cueStartTime || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, e, this.lastOutputScreen),
                    this.cueStartTime = this.displayedMemory.isEmpty() ? null : e) : this.cueStartTime = e,
                    this.lastOutputScreen.copy(this.displayedMemory))
                },
                cueSplitAtTime: function(e) {
                    this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, e, this.displayedMemory),
                    this.cueStartTime = e))
                }
            };
            var g = function(e, t, a) {
                this.field = e || 1,
                this.outputs = [t, a],
                this.channels = [new p(1,t), new p(2,a)],
                this.currChNr = -1,
                this.lastCmdA = null,
                this.lastCmdB = null,
                this.bufferedData = [],
                this.startTime = null,
                this.lastTime = null,
                this.dataCounters = {
                    padding: 0,
                    char: 0,
                    cmd: 0,
                    other: 0
                }
            };
            g.prototype = {
                getHandler: function(e) {
                    return this.channels[e].getHandler()
                },
                setHandler: function(e, t) {
                    this.channels[e].setHandler(t)
                },
                addData: function(e, t) {
                    var a, r, n, i = !1;
                    this.lastTime = e,
                    l.setTime(e);
                    for (var o = 0; o < t.length; o += 2)
                        if (r = 127 & t[o],
                        n = 127 & t[o + 1],
                        r >= 16 && r <= 31 && r === this.lastCmdA && n === this.lastCmdB)
                            this.lastCmdA = null,
                            this.lastCmdB = null,
                            l.log("DEBUG", "Repeated command (" + u([r, n]) + ") is dropped");
                        else if (0 !== r || 0 !== n) {
                            if (l.log("DATA", "[" + u([t[o], t[o + 1]]) + "] -> (" + u([r, n]) + ")"),
                            (a = this.parseCmd(r, n)) || (a = this.parseMidrow(r, n)),
                            a || (a = this.parsePAC(r, n)),
                            a || (a = this.parseBackgroundAttributes(r, n)),
                            !a)
                                if (i = this.parseChars(r, n))
                                    if (this.currChNr && this.currChNr >= 0)
                                        this.channels[this.currChNr - 1].insertChars(i);
                                    else
                                        l.log("WARNING", "No channel found yet. TEXT-MODE?");
                            a ? this.dataCounters.cmd += 2 : i ? this.dataCounters.char += 2 : (this.dataCounters.other += 2,
                            l.log("WARNING", "Couldn't parse cleaned data " + u([r, n]) + " orig: " + u([t[o], t[o + 1]])))
                        } else
                            this.dataCounters.padding += 2
                },
                parseCmd: function(e, t) {
                    var a = null;
                    if (!((20 === e || 21 === e || 28 === e || 29 === e) && 32 <= t && t <= 47) && !((23 === e || 31 === e) && 33 <= t && t <= 35))
                        return !1;
                    a = 20 === e || 21 === e || 23 === e ? 1 : 2;
                    var r = this.channels[a - 1];
                    return 20 === e || 21 === e || 28 === e || 29 === e ? 32 === t ? r.cc_RCL() : 33 === t ? r.cc_BS() : 34 === t ? r.cc_AOF() : 35 === t ? r.cc_AON() : 36 === t ? r.cc_DER() : 37 === t ? r.cc_RU(2) : 38 === t ? r.cc_RU(3) : 39 === t ? r.cc_RU(4) : 40 === t ? r.cc_FON() : 41 === t ? r.cc_RDC() : 42 === t ? r.cc_TR() : 43 === t ? r.cc_RTD() : 44 === t ? r.cc_EDM() : 45 === t ? r.cc_CR() : 46 === t ? r.cc_ENM() : 47 === t && r.cc_EOC() : r.cc_TO(t - 32),
                    this.lastCmdA = e,
                    this.lastCmdB = t,
                    this.currChNr = a,
                    !0
                },
                parseMidrow: function(e, t) {
                    var a = null;
                    if ((17 === e || 25 === e) && 32 <= t && t <= 47) {
                        if ((a = 17 === e ? 1 : 2) !== this.currChNr)
                            return l.log("ERROR", "Mismatch channel in midrow parsing"),
                            !1;
                        var r = this.channels[a - 1];
                        return r.insertChars([32]),
                        r.cc_MIDROW(t),
                        l.log("DEBUG", "MIDROW (" + u([e, t]) + ")"),
                        this.lastCmdA = e,
                        this.lastCmdB = t,
                        !0
                    }
                    return !1
                },
                parsePAC: function(e, t) {
                    var a, s = null;
                    if (!((17 <= e && e <= 23 || 25 <= e && e <= 31) && 64 <= t && t <= 127) && !((16 === e || 24 === e) && 64 <= t && t <= 95))
                        return !1;
                    a = e <= 23 ? 1 : 2,
                    s = 64 <= t && t <= 95 ? 1 === a ? r[e] : i[e] : 1 === a ? n[e] : o[e];
                    var l = this.interpretPAC(s, t);
                    return this.channels[a - 1].setPAC(l),
                    this.lastCmdA = e,
                    this.lastCmdB = t,
                    this.currChNr = a,
                    !0
                },
                interpretPAC: function(e, t) {
                    var a = t
                      , r = {
                        color: null,
                        italics: !1,
                        indent: null,
                        underline: !1,
                        row: e
                    };
                    return a = t > 95 ? t - 96 : t - 64,
                    r.underline = 1 == (1 & a),
                    a <= 13 ? r.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(a / 2)] : a <= 15 ? (r.italics = !0,
                    r.color = "white") : r.indent = 4 * Math.floor((a - 16) / 2),
                    r
                },
                parseChars: function(e, t) {
                    var r = null
                      , n = null
                      , i = null;
                    if (e >= 25 ? (r = 2,
                    i = e - 8) : (r = 1,
                    i = e),
                    17 <= i && i <= 19) {
                        var o = t;
                        o = 17 === i ? t + 80 : 18 === i ? t + 112 : t + 144,
                        l.log("INFO", "Special char '" + a(o) + "' in channel " + r),
                        n = [o],
                        this.lastCmdA = e,
                        this.lastCmdB = t
                    } else
                        32 <= e && e <= 127 && (n = 0 === t ? [e] : [e, t],
                        this.lastCmdA = null,
                        this.lastCmdB = null);
                    if (n) {
                        var s = u(n);
                        l.log("DEBUG", "Char codes =  " + s.join(","))
                    }
                    return n
                },
                parseBackgroundAttributes: function(e, t) {
                    var a, r, n;
                    return ((16 === e || 24 === e) && 32 <= t && t <= 47 || (23 === e || 31 === e) && 45 <= t && t <= 47) && (a = {},
                    16 === e || 24 === e ? (r = Math.floor((t - 32) / 2),
                    a.background = s[r],
                    t % 2 == 1 && (a.background = a.background + "_semi")) : 45 === t ? a.background = "transparent" : (a.foreground = "black",
                    47 === t && (a.underline = !0)),
                    n = e < 24 ? 1 : 2,
                    this.channels[n - 1].setBkgData(a),
                    this.lastCmdA = e,
                    this.lastCmdB = t,
                    !0)
                },
                reset: function() {
                    for (var e = 0; e < this.channels.length; e++)
                        this.channels[e] && this.channels[e].reset();
                    this.lastCmdA = null,
                    this.lastCmdB = null
                },
                cueSplitAtTime: function(e) {
                    for (var t = 0; t < this.channels.length; t++)
                        this.channels[t] && this.channels[t].cueSplitAtTime(e)
                }
            };
            e.logger = l,
            e.PenState = d,
            e.CaptionScreen = h,
            e.Cea608Parser = g,
            e.findCea608Nalus = function(e, t, a) {
                for (var r = 0, n = t, i = [], o = function(e, t, a, r) {
                    if (4 !== e || t < 8)
                        return null;
                    var n = a.getUint8(r)
                      , i = a.getUint16(r + 1)
                      , o = a.getUint32(r + 3)
                      , s = a.getUint8(r + 7);
                    return 181 == n && 49 == i && 1195456820 == o && 3 == s
                }; n < t + a; ) {
                    if (r = e.getUint32(n),
                    6 === (31 & e.getUint8(n + 4)))
                        for (var s = n + 5, l = -1; s < n + 4 + r - 1; ) {
                            l = 0;
                            for (var u = 255; 255 === u; )
                                l += u = e.getUint8(s),
                                s++;
                            var d = 0;
                            for (u = 255; 255 === u; )
                                d += u = e.getUint8(s),
                                s++;
                            o(l, d, e, s) && i.push([s, d]),
                            s += d
                        }
                    n += r + 4
                }
                return i
            }
            ,
            e.extractCea608DataFromRange = function(e, t) {
                var a = t[0]
                  , r = [[], []];
                a += 8;
                var n = 31 & e.getUint8(a);
                a += 2;
                for (var i = 0; i < n; i++) {
                    var o = e.getUint8(a)
                      , s = 4 & o
                      , l = 3 & o;
                    a++;
                    var u = e.getUint8(a);
                    a++;
                    var d = e.getUint8(a);
                    a++,
                    s && (127 & u) + (127 & d) != 0 && (0 === l ? (r[0].push(u),
                    r[0].push(d)) : 1 === l && (r[1].push(u),
                    r[1].push(d)))
                }
                return r
            }
        }(t)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = _(a(1))
          , n = _(a(25))
          , i = _(a(87))
          , o = _(a(210))
          , s = _(a(288))
          , l = _(a(213))
          , u = _(a(164))
          , d = _(a(2))
          , c = _(a(4))
          , f = _(a(0))
          , h = _(a(3))
          , p = _(a(109))
          , g = _(a(12))
          , m = _(a(21))
          , y = a(20);
        function _(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function v(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            d.default)(t).getInstance()
              , f = e.errHandler
              , _ = e.fragmentModel
              , v = e.representationController
              , b = e.mediaController
              , E = e.adapter
              , k = e.textController
              , T = e.abrController
              , S = e.playbackController
              , A = e.streamInfo
              , C = e.type
              , I = e.settings
              , P = void 0
              , w = void 0
              , M = void 0
              , R = void 0
              , x = void 0
              , D = void 0
              , O = void 0
              , N = void 0
              , L = void 0
              , U = void 0
              , F = void 0
              , B = void 0
              , j = void 0
              , G = void 0
              , V = void 0
              , K = void 0
              , $ = void 0
              , q = void 0
              , H = void 0
              , W = void 0
              , Y = void 0
              , z = void 0;
            function X(e, a) {
                if (!$ || !e)
                    return null;
                var r = e[0];
                if (O)
                    try {
                        U = a && a[C] ? (0,
                        o.default)(t).create(O, r, te.bind(this), a[C]) : (0,
                        o.default)(t).create(O, r, te.bind(this), null),
                        I.get().streaming.useAppendWindow && U.updateAppendWindow(A),
                        "function" == typeof U.getBuffer().initialize && U.getBuffer().initialize(C, A, e, _)
                    } catch (e) {
                        w.fatal("Caught error on create SourceBuffer: " + e),
                        f.error(new g.default(m.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,m.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE + C))
                    }
                else
                    U = (0,
                    s.default)(t).create(te.bind(this));
                return ye(this.getRepresentationInfo(M)),
                U
            }
            function Q(e) {
                e.chunk.streamId === A.id && e.chunk.mediaInfo.type === C && (w.info("Init fragment finished loading saving to", C + "'s init cache"),
                $.save(e.chunk),
                w.debug("Append Init fragment", C, " with representationId:", e.chunk.representationId, " and quality:", e.chunk.quality, ", data size:", e.chunk.bytes.byteLength),
                Z(e.chunk))
            }
            function J(e) {
                var t = e.chunk;
                if (t.streamId === A.id && t.mediaInfo.type === C)
                    if (Y) {
                        z = t;
                        var a = U && U.getAllBufferRanges();
                        a && a.length > 0 && S.getTimeToStreamEnd() > .5 && (w.debug("Clearing buffer because track changed - " + (a.end(a.length - 1) + .5)),
                        pe([{
                            start: 0,
                            end: a.end(a.length - 1) + .5,
                            force: !0
                        }]))
                    } else
                        Z(t)
            }
            function Z(e) {
                U.append(e),
                e.mediaInfo.type === r.default.VIDEO && Ce(c.default.VIDEO_CHUNK_RECEIVED, {
                    chunk: e
                })
            }
            function ee(e) {
                if (e && e.length > 0)
                    for (var t = 0, a = e.length; t < a; t++)
                        w.debug("Buffered range: " + e.start(t) + " - " + e.end(t) + ", currentTime = ", S.getTime())
            }
            function te(e) {
                if (e.error) {
                    if (22 === e.error.code && (K = !0,
                    D = .8 * Se(),
                    w.warn("Quota exceeded, Critical Buffer: " + D),
                    D > 0)) {
                        var t = Math.max(.2 * D, 1)
                          , a = D - t
                          , n = Math.min(I.get().streaming.bufferTimeAtTopQuality, .9 * a)
                          , i = Math.min(I.get().streaming.bufferTimeAtTopQualityLongForm, .9 * a)
                          , o = {
                            streaming: {
                                bufferToKeep: parseFloat(t.toFixed(5)),
                                bufferTimeAtTopQuality: parseFloat(n.toFixed(5)),
                                bufferTimeAtTopQualityLongForm: parseFloat(i.toFixed(5))
                            }
                        };
                        I.update(o)
                    }
                    22 !== e.error.code && Ae() || (w.warn("Clearing playback buffer to overcome quota exceed situation"),
                    Ce(c.default.QUOTA_EXCEEDED, {
                        criticalBufferLevel: D
                    }),
                    pe(he()))
                } else {
                    K = !1,
                    (j = e.chunk) && !isNaN(j.index) && (N = Math.max(j.index, N),
                    de());
                    var s = U.getAllBufferRanges();
                    if (j.segmentType === y.HTTPRequest.MEDIA_SEGMENT_TYPE)
                        ee(s),
                        ie(),
                        function() {
                            if (C !== r.default.AUDIO && C !== r.default.VIDEO)
                                return;
                            if (isNaN(q))
                                return;
                            var e = S.getTime()
                              , t = le(q, 0);
                            if (e === q && t)
                                return;
                            var a = v.getCurrentRepresentation().segmentDuration;
                            if (!(t = le(q, a)))
                                return;
                            Math.abs(e - q) > a ? q <= t.end && (S.seek(Math.max(q, t.start), !1, !0),
                            q = NaN) : e < t.start && (S.seek(t.start, !1, !0),
                            q = NaN)
                        }();
                    else if (Y) {
                        var l = S.getTime();
                        w.debug("AppendToBuffer seek target should be " + l),
                        Ce(c.default.SEEK_TARGET, {
                            time: l,
                            mediaType: C,
                            streamId: A.id
                        })
                    }
                    j && Ce(j.endFragment ? c.default.BYTES_APPENDED_END_FRAGMENT : c.default.BYTES_APPENDED, {
                        quality: j.quality,
                        startTime: j.start,
                        index: j.index,
                        bufferedRanges: s,
                        mediaType: C
                    })
                }
            }
            function ae(e) {
                e.streamInfo.id === A.id && e.mediaType === C && M !== e.newQuality && (ye(this.getRepresentationInfo(e.newQuality)),
                M = e.newQuality)
            }
            function re(e) {
                q = e.seekTime,
                R && (H = !0,
                R = !1,
                L = Number.POSITIVE_INFINITY),
                C !== r.default.FRAGMENTED_TEXT ? U.waitForUpdateEnd((function() {
                    var e = function() {
                        var e = []
                          , t = U.getAllBufferRanges();
                        if (!t || 0 === t.length)
                            return e;
                        var a = S.getTime()
                          , r = t.end(t.length - 1) + .5
                          , n = _.getRequests({
                            state: i.default.FRAGMENT_MODEL_EXECUTED,
                            time: a,
                            threshold: .01
                        })[0];
                        if (n) {
                            var o = {
                                start: 0,
                                end: n.startTime - .5
                            }
                              , s = _.getRequests({
                                state: i.default.FRAGMENT_MODEL_EXECUTED,
                                time: n.startTime - n.duration / 2,
                                threshold: .01
                            })[0];
                            s && s.startTime != n.startTime && (o.end = s.startTime),
                            o.start < o.end && o.end > t.start(0) && e.push(o);
                            var l = {
                                start: n.startTime + n.duration + .5,
                                end: r
                            }
                              , u = _.getRequests({
                                state: i.default.FRAGMENT_MODEL_EXECUTED,
                                time: n.startTime + n.duration + .5,
                                threshold: .01
                            })[0];
                            u && u.startTime !== n.startTime && (l.start = u.startTime + u.duration + .5),
                            l.start < l.end && l.start < r && e.push(l)
                        } else
                            w.debug("getAllRangesWithSafetyFactor - No request found in current time position, removing full buffer 0 -", r),
                            e.push({
                                start: 0,
                                end: r
                            });
                        return e
                    }();
                    e && 0 !== e.length || ie(),
                    pe(e)
                }
                )) : ie()
            }
            function ne() {
                q = NaN
            }
            function ie() {
                (!Y || C === r.default.FRAGMENTED_TEXT && k.isTextEnabled()) && ue()
            }
            function oe() {
                ce()
            }
            function se() {
                q = NaN,
                ce()
            }
            function le(e, t) {
                var a = U.getAllBufferRanges()
                  , r = 0
                  , n = 0
                  , i = null
                  , o = null
                  , s = 0
                  , l = void 0
                  , u = void 0
                  , d = isNaN(t) ? .15 : t;
                if (null != a) {
                    for (u = 0,
                    l = a.length; u < l; u++)
                        if (r = a.start(u),
                        n = a.end(u),
                        null === i)
                            s = Math.abs(r - e),
                            (e >= r && e < n || s <= d) && (i = r,
                            o = n);
                        else {
                            if (!((s = r - o) <= d))
                                break;
                            o = n
                        }
                    if (null !== i)
                        return {
                            start: i,
                            end: o
                        }
                }
                return null
            }
            function ue() {
                var e, t, a;
                S && (e = (isNaN(q) ? S.getTime() : q) || 0,
                x = null === (a = le(e, t)) ? 0 : a.end - e,
                Ce(c.default.BUFFER_LEVEL_UPDATED, {
                    bufferLevel: x
                }),
                ce())
            }
            function de() {
                N >= L - 1 && !R && void 0 === U.discharge && (R = !0,
                w.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for " + C),
                Ce(c.default.BUFFERING_COMPLETED))
            }
            function ce() {
                C !== r.default.AUDIO && C !== r.default.VIDEO || (H && !R && x > 0 && S && S.getTimeToStreamEnd() - x < .5 && (H = !1,
                R = !0,
                w.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED for type " + C),
                w.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED for type " + C),
                Ce(c.default.BUFFERING_COMPLETED)),
                (!I.get().streaming.lowLatencyEnabled && x < .5 || 0 === x) && !R ? fe(n.default.BUFFER_EMPTY) : (R || x >= A.manifestInfo.minBufferTime) && fe(n.default.BUFFER_LOADED))
            }
            function fe(e) {
                B === e || e === n.default.BUFFER_EMPTY && 0 === S.getTime() || C === r.default.FRAGMENTED_TEXT && !k.isTextEnabled() || (B = e,
                Ce(c.default.BUFFER_LEVEL_STATE_CHANGED, {
                    state: e
                }),
                Ce(e === n.default.BUFFER_LOADED ? c.default.BUFFER_LOADED : c.default.BUFFER_EMPTY),
                w.debug(e === n.default.BUFFER_LOADED ? "Got enough buffer to start" : "Waiting for more buffer before starting playback"))
            }
            function he() {
                var e = []
                  , t = U.getAllBufferRanges();
                if (!t || 0 === t.length)
                    return e;
                var a = S.getTime()
                  , r = Math.max(0, a - I.get().streaming.bufferToKeep)
                  , n = _.getRequests({
                    state: i.default.FRAGMENT_MODEL_EXECUTED,
                    time: a,
                    threshold: .01
                })[0];
                if (n)
                    r = Math.min(n.startTime, r);
                else if (0 === a && S.getIsDynamic())
                    return [];
                if (t.start(0) <= r) {
                    for (var o = {
                        start: 0,
                        end: r
                    }, s = 0; s < t.length && t.end(s) <= r; s++)
                        o.end = t.end(s);
                    o.start < o.end && e.push(o)
                }
                return e
            }
            function pe(e) {
                e && U && 0 !== e.length && (W.push.apply(W, e),
                V || ge())
            }
            function ge() {
                if (0 === W.length || !U)
                    return w.debug("Nothing to prune, halt pruning"),
                    W = [],
                    void (V = !1);
                var e = U.getBuffer();
                if (!e || !e.buffered || 0 === e.buffered.length)
                    return w.debug("SourceBuffer is empty (or does not exist), halt pruning"),
                    W = [],
                    void (V = !1);
                var t = W.shift();
                w.debug("Removing buffer from:", t.start, "to", t.end),
                V = !0,
                S.getTime() < t.end && (R = !1,
                N = 0),
                U.remove(t.start, t.end, t.force)
            }
            function me(e) {
                U === e.buffer && (w.debug("onRemoved buffer from:", e.from, "to", e.to),
                ee(U.getAllBufferRanges()),
                0 === W.length && (V = !1),
                e.unintended && (w.warn("Detected unintended removal from:", e.from, "to", e.to, "setting index handler time to", e.from),
                Ce(c.default.SEEK_TARGET, {
                    time: e.from,
                    mediaType: C,
                    streamId: A.id
                })),
                V ? ge() : (Y ? (Y = !1,
                z && Z(z)) : ue(),
                Ce(c.default.BUFFER_CLEARED, {
                    from: e.from,
                    to: e.to,
                    unintended: e.unintended,
                    hasEnoughSpaceToAppend: Ae(),
                    quotaExceeded: K
                })))
            }
            function ye(e) {
                e && void 0 !== e.MSETimeOffset && U && U.updateTimestampOffset && U.updateTimestampOffset(e.MSETimeOffset)
            }
            function _e(e) {
                e.sender.getStreamId() === A.id && e.sender.getType() === C && (e.error || R || ye(e.currentRepresentation))
            }
            function ve(e) {
                e.request.mediaInfo.streamInfo.id === A.id && e.request.mediaType === C && (L = e.request.index,
                de())
            }
            function be(e) {
                if (e.newMediaInfo.streamInfo.id === A.id && e.newMediaInfo.type === C) {
                    var t = U && U.getAllBufferRanges();
                    t && (w.info("Track change asked"),
                    b.getSwitchMode(C) === u.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE && t && t.length > 0 && S.getTimeToStreamEnd() > .5 && (R = !1,
                    L = Number.POSITIVE_INFINITY))
                }
            }
            function Ee() {
                ++G * (I.get().streaming.wallclockTimeUpdateInterval / 1e3) >= I.get().streaming.bufferPruningInterval && (G = 0,
                U && C !== r.default.FRAGMENTED_TEXT && (R || pe(he())))
            }
            function ke() {
                ce()
            }
            function Te(e, t) {
                O = e,
                U && t && "function" == typeof U.discharge && (F = U,
                X(t))
            }
            function Se() {
                var e, t = U.getAllBufferRanges(), a = 0, r = void 0;
                if (!t)
                    return a;
                for (r = 0,
                e = t.length; r < e; r++)
                    a += t.end(r) - t.start(r);
                return a
            }
            function Ae() {
                return Se() < D
            }
            function Ce(e, t) {
                var r = t || {};
                r.sender = P,
                r.mediaType = C,
                r.streamId = A.id,
                a.trigger(e, r)
            }
            function Ie(e, t) {
                D = Number.POSITIVE_INFINITY,
                B = void 0,
                M = l.default.QUALITY_DEFAULT,
                L = Number.POSITIVE_INFINITY,
                N = 0,
                j = null,
                R = !1,
                V = !1,
                K = !1,
                H = !1,
                x = 0,
                G = 0,
                W = [],
                q = NaN,
                U && (e || U.abort(),
                U.reset(t),
                U = null),
                Y = !1
            }
            return P = {
                getBufferControllerType: function() {
                    return "BufferController"
                },
                getRepresentationInfo: function(e) {
                    return E.convertDataToRepresentationInfo(v.getRepresentationForQuality(e))
                },
                initialize: function(e) {
                    Te(e),
                    M = T.getQualityFor(C),
                    a.on(c.default.DATA_UPDATE_COMPLETED, _e, this),
                    a.on(c.default.INIT_FRAGMENT_LOADED, Q, this),
                    a.on(c.default.MEDIA_FRAGMENT_LOADED, J, this),
                    a.on(c.default.QUALITY_CHANGE_REQUESTED, ae, this),
                    a.on(c.default.STREAM_COMPLETED, ve, this),
                    a.on(c.default.PLAYBACK_PLAYING, se, this),
                    a.on(c.default.PLAYBACK_PROGRESS, ie, this),
                    a.on(c.default.PLAYBACK_TIME_UPDATED, ie, this),
                    a.on(c.default.PLAYBACK_RATE_CHANGED, ke, this),
                    a.on(c.default.PLAYBACK_SEEKING, re, this),
                    a.on(c.default.PLAYBACK_SEEKED, ne, this),
                    a.on(c.default.PLAYBACK_STALLED, oe, this),
                    a.on(c.default.WALLCLOCK_TIME_UPDATED, Ee, this),
                    a.on(c.default.CURRENT_TRACK_CHANGED, be, this, d.default.EVENT_PRIORITY_HIGH),
                    a.on(c.default.SOURCEBUFFER_REMOVE_COMPLETED, me, this)
                },
                createBuffer: X,
                dischargePreBuffer: function() {
                    if (U && F && "function" == typeof F.discharge) {
                        var e = F.getAllBufferRanges();
                        if (e.length > 0) {
                            for (var t = "Beginning " + C + "PreBuffer discharge, adding buffer for:", a = 0; a < e.length; a++)
                                t += " start: " + e.start(a) + ", end: " + e.end(a) + ";";
                            w.debug(t)
                        } else
                            w.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");
                        for (var r = F.discharge(), n = null, i = 0; i < r.length; i++) {
                            var o = r[i]
                              , s = $.extract(o.streamId, o.representationId);
                            s && (n !== s && (U.append(s),
                            n = s),
                            U.append(o))
                        }
                        F.reset(),
                        F = null
                    }
                },
                getType: function() {
                    return C
                },
                getBuffer: function() {
                    return U
                },
                setBuffer: function(e) {
                    U = e
                },
                getBufferLevel: function() {
                    return x
                },
                getRangeAt: le,
                setMediaSource: Te,
                getMediaSource: function() {
                    return O
                },
                appendInitSegment: function(e) {
                    var t = $.extract(A.id, e);
                    return !!t && (w.info("Append Init fragment", C, " with representationId:", t.representationId, " and quality:", t.quality, ", data size:", t.bytes.byteLength),
                    Z(t),
                    !0)
                },
                replaceBuffer: function() {
                    Y = !0
                },
                getIsBufferingCompleted: function() {
                    return R
                },
                getIsPruningInProgress: function() {
                    return V
                },
                reset: function(e, t) {
                    a.off(c.default.DATA_UPDATE_COMPLETED, _e, this),
                    a.off(c.default.INIT_FRAGMENT_LOADED, Q, this),
                    a.off(c.default.MEDIA_FRAGMENT_LOADED, J, this),
                    a.off(c.default.QUALITY_CHANGE_REQUESTED, ae, this),
                    a.off(c.default.STREAM_COMPLETED, ve, this),
                    a.off(c.default.PLAYBACK_PLAYING, se, this),
                    a.off(c.default.PLAYBACK_PROGRESS, ie, this),
                    a.off(c.default.PLAYBACK_TIME_UPDATED, ie, this),
                    a.off(c.default.PLAYBACK_RATE_CHANGED, ke, this),
                    a.off(c.default.PLAYBACK_SEEKING, re, this),
                    a.off(c.default.PLAYBACK_SEEKED, ne, this),
                    a.off(c.default.PLAYBACK_STALLED, oe, this),
                    a.off(c.default.WALLCLOCK_TIME_UPDATED, Ee, this),
                    a.off(c.default.CURRENT_TRACK_CHANGED, be, this),
                    a.off(c.default.SOURCEBUFFER_REMOVE_COMPLETED, me, this),
                    Ie(e, t)
                },
                updateAppendWindow: function() {
                    U && !R && U.updateAppendWindow(A)
                }
            },
            w = (0,
            h.default)(t).getInstance().getLogger(P),
            $ = (0,
            p.default)(t).getInstance(),
            Ie(),
            P
        }
        v.__dashjs_factory_name = "BufferController",
        t.default = f.default.getClassFactory(v)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(3))
          , n = d(a(12))
          , i = d(a(2))
          , o = d(a(4))
          , s = d(a(0))
          , l = d(a(159))
          , u = d(a(21));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e, t, a, s) {
            var d = this.context
              , c = (0,
            i.default)(d).getInstance()
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = []
              , _ = []
              , v = a;
            function b() {
                try {
                    return p.buffered
                } catch (e) {
                    return h.error("getAllBufferRanges exception: " + e.message),
                    null
                }
            }
            function E(a) {
                p && I((function() {
                    try {
                        var r = e.duration
                          , n = 0;
                        a && !isNaN(a.start) && !isNaN(a.duration) && isFinite(a.duration) && (r = a.start + a.duration),
                        a && !isNaN(a.start) && (n = a.start),
                        p.appendWindowStart = 0,
                        p.appendWindowEnd = r,
                        p.appendWindowStart = n,
                        h.debug("Updated append window for " + t.type + ". Set start to " + p.appendWindowStart + " and end to " + p.appendWindowEnd)
                    } catch (e) {
                        h.warn("Failed to set append window")
                    }
                }
                ))
            }
            function k() {
                var e = this;
                if (_.length > 0) {
                    g = !0;
                    var t = _[0];
                    _.splice(0, 1);
                    var a = []
                      , r = function() {
                        var r = b();
                        !function(e, t, a, r) {
                            t && t.length > 0 && t.length < a.length && function(e, t) {
                                for (var a = 0; a < e.length; a++) {
                                    var r = Math.round(e.start(a))
                                      , n = Math.round(e.end(a));
                                    if (n === t.start || r === t.end || t.start >= r && t.end <= n)
                                        return !0
                                }
                                return !1
                            }(t, r) && c.trigger(o.default.SOURCEBUFFER_REMOVE_COMPLETED, {
                                buffer: e,
                                from: a.end(a.length - 2),
                                to: a.start(a.length - 1),
                                unintended: !0
                            })
                        }(e, a, r, t),
                        _.length > 0 ? k.call(this) : (g = !1,
                        v && v({
                            chunk: t
                        }))
                    };
                    try {
                        0 === t.bytes.length ? r.call(this) : (a = b(),
                        p.appendBuffer ? p.appendBuffer(t.bytes) : p.append(t.bytes, t),
                        I(r.bind(this)))
                    } catch (e) {
                        h.fatal('SourceBuffer append failed "' + e + '"'),
                        _.length > 0 ? k() : g = !1,
                        v && v({
                            chunk: t,
                            error: new n.default(e.code,e.message)
                        })
                    }
                }
            }
            function T() {
                if (y.length > 0) {
                    var e = y.shift();
                    p.updating ? I(e) : (e(),
                    T())
                }
            }
            function S() {
                p.updating || T()
            }
            function A() {
                p.updating || T()
            }
            function C() {
                h.error("SourceBufferSink error", t.type)
            }
            function I(e) {
                y.push(e),
                p.updating || T()
            }
            return f = {
                getAllBufferRanges: b,
                getBuffer: function() {
                    return p
                },
                append: function(e) {
                    e ? (_.push(e),
                    g || I(k.bind(this))) : v({
                        chunk: e,
                        error: new n.default(u.default.APPEND_ERROR_CODE,u.default.APPEND_ERROR_MESSAGE)
                    })
                },
                remove: function(t, a, r) {
                    var i = this;
                    I((function() {
                        try {
                            t >= 0 && a > t && (r || "ended" !== e.readyState) && p.remove(t, a),
                            I((function() {
                                c.trigger(o.default.SOURCEBUFFER_REMOVE_COMPLETED, {
                                    buffer: i,
                                    from: t,
                                    to: a,
                                    unintended: !1
                                })
                            }
                            ))
                        } catch (e) {
                            c.trigger(o.default.SOURCEBUFFER_REMOVE_COMPLETED, {
                                buffer: i,
                                from: t,
                                to: a,
                                unintended: !1,
                                error: new n.default(e.code,e.message)
                            })
                        }
                    }
                    ))
                },
                abort: function() {
                    try {
                        ("open" === e.readyState || p.setTextTrack && "ended" === e.readyState) && p.abort()
                    } catch (e) {
                        h.error('SourceBuffer append abort failed: "' + e + '"')
                    }
                    _ = []
                },
                reset: function(t) {
                    if (p) {
                        if ("function" == typeof p.removeEventListener && (p.removeEventListener("updateend", A, !1),
                        p.removeEventListener("error", C, !1),
                        p.removeEventListener("abort", C, !1)),
                        clearInterval(m),
                        y = [],
                        !t) {
                            try {
                                p.getClassName && "TextSourceBuffer" === p.getClassName() || (h.debug("Removing sourcebuffer from media source"),
                                e.removeSourceBuffer(p))
                            } catch (e) {
                                h.error("Failed to remove source buffer from media source.")
                            }
                            p = null
                        }
                        g = !1
                    }
                    _ = [],
                    v = null
                },
                updateTimestampOffset: function(e) {
                    p.timestampOffset === e || isNaN(e) || I((function() {
                        e < 0 && (e += .001),
                        p.timestampOffset = e
                    }
                    ))
                },
                hasDiscontinuitiesAfter: function(e) {
                    try {
                        var t = b();
                        if (t && t.length > 1)
                            for (var a = 0, r = t.length; a < r; a++)
                                if (a > 0 && e < t.start(a) && t.start(a) > t.end(a - 1) + .1)
                                    return !0
                    } catch (e) {
                        h.error("hasDiscontinuities exception: " + e.message)
                    }
                    return !1
                },
                waitForUpdateEnd: I,
                updateAppendWindow: E
            },
            function() {
                h = (0,
                r.default)(d).getInstance().getLogger(f),
                g = !1;
                var a = t.codec;
                try {
                    if (a.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))
                        throw new Error("not really supported");
                    (p = s || e.addSourceBuffer(a)).changeType && s && (h.debug("Doing period transition with changeType"),
                    p.changeType(a)),
                    E();
                    if ("function" == typeof p.addEventListener)
                        try {
                            p.addEventListener("updateend", A, !1),
                            p.addEventListener("error", C, !1),
                            p.addEventListener("abort", C, !1)
                        } catch (e) {
                            m = setInterval(S, 50)
                        }
                    else
                        m = setInterval(S, 50)
                } catch (e) {
                    if (!t.isText && -1 === a.indexOf('codecs="stpp') && -1 === a.indexOf('codecs="wvtt'))
                        throw e;
                    var n = (0,
                    l.default)(d).getInstance();
                    p = n.getTextSourceBuffer()
                }
            }(),
            f
        }
        c.__dashjs_factory_name = "SourceBufferSink";
        var f = s.default.getClassFactory(c);
        t.default = f
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        }, o = a(56);
        function s() {
            return {
                customTimeRangeArray: [],
                length: 0,
                add: function(e, t) {
                    var a = 0;
                    for (a = 0; a < this.customTimeRangeArray.length && e > this.customTimeRangeArray[a].start; a++)
                        ;
                    for (this.customTimeRangeArray.splice(a, 0, {
                        start: e,
                        end: t
                    }),
                    a = 0; a < this.customTimeRangeArray.length - 1; a++)
                        this.mergeRanges(a, a + 1) && a--;
                    this.length = this.customTimeRangeArray.length
                },
                clear: function() {
                    this.customTimeRangeArray = [],
                    this.length = 0
                },
                remove: function(e, t) {
                    for (var a = 0; a < this.customTimeRangeArray.length; a++)
                        if (e <= this.customTimeRangeArray[a].start && t >= this.customTimeRangeArray[a].end)
                            this.customTimeRangeArray.splice(a, 1),
                            a--;
                        else {
                            if (e > this.customTimeRangeArray[a].start && t < this.customTimeRangeArray[a].end) {
                                this.customTimeRangeArray.splice(a + 1, 0, {
                                    start: t,
                                    end: this.customTimeRangeArray[a].end
                                }),
                                this.customTimeRangeArray[a].end = e;
                                break
                            }
                            e > this.customTimeRangeArray[a].start && e < this.customTimeRangeArray[a].end ? this.customTimeRangeArray[a].end = e : t > this.customTimeRangeArray[a].start && t < this.customTimeRangeArray[a].end && (this.customTimeRangeArray[a].start = t)
                        }
                    this.length = this.customTimeRangeArray.length
                },
                mergeRanges: function(e, t) {
                    var a = this.customTimeRangeArray[e]
                      , r = this.customTimeRangeArray[t];
                    return a.start <= r.start && r.start <= a.end && a.end <= r.end ? (a.end = r.end,
                    this.customTimeRangeArray.splice(t, 1),
                    !0) : r.start <= a.start && a.start <= r.end && r.end <= a.end ? (a.start = r.start,
                    this.customTimeRangeArray.splice(t, 1),
                    !0) : r.start <= a.start && a.start <= r.end && a.end <= r.end ? (this.customTimeRangeArray.splice(e, 1),
                    !0) : a.start <= r.start && r.start <= a.end && r.end <= a.end && (this.customTimeRangeArray.splice(t, 1),
                    !0)
                },
                start: function(e) {
                    return (0,
                    o.checkInteger)(e),
                    e >= this.customTimeRangeArray.length || e < 0 ? NaN : this.customTimeRangeArray[e].start
                },
                end: function(e) {
                    return (0,
                    o.checkInteger)(e),
                    e >= this.customTimeRangeArray.length || e < 0 ? NaN : this.customTimeRangeArray[e].end
                }
            }
        }
        s.__dashjs_factory_name = "CustomTimeRanges",
        t.default = i.default.getClassFactory(s)
    }
    , function(e, t, a) {
        t.generateISD = a(275).generateISD,
        t.fromXML = a(276).fromXML,
        t.renderHTML = a(284).render
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = v(a(214))
          , n = v(a(1))
          , i = v(a(25))
          , o = v(a(215))
          , s = v(a(87))
          , l = v(a(2))
          , u = v(a(4))
          , d = v(a(0))
          , c = v(a(295))
          , f = v(a(44))
          , h = v(a(296))
          , p = v(a(297))
          , g = v(a(298))
          , m = v(a(3))
          , y = a(20)
          , _ = a(56);
        function v(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function b() {
            var e = this.context
              , t = (0,
            m.default)(e).getInstance()
              , a = (0,
            l.default)(e).getInstance()
              , d = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0
              , T = void 0
              , S = void 0
              , A = void 0
              , C = void 0
              , I = void 0
              , P = void 0
              , w = void 0
              , M = void 0
              , R = void 0
              , x = void 0
              , D = void 0
              , O = void 0
              , N = void 0
              , L = void 0
              , U = void 0
              , F = void 0
              , B = void 0
              , j = void 0;
            function G() {
                (b = (0,
                r.default)(e).create({
                    dashMetrics: B,
                    mediaPlayerModel: x,
                    settings: j
                })).initialize()
            }
            function V() {
                k = {},
                T = {},
                A = {},
                S = {},
                N = {},
                F = {},
                void 0 === I && (I = !1),
                O = void 0,
                L = void 0,
                U = void 0,
                clearTimeout(C),
                C = null
            }
            function K(e) {
                e.mediaType === n.default.VIDEO && (O = e.oldQuality,
                L.push(O, R.getPlaybackQuality()))
            }
            function $(e) {
                e.metric !== i.default.HTTP_REQUEST || !e.value || e.value.type !== y.HTTPRequest.MEDIA_SEGMENT_TYPE || e.mediaType !== n.default.AUDIO && e.mediaType !== n.default.VIDEO || U.push(e.mediaType, e.value, j.get().streaming.abr.useDeadTimeLatency),
                e.metric !== i.default.BUFFER_LEVEL || e.mediaType !== n.default.AUDIO && e.mediaType !== n.default.VIDEO || function(e, t) {
                    var a = j.get().streaming.abr.ABRStrategy;
                    if (a === n.default.ABR_STRATEGY_BOLA)
                        return void (F[e] = !0);
                    if (a === n.default.ABR_STRATEGY_THROUGHPUT)
                        return void (F[e] = !1);
                    var r = x.getStableBufferTime()
                      , i = r
                      , o = .5 * r
                      , s = F[e]
                      , l = t > (s ? o : i);
                    F[e] = l,
                    l !== s && (l ? v.info("[" + e + "] switching from throughput to buffer occupancy ABR rule (buffer: " + t.toFixed(3) + ").") : v.info("[" + e + "] switching from buffer occupancy to throughput ABR rule (buffer: " + t.toFixed(3) + ")."))
                }(e.mediaType, .001 * e.value.level)
            }
            function q(e, t) {
                return k[t] = k[t] || {},
                k[t].hasOwnProperty(e) || (k[t][e] = 0),
                function(e, t) {
                    if (t !== n.default.VIDEO || !j.get().streaming.abr.limitBitrateByPortal || !S[t])
                        return e;
                    I || te();
                    var a = M.getAdaptationForType(0, t).Representation
                      , r = e;
                    if (P > 0 && w > 0) {
                        for (; r > 0 && a[r] && P < a[r].width && P - a[r - 1].width < a[r].width - P; )
                            r -= 1;
                        for (; r < a.length - 1 && a[r].width === a[r + 1].width; )
                            r += 1
                    }
                    return r
                }(function(e, t, a) {
                    var r = j.get().streaming.abr.maxRepresentationRatio[t];
                    if (isNaN(r) || r >= 1 || r < 0)
                        return e;
                    return Math.min(e, Math.round(a * r))
                }(function(e, t) {
                    var a = e;
                    if (!S[t])
                        return a;
                    var r = W(t);
                    void 0 !== r && (a = Math.max(e, r));
                    var n = H(t);
                    void 0 !== n && (a = Math.min(a, n));
                    return a
                }(k[t][e], e), e, k[t][e]), e)
            }
            function H(e) {
                var t = function(e) {
                    return j.get().streaming.abr.maxBitrate[e]
                }(e);
                return t > -1 ? Q(S[e].getMediaInfo(), t) : void 0
            }
            function W(e) {
                var t = function(e) {
                    return j.get().streaming.abr.minBitrate[e]
                }(e);
                if (t > -1) {
                    var a = S[e].getMediaInfo()
                      , r = J(a)
                      , n = Q(a, t);
                    return r[n] && n < r.length - 1 && r[n].bitrate < 1e3 * t && n++,
                    n
                }
            }
            function Y(e, t, a, r) {
                var n = t.id
                  , i = ee(e);
                (0,
                _.checkInteger)(a);
                var o = q(e, n);
                a !== i && a >= 0 && a <= o && z(e, i, a, o, r)
            }
            function z(e, t, r, n, i) {
                if (e && S[e]) {
                    var o = S[e].getStreamInfo()
                      , s = o ? o.id : null;
                    if (j.get().debug.logLevel === m.default.LOG_LEVEL_DEBUG) {
                        var l = B.getCurrentBufferLevel(e);
                        v.info("[" + e + "] switch from " + t + " to " + r + "/" + n + " (buffer: " + l + ") " + (i ? JSON.stringify(i) : "."))
                    }
                    !function(e, t, a) {
                        T[t] = T[t] || {},
                        T[t][e] = a
                    }(e, s, r),
                    a.trigger(u.default.QUALITY_CHANGE_REQUESTED, {
                        mediaType: e,
                        streamInfo: o,
                        oldQuality: t,
                        newQuality: r,
                        reason: i
                    });
                    var d = U.getAverageThroughput(e);
                    isNaN(d) || D.setSavedBitrateSettings(e, d)
                }
            }
            function X(e, t) {
                A[e].state = t
            }
            function Q(e, t, a) {
                var r = e && e.type ? S[e.type].getRepresentationInfo() : null;
                if (j.get().streaming.abr.useDeadTimeLatency && a && r && r.fragmentDuration) {
                    a /= 1e3;
                    var n = r.fragmentDuration;
                    if (a > n)
                        return 0;
                    t *= 1 - a / n
                }
                for (var i = J(e), o = i.length - 1; o >= 0; o--) {
                    if (1e3 * t >= i[o].bitrate)
                        return o
                }
                return 0
            }
            function J(e) {
                var t = [];
                if (!e || !e.bitrateList)
                    return t;
                for (var a = e.bitrateList, r = e.type, n = void 0, i = 0, s = a.length; i < s; i++)
                    (n = new o.default).mediaType = r,
                    n.qualityIndex = i,
                    n.bitrate = a[i].bandwidth,
                    n.width = a[i].width,
                    n.height = a[i].height,
                    n.scanType = a[i].scanType,
                    t.push(n);
                return t
            }
            function Z(e) {
                return F[e]
            }
            function ee(e) {
                if (e && S[e]) {
                    var t = S[e].getStreamInfo()
                      , a = t ? t.id : null;
                    if (a)
                        return T[a] = T[a] || {},
                        T[a].hasOwnProperty(e) || (T[a][e] = 0),
                        T[a][e]
                }
                return 0
            }
            function te() {
                if (R) {
                    var e = j.get().streaming.abr.usePixelRatioInLimitBitrateByPortal && window.hasOwnProperty("devicePixelRatio") ? window.devicePixelRatio : 1;
                    P = R.getClientWidth() * e,
                    w = R.getClientHeight() * e
                }
            }
            function ae(t) {
                var a = t.request.mediaType;
                if (j.get().streaming.abr.autoSwitchBitrate[a]) {
                    var r = S[a];
                    if (!r)
                        return;
                    var n = (0,
                    c.default)(e).create({
                        abrController: d,
                        streamProcessor: r,
                        currentRequest: t.request,
                        useBufferOccupancyABR: Z(a)
                    })
                      , o = b.shouldAbandonFragment(n);
                    if (o.quality > f.default.NO_CHANGE) {
                        var l = r.getFragmentModel();
                        l.getRequests({
                            state: s.default.FRAGMENT_MODEL_LOADING,
                            index: t.request.index
                        })[0] && (l.abortRequests(),
                        X(a, i.default.ABANDON_LOAD),
                        N[a].reset(),
                        N[a].push({
                            oldValue: ee(a),
                            newValue: o.quality,
                            confidence: 1,
                            reason: o.reason
                        }),
                        Y(a, E.getActiveStreamInfo(), o.quality, o.reason),
                        clearTimeout(C),
                        C = setTimeout((function() {
                            X(a, i.default.ALLOW_LOAD),
                            C = null
                        }
                        ), j.get().streaming.abandonLoadTimeout))
                    }
                }
            }
            return d = {
                isPlayingAtTopQuality: function(e) {
                    var t = e ? e.id : null
                      , a = ee(n.default.AUDIO)
                      , r = ee(n.default.VIDEO);
                    return a === q(n.default.AUDIO, t) && r === q(n.default.VIDEO, t)
                },
                updateTopQualityIndex: function(e) {
                    if (e) {
                        var t = e.type
                          , a = e.streamInfo.id
                          , r = e.representationCount - 1;
                        return function(e, t, a) {
                            k[t] = k[t] || {},
                            k[t][e] = a
                        }(t, a, r),
                        r
                    }
                },
                getThroughputHistory: function() {
                    return U
                },
                getBitrateList: J,
                getQualityForBitrate: Q,
                getTopBitrateInfoFor: function(e) {
                    if (e && S && S[e]) {
                        var t = S[e].getStreamInfo();
                        if (t && t.id) {
                            var a = q(e, t.id)
                              , r = J(S[e].getMediaInfo());
                            return r[a] ? r[a] : null
                        }
                    }
                    return null
                },
                getMaxAllowedIndexFor: H,
                getMinAllowedIndexFor: W,
                getInitialBitrateFor: function(e) {
                    if (function() {
                        if (!D || !D.hasOwnProperty("getSavedBitrateSettings"))
                            throw new Error(n.default.MISSING_CONFIG_ERROR)
                    }(),
                    e === n.default.TEXT || e === n.default.FRAGMENTED_TEXT)
                        return NaN;
                    var t = D.getSavedBitrateSettings(e)
                      , a = j.get().streaming.abr.initialBitrate[e]
                      , r = j.get().streaming.abr.initialRepresentationRatio[e];
                    if (-1 === a)
                        if (r > -1) {
                            var i = M.getAdaptationForType(0, e).Representation;
                            if (Array.isArray(i))
                                a = i[Math.max(Math.round(i.length * r) - 1, 0)].bandwidth;
                            else
                                a = 0
                        } else
                            a = isNaN(t) ? e === n.default.VIDEO ? 1e3 : 100 : t;
                    return a
                },
                getQualityFor: ee,
                getAbandonmentStateFor: function(e) {
                    return A[e] ? A[e].state : null
                },
                setPlaybackQuality: Y,
                checkPlaybackQuality: function(t) {
                    if (t && S && S[t]) {
                        var a = S[t].getStreamInfo()
                          , r = a ? a.id : null
                          , n = ee(t)
                          , o = (0,
                        c.default)(e).create({
                            abrController: d,
                            streamProcessor: S[t],
                            currentValue: n,
                            switchHistory: N[t],
                            droppedFramesHistory: L,
                            useBufferOccupancyABR: Z(t)
                        });
                        if (L) {
                            var s = R.getPlaybackQuality();
                            s && L.push(O, s)
                        }
                        if (j.get().streaming.abr.autoSwitchBitrate[t]) {
                            var l = W(t)
                              , u = q(t, r)
                              , h = b.getMaxQuality(o)
                              , p = h.quality;
                            if (void 0 !== l && (p > f.default.NO_CHANGE ? p : n) < l && (p = l),
                            p > u && (p = u),
                            N[t].push({
                                oldValue: n,
                                newValue: p
                            }),
                            p > f.default.NO_CHANGE && p != n)
                                (A[t].state === i.default.ALLOW_LOAD || p > n) && z(t, n, p, u, h.reason);
                            else if (j.get().debug.logLevel === m.default.LOG_LEVEL_DEBUG) {
                                var g = B.getCurrentBufferLevel(t);
                                v.debug("[" + t + "] stay on " + n + "/" + u + " (buffer: " + g + ")")
                            }
                        }
                    }
                },
                getTopQualityIndexFor: q,
                setElementSize: te,
                setWindowResizeEventCalled: function(e) {
                    I = e
                },
                createAbrRulesCollection: G,
                registerStreamType: function(t, r) {
                    N[t] = N[t] || (0,
                    h.default)(e).create(),
                    S[t] = r,
                    A[t] = A[t] || {},
                    A[t].state = i.default.ALLOW_LOAD,
                    F[t] = !1,
                    a.on(u.default.LOADING_PROGRESS, ae, this),
                    t == n.default.VIDEO && (a.on(u.default.QUALITY_CHANGE_RENDERED, K, this),
                    L = L || (0,
                    p.default)(e).create(),
                    te()),
                    a.on(u.default.METRIC_ADDED, $, this),
                    a.on(u.default.PERIOD_SWITCH_COMPLETED, G, this),
                    U = U || (0,
                    g.default)(e).create({
                        settings: j
                    })
                },
                unRegisterStreamType: function(e) {
                    delete S[e]
                },
                setConfig: function(e) {
                    e && (e.streamController && (E = e.streamController),
                    e.domStorage && (D = e.domStorage),
                    e.mediaPlayerModel && (x = e.mediaPlayerModel),
                    e.dashMetrics && (B = e.dashMetrics),
                    e.adapter && (M = e.adapter),
                    e.videoModel && (R = e.videoModel),
                    e.settings && (j = e.settings))
                },
                reset: function() {
                    V(),
                    a.off(u.default.LOADING_PROGRESS, ae, this),
                    a.off(u.default.QUALITY_CHANGE_RENDERED, K, this),
                    a.off(u.default.METRIC_ADDED, $, this),
                    a.off(u.default.PERIOD_SWITCH_COMPLETED, G, this),
                    b && b.reset()
                }
            },
            v = t.getLogger(d),
            V(),
            d
        }
        b.__dashjs_factory_name = "AbrController";
        var E = d.default.getSingletonFactory(b);
        E.QUALITY_DEFAULT = 0,
        d.default.updateSingletonFactory(b.__dashjs_factory_name, E),
        t.default = E
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = c(a(289))
          , n = c(a(290))
          , i = c(a(291))
          , o = c(a(292))
          , s = c(a(293))
          , l = c(a(294))
          , u = c(a(0))
          , d = c(a(44));
        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function f(e) {
            e = e || {};
            var t = this.context
              , a = e.mediaPlayerModel
              , u = e.dashMetrics
              , c = e.settings
              , f = void 0
              , h = void 0;
            function p(e) {
                return e.filter((function(e) {
                    return e.quality > d.default.NO_CHANGE
                }
                ))
            }
            function g(e) {
                var a, r = {}, n = void 0, i = void 0, o = void 0, s = void 0;
                if (0 !== e.length) {
                    for (r[d.default.PRIORITY.STRONG] = d.default.NO_CHANGE,
                    r[d.default.PRIORITY.WEAK] = d.default.NO_CHANGE,
                    r[d.default.PRIORITY.DEFAULT] = d.default.NO_CHANGE,
                    n = 0,
                    a = e.length; n < a; n += 1)
                        (i = e[n]).quality !== d.default.NO_CHANGE && (r[i.priority] = r[i.priority] > d.default.NO_CHANGE ? Math.min(r[i.priority], i.quality) : i.quality);
                    return r[d.default.PRIORITY.WEAK] !== d.default.NO_CHANGE && (o = r[d.default.PRIORITY.WEAK]),
                    r[d.default.PRIORITY.DEFAULT] !== d.default.NO_CHANGE && (o = r[d.default.PRIORITY.DEFAULT]),
                    r[d.default.PRIORITY.STRONG] !== d.default.NO_CHANGE && (o = r[d.default.PRIORITY.STRONG]),
                    o !== d.default.NO_CHANGE && (s = o),
                    (0,
                    d.default)(t).create(s)
                }
            }
            return {
                initialize: function() {
                    f = [],
                    h = [],
                    c.get().streaming.abr.useDefaultABRRules && (f.push((0,
                    l.default)(t).create({
                        dashMetrics: u,
                        mediaPlayerModel: a,
                        settings: c
                    })),
                    f.push((0,
                    r.default)(t).create({
                        dashMetrics: u
                    })),
                    f.push((0,
                    n.default)(t).create({
                        dashMetrics: u
                    })),
                    f.push((0,
                    s.default)(t).create()),
                    f.push((0,
                    o.default)(t).create()),
                    h.push((0,
                    i.default)(t).create({
                        dashMetrics: u,
                        mediaPlayerModel: a,
                        settings: c
                    }))),
                    a.getABRCustomRules().forEach((function(e) {
                        "qualitySwitchRules" === e.type && f.push(e.rule(t).create()),
                        "abandonFragmentRules" === e.type && h.push(e.rule(t).create())
                    }
                    ))
                },
                reset: function() {
                    [f, h].forEach((function(e) {
                        e && e.length && e.forEach((function(e) {
                            return e.reset && e.reset()
                        }
                        ))
                    }
                    )),
                    f = [],
                    h = []
                },
                getMaxQuality: function(e) {
                    return g(p(f.map((function(t) {
                        return t.getMaxIndex(e)
                    }
                    )))) || (0,
                    d.default)(t).create()
                },
                shouldAbandonFragment: function(e) {
                    return g(p(h.map((function(t) {
                        return t.shouldAbandon(e)
                    }
                    )))) || (0,
                    d.default)(t).create()
                }
            }
        }
        f.__dashjs_factory_name = "ABRRulesCollection";
        var h = u.default.getClassFactory(f);
        h.QUALITY_SWITCH_RULES = "qualitySwitchRules",
        h.ABANDON_FRAGMENT_RULES = "abandonFragmentRules",
        u.default.updateSingletonFactory(f.__dashjs_factory_name, h),
        t.default = h
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.mediaType = null,
            this.bitrate = null,
            this.width = null,
            this.height = null,
            this.scanType = null,
            this.qualityIndex = NaN
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(43))
          , n = a(20)
          , i = l(a(0))
          , o = a(72)
          , s = l(a(305));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u(e) {
            e = e || {};
            var t = this.context
              , a = e.eventBus
              , i = e.events
              , l = e.debug
              , u = e.dashConstants
              , d = e.urlUtils
              , c = e.type
              , f = e.streamInfo
              , h = e.timelineConverter
              , p = e.dashMetrics
              , g = e.baseURLController
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0
              , T = void 0
              , S = void 0;
            function A() {
                return c
            }
            function C() {
                _ = -1,
                v = null
            }
            function I() {
                C(),
                b = null,
                S = null,
                T = null
            }
            function P(e, t, a) {
                var r = g.resolve(a.path)
                  , n = void 0
                  , i = void 0;
                return r && t !== r.url && d.isRelative(t) ? (n = r.url,
                i = r.serviceLocation,
                t && (n = d.resolve(t, n))) : n = t,
                !d.isRelative(n) && (e.url = n,
                e.serviceLocation = i,
                !0)
            }
            function w(e) {
                var t, r, n;
                e.sender.getType() === A() && (t = e.representation,
                r = t.hasInitialization(),
                n = t.hasSegments(),
                r && n ? a.trigger(i.REPRESENTATION_UPDATE_COMPLETED, {
                    sender: m,
                    representation: t
                }) : S.update(t, A(), T, r, n))
            }
            function M(e, t) {
                if (null == t)
                    return null;
                var a = new r.default
                  , i = t.representation
                  , s = i.adaptation.period.mpd.manifest.Period_asArray[i.adaptation.period.index].AdaptationSet_asArray[i.adaptation.index].Representation_asArray[i.index].bandwidth
                  , l = t.media;
                return l = (0,
                o.replaceTokenForTemplate)(l, "Number", t.replacementNumber),
                l = (0,
                o.replaceTokenForTemplate)(l, "Time", t.replacementTime),
                l = (0,
                o.replaceTokenForTemplate)(l, "Bandwidth", s),
                l = (0,
                o.replaceIDForTemplate)(l, i.id),
                l = (0,
                o.unescapeDollarsInTemplate)(l),
                a.mediaType = A(),
                a.type = n.HTTPRequest.MEDIA_SEGMENT_TYPE,
                a.range = t.mediaRange,
                a.startTime = t.presentationStartTime,
                a.duration = t.duration,
                a.timescale = i.timescale,
                a.availabilityStartTime = t.availabilityStartTime,
                a.availabilityEndTime = t.availabilityEndTime,
                a.wallStartTime = t.wallStartTime,
                a.quality = i.index,
                a.index = t.availabilityIdx,
                a.mediaInfo = e,
                a.adaptationIndex = i.adaptation.index,
                a.representationId = i.id,
                P(a, l, i) ? a : void 0
            }
            function R(e) {
                var t = !1;
                if (!e)
                    return t;
                if (E) {
                    if (k)
                        t = !0;
                    else if (v) {
                        var a = parseFloat((v.presentationStartTime - e.adaptation.period.start).toFixed(5));
                        t = (v.duration > 0 ? a + 1.5 * v.duration : a) >= e.adaptation.period.duration
                    }
                } else
                    _ >= e.availableSegmentsNumber && (t = !0);
                return t
            }
            function x(e) {
                var t = e.representation;
                t.segments && a.trigger(i.REPRESENTATION_UPDATE_COMPLETED, {
                    sender: this,
                    representation: t
                })
            }
            function D(e) {
                if (!e.error && A() === e.mediaType) {
                    var t, r = e.segments, n = e.representation, s = [], l = 0, u = void 0, d = void 0, c = void 0;
                    for (u = 0,
                    t = r ? r.length : 0; u < t; u++)
                        d = r[u],
                        (c = (0,
                        o.getTimeBasedSegment)(h, E, n, d.startTime, d.duration, d.timescale, d.media, d.mediaRange, l)) && (s.push(c),
                        c = null,
                        l++);
                    if (s.length > 0)
                        if (n.segmentAvailabilityRange = {
                            start: s[0].presentationStartTime,
                            end: s[s.length - 1].presentationStartTime
                        },
                        n.availableSegmentsNumber = s.length,
                        n.segments = s,
                        E)
                            !function(e) {
                                h.setExpectedLiveEdge(e),
                                p.updateManifestUpdateInfo({
                                    presentationStartTime: e
                                })
                            }(s[s.length - 1].presentationStartTime - 8);
                    n.hasInitialization() && a.trigger(i.REPRESENTATION_UPDATE_COMPLETED, {
                        sender: this,
                        representation: n
                    })
                }
            }
            function O() {
                y.debug("Dynamic stream complete"),
                k = !0
            }
            return m = {
                initialize: function(e) {
                    E = e,
                    k = !1,
                    S.initialize(e)
                },
                getType: A,
                getStreamInfo: function() {
                    return f
                },
                getInitRequest: function(e, t) {
                    return t ? function(e, t, a) {
                        var i = new r.default
                          , s = t.adaptation.period
                          , l = s.start;
                        if (i.mediaType = a,
                        i.type = n.HTTPRequest.INIT_SEGMENT_TYPE,
                        i.range = t.range,
                        i.availabilityStartTime = h.calcAvailabilityStartTimeFromPresentationTime(l, s.mpd, E),
                        i.availabilityEndTime = h.calcAvailabilityEndTimeFromPresentationTime(l + s.duration, s.mpd, E),
                        i.quality = t.index,
                        i.mediaInfo = e,
                        i.representationId = t.id,
                        P(i, t.initialization, t))
                            return i.url = (0,
                            o.replaceTokenForTemplate)(i.url, "Bandwidth", t.bandwidth),
                            i
                    }(e, t, A()) : null
                },
                getRequestForSegment: M,
                getSegmentRequestForTime: function(e, t, a, n) {
                    var i = null;
                    if (!t || !t.segmentInfoType)
                        return i;
                    var o = _
                      , s = !!n && n.keepIdx
                      , l = !(!n || !n.ignoreIsFinished);
                    b !== a && (b = a,
                    y.debug("Getting the request for time : " + a));
                    var d = S.getSegmentByTime(t, a);
                    return d ? (_ = d.availabilityIdx,
                    v = d,
                    y.debug("Index for time " + a + " is " + _),
                    i = M(e, d)) : !l && R(t) && ((i = new r.default).action = r.default.ACTION_COMPLETE,
                    i.index = _ - 1,
                    i.mediaType = c,
                    i.mediaInfo = e,
                    y.debug("Signal complete in getSegmentRequestForTime")),
                    s && o >= 0 && (_ = t.segmentInfoType === u.SEGMENT_TIMELINE && E ? _ : o),
                    i
                },
                getNextSegmentRequest: function(e, t) {
                    var a = null;
                    if (!t || !t.segmentInfoType)
                        return null;
                    b = null;
                    var n = _ + 1;
                    y.debug("Getting the next request at index: " + n);
                    var i = S.getSegmentByIndex(t, n, v ? v.mediaStartTime : -1);
                    return i || !function(e) {
                        return !isFinite(e.adaptation.period.duration)
                    }(t) || k ? (i ? (a = M(e, i),
                    _ = i.availabilityIdx) : _ = E ? n - 1 : n,
                    i ? v = i : R(t) && ((a = new r.default).action = r.default.ACTION_COMPLETE,
                    a.index = _ - 1,
                    a.mediaType = A(),
                    a.mediaInfo = e,
                    y.debug("Signal complete")),
                    a) : (y.debug(A() + " No segment found at index: " + n + ". Wait for next loop"),
                    null)
                },
                setCurrentIndex: function(e) {
                    _ = e
                },
                getCurrentIndex: function() {
                    return _
                },
                isMediaFinished: R,
                reset: function() {
                    I(),
                    a.off(i.INITIALIZATION_LOADED, x, m),
                    a.off(i.SEGMENTS_LOADED, D, m),
                    a.off(i.REPRESENTATION_UPDATE_STARTED, w, m),
                    a.off(i.DYNAMIC_STREAM_COMPLETED, O, m)
                },
                resetIndex: C,
                setMimeType: function(e) {
                    T = e
                }
            },
            y = l.getLogger(m),
            I(),
            S = (0,
            s.default)(t).create(e),
            a.on(i.INITIALIZATION_LOADED, x, m),
            a.on(i.SEGMENTS_LOADED, D, m),
            a.on(i.REPRESENTATION_UPDATE_STARTED, w, m),
            a.on(i.DYNAMIC_STREAM_COMPLETED, O, m),
            m
        }
        u.__dashjs_factory_name = "DashHandler",
        t.default = i.default.getClassFactory(u)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.streamId = null,
            this.mediaInfo = null,
            this.segmentType = null,
            this.quality = NaN,
            this.index = NaN,
            this.bytes = null,
            this.start = NaN,
            this.end = NaN,
            this.duration = NaN,
            this.representationId = null,
            this.endFragment = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(313));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            var e = void 0;
            function t() {
                e = {}
            }
            function a() {
                t()
            }
            return a(),
            {
                getLoader: function(t) {
                    for (var a in e)
                        if (e.hasOwnProperty(a) && t.startsWith(a))
                            return e[a];
                    return n.default
                },
                registerLoader: function(t, a) {
                    e[t] = a
                },
                unregisterLoader: function(t) {
                    e[t] && delete e[t]
                },
                unregisterAllLoader: t,
                reset: a
            }
        }
        o.__dashjs_factory_name = "SchemeLoaderFactory";
        var s = r.default.getSingletonFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = f(a(2))
          , n = f(a(110))
          , i = f(a(0))
          , o = f(a(3))
          , s = f(a(111))
          , l = a(20)
          , u = f(a(170))
          , d = f(a(169))
          , c = a(171);
        function f(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var h = "dash.js-v" + (0,
        c.getVersionString)()
          , p = null
          , g = 1
          , m = 2
          , y = 3
          , _ = 4
          , v = "m"
          , b = "a"
          , E = "v"
          , k = "i"
          , T = "c"
          , S = "d"
          , A = "s"
          , C = "v"
          , I = "l";
        function P() {
            var e = void 0
              , t = void 0
              , a = void 0
              , i = void 0
              , c = void 0
              , f = void 0
              , P = this.context
              , w = (0,
            r.default)(P).getInstance()
              , M = (0,
            s.default)(P).getInstance();
            function R() {
                a = {
                    pr: 1,
                    nor: null,
                    st: null,
                    sf: null,
                    sid: "" + d.default.generateUuid(),
                    bs: {
                        audio: g,
                        video: g
                    },
                    cid: null,
                    did: "" + h
                }
            }
            function x() {
                var e = {
                    v: 1
                };
                return e.sid = M.get().streaming.cmcd.sid ? M.get().streaming.cmcd.sid : a.sid,
                e.cid = M.get().streaming.cmcd.cid ? M.get().streaming.cmcd.cid : a.cid,
                e.did = M.get().streaming.cmcd.did ? M.get().streaming.cmcd.did : a.did,
                e.sid = '"' + e.sid + '"',
                e.cid = '"' + e.cid + '"',
                e.did = '"' + e.did + '"',
                isNaN(a.pr) || 1 === a.pr || null === a.pr || (e.pr = a.pr),
                a.st && (e.st = a.st),
                a.sf && (e.sf = a.sf),
                e
            }
            function D(e) {
                try {
                    a.pr = e.playbackRate
                } catch (e) {}
            }
            function O(t) {
                try {
                    var r = e.getIsDynamic(t.data) ? "" + I : "" + C
                      , n = t.protocol && "MSS" === t.protocol ? "" + A : "" + S;
                    a.st = "" + r,
                    a.sf = "" + n
                } catch (e) {}
            }
            function N(e) {
                try {
                    if (e.state && e.mediaType) {
                        var t = null;
                        switch (e.state) {
                        case n.default.BUFFER_LOADED:
                            t = p;
                            break;
                        case n.default.BUFFER_EMPTY:
                            f.isSeeking() && (t = m),
                            t = _
                        }
                        a.bs[e.mediaType] = t
                    }
                } catch (e) {}
            }
            return t = {
                getQueryParameter: function(e) {
                    try {
                        return M.get().streaming.cmcd && M.get().streaming.cmcd.enabled ? {
                            key: "Common-Media-Client-Data",
                            value: function(e) {
                                try {
                                    if (!e)
                                        return null;
                                    var t = Object.keys(e)
                                      , a = t.length;
                                    return t.reduce((function(t, r, n) {
                                        return t += r + "=" + e[r],
                                        n < a - 1 && (t += ","),
                                        t
                                    }
                                    ), "")
                                } catch (e) {
                                    return null
                                }
                            }(function(e) {
                                try {
                                    return e.type === l.HTTPRequest.MPD_TYPE ? (function(e) {
                                        try {
                                            a.cid = "" + d.default.generateHashCode(e.url)
                                        } catch (e) {}
                                    }(e),
                                    (t = x()).ot = "" + v,
                                    t) : e.type === l.HTTPRequest.MEDIA_SEGMENT_TYPE ? function(e) {
                                        var t = x()
                                          , r = function(e) {
                                            try {
                                                var t = e.quality
                                                  , a = e.mediaInfo.bitrateList;
                                                return parseInt(a[t].bandwidth / 1e3)
                                            } catch (e) {
                                                return null
                                            }
                                        }(e)
                                          , n = function(e) {
                                            try {
                                                return isNaN(e.duration) ? null : Math.round(1e3 * e.duration)
                                            } catch (e) {
                                                return null
                                            }
                                        }(e)
                                          , o = "video" === e.mediaType ? "" + E : "audio" === e.mediaType ? "" + b : "fragmentedText" === e.mediaType ? "" + T : null
                                          , s = function(e) {
                                            try {
                                                return Math.round(i.getThroughputHistory().getSafeAverageThroughput(e))
                                            } catch (e) {
                                                return null
                                            }
                                        }(e.mediaType)
                                          , l = function(e) {
                                            try {
                                                var t = a.pr
                                                  , r = c.getCurrentBufferLevel(e);
                                                return isNaN(t) || isNaN(r) ? null : parseInt(r / t * 1e3)
                                            } catch (e) {
                                                return null
                                            }
                                        }(e.mediaType)
                                          , u = function(e) {
                                            try {
                                                var t = e.mediaType;
                                                if (null !== a.bs[t])
                                                    return a.bs[t];
                                                var r = c.getCurrentBufferLevel(t)
                                                  , n = e.duration;
                                                return r < n ? y : p
                                            } catch (e) {}
                                        }(e);
                                        r && (t.br = r);
                                        o && (t.ot = o);
                                        isNaN(n) || (t.d = n);
                                        isNaN(s) || (t.mtp = s);
                                        isNaN(l) || (t.dl = l);
                                        isNaN(u) || null === u || (t.bs = u);
                                        return t
                                    }(e) : e.type === l.HTTPRequest.INIT_SEGMENT_TYPE ? function() {
                                        var e = x();
                                        return e.ot = "" + k,
                                        e
                                    }() : null
                                } catch (e) {
                                    return null
                                }
                                var t
                            }(e))
                        } : null
                    } catch (e) {
                        return null
                    }
                },
                setConfig: function(e) {
                    e && (e.abrController && (i = e.abrController),
                    e.dashMetrics && (c = e.dashMetrics),
                    e.playbackController && (f = e.playbackController))
                },
                reset: function() {
                    w.off(n.default.PLAYBACK_RATE_CHANGED, D, this),
                    w.off(n.default.MANIFEST_LOADED, O, this),
                    w.off(n.default.BUFFER_LEVEL_STATE_CHANGED, N, t),
                    R()
                },
                initialize: function() {
                    w.on(n.default.PLAYBACK_RATE_CHANGED, D, t),
                    w.on(n.default.MANIFEST_LOADED, O, t),
                    w.on(n.default.BUFFER_LEVEL_STATE_CHANGED, N, t)
                }
            },
            (0,
            o.default)(P).getInstance().getLogger(t),
            e = (0,
            u.default)(P).getInstance(),
            R(),
            t
        }
        P.__dashjs_factory_name = "CmcdModel",
        t.default = i.default.getSingletonFactory(P)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.schemeIdUri = "",
            this.value = ""
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.duration = NaN,
            this.presentationTime = NaN,
            this.id = NaN,
            this.messageData = "",
            this.eventStream = null,
            this.presentationTimeDelta = NaN
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function e(t, a, r, n) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.url = t || "",
            this.serviceLocation = a || t || "",
            this.dvb_priority = r || 1,
            this.dvb_weight = n || 1,
            this.availabilityTimeOffset = 0,
            this.availabilityTimeComplete = !0
        };
        r.DEFAULT_DVB_PRIORITY = 1,
        r.DEFAULT_DVB_WEIGHT = 1,
        t.default = r
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(320));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            return {
                areEqual: function(e, t) {
                    return (0,
                    n.default)(e, t)
                }
            }
        }
        o.__dashjs_factory_name = "ObjectUtils",
        t.default = r.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.THUMBNAILS_SCHEME_ID_URIS = void 0;
        var r = h(a(1))
          , n = h(a(19))
          , i = h(a(0))
          , o = h(a(321))
          , s = h(a(39))
          , l = a(72)
          , u = h(a(4))
          , d = h(a(88))
          , c = h(a(168))
          , f = h(a(216));
        function h(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var p = t.THUMBNAILS_SCHEME_ID_URIS = ["http://dashif.org/thumbnail_tile", "http://dashif.org/guidelines/thumbnail_tile"];
        function g(e) {
            var t, a = this.context, i = e.adapter, h = e.baseURLController, g = e.streamInfo, m = e.timelineConverter, y = e.debug, _ = e.eventBus, v = e.events, b = e.dashConstants, E = (0,
            s.default)(a).getInstance(), k = void 0, T = void 0, S = void 0, A = void 0, C = void 0, I = void 0;
            function P() {
                M(),
                C = (0,
                c.default)(a).create({}),
                I = (0,
                d.default)(a).getInstance(),
                (T = (0,
                f.default)(a).create({
                    timelineConverter: m,
                    baseURLController: h,
                    debug: y,
                    eventBus: _,
                    events: v,
                    dashConstants: b,
                    urlUtils: E
                })).initialize(!!i && i.getIsDynamic()),
                function() {
                    if (!g || !i)
                        return;
                    if (!(A = i.getMediaInfoForType(g, r.default.IMAGE)))
                        return;
                    var e = i.getVoRepresentations(A);
                    e && e.length > 0 && e.forEach((function(e) {
                        (e.segmentInfoType === n.default.SEGMENT_TEMPLATE && e.segmentDuration > 0 && e.media || e.segmentInfoType === n.default.SEGMENT_TIMELINE) && w(e),
                        e.segmentInfoType === n.default.SEGMENT_BASE && w(e, !0)
                    }
                    ));
                    k.length > 0 && (k.sort((function(e, t) {
                        return e.bitrate - t.bitrate
                    }
                    )),
                    S = k.length - 1)
                }()
            }
            function w(e, t) {
                var a = new o.default;
                a.id = e.id,
                a.bitrate = e.bandwidth,
                a.width = e.width,
                a.height = e.height,
                a.tilesHor = 1,
                a.tilesVert = 1,
                e.essentialProperties && e.essentialProperties.forEach((function(e) {
                    if (p.indexOf(e.schemeIdUri) >= 0 && e.value) {
                        var t = e.value.split("x");
                        2 !== t.length || isNaN(t[0]) || isNaN(t[1]) || (a.tilesHor = parseInt(t[0], 10),
                        a.tilesVert = parseInt(t[1], 10))
                    }
                }
                )),
                t ? _.trigger(u.default.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED, {
                    mimeType: A.mimeType,
                    mediaType: r.default.IMAGE,
                    representation: e,
                    callback: function(e, t) {
                        var r = [];
                        e = function(e, t) {
                            var a, r = [], n = 0, o = void 0, s = void 0, u = void 0;
                            for (o = 0,
                            a = e.length; o < a; o++)
                                s = e[o],
                                (u = (0,
                                l.getTimeBasedSegment)(m, i.getIsDynamic(), t, s.startTime, s.duration, s.timescale, s.media, s.mediaRange, n)) && (r.push(u),
                                u = null,
                                n++);
                            return r
                        }(e, t),
                        a.segmentDuration = e[0].duration,
                        a.readThumbnail = function(a, n) {
                            var i = null;
                            r.some((function(e) {
                                if (e.start <= a && e.end > a)
                                    return i = e.url,
                                    !0
                            }
                            )),
                            i ? n(i) : e.some((function(e) {
                                if (e.mediaStartTime <= a && e.mediaStartTime + e.duration > a) {
                                    var i = h.resolve(t.path);
                                    return C.load({
                                        method: "get",
                                        url: i.url,
                                        request: {
                                            range: e.mediaRange,
                                            responseType: "arraybuffer"
                                        },
                                        onload: function(t) {
                                            var a = I.getSamplesInfo(t.target.response)
                                              , i = new Blob([t.target.response.slice(a.sampleList[0].offset, a.sampleList[0].offset + a.sampleList[0].size)],{
                                                type: "image/jpeg"
                                            })
                                              , o = window.URL.createObjectURL(i);
                                            r.push({
                                                start: e.mediaStartTime,
                                                end: e.mediaStartTime + e.duration,
                                                url: o
                                            }),
                                            n && n(o)
                                        }
                                    }),
                                    !0
                                }
                            }
                            ))
                        }
                    }
                }) : (a.startNumber = e.startNumber,
                a.segmentDuration = e.segmentDuration,
                a.timescale = e.timescale,
                a.templateUrl = function(e) {
                    var t = E.isRelative(e.media) ? E.resolve(e.media, h.resolve(e.path).url) : e.media;
                    if (!t)
                        return "";
                    return (0,
                    l.replaceIDForTemplate)(t, e.id)
                }(e)),
                a.tilesHor > 0 && a.tilesVert > 0 && (a.widthPerTile = a.width / a.tilesHor,
                a.heightPerTile = a.height / a.tilesVert,
                k.push(a))
            }
            function M() {
                k = [],
                S = -1,
                A = null
            }
            return t = {
                initialize: P,
                getTracks: function() {
                    return k
                },
                reset: M,
                setTrackByIndex: function(e) {
                    k && 0 !== k.length && (e >= k.length && (e = k.length - 1),
                    S = e)
                },
                getCurrentTrack: function() {
                    return S < 0 ? null : k[S]
                },
                getCurrentTrackIndex: function() {
                    return S
                },
                getThumbnailRequestForTime: function(e) {
                    for (var t = void 0, a = i.getVoRepresentations(A), r = 0; r < a.length; r++)
                        if (k[S].id === a[r].id) {
                            t = a[r];
                            break
                        }
                    return T.getSegmentRequestForTime(A, t, e)
                }
            },
            P(),
            t
        }
        g.__dashjs_factory_name = "ThumbnailTracks",
        t.default = i.default.getClassFactory(g)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = u(a(2))
          , n = u(a(4))
          , i = u(a(0))
          , o = u(a(3))
          , s = u(a(21))
          , l = u(a(19));
        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function d() {
            var e = this.context
              , t = (0,
            r.default)(e).getInstance()
              , a = void 0
              , i = void 0
              , u = void 0
              , d = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0;
            function _() {
                u = NaN,
                f = !1,
                c = !0,
                v()
            }
            function v() {
                null !== d && (clearTimeout(d),
                d = null)
            }
            function b(e) {
                v(),
                isNaN(e) && !isNaN(u) && (e = 1e3 * u),
                isNaN(e) || (i.debug("Refresh manifest in " + e + " milliseconds."),
                d = setTimeout(T, e))
            }
            function E() {
                f = !0;
                var e = p.getValue()
                  , t = e.url
                  , a = g.getLocation(e);
                a && (t = a),
                h.load(t)
            }
            function k(e) {
                if (p.getValue() && p.getValue().type === l.default.DYNAMIC && e.type === l.default.STATIC)
                    t.trigger(n.default.DYNAMIC_STREAM_COMPLETED);
                else {
                    p.setValue(e);
                    var a = new Date
                      , r = (a.getTime() - e.loadedTime.getTime()) / 1e3;
                    1e3 * (u = g.getManifestUpdatePeriod(e, r)) > 2147483647 && (u = 2147483.647),
                    t.trigger(n.default.MANIFEST_UPDATED, {
                        manifest: e
                    }),
                    i.info("Manifest has been refreshed at " + a + "[" + a.getTime() / 1e3 + "] "),
                    c || b()
                }
            }
            function T() {
                c || (f ? b(y.get().streaming.manifestUpdateRetryInterval) : E())
            }
            function S(e) {
                e.error ? e.error.code === s.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE && m.error(e.error) : k(e.manifest)
            }
            function A() {
                c = !1,
                b()
            }
            function C() {
                (c = !y.get().streaming.scheduleWhilePaused) && v()
            }
            function I() {
                f = !1
            }
            return a = {
                initialize: function() {
                    _(),
                    t.on(n.default.STREAMS_COMPOSED, I, this),
                    t.on(n.default.PLAYBACK_STARTED, A, this),
                    t.on(n.default.PLAYBACK_PAUSED, C, this),
                    t.on(n.default.INTERNAL_MANIFEST_LOADED, S, this)
                },
                setManifest: function(e) {
                    k(e)
                },
                refreshManifest: E,
                setConfig: function(e) {
                    e && (e.manifestModel && (p = e.manifestModel),
                    e.adapter && (g = e.adapter),
                    e.manifestLoader && (h = e.manifestLoader),
                    e.errHandler && (m = e.errHandler),
                    e.settings && (y = e.settings))
                },
                reset: function() {
                    t.off(n.default.PLAYBACK_STARTED, A, this),
                    t.off(n.default.PLAYBACK_PAUSED, C, this),
                    t.off(n.default.STREAMS_COMPOSED, I, this),
                    t.off(n.default.INTERNAL_MANIFEST_LOADED, S, this),
                    _()
                }
            },
            i = (0,
            o.default)(e).getInstance().getLogger(a),
            a
        }
        d.__dashjs_factory_name = "ManifestUpdater",
        t.default = i.default.getClassFactory(d)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = n(a(1));
        function n(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var i = function(e) {
            function t(e, a) {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var n = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return n.url = e || null,
                n.type = a || null,
                n.mediaType = r.default.STREAM,
                n.responseType = "",
                n
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(n(a(43)).default);
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.default = function(e) {
            e = e || {},
            function() {
                void 0 === e.escapeMode && (e.escapeMode = !0);
                void 0 === e.attributePrefix && (e.attributePrefix = "_");
                e.arrayAccessForm = e.arrayAccessForm || "none",
                e.emptyNodeForm = e.emptyNodeForm || "text",
                void 0 === e.enableToStringFunc && (e.enableToStringFunc = !0);
                e.arrayAccessFormPaths = e.arrayAccessFormPaths || [],
                void 0 === e.skipEmptyTextNodesForObj && (e.skipEmptyTextNodesForObj = !0);
                void 0 === e.stripWhitespaces && (e.stripWhitespaces = !0);
                e.datetimeAccessFormPaths = e.datetimeAccessFormPaths || [],
                void 0 === e.useDoubleQuotes && (e.useDoubleQuotes = !1);
                e.xmlElementsFilter = e.xmlElementsFilter || [],
                e.jsonPropertiesFilter = e.jsonPropertiesFilter || [],
                void 0 === e.keepCData && (e.keepCData = !1);
                void 0 === e.ignoreRoot && (e.ignoreRoot = !1)
            }();
            var t = 1
              , a = 3
              , r = 4
              , n = 8
              , i = 9;
            function o(e) {
                var t = e.localName;
                return null == t && (t = e.baseName),
                null != t && "" != t || (t = e.nodeName),
                t
            }
            function s(e) {
                return "string" == typeof e ? e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&apos;") : e
            }
            function l(e, t, a, r) {
                for (var n = 0; n < e.length; n++) {
                    var i = e[n];
                    if ("string" == typeof i) {
                        if (i == r)
                            break
                    } else if (i instanceof RegExp) {
                        if (i.test(r))
                            break
                    } else if ("function" == typeof i && i(t, a, r))
                        break
                }
                return n != e.length
            }
            function u(t, a, r) {
                switch (e.arrayAccessForm) {
                case "property":
                    t[a]instanceof Array ? t[a + "_asArray"] = t[a] : t[a + "_asArray"] = [t[a]]
                }
                !(t[a]instanceof Array) && e.arrayAccessFormPaths.length > 0 && l(e.arrayAccessFormPaths, t, a, r) && (t[a] = [t[a]])
            }
            function d(e) {
                var t = e.split(/[-T:+Z]/g)
                  , a = new Date(t[0],t[1] - 1,t[2])
                  , r = t[5].split(".");
                if (a.setHours(t[3], t[4], r[0]),
                r.length > 1 && a.setMilliseconds(r[1]),
                t[6] && t[7]) {
                    var n = 60 * t[6] + Number(t[7]);
                    n = 0 + ("-" == (/\d\d-\d\d:\d\d$/.test(e) ? "-" : "+") ? -1 * n : n),
                    a.setMinutes(a.getMinutes() - n - a.getTimezoneOffset())
                } else
                    -1 !== e.indexOf("Z", e.length - 1) && (a = new Date(Date.UTC(a.getFullYear(), a.getMonth(), a.getDate(), a.getHours(), a.getMinutes(), a.getSeconds(), a.getMilliseconds())));
                return a
            }
            function c(a, r, n, i) {
                return !(r == t && e.xmlElementsFilter.length > 0) || l(e.xmlElementsFilter, a, n, i)
            }
            function f(s, h) {
                if (s.nodeType == i) {
                    for (var p = new Object, g = s.childNodes, m = 0; m < g.length; m++) {
                        if ((_ = g[m]).nodeType == t)
                            if (e.ignoreRoot)
                                p = f(_);
                            else
                                (p = {})[v = o(_)] = f(_)
                    }
                    return p
                }
                if (s.nodeType == t) {
                    (p = new Object).__cnt = 0;
                    var y = [];
                    for (g = s.childNodes,
                    m = 0; m < g.length; m++) {
                        var _, v = o(_ = g[m]);
                        if (_.nodeType != n) {
                            var b = h + "." + v;
                            if (c(p, _.nodeType, v, b))
                                if (p.__cnt++,
                                null == p[v]) {
                                    var E = f(_, b);
                                    if ("#text" != v || /[^\s]/.test(E))
                                        (k = {})[v] = E,
                                        y.push(k);
                                    p[v] = E,
                                    u(p, v, b)
                                } else {
                                    null != p[v] && (p[v]instanceof Array || (p[v] = [p[v]],
                                    u(p, v, b)));
                                    var k;
                                    E = f(_, b);
                                    if ("#text" != v || /[^\s]/.test(E))
                                        (k = {})[v] = E,
                                        y.push(k);
                                    p[v][p[v].length] = E
                                }
                        }
                    }
                    p.__children = y;
                    for (var T = o(s), S = 0; S < s.attributes.length; S++) {
                        var A = s.attributes[S];
                        p.__cnt++;
                        for (var C = A.value, I = 0, P = e.matchers.length; I < P; I++) {
                            var w = e.matchers[I];
                            w.test(A, T) && (C = w.converter(A.value))
                        }
                        p[e.attributePrefix + A.name] = C
                    }
                    var M = function(e) {
                        return e.prefix
                    }(s);
                    return null != M && "" != M && (p.__cnt++,
                    p.__prefix = M),
                    null != p["#text"] && (p.__text = p["#text"],
                    p.__text instanceof Array && (p.__text = p.__text.join("\n")),
                    e.stripWhitespaces && (p.__text = p.__text.trim()),
                    delete p["#text"],
                    "property" == e.arrayAccessForm && delete p["#text_asArray"],
                    p.__text = function(t, a, r) {
                        if (e.datetimeAccessFormPaths.length > 0) {
                            var n = r.split(".#")[0];
                            return l(e.datetimeAccessFormPaths, t, a, n) ? d(t) : t
                        }
                        return t
                    }(p.__text, v, h + "." + v)),
                    null != p["#cdata-section"] && (p.__cdata = p["#cdata-section"],
                    delete p["#cdata-section"],
                    "property" == e.arrayAccessForm && delete p["#cdata-section_asArray"]),
                    0 == p.__cnt && "text" == e.emptyNodeForm ? p = "" : 1 == p.__cnt && null != p.__text ? p = p.__text : 1 != p.__cnt || null == p.__cdata || e.keepCData ? p.__cnt > 1 && null != p.__text && e.skipEmptyTextNodesForObj && (e.stripWhitespaces && "" == p.__text || "" == p.__text.trim()) && delete p.__text : p = p.__cdata,
                    delete p.__cnt,
                    !e.enableToStringFunc || null == p.__text && null == p.__cdata || (p.toString = function() {
                        return (null != this.__text ? this.__text : "") + (null != this.__cdata ? this.__cdata : "")
                    }
                    ),
                    p
                }
                if (s.nodeType == a || s.nodeType == r)
                    return s.nodeValue
            }
            function h(t, a, r, n) {
                var i = "<" + (null != t && null != t.__prefix ? t.__prefix + ":" : "") + a;
                if (null != r)
                    for (var o = 0; o < r.length; o++) {
                        var l = r[o]
                          , u = t[l];
                        e.escapeMode && (u = s(u)),
                        i += " " + l.substr(e.attributePrefix.length) + "=",
                        e.useDoubleQuotes ? i += '"' + u + '"' : i += "'" + u + "'"
                    }
                return i += n ? "/>" : ">"
            }
            function p(e, t) {
                return "</" + (null != e.__prefix ? e.__prefix + ":" : "") + t + ">"
            }
            function g(t, a) {
                return "property" == e.arrayAccessForm && (r = a.toString(),
                n = "_asArray",
                -1 !== r.indexOf(n, r.length - n.length)) || 0 == a.toString().indexOf(e.attributePrefix) || 0 == a.toString().indexOf("__") || t[a]instanceof Function;
                var r, n
            }
            function m(e) {
                var t = 0;
                if (e instanceof Object)
                    for (var a in e)
                        g(e, a) || t++;
                return t
            }
            function y(t, a, r) {
                return 0 == e.jsonPropertiesFilter.length || "" == r || l(e.jsonPropertiesFilter, t, a, r)
            }
            function _(t) {
                var a = [];
                if (t instanceof Object)
                    for (var r in t)
                        -1 == r.toString().indexOf("__") && 0 == r.toString().indexOf(e.attributePrefix) && a.push(r);
                return a
            }
            function v(t) {
                var a = "";
                return t instanceof Object ? a += function(t) {
                    var a = "";
                    return null != t.__cdata && (a += "<![CDATA[" + t.__cdata + "]]>"),
                    null != t.__text && (e.escapeMode ? a += s(t.__text) : a += t.__text),
                    a
                }(t) : null != t && (e.escapeMode ? a += s(t) : a += t),
                a
            }
            function b(e, t) {
                return "" === e ? t : e + "." + t
            }
            function E(e, t, a, r) {
                var n = "";
                if (0 == e.length)
                    n += h(e, t, a, !0);
                else
                    for (var i = 0; i < e.length; i++)
                        n += h(e[i], t, _(e[i]), !1),
                        n += k(e[i], b(r, t)),
                        n += p(e[i], t);
                return n
            }
            function k(e, t) {
                var a = "";
                if (m(e) > 0)
                    for (var r in e)
                        if (!g(e, r) && ("" == t || y(e, r, b(t, r)))) {
                            var n = e[r]
                              , i = _(n);
                            if (null == n || null == n)
                                a += h(n, r, i, !0);
                            else if (n instanceof Object)
                                if (n instanceof Array)
                                    a += E(n, r, i, t);
                                else if (n instanceof Date)
                                    a += h(n, r, i, !1),
                                    a += n.toISOString(),
                                    a += p(n, r);
                                else {
                                    m(n) > 0 || null != n.__text || null != n.__cdata ? (a += h(n, r, i, !1),
                                    a += k(n, b(t, r)),
                                    a += p(n, r)) : a += h(n, r, i, !0)
                                }
                            else
                                a += h(n, r, i, !1),
                                a += v(n),
                                a += p(n, r)
                        }
                return a += v(e)
            }
            this.parseXmlString = function(e) {
                var t;
                window.ActiveXObject || window;
                if (void 0 === e)
                    return null;
                if (window.DOMParser) {
                    var a = new window.DOMParser;
                    try {
                        (t = a.parseFromString(e, "text/xml")).getElementsByTagNameNS("*", "parsererror").length > 0 && (t = null)
                    } catch (e) {
                        t = null
                    }
                } else
                    0 == e.indexOf("<?") && (e = e.substr(e.indexOf("?>") + 2)),
                    (t = new ActiveXObject("Microsoft.XMLDOM")).async = "false",
                    t.loadXML(e);
                return t
            }
            ,
            this.asArray = function(e) {
                return void 0 === e || null == e ? [] : e instanceof Array ? e : [e]
            }
            ,
            this.toXmlDateTime = function(e) {
                return e instanceof Date ? e.toISOString() : "number" == typeof e ? new Date(e).toISOString() : null
            }
            ,
            this.asDateTime = function(e) {
                return "string" == typeof e ? d(e) : e
            }
            ,
            this.xml2json = function(e) {
                return f(e)
            }
            ,
            this.xml_str2json = function(e) {
                var t = this.parseXmlString(e);
                return null != t ? this.xml2json(t) : null
            }
            ,
            this.json2xml_str = function(e) {
                return k(e, "")
            }
            ,
            this.json2xml = function(e) {
                var t = this.json2xml_str(e);
                return this.parseXmlString(t)
            }
            ,
            this.getVersion = function() {
                return "1.2.0"
            }
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }(), i = a(345), o = (r = i) && r.__esModule ? r : {
            default: r
        };
        var s = function() {
            function e(t, a, r) {
                var n = this;
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this._name = t || "",
                this._properties = [],
                this._children = r || [],
                Array.isArray(a) && a.forEach((function(e) {
                    n._properties.push(new o.default(e))
                }
                ))
            }
            return n(e, [{
                key: "name",
                get: function() {
                    return this._name
                }
            }, {
                key: "children",
                get: function() {
                    return this._children
                }
            }, {
                key: "properties",
                get: function() {
                    return this._properties
                }
            }]),
            e
        }();
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(385), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            e = e || {};
            var t = {
                "urn:dvb:dash:reporting:2014": i.default
            }
              , a = this.context
              , r = void 0
              , n = e.debug ? e.debug.getLogger(r) : {}
              , o = e.metricsConstants;
            return r = {
                create: function(e, r) {
                    var i = void 0;
                    try {
                        (i = t[e.schemeIdUri](a).create({
                            metricsConstants: o
                        })).initialize(e, r)
                    } catch (t) {
                        i = null,
                        n.error("ReportingFactory: could not create Reporting with schemeIdUri " + e.schemeIdUri + " (" + t.message + ")")
                    }
                    return i
                },
                register: function(e, a) {
                    t[e] = a
                },
                unregister: function(e) {
                    delete t[e]
                }
            }
        }
        o.__dashjs_factory_name = "ReportingFactory",
        t.default = dashjs.FactoryMaker.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = s(a(389))
          , n = s(a(390))
          , i = s(a(391))
          , o = s(a(392));
        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function l(e) {
            var t = void 0
              , a = (e = e || {}).debug ? e.debug.getLogger(t) : {}
              , s = /([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/
              , l = this.context
              , u = {
                BufferLevel: r.default,
                DVBErrors: n.default,
                HttpList: i.default,
                PlayList: o.default,
                RepSwitchList: o.default,
                TcpList: o.default
            };
            return t = {
                create: function(t, r) {
                    var n, i = t.match(s);
                    if (i) {
                        try {
                            (n = u[i[1]](l).create({
                                eventBus: e.eventBus,
                                metricsConstants: e.metricsConstants
                            })).initialize(i[1], r, i[3], i[5])
                        } catch (e) {
                            n = null,
                            a.error("MetricsHandlerFactory: Could not create handler for type " + i[1] + " with args " + i[3] + ", " + i[5] + " (" + e.message + ")")
                        }
                        return n
                    }
                },
                register: function(e, t) {
                    u[e] = t
                },
                unregister: function(e) {
                    delete u[e]
                }
            }
        }
        l.__dashjs_factory_name = "MetricsHandlerFactory",
        t.default = dashjs.FactoryMaker.getSingletonFactory(l)
    }
    , function(e, t, a) {
        "use strict";
        function r() {
            return {
                reconstructFullMetricName: function(e, t, a) {
                    var r = e;
                    return t && (r += "(" + t,
                    a && a.length && (r += "," + a),
                    r += ")"),
                    r
                },
                validateN: function(e) {
                    if (!e)
                        throw new Error("missing n");
                    if (isNaN(e))
                        throw new Error("n is NaN");
                    if (e < 0)
                        throw new Error("n must be positive");
                    return e
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        r.__dashjs_factory_name = "HandlerHelpers",
        t.default = dashjs.FactoryMaker.getSingletonFactory(r)
    }
    , function(e, t, a) {
        "use strict";
        var r = a(35)
          , n = a(42);
        e.exports = "".repeat || function(e) {
            var t = String(n(this))
              , a = ""
              , i = r(e);
            if (i < 0 || i == 1 / 0)
                throw RangeError("Wrong number of repetitions");
            for (; i > 0; (i >>>= 1) && (t += t))
                1 & i && (a += t);
            return a
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(78).indexOf
          , i = a(80)
          , o = a(38)
          , s = [].indexOf
          , l = !!s && 1 / [1].indexOf(1, -0) < 0
          , u = i("indexOf")
          , d = o("indexOf", {
            ACCESSORS: !0,
            1: 0
        });
        r({
            target: "Array",
            proto: !0,
            forced: l || !u || !d
        }, {
            indexOf: function(e) {
                return l ? s.apply(this, arguments) || 0 : n(this, e, arguments.length > 1 ? arguments[1] : void 0)
            }
        })
    }
    , function(e, t, a) {
        var r = a(429);
        e.exports = function(e) {
            if (r(e))
                throw TypeError("The method doesn't accept regular expressions");
            return e
        }
    }
    , function(e, t, a) {
        var r = a(11)("match");
        e.exports = function(e) {
            var t = /./;
            try {
                "/./"[e](t)
            } catch (a) {
                try {
                    return t[r] = !1,
                    "/./"[e](t)
                } catch (e) {}
            }
            return !1
        }
    }
    , function(e, t) {
        e.exports = "undefined" != typeof ArrayBuffer && "undefined" != typeof DataView
    }
    , function(e, t, a) {
        var r = a(35)
          , n = a(14);
        e.exports = function(e) {
            if (void 0 === e)
                return 0;
            var t = r(e)
              , a = n(t);
            if (t !== a)
                throw RangeError("Wrong length or index");
            return a
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(22)
          , n = a(65)
          , i = a(14);
        e.exports = function(e) {
            for (var t = r(this), a = i(t.length), o = arguments.length, s = n(o > 1 ? arguments[1] : void 0, a), l = o > 2 ? arguments[2] : void 0, u = void 0 === l ? a : n(l, a); u > s; )
                t[s++] = e;
            return t
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(6)
          , i = a(15)
          , o = a(240)
          , s = a(10)
          , l = a(179)
          , u = a(61)
          , d = a(57)
          , c = a(26)
          , f = a(14)
          , h = a(237)
          , p = a(241)
          , g = a(63)
          , m = a(16)
          , y = a(83)
          , _ = a(13)
          , v = a(47)
          , b = a(85)
          , E = a(64).f
          , k = a(433)
          , T = a(23).forEach
          , S = a(104)
          , A = a(18)
          , C = a(41)
          , I = a(34)
          , P = a(155)
          , w = I.get
          , M = I.set
          , R = A.f
          , x = C.f
          , D = Math.round
          , O = n.RangeError
          , N = l.ArrayBuffer
          , L = l.DataView
          , U = s.NATIVE_ARRAY_BUFFER_VIEWS
          , F = s.TYPED_ARRAY_TAG
          , B = s.TypedArray
          , j = s.TypedArrayPrototype
          , G = s.aTypedArrayConstructor
          , V = s.isTypedArray
          , K = function(e, t) {
            for (var a = 0, r = t.length, n = new (G(e))(r); r > a; )
                n[a] = t[a++];
            return n
        }
          , $ = function(e, t) {
            R(e, t, {
                get: function() {
                    return w(this)[t]
                }
            })
        }
          , q = function(e) {
            var t;
            return e instanceof N || "ArrayBuffer" == (t = y(e)) || "SharedArrayBuffer" == t
        }
          , H = function(e, t) {
            return V(e) && "symbol" != typeof t && t in e && String(+t) == String(t)
        }
          , W = function(e, t) {
            return H(e, t = g(t, !0)) ? d(2, e[t]) : x(e, t)
        }
          , Y = function(e, t, a) {
            return !(H(e, t = g(t, !0)) && _(a) && m(a, "value")) || m(a, "get") || m(a, "set") || a.configurable || m(a, "writable") && !a.writable || m(a, "enumerable") && !a.enumerable ? R(e, t, a) : (e[t] = a.value,
            e)
        };
        i ? (U || (C.f = W,
        A.f = Y,
        $(j, "buffer"),
        $(j, "byteOffset"),
        $(j, "byteLength"),
        $(j, "length")),
        r({
            target: "Object",
            stat: !0,
            forced: !U
        }, {
            getOwnPropertyDescriptor: W,
            defineProperty: Y
        }),
        e.exports = function(e, t, a) {
            var i = e.match(/\d+$/)[0] / 8
              , s = e + (a ? "Clamped" : "") + "Array"
              , l = "get" + e
              , d = "set" + e
              , g = n[s]
              , m = g
              , y = m && m.prototype
              , A = {}
              , C = function(e, t) {
                R(e, t, {
                    get: function() {
                        return function(e, t) {
                            var a = w(e);
                            return a.view[l](t * i + a.byteOffset, !0)
                        }(this, t)
                    },
                    set: function(e) {
                        return function(e, t, r) {
                            var n = w(e);
                            a && (r = (r = D(r)) < 0 ? 0 : r > 255 ? 255 : 255 & r),
                            n.view[d](t * i + n.byteOffset, r, !0)
                        }(this, t, e)
                    },
                    enumerable: !0
                })
            };
            U ? o && (m = t((function(e, t, a, r) {
                return u(e, m, s),
                P(_(t) ? q(t) ? void 0 !== r ? new g(t,p(a, i),r) : void 0 !== a ? new g(t,p(a, i)) : new g(t) : V(t) ? K(m, t) : k.call(m, t) : new g(h(t)), e, m)
            }
            )),
            b && b(m, B),
            T(E(g), (function(e) {
                e in m || c(m, e, g[e])
            }
            )),
            m.prototype = y) : (m = t((function(e, t, a, r) {
                u(e, m, s);
                var n, o, l, d = 0, c = 0;
                if (_(t)) {
                    if (!q(t))
                        return V(t) ? K(m, t) : k.call(m, t);
                    n = t,
                    c = p(a, i);
                    var g = t.byteLength;
                    if (void 0 === r) {
                        if (g % i)
                            throw O("Wrong length");
                        if ((o = g - c) < 0)
                            throw O("Wrong length")
                    } else if ((o = f(r) * i) + c > g)
                        throw O("Wrong length");
                    l = o / i
                } else
                    l = h(t),
                    n = new N(o = l * i);
                for (M(e, {
                    buffer: n,
                    byteOffset: c,
                    byteLength: o,
                    length: l,
                    view: new L(n)
                }); d < l; )
                    C(e, d++)
            }
            )),
            b && b(m, B),
            y = m.prototype = v(j)),
            y.constructor !== m && c(y, "constructor", m),
            F && c(y, F, s),
            A[s] = m,
            r({
                global: !0,
                forced: m != g,
                sham: !U
            }, A),
            "BYTES_PER_ELEMENT"in m || c(m, "BYTES_PER_ELEMENT", i),
            "BYTES_PER_ELEMENT"in y || c(y, "BYTES_PER_ELEMENT", i),
            S(s)
        }
        ) : e.exports = function() {}
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(7)
          , i = a(101)
          , o = a(10).NATIVE_ARRAY_BUFFER_VIEWS
          , s = r.ArrayBuffer
          , l = r.Int8Array;
        e.exports = !o || !n((function() {
            l(1)
        }
        )) || !n((function() {
            new l(-1)
        }
        )) || !i((function(e) {
            new l,
            new l(null),
            new l(1.5),
            new l(e)
        }
        ), !0) || n((function() {
            return 1 !== new l(new s(2),1,void 0).length
        }
        ))
    }
    , function(e, t, a) {
        var r = a(432);
        e.exports = function(e, t) {
            var a = r(e);
            if (a % t)
                throw RangeError("Wrong offset");
            return a
        }
    }
    , function(e, t, a) {
        var r = a(7)
          , n = a(11)
          , i = a(58)
          , o = n("iterator");
        e.exports = !r((function() {
            var e = new URL("b?a=1&b=2&c=3","http://a")
              , t = e.searchParams
              , a = "";
            return e.pathname = "c%20d",
            t.forEach((function(e, r) {
                t.delete("b"),
                a += r + e
            }
            )),
            i && !e.toJSON || !t.sort || "http://a/c%20d?a=1&c=3" !== e.href || "3" !== t.get("c") || "a=1" !== String(new URLSearchParams("?a=1")) || !t[o] || "a" !== new URL("https://a@b").username || "b" !== new URLSearchParams(new URLSearchParams("a=b")).get("a") || "xn--e1aybc" !== new URL("http://").host || "#%D0%B1" !== new URL("http://a#").hash || "a1c3" !== a || "x" !== new URL("http://x",void 0).host
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = Object.prototype.hasOwnProperty
          , n = "~";
        function i() {}
        function o(e, t, a) {
            this.fn = e,
            this.context = t,
            this.once = a || !1
        }
        function s(e, t, a, r, i) {
            if ("function" != typeof a)
                throw new TypeError("The listener must be a function");
            var s = new o(a,r || e,i)
              , l = n ? n + t : t;
            return e._events[l] ? e._events[l].fn ? e._events[l] = [e._events[l], s] : e._events[l].push(s) : (e._events[l] = s,
            e._eventsCount++),
            e
        }
        function l(e, t) {
            0 == --e._eventsCount ? e._events = new i : delete e._events[t]
        }
        function u() {
            this._events = new i,
            this._eventsCount = 0
        }
        Object.create && (i.prototype = Object.create(null),
        (new i).__proto__ || (n = !1)),
        u.prototype.eventNames = function() {
            var e, t, a = [];
            if (0 === this._eventsCount)
                return a;
            for (t in e = this._events)
                r.call(e, t) && a.push(n ? t.slice(1) : t);
            return Object.getOwnPropertySymbols ? a.concat(Object.getOwnPropertySymbols(e)) : a
        }
        ,
        u.prototype.listeners = function(e) {
            var t = n ? n + e : e
              , a = this._events[t];
            if (!a)
                return [];
            if (a.fn)
                return [a.fn];
            for (var r = 0, i = a.length, o = new Array(i); r < i; r++)
                o[r] = a[r].fn;
            return o
        }
        ,
        u.prototype.listenerCount = function(e) {
            var t = n ? n + e : e
              , a = this._events[t];
            return a ? a.fn ? 1 : a.length : 0
        }
        ,
        u.prototype.emit = function(e, t, a, r, i, o) {
            var s = n ? n + e : e;
            if (!this._events[s])
                return !1;
            var l, u, d = this._events[s], c = arguments.length;
            if (d.fn) {
                switch (d.once && this.removeListener(e, d.fn, void 0, !0),
                c) {
                case 1:
                    return d.fn.call(d.context),
                    !0;
                case 2:
                    return d.fn.call(d.context, t),
                    !0;
                case 3:
                    return d.fn.call(d.context, t, a),
                    !0;
                case 4:
                    return d.fn.call(d.context, t, a, r),
                    !0;
                case 5:
                    return d.fn.call(d.context, t, a, r, i),
                    !0;
                case 6:
                    return d.fn.call(d.context, t, a, r, i, o),
                    !0
                }
                for (u = 1,
                l = new Array(c - 1); u < c; u++)
                    l[u - 1] = arguments[u];
                d.fn.apply(d.context, l)
            } else {
                var f, h = d.length;
                for (u = 0; u < h; u++)
                    switch (d[u].once && this.removeListener(e, d[u].fn, void 0, !0),
                    c) {
                    case 1:
                        d[u].fn.call(d[u].context);
                        break;
                    case 2:
                        d[u].fn.call(d[u].context, t);
                        break;
                    case 3:
                        d[u].fn.call(d[u].context, t, a);
                        break;
                    case 4:
                        d[u].fn.call(d[u].context, t, a, r);
                        break;
                    default:
                        if (!l)
                            for (f = 1,
                            l = new Array(c - 1); f < c; f++)
                                l[f - 1] = arguments[f];
                        d[u].fn.apply(d[u].context, l)
                    }
            }
            return !0
        }
        ,
        u.prototype.on = function(e, t, a) {
            return s(this, e, t, a, !1)
        }
        ,
        u.prototype.once = function(e, t, a) {
            return s(this, e, t, a, !0)
        }
        ,
        u.prototype.removeListener = function(e, t, a, r) {
            var i = n ? n + e : e;
            if (!this._events[i])
                return this;
            if (!t)
                return l(this, i),
                this;
            var o = this._events[i];
            if (o.fn)
                o.fn !== t || r && !o.once || a && o.context !== a || l(this, i);
            else {
                for (var s = 0, u = [], d = o.length; s < d; s++)
                    (o[s].fn !== t || r && !o[s].once || a && o[s].context !== a) && u.push(o[s]);
                u.length ? this._events[i] = 1 === u.length ? u[0] : u : l(this, i)
            }
            return this
        }
        ,
        u.prototype.removeAllListeners = function(e) {
            var t;
            return e ? (t = n ? n + e : e,
            this._events[t] && l(this, t)) : (this._events = new i,
            this._eventsCount = 0),
            this
        }
        ,
        u.prototype.off = u.prototype.removeListener,
        u.prototype.addListener = u.prototype.on,
        u.prefixed = n,
        u.EventEmitter = u,
        e.exports = u
    }
    , function(e, t, a) {
        var r;
        !function() {
            var a = "1.11.1"
              , n = {};
            !function() {
                var e = n
                  , t = (e.KEY_LABEL = "label",
                e.KEY_NAME = "name",
                e.KEY_TYPE = "type",
                e.KEY_CATEGORY = "category",
                e.KEY_OS = "os",
                e.KEY_OS_VERSION = "os_version",
                e.KEY_VENDOR = "vendor",
                e.KEY_VERSION = "version",
                e.CATEGORY_PC = "pc")
                  , a = e.CATEGORY_SMARTPHONE = "smartphone"
                  , r = e.CATEGORY_MOBILEPHONE = "mobilephone"
                  , i = e.CATEGORY_CRAWLER = "crawler"
                  , o = e.CATEGORY_APPLIANCE = "appliance"
                  , s = e.CATEGORY_MISC = "misc"
                  , l = e.ATTRIBUTE_NAME = "name"
                  , u = e.ATTRIBUTE_CATEGORY = "category"
                  , d = e.ATTRIBUTE_OS = "os"
                  , c = e.ATTRIBUTE_OS_VERSION = "os_version"
                  , f = e.ATTRIBUTE_VENDOR = "vendor"
                  , h = e.ATTRIBUTE_VERSION = "version"
                  , p = e.VALUE_UNKNOWN = "UNKNOWN"
                  , g = (e.CATEGORY_LIST = [t, a, r, i, o, s, p],
                e.ATTRIBUTE_LIST = [l, u, d, f, h, c],
                {
                    MSIE: {
                        label: "MSIE",
                        name: "Internet Explorer",
                        type: "browser",
                        vendor: "Microsoft"
                    },
                    Edge: {
                        label: "Edge",
                        name: "Edge",
                        type: "browser",
                        vendor: "Microsoft"
                    },
                    Chrome: {
                        label: "Chrome",
                        name: "Chrome",
                        type: "browser",
                        vendor: "Google"
                    },
                    Safari: {
                        label: "Safari",
                        name: "Safari",
                        type: "browser",
                        vendor: "Apple"
                    },
                    Firefox: {
                        label: "Firefox",
                        name: "Firefox",
                        type: "browser",
                        vendor: "Mozilla"
                    },
                    Opera: {
                        label: "Opera",
                        name: "Opera",
                        type: "browser",
                        vendor: "Opera"
                    },
                    Vivaldi: {
                        label: "Vivaldi",
                        name: "Vivaldi",
                        type: "browser",
                        vendor: "Vivaldi Technologies"
                    },
                    Sleipnir: {
                        label: "Sleipnir",
                        name: "Sleipnir",
                        type: "browser",
                        vendor: "Fenrir Inc."
                    },
                    GSA: {
                        label: "GSA",
                        name: "Google Search App",
                        type: "browser",
                        vendor: "Google"
                    },
                    Webview: {
                        label: "Webview",
                        name: "Webview",
                        type: "browser",
                        vendor: "OS vendor"
                    },
                    YaBrowser: {
                        label: "YaBrowser",
                        name: "Yandex Browser",
                        type: "browser",
                        vendor: "Yandex"
                    },
                    Win: {
                        label: "Win",
                        name: "Windows UNKNOWN Ver",
                        type: "os",
                        category: "pc"
                    },
                    Win10: {
                        label: "Win10",
                        name: "Windows 10",
                        type: "os",
                        category: "pc"
                    },
                    "Win8.1": {
                        label: "Win8.1",
                        name: "Windows 8.1",
                        type: "os",
                        category: "pc"
                    },
                    Win8: {
                        label: "Win8",
                        name: "Windows 8",
                        type: "os",
                        category: "pc"
                    },
                    Win7: {
                        label: "Win7",
                        name: "Windows 7",
                        type: "os",
                        category: "pc"
                    },
                    WinVista: {
                        label: "WinVista",
                        name: "Windows Vista",
                        type: "os",
                        category: "pc"
                    },
                    WinXP: {
                        label: "WinXP",
                        name: "Windows XP",
                        type: "os",
                        category: "pc"
                    },
                    Win2000: {
                        label: "Win2000",
                        name: "Windows 2000",
                        type: "os",
                        category: "pc"
                    },
                    WinNT4: {
                        label: "WinNT4",
                        name: "Windows NT 4.0",
                        type: "os",
                        category: "pc"
                    },
                    WinMe: {
                        label: "WinMe",
                        name: "Windows Me",
                        type: "os",
                        category: "pc"
                    },
                    Win98: {
                        label: "Win98",
                        name: "Windows 98",
                        type: "os",
                        category: "pc"
                    },
                    Win95: {
                        label: "Win95",
                        name: "Windows 95",
                        type: "os",
                        category: "pc"
                    },
                    WinPhone: {
                        label: "WinPhone",
                        name: "Windows Phone OS",
                        type: "os",
                        category: "smartphone"
                    },
                    WinCE: {
                        label: "WinCE",
                        name: "Windows CE",
                        type: "os",
                        category: "smartphone"
                    },
                    OSX: {
                        label: "OSX",
                        name: "Mac OSX",
                        type: "os",
                        category: "pc"
                    },
                    MacOS: {
                        label: "MacOS",
                        name: "Mac OS Classic",
                        type: "os",
                        category: "pc"
                    },
                    Linux: {
                        label: "Linux",
                        name: "Linux",
                        type: "os",
                        category: "pc"
                    },
                    BSD: {
                        label: "BSD",
                        name: "BSD",
                        type: "os",
                        category: "pc"
                    },
                    ChromeOS: {
                        label: "ChromeOS",
                        name: "ChromeOS",
                        type: "os",
                        category: "pc"
                    },
                    Android: {
                        label: "Android",
                        name: "Android",
                        type: "os",
                        category: "smartphone"
                    },
                    iPhone: {
                        label: "iPhone",
                        name: "iPhone",
                        type: "os",
                        category: "smartphone"
                    },
                    iPad: {
                        label: "iPad",
                        name: "iPad",
                        type: "os",
                        category: "smartphone"
                    },
                    iPod: {
                        label: "iPod",
                        name: "iPod",
                        type: "os",
                        category: "smartphone"
                    },
                    iOS: {
                        label: "iOS",
                        name: "iOS",
                        type: "os",
                        category: "smartphone"
                    },
                    FirefoxOS: {
                        label: "FirefoxOS",
                        name: "Firefox OS",
                        type: "os",
                        category: "smartphone"
                    },
                    BlackBerry: {
                        label: "BlackBerry",
                        name: "BlackBerry",
                        type: "os",
                        category: "smartphone"
                    },
                    BlackBerry10: {
                        label: "BlackBerry10",
                        name: "BlackBerry 10",
                        type: "os",
                        category: "smartphone"
                    },
                    docomo: {
                        label: "docomo",
                        name: "docomo",
                        type: "full",
                        vendor: "docomo",
                        category: "mobilephone",
                        os: "docomo"
                    },
                    au: {
                        label: "au",
                        name: "au by KDDI",
                        type: "full",
                        vendor: "au",
                        category: "mobilephone",
                        os: "au"
                    },
                    SoftBank: {
                        label: "SoftBank",
                        name: "SoftBank Mobile",
                        type: "full",
                        vendor: "SoftBank",
                        category: "mobilephone",
                        os: "SoftBank"
                    },
                    willcom: {
                        label: "willcom",
                        name: "WILLCOM",
                        type: "full",
                        vendor: "WILLCOM",
                        category: "mobilephone",
                        os: "WILLCOM"
                    },
                    jig: {
                        label: "jig",
                        name: "jig browser",
                        type: "full",
                        vendor: "",
                        category: "mobilephone",
                        os: "jig"
                    },
                    emobile: {
                        label: "emobile",
                        name: "emobile",
                        type: "full",
                        vendor: "",
                        category: "mobilephone",
                        os: "emobile"
                    },
                    SymbianOS: {
                        label: "SymbianOS",
                        name: "SymbianOS",
                        type: "full",
                        vendor: "",
                        category: "mobilephone",
                        os: "SymbianOS"
                    },
                    MobileTranscoder: {
                        label: "MobileTranscoder",
                        name: "Mobile Transcoder",
                        type: "full",
                        vendor: "",
                        category: "mobilephone",
                        os: "Mobile Transcoder"
                    },
                    Nintendo3DS: {
                        label: "Nintendo3DS",
                        name: "Nintendo 3DS",
                        type: "full",
                        vendor: "Nintendo",
                        category: "appliance",
                        os: "Nintendo 3DS"
                    },
                    NintendoDSi: {
                        label: "NintendoDSi",
                        name: "Nintendo DSi",
                        type: "full",
                        vendor: "Nintendo",
                        category: "appliance",
                        os: "Nintendo DSi"
                    },
                    NintendoWii: {
                        label: "NintendoWii",
                        name: "Nintendo Wii",
                        type: "full",
                        vendor: "Nintendo",
                        category: "appliance",
                        os: "Nintendo Wii"
                    },
                    NintendoWiiU: {
                        label: "NintendoWiiU",
                        name: "Nintendo Wii U",
                        type: "full",
                        vendor: "Nintendo",
                        category: "appliance",
                        os: "Nintendo Wii U"
                    },
                    PSP: {
                        label: "PSP",
                        name: "PlayStation Portable",
                        type: "full",
                        vendor: "Sony",
                        category: "appliance",
                        os: "PlayStation Portable"
                    },
                    PSVita: {
                        label: "PSVita",
                        name: "PlayStation Vita",
                        type: "full",
                        vendor: "Sony",
                        category: "appliance",
                        os: "PlayStation Vita"
                    },
                    PS3: {
                        label: "PS3",
                        name: "PlayStation 3",
                        type: "full",
                        vendor: "Sony",
                        category: "appliance",
                        os: "PlayStation 3"
                    },
                    PS4: {
                        label: "PS4",
                        name: "PlayStation 4",
                        type: "full",
                        vendor: "Sony",
                        category: "appliance",
                        os: "PlayStation 4"
                    },
                    Xbox360: {
                        label: "Xbox360",
                        name: "Xbox 360",
                        type: "full",
                        vendor: "Microsoft",
                        category: "appliance",
                        os: "Xbox 360"
                    },
                    XboxOne: {
                        label: "XboxOne",
                        name: "Xbox One",
                        type: "full",
                        vendor: "Microsoft",
                        category: "appliance",
                        os: "Xbox One"
                    },
                    DigitalTV: {
                        label: "DigitalTV",
                        name: "InternetTVBrowser",
                        type: "full",
                        vendor: "",
                        category: "appliance",
                        os: "DigitalTV"
                    },
                    SafariRSSReader: {
                        label: "SafariRSSReader",
                        name: "Safari RSSReader",
                        type: "full",
                        vendor: "Apple",
                        category: "misc"
                    },
                    GoogleDesktop: {
                        label: "GoogleDesktop",
                        name: "Google Desktop",
                        type: "full",
                        vendor: "Google",
                        category: "misc"
                    },
                    WindowsRSSReader: {
                        label: "WindowsRSSReader",
                        name: "Windows RSSReader",
                        type: "full",
                        vendor: "Microsoft",
                        category: "misc"
                    },
                    VariousRSSReader: {
                        label: "VariousRSSReader",
                        name: "RSSReader",
                        type: "full",
                        vendor: "",
                        category: "misc"
                    },
                    HTTPLibrary: {
                        label: "HTTPLibrary",
                        name: "HTTP Library",
                        type: "full",
                        vendor: "",
                        category: "misc"
                    },
                    GoogleBot: {
                        label: "GoogleBot",
                        name: "Googlebot",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    GoogleBotMobile: {
                        label: "GoogleBotMobile",
                        name: "Googlebot Mobile",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    GoogleMediaPartners: {
                        label: "GoogleMediaPartners",
                        name: "Google Mediapartners",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    GoogleFeedFetcher: {
                        label: "GoogleFeedFetcher",
                        name: "Google Feedfetcher",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    GoogleAppEngine: {
                        label: "GoogleAppEngine",
                        name: "Google AppEngine",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    GoogleWebPreview: {
                        label: "GoogleWebPreview",
                        name: "Google Web Preview",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    YahooSlurp: {
                        label: "YahooSlurp",
                        name: "Yahoo! Slurp",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    YahooJP: {
                        label: "YahooJP",
                        name: "Yahoo! Japan",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    YahooPipes: {
                        label: "YahooPipes",
                        name: "Yahoo! Pipes",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    Baiduspider: {
                        label: "Baiduspider",
                        name: "Baiduspider",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    msnbot: {
                        label: "msnbot",
                        name: "msnbot",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    bingbot: {
                        label: "bingbot",
                        name: "bingbot",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    BingPreview: {
                        label: "BingPreview",
                        name: "BingPreview",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    Yeti: {
                        label: "Yeti",
                        name: "Naver Yeti",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    FeedBurner: {
                        label: "FeedBurner",
                        name: "Google FeedBurner",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    facebook: {
                        label: "facebook",
                        name: "facebook",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    twitter: {
                        label: "twitter",
                        name: "twitter",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    trendictionbot: {
                        label: "trendictionbot",
                        name: "trendiction",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    mixi: {
                        label: "mixi",
                        name: "mixi",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    IndyLibrary: {
                        label: "IndyLibrary",
                        name: "Indy Library",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    ApplePubSub: {
                        label: "ApplePubSub",
                        name: "Apple iCloud",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    Genieo: {
                        label: "Genieo",
                        name: "Genieo Web Filter",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    topsyButterfly: {
                        label: "topsyButterfly",
                        name: "topsy Butterfly",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    rogerbot: {
                        label: "rogerbot",
                        name: "SeoMoz rogerbot",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    AhrefsBot: {
                        label: "AhrefsBot",
                        name: "ahref AhrefsBot",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    radian6: {
                        label: "radian6",
                        name: "salesforce radian6",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    Hatena: {
                        label: "Hatena",
                        name: "Hatena",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    goo: {
                        label: "goo",
                        name: "goo",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    livedoorFeedFetcher: {
                        label: "livedoorFeedFetcher",
                        name: "livedoor FeedFetcher",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    },
                    VariousCrawler: {
                        label: "VariousCrawler",
                        name: "misc crawler",
                        type: "full",
                        vendor: "",
                        category: "crawler"
                    }
                });
                e.get = function(e) {
                    return g[e]
                }
            }();
            var i = {};
            !function() {
                var e = i;
                e.updateMap = function(e, t) {
                    for (var a in t)
                        a !== n.KEY_LABEL && a !== n.KEY_TYPE && t[a] && t[a].length > 0 && (e[a] = t[a])
                }
                ,
                e.updateCategory = function(e, t) {
                    e[n.ATTRIBUTE_CATEGORY] = t
                }
                ,
                e.updateVersion = function(e, t) {
                    e[n.ATTRIBUTE_VERSION] = t
                }
                ,
                e.updateOs = function(e, t) {
                    e[n.ATTRIBUTE_OS] = t
                }
                ,
                e.updateOsVersion = function(e, t) {
                    e[n.ATTRIBUTE_OS_VERSION] = t
                }
            }();
            var o = {};
            !function() {
                var e = o
                  , t = /MSIE ([.0-9]+);/
                  , a = /Trident\/[.0-9]+;/
                  , r = / rv:([.0-9]+)/
                  , i = /IEMobile\/([.0-9]+);/
                  , s = (e.challengeMSIE = function(e, o) {
                    if (e.indexOf("compatible; MSIE") < 0 && e.indexOf("Trident/") < 0 && e.indexOf("IEMobile/"))
                        return !1;
                    var s, l = t.exec(e);
                    return l || a.exec(e) && (l = r.exec(e)),
                    l || (l = i.exec(e)),
                    s = l ? l[1] : n.VALUE_UNKNOWN,
                    h(o, n.get("MSIE")),
                    y(o, s),
                    !0
                }
                ,
                /YaBrowser\/([.0-9]+)/)
                  , l = (e.challengeYandexBrowser = function(e, t) {
                    if (e.indexOf("YaBrowser/") < 0)
                        return !1;
                    var a, r = s.exec(e);
                    return a = r ? r[1] : n.VALUE_UNKNOWN,
                    h(t, n.get("YaBrowser")),
                    y(t, a),
                    !0
                }
                ,
                /(?:Edge|Edg|EdgiOS|EdgA)\/([.0-9]+)/)
                  , u = /FxiOS\/([.0-9]+)/
                  , d = /(?:Chrome|CrMo|CriOS)\/([.0-9]+)/
                  , c = /OPR\/([.0-9]+)/
                  , f = /GSA\/([.0-9]+)/
                  , m = /Version\/([.0-9]+)/
                  , _ = (e.challengeSafariChrome = function(e, t) {
                    if (e.indexOf("Safari/") < 0)
                        return !1;
                    if (e.indexOf("Chrome") >= 0 && e.indexOf("wv") >= 0)
                        return !1;
                    var a, r, i = n.VALUE_UNKNOWN;
                    return (a = l.exec(e)) ? (i = a[1],
                    h(t, n.get("Edge")),
                    y(t, i),
                    !0) : (a = u.exec(e)) ? (i = a[1],
                    h(t, n.get("Firefox")),
                    y(t, i),
                    !0) : (a = d.exec(e)) ? (r = c.exec(e)) ? (i = r[1],
                    h(t, n.get("Opera")),
                    y(t, i),
                    !0) : (i = a[1],
                    h(t, n.get("Chrome")),
                    y(t, i),
                    !0) : (a = f.exec(e)) ? (i = a[1],
                    h(t, n.get("GSA")),
                    y(t, i),
                    !0) : ((a = m.exec(e)) && (i = a[1]),
                    h(t, n.get("Safari")),
                    y(t, i),
                    !0)
                }
                ,
                /Firefox\/([.0-9]+)/)
                  , v = (e.challengeFirefox = function(e, t) {
                    if (e.indexOf("Firefox/") < 0)
                        return !1;
                    var a = n.VALUE_UNKNOWN
                      , r = _.exec(e);
                    return r && (a = r[1]),
                    h(t, n.get("Firefox")),
                    y(t, a),
                    !0
                }
                ,
                /Version\/([.0-9]+)/)
                  , b = /Opera[\/ ]([.0-9]+)/
                  , E = (e.challengeOpera = function(e, t) {
                    if (e.indexOf("Opera") < 0)
                        return !1;
                    var a = n.VALUE_UNKNOWN
                      , r = v.exec(e);
                    return (r || (r = b.exec(e))) && (a = r[1]),
                    h(t, n.get("Opera")),
                    y(t, a),
                    !0
                }
                ,
                /iP(hone;|ad;|od) .*like Mac OS X/)
                  , k = /Version\/([.0-9]+)/
                  , T = (e.challengeWebview = function(e, t) {
                    var a, r = n.VALUE_UNKNOWN;
                    return e.indexOf("Chrome") >= 0 && e.indexOf("wv") >= 0 ? ((a = k.exec(e)) && (r = a[1]),
                    h(t, n.get("Webview")),
                    y(t, r),
                    !0) : !!E.exec(e) && (!(e.indexOf("Safari/") > -1) && ((a = k.exec(e)) && (r = a[1]),
                    h(t, n.get("Webview")),
                    y(t, r),
                    !0))
                }
                ,
                /Sleipnir\/([.0-9]+)/)
                  , S = (e.challengeSleipnir = function(e, t) {
                    if (e.indexOf("Sleipnir/") < 0)
                        return !1;
                    var a = n.VALUE_UNKNOWN
                      , r = T.exec(e);
                    r && (a = r[1]),
                    h(t, n.get("Sleipnir")),
                    y(t, a);
                    var i = n.get("Win");
                    return p(t, i[n.KEY_CATEGORY]),
                    g(t, i[n.KEY_NAME]),
                    !0
                }
                ,
                /Vivaldi\/([.0-9]+)/);
                e.challengeVivaldi = function(e, t) {
                    if (e.indexOf("Vivaldi/") < 0)
                        return !1;
                    var a = n.VALUE_UNKNOWN
                      , r = S.exec(e);
                    return r && (a = r[1]),
                    h(t, n.get("Vivaldi")),
                    y(t, a),
                    !0
                }
            }();
            var s = {};
            !function() {
                var e = s
                  , t = /Windows ([ .a-zA-Z0-9]+)[;\\)]/
                  , a = /^Phone(?: OS)? ([.0-9]+)/;
                e.challengeWindows = function(e, r) {
                    if (e.indexOf("Windows") < 0)
                        return !1;
                    var i;
                    if (e.indexOf("Xbox") > -1)
                        return i = e.indexOf("Xbox; Xbox One)") > -1 ? n.get("XboxOne") : n.get("Xbox360"),
                        h(r, i),
                        !0;
                    var o = n.get("Win")
                      , s = t.exec(e);
                    if (!s)
                        return p(r, o[n.KEY_CATEGORY]),
                        g(r, o[n.KEY_NAME]),
                        !0;
                    var l = s[1];
                    return "NT 10.0" === l ? o = n.get("Win10") : "NT 6.3" === l ? o = n.get("Win8.1") : "NT 6.2" === l ? o = n.get("Win8") : "NT 6.1" === l ? o = n.get("Win7") : "NT 6.0" === l ? o = n.get("WinVista") : "NT 5.1" === l ? o = n.get("WinXP") : (s = a.exec(l)) ? (o = n.get("WinPhone"),
                    l = s[1]) : "NT 5.0" === l ? o = n.get("Win2000") : "NT 4.0" === l ? o = n.get("WinNT4") : "98" === l ? o = n.get("Win98") : "95" === l ? o = n.get("Win95") : "CE" === l && (o = n.get("WinCE")),
                    p(r, o[n.KEY_CATEGORY]),
                    g(r, o[n.KEY_NAME]),
                    m(r, l),
                    !0
                }
                ,
                e.challengeOSX = function(e, t) {
                    if (e.indexOf("Mac OS X") < 0)
                        return !1;
                    var a, r, i = n.get("OSX");
                    return e.indexOf("like Mac OS X") >= 0 ? (e.indexOf("iPhone;") >= 0 ? i = n.get("iPhone") : e.indexOf("iPad;") >= 0 ? i = n.get("iPad") : e.indexOf("iPod") >= 0 && (i = n.get("iPod")),
                    (r = /; CPU(?: iPhone)? OS (\d+_\d+(?:_\d+)?) like Mac OS X/.exec(e)) && (a = r[1].replace(/_/g, "."))) : (r = /Mac OS X (10[._]\d+(?:[._]\d+)?)(?:\)|;)/.exec(e)) && (a = r[1].replace(/_/g, ".")),
                    p(t, i[n.KEY_CATEGORY]),
                    g(t, i[n.KEY_NAME]),
                    a && m(t, a),
                    !0
                }
                ,
                e.challengeLinux = function(e, t) {
                    if (e.indexOf("Linux") < 0)
                        return !1;
                    var a, r, i = n.get("Linux");
                    return e.indexOf("Android") >= 0 && (i = n.get("Android"),
                    (r = /Android[- ](\d+(?:\.\d+(?:\.\d+)?)?)/.exec(e)) && (a = r[1])),
                    p(t, i[n.KEY_CATEGORY]),
                    g(t, i[n.KEY_NAME]),
                    a && m(t, a),
                    !0
                }
                ,
                e.challengeSmartPhone = function(e, t) {
                    var a, r = null, i = null;
                    return e.indexOf("iPhone") >= 0 ? r = n.get("iPhone") : e.indexOf("iPad") >= 0 ? r = n.get("iPad") : e.indexOf("iPod") >= 0 ? r = n.get("iPod") : e.indexOf("Android") >= 0 ? r = n.get("Android") : e.indexOf("CFNetwork") >= 0 ? r = n.get("iOS") : e.indexOf("BB10") >= 0 ? (r = n.get("BlackBerry10"),
                    (a = /BB10(?:.+)Version\/([.0-9]+)/.exec(e)) && (i = a[1])) : e.indexOf("BlackBerry") >= 0 && (r = n.get("BlackBerry"),
                    (a = /BlackBerry(?:\d+)\/([.0-9]+) /.exec(e)) && (i = a[1])),
                    t[n.KEY_NAME] && t[n.KEY_NAME] === n.get("Firefox")[n.KEY_NAME] && (a = /^Mozilla\/[.0-9]+ \((?:Mobile|Tablet);(?:.*;)? rv:([.0-9]+)\) Gecko\/[.0-9]+ Firefox\/[.0-9]+$/.exec(e)) && (r = n.get("FirefoxOS"),
                    i = a[1]),
                    !!r && (p(t, r[n.KEY_CATEGORY]),
                    g(t, r[n.KEY_NAME]),
                    i && m(t, i),
                    !0)
                }
                ,
                e.challengeMobilePhone = function(e, t) {
                    var a, r;
                    if (e.indexOf("KDDI-") >= 0 && (r = /KDDI-([^- \/;()"']+)/.exec(e))) {
                        var i = r[1];
                        return a = n.get("au"),
                        p(t, a[n.KEY_CATEGORY]),
                        g(t, a[n.KEY_OS]),
                        y(t, i),
                        !0
                    }
                    return (e.indexOf("WILLCOM") >= 0 || e.indexOf("DDIPOCKET") >= 0) && (r = /(?:WILLCOM|DDIPOCKET);[^\/]+\/([^ \/;()]+)/.exec(e)) ? (i = r[1],
                    a = n.get("willcom"),
                    p(t, a[n.KEY_CATEGORY]),
                    g(t, a[n.KEY_OS]),
                    y(t, i),
                    !0) : e.indexOf("SymbianOS") >= 0 ? (a = n.get("SymbianOS"),
                    p(t, a[n.KEY_CATEGORY]),
                    g(t, a[n.KEY_OS]),
                    !0) : e.indexOf("Google Wireless Transcoder") >= 0 ? (h(t, n.get("MobileTranscoder")),
                    y(t, "Google"),
                    !0) : e.indexOf("Naver Transcoder") >= 0 && (h(t, n.get("MobileTranscoder")),
                    y(t, "Naver"),
                    !0)
                }
                ,
                e.challengeAppliance = function(e, t) {
                    var a;
                    return e.indexOf("Nintendo DSi;") >= 0 ? (a = n.get("NintendoDSi"),
                    p(t, a[n.KEY_CATEGORY]),
                    g(t, a[n.KEY_OS]),
                    !0) : e.indexOf("Nintendo Wii;") >= 0 && (a = n.get("NintendoWii"),
                    p(t, a[n.KEY_CATEGORY]),
                    g(t, a[n.KEY_OS]),
                    !0)
                }
                ,
                e.challengeMisc = function(e, t) {
                    var a, r, i;
                    return e.indexOf("(Win98;") >= 0 ? (a = n.get("Win98"),
                    r = "98") : e.indexOf("Macintosh; U; PPC;") >= 0 ? (a = n.get("MacOS"),
                    (i = /rv:(\d+\.\d+\.\d+)/.exec(e)) && (r = i[1])) : e.indexOf("Mac_PowerPC") >= 0 ? a = n.get("MacOS") : e.indexOf("X11; FreeBSD ") >= 0 ? (a = n.get("BSD"),
                    (i = /FreeBSD ([^;\)]+);/.exec(e)) && (r = i[1])) : e.indexOf("X11; CrOS ") >= 0 && (a = n.get("ChromeOS"),
                    (i = /CrOS ([^\)]+)\)/.exec(e)) && (r = i[1])),
                    !!a && (p(t, a[n.KEY_CATEGORY]),
                    g(t, a[n.KEY_NAME]),
                    r && m(t, r),
                    !0)
                }
            }();
            var l = {};
            !function() {
                var e = l
                  , t = /DoCoMo\/[.0-9]+[ \/]([^- \/;()"']+)/
                  , a = /\(([^;)]+);FOMA;/
                  , r = (e.challengeDocomo = function(e, r) {
                    if (e.indexOf("DoCoMo") < 0 && e.indexOf(";FOMA;") < 0)
                        return !1;
                    var i, o = n.VALUE_UNKNOWN;
                    return ((i = t.exec(e)) || (i = a.exec(e))) && (o = i[1]),
                    h(r, n.get("docomo")),
                    y(r, o),
                    !0
                }
                ,
                /KDDI-([^- \/;()"']+)/)
                  , i = (e.challengeAu = function(e, t) {
                    if (e.indexOf("KDDI-") < 0)
                        return !1;
                    var a = n.VALUE_UNKNOWN
                      , i = r.exec(e);
                    return i && (a = i[1]),
                    h(t, n.get("au")),
                    y(t, a),
                    !0
                }
                ,
                /(?:SoftBank|Vodafone|J-PHONE)\/[.0-9]+\/([^ \/;()]+)/)
                  , o = (e.challengeSoftbank = function(e, t) {
                    if (e.indexOf("SoftBank") < 0 && e.indexOf("Vodafone") < 0 && e.indexOf("J-PHONE") < 0)
                        return !1;
                    var a = n.VALUE_UNKNOWN
                      , r = i.exec(e);
                    return r && (a = r[1]),
                    h(t, n.get("SoftBank")),
                    y(t, a),
                    !0
                }
                ,
                /(?:WILLCOM|DDIPOCKET);[^\/]+\/([^ \/;()]+)/);
                e.challengeWillcom = function(e, t) {
                    if (e.indexOf("WILLCOM") < 0 && e.indexOf("DDIPOCKET") < 0)
                        return !1;
                    var a = n.VALUE_UNKNOWN
                      , r = o.exec(e);
                    return r && (a = r[1]),
                    h(t, n.get("willcom")),
                    y(t, a),
                    !0
                }
                ,
                e.challengeMisc = function(e, t) {
                    var a;
                    return e.indexOf("jig browser") >= 0 ? (h(t, n.get("jig")),
                    (a = /jig browser[^;]+; ([^);]+)/.exec(e)) && y(t, a[1]),
                    !0) : e.indexOf("emobile/") >= 0 || e.indexOf("OpenBrowser") >= 0 || e.indexOf("Browser/Obigo-Browser") >= 0 ? (h(t, n.get("emobile")),
                    !0) : e.indexOf("SymbianOS") >= 0 ? (h(t, n.get("SymbianOS")),
                    !0) : e.indexOf("Hatena-Mobile-Gateway/") >= 0 ? (h(t, n.get("MobileTranscoder")),
                    y(t, "Hatena"),
                    !0) : e.indexOf("livedoor-Mobile-Gateway/") >= 0 && (h(t, n.get("MobileTranscoder")),
                    y(t, "livedoor"),
                    !0)
                }
            }();
            var u = {};
            !function() {
                var e = u;
                e.challengeGoogle = function(e, t) {
                    return !(e.indexOf("Google") < 0) && (e.indexOf("compatible; Googlebot") >= 0 ? e.indexOf("compatible; Googlebot-Mobile") >= 0 ? (h(t, n.get("GoogleBotMobile")),
                    !0) : (h(t, n.get("GoogleBot")),
                    !0) : e.indexOf("Googlebot-Image/") >= 0 ? (h(t, n.get("GoogleBot")),
                    !0) : e.indexOf("Mediapartners-Google") >= 0 && (e.indexOf("compatible; Mediapartners-Google") >= 0 || "Mediapartners-Google" === e) ? (h(t, n.get("GoogleMediaPartners")),
                    !0) : e.indexOf("Feedfetcher-Google;") >= 0 ? (h(t, n.get("GoogleFeedFetcher")),
                    !0) : e.indexOf("AppEngine-Google") >= 0 ? (h(t, n.get("GoogleAppEngine")),
                    !0) : e.indexOf("Google Web Preview") >= 0 && (h(t, n.get("GoogleWebPreview")),
                    !0))
                }
                ,
                e.challengeCrawlers = function(e, t) {
                    if (e.indexOf("Yahoo") >= 0 || e.indexOf("help.yahoo.co.jp/help/jp/") >= 0 || e.indexOf("listing.yahoo.co.jp/support/faq/") >= 0) {
                        if (e.indexOf("compatible; Yahoo! Slurp") >= 0)
                            return h(t, n.get("YahooSlurp")),
                            !0;
                        if (e.indexOf("YahooFeedSeekerJp") >= 0 || e.indexOf("YahooFeedSeekerBetaJp") >= 0)
                            return h(t, n.get("YahooJP")),
                            !0;
                        if (e.indexOf("crawler (http://listing.yahoo.co.jp/support/faq/") >= 0 || e.indexOf("crawler (http://help.yahoo.co.jp/help/jp/") >= 0)
                            return h(t, n.get("YahooJP")),
                            !0;
                        if (e.indexOf("Y!J-BRZ/YATSHA crawler") >= 0 || e.indexOf("Y!J-BRY/YATSH crawler") >= 0)
                            return h(t, n.get("YahooJP")),
                            !0;
                        if (e.indexOf("Yahoo Pipes") >= 0)
                            return h(t, n.get("YahooPipes")),
                            !0
                    }
                    return e.indexOf("msnbot") >= 0 ? (h(t, n.get("msnbot")),
                    !0) : e.indexOf("bingbot") >= 0 && e.indexOf("compatible; bingbot") >= 0 ? (h(t, n.get("bingbot")),
                    !0) : e.indexOf("BingPreview") >= 0 ? (h(t, n.get("BingPreview")),
                    !0) : e.indexOf("Baidu") >= 0 && (e.indexOf("compatible; Baiduspider") >= 0 || e.indexOf("Baiduspider+") >= 0 || e.indexOf("Baiduspider-image+") >= 0) ? (h(t, n.get("Baiduspider")),
                    !0) : e.indexOf("Yeti") >= 0 && (e.indexOf("http://help.naver.com/robots") >= 0 || e.indexOf("http://help.naver.com/support/robots.html") >= 0 || e.indexOf("http://naver.me/bot") >= 0) ? (h(t, n.get("Yeti")),
                    !0) : e.indexOf("FeedBurner/") >= 0 ? (h(t, n.get("FeedBurner")),
                    !0) : e.indexOf("facebookexternalhit") >= 0 ? (h(t, n.get("facebook")),
                    !0) : e.indexOf("Twitterbot/") >= 0 ? (h(t, n.get("twitter")),
                    !0) : e.indexOf("ichiro") >= 0 && (e.indexOf("http://help.goo.ne.jp/door/crawler.html") >= 0 || e.indexOf("compatible; ichiro/mobile goo;") >= 0) || e.indexOf("gooblogsearch/") >= 0 ? (h(t, n.get("goo")),
                    !0) : e.indexOf("Apple-PubSub") >= 0 ? (h(t, n.get("ApplePubSub")),
                    !0) : e.indexOf("(www.radian6.com/crawler)") >= 0 ? (h(t, n.get("radian6")),
                    !0) : e.indexOf("Genieo/") >= 0 ? (h(t, n.get("Genieo")),
                    !0) : e.indexOf("labs.topsy.com/butterfly/") >= 0 ? (h(t, n.get("topsyButterfly")),
                    !0) : e.indexOf("rogerbot/1.0 (http://www.seomoz.org/dp/rogerbot") >= 0 ? (h(t, n.get("rogerbot")),
                    !0) : e.indexOf("compatible; AhrefsBot/") >= 0 ? (h(t, n.get("AhrefsBot")),
                    !0) : e.indexOf("livedoor FeedFetcher") >= 0 || e.indexOf("Fastladder FeedFetcher") >= 0 ? (h(t, n.get("livedoorFeedFetcher")),
                    !0) : e.indexOf("Hatena ") >= 0 && (e.indexOf("Hatena Antenna") >= 0 || e.indexOf("Hatena Pagetitle Agent") >= 0 || e.indexOf("Hatena Diary RSS") >= 0) ? (h(t, n.get("Hatena")),
                    !0) : e.indexOf("mixi-check") >= 0 || e.indexOf("mixi-crawler") >= 0 || e.indexOf("mixi-news-crawler") >= 0 ? (h(t, n.get("mixi")),
                    !0) : e.indexOf("Indy Library") >= 0 && e.indexOf("compatible; Indy Library") >= 0 ? (h(t, n.get("IndyLibrary")),
                    !0) : e.indexOf("trendictionbot") >= 0 && (h(t, n.get("trendictionbot")),
                    !0)
                }
                ,
                e.challengeMaybeCrawler = function(e, t) {
                    return (/(bot|crawler|spider)(?:[-_ .\/;@()]|$)/i.exec(e) || /(?:Rome Client |UnwindFetchor\/|ia_archiver |Summify |PostRank\/)/.exec(e) || e.indexOf("ASP-Ranker Feed Crawler") >= 0 || /(feed|web) ?parser/i.exec(e) || !!/watch ?dog/i.exec(e)) && (h(t, n.get("VariousCrawler")),
                    !0)
                }
            }();
            var d = {};
            !function() {
                var e = d;
                e.challengePlaystation = function(e, t) {
                    var a, r = null, i = null;
                    return e.indexOf("PSP (PlayStation Portable);") >= 0 ? (r = n.get("PSP"),
                    (a = /PSP \(PlayStation Portable\); ([.0-9]+)\)/.exec(e)) && (i = a[1])) : e.indexOf("PlayStation Vita") >= 0 ? (r = n.get("PSVita"),
                    (a = /PlayStation Vita ([.0-9]+)\)/.exec(e)) && (i = a[1])) : e.indexOf("PLAYSTATION 3 ") >= 0 || e.indexOf("PLAYSTATION 3;") >= 0 ? (r = n.get("PS3"),
                    (a = /PLAYSTATION 3;? ([.0-9]+)\)/.exec(e)) && (i = a[1])) : e.indexOf("PlayStation 4 ") >= 0 && (r = n.get("PS4"),
                    (a = /PlayStation 4 ([.0-9]+)\)/.exec(e)) && (i = a[1])),
                    !!r && (h(t, r),
                    i && m(t, i),
                    !0)
                }
                ,
                e.challengeNintendo = function(e, t) {
                    var a = null;
                    return e.indexOf("Nintendo 3DS;") >= 0 ? a = n.get("Nintendo3DS") : e.indexOf("Nintendo DSi;") >= 0 ? a = n.get("NintendoDSi") : e.indexOf("Nintendo Wii;") >= 0 ? a = n.get("NintendoWii") : e.indexOf("(Nintendo WiiU)") >= 0 && (a = n.get("NintendoWiiU")),
                    !!a && (h(t, a),
                    !0)
                }
                ,
                e.challengeDigitalTV = function(e, t) {
                    var a = null;
                    return e.indexOf("InettvBrowser/") >= 0 && (a = n.get("DigitalTV")),
                    !!a && (h(t, a),
                    !0)
                }
            }();
            var c = {};
            !function() {
                var e = c;
                e.challengeDesktopTools = function(e, t) {
                    var a = null;
                    return e.indexOf("AppleSyndication/") >= 0 ? a = n.get("SafariRSSReader") : e.indexOf("compatible; Google Desktop/") >= 0 ? a = n.get("GoogleDesktop") : e.indexOf("Windows-RSS-Platform") >= 0 && (a = n.get("WindowsRSSReader")),
                    !!a && (h(t, a),
                    !0)
                }
                ,
                e.challengeSmartPhonePatterns = function(e, t) {
                    var a;
                    return e.indexOf("CFNetwork/") >= 0 && (a = n.get("iOS"),
                    p(t, a[n.KEY_CATEGORY]),
                    g(t, a[n.KEY_NAME]),
                    !0)
                }
                ,
                e.challengeHTTPLibrary = function(e, t) {
                    var a, r;
                    return /^(?:Apache-HttpClient\/|Jakarta Commons-HttpClient\/|Java\/)/.exec(e) || /[- ]HttpClient(\/|$)/.exec(e) || e.indexOf("Java(TM) 2 Runtime Environment,") >= 0 ? (a = n.get("HTTPLibrary"),
                    r = "Java") : /^Wget/.exec(e) ? (a = n.get("HTTPLibrary"),
                    r = "wget") : /^(?:libwww-perl|WWW-Mechanize|LWP::Simple|LWP |lwp-trivial)/.exec(e) ? (a = n.get("HTTPLibrary"),
                    r = "perl") : /^(?:Ruby|feedzirra|Typhoeus)/.exec(e) ? (a = n.get("HTTPLibrary"),
                    r = "ruby") : /^(?:Python-urllib\/|Twisted )/.exec(e) ? (a = n.get("HTTPLibrary"),
                    r = "python") : /^(:?PHP|WordPress|CakePHP|PukiWiki|PECL::HTTP)(?:\/| |$)/.exec(e) || /(?:PEAR |)HTTP_Request(?: class|2)/.exec(e) || e.indexOf("PEAR HTTP_Request class;") >= 0 ? (a = n.get("HTTPLibrary"),
                    r = "php") : e.indexOf("curl/") >= 0 && (a = n.get("HTTPLibrary"),
                    r = "curl"),
                    !!a && (h(t, a),
                    y(t, r),
                    !0)
                }
                ,
                e.challengeMaybeRSSReader = function(e, t) {
                    var a = null;
                    return (/rss(?:reader|bar|[-_ \/;()]|[ +]*\/)/i.exec(e) || /headline-reader/i.exec(e) || e.indexOf("cococ/") >= 0) && (a = n.get("VariousRSSReader")),
                    !!a && (h(t, a),
                    !0)
                }
            }();
            var f = {};
            !function() {
                var e = f;
                e.VERSION = a,
                e.parse = function(e) {
                    return function(e) {
                        e[n.ATTRIBUTE_NAME] || (e[n.ATTRIBUTE_NAME] = n.VALUE_UNKNOWN);
                        e[n.ATTRIBUTE_CATEGORY] || (e[n.ATTRIBUTE_CATEGORY] = n.VALUE_UNKNOWN);
                        e[n.ATTRIBUTE_OS] || (e[n.ATTRIBUTE_OS] = n.VALUE_UNKNOWN);
                        e[n.ATTRIBUTE_OS_VERSION] || (e[n.ATTRIBUTE_OS_VERSION] = n.VALUE_UNKNOWN);
                        e[n.ATTRIBUTE_VERSION] || (e[n.ATTRIBUTE_VERSION] = n.VALUE_UNKNOWN);
                        e[n.ATTRIBUTE_VENDOR] || (e[n.ATTRIBUTE_VENDOR] = n.VALUE_UNKNOWN);
                        return e
                    }(function(e) {
                        var a = {};
                        if (!e || "-" === e)
                            return a;
                        if (t(e, a))
                            return a;
                        if (function(e, t) {
                            return !!o.challengeMSIE(e, t) || (!!o.challengeVivaldi(e, t) || (!!o.challengeYandexBrowser(e, t) || (!!o.challengeSafariChrome(e, t) || (!!o.challengeFirefox(e, t) || (!!o.challengeOpera(e, t) || !!o.challengeWebview(e, t))))))
                        }(e, a))
                            return r(e, a),
                            a;
                        return function(e, t) {
                            return !!l.challengeDocomo(e, t) || (!!l.challengeAu(e, t) || (!!l.challengeSoftbank(e, t) || (!!l.challengeWillcom(e, t) || !!l.challengeMisc(e, t))))
                        }(e, a) || function(e, t) {
                            return !!d.challengePlaystation(e, t) || (!!d.challengeNintendo(e, t) || !!d.challengeDigitalTV(e, t))
                        }(e, a) || function(e, t) {
                            return !!c.challengeDesktopTools(e, t)
                        }(e, a) || r(e, a) || function(e, t) {
                            !!c.challengeSmartPhonePatterns(e, t) || (!!o.challengeSleipnir(e, t) || (!!c.challengeHTTPLibrary(e, t) || (!!c.challengeMaybeRSSReader(e, t) || u.challengeMaybeCrawler(e, t))))
                        }(e, a),
                        a
                    }(e))
                }
                ,
                e.isCrawler = function(e) {
                    return !!e && "-" !== e && t(e, {})
                }
                ;
                function t(e, t) {
                    return !!u.challengeGoogle(e, t) || !!u.challengeCrawlers(e, t)
                }
                function r(e, t) {
                    return !!s.challengeWindows(e, t) || (!!s.challengeOSX(e, t) || (!!s.challengeLinux(e, t) || (!!s.challengeSmartPhone(e, t) || (!!s.challengeMobilePhone(e, t) || (!!s.challengeAppliance(e, t) || !!s.challengeMisc(e, t))))))
                }
                var i = {};
                i[n.ATTRIBUTE_NAME] = n.VALUE_UNKNOWN,
                i[n.ATTRIBUTE_CATEGORY] = n.VALUE_UNKNOWN,
                i[n.ATTRIBUTE_OS] = n.VALUE_UNKNOWN,
                i[n.ATTRIBUTE_OS_VERSION] = n.VALUE_UNKNOWN,
                i[n.ATTRIBUTE_VERSION] = n.VALUE_UNKNOWN,
                i[n.ATTRIBUTE_VENDOR] = n.VALUE_UNKNOWN
            }();
            var h = i.updateMap
              , p = i.updateCategory
              , g = i.updateOs
              , m = i.updateOsVersion
              , y = i.updateVersion;
            void 0 === (r = function() {
                return f
            }
            .apply(t, [])) || (e.exports = r)
        }()
    }
    , function(module, exports, __webpack_require__) {
        var e;
        window,
        e = function() {
            return function(e) {
                var t = {};
                function a(r) {
                    if (t[r])
                        return t[r].exports;
                    var n = t[r] = {
                        i: r,
                        l: !1,
                        exports: {}
                    };
                    return e[r].call(n.exports, n, n.exports, a),
                    n.l = !0,
                    n.exports
                }
                return a.m = e,
                a.c = t,
                a.d = function(e, t, r) {
                    a.o(e, t) || Object.defineProperty(e, t, {
                        enumerable: !0,
                        get: r
                    })
                }
                ,
                a.r = function(e) {
                    "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                        value: "Module"
                    }),
                    Object.defineProperty(e, "__esModule", {
                        value: !0
                    })
                }
                ,
                a.t = function(e, t) {
                    if (1 & t && (e = a(e)),
                    8 & t)
                        return e;
                    if (4 & t && "object" == typeof e && e && e.__esModule)
                        return e;
                    var r = Object.create(null);
                    if (a.r(r),
                    Object.defineProperty(r, "default", {
                        enumerable: !0,
                        value: e
                    }),
                    2 & t && "string" != typeof e)
                        for (var n in e)
                            a.d(r, n, function(t) {
                                return e[t]
                            }
                            .bind(null, n));
                    return r
                }
                ,
                a.n = function(e) {
                    var t = e && e.__esModule ? function() {
                        return e.default
                    }
                    : function() {
                        return e
                    }
                    ;
                    return a.d(t, "a", t),
                    t
                }
                ,
                a.o = function(e, t) {
                    return Object.prototype.hasOwnProperty.call(e, t)
                }
                ,
                a.p = "",
                a(a.s = 0)
            }([function(e, t, a) {
                var r, n = a(1)(), i = a(3), o = a(5), s = a(8)();
                n.prefixColors = ["#F2777A", "#F99157", "#FFCC66", "#99CC99", "#66CCCC", "#6699CC", "#CC99CC"],
                n._setPrefixRegExps = function() {
                    try {
                        s.localStorage && "string" == typeof s.localStorage.getItem("debug") && (n._prefixRegExps = [],
                        s.localStorage.getItem("debug").split(",").forEach((function(e) {
                            var t = "enable";
                            "-" === (e = e.trim())[0] && (e = e.substr(1),
                            t = "disable");
                            var a = n._prepareRegExpForPrefixSearch(e);
                            n._prefixRegExps.push({
                                type: t,
                                regExp: a
                            })
                        }
                        )))
                    } catch (e) {}
                }
                ,
                n._getNextPrefixColor = (r = 0,
                function() {
                    return r += 1,
                    n.prefixColors[r % n.prefixColors.length]
                }
                ),
                n.prototype._getDecoratedPrefix = function() {
                    var e = [];
                    return o() ? (e.push("%c" + this.opts.prefix + "%c "),
                    e.push("color:" + this.opts.prefixColor + "; font-weight:bold;", "")) : e.push("[" + this.opts.prefix + "] "),
                    e
                }
                ,
                n.prototype._prepareOutput = function(e) {
                    var t, a = this._getDecoratedPrefix();
                    return "string" == typeof e[0] ? this.opts.markdown && o() ? (t = i.parse(e[0]),
                    a[0] = a[0] + t.text,
                    a = a.concat(t.styles)) : a[0] = a[0] + e[0] : a.push(e[0]),
                    1 < e.length && (a = a.concat(e.slice(1))),
                    a
                }
                ,
                n._setPrefixRegExps(),
                e.exports = n
            }
            , function(e, t, a) {
                var r = a(2);
                e.exports = function() {
                    function e(t, a) {
                        return this instanceof e ? e._isPrefixAlreadyInUse(t) ? e._getInstanceByPrefix(t) : (this.opts = e._normalizeOpts(t, a),
                        this.state = e._getInitialState(this.opts),
                        e._decorateLoggerMethods(this),
                        e._instances.push(this),
                        this) : new e(t,a)
                    }
                    return e.transports = [],
                    e._instances = [],
                    e._prefixRegExps = [],
                    e._prepareRegExpForPrefixSearch = function(e) {
                        return new RegExp("^" + e.replace(/\*/g, ".*?") + "$")
                    }
                    ,
                    e._isPrefixAlreadyInUse = function(t) {
                        return e._instances.some((function(e) {
                            return e.opts.prefix === t
                        }
                        ))
                    }
                    ,
                    e._getInstanceByPrefix = function(t) {
                        return e._instances.filter((function(e) {
                            return e.opts.prefix === t
                        }
                        ))[0]
                    }
                    ,
                    e._normalizeOpts = function(t, a) {
                        if ("string" != typeof t)
                            throw new TypeError("prefix must be a string");
                        var r = void 0 === (a = a || {}).markdown || Boolean(a.markdown)
                          , n = a.prefixColor || e._getNextPrefixColor();
                        return {
                            logger: a.logger || console,
                            markdown: r,
                            plaintext: Boolean(a.plaintext),
                            prefix: t,
                            prefixColor: n
                        }
                    }
                    ,
                    e._getInitialState = function(t) {
                        return {
                            isEnabled: e._getEnableState(t)
                        }
                    }
                    ,
                    e._getEnableState = function(t) {
                        var a = !1;
                        return e._prefixRegExps.forEach((function(e) {
                            "enable" === e.type && e.regExp.test(t.prefix) ? a = !0 : "disable" === e.type && e.regExp.test(t.prefix) && (a = !1)
                        }
                        )),
                        a
                    }
                    ,
                    e._decorateLoggerMethods = function(t) {
                        var a = t.opts.logger
                          , n = Object.keys(a).filter((function(e) {
                            return "function" == typeof a[e]
                        }
                        ));
                        0 === n.length && (n = ["debug", "log", "warn", "error", "info"]),
                        n.forEach((function(n) {
                            t[n] = function() {
                                var t = r(arguments)
                                  , i = this.opts.prefix;
                                if (e.transports.length) {
                                    var o = "[" + i + "] " + t.filter((function(e) {
                                        return "object" != typeof e
                                    }
                                    )).join(" ");
                                    e.transports.forEach(function(e) {
                                        e({
                                            state: this.state,
                                            instance: i,
                                            level: n,
                                            args: t,
                                            msg: o
                                        })
                                    }
                                    .bind(this))
                                }
                                if (this.state.isEnabled) {
                                    var s = this._prepareOutput(t, n);
                                    a[n].apply(a, s)
                                }
                            }
                        }
                        ))
                    }
                    ,
                    e
                }
            }
            , function(e, t) {
                e.exports = function(e) {
                    return Array.prototype.slice.call(e, 0)
                }
            }
            , function(e, t, a) {
                var r = [];
                function n(e) {
                    return function(t) {
                        return r.push(e),
                        r.push(""),
                        "%c" + t + "%c"
                    }
                }
                var i = new (a(4))({
                    renderer: {
                        "*": n("font-weight:bold;"),
                        _: n("font-style:italic;"),
                        "`": n("background-color:rgba(255,204,102, 0.1);color:#FFCC66;padding:2px 5px;border-radius:2px;")
                    }
                });
                e.exports = {
                    parse: function(e) {
                        var t = {
                            text: i.parse(e),
                            styles: [].concat(r)
                        };
                        return r.length = 0,
                        t
                    }
                }
            }
            , function(e, t) {
                var a = /([_*`\\]|[^_*`\\]+)/g
                  , r = /[_*`]/;
                function n(e) {
                    this.renderer = e.renderer
                }
                function i(e) {
                    return r.test(e)
                }
                n.prototype.parse = function(e) {
                    if ("" === e)
                        return "";
                    var t, r, n, o = e.match(a), s = this.renderer, l = "", u = [], d = {}, c = 0;
                    function f(e) {
                        for (var a = ""; t && t.tag !== e; )
                            a = t.tag + t.text + a,
                            d[t.tag] = !1,
                            t = u.pop();
                        return a
                    }
                    for (; n = o[c]; ) {
                        if (r = "",
                        c++,
                        i(n))
                            if (d[n])
                                r = f(n),
                                r = s[t.tag](t.text + r),
                                d[n] = !1,
                                t = u.pop();
                            else {
                                var h = "";
                                if ("`" === n) {
                                    var p = o.indexOf(n, c);
                                    -1 !== p && (l += f(),
                                    h = o.slice(c, p).join(""),
                                    c = p)
                                }
                                t && u.push(t),
                                d[n] = !0,
                                t = {
                                    tag: n,
                                    text: h
                                }
                            }
                        else if ("\\" === (r = n)) {
                            var g = o[c];
                            (i(g) || "\\" === g) && (r = g,
                            c++)
                        }
                        r && (t ? t.text += r : l += r,
                        r = "")
                    }
                    return l + f()
                }
                ,
                e.exports = n
            }
            , function(e, t, a) {
                var r = a(6)
                  , n = a(7);
                e.exports = function() {
                    return r() || n()
                }
            }
            , function(e, t) {
                e.exports = function() {
                    try {
                        return "WebkitAppearance"in document.documentElement.style && !/Edge/.test(navigator.userAgent)
                    } catch (e) {
                        return !1
                    }
                }
            }
            , function(e, t) {
                e.exports = function() {
                    try {
                        return /firefox\/(\d+)/i.test(navigator.userAgent)
                    } catch (e) {
                        return !1
                    }
                }
            }
            , function(e, t, a) {
                (function(t) {
                    function a(e, t) {
                        return "object" == typeof e && e.self === e && e || "object" == typeof t && t.global === t && t || this
                    }
                    e.exports = a.bind(this, self, t),
                    e.exports.getGlobal = a
                }
                ).call(this, a(9))
            }
            , function(ob, pb) {
                var qb;
                qb = function() {
                    return this
                }();
                try {
                    qb = qb || Function("return this")() || eval("this")
                } catch (ob) {
                    "object" == typeof window && (qb = window)
                }
                ob.exports = qb
            }
            ])
        }
        ,
        module.exports = e()
    }
    , function(e, t, a) {
        var r = a(6)
          , n = a(143)
          , i = r.WeakMap;
        e.exports = "function" == typeof i && /native code/.test(n(i))
    }
    , function(e, t, a) {
        var r = a(33)
          , n = a(64).f
          , i = {}.toString
          , o = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
        e.exports.f = function(e) {
            return o && "[object Window]" == i.call(e) ? function(e) {
                try {
                    return n(e)
                } catch (e) {
                    return o.slice()
                }
            }(e) : n(r(e))
        }
    }
    , function(e, t, a) {
        var r = a(17)
          , n = a(193);
        e.exports = function(e, t, a, i) {
            try {
                return i ? t(r(a)[0], a[1]) : t(a)
            } catch (t) {
                throw n(e),
                t
            }
        }
    }
    , function(e, t, a) {
        var r = a(13);
        e.exports = function(e) {
            if (!r(e) && null !== e)
                throw TypeError("Can't set " + String(e) + " as a prototype");
            return e
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(23).some
          , i = a(80)
          , o = a(38)
          , s = i("some")
          , l = o("some");
        r({
            target: "Array",
            proto: !0,
            forced: !s || !l
        }, {
            some: function(e) {
                return n(this, e, arguments.length > 1 ? arguments[1] : void 0)
            }
        })
    }
    , function(e, t, a) {
        var r = a(7);
        e.exports = !r((function() {
            return Object.isExtensible(Object.preventExtensions({}))
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(151)
          , n = a(83);
        e.exports = r ? {}.toString : function() {
            return "[object " + n(this) + "]"
        }
    }
    , function(e, t, a) {
        var r = a(6);
        e.exports = r.Promise
    }
    , function(e, t, a) {
        var r, n, i, o, s, l, u, d, c = a(6), f = a(41).f, h = a(200).set, p = a(201), g = a(105), m = c.MutationObserver || c.WebKitMutationObserver, y = c.document, _ = c.process, v = c.Promise, b = f(c, "queueMicrotask"), E = b && b.value;
        E || (r = function() {
            var e, t;
            for (g && (e = _.domain) && e.exit(); n; ) {
                t = n.fn,
                n = n.next;
                try {
                    t()
                } catch (e) {
                    throw n ? o() : i = void 0,
                    e
                }
            }
            i = void 0,
            e && e.enter()
        }
        ,
        !p && !g && m && y ? (s = !0,
        l = y.createTextNode(""),
        new m(r).observe(l, {
            characterData: !0
        }),
        o = function() {
            l.data = s = !s
        }
        ) : v && v.resolve ? (u = v.resolve(void 0),
        d = u.then,
        o = function() {
            d.call(u, r)
        }
        ) : o = g ? function() {
            _.nextTick(r)
        }
        : function() {
            h.call(c, r)
        }
        ),
        e.exports = E || function(e) {
            var t = {
                fn: e,
                next: void 0
            };
            i && (i.next = t),
            n || (n = t,
            o()),
            i = t
        }
    }
    , function(e, t, a) {
        var r = a(17)
          , n = a(13)
          , i = a(202);
        e.exports = function(e, t) {
            if (r(e),
            n(t) && t.constructor === e)
                return t;
            var a = i.f(e);
            return (0,
            a.resolve)(t),
            a.promise
        }
    }
    , function(e, t, a) {
        var r = a(6);
        e.exports = function(e, t) {
            var a = r.console;
            a && a.error && (1 === arguments.length ? a.error(e) : a.error(e, t))
        }
    }
    , function(e, t) {
        e.exports = function(e) {
            try {
                return {
                    error: !1,
                    value: e()
                }
            } catch (e) {
                return {
                    error: !0,
                    value: e
                }
            }
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(7);
        function n(e, t) {
            return RegExp(e, t)
        }
        t.UNSUPPORTED_Y = r((function() {
            var e = n("a", "y");
            return e.lastIndex = 2,
            null != e.exec("abcd")
        }
        )),
        t.BROKEN_CARET = r((function() {
            var e = n("^r", "gy");
            return e.lastIndex = 2,
            null != e.exec("str")
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(158).left
          , i = a(80)
          , o = a(38)
          , s = a(99)
          , l = a(105)
          , u = i("reduce")
          , d = o("reduce", {
            1: 0
        });
        r({
            target: "Array",
            proto: !0,
            forced: !u || !d || !l && s > 79 && s < 83
        }, {
            reduce: function(e) {
                return n(this, e, arguments.length, arguments.length > 1 ? arguments[1] : void 0)
            }
        })
    }
    , function(e, t, a) {
        var r = a(42)
          , n = "[" + a(261) + "]"
          , i = RegExp("^" + n + n + "*")
          , o = RegExp(n + n + "*$")
          , s = function(e) {
            return function(t) {
                var a = String(r(t));
                return 1 & e && (a = a.replace(i, "")),
                2 & e && (a = a.replace(o, "")),
                a
            }
        };
        e.exports = {
            start: s(1),
            end: s(2),
            trim: s(3)
        }
    }
    , function(e, t) {
        e.exports = "\t\n\v\f\r \u2028\u2029\ufeff"
    }
    , function(e, t, a) {
        a(5)({
            target: "Number",
            stat: !0
        }, {
            isNaN: function(e) {
                return e != e
            }
        })
    }
    , function(e, t, a) {
        "use strict";
        var r = a(60)
          , n = a(13)
          , i = [].slice
          , o = {}
          , s = function(e, t, a) {
            if (!(t in o)) {
                for (var r = [], n = 0; n < t; n++)
                    r[n] = "a[" + n + "]";
                o[t] = Function("C,a", "return new C(" + r.join(",") + ")")
            }
            return o[t](e, a)
        };
        e.exports = Function.bind || function(e) {
            var t = r(this)
              , a = i.call(arguments, 1)
              , o = function() {
                var r = a.concat(i.call(arguments));
                return this instanceof o ? s(t, r.length, r) : t.apply(e, r)
            };
            return n(t.prototype) && (o.prototype = t.prototype),
            o
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.Debug = t.FactoryMaker = t.MediaPlayer = void 0;
        var r = s(a(207))
          , n = s(a(0))
          , i = s(a(3))
          , o = a(171);
        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l = "undefined" != typeof window && window || global
          , u = l.dashjs;
        u || (u = l.dashjs = {}),
        u.MediaPlayer = r.default,
        u.FactoryMaker = n.default,
        u.Debug = i.default,
        u.Version = (0,
        o.getVersionString)(),
        t.default = u,
        t.MediaPlayer = r.default,
        t.FactoryMaker = n.default,
        t.Debug = i.default
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = u(a(1))
          , n = u(a(25))
          , i = u(a(2))
          , o = u(a(4))
          , s = u(a(0))
          , l = u(a(3));
        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function d() {
            var e = this.context
              , t = (0,
            i.default)(e).getInstance()
              , a = void 0
              , s = void 0
              , u = void 0
              , d = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0
              , T = void 0
              , S = void 0
              , A = void 0
              , C = void 0
              , I = void 0
              , P = void 0
              , w = void 0;
            function M(e) {
                if (!p || !isNaN(g)) {
                    var a = g;
                    if (isNaN(a))
                        if (v) {
                            a = e.liveStartTime;
                            var r = d.getCurrentDVRInfo()
                              , n = r ? r.range : null;
                            if (n) {
                                var i = q(_.start, !0);
                                isNaN(i) || (s.info("Start time from URI parameters: " + i),
                                a = Math.max(Math.min(a, i), n.start))
                            }
                        } else {
                            a = _.start;
                            var l = q(_.start, !1);
                            !isNaN(l) && l < a + _.duration && (s.info("Start time from URI parameters: " + l),
                            a = Math.max(a, l))
                        }
                    isNaN(a) || a === f.getTime() || (t.trigger(o.default.PLAYBACK_SEEKING, {
                        seekTime: a
                    }),
                    U(a, !1, !0))
                }
            }
            function R() {
                return parseFloat((x() - F()).toFixed(5))
            }
            function x() {
                return _.start + _.duration
            }
            function D() {
                _ && f && f.getElement() ? f.play() : E = !0
            }
            function O() {
                return _ && f ? f.isPaused() : null
            }
            function N() {
                _ && f && f.pause()
            }
            function L() {
                return _ && f ? f.isSeeking() : null
            }
            function U(e, a, r) {
                _ && f && (e !== (isNaN(S) ? f.getTime() : S) && (!0 === r ? (f.removeEventListener("seeking", te),
                s.info("Requesting internal seek to time: " + e),
                f.setCurrentTime(e, a)) : (S = e,
                t.trigger(o.default.PLAYBACK_SEEK_ASKED),
                s.info("Requesting seek to time: " + e),
                f.setCurrentTime(e, a))))
            }
            function F() {
                return _ && f ? f.getTime() : null
            }
            function B() {
                var e = F();
                if (v && !isNaN(T)) {
                    var t = T / 1e3;
                    e > t && (e -= t)
                }
                return e
            }
            function j() {
                return _ && f ? f.getPlaybackRate() : null
            }
            function G() {
                return _ && f ? f.getEnded() : null
            }
            function V() {
                return v
            }
            function K() {
                if (!v || isNaN(T))
                    return NaN;
                var e = B();
                if (isNaN(e) || 0 === e)
                    return 0;
                var t = (new Date).getTime() + 1e3 * h.getClientTimeOffset();
                return Math.max(((t - T - 1e3 * e) / 1e3).toFixed(3), 0)
            }
            function $() {
                E = !1,
                p = !1,
                g = NaN,
                y = 0,
                T = 0,
                S = NaN,
                f && (t.off(o.default.STREAM_INITIALIZED, M, this),
                t.off(o.default.DATA_UPDATE_COMPLETED, z, this),
                t.off(o.default.BUFFER_LEVEL_STATE_CHANGED, he, this),
                t.off(o.default.LOADING_PROGRESS, fe, this),
                t.off(o.default.PLAYBACK_PROGRESS, de, this),
                t.off(o.default.PLAYBACK_TIME_UPDATED, de, this),
                t.off(o.default.PLAYBACK_ENDED, le, this),
                t.off(o.default.STREAM_INITIALIZING, ge, this),
                W(),
                f.removeEventListener("canplay", X),
                f.removeEventListener("play", Q),
                f.removeEventListener("waiting", J),
                f.removeEventListener("playing", Z),
                f.removeEventListener("pause", ee),
                f.removeEventListener("error", ue),
                f.removeEventListener("seeking", te),
                f.removeEventListener("seeked", ae),
                f.removeEventListener("timeupdate", re),
                f.removeEventListener("progress", ne),
                f.removeEventListener("ratechange", ie),
                f.removeEventListener("loadedmetadata", oe),
                f.removeEventListener("stalled", pe),
                f.removeEventListener("ended", se)),
                m = null,
                f = null,
                _ = null,
                v = null
            }
            function q(e, t) {
                var a = P.getURIFragmentData();
                if (!a || !a.t)
                    return NaN;
                return a.t = a.t.split(",")[0],
                t && -1 !== a.t.indexOf("posix:") ? parseInt(a.t.substring(6)) : e + parseInt(a.t)
            }
            function H() {
                if (null === m) {
                    m = setInterval((function() {
                        var e;
                        t.trigger(o.default.WALLCLOCK_TIME_UPDATED, {
                            isDynamic: v,
                            time: new Date
                        }),
                        V() && O() && (e = Date.now(),
                        (!k || e > k + 500) && (k = e,
                        re()))
                    }
                    ), w.get().streaming.wallclockTimeUpdateInterval)
                }
            }
            function W() {
                clearInterval(m),
                m = null
            }
            function Y() {
                if (!O() && v && 0 !== f.getReadyState()) {
                    var e = B()
                      , t = function(e) {
                        var t = d.getCurrentDVRInfo()
                          , a = t ? t.range : null;
                        return a ? (s.debug("Checking DVR window for at " + e + " with DVR window range " + a.start + " - " + a.end),
                        e > a.end ? Math.max(a.end - y, a.start) : e > 0 && e + .25 < a.start && Math.abs(e - a.start) < 31536e4 ? a.start : e) : NaN
                    }(e);
                    !isNaN(t) && t !== e && (s.debug("UpdateCurrentTime: Seek to actual time: " + t + " from currentTime: " + e),
                    U(t))
                }
            }
            function z(e) {
                if (!e.error) {
                    var t = c.convertDataToRepresentationInfo(e.currentRepresentation)
                      , a = t ? t.mediaInfo.streamInfo : null;
                    null !== a && _.id === a.id && (_ = a,
                    Y())
                }
            }
            function X() {
                t.trigger(o.default.CAN_PLAY)
            }
            function Q() {
                s.info("Native video element event: play"),
                Y(),
                H(),
                t.trigger(o.default.PLAYBACK_STARTED, {
                    startTime: F()
                })
            }
            function J() {
                s.info("Native video element event: waiting"),
                t.trigger(o.default.PLAYBACK_WAITING, {
                    playingTime: F()
                })
            }
            function Z() {
                s.info("Native video element event: playing"),
                t.trigger(o.default.PLAYBACK_PLAYING, {
                    playingTime: F()
                })
            }
            function ee() {
                s.info("Native video element event: pause"),
                t.trigger(o.default.PLAYBACK_PAUSED, {
                    ended: G()
                })
            }
            function te() {
                var e = F();
                isNaN(S) || S === e || (e = S),
                S = NaN,
                s.info("Seeking to: " + e),
                H(),
                t.trigger(o.default.PLAYBACK_SEEKING, {
                    seekTime: e
                })
            }
            function ae() {
                s.info("Native video element event: seeked"),
                t.trigger(o.default.PLAYBACK_SEEKED),
                f.addEventListener("seeking", te)
            }
            function re() {
                _ && t.trigger(o.default.PLAYBACK_TIME_UPDATED, {
                    timeToEnd: R(),
                    time: F()
                })
            }
            function ne() {
                t.trigger(o.default.PLAYBACK_PROGRESS)
            }
            function ie() {
                var e = j();
                s.info("Native video element event: ratechange: ", e),
                t.trigger(o.default.PLAYBACK_RATE_CHANGED, {
                    playbackRate: e
                })
            }
            function oe() {
                s.info("Native video element event: loadedmetadata"),
                t.trigger(o.default.PLAYBACK_METADATA_LOADED),
                H()
            }
            function se() {
                s.info("Native video element event: ended"),
                N(),
                W(),
                t.trigger(o.default.PLAYBACK_ENDED, {
                    isLast: u.getActiveStreamInfo().isLast
                })
            }
            function le(e) {
                if (m && e.isLast) {
                    s.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");
                    var t = e.seekTime ? e.seekTime : x();
                    f.setCurrentTime(t),
                    N(),
                    W()
                }
            }
            function ue(e) {
                var a = e.target || e.srcElement;
                t.trigger(o.default.PLAYBACK_ERROR, {
                    error: a.error
                })
            }
            function de() {
                var e, t, a;
                v && w.get().streaming.lowLatencyEnabled && w.get().streaming.liveCatchUpPlaybackRate > 0 && !O() && !L() && (e = K(),
                t = Math.abs(e - b.getLiveDelay()),
                a = b.getLiveCatchupLatencyThreshold(),
                w.get().streaming.lowLatencyEnabled && w.get().streaming.liveCatchUpPlaybackRate > 0 && F() > 0 && t > w.get().streaming.liveCatchUpMinDrift && (isNaN(a) || e <= a) ? function() {
                    if (f) {
                        var e = w.get().streaming.liveCatchUpPlaybackRate
                          , t = b.getLiveDelay()
                          , a = K() - t
                          , r = 5 * a
                          , n = 2 * e / (1 + Math.pow(Math.E, -r))
                          , i = 1 - e + n;
                        if (C)
                            (function() {
                                var e = null;
                                return u.getActiveStreamProcessors().forEach((function(t) {
                                    var a = t.getBufferLevel();
                                    e = null === e ? a : Math.min(e, a)
                                }
                                )),
                                e
                            }
                            )() > t / 2 ? C = !1 : a > 0 && (i = 1);
                        Math.abs(f.getPlaybackRate() - i) > I && f.setPlaybackRate(i),
                        w.get().streaming.liveCatchUpMaxDrift > 0 && !A && a > w.get().streaming.liveCatchUpMaxDrift ? (s.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),
                        A = !0,
                        U(((o = d.getCurrentDVRInfo()) ? o.range : null).end - b.getLiveDelay(), !0, !1)) : A = !1
                    }
                    var o
                }() : ce())
            }
            function ce() {
                f && f.setPlaybackRate(1)
            }
            function fe(e) {
                if (!1 === e.stream && w.get().streaming.lowLatencyEnabled && !isNaN(e.request.duration)) {
                    var t = 1.2 * e.request.duration;
                    if (t > b.getLiveDelay()) {
                        s.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:", t.toFixed(2));
                        var a = {
                            streaming: {
                                liveDelay: t
                            }
                        };
                        w.update(a)
                    }
                }
            }
            function he(e) {
                e.streamId === _.id && (w.get().streaming.lowLatencyEnabled ? e.state !== n.default.BUFFER_EMPTY || L() || C || (C = !0,
                ce()) : f.setStallState(e.mediaType, e.state === n.default.BUFFER_EMPTY))
            }
            function pe(e) {
                t.trigger(o.default.PLAYBACK_STALLED, {
                    e: e
                })
            }
            function ge(e) {
                !function(e, t) {
                    if (e && e.manifestInfo && e.manifestInfo.serviceDescriptions) {
                        for (var a = void 0, n = 0; n < e.manifestInfo.serviceDescriptions.length; n++) {
                            var i = e.manifestInfo.serviceDescriptions[n];
                            if (i.schemeIdUri === r.default.SERVICE_DESCRIPTION_LL_SCHEME) {
                                a = i;
                                break
                            }
                        }
                        a && t && t.supplementalProperties && "true" === t.supplementalProperties[r.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME] && (a.latency && a.latency.target > 0 && (s.debug("Apply LL properties coming from service description. Target Latency (ms):", a.latency.target),
                        w.update({
                            streaming: {
                                lowLatencyEnabled: !0,
                                liveDelay: a.latency.target / 1e3,
                                liveCatchUpMinDrift: a.latency.max > a.latency.target ? (a.latency.max - a.latency.target) / 1e3 : void 0
                            }
                        })),
                        a.playbackRate && a.playbackRate.max > 1 && (s.debug("Apply LL properties coming from service description. Max PlaybackRate:", a.playbackRate.max),
                        w.update({
                            streaming: {
                                lowLatencyEnabled: !0,
                                liveCatchUpPlaybackRate: a.playbackRate.max - 1
                            }
                        })))
                    }
                }(e.streamInfo, e.mediaInfo)
            }
            return a = {
                initialize: function(e, a, r) {
                    _ = e,
                    f.addEventListener("canplay", X),
                    f.addEventListener("play", Q),
                    f.addEventListener("waiting", J),
                    f.addEventListener("playing", Z),
                    f.addEventListener("pause", ee),
                    f.addEventListener("error", ue),
                    f.addEventListener("seeking", te),
                    f.addEventListener("seeked", ae),
                    f.addEventListener("timeupdate", re),
                    f.addEventListener("progress", ne),
                    f.addEventListener("ratechange", ie),
                    f.addEventListener("loadedmetadata", oe),
                    f.addEventListener("stalled", pe),
                    f.addEventListener("ended", se),
                    v = _.manifestInfo.isDynamic,
                    A = !1,
                    C = !1,
                    p = !0 === a,
                    g = r;
                    var n = "undefined" != typeof navigator ? navigator.userAgent.toLowerCase() : ""
                      , i = /safari/.test(n) && !/chrome/.test(n);
                    I = i ? .25 : .02,
                    t.on(o.default.STREAM_INITIALIZED, M, this),
                    t.on(o.default.DATA_UPDATE_COMPLETED, z, this),
                    t.on(o.default.LOADING_PROGRESS, fe, this),
                    t.on(o.default.BUFFER_LEVEL_STATE_CHANGED, he, this),
                    t.on(o.default.PLAYBACK_PROGRESS, de, this),
                    t.on(o.default.PLAYBACK_TIME_UPDATED, de, this),
                    t.on(o.default.PLAYBACK_ENDED, le, this),
                    t.on(o.default.STREAM_INITIALIZING, ge, this),
                    E && (E = !1,
                    D())
                },
                setConfig: function(e) {
                    e && (e.streamController && (u = e.streamController),
                    e.dashMetrics && (d = e.dashMetrics),
                    e.mediaPlayerModel && (b = e.mediaPlayerModel),
                    e.adapter && (c = e.adapter),
                    e.videoModel && (f = e.videoModel),
                    e.timelineConverter && (h = e.timelineConverter),
                    e.uriFragmentModel && (P = e.uriFragmentModel),
                    e.settings && (w = e.settings))
                },
                getStartTimeFromUriParameters: q,
                getTimeToStreamEnd: R,
                getTime: F,
                getNormalizedTime: B,
                getPlaybackRate: j,
                getPlayedRanges: function() {
                    return _ && f ? f.getPlayedRanges() : null
                },
                getEnded: G,
                getIsDynamic: V,
                getStreamController: function() {
                    return u
                },
                computeAndSetLiveDelay: function(e, t, a) {
                    var r, n = void 0, i = void 0, o = !isNaN(e) && isFinite(e) ? e : NaN, s = c.getSuggestedPresentationDelay();
                    if (n = w.get().streaming.lowLatencyEnabled ? 0 : b.getLiveDelay() ? b.getLiveDelay() : null === w.get().streaming.liveDelayFragmentCount || isNaN(w.get().streaming.liveDelayFragmentCount) || isNaN(o) ? !0 === w.get().streaming.useSuggestedPresentationDelay && null !== s && !isNaN(s) && s > 0 ? s : isNaN(o) ? isNaN(a) ? 4 * _.manifestInfo.minBufferTime : 4 * a : 4 * o : o * w.get().streaming.liveDelayFragmentCount,
                    null !== (r = c.getAvailabilityStartTime()) && (T = r),
                    t > 0) {
                        var l = Math.max(t - 10, t / 2);
                        i = Math.min(n, l)
                    } else
                        i = n;
                    return y = i,
                    i
                },
                getLiveDelay: function() {
                    return y
                },
                setLiveDelay: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                    t && e < y || (y = e)
                },
                getCurrentLiveLatency: K,
                play: D,
                isPaused: O,
                pause: N,
                isSeeking: L,
                getStreamEndTime: x,
                seek: U,
                reset: $
            },
            s = (0,
            l.default)(e).getInstance().getLogger(a),
            $(),
            a
        }
        d.__dashjs_factory_name = "PlaybackController",
        t.default = s.default.getSingletonFactory(d)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(106);
        var i = function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return e.BUFFERING_COMPLETED = "bufferingCompleted",
                e.BUFFER_CLEARED = "bufferCleared",
                e.BUFFER_LEVEL_UPDATED = "bufferLevelUpdated",
                e.BYTES_APPENDED = "bytesAppended",
                e.BYTES_APPENDED_END_FRAGMENT = "bytesAppendedEndFragment",
                e.CHECK_FOR_EXISTENCE_COMPLETED = "checkForExistenceCompleted",
                e.CURRENT_TRACK_CHANGED = "currentTrackChanged",
                e.DATA_UPDATE_COMPLETED = "dataUpdateCompleted",
                e.DATA_UPDATE_STARTED = "dataUpdateStarted",
                e.INBAND_EVENTS = "inbandEvents",
                e.INITIALIZATION_LOADED = "initializationLoaded",
                e.INIT_FRAGMENT_LOADED = "initFragmentLoaded",
                e.INIT_FRAGMENT_NEEDED = "initFragmentNeeded",
                e.INTERNAL_MANIFEST_LOADED = "internalManifestLoaded",
                e.ORIGINAL_MANIFEST_LOADED = "originalManifestLoaded",
                e.LIVE_EDGE_SEARCH_COMPLETED = "liveEdgeSearchCompleted",
                e.LOADING_COMPLETED = "loadingCompleted",
                e.LOADING_PROGRESS = "loadingProgress",
                e.LOADING_DATA_PROGRESS = "loadingDataProgress",
                e.LOADING_ABANDONED = "loadingAborted",
                e.MANIFEST_UPDATED = "manifestUpdated",
                e.MEDIA_FRAGMENT_LOADED = "mediaFragmentLoaded",
                e.MEDIA_FRAGMENT_NEEDED = "mediaFragmentNeeded",
                e.QUOTA_EXCEEDED = "quotaExceeded",
                e.REPRESENTATION_UPDATE_STARTED = "representationUpdateStarted",
                e.REPRESENTATION_UPDATE_COMPLETED = "representationUpdateCompleted",
                e.SEGMENTS_LOADED = "segmentsLoaded",
                e.SERVICE_LOCATION_BLACKLIST_ADD = "serviceLocationBlacklistAdd",
                e.SERVICE_LOCATION_BLACKLIST_CHANGED = "serviceLocationBlacklistChanged",
                e.SOURCEBUFFER_REMOVE_COMPLETED = "sourceBufferRemoveCompleted",
                e.STREAMS_COMPOSED = "streamsComposed",
                e.STREAM_BUFFERING_COMPLETED = "streamBufferingCompleted",
                e.STREAM_COMPLETED = "streamCompleted",
                e.TEXT_TRACKS_QUEUE_INITIALIZED = "textTracksQueueInitialized",
                e.TIME_SYNCHRONIZATION_COMPLETED = "timeSynchronizationComplete",
                e.URL_RESOLUTION_FAILED = "urlResolutionFailed",
                e.VIDEO_CHUNK_RECEIVED = "videoChunkReceived",
                e.WALLCLOCK_TIME_UPDATED = "wallclockTimeUpdated",
                e.XLINK_ELEMENT_LOADED = "xlinkElementLoaded",
                e.XLINK_READY = "xlinkReady",
                e.SEGMENTBASE_INIT_REQUEST_NEEDED = "segmentBaseInitRequestNeeded",
                e.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED = "segmentBaseSegmentsListRequestNeeded",
                e.SEEK_TARGET = "seekTarget",
                e.DYNAMIC_STREAM_COMPLETED = "dynamicStreamCompleted",
                e
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default);
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = b(a(1))
          , n = b(a(25))
          , i = b(a(268))
          , o = b(a(225))
          , s = b(a(2))
          , l = b(a(4))
          , u = b(a(0))
          , d = a(167)
          , c = b(a(3))
          , f = b(a(109))
          , h = b(a(39))
          , p = b(a(110))
          , g = b(a(325))
          , m = b(a(326))
          , y = b(a(12))
          , _ = b(a(21))
          , v = b(a(327));
        function b(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function E() {
            var e = this.context
              , t = (0,
            s.default)(e).getInstance()
              , a = void 0
              , u = void 0
              , b = void 0
              , E = void 0
              , k = void 0
              , T = void 0
              , S = void 0
              , A = void 0
              , C = void 0
              , I = void 0
              , P = void 0
              , w = void 0
              , M = void 0
              , R = void 0
              , x = void 0
              , D = void 0
              , O = void 0
              , N = void 0
              , L = void 0
              , U = void 0
              , F = void 0
              , B = void 0
              , j = void 0
              , G = void 0
              , V = void 0
              , K = void 0
              , $ = void 0
              , q = void 0
              , H = void 0
              , W = void 0
              , Y = void 0
              , z = void 0
              , X = void 0
              , Q = void 0
              , J = void 0
              , Z = void 0
              , ee = void 0
              , te = void 0
              , ae = void 0;
            function re() {
                if (Ae()) {
                    var e = H.getPlaybackQuality();
                    e && A.addDroppedFrames(e)
                }
            }
            function ne(e) {
                var t = he(e.seekTime);
                t === F && ee && ee.length > 0 && ee.forEach((function(e) {
                    e.deactivate(!0)
                }
                )),
                t && t !== F ? (Ie(d.PlayListTrace.END_OF_PERIOD_STOP_REASON),
                ye(t, F, e.seekTime)) : Ie(d.PlayListTrace.USER_REQUEST_STOP_REASON),
                Pe(d.PlayList.SEEK_START_REASON)
            }
            function ie(e) {
                var t = me();
                Ie(d.PlayListTrace.END_OF_PERIOD_STOP_REASON),
                ye(t, F, e.seekTime),
                Pe(d.PlayList.SEEK_START_REASON)
            }
            function oe() {
                u.debug("[onPlaybackStarted]"),
                X ? (X = !1,
                Pe(d.PlayList.INITIAL_PLAYOUT_START_REASON)) : z && (z = !1,
                Pe(d.PlayList.RESUME_FROM_PAUSE_START_REASON))
            }
            function se(e) {
                u.debug("[onPlaybackPaused]"),
                e.ended || (z = !0,
                Ie(d.PlayListTrace.USER_REQUEST_STOP_REASON))
            }
            function le() {
                Q && (clearInterval(Q),
                Q = null)
            }
            function ue() {
                J || (J = setInterval((function() {
                    !function() {
                        if (!F || !de(F))
                            return;
                        var e = function(e) {
                            try {
                                var t = e || (F || null);
                                if (t) {
                                    var a = t.getStreamInfo().start;
                                    return U.filter((function(e) {
                                        return e.getStreamInfo().start > a
                                    }
                                    ))
                                }
                            } catch (e) {
                                return []
                            }
                        }(F)
                          , t = 0
                          , a = function() {
                            var a = e[t]
                              , n = 0 === t ? F : e[t - 1];
                            if (!a.getPreloadingScheduled() && de(n) && q) {
                                var i = [r.default.VIDEO, r.default.AUDIO]
                                  , o = !0;
                                i.forEach((function(e) {
                                    var t = S.getMediaInfoForType(a.getStreamInfo(), e);
                                    S.getVoRepresentations(t).forEach((function(e) {
                                        var t = L.calcSegmentAvailabilityRange(e, !0);
                                        t.end < t.start && (o = !1)
                                    }
                                    ))
                                }
                                )),
                                o && function(e) {
                                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
                                    if (q && !e.getPreloaded()) {
                                        var a = fe(e, t);
                                        a && (e.setPreloadingScheduled(!0),
                                        u.info("[onStreamCanLoadNext] Preloading next stream with id " + e.getId()),
                                        !0,
                                        e.preload(q, Z),
                                        ee.push(e),
                                        e.getProcessors().forEach((function(t) {
                                            t.setBufferingTime(e.getStartTime())
                                        }
                                        )))
                                    }
                                }(a, n)
                            }
                            t += 1
                        };
                        for (; t < e.length; )
                            a()
                    }()
                }
                ), 500))
            }
            function de(e) {
                try {
                    if (!e)
                        return !1;
                    var t = e.getProcessors().filter((function(e) {
                        return e.getType() === r.default.AUDIO || e.getType() === r.default.VIDEO
                    }
                    ));
                    if (!t || 0 === t.length)
                        return !1;
                    var a = t.filter((function(e) {
                        return !e.isBufferingCompleted()
                    }
                    ));
                    return a && 0 === a.length
                } catch (e) {
                    return !1
                }
            }
            function ce() {
                var e = Me().isLast;
                q && e && (u.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),
                C.signalEndOfStream(q))
            }
            function fe(e, t) {
                try {
                    return t.isProtectionCompatible(e, t) && (te || t.isMediaCodecCompatible(e, t)) && !function(e) {
                        try {
                            var t = e.getStreamInfo()
                              , a = S.getAdaptationForType(t.index, r.default.FRAGMENTED_TEXT, t);
                            return !!a && (-1 !== a.codecs.indexOf("stpp") || -1 !== a.codecs.indexOf("wvtt"))
                        } catch (e) {
                            return !1
                        }
                    }(e)
                } catch (e) {
                    return !1
                }
            }
            function he(e) {
                if (isNaN(e))
                    return null;
                var t = 0
                  , a = null
                  , r = U.length;
                r > 0 && (t += U[0].getStartTime());
                for (var n = 0; n < r; n++)
                    if (a = U[n],
                    e < (t = parseFloat((t + a.getDuration()).toFixed(5))))
                        return a;
                return null
            }
            function pe() {
                return F ? F.getProcessors() : []
            }
            function ge(e) {
                if (!F.getIsEndedEventSignaled()) {
                    F.setIsEndedEventSignaled(!0);
                    var t = me();
                    t ? (u.debug("StreamController onEnded, found next stream with id " + t.getStreamInfo().id),
                    ye(t, F, NaN)) : (u.debug("StreamController no next stream found"),
                    F.setIsEndedEventSignaled(!1)),
                    Ie(t ? d.PlayListTrace.END_OF_PERIOD_STOP_REASON : d.PlayListTrace.END_OF_CONTENT_STOP_REASON),
                    !1
                }
                e && e.isLast && le()
            }
            function me() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null
                  , t = e || (F || null);
                if (t) {
                    for (var a = t.getStreamInfo().start, r = t.getStreamInfo().duration, n = parseFloat((a + r).toFixed(5)), i = 0, o = -1, s = NaN; i < U.length; ) {
                        var l = U[i]
                          , u = l.getStreamInfo().start - n;
                        u >= 0 && (isNaN(s) || u < s) && (s = u,
                        o = i),
                        i += 1
                    }
                    return o >= 0 ? U[o] : null
                }
                return null
            }
            function ye(e, a, r) {
                if (!(V || !e || a === e && e.isActive())) {
                    V = !0,
                    t.trigger(l.default.PERIOD_SWITCH_STARTED, {
                        fromStreamInfo: a ? a.getStreamInfo() : null,
                        toStreamInfo: e.getStreamInfo()
                    });
                    var n = !1;
                    a && (n = fe(e, a),
                    a.deactivate(n)),
                    r = isNaN(r) ? !n && a ? e.getStreamInfo().start : NaN : r,
                    u.info("Switch to stream " + e.getId() + ". Seektime is " + r + ", current playback time is " + W.getTime()),
                    u.info("Seamless period switch is set to " + n),
                    F = e,
                    ee = ee.filter((function(e) {
                        return e.getId() !== F.getId()
                    }
                    )),
                    W.initialize(Me(), !!a, r),
                    H.getElement() ? _e(r, null === a, !1, n) : ve(r, n),
                    !1
                }
            }
            function _e(e, a, r, n) {
                var i = void 0;
                function o() {
                    q && "open" === q.readyState && (u.debug("MediaSource is open!"),
                    window.URL.revokeObjectURL(i),
                    q.removeEventListener("sourceopen", o),
                    q.removeEventListener("webkitsourceopen", o),
                    be(),
                    a || t.trigger(l.default.SOURCE_INITIALIZED),
                    r ? F.setMediaSource(q) : ve(e, n))
                }
                q ? n ? (ve(e, n),
                a || t.trigger(l.default.SOURCE_INITIALIZED)) : (C.detachMediaSource(H),
                q.addEventListener("sourceopen", o, !1),
                q.addEventListener("webkitsourceopen", o, !1),
                i = C.attachMediaSource(q, H),
                u.debug("MediaSource attached to element.  Waiting on open...")) : ((q = C.createMediaSource()).addEventListener("sourceopen", o, !1),
                q.addEventListener("webkitsourceopen", o, !1),
                i = C.attachMediaSource(q, H),
                u.debug("MediaSource attached to element.  Waiting on open..."))
            }
            function ve(e, a) {
                if (Z = F.activate(q, a ? Z : void 0)) {
                    var r = Object.keys(Z);
                    r.length > 0 && Z[r[0]].changeType && (te = !0)
                }
                X || isNaN(e) || (e === W.getTime() ? t.trigger(l.default.SEEK_TARGET, {
                    time: e,
                    streamId: F.getId()
                }) : W.seek(e)),
                !G && X || W.play(),
                V = !1,
                t.trigger(l.default.PERIOD_SWITCH_COMPLETED, {
                    toStreamInfo: Me()
                })
            }
            function be(e) {
                var t = e || Me().manifestInfo.duration;
                if (t && !isNaN(t)) {
                    var a = C.setDuration(q, t);
                    u.debug("Duration successfully set to: " + a)
                }
            }
            function Ee(e) {
                for (var t = 0, a = U.length; t < a; t++)
                    if (U[t].getId() === e.id)
                        return U[t];
                return null
            }
            function ke() {
                try {
                    var a = S.getStreamsInfo();
                    if (0 === a.length)
                        throw new Error("There are no streams");
                    A.updateManifestUpdateInfo({
                        currentTime: W.getTime(),
                        buffered: H.getBufferRange(),
                        presentationStartTime: a[0].start,
                        clientTimeOffset: L.getClientTimeOffset()
                    }),
                    U.length > 0 && (U = U.filter((function(e) {
                        var t = a.filter((function(t) {
                            return t.id === e.getId()
                        }
                        )).length > 0 || e.getId() === F.getId();
                        return t || u.debug("Removing stream " + e.getId()),
                        t
                    }
                    )));
                    for (var n = 0, o = a.length; n < o; n++) {
                        var s = a[n]
                          , d = Ee(s);
                        d ? d.updateData(s) : (d = (0,
                        i.default)(e).create({
                            manifestModel: T,
                            mediaPlayerModel: Y,
                            dashMetrics: A,
                            manifestUpdater: E,
                            adapter: S,
                            timelineConverter: L,
                            capabilities: b,
                            errHandler: N,
                            baseURLController: P,
                            abrController: w,
                            playbackController: W,
                            eventController: R,
                            mediaController: M,
                            textController: x,
                            videoModel: H,
                            settings: ae
                        }),
                        U.push(d),
                        d.initialize(s, B)),
                        A.addManifestUpdateStreamInfo(s)
                    }
                    if (!F) {
                        if (S.getIsDynamic() && U.length) {
                            var c = a[0].manifestInfo
                              , f = function(e, t) {
                                try {
                                    var a = NaN;
                                    if (t && !isNaN(t.maxFragmentDuration) && isFinite(t.maxFragmentDuration))
                                        return t.maxFragmentDuration;
                                    if (e && 1 === e.length) {
                                        var n = e[0]
                                          , i = [r.default.VIDEO, r.default.AUDIO, r.default.FRAGMENTED_TEXT].reduce((function(e, t) {
                                            var a = S.getMediaInfoForType(n, t);
                                            return a && e.push(a),
                                            e
                                        }
                                        ), []).reduce((function(e, t) {
                                            var a = S.getVoRepresentations(t);
                                            return a && a.length > 0 && a.forEach((function(t) {
                                                t && e.push(t)
                                            }
                                            )),
                                            e
                                        }
                                        ), []).reduce((function(e, t) {
                                            var a = S.convertDataToRepresentationInfo(t);
                                            return a && a.fragmentDuration && !isNaN(a.fragmentDuration) && e.push(a.fragmentDuration),
                                            e
                                        }
                                        ), []);
                                        a = Math.max.apply(Math, function(e) {
                                            if (Array.isArray(e)) {
                                                for (var t = 0, a = Array(e.length); t < e.length; t++)
                                                    a[t] = e[t];
                                                return a
                                            }
                                            return Array.from(e)
                                        }(i))
                                    }
                                    return isFinite(a) ? a : NaN
                                } catch (e) {
                                    return NaN
                                }
                            }(a, c);
                            W.computeAndSetLiveDelay(f, c.DVRWindowSize, c.minBufferTime)
                        }
                        var h = null;
                        !(h = he(W.getStartTimeFromUriParameters(a[0].start, S.getIsDynamic()))) && S.getIsDynamic() && U.length && (u.debug("Dynamic stream: Trying to find the correct starting period"),
                        h = function() {
                            try {
                                var e = L.calcPresentationTimeFromWallTime(new Date, S.getRegularPeriods()[0])
                                  , t = W.getLiveDelay();
                                return he(e - t)
                            } catch (e) {
                                return null
                            }
                        }()),
                        ye(null !== h ? h : U[0], null, NaN),
                        Q || (Q = setInterval((function() {
                            !V && W.getTimeToStreamEnd() <= 0 && t.trigger(l.default.PLAYBACK_ENDED, {
                                isLast: Me().isLast
                            })
                        }
                        ), 200)),
                        ue()
                    }
                    t.trigger(l.default.STREAMS_COMPOSED)
                } catch (e) {
                    N.error(new y.default(_.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message + "nostreamscomposed",T.getValue())),
                    $ = !0,
                    Oe()
                }
            }
            function Te() {
                var e = T.getValue();
                B && (t.trigger(l.default.PROTECTION_CREATED, {
                    controller: B,
                    manifest: e
                }),
                B.setMediaElement(H.getElement()),
                j && B.setProtectionData(j)),
                ke()
            }
            function Se(e) {
                if (e.error)
                    $ = !0,
                    Oe();
                else {
                    var t = e.manifest;
                    S.updatePeriods(t);
                    var a = S.getUTCTimingSources()
                      , r = S.getIsDynamic() ? a.concat(Y.getUTCTimingSources()) : a
                      , n = O.isHTTPS(e.manifest.url);
                    r.forEach((function(e) {
                        e.value.replace(/.*?:\/\//g, "") === Y.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g, "") && (e.value = e.value.replace(n ? new RegExp(/^(http:)?\/\//i) : new RegExp(/^(https:)?\/\//i), n ? "https://" : "http://"),
                        u.debug("Matching default timing source protocol to manifest protocol: ", e.value))
                    }
                    )),
                    P.initialize(t),
                    I.setConfig({
                        dashMetrics: A,
                        baseURLController: P
                    }),
                    I.initialize(r, ae.get().streaming.useManifestDateHeaderTimeSource)
                }
            }
            function Ae() {
                return !!F && F.getHasVideoTrack()
            }
            function Ce() {
                return !!F && F.getHasAudioTrack()
            }
            function Ie(e, t) {
                t = t || new Date,
                pe().forEach((function(a) {
                    a.finalisePlayList(t, e)
                }
                )),
                A.addPlayList()
            }
            function Pe(e) {
                A.createPlaylistMetrics(1e3 * W.getTime(), e)
            }
            function we(e) {
                if (e.error) {
                    var t = "";
                    switch (e.error.code) {
                    case 1:
                        t = "MEDIA_ERR_ABORTED";
                        break;
                    case 2:
                        t = "MEDIA_ERR_NETWORK";
                        break;
                    case 3:
                        t = "MEDIA_ERR_DECODE";
                        break;
                    case 4:
                        t = "MEDIA_ERR_SRC_NOT_SUPPORTED";
                        break;
                    case 5:
                        t = "MEDIA_ERR_ENCRYPTED";
                        break;
                    default:
                        t = "UNKNOWN"
                    }
                    K = !0,
                    e.error.message && (t += " (" + e.error.message + ")"),
                    e.error.msExtendedCode && (t += " (0x" + (e.error.msExtendedCode >>> 0).toString(16).toUpperCase() + ")"),
                    u.fatal("Video Element Error: " + t),
                    e.error && u.fatal(e.error),
                    N.error(new y.default(e.error.code,t)),
                    Oe()
                }
            }
            function Me() {
                return F ? F.getStreamInfo() : null
            }
            function Re() {
                if (!(k && k.hasOwnProperty("load") && L && L.hasOwnProperty("initialize") && L.hasOwnProperty("reset") && L.hasOwnProperty("getClientTimeOffset") && T && N && A && W))
                    throw new Error(r.default.MISSING_CONFIG_ERROR)
            }
            function xe(e) {
                isNaN(e.newDuration) || be(e.newDuration)
            }
            function De() {
                U = [],
                B = null,
                V = !1,
                F = null,
                K = !1,
                $ = !1,
                X = !0,
                z = !1,
                G = !0,
                Q = null,
                !1,
                J = null,
                !1,
                ee = []
            }
            function Oe() {
                Re(),
                I.reset(),
                Ie(K || $ ? d.PlayListTrace.FAILURE_STOP_REASON : d.PlayListTrace.USER_REQUEST_STOP_REASON);
                for (var e = 0, a = U ? U.length : 0; e < a; e++) {
                    U[e].reset(K)
                }
                !function() {
                    t.off(l.default.PLAYBACK_TIME_UPDATED, re, this),
                    t.off(l.default.PLAYBACK_SEEKING, ne, this),
                    t.off(l.default.GAP_CAUSED_SEEK_TO_PERIOD_END, ie, this),
                    t.off(l.default.PLAYBACK_ERROR, we, this),
                    t.off(l.default.PLAYBACK_STARTED, oe, this),
                    t.off(l.default.PLAYBACK_PAUSED, se, this),
                    t.off(l.default.PLAYBACK_ENDED, ge, this),
                    t.off(l.default.MANIFEST_UPDATED, Se, this),
                    t.off(l.default.STREAM_BUFFERING_COMPLETED, ce, this),
                    t.off(l.default.MANIFEST_VALIDITY_CHANGED, xe, this),
                    t.off(l.default.TIME_SYNCHRONIZATION_COMPLETED, Te, this),
                    t.off(p.default.METRIC_ADDED, Ne, this)
                }(),
                P.reset(),
                E.reset(),
                R.reset(),
                A.clearAllCurrentMetrics(),
                T.setValue(null),
                k.reset(),
                L.reset(),
                D.reset(),
                q && (C.detachMediaSource(H),
                q = null),
                H = null,
                B && (B.setMediaElement(null),
                B = null,
                j = null,
                T.getValue() && t.trigger(l.default.PROTECTION_DESTROYED, {
                    data: T.getValue().url
                })),
                le(),
                clearInterval(J),
                J = null,
                t.trigger(l.default.STREAM_TEARDOWN_COMPLETE),
                De()
            }
            function Ne(e) {
                if (e.metric === n.default.DVR_INFO) {
                    var t = Ce() ? r.default.AUDIO : r.default.VIDEO;
                    e.mediaType === t && C.setSeekable(q, e.value.range.start, e.value.range.end)
                }
            }
            return a = {
                initialize: function(a, r) {
                    Re(),
                    G = a,
                    j = r,
                    L.initialize(),
                    (E = (0,
                    o.default)(e).create()).setConfig({
                        manifestModel: T,
                        adapter: S,
                        manifestLoader: k,
                        errHandler: N,
                        settings: ae
                    }),
                    E.initialize(),
                    (R = (0,
                    v.default)(e).getInstance()).setConfig({
                        manifestUpdater: E,
                        playbackController: W
                    }),
                    R.start(),
                    function() {
                        t.on(l.default.PLAYBACK_TIME_UPDATED, re, this),
                        t.on(l.default.PLAYBACK_SEEKING, ne, this),
                        t.on(l.default.GAP_CAUSED_SEEK_TO_PERIOD_END, ie, this),
                        t.on(l.default.PLAYBACK_ERROR, we, this),
                        t.on(l.default.PLAYBACK_STARTED, oe, this),
                        t.on(l.default.PLAYBACK_PAUSED, se, this),
                        t.on(l.default.PLAYBACK_ENDED, ge, this),
                        t.on(l.default.MANIFEST_UPDATED, Se, this),
                        t.on(l.default.STREAM_BUFFERING_COMPLETED, ce, this),
                        t.on(l.default.MANIFEST_VALIDITY_CHANGED, xe, this),
                        t.on(l.default.TIME_SYNCHRONIZATION_COMPLETED, Te, this),
                        t.on(p.default.METRIC_ADDED, Ne, this)
                    }()
                },
                getActiveStreamInfo: Me,
                hasVideoTrack: Ae,
                hasAudioTrack: Ce,
                switchToVideoElement: function(e) {
                    F && (W.initialize(Me()),
                    _e(e, !1, !0, !1))
                },
                getStreamById: function(e) {
                    return U.filter((function(t) {
                        return t.getId() === e
                    }
                    ))[0]
                },
                getStreamForTime: he,
                getTimeRelativeToStreamId: function(e, t) {
                    for (var a = null, r = 0, n = 0, i = null, o = 0; o < U.length; o++) {
                        if (n = (a = U[o]).getStartTime(),
                        i = a.getDuration(),
                        Number.isFinite(n) && (r = n),
                        a.getId() === t)
                            return e - r;
                        Number.isFinite(i) && (r += i)
                    }
                    return null
                },
                load: function(e) {
                    Re(),
                    k.load(e)
                },
                loadWithManifest: function(e) {
                    !function() {
                        if (!E || !E.hasOwnProperty("setManifest"))
                            throw new Error("initialize function has to be called previously")
                    }(),
                    E.setManifest(e)
                },
                getActiveStreamProcessors: pe,
                setConfig: function(e) {
                    e && (e.capabilities && (b = e.capabilities),
                    e.manifestLoader && (k = e.manifestLoader),
                    e.manifestModel && (T = e.manifestModel),
                    e.mediaPlayerModel && (Y = e.mediaPlayerModel),
                    e.protectionController && (B = e.protectionController),
                    e.adapter && (S = e.adapter),
                    e.dashMetrics && (A = e.dashMetrics),
                    e.errHandler && (N = e.errHandler),
                    e.timelineConverter && (L = e.timelineConverter),
                    e.videoModel && (H = e.videoModel),
                    e.playbackController && (W = e.playbackController),
                    e.abrController && (w = e.abrController),
                    e.mediaController && (M = e.mediaController),
                    e.textController && (x = e.textController),
                    e.settings && (ae = e.settings),
                    e.baseURLController && (P = e.baseURLController))
                },
                setProtectionData: function(e) {
                    j = e
                },
                getIsStreamSwitchInProgress: function() {
                    return V
                },
                getHasMediaOrIntialisationError: function() {
                    return K || $
                },
                hasStreamFinishedBuffering: de,
                getStreams: function() {
                    return U
                },
                getActiveStream: function() {
                    return F
                },
                reset: Oe
            },
            u = (0,
            c.default)(e).getInstance().getLogger(a),
            I = (0,
            g.default)(e).getInstance(),
            C = (0,
            m.default)(e).getInstance(),
            D = (0,
            f.default)(e).getInstance(),
            O = (0,
            h.default)(e).getInstance(),
            De(),
            a
        }
        E.__dashjs_factory_name = "StreamController",
        t.default = u.default.getSingletonFactory(E)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = m(a(1))
          , n = m(a(19))
          , i = m(a(269))
          , o = m(a(311))
          , s = m(a(323))
          , l = m(a(2))
          , u = m(a(4))
          , d = m(a(3))
          , c = m(a(21))
          , f = m(a(0))
          , h = m(a(12))
          , p = m(a(88))
          , g = m(a(39));
        function m(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function y(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            l.default)(t).getInstance()
              , f = (0,
            g.default)(t).getInstance()
              , m = e.manifestModel
              , y = e.mediaPlayerModel
              , _ = e.manifestUpdater
              , v = e.adapter
              , b = e.capabilities
              , E = e.errHandler
              , k = e.timelineConverter
              , T = e.dashMetrics
              , S = e.abrController
              , A = e.playbackController
              , C = e.eventController
              , I = e.mediaController
              , P = e.textController
              , w = e.videoModel
              , M = e.settings
              , R = void 0
              , x = void 0
              , D = void 0
              , O = void 0
              , N = void 0
              , L = void 0
              , U = void 0
              , F = void 0
              , B = void 0
              , j = void 0
              , G = void 0
              , V = void 0
              , K = void 0
              , $ = void 0
              , q = void 0
              , H = void 0
              , W = void 0
              , Y = void 0
              , z = void 0
              , X = void 0
              , Q = [{
                codec: "avc1",
                compatibleCodecs: ["avc3"]
            }, {
                codec: "avc3",
                compatibleCodecs: ["avc1"]
            }];
            function J(e) {
                for (var t = O ? O.length : 0, r = 0; r < t; r++) {
                    O[r].getFragmentModel().removeExecutedRequestsBeforeTime(ae() + te()),
                    O[r].reset(!1, e)
                }
                O = [],
                L = !1,
                U = !1,
                Se(!1),
                a.off(u.default.CURRENT_TRACK_CHANGED, ue, R)
            }
            function Z() {
                J(),
                D = null,
                N = !1,
                F = !1,
                B = !1,
                j = {},
                G = !1,
                W = !1,
                z = !1
            }
            function ee() {
                A && A.pause(),
                K && (K.reset(),
                K = null),
                Z(),
                a.off(u.default.DATA_UPDATE_COMPLETED, me, R),
                a.off(u.default.BUFFERING_COMPLETED, ge, R),
                a.off(u.default.INBAND_EVENTS, ye, R),
                V && (a.off(u.default.KEY_ERROR, se, R),
                a.off(u.default.SERVER_CERTIFICATE_UPDATED, se, R),
                a.off(u.default.LICENSE_REQUEST_COMPLETE, se, R),
                a.off(u.default.KEY_SYSTEM_SELECTED, se, R),
                a.off(u.default.KEY_SESSION_CREATED, se, R),
                a.off(u.default.KEY_STATUSES_CHANGED, se, R)),
                Se(!1)
            }
            function te() {
                return D ? D.duration : NaN
            }
            function ae() {
                return D ? D.start : NaN
            }
            function re() {
                if (!D.manifestInfo.isDynamic)
                    return NaN;
                for (var e = 0; e < O.length; e++)
                    if (O[e].getType() === r.default.AUDIO || O[e].getType() === r.default.VIDEO)
                        return O[e].getLiveStartTime();
                return NaN
            }
            function ne() {
                return D ? D.id : null
            }
            function ie() {
                return D
            }
            function oe() {
                if (!(w && S && S.hasOwnProperty("getBitrateList") && v && v.hasOwnProperty("getAllMediaInfoForType") && v.hasOwnProperty("getEventsFor")))
                    throw new Error(r.default.MISSING_CONFIG_ERROR)
            }
            function se(e) {
                e.error && (E.error(e.error),
                x.fatal(e.error.message),
                ee())
            }
            function le(e) {
                var t, a = e ? e.type : null, n = void 0;
                if (a === r.default.MUXED)
                    return n = "Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",
                    x.fatal(n),
                    E.error(new h.default(c.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,n,m.getValue())),
                    !1;
                if (a === r.default.TEXT || a === r.default.FRAGMENTED_TEXT || a === r.default.EMBEDDED_TEXT || a === r.default.IMAGE)
                    return !0;
                if (t = e.codec,
                x.debug(a + " codec: " + t),
                e.contentProtection && !b.supportsEncryptedMedia())
                    E.error(new h.default(c.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,c.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));
                else if (!b.supportsCodec(t))
                    return n = a + "Codec (" + t + ") is not supported.",
                    x.error(n),
                    !1;
                return !0
            }
            function ue(e) {
                if (D && e.newMediaInfo.streamInfo.id === D.id) {
                    var t = e.newMediaInfo
                      , a = m.getValue();
                    v.setCurrentMediaInfo(D.id, t.type, t);
                    var n = _e(t);
                    if (n) {
                        var i = A.getTime();
                        x.info("Stream -  Process track changed at current time " + i),
                        x.debug("Stream -  Update stream controller"),
                        a.refreshManifestOnSwitchTrack ? (x.debug("Stream -  Refreshing manifest for switch track"),
                        X = e,
                        _.refreshManifest()) : (n.selectMediaInfo(t),
                        t.type !== r.default.FRAGMENTED_TEXT ? (S.updateTopQualityIndex(t),
                        n.switchTrackAsked(),
                        n.getFragmentModel().abortRequests()) : (n.getScheduleController().setSeekTarget(i),
                        n.setBufferingTime(i),
                        n.resetIndexHandler()))
                    }
                }
            }
            function de(o, l) {
                var d, c = v.getAllMediaInfoForType(D, o), f = null;
                if (c && 0 !== c.length) {
                    o === r.default.VIDEO && (F = !0),
                    o === r.default.AUDIO && (B = !0);
                    for (var h = 0, p = c.length; h < p; h++)
                        if (f = c[h],
                        o === r.default.EMBEDDED_TEXT)
                            P.addEmbeddedTrack(f);
                        else {
                            if (!le(f))
                                continue;
                            I.addTrack(f)
                        }
                    o !== r.default.EMBEDDED_TEXT && 0 !== I.getTracksFor(o, D).length && (o !== r.default.IMAGE ? (I.checkInitialMediaSettingsForType(o, D),
                    d = I.getCurrentTrackFor(o, D),
                    a.trigger(u.default.STREAM_INITIALIZING, {
                        streamInfo: D,
                        mediaInfo: f
                    }),
                    function(a, n, o, s) {
                        var l = K.getModel(ne(), a ? a.type : null)
                          , u = (0,
                        i.default)(t).create({
                            streamInfo: D,
                            type: a ? a.type : null,
                            mimeType: a ? a.mimeType : null,
                            timelineConverter: k,
                            adapter: v,
                            manifestModel: m,
                            mediaPlayerModel: y,
                            fragmentModel: l,
                            dashMetrics: e.dashMetrics,
                            baseURLController: e.baseURLController,
                            abrController: S,
                            playbackController: A,
                            mediaController: I,
                            textController: P,
                            errHandler: E,
                            settings: M,
                            boxParser: H
                        });
                        if (u.initialize(o, F),
                        S.updateTopQualityIndex(a),
                        s ? (u.setBuffer(s.buffer),
                        u.setBufferingTime(s.currentTime),
                        O[s.replaceIdx] = u) : O.push(u),
                        !s || !s.ignoreMediaInfo)
                            if (!a || a.type !== r.default.TEXT && a.type !== r.default.FRAGMENTED_TEXT)
                                u.addMediaInfo(a, !0);
                            else {
                                for (var d = void 0, c = 0; c < n.length; c++)
                                    n[c].index === a.index && (d = c),
                                    u.addMediaInfo(n[c]);
                                u.selectMediaInfo(n[d])
                            }
                    }(d, c, l)) : $ = (0,
                    s.default)(t).create({
                        streamInfo: D,
                        adapter: v,
                        baseURLController: e.baseURLController,
                        timelineConverter: e.timelineConverter,
                        debug: Y,
                        eventBus: a,
                        events: u.default,
                        dashConstants: n.default
                    }))
                } else
                    x.info("No " + o + " data.")
            }
            function ce() {
                if (C) {
                    var e = v.getEventsFor(D);
                    C.addInlineEvents(e)
                }
            }
            function fe(e) {
                var t = v.getAdaptationForType(D ? D.index : null, e, D);
                t && Array.isArray(t.Representation_asArray) && (t.Representation_asArray = t.Representation_asArray.filter((function(e, a) {
                    if (0 === a)
                        return !0;
                    var r = v.getCodec(t, a, !0);
                    return !!b.supportsCodec(r) || (x.error("[Stream] codec not supported: " + r),
                    !1)
                }
                )))
            }
            function he() {
                for (var e = O.length, t = !!j.audio || !!j.video ? new h.default(c.default.DATA_UPDATE_FAILED_ERROR_CODE,c.default.DATA_UPDATE_FAILED_ERROR_MESSAGE) : null, n = 0; n < e; n++)
                    if (O[n].isUpdating() || G)
                        return;
                if (U) {
                    if (V)
                        for (var i = 0; i < e && O[i]; i++)
                            O[i].getType() !== r.default.AUDIO && O[i].getType() !== r.default.VIDEO && O[i].getType() !== r.default.FRAGMENTED_TEXT || V.initializeForMedia(O[i].getMediaInfo());
                    t ? E.error(t) : N || (N = !0,
                    k.setTimeSyncCompleted(!0),
                    a.trigger(u.default.STREAM_INITIALIZED, {
                        streamInfo: D,
                        liveStartTime: q ? NaN : re()
                    }));
                    for (var o = 0; o < e && O[o]; o++)
                        O[o].getScheduleController().start()
                }
            }
            function pe(e) {
                for (var t = {}, a = 0, r = O.length; a < r; a++) {
                    var n = O[a].createBuffer(e);
                    n && (t[O[a].getType()] = n.getBuffer())
                }
                return t
            }
            function ge(e) {
                if (e.streamId === D.id) {
                    var t = ve()
                      , n = t.length;
                    if (0 !== n) {
                        for (var i = 0; i < n; i++)
                            if (!t[i].isBufferingCompleted() && (t[i].getType() === r.default.AUDIO || t[i].getType() === r.default.VIDEO))
                                return void x.warn("onBufferingCompleted - One streamProcessor has finished but", t[i].getType(), "one is not buffering completed");
                        x.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),
                        a.trigger(u.default.STREAM_BUFFERING_COMPLETED, {
                            streamInfo: D
                        })
                    } else
                        x.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")
                }
            }
            function me(e) {
                D && e.sender.getStreamId() === D.id && (j[e.sender.getType()] = e.error,
                he())
            }
            function ye(e) {
                var t;
                D && e.sender.getStreamInfo().id === D.id && (t = e.events,
                C && C.addInbandEvents(t))
            }
            function _e(e) {
                return e ? ve().filter((function(t) {
                    return t.getType() === e.type
                }
                ))[0] : null
            }
            function ve() {
                for (var e = [], t = void 0, a = void 0, n = 0; n < O.length; n++)
                    (t = (a = O[n]).getType()) !== r.default.AUDIO && t !== r.default.VIDEO && t !== r.default.FRAGMENTED_TEXT && t !== r.default.TEXT || e.push(a);
                return e
            }
            function be(e, t) {
                var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                if (!e)
                    return !1;
                var r = e.getStreamInfo()
                  , n = a ? a.getStreamInfo() : ie();
                if (!r || !n)
                    return !1;
                var i = v.getAdaptationForType(r.index, t, r)
                  , o = v.getAdaptationForType(n.index, t, n);
                return i && o ? !(!Ee(o) && Ee(i)) : !i && !o
            }
            function Ee(e) {
                return !!e && !!(e.ContentProtection || e.Representation && e.Representation.length > 0 && e.Representation[0].ContentProtection)
            }
            function ke(e, t) {
                var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                if (!e || !e.hasOwnProperty("getStreamInfo"))
                    return !1;
                var r = e.getStreamInfo()
                  , n = a ? a.getStreamInfo() : ie();
                if (!r || !n)
                    return !1;
                var i = v.getAdaptationForType(r.index, t, r)
                  , o = v.getAdaptationForType(n.index, t, n);
                if (!i || !o)
                    return !i && !o;
                var s = i && o && i.mimeType === o.mimeType
                  , l = o.Representation_asArray.map((function(e) {
                    return e.codecs
                }
                ))
                  , u = i.Representation_asArray.map((function(e) {
                    return e.codecs
                }
                ))
                  , d = u.some((function(e) {
                    return l.indexOf(e) > -1
                }
                ))
                  , c = u.some((function(e) {
                    return l.some((function(t) {
                        return Te(t, e)
                    }
                    ))
                }
                ));
                return d || c && s
            }
            function Te(e, t) {
                for (var a = e.split(".")[0], r = 0 === t.indexOf(a), n = void 0, i = 0; i < Q.length; i++)
                    if (Q[i].codec === a) {
                        n = Q[i];
                        break
                    }
                return n ? r || n.compatibleCodecs.some((function(e) {
                    return 0 === t.indexOf(e)
                }
                )) : r
            }
            function Se(e) {
                q = e
            }
            function Ae() {
                return q
            }
            return R = {
                initialize: function(e, t) {
                    D = e,
                    e && K.setStreamId(e.id),
                    (V = t) && (a.on(u.default.KEY_ERROR, se, R),
                    a.on(u.default.SERVER_CERTIFICATE_UPDATED, se, R),
                    a.on(u.default.LICENSE_REQUEST_COMPLETE, se, R),
                    a.on(u.default.KEY_SYSTEM_SELECTED, se, R),
                    a.on(u.default.KEY_SESSION_CREATED, se, R),
                    a.on(u.default.KEY_STATUSES_CHANGED, se, R)),
                    a.trigger(u.default.STREAM_UPDATED, {
                        streamInfo: D
                    })
                },
                activate: function(e, t) {
                    if (!L) {
                        var n = void 0;
                        return a.on(u.default.CURRENT_TRACK_CHANGED, ue, R),
                        Ae() ? (!function() {
                            if (G = !0,
                            oe(),
                            fe(r.default.VIDEO),
                            fe(r.default.AUDIO),
                            U = !0,
                            G = !1,
                            0 === O.length) {
                                var e = "No streams to play.";
                                E.error(new h.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,m.getValue())),
                                x.debug(e)
                            } else
                                he()
                        }(),
                        n = t) : n = function(e, t) {
                            oe();
                            var a = w.getElement();
                            ce(),
                            G = !0,
                            fe(r.default.VIDEO),
                            fe(r.default.AUDIO),
                            (!a || a && /^VIDEO$/i.test(a.nodeName)) && de(r.default.VIDEO, e);
                            de(r.default.AUDIO, e),
                            de(r.default.TEXT, e),
                            de(r.default.FRAGMENTED_TEXT, e),
                            de(r.default.EMBEDDED_TEXT, e),
                            de(r.default.MUXED, e),
                            de(r.default.IMAGE, e);
                            var n = pe(t);
                            if (U = !0,
                            G = !1,
                            0 === O.length) {
                                var i = "No streams to play.";
                                E.error(new h.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,i,m.getValue())),
                                x.fatal(i)
                            } else
                                he();
                            return n
                        }(e, t),
                        L = !0,
                        n
                    }
                    return t
                },
                deactivate: J,
                isActive: function() {
                    return L
                },
                getDuration: te,
                getStartTime: ae,
                getId: ne,
                getStreamInfo: ie,
                getHasAudioTrack: function() {
                    return B
                },
                getHasVideoTrack: function() {
                    return F
                },
                preload: function(e, t) {
                    if (!Ae()) {
                        ce(),
                        de(r.default.VIDEO, e),
                        de(r.default.AUDIO, e),
                        de(r.default.TEXT, e),
                        de(r.default.FRAGMENTED_TEXT, e),
                        de(r.default.EMBEDDED_TEXT, e),
                        de(r.default.MUXED, e),
                        de(r.default.IMAGE, e),
                        pe(t),
                        a.on(u.default.CURRENT_TRACK_CHANGED, ue, R);
                        for (var n = 0; n < O.length && O[n]; n++)
                            O[n].getScheduleController().start();
                        Se(!0)
                    }
                },
                getThumbnailController: function() {
                    return $
                },
                getBitrateListFor: function(e) {
                    if (oe(),
                    e === r.default.IMAGE)
                        return $ ? $.getBitrateList() : [];
                    var t = function(e) {
                        for (var t = null, a = 0; a < O.length; a++)
                            if ((t = O[a]).getType() === e)
                                return t.getMediaInfo();
                        return null
                    }(e);
                    return S.getBitrateList(t)
                },
                updateData: function(e) {
                    x.info("Manifest updated... updating data system wide."),
                    L = !1,
                    G = !0,
                    D = e,
                    a.trigger(u.default.STREAM_UPDATED, {
                        streamInfo: D
                    }),
                    C && ce(),
                    fe(r.default.VIDEO),
                    fe(r.default.AUDIO);
                    for (var t = 0, n = O.length; t < n; t++) {
                        var i = O[t];
                        i.updateStreamInfo(D);
                        var o = v.getMediaInfoForType(D, i.getType());
                        S.updateTopQualityIndex(o),
                        i.addMediaInfo(o, !0)
                    }
                    if (X && X.newMediaInfo.type !== r.default.FRAGMENTED_TEXT) {
                        var s = _e(X.oldMediaInfo);
                        if (!s)
                            return;
                        s.switchTrackAsked(),
                        X = void 0
                    }
                    G = !1,
                    he()
                },
                reset: ee,
                getProcessors: ve,
                setMediaSource: function(e) {
                    for (var t = 0; t < O.length; )
                        le(O[t].getMediaInfo()) ? (O[t].setMediaSource(e),
                        t++) : (O[t].reset(),
                        O.splice(t, 1));
                    for (var a = 0; a < O.length; a++)
                        O[a].dischargePreBuffer();
                    if (0 === O.length) {
                        var r = "No streams to play.";
                        E.error(new h.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,r + "nostreams",m.getValue())),
                        x.fatal(r)
                    }
                },
                isMediaCodecCompatible: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
                    return ke(e, r.default.VIDEO, t) && ke(e, r.default.AUDIO, t)
                },
                isProtectionCompatible: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
                    return be(e, r.default.VIDEO, t) && be(e, r.default.AUDIO, t)
                },
                getPreloaded: Ae,
                getPreloadingScheduled: function() {
                    return W
                },
                setPreloadingScheduled: function(e) {
                    W = e
                },
                getIsEndedEventSignaled: function() {
                    return z
                },
                setIsEndedEventSignaled: function(e) {
                    z = e
                }
            },
            Y = (0,
            d.default)(t).getInstance(),
            x = Y.getLogger(R),
            Z(),
            H = (0,
            p.default)(t).getInstance(),
            K = (0,
            o.default)(t).create({
                mediaPlayerModel: y,
                dashMetrics: T,
                errHandler: E,
                settings: M,
                boxParser: H,
                dashConstants: n.default,
                urlUtils: f
            }),
            a.on(u.default.BUFFERING_COMPLETED, ge, R),
            a.on(u.default.DATA_UPDATE_COMPLETED, me, R),
            a.on(u.default.INBAND_EVENTS, ye, R),
            R
        }
        y.__dashjs_factory_name = "Stream",
        t.default = f.default.getClassFactory(y)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = A(a(1))
          , n = A(a(19))
          , i = A(a(25))
          , o = A(a(87))
          , s = A(a(209))
          , l = A(a(299))
          , u = A(a(301))
          , d = A(a(303))
          , c = A(a(304))
          , f = A(a(0))
          , h = a(56)
          , p = A(a(2))
          , g = A(a(4))
          , m = A(a(216))
          , y = A(a(21))
          , _ = A(a(12))
          , v = A(a(3))
          , b = A(a(166))
          , E = A(a(39))
          , k = A(a(88))
          , T = A(a(43))
          , S = a(167);
        function A(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function C(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            p.default)(t).getInstance()
              , f = e.streamInfo
              , A = e.type
              , C = e.errHandler
              , I = e.mimeType
              , P = e.timelineConverter
              , w = e.adapter
              , M = e.manifestModel
              , R = e.mediaPlayerModel
              , x = e.fragmentModel
              , D = e.abrController
              , O = e.playbackController
              , N = e.mediaController
              , L = e.textController
              , U = e.dashMetrics
              , F = e.settings
              , B = e.boxParser
              , j = void 0
              , G = void 0
              , V = void 0
              , K = void 0
              , $ = void 0
              , q = void 0
              , H = void 0
              , W = void 0
              , Y = void 0
              , z = void 0
              , X = void 0
              , Q = void 0;
            function J() {
                $ = [],
                K = null,
                X = 0
            }
            function Z(e) {
                e.sender.getType() === ie() && e.sender.getStreamId() === f.id && (e.error || H.setCurrentRepresentation(w.convertDataToRepresentationInfo(e.currentRepresentation)),
                e.error && e.error.code !== y.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE || O.getStreamController().getActiveStreamInfo().id === f.id && ne())
            }
            function ee(e) {
                if (A === e.mediaType && f.id === e.streamInfo.id) {
                    var t = ue(e.newQuality);
                    H.setCurrentRepresentation(t),
                    U.pushPlayListTraceMetrics(new Date, S.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),
                    U.createPlaylistTraceMetrics(t.id, 1e3 * O.getTime(), O.getPlaybackRate())
                }
            }
            function te(e) {
                if (e.streamId === f.id && e.mediaType === A) {
                    U.addBufferLevel(A, new Date, 1e3 * e.bufferLevel);
                    var t = O.getStreamController().getActiveStreamInfo().id;
                    M.getValue().doNotUpdateDVRWindowOnBufferUpdated || f.id !== t || ne()
                }
            }
            function ae(e) {
                e.streamId === f.id && e.mediaType === A && (U.addBufferState(A, e.state, H.getBufferTarget()),
                e.state !== i.default.BUFFER_EMPTY || O.isSeeking() || U.pushPlayListTraceMetrics(new Date, S.PlayListTrace.REBUFFERING_REASON))
            }
            function re(e) {
                e.streamId === f.id && e.mediaType === A && (x.syncExecutedRequestsWithBufferedRange(q.getBuffer().getAllBufferRanges(), f.duration),
                e.from > O.getTime() && (X = e.from,
                Q = !0))
            }
            function ne() {
                var e = f.manifestInfo
                  , t = e.isDynamic
                  , a = P.calcSegmentAvailabilityRange(W.getCurrentRepresentation(), t);
                U.addDVRInfo(ie(), O.getTime(), e, a)
            }
            function ie() {
                return A
            }
            function oe() {
                return q ? q.getBuffer() : null
            }
            function se() {
                return $
            }
            function le() {
                return K
            }
            function ue(e) {
                var t = void 0;
                return void 0 !== e ? ((0,
                h.checkInteger)(e),
                t = W ? W.getRepresentationForQuality(e) : null) : t = W ? W.getCurrentRepresentation() : null,
                w.convertDataToRepresentationInfo(t)
            }
            function de(e) {
                if (e.sender && e.mediaType === A && e.streamId === f.id && (!w.getIsTextTrack(I) || L.isTextEnabled()) && q && e.representationId && !q.appendInitSegment(e.representationId)) {
                    var t = z ? z.getInitRequest(le(), W.getCurrentRepresentation()) : null;
                    H.processInitRequest(t)
                }
            }
            function ce(e) {
                if (e.sender && e.mediaType === A && e.streamId === f.id) {
                    var t = void 0;
                    q.getIsPruningInProgress() || (t = function(e, t) {
                        var a = ue()
                          , n = !isNaN(e)
                          , i = O.getNormalizedTime()
                          , o = n ? e : X
                          , s = !1
                          , l = void 0;
                        if (isNaN(o) || ie() === r.default.FRAGMENTED_TEXT && !L.isTextEnabled())
                            return null;
                        if (q) {
                            var u = q.getRangeAt(o)
                              , d = q.getRangeAt(i);
                            if ((null !== u || null !== d) && !n)
                                if (!u || d && d.start != u.start && d.end != u.end)
                                    q.getBuffer().hasDiscontinuitiesAfter(i) && ie() !== r.default.FRAGMENTED_TEXT && (x.removeExecutedRequestsAfterTime(d.end),
                                    s = !0)
                        }
                        if (t)
                            o = t.startTime + t.duration / 2,
                            l = pe(a, o, {
                                timeThreshold: 0,
                                ignoreIsFinished: !0
                            });
                        else {
                            var c = n || Q || s;
                            for (l = pe(a, c ? o : void 0, {
                                keepIdx: !c
                            }),
                            Q = !1; l && l.action !== T.default.ACTION_COMPLETE && x.isFragmentLoaded(l); )
                                l = pe(a)
                        }
                        return l
                    }(e.seekTarget, e.replacement)) && (H.setSeekTarget(NaN),
                    e.replacement || (isNaN(t.startTime + t.duration) || (X = t.startTime + t.duration),
                    t.delayLoadingTime = (new Date).getTime() + H.getTimeToLoadDelay(),
                    H.setTimeToLoadDelay(0))),
                    H.processMediaRequest(t)
                }
            }
            function fe(e) {
                var r = e.chunk;
                if (r.streamId === f.id && r.mediaInfo.type == A) {
                    var n = r.bytes
                      , i = r.quality
                      , s = ue(i)
                      , l = W && s ? W.getRepresentationForQuality(s.quality) : null
                      , u = w.getEventsFor(s.mediaInfo)
                      , d = w.getEventsFor(s, l);
                    if (u && u.length > 0 || d && d.length > 0) {
                        var c = function(e, a, r, n) {
                            for (var i = Math.max(!a || isNaN(a.startTime) ? 0 : a.startTime, 0), o = [], s = [], l = r.concat(n), u = 0, d = l.length; u < d; u++)
                                o[l[u].schemeIdUri + "/" + l[u].value] = l[u];
                            for (var c = (0,
                            k.default)(t).getInstance().parse(e).getBoxes("emsg"), f = 0, h = c.length; f < h; f++) {
                                var p = w.getEvent(c[f], o, i);
                                p && s.push(p)
                            }
                            return s
                        }(n, x.getRequests({
                            state: o.default.FRAGMENT_MODEL_EXECUTED,
                            quality: i,
                            index: r.index
                        })[0], u, d);
                        a.trigger(g.default.INBAND_EVENTS, {
                            sender: j,
                            events: c
                        })
                    }
                }
            }
            function he(e) {
                e.mediaType && e.mediaType !== A || e.streamId !== f.id || (X = e.time,
                H.setSeekTarget(e.time))
            }
            function pe(e, t, a) {
                var r = null;
                if (z) {
                    var n = W && e ? W.getRepresentationForQuality(e.quality) : null;
                    r = void 0 !== t && void 0 !== a ? z.getSegmentRequestForTime(le(), n, t, a) : z.getNextSegmentRequest(le(), n)
                }
                return r
            }
            return j = {
                initialize: function(i, o) {
                    z = (0,
                    m.default)(t).create({
                        streamInfo: f,
                        type: A,
                        timelineConverter: P,
                        dashMetrics: U,
                        mediaPlayerModel: R,
                        baseURLController: e.baseURLController,
                        errHandler: C,
                        settings: F,
                        boxParser: B,
                        events: g.default,
                        eventBus: a,
                        errors: y.default,
                        debug: (0,
                        v.default)(t).getInstance(),
                        requestModifier: (0,
                        b.default)(t).getInstance(),
                        dashConstants: n.default,
                        constants: r.default,
                        urlUtils: (0,
                        E.default)(t).getInstance()
                    }),
                    (V = f.manifestInfo.isDynamic) && (Y = (0,
                    c.default)(t).create({
                        timelineConverter: P
                    })),
                    z.initialize(V),
                    D.registerStreamType(A, j),
                    W = (0,
                    d.default)(t).create({
                        streamId: f.id,
                        type: A,
                        abrController: D,
                        dashMetrics: U,
                        playbackController: O,
                        timelineConverter: P,
                        dashConstants: n.default,
                        events: g.default,
                        eventBus: a,
                        errors: y.default
                    }),
                    (q = function(e) {
                        var a = null;
                        if (!e)
                            return C.error(new _.default(y.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,y.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE + "not properly defined")),
                            null;
                        a = e === r.default.VIDEO || e === r.default.AUDIO ? (0,
                        s.default)(t).create({
                            streamInfo: f,
                            type: e,
                            mediaPlayerModel: R,
                            manifestModel: M,
                            fragmentModel: x,
                            errHandler: C,
                            mediaController: N,
                            representationController: W,
                            adapter: w,
                            textController: L,
                            abrController: D,
                            playbackController: O,
                            settings: F
                        }) : (0,
                        l.default)(t).create({
                            streamInfo: f,
                            type: e,
                            mimeType: I,
                            mediaPlayerModel: R,
                            manifestModel: M,
                            fragmentModel: x,
                            errHandler: C,
                            mediaController: N,
                            representationController: W,
                            adapter: w,
                            textController: L,
                            abrController: D,
                            playbackController: O,
                            settings: F
                        });
                        return a
                    }(A)) && q.initialize(i),
                    (H = (0,
                    u.default)(t).create({
                        streamId: f.id,
                        type: A,
                        mimeType: I,
                        adapter: w,
                        dashMetrics: U,
                        mediaPlayerModel: R,
                        fragmentModel: x,
                        abrController: D,
                        playbackController: O,
                        textController: L,
                        mediaController: N,
                        bufferController: q,
                        settings: F
                    })).initialize(o),
                    X = 0,
                    Q = !1
                },
                isUpdating: function() {
                    return !!W && W.isUpdating()
                },
                getType: ie,
                getBufferController: function() {
                    return q
                },
                getFragmentModel: function() {
                    return x
                },
                getScheduleController: function() {
                    return H
                },
                getRepresentationController: function() {
                    return W
                },
                getRepresentationInfo: ue,
                getBufferLevel: function() {
                    return q ? q.getBufferLevel() : 0
                },
                isBufferingCompleted: function() {
                    return !!q && q.getIsBufferingCompleted()
                },
                createBuffer: function(e) {
                    return oe() || q ? q.createBuffer($, e) : null
                },
                updateStreamInfo: function(e) {
                    f = e,
                    F.get().streaming.useAppendWindow && q.updateAppendWindow()
                },
                getStreamInfo: function() {
                    return f
                },
                selectMediaInfo: function(e) {
                    e === K || e && K && e.type !== K.type || (K = e);
                    var t = w.getRealAdaptation(f, K)
                      , a = w.getVoRepresentations(K);
                    if (W) {
                        var n = W.getData()
                          , i = D.getTopQualityIndexFor(A, f.id)
                          , o = D.getMinAllowedIndexFor(A)
                          , s = void 0
                          , l = null;
                        null !== n && n.id == t.id || A === r.default.FRAGMENTED_TEXT ? s = D.getQualityFor(A) : (l = D.getThroughputHistory().getAverageThroughput(A) || D.getInitialBitrateFor(A),
                        s = D.getQualityForBitrate(K, l)),
                        void 0 !== o && s < o && (s = o),
                        s > i && (s = i),
                        z.setMimeType(K ? K.mimeType : null),
                        W.updateData(t, a, A, s)
                    }
                },
                addMediaInfo: function(e, t) {
                    -1 === $.indexOf(e) && $.push(e),
                    t && this.selectMediaInfo(e)
                },
                getLiveStartTime: function() {
                    if (!V)
                        return NaN;
                    if (!Y)
                        return NaN;
                    var e = NaN
                      , t = ue()
                      , a = Y.getLiveEdge(t);
                    if (isNaN(a))
                        return NaN;
                    var r = function(e, t) {
                        try {
                            var a = null
                              , r = O.getLiveDelay()
                              , n = isNaN(f.manifestInfo.DVRWindowSize) ? r : f.manifestInfo.DVRWindowSize
                              , i = .1 * n
                              , o = void 0;
                            if (!isFinite(n) || pe(t, e - n + i, {
                                ignoreIsFinished: !0
                            }))
                                for (; !a && r <= n; )
                                    (a = pe(t, o = e - r, {
                                        ignoreIsFinished: !0
                                    })) || (r += 1);
                            return a && O.setLiveDelay(r, !0),
                            G.debug("live edge: " + e + ", live delay: " + r + ", live target: " + o),
                            a
                        } catch (e) {
                            return null
                        }
                    }(a, t);
                    return r && (e = F.get().streaming.lowLatencyEnabled ? r.duration < R.getLiveDelay() ? r.startTime : r.startTime + r.duration - R.getLiveDelay() : r.startTime),
                    e
                },
                switchTrackAsked: function() {
                    H.switchTrackAsked()
                },
                getMediaInfoArr: se,
                getMediaInfo: le,
                getMediaSource: function() {
                    return q.getMediaSource()
                },
                setMediaSource: function(e) {
                    q.setMediaSource(e, se())
                },
                dischargePreBuffer: function() {
                    q.dischargePreBuffer()
                },
                getBuffer: oe,
                setBuffer: function(e) {
                    q.setBuffer(e)
                },
                setBufferingTime: function(e) {
                    X = e
                },
                resetIndexHandler: function() {
                    z && z.resetIndex()
                },
                getInitRequest: function(e) {
                    (0,
                    h.checkInteger)(e);
                    var t = W ? W.getRepresentationForQuality(e) : null;
                    return z ? z.getInitRequest(le(), t) : null
                },
                getFragmentRequest: pe,
                finalisePlayList: function(e, t) {
                    U.pushPlayListTraceMetrics(e, t)
                },
                reset: function(e, t) {
                    z && z.reset(),
                    q && (q.reset(e, t),
                    q = null),
                    H && (H.reset(),
                    H = null),
                    W && (W.reset(),
                    W = null),
                    Y && (Y.reset(),
                    Y = null),
                    D && D.unRegisterStreamType(A),
                    a.off(g.default.DATA_UPDATE_COMPLETED, Z, j),
                    a.off(g.default.QUALITY_CHANGE_REQUESTED, ee, j),
                    a.off(g.default.INIT_FRAGMENT_NEEDED, de, j),
                    a.off(g.default.MEDIA_FRAGMENT_NEEDED, ce, j),
                    a.off(g.default.MEDIA_FRAGMENT_LOADED, fe, j),
                    a.off(g.default.BUFFER_LEVEL_UPDATED, te, j),
                    a.off(g.default.BUFFER_LEVEL_STATE_CHANGED, ae, j),
                    a.off(g.default.BUFFER_CLEARED, re, j),
                    a.off(g.default.SEEK_TARGET, he, j),
                    J(),
                    A = null,
                    f = null
                }
            },
            G = (0,
            v.default)(t).getInstance().getLogger(j),
            J(),
            a.on(g.default.DATA_UPDATE_COMPLETED, Z, j, p.default.EVENT_PRIORITY_HIGH),
            a.on(g.default.QUALITY_CHANGE_REQUESTED, ee, j),
            a.on(g.default.INIT_FRAGMENT_NEEDED, de, j),
            a.on(g.default.MEDIA_FRAGMENT_NEEDED, ce, j),
            a.on(g.default.MEDIA_FRAGMENT_LOADED, fe, j),
            a.on(g.default.BUFFER_LEVEL_UPDATED, te, j),
            a.on(g.default.BUFFER_LEVEL_STATE_CHANGED, ae, j),
            a.on(g.default.BUFFER_CLEARED, re, j),
            a.on(g.default.SEEK_TARGET, he, j),
            j
        }
        C.__dashjs_factory_name = "StreamProcessor",
        t.default = f.default.getClassFactory(C)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = _(a(1))
          , n = a(20)
          , i = _(a(271))
          , o = _(a(88))
          , s = _(a(211))
          , l = _(a(0))
          , u = _(a(3))
          , d = _(a(161))
          , c = _(a(285))
          , f = _(a(160))
          , h = _(a(208))
          , p = _(a(2))
          , g = _(a(4))
          , m = _(a(12))
          , y = _(a(21));
        function _(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function v() {
            var e = this.context
              , t = (0,
            p.default)(e).getInstance()
              , a = !1
              , l = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0
              , T = void 0
              , S = void 0
              , A = void 0
              , C = void 0
              , I = void 0
              , P = void 0
              , w = void 0
              , M = void 0
              , R = void 0
              , x = void 0
              , D = void 0
              , O = void 0
              , N = void 0
              , L = void 0
              , U = void 0
              , F = void 0
              , B = void 0
              , j = void 0
              , G = void 0
              , V = void 0;
            function K() {
                w = null,
                R = NaN,
                x = [],
                N = null,
                M = !1
            }
            function $() {
                K(),
                I = [],
                S = null
            }
            function q(e) {
                var t = e.chunk;
                t.mediaInfo.embeddedCaptions && z(t.bytes, t)
            }
            function H() {
                U = [],
                (P = (0,
                d.default)(e).getInstance()).setConfig({
                    videoModel: D
                }),
                P.initialize(),
                v = (0,
                o.default)(e).getInstance(),
                L = null,
                F = 0,
                j = [],
                B = null,
                a = !0,
                G = (0,
                c.default)(e).getInstance();
                var r = O.getActiveStreamProcessors();
                for (var n in r)
                    if ("video" === r[n].getType()) {
                        V = r[n].getRepresentationInfo().MSETimeOffset;
                        break
                    }
                t.on(g.default.VIDEO_CHUNK_RECEIVED, q, this),
                t.on(g.default.BUFFER_CLEARED, Q, this)
            }
            function W(e) {
                L = e
            }
            function Y(e, t) {
                var a, n, o = new i.default, s = {
                    subtitle: "subtitles",
                    caption: "captions"
                };
                o.captionData = e,
                o.lang = t.lang,
                o.labels = t.labels,
                o.id = t.id ? t.id : t.index,
                o.index = t.index,
                o.isTTML = (a = !1,
                t.codec && t.codec.search(r.default.STPP) >= 0 && (a = !0),
                t.mimeType && t.mimeType.search(r.default.TTML) >= 0 && (a = !0),
                a),
                o.defaultTrack = function(e) {
                    var t = !1;
                    U.length > 1 && e.isEmbedded ? t = e.id && e.id === r.default.CC1 : 1 === U.length ? e.id && "string" == typeof e.id && "CC" === e.id.substring(0, 2) && (t = !0) : 0 === U.length && (t = e.index === I[0].index);
                    return t
                }(t),
                o.isFragmented = !E.getIsTextTrack(t.mimeType),
                o.isEmbedded = !!t.isEmbedded,
                o.kind = n = (n = t.roles.length > 0 ? s[t.roles[0]] : s.caption) === s.caption || n === s.subtitle ? n : s.caption,
                o.roles = t.roles,
                o.accessibility = t.accessibility;
                var l = (I ? I.length : 0) + U.length;
                P.addTextTrack(o, l)
            }
            function z(e, t) {
                var a = void 0
                  , i = void 0
                  , o = void 0
                  , s = void 0
                  , l = void 0
                  , u = void 0
                  , d = void 0
                  , c = t.mediaInfo
                  , p = c.type
                  , g = c.mimeType
                  , E = c.codec || g;
                if (E) {
                    if (p === r.default.FRAGMENTED_TEXT)
                        if (M || "InitializationSegment" !== t.segmentType) {
                            if (!M)
                                return;
                            if (i = (u = v.getSamplesInfo(e)).sampleList,
                            null === N && i.length > 0 && (N = i[0].cts - t.start * R),
                            E.search(r.default.STPP) >= 0)
                                for (S = null !== S ? S : X(E),
                                o = 0; o < i.length; o++) {
                                    var T = i[o]
                                      , A = T.cts
                                      , C = A - N;
                                    this.buffered.add(C / R, (C + T.duration) / R);
                                    var I = new DataView(e,T.offset,T.subSizes[0]);
                                    d = f.default.Utils.dataViewToString(I, r.default.UTF8);
                                    var x = []
                                      , O = T.offset + T.subSizes[0];
                                    for (s = 1; s < T.subSizes.length; s++) {
                                        var K = new Uint8Array(e,O,T.subSizes[s])
                                          , $ = String.fromCharCode.apply(null, K);
                                        x.push($),
                                        O += T.subSizes[s]
                                    }
                                    try {
                                        var q = k.getValue().ttmlTimeIsRelative ? A / R : 0;
                                        a = S.parse(d, q, A / R, (A + T.duration) / R, x),
                                        P.addCaptions(L, N / R, a)
                                    } catch (e) {
                                        w.removeExecutedRequestsBeforeTime(),
                                        this.remove(),
                                        _.error("TTML parser error: " + e.message)
                                    }
                                }
                            else {
                                var H = [];
                                for (o = 0; o < i.length; o++) {
                                    var W = i[o];
                                    W.cts -= N,
                                    this.buffered.add(W.cts / R, (W.cts + W.duration) / R);
                                    var z = e.slice(W.offset, W.offset + W.size)
                                      , Q = f.default.parseBuffer(z);
                                    for (s = 0; s < Q.boxes.length; s++) {
                                        var J = Q.boxes[s];
                                        if (_.debug("VTT box1: " + J.type),
                                        "vtte" !== J.type && "vttc" === J.type)
                                            for (_.debug("VTT vttc boxes.length = " + J.boxes.length),
                                            l = 0; l < J.boxes.length; l++) {
                                                var Z = J.boxes[l];
                                                if (_.debug("VTT box2: " + Z.type),
                                                "payl" === Z.type) {
                                                    var ee = Z.cue_text;
                                                    _.debug("VTT cue_text = " + ee);
                                                    var te = W.cts / R
                                                      , ae = (W.cts + W.duration) / R;
                                                    H.push({
                                                        start: te,
                                                        end: ae,
                                                        data: ee,
                                                        styles: {}
                                                    }),
                                                    _.debug("VTT " + te + "-" + ae + " : " + ee)
                                                }
                                            }
                                    }
                                }
                                H.length > 0 && P.addCaptions(L, 0, H)
                            }
                        } else
                            M = !0,
                            R = v.getMediaTimescaleFromMoov(e);
                    else if (p === r.default.TEXT) {
                        var re = new DataView(e,0,e.byteLength);
                        d = f.default.Utils.dataViewToString(re, r.default.UTF8);
                        try {
                            a = X(E).parse(d, 0),
                            P.addCaptions(P.getCurrentTrackIdx(), 0, a)
                        } catch (e) {
                            b.error(new m.default(y.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,y.default.TIMED_TEXT_ERROR_MESSAGE_PARSE + e.message,d))
                        }
                    } else if (p === r.default.VIDEO)
                        if (t.segmentType === n.HTTPRequest.INIT_SEGMENT_TYPE) {
                            if (0 === F)
                                for (F = v.getMediaTimescaleFromMoov(e),
                                o = 0; o < U.length; o++)
                                    Y(null, U[o])
                        } else {
                            if (0 === F)
                                return void _.warn("CEA-608: No timescale for embeddedTextTrack yet");
                            var ne = function(e, t) {
                                return function(e, a, r) {
                                    var n = null;
                                    n = D.getTTMLRenderingDiv() ? G.createHTMLCaptionsFromScreen(D.getElement(), e, a, r) : [{
                                        start: e,
                                        end: a,
                                        data: r.getDisplayText(),
                                        styles: {}
                                    }],
                                    n && P.addCaptions(t, 0, n)
                                }
                            }
                              , ie = (u = v.getSamplesInfo(e)).lastSequenceNumber;
                            if (!j[0] && !j[1]) {
                                var oe = void 0
                                  , se = void 0;
                                for (o = 0; o < U.length; o++) {
                                    if (U[o].id === r.default.CC1 ? (0,
                                    se = P.getTrackIdxForId(r.default.CC1)) : U[o].id === r.default.CC3 && (1,
                                    se = P.getTrackIdxForId(r.default.CC3)),
                                    -1 === se)
                                        return void _.warn("CEA-608: data before track is ready.");
                                    oe = ne(0, se),
                                    j[o] = new h.default.Cea608Parser(o + 1,{
                                        newCue: oe
                                    },null)
                                }
                            }
                            if (F) {
                                if (null !== B && ie !== B + u.numSequences)
                                    for (o = 0; o < j.length; o++)
                                        j[o] && j[o].reset();
                                for (var le = function(e, t) {
                                    if (0 === t.length)
                                        return null;
                                    for (var a = {
                                        splits: [],
                                        fields: [[], []]
                                    }, r = new DataView(e), n = 0; n < t.length; n++)
                                        for (var i = t[n], o = h.default.findCea608Nalus(r, i.offset, i.size), s = null, l = 0, u = 0; u < o.length; u++)
                                            for (var d = h.default.extractCea608DataFromRange(r, o[u]), c = 0; c < 2; c++)
                                                d[c].length > 0 && (i.cts !== s ? l = 0 : l += 1,
                                                a.fields[c].push([i.cts + V * F, d[c], l]),
                                                s = i.cts);
                                    return a.fields.forEach((function(e) {
                                        e.sort((function(e, t) {
                                            return e[0] === t[0] ? e[2] - t[2] : e[0] - t[0]
                                        }
                                        ))
                                    }
                                    )),
                                    a
                                }(e, u.sampleList), ue = 0; ue < j.length; ue++) {
                                    var de = le.fields[ue]
                                      , ce = j[ue];
                                    if (ce)
                                        for (o = 0; o < de.length; o++)
                                            ce.addData(de[o][0] / F, de[o][1])
                                }
                                B = ie
                            }
                        }
                } else
                    _.error("No text type defined")
            }
            function X(e) {
                var t = void 0;
                return e.search(r.default.VTT) >= 0 ? t = A : (e.search(r.default.TTML) >= 0 || e.search(r.default.STPP) >= 0) && (t = C),
                t
            }
            function Q(e) {
                U.forEach((function(t) {
                    var a = P.getTrackIdxForId(t.id);
                    a >= 0 && P.deleteCuesFromTrackIdx(a, e.from, e.to)
                }
                ))
            }
            return l = {
                initialize: function(t, n, i, u) {
                    a || H(),
                    P.setConfig({
                        videoModel: D
                    }),
                    P.initialize(),
                    v || (v = (0,
                    o.default)(e).getInstance()),
                    function(t, a, n, i) {
                        var o = !E.getIsTextTrack(t);
                        if (I = I.concat(n),
                        o) {
                            w = i,
                            l.buffered = (0,
                            s.default)(e).create(),
                            x = T.getTracksFor(r.default.FRAGMENTED_TEXT, a);
                            for (var u = T.getCurrentTrackFor(r.default.FRAGMENTED_TEXT, a), d = 0; d < x.length; d++)
                                if (x[d] === u) {
                                    W(d);
                                    break
                                }
                        }
                        for (var c = 0; c < I.length; c++)
                            Y(null, I[c])
                    }(t, n, i, u)
                },
                append: z,
                abort: function() {
                    P.deleteAllTextTracks(),
                    K(),
                    v = null,
                    I = []
                },
                addEmbeddedTrack: function(e) {
                    if (a || H(),
                    e)
                        if (e.id === r.default.CC1 || e.id === r.default.CC3) {
                            for (var t = 0; t < U.length; t++)
                                if (U[t].id === e.id)
                                    return;
                            U.push(e)
                        } else
                            _.warn("Embedded track " + e.id + " not supported!")
                },
                resetEmbedded: function() {
                    t.off(g.default.VIDEO_CHUNK_RECEIVED, q, this),
                    t.off(g.default.BUFFER_CLEARED, Q, this),
                    P && P.deleteAllTextTracks(),
                    a = !1,
                    U = [],
                    j = [null, null],
                    B = null
                },
                setConfig: function(e) {
                    e && (e.errHandler && (b = e.errHandler),
                    e.adapter && (E = e.adapter),
                    e.manifestModel && (k = e.manifestModel),
                    e.mediaController && (T = e.mediaController),
                    e.videoModel && (D = e.videoModel),
                    e.streamController && (O = e.streamController),
                    e.textTracks && (P = e.textTracks),
                    e.vttParser && (A = e.vttParser),
                    e.ttmlParser && (C = e.ttmlParser))
                },
                getConfig: function() {
                    return {
                        fragmentModel: w,
                        fragmentedTracks: x,
                        videoModel: D
                    }
                },
                setCurrentFragmentedTrackIdx: W,
                remove: function(e, t) {
                    void 0 === e && e === t && (e = this.buffered.start(0),
                    t = this.buffered.end(this.buffered.length - 1)),
                    this.buffered.remove(e, t)
                },
                reset: function() {
                    $(),
                    O = null,
                    D = null,
                    P = null
                }
            },
            _ = (0,
            u.default)(e).getInstance().getLogger(l),
            $(),
            l
        }
        v.__dashjs_factory_name = "TextSourceBuffer",
        t.default = l.default.getSingletonFactory(v)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.captionData = null,
            this.label = null,
            this.lang = null,
            this.defaultTrack = !1,
            this.kind = null,
            this.isFragmented = !1,
            this.isEmbedded = !1
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(273))
          , n = i(a(0));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            var e = void 0;
            function t(t) {
                var r = [];
                if (!t || !e || "function" != typeof e.fetchAll)
                    return r;
                for (var n = e.fetchAll(t), i = void 0, o = 0, s = n.length; o < s; o++)
                    (i = a(n[o])) && r.push(i);
                return r
            }
            function a(e) {
                if (!e)
                    return null;
                var t = new r.default(e);
                return e.hasOwnProperty("_incomplete") && (t.isComplete = !e._incomplete),
                t
            }
            return {
                getBox: function(t) {
                    return t && e && e.boxes && 0 !== e.boxes.length && "function" == typeof e.fetch ? a(e.fetch(t)) : null
                },
                getBoxes: t,
                setData: function(t) {
                    e = t
                },
                getLastBox: function() {
                    if (!e || !e.boxes || !e.boxes.length)
                        return null;
                    var a = t(e.boxes[e.boxes.length - 1].type);
                    return a.length > 0 ? a[a.length - 1] : null
                }
            }
        }
        o.__dashjs_factory_name = "IsoFile",
        t.default = n.default.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e(t) {
                if (function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.offset = t._offset,
                this.type = t.type,
                this.size = t.size,
                this.boxes = [],
                t.boxes)
                    for (var a = 0; a < t.boxes.length; a++)
                        this.boxes.push(new e(t.boxes[a]));
                switch (this.isComplete = !0,
                t.type) {
                case "sidx":
                    if (this.timescale = t.timescale,
                    this.earliest_presentation_time = t.earliest_presentation_time,
                    this.first_offset = t.first_offset,
                    this.references = t.references,
                    t.references) {
                        this.references = [];
                        for (var r = 0; r < t.references.length; r++) {
                            var n = {
                                reference_type: t.references[r].reference_type,
                                referenced_size: t.references[r].referenced_size,
                                subsegment_duration: t.references[r].subsegment_duration
                            };
                            this.references.push(n)
                        }
                    }
                    break;
                case "emsg":
                    this.id = t.id,
                    this.version = 1 === t.version ? 1 : 0,
                    this.value = t.value,
                    this.timescale = t.timescale,
                    this.scheme_id_uri = t.scheme_id_uri,
                    this.presentation_time_delta = 1 === t.version ? t.presentation_time : t.presentation_time_delta,
                    this.event_duration = t.event_duration,
                    this.message_data = t.message_data;
                    break;
                case "mdhd":
                    this.timescale = t.timescale;
                    break;
                case "mfhd":
                    this.sequence_number = t.sequence_number;
                    break;
                case "subs":
                    this.entry_count = t.entry_count,
                    this.entries = t.entries;
                    break;
                case "tfhd":
                    this.base_data_offset = t.base_data_offset,
                    this.sample_description_index = t.sample_description_index,
                    this.default_sample_duration = t.default_sample_duration,
                    this.default_sample_size = t.default_sample_size,
                    this.default_sample_flags = t.default_sample_flags,
                    this.flags = t.flags;
                    break;
                case "tfdt":
                    this.version = t.version,
                    this.baseMediaDecodeTime = t.baseMediaDecodeTime,
                    this.flags = t.flags;
                    break;
                case "trun":
                    if (this.sample_count = t.sample_count,
                    this.first_sample_flags = t.first_sample_flags,
                    this.data_offset = t.data_offset,
                    this.flags = t.flags,
                    this.samples = t.samples,
                    t.samples) {
                        this.samples = [];
                        for (var i = 0, o = t.samples.length; i < o; i++) {
                            var s = {
                                sample_size: t.samples[i].sample_size,
                                sample_duration: t.samples[i].sample_duration,
                                sample_composition_time_offset: t.samples[i].sample_composition_time_offset
                            };
                            this.samples.push(s)
                        }
                    }
                }
            }
            return r(e, [{
                key: "getChildBox",
                value: function(e) {
                    for (var t = 0; t < this.boxes.length; t++)
                        if (this.boxes[t].type === e)
                            return this.boxes[t]
                }
            }, {
                key: "getChildBoxes",
                value: function(e) {
                    for (var t = [], a = 0; a < this.boxes.length; a++)
                        this.boxes[a].type === e && t.push(this.boxes[a]);
                    return t
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e(t, a, r) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.lastCompletedOffset = t,
            this.found = a,
            this.size = r
        }
    }
    , function(e, t, a) {
        !function(e, t, a, r) {
            e.generateISD = function(e, t, a) {
                var r = new o(e)
                  , n = {};
                for (var s in e.head.layout.regions) {
                    var l = i(e, t, e.head.layout.regions[s], e.body, null, "", e.head.layout.regions[s], a, n);
                    null !== l && r.contents.push(l.element)
                }
                return r
            }
            ;
            var n = [a.byName.color.qname, a.byName.textCombine.qname, a.byName.textDecoration.qname, a.byName.textEmphasis.qname, a.byName.textOutline.qname, a.byName.textShadow.qname];
            function i(e, t, o, u, d, c, f, h, p) {
                if (t < f.begin || t >= f.end)
                    return null;
                var g = "regionID"in f && "" !== f.regionID ? f.regionID : c;
                if (null !== d && g !== o.id && (!("contents"in f) || "contents"in f && 0 === f.contents.length || "" !== g))
                    return null;
                var m = new s(f);
                for (var y in f.sets)
                    t < f.sets[y].begin || t >= f.sets[y].end || (m.styleAttrs[f.sets[y].qname] = f.sets[y].value);
                var _, v = {};
                for (var b in m.styleAttrs)
                    if (v[b] = !0,
                    b === a.byName.writingMode.qname && !(a.byName.direction.qname in m.styleAttrs)) {
                        var E = m.styleAttrs[b];
                        "lrtb" === E || "lr" === E ? m.styleAttrs[a.byName.direction.qname] = "ltr" : "rltb" !== E && "rl" !== E || (m.styleAttrs[a.byName.direction.qname] = "rtl")
                    }
                if (null !== d)
                    for (var k in a.all) {
                        var T = a.all[k];
                        if (T.qname === a.byName.textDecoration.qname) {
                            var S = d.styleAttrs[T.qname]
                              , A = m.styleAttrs[T.qname]
                              , C = [];
                            void 0 === A ? C = S : -1 === A.indexOf("none") ? ((-1 === A.indexOf("noUnderline") && -1 !== S.indexOf("underline") || -1 !== A.indexOf("underline")) && C.push("underline"),
                            (-1 === A.indexOf("noLineThrough") && -1 !== S.indexOf("lineThrough") || -1 !== A.indexOf("lineThrough")) && C.push("lineThrough"),
                            (-1 === A.indexOf("noOverline") && -1 !== S.indexOf("overline") || -1 !== A.indexOf("overline")) && C.push("overline")) : C.push("none"),
                            m.styleAttrs[T.qname] = C
                        } else if (T.qname !== a.byName.fontSize.qname || T.qname in m.styleAttrs || "span" !== m.kind || "textContainer" !== m.styleAttrs[a.byName.ruby.qname])
                            if (T.qname !== a.byName.fontSize.qname || T.qname in m.styleAttrs || "span" !== m.kind || "text" !== m.styleAttrs[a.byName.ruby.qname])
                                T.inherit && T.qname in d.styleAttrs && !(T.qname in m.styleAttrs) && (m.styleAttrs[T.qname] = d.styleAttrs[T.qname]);
                            else {
                                var I = d.styleAttrs[a.byName.fontSize.qname];
                                "textContainer" === d.styleAttrs[a.byName.ruby.qname] ? m.styleAttrs[T.qname] = I : m.styleAttrs[T.qname] = new r.ComputedLength(.5 * I.rw,.5 * I.rh)
                            }
                        else {
                            var P = d.styleAttrs[a.byName.fontSize.qname];
                            m.styleAttrs[T.qname] = new r.ComputedLength(.5 * P.rw,.5 * P.rh)
                        }
                    }
                for (var w in a.all) {
                    var M = a.all[w];
                    if (!(M.qname in m.styleAttrs) && !(M.qname === a.byName.position.qname && a.byName.origin.qname in m.styleAttrs || M.qname === a.byName.origin.qname && a.byName.position.qname in m.styleAttrs)) {
                        var R = e.head.styling.initials[M.qname] || M.initial;
                        ("region" === m.kind || !1 === M.inherit && null !== R) && (m.styleAttrs[M.qname] = M.parse(R),
                        v[M.qname] = !0)
                    }
                }
                for (var x in a.all) {
                    var D = a.all[x];
                    if (D.qname in v && null !== D.compute) {
                        var O = D.compute(e, d, m, m.styleAttrs[D.qname], p);
                        null !== O ? m.styleAttrs[D.qname] = O : (m.styleAttrs[D.qname] = D.compute(e, d, m, D.parse(D.initial), p),
                        l(h, "Style '" + D.qname + "' on element '" + m.kind + "' cannot be computed"))
                    }
                }
                if ("none" === m.styleAttrs[a.byName.display.qname])
                    return null;
                for (var N in null === d ? _ = null === u ? [] : [u] : "contents"in f && (_ = f.contents),
                _) {
                    var L = i(e, t, o, u, m, g, _[N], h, p);
                    null !== L && m.contents.push(L.element)
                }
                for (var U in m.styleAttrs) {
                    var F = !1;
                    if ("span" === m.kind) {
                        var B = m.styleAttrs[a.byName.ruby.qname];
                        (F = ("container" === B || "textContainer" === B || "baseContainer" === B) && -1 !== n.indexOf(U)) || (F = "container" !== B && U === a.byName.rubyAlign.qname),
                        F || (F = !("textContainer" === B || "text" === B) && U === a.byName.rubyPosition.qname)
                    }
                    if (!F)
                        F = -1 === a.byQName[U].applies.indexOf(m.kind);
                    F && delete m.styleAttrs[U]
                }
                if ("span" === m.kind && m.text && "default" === m.space) {
                    var j = m.text.replace(/[\t\r\n ]+/g, " ");
                    m.text = j
                }
                if ("p" === m.kind) {
                    var G = [];
                    !function e(t, a) {
                        if ("contents"in t)
                            for (var r in t.contents)
                                e(t.contents[r], a);
                        else
                            "span" !== t.kind && "br" !== t.kind || a.push(t)
                    }(m, G);
                    for (var V = 0, K = "after_br", $ = 0; ; )
                        if ("after_br" === K)
                            V >= G.length || "br" === G[V].kind ? (K = "before_br",
                            $ = V,
                            V--) : ("preserve" !== G[V].space && (G[V].text = G[V].text.replace(/^[\t\r\n ]+/g, "")),
                            G[V].text.length > 0 ? (K = "looking_br",
                            V++) : G.splice(V, 1));
                        else if ("before_br" === K)
                            if (V < 0 || "br" === G[V].kind) {
                                if (K = "after_br",
                                (V = $ + 1) >= G.length)
                                    break
                            } else if ("preserve" !== G[V].space && (G[V].text = G[V].text.replace(/[\t\r\n ]+$/g, "")),
                            G[V].text.length > 0) {
                                if (K = "after_br",
                                (V = $ + 1) >= G.length)
                                    break
                            } else
                                G.splice(V, 1),
                                V--;
                        else
                            V >= G.length || "br" === G[V].kind ? (K = "before_br",
                            $ = V,
                            V--) : V++;
                    !function e(t) {
                        if ("br" === t.kind)
                            return !1;
                        if ("text"in t)
                            return 0 === t.text.length;
                        if ("contents"in t) {
                            for (var a = t.contents.length; a--; )
                                e(t.contents[a]) && t.contents.splice(a, 1);
                            return 0 === t.contents.length
                        }
                    }(m)
                }
                return "div" === m.kind && a.byName.backgroundImage.qname in m.styleAttrs || "br" === m.kind || "image" === m.kind || "contents"in m && m.contents.length > 0 || "span" === m.kind && null !== m.text || "region" === m.kind && "always" === m.styleAttrs[a.byName.showBackground.qname] ? {
                    region_id: g,
                    element: m
                } : null
            }
            function o(e) {
                this.contents = [],
                this.aspectRatio = e.aspectRatio
            }
            function s(e) {
                for (var t in this.kind = e.kind || "region",
                e.id && (this.id = e.id),
                this.styleAttrs = {},
                e.styleAttrs)
                    this.styleAttrs[t] = e.styleAttrs[t];
                "src"in e && (this.src = e.src),
                "type"in e && (this.type = e.type),
                "text"in e ? this.text = e.text : ("region" === this.kind || "contents"in e) && (this.contents = []),
                "space"in e && (this.space = e.space)
            }
            function l(e, t) {
                if (e && e.error && e.error(t))
                    throw t
            }
        }(t, "undefined" == typeof imscNames ? a(107) : imscNames, "undefined" == typeof imscStyles ? a(162) : imscStyles, "undefined" == typeof imscUtils ? a(108) : imscUtils)
    }
    , function(e, t, a) {
        !function(e, t, a, r, n) {
            function i(e, t, a, r) {
                var n = r && "seq" === r.timeContainer
                  , o = 0;
                r && (o = n && a ? a.end : r.begin),
                t.begin = t.explicit_begin ? t.explicit_begin + o : o;
                var s = t.begin
                  , l = null;
                for (var u in t.sets)
                    i(e, t.sets[u], l, t),
                    s = "seq" === t.timeContainer ? t.sets[u].end : Math.max(s, t.sets[u].end),
                    l = t.sets[u];
                if ("contents"in t)
                    for (var d in t.contents)
                        i(e, t.contents[d], l, t),
                        s = "seq" === t.timeContainer ? t.contents[d].end : Math.max(s, t.contents[d].end),
                        l = t.contents[d];
                else
                    s = n ? t.begin : Number.POSITIVE_INFINITY;
                null !== t.explicit_end && null !== t.explicit_dur ? t.end = Math.min(t.begin + t.explicit_dur, o + t.explicit_end) : null === t.explicit_end && null !== t.explicit_dur ? t.end = t.begin + t.explicit_dur : null !== t.explicit_end && null === t.explicit_dur ? t.end = o + t.explicit_end : t.end = s,
                delete t.explicit_begin,
                delete t.explicit_dur,
                delete t.explicit_end,
                e._registerEvent(t)
            }
            function o(e) {
                this.node = e
            }
            function s() {
                this.events = [],
                this.head = new l,
                this.body = null
            }
            function l() {
                this.styling = new u,
                this.layout = new f
            }
            function u() {
                this.styles = {},
                this.initials = {}
            }
            function d() {
                this.id = null,
                this.styleAttrs = null,
                this.styleRefs = null
            }
            function c() {
                this.styleAttrs = null
            }
            function f() {
                this.regions = {}
            }
            function h(e, t) {
                p.call(this, "image"),
                this.src = e,
                this.type = t
            }
            function p(e) {
                this.kind = e
            }
            function g(e) {
                this.id = e
            }
            function m(e) {
                this.regionID = e
            }
            function y(e) {
                this.styleAttrs = e
            }
            function _(e) {
                this.sets = e
            }
            function v(e) {
                this.contents = e
            }
            function b(e, t, a) {
                this.explicit_begin = e,
                this.explicit_end = t,
                this.explicit_dur = a
            }
            function E() {
                p.call(this, "body")
            }
            function k() {
                p.call(this, "div")
            }
            function T() {
                p.call(this, "p")
            }
            function S() {
                p.call(this, "span")
            }
            function A() {
                p.call(this, "span")
            }
            function C() {
                p.call(this, "br")
            }
            function I() {}
            function P() {}
            function w(e) {
                return e && "xml:id"in e.attributes && e.attributes["xml:id"].value || null
            }
            function M(e) {
                return e && "style"in e.attributes ? e.attributes.style.value.split(" ") : []
            }
            function R(e, t) {
                var a = {};
                if (null !== e)
                    for (var n in e.attributes) {
                        var i = e.attributes[n].uri + " " + e.attributes[n].local
                          , o = r.byQName[i];
                        if (void 0 !== o) {
                            var s = o.parse(e.attributes[n].value);
                            null !== s ? (a[i] = s,
                            o === r.byName.zIndex && U(t, "zIndex attribute present but not used by IMSC1 since regions do not overlap")) : F(t, "Cannot parse styling attribute " + i + " --\x3e " + e.attributes[n].value)
                        }
                    }
                return a
            }
            function x(e, t, a) {
                for (var r in e.attributes)
                    if (e.attributes[r].uri === t && e.attributes[r].local === a)
                        return e.attributes[r].value;
                return null
            }
            function D(e, t, a) {
                var r, n = null;
                return null !== (r = /^(\d+(?:\.\d+)?)f$/.exec(a)) ? null !== t && (n = parseFloat(r[1]) / t) : null !== (r = /^(\d+(?:\.\d+)?)t$/.exec(a)) ? null !== e && (n = parseFloat(r[1]) / e) : null !== (r = /^(\d+(?:\.\d+)?)ms$/.exec(a)) ? n = parseFloat(r[1]) / 1e3 : null !== (r = /^(\d+(?:\.\d+)?)s$/.exec(a)) ? n = parseFloat(r[1]) : null !== (r = /^(\d+(?:\.\d+)?)h$/.exec(a)) ? n = 3600 * parseFloat(r[1]) : null !== (r = /^(\d+(?:\.\d+)?)m$/.exec(a)) ? n = 60 * parseFloat(r[1]) : null !== (r = /^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(a)) ? n = 3600 * parseInt(r[1]) + 60 * parseInt(r[2]) + parseFloat(r[3]) : null !== (r = /^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(a)) && null !== t && (n = 3600 * parseInt(r[1]) + 60 * parseInt(r[2]) + parseInt(r[3]) + (null === r[4] ? 0 : parseInt(r[4]) / t)),
                n
            }
            function O(e, t, a) {
                for (; t.styleRefs.length > 0; ) {
                    var r = t.styleRefs.pop();
                    r in e.styles ? (O(e, e.styles[r], a),
                    L(e.styles[r].styleAttrs, t.styleAttrs)) : F(a, "Non-existant style id referenced")
                }
            }
            function N(e, t, a, r) {
                for (var n = t.length - 1; n >= 0; n--) {
                    var i = t[n];
                    i in e.styles ? L(e.styles[i].styleAttrs, a) : F(r, "Non-existant style id referenced")
                }
            }
            function L(e, t) {
                for (var a in e)
                    a in t || (t[a] = e[a])
            }
            function U(e, t) {
                if (e && e.warn && e.warn(t))
                    throw t
            }
            function F(e, t) {
                if (e && e.error && e.error(t))
                    throw t
            }
            function B(e, t) {
                throw e && e.fatal && e.fatal(t),
                t
            }
            function j(e, t) {
                for (var a, r = 0, n = e.length - 1; r <= n; ) {
                    var i = e[a = Math.floor((r + n) / 2)];
                    if (i < t)
                        r = a + 1;
                    else {
                        if (!(i > t))
                            return {
                                found: !0,
                                index: a
                            };
                        n = a - 1
                    }
                }
                return {
                    found: !1,
                    index: r
                }
            }
            e.fromXML = function(e, n, p) {
                var g = t.parser(!0, {
                    xmlns: !0
                })
                  , m = []
                  , y = []
                  , _ = []
                  , v = 0
                  , b = null;
                g.onclosetag = function(e) {
                    if (m[0]instanceof u)
                        for (var t in m[0].styles)
                            O(m[0], m[0].styles[t], n);
                    else if (m[0]instanceof T || m[0]instanceof S) {
                        if (m[0].contents.length > 1) {
                            var r, i = [m[0].contents[0]];
                            for (r = 1; r < m[0].contents.length; r++)
                                m[0].contents[r]instanceof A && i[i.length - 1]instanceof A ? i[i.length - 1].text += m[0].contents[r].text : i.push(m[0].contents[r]);
                            m[0].contents = i
                        }
                        m[0]instanceof S && 1 === m[0].contents.length && m[0].contents[0]instanceof A && (m[0].text = m[0].contents[0].text,
                        delete m[0].contents)
                    } else
                        m[0]instanceof o && (m[0].node.uri === a.ns_tt && "metadata" === m[0].node.local ? v-- : v > 0 && p && "onCloseTag"in p && p.onCloseTag());
                    _.shift(),
                    y.shift(),
                    m.shift()
                }
                ,
                g.ontext = function(e) {
                    if (void 0 === m[0])
                        ;
                    else if (m[0]instanceof S || m[0]instanceof T) {
                        if (m[0]instanceof S) {
                            var t = m[0].styleAttrs[r.byName.ruby.qname];
                            if ("container" === t || "textContainer" === t || "baseContainer" === t)
                                return
                        }
                        var a = new A;
                        a.initFromText(b, m[0], e, _[0], n),
                        m[0].contents.push(a)
                    } else
                        m[0]instanceof o && v > 0 && p && "onText"in p && p.onText(e)
                }
                ,
                g.onopentag = function(e) {
                    var t = e.attributes["xml:space"];
                    t ? _.unshift(t.value) : 0 === _.length ? _.unshift("default") : _.unshift(_[0]);
                    var i = e.attributes["xml:lang"];
                    if (i ? y.unshift(i.value) : 0 === y.length ? y.unshift("") : y.unshift(y[0]),
                    e.uri === a.ns_tt)
                        if ("tt" === e.local)
                            null !== b && B(n, "Two <tt> elements at (" + this.line + "," + this.column + ")"),
                            (b = new s).initFromNode(e, n),
                            m.unshift(b);
                        else if ("head" === e.local)
                            m[0]instanceof s || B(n, "Parent of <head> element is not <tt> at (" + this.line + "," + this.column + ")"),
                            m.unshift(b.head);
                        else if ("styling" === e.local)
                            m[0]instanceof l || B(n, "Parent of <styling> element is not <head> at (" + this.line + "," + this.column + ")"),
                            m.unshift(b.head.styling);
                        else if ("style" === e.local) {
                            var g;
                            m[0]instanceof u ? ((g = new d).initFromNode(e, n),
                            g.id ? b.head.styling.styles[g.id] = g : F(n, "<style> element missing @id attribute"),
                            m.unshift(g)) : m[0]instanceof I ? ((g = new d).initFromNode(e, n),
                            L(g.styleAttrs, m[0].styleAttrs),
                            m.unshift(g)) : B(n, "Parent of <style> element is not <styling> or <region> at (" + this.line + "," + this.column + ")")
                        } else if ("initial" === e.local) {
                            var A;
                            if (m[0]instanceof u) {
                                for (var w in (A = new c).initFromNode(e, n),
                                A.styleAttrs)
                                    b.head.styling.initials[w] = A.styleAttrs[w];
                                m.unshift(A)
                            } else
                                B(n, "Parent of <initial> element is not <styling> at (" + this.line + "," + this.column + ")")
                        } else if ("layout" === e.local)
                            m[0]instanceof l || B(n, "Parent of <layout> element is not <head> at " + this.line + "," + this.column + ")"),
                            m.unshift(b.head.layout);
                        else if ("region" === e.local) {
                            m[0]instanceof f || B(n, "Parent of <region> element is not <layout> at " + this.line + "," + this.column + ")");
                            var M = new I;
                            M.initFromNode(b, e, n),
                            !M.id || M.id in b.head.layout.regions ? F(n, "Ignoring <region> with duplicate or missing @id at " + this.line + "," + this.column + ")") : b.head.layout.regions[M.id] = M,
                            m.unshift(M)
                        } else if ("body" === e.local) {
                            m[0]instanceof s || B(n, "Parent of <body> element is not <tt> at " + this.line + "," + this.column + ")"),
                            null !== b.body && B(n, "Second <body> element at " + this.line + "," + this.column + ")");
                            var R = new E;
                            R.initFromNode(b, e, n),
                            b.body = R,
                            m.unshift(R)
                        } else if ("div" === e.local) {
                            m[0]instanceof k || m[0]instanceof E || B(n, "Parent of <div> element is not <body> or <div> at " + this.line + "," + this.column + ")");
                            var x = new k;
                            x.initFromNode(b, m[0], e, n);
                            var D = x.styleAttrs[r.byName.backgroundImage.qname];
                            D && (x.contents.push(new h(D)),
                            delete x.styleAttrs[r.byName.backgroundImage.qname]),
                            m[0].contents.push(x),
                            m.unshift(x)
                        } else if ("image" === e.local) {
                            m[0]instanceof k || B(n, "Parent of <image> element is not <div> at " + this.line + "," + this.column + ")");
                            var O = new h;
                            O.initFromNode(b, m[0], e, n),
                            m[0].contents.push(O),
                            m.unshift(O)
                        } else if ("p" === e.local) {
                            m[0]instanceof k || B(n, "Parent of <p> element is not <div> at " + this.line + "," + this.column + ")");
                            var N = new T;
                            N.initFromNode(b, m[0], e, n),
                            m[0].contents.push(N),
                            m.unshift(N)
                        } else if ("span" === e.local) {
                            m[0]instanceof S || m[0]instanceof T || B(n, "Parent of <span> element is not <span> or <p> at " + this.line + "," + this.column + ")");
                            var U = new S;
                            U.initFromNode(b, m[0], e, _[0], n),
                            m[0].contents.push(U),
                            m.unshift(U)
                        } else if ("br" === e.local) {
                            m[0]instanceof S || m[0]instanceof T || B(n, "Parent of <br> element is not <span> or <p> at " + this.line + "," + this.column + ")");
                            var j = new C;
                            j.initFromNode(b, m[0], e, n),
                            m[0].contents.push(j),
                            m.unshift(j)
                        } else if ("set" === e.local) {
                            m[0]instanceof S || m[0]instanceof T || m[0]instanceof k || m[0]instanceof E || m[0]instanceof I || m[0]instanceof C || B(n, "Parent of <set> element is not a content element or a region at " + this.line + "," + this.column + ")");
                            var G = new P;
                            G.initFromNode(b, m[0], e, n),
                            m[0].sets.push(G),
                            m.unshift(G)
                        } else
                            m.unshift(new o(e));
                    else
                        m.unshift(new o(e));
                    if (m[0]instanceof o)
                        if (e.uri === a.ns_tt && "metadata" === e.local)
                            v++;
                        else if (v > 0 && p && "onOpenTag"in p) {
                            var V = [];
                            for (var K in e.attributes)
                                V[e.attributes[K].uri + " " + e.attributes[K].local] = {
                                    uri: e.attributes[K].uri,
                                    local: e.attributes[K].local,
                                    value: e.attributes[K].value
                                };
                            p.onOpenTag(e.uri, e.local, V)
                        }
                }
                ,
                g.write(e).close(),
                delete b.head.styling.styles;
                var w = !1;
                for (var M in b.head.layout.regions) {
                    w = !0;
                    break
                }
                if (!w) {
                    var R = I.prototype.createDefaultRegion();
                    b.head.layout.regions[R.id] = R
                }
                for (var x in b.head.layout.regions)
                    i(b, b.head.layout.regions[x], null, null);
                return b.body && i(b, b.body, null, null),
                b.body && function e(t) {
                    if (!("contents"in t))
                        return;
                    for (var a = ("styleAttrs"in t ? t.styleAttrs[r.byName.ruby.qname] : null), n = "span" === t.kind && ("container" === a || "textContainer" === a || "baseContainer" === a), i = t.contents.length - 1; i >= 0; i--)
                        !n || "styleAttrs"in t.contents[i] && r.byName.ruby.qname in t.contents[i].styleAttrs ? e(t.contents[i]) : delete t.contents[i]
                }(b.body),
                b
            }
            ,
            s.prototype.initFromNode = function(e, t) {
                var r = function(e, t) {
                    var r = x(e, a.ns_ttp, "cellResolution")
                      , n = 15
                      , i = 32;
                    if (null !== r) {
                        var o = /(\d+) (\d+)/.exec(r);
                        null !== o ? (i = parseInt(o[1]),
                        n = parseInt(o[2])) : U(t, "Malformed cellResolution value (using initial value instead)")
                    }
                    return {
                        w: i,
                        h: n
                    }
                }(e, t);
                this.cellLength = {
                    h: new n.ComputedLength(0,1 / r.h),
                    w: new n.ComputedLength(1 / r.w,0)
                };
                var i = function(e, t) {
                    var r, n = x(e, a.ns_ttp, "frameRate"), i = 30;
                    if (null !== n) {
                        null !== (r = /(\d+)/.exec(n)) ? i = parseInt(r[1]) : U(t, "Malformed frame rate attribute (using initial value instead)")
                    }
                    var o = x(e, a.ns_ttp, "frameRateMultiplier")
                      , s = 1;
                    if (null !== o) {
                        null !== (r = /(\d+) (\d+)/.exec(o)) ? s = parseInt(r[1]) / parseInt(r[2]) : U(t, "Malformed frame rate multiplier attribute (using initial value instead)")
                    }
                    var l = s * i
                      , u = 1
                      , d = x(e, a.ns_ttp, "tickRate");
                    if (null === d)
                        null !== n && (u = l);
                    else {
                        null !== (r = /(\d+)/.exec(d)) ? u = parseInt(r[1]) : U(t, "Malformed tick rate attribute (using initial value instead)")
                    }
                    return {
                        effectiveFrameRate: l,
                        tickRate: u
                    }
                }(e, t);
                this.effectiveFrameRate = i.effectiveFrameRate,
                this.tickRate = i.tickRate,
                this.aspectRatio = function(e, t) {
                    var r = x(e, a.ns_ittp, "aspectRatio");
                    null === r && (r = x(e, a.ns_ttp, "displayAspectRatio"));
                    var n = null;
                    if (null !== r) {
                        var i = /(\d+)\s+(\d+)/.exec(r);
                        if (null !== i) {
                            var o = parseInt(i[1])
                              , s = parseInt(i[2]);
                            0 !== o && 0 !== s ? n = o / s : F(t, "Illegal aspectRatio values (ignoring)")
                        } else
                            F(t, "Malformed aspectRatio attribute (ignoring)")
                    }
                    return n
                }(e, t);
                var o = x(e, a.ns_ttp, "timeBase");
                null !== o && "media" !== o && B(t, "Unsupported time base");
                var s = function(e, t) {
                    var r = x(e, a.ns_tts, "extent");
                    if (null === r)
                        return null;
                    var i = r.split(" ");
                    if (2 !== i.length)
                        return U(t, "Malformed extent (ignoring)"),
                        null;
                    var o = n.parseLength(i[0])
                      , s = n.parseLength(i[1]);
                    if (!s || !o)
                        return U(t, "Malformed extent values (ignoring)"),
                        null;
                    return {
                        h: s,
                        w: o
                    }
                }(e, t);
                null === s ? this.pxLength = {
                    h: null,
                    w: null
                } : ("px" === s.h.unit && "px" === s.w.unit || B(t, "Extent on TT must be in px or absent"),
                this.pxLength = {
                    h: new n.ComputedLength(0,1 / s.h.value),
                    w: new n.ComputedLength(1 / s.w.value,0)
                }),
                this.dimensions = {
                    h: new n.ComputedLength(0,1),
                    w: new n.ComputedLength(1,0)
                }
            }
            ,
            s.prototype._registerEvent = function(e) {
                if (!(e.end <= e.begin)) {
                    var t = j(this.events, e.begin);
                    if (t.found || this.events.splice(t.index, 0, e.begin),
                    e.end !== Number.POSITIVE_INFINITY) {
                        var a = j(this.events, e.end);
                        a.found || this.events.splice(a.index, 0, e.end)
                    }
                }
            }
            ,
            s.prototype.getMediaTimeRange = function() {
                return [this.events[0], this.events[this.events.length - 1]]
            }
            ,
            s.prototype.getMediaTimeEvents = function() {
                return this.events
            }
            ,
            d.prototype.initFromNode = function(e, t) {
                this.id = w(e),
                this.styleAttrs = R(e, t),
                this.styleRefs = M(e)
            }
            ,
            c.prototype.initFromNode = function(e, t) {
                for (var r in this.styleAttrs = {},
                e.attributes)
                    if (e.attributes[r].uri === a.ns_itts || e.attributes[r].uri === a.ns_ebutts || e.attributes[r].uri === a.ns_tts) {
                        var n = e.attributes[r].uri + " " + e.attributes[r].local;
                        this.styleAttrs[n] = e.attributes[r].value
                    }
            }
            ,
            h.prototype.initFromNode = function(e, t, a, r) {
                this.src = "src"in a.attributes ? a.attributes.src.value : null,
                this.src || F(r, "Invalid image@src attribute"),
                this.type = "type"in a.attributes ? a.attributes.type.value : null,
                this.type || F(r, "Invalid image@type attribute"),
                y.prototype.initFromNode.call(this, e, t, a, r),
                b.prototype.initFromNode.call(this, e, t, a, r),
                _.prototype.initFromNode.call(this, e, t, a, r),
                m.prototype.initFromNode.call(this, e, t, a, r)
            }
            ,
            g.prototype.initFromNode = function(e, t, a, r) {
                this.id = w(a)
            }
            ,
            m.prototype.initFromNode = function(e, t, a, r) {
                this.regionID = function(e) {
                    return e && "region"in e.attributes ? e.attributes.region.value : ""
                }(a)
            }
            ,
            y.prototype.initFromNode = function(e, t, a, r) {
                this.styleAttrs = R(a, r),
                null !== e.head && null !== e.head.styling && N(e.head.styling, M(a), this.styleAttrs, r)
            }
            ,
            _.prototype.initFromNode = function(e, t, a, r) {
                this.sets = []
            }
            ,
            v.prototype.initFromNode = function(e, t, a, r) {
                this.contents = []
            }
            ,
            b.prototype.initFromNode = function(e, t, a, r) {
                var n = function(e, t, a, r) {
                    var n = null;
                    a && "begin"in a.attributes && null === (n = D(e.tickRate, e.effectiveFrameRate, a.attributes.begin.value)) && U(r, "Malformed begin value " + a.attributes.begin.value + " (using 0)");
                    var i = null;
                    a && "dur"in a.attributes && null === (i = D(e.tickRate, e.effectiveFrameRate, a.attributes.dur.value)) && U(r, "Malformed dur value " + a.attributes.dur.value + " (ignoring)");
                    var o = null;
                    a && "end"in a.attributes && null === (o = D(e.tickRate, e.effectiveFrameRate, a.attributes.end.value)) && U(r, "Malformed end value (ignoring)");
                    return {
                        explicit_begin: n,
                        explicit_end: o,
                        explicit_dur: i
                    }
                }(e, 0, a, r);
                this.explicit_begin = n.explicit_begin,
                this.explicit_end = n.explicit_end,
                this.explicit_dur = n.explicit_dur,
                this.timeContainer = function(e, t) {
                    var a = e && "timeContainer"in e.attributes ? e.attributes.timeContainer.value : null;
                    return a && "par" !== a ? "seq" === a ? "seq" : (F(t, "Illegal value of timeContainer (assuming 'par')"),
                    "par") : "par"
                }(a, r)
            }
            ,
            E.prototype.initFromNode = function(e, t, a) {
                y.prototype.initFromNode.call(this, e, null, t, a),
                b.prototype.initFromNode.call(this, e, null, t, a),
                _.prototype.initFromNode.call(this, e, null, t, a),
                m.prototype.initFromNode.call(this, e, null, t, a),
                v.prototype.initFromNode.call(this, e, null, t, a)
            }
            ,
            k.prototype.initFromNode = function(e, t, a, r) {
                y.prototype.initFromNode.call(this, e, t, a, r),
                b.prototype.initFromNode.call(this, e, t, a, r),
                _.prototype.initFromNode.call(this, e, t, a, r),
                m.prototype.initFromNode.call(this, e, t, a, r),
                v.prototype.initFromNode.call(this, e, t, a, r)
            }
            ,
            T.prototype.initFromNode = function(e, t, a, r) {
                y.prototype.initFromNode.call(this, e, t, a, r),
                b.prototype.initFromNode.call(this, e, t, a, r),
                _.prototype.initFromNode.call(this, e, t, a, r),
                m.prototype.initFromNode.call(this, e, t, a, r),
                v.prototype.initFromNode.call(this, e, t, a, r)
            }
            ,
            S.prototype.initFromNode = function(e, t, a, r, n) {
                y.prototype.initFromNode.call(this, e, t, a, n),
                b.prototype.initFromNode.call(this, e, t, a, n),
                _.prototype.initFromNode.call(this, e, t, a, n),
                m.prototype.initFromNode.call(this, e, t, a, n),
                v.prototype.initFromNode.call(this, e, t, a, n),
                this.space = r
            }
            ,
            A.prototype.initFromText = function(e, t, a, r, n) {
                b.prototype.initFromNode.call(this, e, t, null, n),
                this.text = a,
                this.space = r
            }
            ,
            C.prototype.initFromNode = function(e, t, a, r) {
                m.prototype.initFromNode.call(this, e, t, a, r),
                b.prototype.initFromNode.call(this, e, t, a, r)
            }
            ,
            I.prototype.createDefaultRegion = function() {
                var e = new I;
                return g.call(e, ""),
                y.call(e, {}),
                _.call(e, []),
                b.call(e, 0, Number.POSITIVE_INFINITY, null),
                e
            }
            ,
            I.prototype.initFromNode = function(e, t, a) {
                g.prototype.initFromNode.call(this, e, null, t, a),
                y.prototype.initFromNode.call(this, e, null, t, a),
                b.prototype.initFromNode.call(this, e, null, t, a),
                _.prototype.initFromNode.call(this, e, null, t, a),
                null !== e.head && null !== e.head.styling && N(e.head.styling, M(t), this.styleAttrs, a)
            }
            ,
            P.prototype.initFromNode = function(e, t, a, r) {
                b.prototype.initFromNode.call(this, e, t, a, r);
                var n = R(a, r);
                for (var i in this.qname = null,
                this.value = null,
                n) {
                    if (this.qname) {
                        F(r, "More than one style specified on set");
                        break
                    }
                    this.qname = i,
                    this.value = n[i]
                }
            }
        }(t, "undefined" == typeof sax ? a(277) : sax, "undefined" == typeof imscNames ? a(107) : imscNames, "undefined" == typeof imscStyles ? a(162) : imscStyles, "undefined" == typeof imscUtils ? a(108) : imscUtils)
    }
    , function(e, t, a) {
        !function(e) {
            e.parser = function(e, t) {
                return new n(e,t)
            }
            ,
            e.SAXParser = n,
            e.SAXStream = o,
            e.createStream = function(e, t) {
                return new o(e,t)
            }
            ,
            e.MAX_BUFFER_LENGTH = 65536;
            var t, r = ["comment", "sgmlDecl", "textNode", "tagName", "doctype", "procInstName", "procInstBody", "entity", "attribName", "attribValue", "cdata", "script"];
            function n(t, a) {
                if (!(this instanceof n))
                    return new n(t,a);
                !function(e) {
                    for (var t = 0, a = r.length; t < a; t++)
                        e[r[t]] = ""
                }(this),
                this.q = this.c = "",
                this.bufferCheckPosition = e.MAX_BUFFER_LENGTH,
                this.opt = a || {},
                this.opt.lowercase = this.opt.lowercase || this.opt.lowercasetags,
                this.looseCase = this.opt.lowercase ? "toLowerCase" : "toUpperCase",
                this.tags = [],
                this.closed = this.closedRoot = this.sawRoot = !1,
                this.tag = this.error = null,
                this.strict = !!t,
                this.noscript = !(!t && !this.opt.noscript),
                this.state = S.BEGIN,
                this.strictEntities = this.opt.strictEntities,
                this.ENTITIES = this.strictEntities ? Object.create(e.XML_ENTITIES) : Object.create(e.ENTITIES),
                this.attribList = [],
                this.opt.xmlns && (this.ns = Object.create(h)),
                this.trackPosition = !1 !== this.opt.position,
                this.trackPosition && (this.position = this.line = this.column = 0),
                C(this, "onready")
            }
            e.EVENTS = ["text", "processinginstruction", "sgmldeclaration", "doctype", "comment", "opentagstart", "attribute", "opentag", "closetag", "opencdata", "cdata", "closecdata", "error", "end", "ready", "script", "opennamespace", "closenamespace"],
            Object.create || (Object.create = function(e) {
                function t() {}
                return t.prototype = e,
                new t
            }
            ),
            Object.keys || (Object.keys = function(e) {
                var t = [];
                for (var a in e)
                    e.hasOwnProperty(a) && t.push(a);
                return t
            }
            ),
            n.prototype = {
                end: function() {
                    R(this)
                },
                write: function(t) {
                    if (this.error)
                        throw this.error;
                    if (this.closed)
                        return M(this, "Cannot write after close. Assign an onready handler.");
                    if (null === t)
                        return R(this);
                    "object" == typeof t && (t = t.toString());
                    var a = 0
                      , n = "";
                    for (; n = j(t, a++),
                    this.c = n,
                    n; )
                        switch (this.trackPosition && (this.position++,
                        "\n" === n ? (this.line++,
                        this.column = 0) : this.column++),
                        this.state) {
                        case S.BEGIN:
                            if (this.state = S.BEGIN_WHITESPACE,
                            "\ufeff" === n)
                                continue;
                            B(this, n);
                            continue;
                        case S.BEGIN_WHITESPACE:
                            B(this, n);
                            continue;
                        case S.TEXT:
                            if (this.sawRoot && !this.closedRoot) {
                                for (var i = a - 1; n && "<" !== n && "&" !== n; )
                                    (n = j(t, a++)) && this.trackPosition && (this.position++,
                                    "\n" === n ? (this.line++,
                                    this.column = 0) : this.column++);
                                this.textNode += t.substring(i, a - 1)
                            }
                            "<" !== n || this.sawRoot && this.closedRoot && !this.strict ? (!b(s, n) || this.sawRoot && !this.closedRoot || x(this, "Text data outside of root node."),
                            "&" === n ? this.state = S.TEXT_ENTITY : this.textNode += n) : (this.state = S.OPEN_WAKA,
                            this.startTagPosition = this.position);
                            continue;
                        case S.SCRIPT:
                            "<" === n ? this.state = S.SCRIPT_ENDING : this.script += n;
                            continue;
                        case S.SCRIPT_ENDING:
                            "/" === n ? this.state = S.CLOSE_TAG : (this.script += "<" + n,
                            this.state = S.SCRIPT);
                            continue;
                        case S.OPEN_WAKA:
                            if ("!" === n)
                                this.state = S.SGML_DECL,
                                this.sgmlDecl = "";
                            else if (v(s, n))
                                ;
                            else if (v(p, n))
                                this.state = S.OPEN_TAG,
                                this.tagName = n;
                            else if ("/" === n)
                                this.state = S.CLOSE_TAG,
                                this.tagName = "";
                            else if ("?" === n)
                                this.state = S.PROC_INST,
                                this.procInstName = this.procInstBody = "";
                            else {
                                if (x(this, "Unencoded <"),
                                this.startTagPosition + 1 < this.position) {
                                    var o = this.position - this.startTagPosition;
                                    n = new Array(o).join(" ") + n
                                }
                                this.textNode += "<" + n,
                                this.state = S.TEXT
                            }
                            continue;
                        case S.SGML_DECL:
                            "[CDATA[" === (this.sgmlDecl + n).toUpperCase() ? (I(this, "onopencdata"),
                            this.state = S.CDATA,
                            this.sgmlDecl = "",
                            this.cdata = "") : this.sgmlDecl + n === "--" ? (this.state = S.COMMENT,
                            this.comment = "",
                            this.sgmlDecl = "") : "DOCTYPE" === (this.sgmlDecl + n).toUpperCase() ? (this.state = S.DOCTYPE,
                            (this.doctype || this.sawRoot) && x(this, "Inappropriately located doctype declaration"),
                            this.doctype = "",
                            this.sgmlDecl = "") : ">" === n ? (I(this, "onsgmldeclaration", this.sgmlDecl),
                            this.sgmlDecl = "",
                            this.state = S.TEXT) : v(d, n) ? (this.state = S.SGML_DECL_QUOTED,
                            this.sgmlDecl += n) : this.sgmlDecl += n;
                            continue;
                        case S.SGML_DECL_QUOTED:
                            n === this.q && (this.state = S.SGML_DECL,
                            this.q = ""),
                            this.sgmlDecl += n;
                            continue;
                        case S.DOCTYPE:
                            ">" === n ? (this.state = S.TEXT,
                            I(this, "ondoctype", this.doctype),
                            this.doctype = !0) : (this.doctype += n,
                            "[" === n ? this.state = S.DOCTYPE_DTD : v(d, n) && (this.state = S.DOCTYPE_QUOTED,
                            this.q = n));
                            continue;
                        case S.DOCTYPE_QUOTED:
                            this.doctype += n,
                            n === this.q && (this.q = "",
                            this.state = S.DOCTYPE);
                            continue;
                        case S.DOCTYPE_DTD:
                            this.doctype += n,
                            "]" === n ? this.state = S.DOCTYPE : v(d, n) && (this.state = S.DOCTYPE_DTD_QUOTED,
                            this.q = n);
                            continue;
                        case S.DOCTYPE_DTD_QUOTED:
                            this.doctype += n,
                            n === this.q && (this.state = S.DOCTYPE_DTD,
                            this.q = "");
                            continue;
                        case S.COMMENT:
                            "-" === n ? this.state = S.COMMENT_ENDING : this.comment += n;
                            continue;
                        case S.COMMENT_ENDING:
                            "-" === n ? (this.state = S.COMMENT_ENDED,
                            this.comment = w(this.opt, this.comment),
                            this.comment && I(this, "oncomment", this.comment),
                            this.comment = "") : (this.comment += "-" + n,
                            this.state = S.COMMENT);
                            continue;
                        case S.COMMENT_ENDED:
                            ">" !== n ? (x(this, "Malformed comment"),
                            this.comment += "--" + n,
                            this.state = S.COMMENT) : this.state = S.TEXT;
                            continue;
                        case S.CDATA:
                            "]" === n ? this.state = S.CDATA_ENDING : this.cdata += n;
                            continue;
                        case S.CDATA_ENDING:
                            "]" === n ? this.state = S.CDATA_ENDING_2 : (this.cdata += "]" + n,
                            this.state = S.CDATA);
                            continue;
                        case S.CDATA_ENDING_2:
                            ">" === n ? (this.cdata && I(this, "oncdata", this.cdata),
                            I(this, "onclosecdata"),
                            this.cdata = "",
                            this.state = S.TEXT) : "]" === n ? this.cdata += "]" : (this.cdata += "]]" + n,
                            this.state = S.CDATA);
                            continue;
                        case S.PROC_INST:
                            "?" === n ? this.state = S.PROC_INST_ENDING : v(s, n) ? this.state = S.PROC_INST_BODY : this.procInstName += n;
                            continue;
                        case S.PROC_INST_BODY:
                            if (!this.procInstBody && v(s, n))
                                continue;
                            "?" === n ? this.state = S.PROC_INST_ENDING : this.procInstBody += n;
                            continue;
                        case S.PROC_INST_ENDING:
                            ">" === n ? (I(this, "onprocessinginstruction", {
                                name: this.procInstName,
                                body: this.procInstBody
                            }),
                            this.procInstName = this.procInstBody = "",
                            this.state = S.TEXT) : (this.procInstBody += "?" + n,
                            this.state = S.PROC_INST_BODY);
                            continue;
                        case S.OPEN_TAG:
                            v(g, n) ? this.tagName += n : (D(this),
                            ">" === n ? L(this) : "/" === n ? this.state = S.OPEN_TAG_SLASH : (b(s, n) && x(this, "Invalid character in tag name"),
                            this.state = S.ATTRIB));
                            continue;
                        case S.OPEN_TAG_SLASH:
                            ">" === n ? (L(this, !0),
                            U(this)) : (x(this, "Forward-slash in opening tag not followed by >"),
                            this.state = S.ATTRIB);
                            continue;
                        case S.ATTRIB:
                            if (v(s, n))
                                continue;
                            ">" === n ? L(this) : "/" === n ? this.state = S.OPEN_TAG_SLASH : v(p, n) ? (this.attribName = n,
                            this.attribValue = "",
                            this.state = S.ATTRIB_NAME) : x(this, "Invalid attribute name");
                            continue;
                        case S.ATTRIB_NAME:
                            "=" === n ? this.state = S.ATTRIB_VALUE : ">" === n ? (x(this, "Attribute without value"),
                            this.attribValue = this.attribName,
                            N(this),
                            L(this)) : v(s, n) ? this.state = S.ATTRIB_NAME_SAW_WHITE : v(g, n) ? this.attribName += n : x(this, "Invalid attribute name");
                            continue;
                        case S.ATTRIB_NAME_SAW_WHITE:
                            if ("=" === n)
                                this.state = S.ATTRIB_VALUE;
                            else {
                                if (v(s, n))
                                    continue;
                                x(this, "Attribute without value"),
                                this.tag.attributes[this.attribName] = "",
                                this.attribValue = "",
                                I(this, "onattribute", {
                                    name: this.attribName,
                                    value: ""
                                }),
                                this.attribName = "",
                                ">" === n ? L(this) : v(p, n) ? (this.attribName = n,
                                this.state = S.ATTRIB_NAME) : (x(this, "Invalid attribute name"),
                                this.state = S.ATTRIB)
                            }
                            continue;
                        case S.ATTRIB_VALUE:
                            if (v(s, n))
                                continue;
                            v(d, n) ? (this.q = n,
                            this.state = S.ATTRIB_VALUE_QUOTED) : (x(this, "Unquoted attribute value"),
                            this.state = S.ATTRIB_VALUE_UNQUOTED,
                            this.attribValue = n);
                            continue;
                        case S.ATTRIB_VALUE_QUOTED:
                            if (n !== this.q) {
                                "&" === n ? this.state = S.ATTRIB_VALUE_ENTITY_Q : this.attribValue += n;
                                continue
                            }
                            N(this),
                            this.q = "",
                            this.state = S.ATTRIB_VALUE_CLOSED;
                            continue;
                        case S.ATTRIB_VALUE_CLOSED:
                            v(s, n) ? this.state = S.ATTRIB : ">" === n ? L(this) : "/" === n ? this.state = S.OPEN_TAG_SLASH : v(p, n) ? (x(this, "No whitespace between attributes"),
                            this.attribName = n,
                            this.attribValue = "",
                            this.state = S.ATTRIB_NAME) : x(this, "Invalid attribute name");
                            continue;
                        case S.ATTRIB_VALUE_UNQUOTED:
                            if (b(c, n)) {
                                "&" === n ? this.state = S.ATTRIB_VALUE_ENTITY_U : this.attribValue += n;
                                continue
                            }
                            N(this),
                            ">" === n ? L(this) : this.state = S.ATTRIB;
                            continue;
                        case S.CLOSE_TAG:
                            if (this.tagName)
                                ">" === n ? U(this) : v(g, n) ? this.tagName += n : this.script ? (this.script += "</" + this.tagName,
                                this.tagName = "",
                                this.state = S.SCRIPT) : (b(s, n) && x(this, "Invalid tagname in closing tag"),
                                this.state = S.CLOSE_TAG_SAW_WHITE);
                            else {
                                if (v(s, n))
                                    continue;
                                b(p, n) ? this.script ? (this.script += "</" + n,
                                this.state = S.SCRIPT) : x(this, "Invalid tagname in closing tag.") : this.tagName = n
                            }
                            continue;
                        case S.CLOSE_TAG_SAW_WHITE:
                            if (v(s, n))
                                continue;
                            ">" === n ? U(this) : x(this, "Invalid characters in closing tag");
                            continue;
                        case S.TEXT_ENTITY:
                        case S.ATTRIB_VALUE_ENTITY_Q:
                        case S.ATTRIB_VALUE_ENTITY_U:
                            var l, u;
                            switch (this.state) {
                            case S.TEXT_ENTITY:
                                l = S.TEXT,
                                u = "textNode";
                                break;
                            case S.ATTRIB_VALUE_ENTITY_Q:
                                l = S.ATTRIB_VALUE_QUOTED,
                                u = "attribValue";
                                break;
                            case S.ATTRIB_VALUE_ENTITY_U:
                                l = S.ATTRIB_VALUE_UNQUOTED,
                                u = "attribValue"
                            }
                            ";" === n ? (this[u] += F(this),
                            this.entity = "",
                            this.state = l) : v(this.entity.length ? y : m, n) ? this.entity += n : (x(this, "Invalid character in entity name"),
                            this[u] += "&" + this.entity + n,
                            this.entity = "",
                            this.state = l);
                            continue;
                        default:
                            throw new Error(this,"Unknown state: " + this.state)
                        }
                    this.position >= this.bufferCheckPosition && function(t) {
                        for (var a = Math.max(e.MAX_BUFFER_LENGTH, 10), n = 0, i = 0, o = r.length; i < o; i++) {
                            var s = t[r[i]].length;
                            if (s > a)
                                switch (r[i]) {
                                case "textNode":
                                    P(t);
                                    break;
                                case "cdata":
                                    I(t, "oncdata", t.cdata),
                                    t.cdata = "";
                                    break;
                                case "script":
                                    I(t, "onscript", t.script),
                                    t.script = "";
                                    break;
                                default:
                                    M(t, "Max buffer length exceeded: " + r[i])
                                }
                            n = Math.max(n, s)
                        }
                        var l = e.MAX_BUFFER_LENGTH - n;
                        t.bufferCheckPosition = l + t.position
                    }(this);
                    return this
                }/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
                ,
                resume: function() {
                    return this.error = null,
                    this
                },
                close: function() {
                    return this.write(null)
                },
                flush: function() {
                    var e;
                    P(e = this),
                    "" !== e.cdata && (I(e, "oncdata", e.cdata),
                    e.cdata = ""),
                    "" !== e.script && (I(e, "onscript", e.script),
                    e.script = "")
                }
            };
            try {
                t = a(!function() {
                    var e = new Error("Cannot find module 'stream'");
                    throw e.code = "MODULE_NOT_FOUND",
                    e
                }()).Stream
            } catch (e) {
                t = function() {}
            }
            var i = e.EVENTS.filter((function(e) {
                return "error" !== e && "end" !== e
            }
            ));
            function o(e, a) {
                if (!(this instanceof o))
                    return new o(e,a);
                t.apply(this),
                this._parser = new n(e,a),
                this.writable = !0,
                this.readable = !0;
                var r = this;
                this._parser.onend = function() {
                    r.emit("end")
                }
                ,
                this._parser.onerror = function(e) {
                    r.emit("error", e),
                    r._parser.error = null
                }
                ,
                this._decoder = null,
                i.forEach((function(e) {
                    Object.defineProperty(r, "on" + e, {
                        get: function() {
                            return r._parser["on" + e]
                        },
                        set: function(t) {
                            if (!t)
                                return r.removeAllListeners(e),
                                r._parser["on" + e] = t,
                                t;
                            r.on(e, t)
                        },
                        enumerable: !0,
                        configurable: !1
                    })
                }
                ))
            }
            o.prototype = Object.create(t.prototype, {
                constructor: {
                    value: o
                }
            }),
            o.prototype.write = function(e) {
                if ("function" == typeof Buffer && "function" == typeof Buffer.isBuffer && Buffer.isBuffer(e)) {
                    if (!this._decoder) {
                        var t = a(278).StringDecoder;
                        this._decoder = new t("utf8")
                    }
                    e = this._decoder.write(e)
                }
                return this._parser.write(e.toString()),
                this.emit("data", e),
                !0
            }
            ,
            o.prototype.end = function(e) {
                return e && e.length && this.write(e),
                this._parser.end(),
                !0
            }
            ,
            o.prototype.on = function(e, a) {
                var r = this;
                return r._parser["on" + e] || -1 === i.indexOf(e) || (r._parser["on" + e] = function() {
                    var t = 1 === arguments.length ? [arguments[0]] : Array.apply(null, arguments);
                    t.splice(0, 0, e),
                    r.emit.apply(r, t)
                }
                ),
                t.prototype.on.call(r, e, a)
            }
            ;
            var s = "\r\n\t "
              , l = "0124356789"
              , u = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
              , d = "'\""
              , c = s + ">"
              , f = "http://www.w3.org/XML/1998/namespace"
              , h = {
                xml: f,
                xmlns: "http://www.w3.org/2000/xmlns/"
            };
            s = _(s),
            l = _(l),
            u = _(u);
            var p = /[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/
              , g = /[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/
              , m = /[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/
              , y = /[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;
            function _(e) {
                return e.split("").reduce((function(e, t) {
                    return e[t] = !0,
                    e
                }
                ), {})
            }
            function v(e, t) {
                return function(e) {
                    return "[object RegExp]" === Object.prototype.toString.call(e)
                }(e) ? !!t.match(e) : e[t]
            }
            function b(e, t) {
                return !v(e, t)
            }
            d = _(d),
            c = _(c);
            var E, k, T, S = 0;
            for (var A in e.STATE = {
                BEGIN: S++,
                BEGIN_WHITESPACE: S++,
                TEXT: S++,
                TEXT_ENTITY: S++,
                OPEN_WAKA: S++,
                SGML_DECL: S++,
                SGML_DECL_QUOTED: S++,
                DOCTYPE: S++,
                DOCTYPE_QUOTED: S++,
                DOCTYPE_DTD: S++,
                DOCTYPE_DTD_QUOTED: S++,
                COMMENT_STARTING: S++,
                COMMENT: S++,
                COMMENT_ENDING: S++,
                COMMENT_ENDED: S++,
                CDATA: S++,
                CDATA_ENDING: S++,
                CDATA_ENDING_2: S++,
                PROC_INST: S++,
                PROC_INST_BODY: S++,
                PROC_INST_ENDING: S++,
                OPEN_TAG: S++,
                OPEN_TAG_SLASH: S++,
                ATTRIB: S++,
                ATTRIB_NAME: S++,
                ATTRIB_NAME_SAW_WHITE: S++,
                ATTRIB_VALUE: S++,
                ATTRIB_VALUE_QUOTED: S++,
                ATTRIB_VALUE_CLOSED: S++,
                ATTRIB_VALUE_UNQUOTED: S++,
                ATTRIB_VALUE_ENTITY_Q: S++,
                ATTRIB_VALUE_ENTITY_U: S++,
                CLOSE_TAG: S++,
                CLOSE_TAG_SAW_WHITE: S++,
                SCRIPT: S++,
                SCRIPT_ENDING: S++
            },
            e.XML_ENTITIES = {
                amp: "&",
                gt: ">",
                lt: "<",
                quot: '"',
                apos: "'"
            },
            e.ENTITIES = {
                amp: "&",
                gt: ">",
                lt: "<",
                quot: '"',
                apos: "'",
                AElig: 198,
                Aacute: 193,
                Acirc: 194,
                Agrave: 192,
                Aring: 197,
                Atilde: 195,
                Auml: 196,
                Ccedil: 199,
                ETH: 208,
                Eacute: 201,
                Ecirc: 202,
                Egrave: 200,
                Euml: 203,
                Iacute: 205,
                Icirc: 206,
                Igrave: 204,
                Iuml: 207,
                Ntilde: 209,
                Oacute: 211,
                Ocirc: 212,
                Ograve: 210,
                Oslash: 216,
                Otilde: 213,
                Ouml: 214,
                THORN: 222,
                Uacute: 218,
                Ucirc: 219,
                Ugrave: 217,
                Uuml: 220,
                Yacute: 221,
                aacute: 225,
                acirc: 226,
                aelig: 230,
                agrave: 224,
                aring: 229,
                atilde: 227,
                auml: 228,
                ccedil: 231,
                eacute: 233,
                ecirc: 234,
                egrave: 232,
                eth: 240,
                euml: 235,
                iacute: 237,
                icirc: 238,
                igrave: 236,
                iuml: 239,
                ntilde: 241,
                oacute: 243,
                ocirc: 244,
                ograve: 242,
                oslash: 248,
                otilde: 245,
                ouml: 246,
                szlig: 223,
                thorn: 254,
                uacute: 250,
                ucirc: 251,
                ugrave: 249,
                uuml: 252,
                yacute: 253,
                yuml: 255,
                copy: 169,
                reg: 174,
                nbsp: 160,
                iexcl: 161,
                cent: 162,
                pound: 163,
                curren: 164,
                yen: 165,
                brvbar: 166,
                sect: 167,
                uml: 168,
                ordf: 170,
                laquo: 171,
                not: 172,
                shy: 173,
                macr: 175,
                deg: 176,
                plusmn: 177,
                sup1: 185,
                sup2: 178,
                sup3: 179,
                acute: 180,
                micro: 181,
                para: 182,
                middot: 183,
                cedil: 184,
                ordm: 186,
                raquo: 187,
                frac14: 188,
                frac12: 189,
                frac34: 190,
                iquest: 191,
                times: 215,
                divide: 247,
                OElig: 338,
                oelig: 339,
                Scaron: 352,
                scaron: 353,
                Yuml: 376,
                fnof: 402,
                circ: 710,
                tilde: 732,
                Alpha: 913,
                Beta: 914,
                Gamma: 915,
                Delta: 916,
                Epsilon: 917,
                Zeta: 918,
                Eta: 919,
                Theta: 920,
                Iota: 921,
                Kappa: 922,
                Lambda: 923,
                Mu: 924,
                Nu: 925,
                Xi: 926,
                Omicron: 927,
                Pi: 928,
                Rho: 929,
                Sigma: 931,
                Tau: 932,
                Upsilon: 933,
                Phi: 934,
                Chi: 935,
                Psi: 936,
                Omega: 937,
                alpha: 945,
                beta: 946,
                gamma: 947,
                delta: 948,
                epsilon: 949,
                zeta: 950,
                eta: 951,
                theta: 952,
                iota: 953,
                kappa: 954,
                lambda: 955,
                mu: 956,
                nu: 957,
                xi: 958,
                omicron: 959,
                pi: 960,
                rho: 961,
                sigmaf: 962,
                sigma: 963,
                tau: 964,
                upsilon: 965,
                phi: 966,
                chi: 967,
                psi: 968,
                omega: 969,
                thetasym: 977,
                upsih: 978,
                piv: 982,
                ensp: 8194,
                emsp: 8195,
                thinsp: 8201,
                zwnj: 8204,
                zwj: 8205,
                lrm: 8206,
                rlm: 8207,
                ndash: 8211,
                mdash: 8212,
                lsquo: 8216,
                rsquo: 8217,
                sbquo: 8218,
                ldquo: 8220,
                rdquo: 8221,
                bdquo: 8222,
                dagger: 8224,
                Dagger: 8225,
                bull: 8226,
                hellip: 8230,
                permil: 8240,
                prime: 8242,
                Prime: 8243,
                lsaquo: 8249,
                rsaquo: 8250,
                oline: 8254,
                frasl: 8260,
                euro: 8364,
                image: 8465,
                weierp: 8472,
                real: 8476,
                trade: 8482,
                alefsym: 8501,
                larr: 8592,
                uarr: 8593,
                rarr: 8594,
                darr: 8595,
                harr: 8596,
                crarr: 8629,
                lArr: 8656,
                uArr: 8657,
                rArr: 8658,
                dArr: 8659,
                hArr: 8660,
                forall: 8704,
                part: 8706,
                exist: 8707,
                empty: 8709,
                nabla: 8711,
                isin: 8712,
                notin: 8713,
                ni: 8715,
                prod: 8719,
                sum: 8721,
                minus: 8722,
                lowast: 8727,
                radic: 8730,
                prop: 8733,
                infin: 8734,
                ang: 8736,
                and: 8743,
                or: 8744,
                cap: 8745,
                cup: 8746,
                int: 8747,
                there4: 8756,
                sim: 8764,
                cong: 8773,
                asymp: 8776,
                ne: 8800,
                equiv: 8801,
                le: 8804,
                ge: 8805,
                sub: 8834,
                sup: 8835,
                nsub: 8836,
                sube: 8838,
                supe: 8839,
                oplus: 8853,
                otimes: 8855,
                perp: 8869,
                sdot: 8901,
                lceil: 8968,
                rceil: 8969,
                lfloor: 8970,
                rfloor: 8971,
                lang: 9001,
                rang: 9002,
                loz: 9674,
                spades: 9824,
                clubs: 9827,
                hearts: 9829,
                diams: 9830
            },
            Object.keys(e.ENTITIES).forEach((function(t) {
                var a = e.ENTITIES[t]
                  , r = "number" == typeof a ? String.fromCharCode(a) : a;
                e.ENTITIES[t] = r
            }
            )),
            e.STATE)
                e.STATE[e.STATE[A]] = A;
            function C(e, t, a) {
                e[t] && e[t](a)
            }
            function I(e, t, a) {
                e.textNode && P(e),
                C(e, t, a)
            }
            function P(e) {
                e.textNode = w(e.opt, e.textNode),
                e.textNode && C(e, "ontext", e.textNode),
                e.textNode = ""
            }
            function w(e, t) {
                return e.trim && (t = t.trim()),
                e.normalize && (t = t.replace(/\s+/g, " ")),
                t
            }
            function M(e, t) {
                return P(e),
                e.trackPosition && (t += "\nLine: " + e.line + "\nColumn: " + e.column + "\nChar: " + e.c),
                t = new Error(t),
                e.error = t,
                C(e, "onerror", t),
                e
            }
            function R(e) {
                return e.sawRoot && !e.closedRoot && x(e, "Unclosed root tag"),
                e.state !== S.BEGIN && e.state !== S.BEGIN_WHITESPACE && e.state !== S.TEXT && M(e, "Unexpected end"),
                P(e),
                e.c = "",
                e.closed = !0,
                C(e, "onend"),
                n.call(e, e.strict, e.opt),
                e
            }
            function x(e, t) {
                if ("object" != typeof e || !(e instanceof n))
                    throw new Error("bad call to strictFail");
                e.strict && M(e, t)
            }
            function D(e) {
                e.strict || (e.tagName = e.tagName[e.looseCase]());
                var t = e.tags[e.tags.length - 1] || e
                  , a = e.tag = {
                    name: e.tagName,
                    attributes: {}
                };
                e.opt.xmlns && (a.ns = t.ns),
                e.attribList.length = 0,
                I(e, "onopentagstart", a)
            }
            function O(e, t) {
                var a = e.indexOf(":") < 0 ? ["", e] : e.split(":")
                  , r = a[0]
                  , n = a[1];
                return t && "xmlns" === e && (r = "xmlns",
                n = ""),
                {
                    prefix: r,
                    local: n
                }
            }
            function N(e) {
                if (e.strict || (e.attribName = e.attribName[e.looseCase]()),
                -1 !== e.attribList.indexOf(e.attribName) || e.tag.attributes.hasOwnProperty(e.attribName))
                    e.attribName = e.attribValue = "";
                else {
                    if (e.opt.xmlns) {
                        var t = O(e.attribName, !0)
                          , a = t.prefix
                          , r = t.local;
                        if ("xmlns" === a)
                            if ("xml" === r && e.attribValue !== f)
                                x(e, "xml: prefix must be bound to " + f + "\nActual: " + e.attribValue);
                            else if ("xmlns" === r && "http://www.w3.org/2000/xmlns/" !== e.attribValue)
                                x(e, "xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: " + e.attribValue);
                            else {
                                var n = e.tag
                                  , i = e.tags[e.tags.length - 1] || e;
                                n.ns === i.ns && (n.ns = Object.create(i.ns)),
                                n.ns[r] = e.attribValue
                            }
                        e.attribList.push([e.attribName, e.attribValue])
                    } else
                        e.tag.attributes[e.attribName] = e.attribValue,
                        I(e, "onattribute", {
                            name: e.attribName,
                            value: e.attribValue
                        });
                    e.attribName = e.attribValue = ""
                }
            }
            function L(e, t) {
                if (e.opt.xmlns) {
                    var a = e.tag
                      , r = O(e.tagName);
                    a.prefix = r.prefix,
                    a.local = r.local,
                    a.uri = a.ns[r.prefix] || "",
                    a.prefix && !a.uri && (x(e, "Unbound namespace prefix: " + JSON.stringify(e.tagName)),
                    a.uri = r.prefix);
                    var n = e.tags[e.tags.length - 1] || e;
                    a.ns && n.ns !== a.ns && Object.keys(a.ns).forEach((function(t) {
                        I(e, "onopennamespace", {
                            prefix: t,
                            uri: a.ns[t]
                        })
                    }
                    ));
                    for (var i = 0, o = e.attribList.length; i < o; i++) {
                        var s = e.attribList[i]
                          , l = s[0]
                          , u = s[1]
                          , d = O(l, !0)
                          , c = d.prefix
                          , f = d.local
                          , h = "" === c ? "" : a.ns[c] || ""
                          , p = {
                            name: l,
                            value: u,
                            prefix: c,
                            local: f,
                            uri: h
                        };
                        c && "xmlns" !== c && !h && (x(e, "Unbound namespace prefix: " + JSON.stringify(c)),
                        p.uri = c),
                        e.tag.attributes[l] = p,
                        I(e, "onattribute", p)
                    }
                    e.attribList.length = 0
                }
                e.tag.isSelfClosing = !!t,
                e.sawRoot = !0,
                e.tags.push(e.tag),
                I(e, "onopentag", e.tag),
                t || (e.noscript || "script" !== e.tagName.toLowerCase() ? e.state = S.TEXT : e.state = S.SCRIPT,
                e.tag = null,
                e.tagName = ""),
                e.attribName = e.attribValue = "",
                e.attribList.length = 0
            }
            function U(e) {
                if (!e.tagName)
                    return x(e, "Weird empty close tag."),
                    e.textNode += "</>",
                    void (e.state = S.TEXT);
                if (e.script) {
                    if ("script" !== e.tagName)
                        return e.script += "</" + e.tagName + ">",
                        e.tagName = "",
                        void (e.state = S.SCRIPT);
                    I(e, "onscript", e.script),
                    e.script = ""
                }
                var t = e.tags.length
                  , a = e.tagName;
                e.strict || (a = a[e.looseCase]());
                for (var r = a; t--; ) {
                    if (e.tags[t].name === r)
                        break;
                    x(e, "Unexpected close tag")
                }
                if (t < 0)
                    return x(e, "Unmatched closing tag: " + e.tagName),
                    e.textNode += "</" + e.tagName + ">",
                    void (e.state = S.TEXT);
                e.tagName = a;
                for (var n = e.tags.length; n-- > t; ) {
                    var i = e.tag = e.tags.pop();
                    e.tagName = e.tag.name,
                    I(e, "onclosetag", e.tagName);
                    var o = {};
                    for (var s in i.ns)
                        o[s] = i.ns[s];
                    var l = e.tags[e.tags.length - 1] || e;
                    e.opt.xmlns && i.ns !== l.ns && Object.keys(i.ns).forEach((function(t) {
                        var a = i.ns[t];
                        I(e, "onclosenamespace", {
                            prefix: t,
                            uri: a
                        })
                    }
                    ))
                }
                0 === t && (e.closedRoot = !0),
                e.tagName = e.attribValue = e.attribName = "",
                e.attribList.length = 0,
                e.state = S.TEXT
            }
            function F(e) {
                var t, a = e.entity, r = a.toLowerCase(), n = "";
                return e.ENTITIES[a] ? e.ENTITIES[a] : e.ENTITIES[r] ? e.ENTITIES[r] : ("#" === (a = r).charAt(0) && ("x" === a.charAt(1) ? (a = a.slice(2),
                n = (t = parseInt(a, 16)).toString(16)) : (a = a.slice(1),
                n = (t = parseInt(a, 10)).toString(10))),
                a = a.replace(/^0+/, ""),
                n.toLowerCase() !== a ? (x(e, "Invalid character entity"),
                "&" + e.entity + ";") : String.fromCodePoint(t))
            }
            function B(e, t) {
                "<" === t ? (e.state = S.OPEN_WAKA,
                e.startTagPosition = e.position) : b(s, t) && (x(e, "Non-whitespace before first tag."),
                e.textNode = t,
                e.state = S.TEXT)
            }
            function j(e, t) {
                var a = "";
                return t < e.length && (a = e.charAt(t)),
                a
            }
            S = e.STATE,
            String.fromCodePoint || (E = String.fromCharCode,
            k = Math.floor,
            T = function() {
                var e, t, a = 16384, r = [], n = -1, i = arguments.length;
                if (!i)
                    return "";
                for (var o = ""; ++n < i; ) {
                    var s = Number(arguments[n]);
                    if (!isFinite(s) || s < 0 || s > 1114111 || k(s) !== s)
                        throw RangeError("Invalid code point: " + s);
                    s <= 65535 ? r.push(s) : (e = 55296 + ((s -= 65536) >> 10),
                    t = s % 1024 + 56320,
                    r.push(e, t)),
                    (n + 1 === i || r.length > a) && (o += E.apply(null, r),
                    r.length = 0)
                }
                return o
            }
            ,
            Object.defineProperty ? Object.defineProperty(String, "fromCodePoint", {
                value: T,
                configurable: !0,
                writable: !0
            }) : String.fromCodePoint = T)
        }(t)
    }
    , function(e, t, a) {
        "use strict";
        var r = a(279).Buffer
          , n = r.isEncoding || function(e) {
            switch ((e = "" + e) && e.toLowerCase()) {
            case "hex":
            case "utf8":
            case "utf-8":
            case "ascii":
            case "binary":
            case "base64":
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
            case "raw":
                return !0;
            default:
                return !1
            }
        }
        ;
        function i(e) {
            var t;
            switch (this.encoding = function(e) {
                var t = function(e) {
                    if (!e)
                        return "utf8";
                    for (var t; ; )
                        switch (e) {
                        case "utf8":
                        case "utf-8":
                            return "utf8";
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                            return "utf16le";
                        case "latin1":
                        case "binary":
                            return "latin1";
                        case "base64":
                        case "ascii":
                        case "hex":
                            return e;
                        default:
                            if (t)
                                return;
                            e = ("" + e).toLowerCase(),
                            t = !0
                        }
                }(e);
                if ("string" != typeof t && (r.isEncoding === n || !n(e)))
                    throw new Error("Unknown encoding: " + e);
                return t || e
            }(e),
            this.encoding) {
            case "utf16le":
                this.text = l,
                this.end = u,
                t = 4;
                break;
            case "utf8":
                this.fillLast = s,
                t = 4;
                break;
            case "base64":
                this.text = d,
                this.end = c,
                t = 3;
                break;
            default:
                return this.write = f,
                void (this.end = h)
            }
            this.lastNeed = 0,
            this.lastTotal = 0,
            this.lastChar = r.allocUnsafe(t)
        }
        function o(e) {
            return e <= 127 ? 0 : e >> 5 == 6 ? 2 : e >> 4 == 14 ? 3 : e >> 3 == 30 ? 4 : e >> 6 == 2 ? -1 : -2
        }
        function s(e) {
            var t = this.lastTotal - this.lastNeed
              , a = function(e, t, a) {
                if (128 != (192 & t[0]))
                    return e.lastNeed = 0,
                    "";
                if (e.lastNeed > 1 && t.length > 1) {
                    if (128 != (192 & t[1]))
                        return e.lastNeed = 1,
                        "";
                    if (e.lastNeed > 2 && t.length > 2 && 128 != (192 & t[2]))
                        return e.lastNeed = 2,
                        ""
                }
            }(this, e);
            return void 0 !== a ? a : this.lastNeed <= e.length ? (e.copy(this.lastChar, t, 0, this.lastNeed),
            this.lastChar.toString(this.encoding, 0, this.lastTotal)) : (e.copy(this.lastChar, t, 0, e.length),
            void (this.lastNeed -= e.length))
        }
        function l(e, t) {
            if ((e.length - t) % 2 == 0) {
                var a = e.toString("utf16le", t);
                if (a) {
                    var r = a.charCodeAt(a.length - 1);
                    if (r >= 55296 && r <= 56319)
                        return this.lastNeed = 2,
                        this.lastTotal = 4,
                        this.lastChar[0] = e[e.length - 2],
                        this.lastChar[1] = e[e.length - 1],
                        a.slice(0, -1)
                }
                return a
            }
            return this.lastNeed = 1,
            this.lastTotal = 2,
            this.lastChar[0] = e[e.length - 1],
            e.toString("utf16le", t, e.length - 1)
        }
        function u(e) {
            var t = e && e.length ? this.write(e) : "";
            if (this.lastNeed) {
                var a = this.lastTotal - this.lastNeed;
                return t + this.lastChar.toString("utf16le", 0, a)
            }
            return t
        }
        function d(e, t) {
            var a = (e.length - t) % 3;
            return 0 === a ? e.toString("base64", t) : (this.lastNeed = 3 - a,
            this.lastTotal = 3,
            1 === a ? this.lastChar[0] = e[e.length - 1] : (this.lastChar[0] = e[e.length - 2],
            this.lastChar[1] = e[e.length - 1]),
            e.toString("base64", t, e.length - a))
        }
        function c(e) {
            var t = e && e.length ? this.write(e) : "";
            return this.lastNeed ? t + this.lastChar.toString("base64", 0, 3 - this.lastNeed) : t
        }
        function f(e) {
            return e.toString(this.encoding)
        }
        function h(e) {
            return e && e.length ? this.write(e) : ""
        }
        t.StringDecoder = i,
        i.prototype.write = function(e) {
            if (0 === e.length)
                return "";
            var t, a;
            if (this.lastNeed) {
                if (void 0 === (t = this.fillLast(e)))
                    return "";
                a = this.lastNeed,
                this.lastNeed = 0
            } else
                a = 0;
            return a < e.length ? t ? t + this.text(e, a) : this.text(e, a) : t || ""
        }
        ,
        i.prototype.end = function(e) {
            var t = e && e.length ? this.write(e) : "";
            return this.lastNeed ? t + "" : t
        }
        ,
        i.prototype.text = function(e, t) {
            var a = function(e, t, a) {
                var r = t.length - 1;
                if (r < a)
                    return 0;
                var n = o(t[r]);
                if (n >= 0)
                    return n > 0 && (e.lastNeed = n - 1),
                    n;
                if (--r < a || -2 === n)
                    return 0;
                if ((n = o(t[r])) >= 0)
                    return n > 0 && (e.lastNeed = n - 2),
                    n;
                if (--r < a || -2 === n)
                    return 0;
                if ((n = o(t[r])) >= 0)
                    return n > 0 && (2 === n ? n = 0 : e.lastNeed = n - 3),
                    n;
                return 0
            }(this, e, t);
            if (!this.lastNeed)
                return e.toString("utf8", t);
            this.lastTotal = a;
            var r = e.length - (a - this.lastNeed);
            return e.copy(this.lastChar, 0, r),
            e.toString("utf8", t, r)
        }
        ,
        i.prototype.fillLast = function(e) {
            if (this.lastNeed <= e.length)
                return e.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed),
                this.lastChar.toString(this.encoding, 0, this.lastTotal);
            e.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, e.length),
            this.lastNeed -= e.length
        }
    }
    , function(e, t, a) {
        var r = a(280)
          , n = r.Buffer;
        function i(e, t) {
            for (var a in e)
                t[a] = e[a]
        }
        function o(e, t, a) {
            return n(e, t, a)
        }
        n.from && n.alloc && n.allocUnsafe && n.allocUnsafeSlow ? e.exports = r : (i(r, t),
        t.Buffer = o),
        i(n, o),
        o.from = function(e, t, a) {
            if ("number" == typeof e)
                throw new TypeError("Argument must not be a number");
            return n(e, t, a)
        }
        ,
        o.alloc = function(e, t, a) {
            if ("number" != typeof e)
                throw new TypeError("Argument must be a number");
            var r = n(e);
            return void 0 !== t ? "string" == typeof a ? r.fill(t, a) : r.fill(t) : r.fill(0),
            r
        }
        ,
        o.allocUnsafe = function(e) {
            if ("number" != typeof e)
                throw new TypeError("Argument must be a number");
            return n(e)
        }
        ,
        o.allocUnsafeSlow = function(e) {
            if ("number" != typeof e)
                throw new TypeError("Argument must be a number");
            return r.SlowBuffer(e)
        }
    }
    , function(e, t, a) {
        "use strict";
        /*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
        var r = a(281)
          , n = a(282)
          , i = a(283);
        function o() {
            return l.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823
        }
        function s(e, t) {
            if (o() < t)
                throw new RangeError("Invalid typed array length");
            return l.TYPED_ARRAY_SUPPORT ? (e = new Uint8Array(t)).__proto__ = l.prototype : (null === e && (e = new l(t)),
            e.length = t),
            e
        }
        function l(e, t, a) {
            if (!(l.TYPED_ARRAY_SUPPORT || this instanceof l))
                return new l(e,t,a);
            if ("number" == typeof e) {
                if ("string" == typeof t)
                    throw new Error("If encoding is specified then the first argument must be a string");
                return c(this, e)
            }
            return u(this, e, t, a)
        }
        function u(e, t, a, r) {
            if ("number" == typeof t)
                throw new TypeError('"value" argument must not be a number');
            return "undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer ? function(e, t, a, r) {
                if (t.byteLength,
                a < 0 || t.byteLength < a)
                    throw new RangeError("'offset' is out of bounds");
                if (t.byteLength < a + (r || 0))
                    throw new RangeError("'length' is out of bounds");
                t = void 0 === a && void 0 === r ? new Uint8Array(t) : void 0 === r ? new Uint8Array(t,a) : new Uint8Array(t,a,r);
                l.TYPED_ARRAY_SUPPORT ? (e = t).__proto__ = l.prototype : e = f(e, t);
                return e
            }(e, t, a, r) : "string" == typeof t ? function(e, t, a) {
                "string" == typeof a && "" !== a || (a = "utf8");
                if (!l.isEncoding(a))
                    throw new TypeError('"encoding" must be a valid string encoding');
                var r = 0 | p(t, a)
                  , n = (e = s(e, r)).write(t, a);
                n !== r && (e = e.slice(0, n));
                return e
            }(e, t, a) : function(e, t) {
                if (l.isBuffer(t)) {
                    var a = 0 | h(t.length);
                    return 0 === (e = s(e, a)).length || t.copy(e, 0, 0, a),
                    e
                }
                if (t) {
                    if ("undefined" != typeof ArrayBuffer && t.buffer instanceof ArrayBuffer || "length"in t)
                        return "number" != typeof t.length || (r = t.length) != r ? s(e, 0) : f(e, t);
                    if ("Buffer" === t.type && i(t.data))
                        return f(e, t.data)
                }
                var r;
                throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")
            }(e, t)
        }
        function d(e) {
            if ("number" != typeof e)
                throw new TypeError('"size" argument must be a number');
            if (e < 0)
                throw new RangeError('"size" argument must not be negative')
        }
        function c(e, t) {
            if (d(t),
            e = s(e, t < 0 ? 0 : 0 | h(t)),
            !l.TYPED_ARRAY_SUPPORT)
                for (var a = 0; a < t; ++a)
                    e[a] = 0;
            return e
        }
        function f(e, t) {
            var a = t.length < 0 ? 0 : 0 | h(t.length);
            e = s(e, a);
            for (var r = 0; r < a; r += 1)
                e[r] = 255 & t[r];
            return e
        }
        function h(e) {
            if (e >= o())
                throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + o().toString(16) + " bytes");
            return 0 | e
        }
        function p(e, t) {
            if (l.isBuffer(e))
                return e.length;
            if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(e) || e instanceof ArrayBuffer))
                return e.byteLength;
            "string" != typeof e && (e = "" + e);
            var a = e.length;
            if (0 === a)
                return 0;
            for (var r = !1; ; )
                switch (t) {
                case "ascii":
                case "latin1":
                case "binary":
                    return a;
                case "utf8":
                case "utf-8":
                case void 0:
                    return j(e).length;
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return 2 * a;
                case "hex":
                    return a >>> 1;
                case "base64":
                    return G(e).length;
                default:
                    if (r)
                        return j(e).length;
                    t = ("" + t).toLowerCase(),
                    r = !0
                }
        }
        function g(e, t, a) {
            var r = !1;
            if ((void 0 === t || t < 0) && (t = 0),
            t > this.length)
                return "";
            if ((void 0 === a || a > this.length) && (a = this.length),
            a <= 0)
                return "";
            if ((a >>>= 0) <= (t >>>= 0))
                return "";
            for (e || (e = "utf8"); ; )
                switch (e) {
                case "hex":
                    return w(this, t, a);
                case "utf8":
                case "utf-8":
                    return C(this, t, a);
                case "ascii":
                    return I(this, t, a);
                case "latin1":
                case "binary":
                    return P(this, t, a);
                case "base64":
                    return A(this, t, a);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return M(this, t, a);
                default:
                    if (r)
                        throw new TypeError("Unknown encoding: " + e);
                    e = (e + "").toLowerCase(),
                    r = !0
                }
        }
        function m(e, t, a) {
            var r = e[t];
            e[t] = e[a],
            e[a] = r
        }
        function y(e, t, a, r, n) {
            if (0 === e.length)
                return -1;
            if ("string" == typeof a ? (r = a,
            a = 0) : a > 2147483647 ? a = 2147483647 : a < -2147483648 && (a = -2147483648),
            a = +a,
            isNaN(a) && (a = n ? 0 : e.length - 1),
            a < 0 && (a = e.length + a),
            a >= e.length) {
                if (n)
                    return -1;
                a = e.length - 1
            } else if (a < 0) {
                if (!n)
                    return -1;
                a = 0
            }
            if ("string" == typeof t && (t = l.from(t, r)),
            l.isBuffer(t))
                return 0 === t.length ? -1 : _(e, t, a, r, n);
            if ("number" == typeof t)
                return t &= 255,
                l.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? n ? Uint8Array.prototype.indexOf.call(e, t, a) : Uint8Array.prototype.lastIndexOf.call(e, t, a) : _(e, [t], a, r, n);
            throw new TypeError("val must be string, number or Buffer")
        }
        function _(e, t, a, r, n) {
            var i, o = 1, s = e.length, l = t.length;
            if (void 0 !== r && ("ucs2" === (r = String(r).toLowerCase()) || "ucs-2" === r || "utf16le" === r || "utf-16le" === r)) {
                if (e.length < 2 || t.length < 2)
                    return -1;
                o = 2,
                s /= 2,
                l /= 2,
                a /= 2
            }
            function u(e, t) {
                return 1 === o ? e[t] : e.readUInt16BE(t * o)
            }
            if (n) {
                var d = -1;
                for (i = a; i < s; i++)
                    if (u(e, i) === u(t, -1 === d ? 0 : i - d)) {
                        if (-1 === d && (d = i),
                        i - d + 1 === l)
                            return d * o
                    } else
                        -1 !== d && (i -= i - d),
                        d = -1
            } else
                for (a + l > s && (a = s - l),
                i = a; i >= 0; i--) {
                    for (var c = !0, f = 0; f < l; f++)
                        if (u(e, i + f) !== u(t, f)) {
                            c = !1;
                            break
                        }
                    if (c)
                        return i
                }
            return -1
        }
        function v(e, t, a, r) {
            a = Number(a) || 0;
            var n = e.length - a;
            r ? (r = Number(r)) > n && (r = n) : r = n;
            var i = t.length;
            if (i % 2 != 0)
                throw new TypeError("Invalid hex string");
            r > i / 2 && (r = i / 2);
            for (var o = 0; o < r; ++o) {
                var s = parseInt(t.substr(2 * o, 2), 16);
                if (isNaN(s))
                    return o;
                e[a + o] = s
            }
            return o
        }
        function b(e, t, a, r) {
            return V(j(t, e.length - a), e, a, r)
        }
        function E(e, t, a, r) {
            return V(function(e) {
                for (var t = [], a = 0; a < e.length; ++a)
                    t.push(255 & e.charCodeAt(a));
                return t
            }(t), e, a, r)
        }
        function k(e, t, a, r) {
            return E(e, t, a, r)
        }
        function T(e, t, a, r) {
            return V(G(t), e, a, r)
        }
        function S(e, t, a, r) {
            return V(function(e, t) {
                for (var a, r, n, i = [], o = 0; o < e.length && !((t -= 2) < 0); ++o)
                    a = e.charCodeAt(o),
                    r = a >> 8,
                    n = a % 256,
                    i.push(n),
                    i.push(r);
                return i
            }(t, e.length - a), e, a, r)
        }
        function A(e, t, a) {
            return 0 === t && a === e.length ? r.fromByteArray(e) : r.fromByteArray(e.slice(t, a))
        }
        function C(e, t, a) {
            a = Math.min(e.length, a);
            for (var r = [], n = t; n < a; ) {
                var i, o, s, l, u = e[n], d = null, c = u > 239 ? 4 : u > 223 ? 3 : u > 191 ? 2 : 1;
                if (n + c <= a)
                    switch (c) {
                    case 1:
                        u < 128 && (d = u);
                        break;
                    case 2:
                        128 == (192 & (i = e[n + 1])) && (l = (31 & u) << 6 | 63 & i) > 127 && (d = l);
                        break;
                    case 3:
                        i = e[n + 1],
                        o = e[n + 2],
                        128 == (192 & i) && 128 == (192 & o) && (l = (15 & u) << 12 | (63 & i) << 6 | 63 & o) > 2047 && (l < 55296 || l > 57343) && (d = l);
                        break;
                    case 4:
                        i = e[n + 1],
                        o = e[n + 2],
                        s = e[n + 3],
                        128 == (192 & i) && 128 == (192 & o) && 128 == (192 & s) && (l = (15 & u) << 18 | (63 & i) << 12 | (63 & o) << 6 | 63 & s) > 65535 && l < 1114112 && (d = l)
                    }
                null === d ? (d = 65533,
                c = 1) : d > 65535 && (d -= 65536,
                r.push(d >>> 10 & 1023 | 55296),
                d = 56320 | 1023 & d),
                r.push(d),
                n += c
            }
            return function(e) {
                var t = e.length;
                if (t <= 4096)
                    return String.fromCharCode.apply(String, e);
                var a = ""
                  , r = 0;
                for (; r < t; )
                    a += String.fromCharCode.apply(String, e.slice(r, r += 4096));
                return a
            }(r)
        }
        t.Buffer = l,
        t.SlowBuffer = function(e) {
            +e != e && (e = 0);
            return l.alloc(+e)
        }
        ,
        t.INSPECT_MAX_BYTES = 50,
        l.TYPED_ARRAY_SUPPORT = void 0 !== global.TYPED_ARRAY_SUPPORT ? global.TYPED_ARRAY_SUPPORT : function() {
            try {
                var e = new Uint8Array(1);
                return e.__proto__ = {
                    __proto__: Uint8Array.prototype,
                    foo: function() {
                        return 42
                    }
                },
                42 === e.foo() && "function" == typeof e.subarray && 0 === e.subarray(1, 1).byteLength
            } catch (e) {
                return !1
            }
        }(),
        t.kMaxLength = o(),
        l.poolSize = 8192,
        l._augment = function(e) {
            return e.__proto__ = l.prototype,
            e
        }
        ,
        l.from = function(e, t, a) {
            return u(null, e, t, a)
        }
        ,
        l.TYPED_ARRAY_SUPPORT && (l.prototype.__proto__ = Uint8Array.prototype,
        l.__proto__ = Uint8Array,
        "undefined" != typeof Symbol && Symbol.species && l[Symbol.species] === l && Object.defineProperty(l, Symbol.species, {
            value: null,
            configurable: !0
        })),
        l.alloc = function(e, t, a) {
            return function(e, t, a, r) {
                return d(t),
                t <= 0 ? s(e, t) : void 0 !== a ? "string" == typeof r ? s(e, t).fill(a, r) : s(e, t).fill(a) : s(e, t)
            }(null, e, t, a)
        }
        ,
        l.allocUnsafe = function(e) {
            return c(null, e)
        }
        ,
        l.allocUnsafeSlow = function(e) {
            return c(null, e)
        }
        ,
        l.isBuffer = function(e) {
            return !(null == e || !e._isBuffer)
        }
        ,
        l.compare = function(e, t) {
            if (!l.isBuffer(e) || !l.isBuffer(t))
                throw new TypeError("Arguments must be Buffers");
            if (e === t)
                return 0;
            for (var a = e.length, r = t.length, n = 0, i = Math.min(a, r); n < i; ++n)
                if (e[n] !== t[n]) {
                    a = e[n],
                    r = t[n];
                    break
                }
            return a < r ? -1 : r < a ? 1 : 0
        }
        ,
        l.isEncoding = function(e) {
            switch (String(e).toLowerCase()) {
            case "hex":
            case "utf8":
            case "utf-8":
            case "ascii":
            case "latin1":
            case "binary":
            case "base64":
            case "ucs2":
            case "ucs-2":
            case "utf16le":
            case "utf-16le":
                return !0;
            default:
                return !1
            }
        }
        ,
        l.concat = function(e, t) {
            if (!i(e))
                throw new TypeError('"list" argument must be an Array of Buffers');
            if (0 === e.length)
                return l.alloc(0);
            var a;
            if (void 0 === t)
                for (t = 0,
                a = 0; a < e.length; ++a)
                    t += e[a].length;
            var r = l.allocUnsafe(t)
              , n = 0;
            for (a = 0; a < e.length; ++a) {
                var o = e[a];
                if (!l.isBuffer(o))
                    throw new TypeError('"list" argument must be an Array of Buffers');
                o.copy(r, n),
                n += o.length
            }
            return r
        }
        ,
        l.byteLength = p,
        l.prototype._isBuffer = !0,
        l.prototype.swap16 = function() {
            var e = this.length;
            if (e % 2 != 0)
                throw new RangeError("Buffer size must be a multiple of 16-bits");
            for (var t = 0; t < e; t += 2)
                m(this, t, t + 1);
            return this
        }
        ,
        l.prototype.swap32 = function() {
            var e = this.length;
            if (e % 4 != 0)
                throw new RangeError("Buffer size must be a multiple of 32-bits");
            for (var t = 0; t < e; t += 4)
                m(this, t, t + 3),
                m(this, t + 1, t + 2);
            return this
        }
        ,
        l.prototype.swap64 = function() {
            var e = this.length;
            if (e % 8 != 0)
                throw new RangeError("Buffer size must be a multiple of 64-bits");
            for (var t = 0; t < e; t += 8)
                m(this, t, t + 7),
                m(this, t + 1, t + 6),
                m(this, t + 2, t + 5),
                m(this, t + 3, t + 4);
            return this
        }
        ,
        l.prototype.toString = function() {
            var e = 0 | this.length;
            return 0 === e ? "" : 0 === arguments.length ? C(this, 0, e) : g.apply(this, arguments)
        }
        ,
        l.prototype.equals = function(e) {
            if (!l.isBuffer(e))
                throw new TypeError("Argument must be a Buffer");
            return this === e || 0 === l.compare(this, e)
        }
        ,
        l.prototype.inspect = function() {
            var e = ""
              , a = t.INSPECT_MAX_BYTES;
            return this.length > 0 && (e = this.toString("hex", 0, a).match(/.{2}/g).join(" "),
            this.length > a && (e += " ... ")),
            "<Buffer " + e + ">"
        }
        ,
        l.prototype.compare = function(e, t, a, r, n) {
            if (!l.isBuffer(e))
                throw new TypeError("Argument must be a Buffer");
            if (void 0 === t && (t = 0),
            void 0 === a && (a = e ? e.length : 0),
            void 0 === r && (r = 0),
            void 0 === n && (n = this.length),
            t < 0 || a > e.length || r < 0 || n > this.length)
                throw new RangeError("out of range index");
            if (r >= n && t >= a)
                return 0;
            if (r >= n)
                return -1;
            if (t >= a)
                return 1;
            if (this === e)
                return 0;
            for (var i = (n >>>= 0) - (r >>>= 0), o = (a >>>= 0) - (t >>>= 0), s = Math.min(i, o), u = this.slice(r, n), d = e.slice(t, a), c = 0; c < s; ++c)
                if (u[c] !== d[c]) {
                    i = u[c],
                    o = d[c];
                    break
                }
            return i < o ? -1 : o < i ? 1 : 0
        }
        ,
        l.prototype.includes = function(e, t, a) {
            return -1 !== this.indexOf(e, t, a)
        }
        ,
        l.prototype.indexOf = function(e, t, a) {
            return y(this, e, t, a, !0)
        }
        ,
        l.prototype.lastIndexOf = function(e, t, a) {
            return y(this, e, t, a, !1)
        }
        ,
        l.prototype.write = function(e, t, a, r) {
            if (void 0 === t)
                r = "utf8",
                a = this.length,
                t = 0;
            else if (void 0 === a && "string" == typeof t)
                r = t,
                a = this.length,
                t = 0;
            else {
                if (!isFinite(t))
                    throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                t |= 0,
                isFinite(a) ? (a |= 0,
                void 0 === r && (r = "utf8")) : (r = a,
                a = void 0)
            }
            var n = this.length - t;
            if ((void 0 === a || a > n) && (a = n),
            e.length > 0 && (a < 0 || t < 0) || t > this.length)
                throw new RangeError("Attempt to write outside buffer bounds");
            r || (r = "utf8");
            for (var i = !1; ; )
                switch (r) {
                case "hex":
                    return v(this, e, t, a);
                case "utf8":
                case "utf-8":
                    return b(this, e, t, a);
                case "ascii":
                    return E(this, e, t, a);
                case "latin1":
                case "binary":
                    return k(this, e, t, a);
                case "base64":
                    return T(this, e, t, a);
                case "ucs2":
                case "ucs-2":
                case "utf16le":
                case "utf-16le":
                    return S(this, e, t, a);
                default:
                    if (i)
                        throw new TypeError("Unknown encoding: " + r);
                    r = ("" + r).toLowerCase(),
                    i = !0
                }
        }
        ,
        l.prototype.toJSON = function() {
            return {
                type: "Buffer",
                data: Array.prototype.slice.call(this._arr || this, 0)
            }
        }
        ;
        function I(e, t, a) {
            var r = "";
            a = Math.min(e.length, a);
            for (var n = t; n < a; ++n)
                r += String.fromCharCode(127 & e[n]);
            return r
        }
        function P(e, t, a) {
            var r = "";
            a = Math.min(e.length, a);
            for (var n = t; n < a; ++n)
                r += String.fromCharCode(e[n]);
            return r
        }
        function w(e, t, a) {
            var r = e.length;
            (!t || t < 0) && (t = 0),
            (!a || a < 0 || a > r) && (a = r);
            for (var n = "", i = t; i < a; ++i)
                n += B(e[i]);
            return n
        }
        function M(e, t, a) {
            for (var r = e.slice(t, a), n = "", i = 0; i < r.length; i += 2)
                n += String.fromCharCode(r[i] + 256 * r[i + 1]);
            return n
        }
        function R(e, t, a) {
            if (e % 1 != 0 || e < 0)
                throw new RangeError("offset is not uint");
            if (e + t > a)
                throw new RangeError("Trying to access beyond buffer length")
        }
        function x(e, t, a, r, n, i) {
            if (!l.isBuffer(e))
                throw new TypeError('"buffer" argument must be a Buffer instance');
            if (t > n || t < i)
                throw new RangeError('"value" argument is out of bounds');
            if (a + r > e.length)
                throw new RangeError("Index out of range")
        }
        function D(e, t, a, r) {
            t < 0 && (t = 65535 + t + 1);
            for (var n = 0, i = Math.min(e.length - a, 2); n < i; ++n)
                e[a + n] = (t & 255 << 8 * (r ? n : 1 - n)) >>> 8 * (r ? n : 1 - n)
        }
        function O(e, t, a, r) {
            t < 0 && (t = 4294967295 + t + 1);
            for (var n = 0, i = Math.min(e.length - a, 4); n < i; ++n)
                e[a + n] = t >>> 8 * (r ? n : 3 - n) & 255
        }
        function N(e, t, a, r, n, i) {
            if (a + r > e.length)
                throw new RangeError("Index out of range");
            if (a < 0)
                throw new RangeError("Index out of range")
        }
        function L(e, t, a, r, i) {
            return i || N(e, 0, a, 4),
            n.write(e, t, a, r, 23, 4),
            a + 4
        }
        function U(e, t, a, r, i) {
            return i || N(e, 0, a, 8),
            n.write(e, t, a, r, 52, 8),
            a + 8
        }
        l.prototype.slice = function(e, t) {
            var a, r = this.length;
            if ((e = ~~e) < 0 ? (e += r) < 0 && (e = 0) : e > r && (e = r),
            (t = void 0 === t ? r : ~~t) < 0 ? (t += r) < 0 && (t = 0) : t > r && (t = r),
            t < e && (t = e),
            l.TYPED_ARRAY_SUPPORT)
                (a = this.subarray(e, t)).__proto__ = l.prototype;
            else {
                var n = t - e;
                a = new l(n,void 0);
                for (var i = 0; i < n; ++i)
                    a[i] = this[i + e]
            }
            return a
        }
        ,
        l.prototype.readUIntLE = function(e, t, a) {
            e |= 0,
            t |= 0,
            a || R(e, t, this.length);
            for (var r = this[e], n = 1, i = 0; ++i < t && (n *= 256); )
                r += this[e + i] * n;
            return r
        }
        ,
        l.prototype.readUIntBE = function(e, t, a) {
            e |= 0,
            t |= 0,
            a || R(e, t, this.length);
            for (var r = this[e + --t], n = 1; t > 0 && (n *= 256); )
                r += this[e + --t] * n;
            return r
        }
        ,
        l.prototype.readUInt8 = function(e, t) {
            return t || R(e, 1, this.length),
            this[e]
        }
        ,
        l.prototype.readUInt16LE = function(e, t) {
            return t || R(e, 2, this.length),
            this[e] | this[e + 1] << 8
        }
        ,
        l.prototype.readUInt16BE = function(e, t) {
            return t || R(e, 2, this.length),
            this[e] << 8 | this[e + 1]
        }
        ,
        l.prototype.readUInt32LE = function(e, t) {
            return t || R(e, 4, this.length),
            (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + 16777216 * this[e + 3]
        }
        ,
        l.prototype.readUInt32BE = function(e, t) {
            return t || R(e, 4, this.length),
            16777216 * this[e] + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3])
        }
        ,
        l.prototype.readIntLE = function(e, t, a) {
            e |= 0,
            t |= 0,
            a || R(e, t, this.length);
            for (var r = this[e], n = 1, i = 0; ++i < t && (n *= 256); )
                r += this[e + i] * n;
            return r >= (n *= 128) && (r -= Math.pow(2, 8 * t)),
            r
        }
        ,
        l.prototype.readIntBE = function(e, t, a) {
            e |= 0,
            t |= 0,
            a || R(e, t, this.length);
            for (var r = t, n = 1, i = this[e + --r]; r > 0 && (n *= 256); )
                i += this[e + --r] * n;
            return i >= (n *= 128) && (i -= Math.pow(2, 8 * t)),
            i
        }
        ,
        l.prototype.readInt8 = function(e, t) {
            return t || R(e, 1, this.length),
            128 & this[e] ? -1 * (255 - this[e] + 1) : this[e]
        }
        ,
        l.prototype.readInt16LE = function(e, t) {
            t || R(e, 2, this.length);
            var a = this[e] | this[e + 1] << 8;
            return 32768 & a ? 4294901760 | a : a
        }
        ,
        l.prototype.readInt16BE = function(e, t) {
            t || R(e, 2, this.length);
            var a = this[e + 1] | this[e] << 8;
            return 32768 & a ? 4294901760 | a : a
        }
        ,
        l.prototype.readInt32LE = function(e, t) {
            return t || R(e, 4, this.length),
            this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24
        }
        ,
        l.prototype.readInt32BE = function(e, t) {
            return t || R(e, 4, this.length),
            this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]
        }
        ,
        l.prototype.readFloatLE = function(e, t) {
            return t || R(e, 4, this.length),
            n.read(this, e, !0, 23, 4)
        }
        ,
        l.prototype.readFloatBE = function(e, t) {
            return t || R(e, 4, this.length),
            n.read(this, e, !1, 23, 4)
        }
        ,
        l.prototype.readDoubleLE = function(e, t) {
            return t || R(e, 8, this.length),
            n.read(this, e, !0, 52, 8)
        }
        ,
        l.prototype.readDoubleBE = function(e, t) {
            return t || R(e, 8, this.length),
            n.read(this, e, !1, 52, 8)
        }
        ,
        l.prototype.writeUIntLE = function(e, t, a, r) {
            (e = +e,
            t |= 0,
            a |= 0,
            r) || x(this, e, t, a, Math.pow(2, 8 * a) - 1, 0);
            var n = 1
              , i = 0;
            for (this[t] = 255 & e; ++i < a && (n *= 256); )
                this[t + i] = e / n & 255;
            return t + a
        }
        ,
        l.prototype.writeUIntBE = function(e, t, a, r) {
            (e = +e,
            t |= 0,
            a |= 0,
            r) || x(this, e, t, a, Math.pow(2, 8 * a) - 1, 0);
            var n = a - 1
              , i = 1;
            for (this[t + n] = 255 & e; --n >= 0 && (i *= 256); )
                this[t + n] = e / i & 255;
            return t + a
        }
        ,
        l.prototype.writeUInt8 = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 1, 255, 0),
            l.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)),
            this[t] = 255 & e,
            t + 1
        }
        ,
        l.prototype.writeUInt16LE = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 2, 65535, 0),
            l.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e,
            this[t + 1] = e >>> 8) : D(this, e, t, !0),
            t + 2
        }
        ,
        l.prototype.writeUInt16BE = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 2, 65535, 0),
            l.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 8,
            this[t + 1] = 255 & e) : D(this, e, t, !1),
            t + 2
        }
        ,
        l.prototype.writeUInt32LE = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 4, 4294967295, 0),
            l.TYPED_ARRAY_SUPPORT ? (this[t + 3] = e >>> 24,
            this[t + 2] = e >>> 16,
            this[t + 1] = e >>> 8,
            this[t] = 255 & e) : O(this, e, t, !0),
            t + 4
        }
        ,
        l.prototype.writeUInt32BE = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 4, 4294967295, 0),
            l.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 24,
            this[t + 1] = e >>> 16,
            this[t + 2] = e >>> 8,
            this[t + 3] = 255 & e) : O(this, e, t, !1),
            t + 4
        }
        ,
        l.prototype.writeIntLE = function(e, t, a, r) {
            if (e = +e,
            t |= 0,
            !r) {
                var n = Math.pow(2, 8 * a - 1);
                x(this, e, t, a, n - 1, -n)
            }
            var i = 0
              , o = 1
              , s = 0;
            for (this[t] = 255 & e; ++i < a && (o *= 256); )
                e < 0 && 0 === s && 0 !== this[t + i - 1] && (s = 1),
                this[t + i] = (e / o >> 0) - s & 255;
            return t + a
        }
        ,
        l.prototype.writeIntBE = function(e, t, a, r) {
            if (e = +e,
            t |= 0,
            !r) {
                var n = Math.pow(2, 8 * a - 1);
                x(this, e, t, a, n - 1, -n)
            }
            var i = a - 1
              , o = 1
              , s = 0;
            for (this[t + i] = 255 & e; --i >= 0 && (o *= 256); )
                e < 0 && 0 === s && 0 !== this[t + i + 1] && (s = 1),
                this[t + i] = (e / o >> 0) - s & 255;
            return t + a
        }
        ,
        l.prototype.writeInt8 = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 1, 127, -128),
            l.TYPED_ARRAY_SUPPORT || (e = Math.floor(e)),
            e < 0 && (e = 255 + e + 1),
            this[t] = 255 & e,
            t + 1
        }
        ,
        l.prototype.writeInt16LE = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 2, 32767, -32768),
            l.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e,
            this[t + 1] = e >>> 8) : D(this, e, t, !0),
            t + 2
        }
        ,
        l.prototype.writeInt16BE = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 2, 32767, -32768),
            l.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 8,
            this[t + 1] = 255 & e) : D(this, e, t, !1),
            t + 2
        }
        ,
        l.prototype.writeInt32LE = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 4, 2147483647, -2147483648),
            l.TYPED_ARRAY_SUPPORT ? (this[t] = 255 & e,
            this[t + 1] = e >>> 8,
            this[t + 2] = e >>> 16,
            this[t + 3] = e >>> 24) : O(this, e, t, !0),
            t + 4
        }
        ,
        l.prototype.writeInt32BE = function(e, t, a) {
            return e = +e,
            t |= 0,
            a || x(this, e, t, 4, 2147483647, -2147483648),
            e < 0 && (e = 4294967295 + e + 1),
            l.TYPED_ARRAY_SUPPORT ? (this[t] = e >>> 24,
            this[t + 1] = e >>> 16,
            this[t + 2] = e >>> 8,
            this[t + 3] = 255 & e) : O(this, e, t, !1),
            t + 4
        }
        ,
        l.prototype.writeFloatLE = function(e, t, a) {
            return L(this, e, t, !0, a)
        }
        ,
        l.prototype.writeFloatBE = function(e, t, a) {
            return L(this, e, t, !1, a)
        }
        ,
        l.prototype.writeDoubleLE = function(e, t, a) {
            return U(this, e, t, !0, a)
        }
        ,
        l.prototype.writeDoubleBE = function(e, t, a) {
            return U(this, e, t, !1, a)
        }
        ,
        l.prototype.copy = function(e, t, a, r) {
            if (a || (a = 0),
            r || 0 === r || (r = this.length),
            t >= e.length && (t = e.length),
            t || (t = 0),
            r > 0 && r < a && (r = a),
            r === a)
                return 0;
            if (0 === e.length || 0 === this.length)
                return 0;
            if (t < 0)
                throw new RangeError("targetStart out of bounds");
            if (a < 0 || a >= this.length)
                throw new RangeError("sourceStart out of bounds");
            if (r < 0)
                throw new RangeError("sourceEnd out of bounds");
            r > this.length && (r = this.length),
            e.length - t < r - a && (r = e.length - t + a);
            var n, i = r - a;
            if (this === e && a < t && t < r)
                for (n = i - 1; n >= 0; --n)
                    e[n + t] = this[n + a];
            else if (i < 1e3 || !l.TYPED_ARRAY_SUPPORT)
                for (n = 0; n < i; ++n)
                    e[n + t] = this[n + a];
            else
                Uint8Array.prototype.set.call(e, this.subarray(a, a + i), t);
            return i
        }
        ,
        l.prototype.fill = function(e, t, a, r) {
            if ("string" == typeof e) {
                if ("string" == typeof t ? (r = t,
                t = 0,
                a = this.length) : "string" == typeof a && (r = a,
                a = this.length),
                1 === e.length) {
                    var n = e.charCodeAt(0);
                    n < 256 && (e = n)
                }
                if (void 0 !== r && "string" != typeof r)
                    throw new TypeError("encoding must be a string");
                if ("string" == typeof r && !l.isEncoding(r))
                    throw new TypeError("Unknown encoding: " + r)
            } else
                "number" == typeof e && (e &= 255);
            if (t < 0 || this.length < t || this.length < a)
                throw new RangeError("Out of range index");
            if (a <= t)
                return this;
            var i;
            if (t >>>= 0,
            a = void 0 === a ? this.length : a >>> 0,
            e || (e = 0),
            "number" == typeof e)
                for (i = t; i < a; ++i)
                    this[i] = e;
            else {
                var o = l.isBuffer(e) ? e : j(new l(e,r).toString())
                  , s = o.length;
                for (i = 0; i < a - t; ++i)
                    this[i + t] = o[i % s]
            }
            return this
        }
        ;
        var F = /[^+\/0-9A-Za-z-_]/g;
        function B(e) {
            return e < 16 ? "0" + e.toString(16) : e.toString(16)
        }
        function j(e, t) {
            var a;
            t = t || 1 / 0;
            for (var r = e.length, n = null, i = [], o = 0; o < r; ++o) {
                if ((a = e.charCodeAt(o)) > 55295 && a < 57344) {
                    if (!n) {
                        if (a > 56319) {
                            (t -= 3) > -1 && i.push(239, 191, 189);
                            continue
                        }
                        if (o + 1 === r) {
                            (t -= 3) > -1 && i.push(239, 191, 189);
                            continue
                        }
                        n = a;
                        continue
                    }
                    if (a < 56320) {
                        (t -= 3) > -1 && i.push(239, 191, 189),
                        n = a;
                        continue
                    }
                    a = 65536 + (n - 55296 << 10 | a - 56320)
                } else
                    n && (t -= 3) > -1 && i.push(239, 191, 189);
                if (n = null,
                a < 128) {
                    if ((t -= 1) < 0)
                        break;
                    i.push(a)
                } else if (a < 2048) {
                    if ((t -= 2) < 0)
                        break;
                    i.push(a >> 6 | 192, 63 & a | 128)
                } else if (a < 65536) {
                    if ((t -= 3) < 0)
                        break;
                    i.push(a >> 12 | 224, a >> 6 & 63 | 128, 63 & a | 128)
                } else {
                    if (!(a < 1114112))
                        throw new Error("Invalid code point");
                    if ((t -= 4) < 0)
                        break;
                    i.push(a >> 18 | 240, a >> 12 & 63 | 128, a >> 6 & 63 | 128, 63 & a | 128)
                }
            }
            return i
        }
        function G(e) {
            return r.toByteArray(function(e) {
                if ((e = function(e) {
                    return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "")
                }(e).replace(F, "")).length < 2)
                    return "";
                for (; e.length % 4 != 0; )
                    e += "=";
                return e
            }(e))
        }
        function V(e, t, a, r) {
            for (var n = 0; n < r && !(n + a >= t.length || n >= e.length); ++n)
                t[n + a] = e[n];
            return n
        }
    }
    , function(e, t, a) {
        "use strict";
        t.byteLength = function(e) {
            var t = u(e)
              , a = t[0]
              , r = t[1];
            return 3 * (a + r) / 4 - r
        }
        ,
        t.toByteArray = function(e) {
            var t, a, r = u(e), o = r[0], s = r[1], l = new i(function(e, t, a) {
                return 3 * (t + a) / 4 - a
            }(0, o, s)), d = 0, c = s > 0 ? o - 4 : o;
            for (a = 0; a < c; a += 4)
                t = n[e.charCodeAt(a)] << 18 | n[e.charCodeAt(a + 1)] << 12 | n[e.charCodeAt(a + 2)] << 6 | n[e.charCodeAt(a + 3)],
                l[d++] = t >> 16 & 255,
                l[d++] = t >> 8 & 255,
                l[d++] = 255 & t;
            2 === s && (t = n[e.charCodeAt(a)] << 2 | n[e.charCodeAt(a + 1)] >> 4,
            l[d++] = 255 & t);
            1 === s && (t = n[e.charCodeAt(a)] << 10 | n[e.charCodeAt(a + 1)] << 4 | n[e.charCodeAt(a + 2)] >> 2,
            l[d++] = t >> 8 & 255,
            l[d++] = 255 & t);
            return l
        }
        ,
        t.fromByteArray = function(e) {
            for (var t, a = e.length, n = a % 3, i = [], o = 0, s = a - n; o < s; o += 16383)
                i.push(d(e, o, o + 16383 > s ? s : o + 16383));
            1 === n ? (t = e[a - 1],
            i.push(r[t >> 2] + r[t << 4 & 63] + "==")) : 2 === n && (t = (e[a - 2] << 8) + e[a - 1],
            i.push(r[t >> 10] + r[t >> 4 & 63] + r[t << 2 & 63] + "="));
            return i.join("")
        }
        ;
        for (var r = [], n = [], i = "undefined" != typeof Uint8Array ? Uint8Array : Array, o = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", s = 0, l = o.length; s < l; ++s)
            r[s] = o[s],
            n[o.charCodeAt(s)] = s;
        function u(e) {
            var t = e.length;
            if (t % 4 > 0)
                throw new Error("Invalid string. Length must be a multiple of 4");
            var a = e.indexOf("=");
            return -1 === a && (a = t),
            [a, a === t ? 0 : 4 - a % 4]
        }
        function d(e, t, a) {
            for (var n, i, o = [], s = t; s < a; s += 3)
                n = (e[s] << 16 & 16711680) + (e[s + 1] << 8 & 65280) + (255 & e[s + 2]),
                o.push(r[(i = n) >> 18 & 63] + r[i >> 12 & 63] + r[i >> 6 & 63] + r[63 & i]);
            return o.join("")
        }
        n["-".charCodeAt(0)] = 62,
        n["_".charCodeAt(0)] = 63
    }
    , function(e, t) {
        /*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
        t.read = function(e, t, a, r, n) {
            var i, o, s = 8 * n - r - 1, l = (1 << s) - 1, u = l >> 1, d = -7, c = a ? n - 1 : 0, f = a ? -1 : 1, h = e[t + c];
            for (c += f,
            i = h & (1 << -d) - 1,
            h >>= -d,
            d += s; d > 0; i = 256 * i + e[t + c],
            c += f,
            d -= 8)
                ;
            for (o = i & (1 << -d) - 1,
            i >>= -d,
            d += r; d > 0; o = 256 * o + e[t + c],
            c += f,
            d -= 8)
                ;
            if (0 === i)
                i = 1 - u;
            else {
                if (i === l)
                    return o ? NaN : 1 / 0 * (h ? -1 : 1);
                o += Math.pow(2, r),
                i -= u
            }
            return (h ? -1 : 1) * o * Math.pow(2, i - r)
        }
        ,
        t.write = function(e, t, a, r, n, i) {
            var o, s, l, u = 8 * i - n - 1, d = (1 << u) - 1, c = d >> 1, f = 23 === n ? Math.pow(2, -24) - Math.pow(2, -77) : 0, h = r ? 0 : i - 1, p = r ? 1 : -1, g = t < 0 || 0 === t && 1 / t < 0 ? 1 : 0;
            for (t = Math.abs(t),
            isNaN(t) || t === 1 / 0 ? (s = isNaN(t) ? 1 : 0,
            o = d) : (o = Math.floor(Math.log(t) / Math.LN2),
            t * (l = Math.pow(2, -o)) < 1 && (o--,
            l *= 2),
            (t += o + c >= 1 ? f / l : f * Math.pow(2, 1 - c)) * l >= 2 && (o++,
            l /= 2),
            o + c >= d ? (s = 0,
            o = d) : o + c >= 1 ? (s = (t * l - 1) * Math.pow(2, n),
            o += c) : (s = t * Math.pow(2, c - 1) * Math.pow(2, n),
            o = 0)); n >= 8; e[a + h] = 255 & s,
            h += p,
            s /= 256,
            n -= 8)
                ;
            for (o = o << n | s,
            u += n; u > 0; e[a + h] = 255 & o,
            h += p,
            o /= 256,
            u -= 8)
                ;
            e[a + h - p] |= 128 * g
        }
    }
    , function(e, t) {
        var a = {}.toString;
        e.exports = Array.isArray || function(e) {
            return "[object Array]" == a.call(e)
        }
    }
    , function(e, t, a) {
        !function(e, t, a) {
            function r(e, t, s) {
                var u;
                if ("region" === s.kind)
                    (u = document.createElement("div")).style.position = "absolute";
                else if ("body" === s.kind)
                    u = document.createElement("div");
                else if ("div" === s.kind)
                    u = document.createElement("div");
                else if ("image" === s.kind) {
                    if (u = document.createElement("img"),
                    null !== e.imgResolver && null !== s.src) {
                        var d = e.imgResolver(s.src, u);
                        d && (u.src = d),
                        u.height = e.regionH,
                        u.width = e.regionW
                    }
                } else if ("p" === s.kind)
                    u = document.createElement("p");
                else if ("span" === s.kind) {
                    if ("container" === s.styleAttrs[a.byName.ruby.qname])
                        u = document.createElement("ruby"),
                        e.ruby = !0;
                    else if ("base" === s.styleAttrs[a.byName.ruby.qname])
                        u = document.createElement("rb");
                    else if ("text" === s.styleAttrs[a.byName.ruby.qname])
                        u = document.createElement("rt");
                    else if ("baseContainer" === s.styleAttrs[a.byName.ruby.qname])
                        u = document.createElement("rbc");
                    else if ("textContainer" === s.styleAttrs[a.byName.ruby.qname])
                        u = document.createElement("rtc");
                    else {
                        if ("delimiter" === s.styleAttrs[a.byName.ruby.qname])
                            return;
                        u = document.createElement("span")
                    }
                    var c = s.styleAttrs[a.byName.textEmphasis.qname];
                    c && "none" !== c.style && (e.textEmphasis = !0)
                } else
                    "br" === s.kind && (u = document.createElement("br"));
                if (u) {
                    for (var f in t.appendChild(u),
                    u.style.margin = "0",
                    l) {
                        var h = l[f]
                          , p = s.styleAttrs[h.qname];
                        void 0 !== p && null !== h.map && h.map(e, u, s, p)
                    }
                    var g = u;
                    if ("region" === s.kind) {
                        var m = s.styleAttrs[a.byName.writingMode.qname];
                        "lrtb" === m || "lr" === m ? (e.ipd = "lr",
                        e.bpd = "tb") : "rltb" === m || "rl" === m ? (e.ipd = "rl",
                        e.bpd = "tb") : "tblr" === m ? (e.ipd = "tb",
                        e.bpd = "lr") : "tbrl" !== m && "tb" !== m || (e.ipd = "tb",
                        e.bpd = "rl")
                    }
                    var y = s.styleAttrs[a.byName.linePadding.qname];
                    if (y && !y.isZero()) {
                        var _ = y.toUsedLength(e.w, e.h);
                        if (_ > 0) {
                            var v = Math.ceil(_) + "px";
                            "tb" === e.bpd ? (g.style.paddingLeft = v,
                            g.style.paddingRight = v) : (g.style.paddingTop = v,
                            g.style.paddingBottom = v),
                            e.lp = y
                        }
                    }
                    var b = s.styleAttrs[a.byName.multiRowAlign.qname];
                    if (b && "auto" !== b) {
                        var E = document.createElement("span");
                        E.style.display = "inline-block",
                        E.style.textAlign = b,
                        u.appendChild(E),
                        g = E,
                        e.mra = b
                    }
                    var k = s.styleAttrs[a.byName.rubyReserve.qname];
                    if (k && "none" !== k[0] && (e.rubyReserve = k),
                    s.styleAttrs[a.byName.fillLineGap.qname] && (e.flg = !0),
                    "span" === s.kind && s.text)
                        if (a.byName.textCombine.qname in s.styleAttrs && "all" === s.styleAttrs[a.byName.textCombine.qname][0])
                            u.textContent = s.text;
                        else
                            for (var T = "", S = 0; S < s.text.length; S++) {
                                T += s.text.charAt(S);
                                var A = s.text.charCodeAt(S);
                                if (A < 55296 || A > 56319 || S === s.text.length) {
                                    var C = document.createElement("span");
                                    C.textContent = T,
                                    u.appendChild(C),
                                    T = ""
                                }
                            }
                    for (var I in s.contents)
                        r(e, g, s.contents[I]);
                    var P = [];
                    if ((e.lp || e.mra || e.flg || e.ruby || e.textEmphasis || e.rubyReserve) && "p" === s.kind && (o(e, g, P, null),
                    e.rubyReserve && (!function(e, t) {
                        for (var a = 0; a < e.length; a++) {
                            var r, n, i = document.createElement("ruby"), o = document.createElement("rb");
                            o.textContent = "",
                            i.appendChild(o);
                            var s = t.rubyReserve[1].toUsedLength(t.w, t.h) + "px";
                            "both" === t.rubyReserve[0] ? ((r = document.createElement("rtc")).style.rubyPosition = "under",
                            r.textContent = "",
                            r.style.fontSize = s,
                            (n = document.createElement("rtc")).style.rubyPosition = "over",
                            n.textContent = "",
                            n.style.fontSize = s,
                            i.appendChild(r),
                            i.appendChild(n)) : ((r = document.createElement("rtc")).textContent = "",
                            r.style.fontSize = s,
                            "after" === t.rubyReserve[0] || "outside" === t.rubyReserve[0] && a > 0 ? r.style.rubyPosition = "tb" === t.bpd || "rl" === t.bpd ? "under" : "over" : r.style.rubyPosition = "tb" === t.bpd || "rl" === t.bpd ? "over" : "under",
                            i.appendChild(r));
                            e[a].elements[0].node.parentElement.insertBefore(i, e[a].elements[0].node)
                        }
                    }(P, e),
                    e.rubyReserve = null),
                    (e.ruby || e.rubyReserve) && (!function(e, t) {
                        for (var a = 0; a < e.length; a++)
                            for (var r = 0; r < e[a].rbc.length; r++) {
                                var n;
                                if (!e[a].rbc[r].style.rubyPosition)
                                    n = "tb" === t.bpd || "rl" === t.bpd ? 0 === a ? "over" : "under" : 0 === a ? "under" : "over",
                                    e[a].rbc[r].style.rubyPosition = n
                            }
                    }(P, e),
                    e.ruby = null),
                    e.textEmphasis && (!function(e, t) {
                        for (var a = 0; a < e.length; a++)
                            for (var r = 0; r < e[a].te.length; r++) {
                                var n;
                                if (!e[a].te[r].style.textEmphasisPosition || "none" === e[a].te[r].style.textEmphasisPosition)
                                    n = "tb" === t.bpd ? 0 === a ? "left over" : "left under" : "rl" === t.bpd ? 0 === a ? "right under" : "left under" : 0 === a ? "left under" : "right under",
                                    e[a].te[r].style.textEmphasisPosition = n
                            }
                    }(P, e),
                    e.textEmphasis = null),
                    e.mra && (!function(e) {
                        for (var t = 0; t < e.length - 1; t++) {
                            var a = e[t].elements.length;
                            if (0 !== a && !1 === e[t].br) {
                                var r = document.createElement("br")
                                  , n = e[t].elements[a - 1].node;
                                n.parentElement.insertBefore(r, n.nextSibling)
                            }
                        }
                    }(P),
                    e.mra = null),
                    e.lp && (!function(e, t, a) {
                        for (var r in e) {
                            var n = e[r].elements.length
                              , i = e[r].elements[e[r].start_elem]
                              , o = e[r].elements[e[r].end_elem]
                              , s = Math.ceil(t) + "px"
                              , l = "-" + Math.ceil(t) + "px";
                            0 !== n && ("lr" === a.ipd ? (i.node.style.borderLeftColor = i.bgcolor || "#00000000",
                            i.node.style.borderLeftStyle = "solid",
                            i.node.style.borderLeftWidth = s,
                            i.node.style.marginLeft = l) : "rl" === a.ipd ? (i.node.style.borderRightColor = i.bgcolor || "#00000000",
                            i.node.style.borderRightStyle = "solid",
                            i.node.style.borderRightWidth = s,
                            i.node.style.marginRight = l) : "tb" === a.ipd && (i.node.style.borderTopColor = i.bgcolor || "#00000000",
                            i.node.style.borderTopStyle = "solid",
                            i.node.style.borderTopWidth = s,
                            i.node.style.marginTop = l),
                            "lr" === a.ipd ? (o.node.style.borderRightColor = o.bgcolor || "#00000000",
                            o.node.style.borderRightStyle = "solid",
                            o.node.style.borderRightWidth = s,
                            o.node.style.marginRight = l) : "rl" === a.ipd ? (o.node.style.borderLeftColor = o.bgcolor || "#00000000",
                            o.node.style.borderLeftStyle = "solid",
                            o.node.style.borderLeftWidth = s,
                            o.node.style.marginLeft = l) : "tb" === a.ipd && (o.node.style.borderBottomColor = o.bgcolor || "#00000000",
                            o.node.style.borderBottomStyle = "solid",
                            o.node.style.borderBottomWidth = s,
                            o.node.style.marginBottom = l))
                        }
                    }(P, e.lp.toUsedLength(e.w, e.h), e),
                    e.lp = null),
                    e.flg)) {
                        var w = i(g.getBoundingClientRect(), e);
                        !function(e, t, a, r) {
                            for (var n = Math.sign(a - t), i = 0; i <= e.length; i++) {
                                var o, s, l;
                                if (o = 0 === i ? t : i === e.length ? a : (e[i].before + e[i - 1].after) / 2,
                                i > 0)
                                    for (var u = 0; u < e[i - 1].elements.length; u++)
                                        null !== e[i - 1].elements[u].bgcolor && (l = e[i - 1].elements[u],
                                        n * (l.after - o) < 0 && (s = Math.ceil(Math.abs(o - l.after)) + "px",
                                        l.node.style.backgroundColor = l.bgcolor,
                                        "lr" === r.bpd ? l.node.style.paddingRight = s : "rl" === r.bpd ? l.node.style.paddingLeft = s : "tb" === r.bpd && (l.node.style.paddingBottom = s)));
                                if (i < e.length)
                                    for (var d = 0; d < e[i].elements.length; d++)
                                        null !== (l = e[i].elements[d]).bgcolor && n * (l.before - o) > 0 && (s = Math.ceil(Math.abs(l.before - o)) + "px",
                                        l.node.style.backgroundColor = l.bgcolor,
                                        "lr" === r.bpd ? l.node.style.paddingLeft = s : "rl" === r.bpd ? l.node.style.paddingRight = s : "tb" === r.bpd && (l.node.style.paddingTop = s))
                            }
                        }(P, w.before, w.after, e),
                        e.flg = null
                    }
                    if ("region" === s.kind && (o(e, g, P),
                    "tb" === e.bpd && e.enableRollUp && s.contents.length > 0 && "after" === s.styleAttrs[a.byName.displayAlign.qname])) {
                        var M = new n("" === s.id ? "_" : s.id,P);
                        if (e.currentISDState[M.id] = M,
                        e.previousISDState && M.id in e.previousISDState && e.previousISDState[M.id].plist.length > 0 && M.plist.length > 1 && M.plist[M.plist.length - 2].text === e.previousISDState[M.id].plist[e.previousISDState[M.id].plist.length - 1].text) {
                            var R = u.firstElementChild
                              , x = M.plist[M.plist.length - 1].after - M.plist[M.plist.length - 1].before;
                            R.style.bottom = "-" + x + "px",
                            R.style.transition = "transform 0.4s",
                            R.style.position = "relative",
                            R.style.transform = "translateY(-" + x + "px)"
                        }
                    }
                } else
                    !function(e, t) {
                        if (e && e.error && e.error(t))
                            throw t
                    }(e.errorHandler, "Error processing ISD element kind: " + s.kind)
            }
            function n(e, t) {
                this.id = e,
                this.plist = t
            }
            function i(e, t) {
                var a = {
                    before: null,
                    after: null,
                    start: null,
                    end: null
                };
                return "tb" === t.bpd ? (a.before = e.top,
                a.after = e.bottom,
                "lr" === t.ipd ? (a.start = e.left,
                a.end = e.right) : (a.start = e.right,
                a.end = e.left)) : "lr" === t.bpd ? (a.before = e.left,
                a.after = e.right,
                a.start = e.top,
                a.end = e.bottom) : "rl" === t.bpd && (a.before = e.right,
                a.after = e.left,
                a.start = e.top,
                a.end = e.bottom),
                a
            }
            function o(e, t, a, r) {
                if ("rt" !== t.localName && "rtc" !== t.localName) {
                    var n, s, l, u, d = t.style.backgroundColor || r;
                    if (0 === t.childElementCount)
                        if ("span" === t.localName || "rb" === t.localName) {
                            var c = t.getBoundingClientRect();
                            if (0 === c.height || 0 === c.width)
                                return;
                            var f = i(c, e);
                            if (0 !== a.length && (n = f.before,
                            s = f.after,
                            l = a[a.length - 1].before,
                            u = a[a.length - 1].after,
                            s < u && n > l || u <= s && l >= n)) {
                                var h = Math.sign(f.after - f.before)
                                  , p = Math.sign(f.end - f.start);
                                h * (f.before - a[a.length - 1].before) < 0 && (a[a.length - 1].before = f.before),
                                h * (f.after - a[a.length - 1].after) > 0 && (a[a.length - 1].after = f.after),
                                p * (f.start - a[a.length - 1].start) < 0 && (a[a.length - 1].start = f.start,
                                a[a.length - 1].start_elem = a[a.length - 1].elements.length),
                                p * (f.end - a[a.length - 1].end) > 0 && (a[a.length - 1].end = f.end,
                                a[a.length - 1].end_elem = a[a.length - 1].elements.length)
                            } else
                                a.push({
                                    before: f.before,
                                    after: f.after,
                                    start: f.start,
                                    end: f.end,
                                    start_elem: 0,
                                    end_elem: 0,
                                    elements: [],
                                    rbc: [],
                                    te: [],
                                    text: "",
                                    br: !1
                                });
                            a[a.length - 1].text += t.textContent,
                            a[a.length - 1].elements.push({
                                node: t,
                                bgcolor: d,
                                before: f.before,
                                after: f.after
                            })
                        } else
                            "br" === t.localName && 0 !== a.length && (a[a.length - 1].br = !0);
                    else
                        for (var g = t.firstChild; g; )
                            g.nodeType === Node.ELEMENT_NODE && (o(e, g, a, d),
                            "ruby" === g.localName || "rtc" === g.localName ? a.length > 0 && a[a.length - 1].rbc.push(g) : "span" === g.localName && g.style.textEmphasisStyle && "none" !== g.style.textEmphasisStyle && a.length > 0 && a[a.length - 1].te.push(g)),
                            g = g.nextSibling
                }
            }
            function s(e, t) {
                this.qname = e,
                this.map = t
            }
            e.render = function(e, t, a, n, i, o, s, l, u) {
                var d = n || t.clientHeight
                  , c = i || t.clientWidth;
                if (null !== e.aspectRatio) {
                    var f = d * e.aspectRatio;
                    f > c ? d = Math.round(c / e.aspectRatio) : c = f
                }
                var h = document.createElement("div");
                h.style.position = "relative",
                h.style.width = c + "px",
                h.style.height = d + "px",
                h.style.margin = "auto",
                h.style.top = 0,
                h.style.bottom = 0,
                h.style.left = 0,
                h.style.right = 0,
                h.style.zIndex = 0;
                var p = {
                    h: d,
                    w: c,
                    regionH: null,
                    regionW: null,
                    imgResolver: a,
                    displayForcedOnlyMode: o || !1,
                    isd: e,
                    errorHandler: s,
                    previousISDState: l,
                    enableRollUp: u || !1,
                    currentISDState: {},
                    flg: null,
                    lp: null,
                    mra: null,
                    ipd: null,
                    bpd: null,
                    ruby: null,
                    textEmphasis: null,
                    rubyReserve: null
                };
                for (var g in t.appendChild(h),
                e.contents)
                    r(p, h, e.contents[g]);
                return p.currentISDState
            }
            ;
            var l = [new s("http://www.w3.org/ns/ttml#styling backgroundColor",(function(e, t, a, r) {
                0 !== r[3] && (t.style.backgroundColor = "rgba(" + r[0].toString() + "," + r[1].toString() + "," + r[2].toString() + "," + (r[3] / 255).toString() + ")")
            }
            )), new s("http://www.w3.org/ns/ttml#styling color",(function(e, t, a, r) {
                t.style.color = "rgba(" + r[0].toString() + "," + r[1].toString() + "," + r[2].toString() + "," + (r[3] / 255).toString() + ")"
            }
            )), new s("http://www.w3.org/ns/ttml#styling direction",(function(e, t, a, r) {
                t.style.direction = r
            }
            )), new s("http://www.w3.org/ns/ttml#styling display",(function(e, t, a, r) {}
            )), new s("http://www.w3.org/ns/ttml#styling displayAlign",(function(e, t, a, r) {
                t.style.display = "flex",
                t.style.flexDirection = "column",
                "before" === r ? t.style.justifyContent = "flex-start" : "center" === r ? t.style.justifyContent = "center" : "after" === r && (t.style.justifyContent = "flex-end")
            }
            )), new s("http://www.w3.org/ns/ttml#styling extent",(function(e, t, a, r) {
                e.regionH = r.h.toUsedLength(e.w, e.h),
                e.regionW = r.w.toUsedLength(e.w, e.h);
                var n = 0
                  , i = 0
                  , o = a.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];
                o && (n = o[0].toUsedLength(e.w, e.h) + o[2].toUsedLength(e.w, e.h),
                i = o[1].toUsedLength(e.w, e.h) + o[3].toUsedLength(e.w, e.h)),
                t.style.height = e.regionH - n + "px",
                t.style.width = e.regionW - i + "px"
            }
            )), new s("http://www.w3.org/ns/ttml#styling fontFamily",(function(e, t, a, r) {
                var n = [];
                for (var i in r)
                    "monospaceSerif" === r[i] ? (n.push("Courier New"),
                    n.push('"Liberation Mono"'),
                    n.push("Courier"),
                    n.push("monospace")) : "proportionalSansSerif" === r[i] ? (n.push("Arial"),
                    n.push("Helvetica"),
                    n.push('"Liberation Sans"'),
                    n.push("sans-serif")) : "monospace" === r[i] ? n.push("monospace") : "sansSerif" === r[i] ? n.push("sans-serif") : "serif" === r[i] ? n.push("serif") : "monospaceSansSerif" === r[i] ? (n.push("Consolas"),
                    n.push("monospace")) : "proportionalSerif" === r[i] ? n.push("serif") : n.push(r[i]);
                t.style.fontFamily = n.join(",")
            }
            )), new s("http://www.w3.org/ns/ttml#styling shear",(function(e, t, a, r) {
                if (0 !== r) {
                    var n = -.9 * r;
                    "tb" === e.bpd ? t.style.transform = "skewX(" + n + "deg)" : t.style.transform = "skewY(" + n + "deg)"
                }
            }
            )), new s("http://www.w3.org/ns/ttml#styling fontSize",(function(e, t, a, r) {
                t.style.fontSize = r.toUsedLength(e.w, e.h) + "px"
            }
            )), new s("http://www.w3.org/ns/ttml#styling fontStyle",(function(e, t, a, r) {
                t.style.fontStyle = r
            }
            )), new s("http://www.w3.org/ns/ttml#styling fontWeight",(function(e, t, a, r) {
                t.style.fontWeight = r
            }
            )), new s("http://www.w3.org/ns/ttml#styling lineHeight",(function(e, t, a, r) {
                t.style.lineHeight = "normal" === r ? "normal" : r.toUsedLength(e.w, e.h) + "px"
            }
            )), new s("http://www.w3.org/ns/ttml#styling opacity",(function(e, t, a, r) {
                t.style.opacity = r
            }
            )), new s("http://www.w3.org/ns/ttml#styling origin",(function(e, t, a, r) {
                t.style.top = r.h.toUsedLength(e.w, e.h) + "px",
                t.style.left = r.w.toUsedLength(e.w, e.h) + "px"
            }
            )), new s("http://www.w3.org/ns/ttml#styling overflow",(function(e, t, a, r) {
                t.style.overflow = r
            }
            )), new s("http://www.w3.org/ns/ttml#styling padding",(function(e, t, a, r) {
                var n = [];
                n[0] = r[0].toUsedLength(e.w, e.h) + "px",
                n[1] = r[3].toUsedLength(e.w, e.h) + "px",
                n[2] = r[2].toUsedLength(e.w, e.h) + "px",
                n[3] = r[1].toUsedLength(e.w, e.h) + "px",
                t.style.padding = n.join(" ")
            }
            )), new s("http://www.w3.org/ns/ttml#styling position",(function(e, t, a, r) {
                t.style.top = r.h.toUsedLength(e.w, e.h) + "px",
                t.style.left = r.w.toUsedLength(e.w, e.h) + "px"
            }
            )), new s("http://www.w3.org/ns/ttml#styling rubyAlign",(function(e, t, a, r) {
                t.style.rubyAlign = r
            }
            )), new s("http://www.w3.org/ns/ttml#styling rubyPosition",(function(e, t, a, r) {
                var n;
                "before" !== r && "after" !== r || (n = "tb" === e.bpd || "rl" === e.bpd ? "before" === r ? "over" : "under" : "before" === r ? "under" : "over",
                t.parentElement.style.rubyPosition = n)
            }
            )), new s("http://www.w3.org/ns/ttml#styling showBackground",null), new s("http://www.w3.org/ns/ttml#styling textAlign",(function(e, t, r, n) {
                var i, o = r.styleAttrs[a.byName.direction.qname];
                i = "start" === n ? "rtl" === o ? "right" : "left" : "end" === n ? "rtl" === o ? "left" : "right" : n,
                t.style.textAlign = i
            }
            )), new s("http://www.w3.org/ns/ttml#styling textDecoration",(function(e, t, a, r) {
                t.style.textDecoration = r.join(" ").replace("lineThrough", "line-through")
            }
            )), new s("http://www.w3.org/ns/ttml#styling textOutline",(function(e, t, a, r) {}
            )), new s("http://www.w3.org/ns/ttml#styling textShadow",(function(e, t, r, n) {
                var i = r.styleAttrs[a.byName.textOutline.qname];
                if ("none" === n && "none" === i)
                    t.style.textShadow = "";
                else {
                    var o = [];
                    if ("none" !== i && o.push("rgba(" + i.color[0].toString() + "," + i.color[1].toString() + "," + i.color[2].toString() + "," + (i.color[3] / 255).toString() + ") 0px 0px " + i.thickness.toUsedLength(e.w, e.h) + "px"),
                    "none" !== n)
                        for (var s in n)
                            o.push(n[s].x_off.toUsedLength(e.w, e.h) + "px " + n[s].y_off.toUsedLength(e.w, e.h) + "px " + n[s].b_radius.toUsedLength(e.w, e.h) + "px rgba(" + n[s].color[0].toString() + "," + n[s].color[1].toString() + "," + n[s].color[2].toString() + "," + (n[s].color[3] / 255).toString() + ")");
                    t.style.textShadow = o.join(",")
                }
            }
            )), new s("http://www.w3.org/ns/ttml#styling textCombine",(function(e, t, a, r) {
                t.style.textCombineUpright = r.join(" ")
            }
            )), new s("http://www.w3.org/ns/ttml#styling textEmphasis",(function(e, t, a, r) {
                var n;
                "none" !== r.style ? ("auto" === r.style ? t.style.textEmphasisStyle = "filled" : t.style.textEmphasisStyle = r.style + " " + r.symbol,
                ("before" === r.position || "after" === r.position) && (n = "tb" === e.bpd ? "before" === r.position ? "left over" : "left under" : "rl" === e.bpd ? "before" === r.position ? "right under" : "left under" : "before" === r.position ? "left under" : "right under",
                t.style.textEmphasisPosition = n)) : t.style.textEmphasisStyle = "none"
            }
            )), new s("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(e, t, a, r) {
                var n;
                n = "bidiOverride" === r ? "bidi-override" : r,
                t.style.unicodeBidi = n
            }
            )), new s("http://www.w3.org/ns/ttml#styling visibility",(function(e, t, a, r) {
                t.style.visibility = r
            }
            )), new s("http://www.w3.org/ns/ttml#styling wrapOption",(function(e, t, a, r) {
                "wrap" === r ? "preserve" === a.space ? t.style.whiteSpace = "pre-wrap" : t.style.whiteSpace = "normal" : "preserve" === a.space ? t.style.whiteSpace = "pre" : t.style.whiteSpace = "noWrap"
            }
            )), new s("http://www.w3.org/ns/ttml#styling writingMode",(function(e, t, a, r) {
                "lrtb" === r || "lr" === r || "rltb" === r || "rl" === r ? e.writingMode = "horizontal-tb" : "tblr" === r ? e.writingMode = "vertical-lr" : "tbrl" !== r && "tb" !== r || (e.writingMode = "vertical-rl"),
                t.style.writingMode = e.writingMode
            }
            )), new s("http://www.w3.org/ns/ttml#styling zIndex",(function(e, t, a, r) {
                t.style.zIndex = r
            }
            )), new s("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(e, t, a, r) {
                e.displayForcedOnlyMode && !1 === r && (t.style.visibility = "hidden")
            }
            ))]
              , u = {};
            for (var d in l)
                u[l[d].qname] = l[d]
        }(t, "undefined" == typeof imscNames ? a(107) : imscNames, "undefined" == typeof imscStyles ? a(162) : imscStyles, "undefined" == typeof imscUtils ? a(108) : imscUtils)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o() {
            var e = 0;
            function t(e) {
                for (var t = "", a = 0; a < e.length; ++a) {
                    t += e[a].uchar
                }
                return t.length - t.replace(/^\s+/, "").length
            }
            function a(e) {
                return "left: " + 3.125 * e.x + "%; top: " + 6.66 * e.y1 + "%; width: " + (100 - 3.125 * e.x) + "%; height: " + 6.66 * Math.max(e.y2 - 1 - e.y1, 1) + "%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"
            }
            function r(e) {
                return "red" === e ? "rgb(255, 0, 0)" : "green" === e ? "rgb(0, 255, 0)" : "blue" === e ? "rgb(0, 0, 255)" : "cyan" === e ? "rgb(0, 255, 255)" : "magenta" === e ? "rgb(255, 0, 255)" : "yellow" === e ? "rgb(255, 255, 0)" : "white" === e ? "rgb(255, 255, 255)" : "black" === e ? "rgb(0, 0, 0)" : e
            }
            function n(e, t) {
                var a = e.videoHeight / 15;
                return t ? "font-size: " + a + "px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: " + (t.foreground ? r(t.foreground) : "rgb(255, 255, 255)") + "; font-style: " + (t.italics ? "italic" : "normal") + "; text-decoration: " + (t.underline ? "underline" : "none") + "; white-space: pre; background-color: " + (t.background ? r(t.background) : "transparent") + ";" : "font-size: " + a + "px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"
            }
            function i(e) {
                return e.replace(/^\s+/g, "")
            }
            function o(e) {
                return e.replace(/\s+$/g, "")
            }
            return {
                createHTMLCaptionsFromScreen: function(r, s, l, u) {
                    var d = null
                      , c = !1
                      , f = -1
                      , h = {
                        start: s,
                        end: l,
                        spans: []
                    }
                      , p = "style_cea608_white_black"
                      , g = {}
                      , m = {}
                      , y = []
                      , _ = void 0
                      , v = void 0;
                    for (_ = 0; _ < 15; ++_) {
                        var b = u.rows[_]
                          , E = ""
                          , k = null;
                        if (!1 === b.isEmpty()) {
                            var T = t(b.chars);
                            null === d && (d = {
                                x: T,
                                y1: _,
                                y2: _ + 1,
                                p: []
                            }),
                            T !== f && c && (d.p.push(h),
                            h = {
                                start: s,
                                end: l,
                                spans: []
                            },
                            d.y2 = _,
                            d.name = "region_" + d.x + "_" + d.y1 + "_" + d.y2,
                            !1 === g.hasOwnProperty(d.name) ? (y.push(d),
                            g[d.name] = d) : g[d.name].p.contat(d.p),
                            d = {
                                x: T,
                                y1: _,
                                y2: _ + 1,
                                p: []
                            });
                            for (var S = 0; S < b.chars.length; ++S) {
                                var A = b.chars[S]
                                  , C = A.penState;
                                if (null === k || !C.equals(k)) {
                                    E.trim().length > 0 && (h.spans.push({
                                        name: p,
                                        line: E,
                                        row: _
                                    }),
                                    E = "");
                                    var I = "style_cea608_" + C.foreground + "_" + C.background;
                                    C.underline && (I += "_underline"),
                                    C.italics && (I += "_italics"),
                                    m.hasOwnProperty(I) || (m[I] = JSON.parse(JSON.stringify(C))),
                                    k = C,
                                    p = I
                                }
                                E += A.uchar
                            }
                            E.trim().length > 0 && h.spans.push({
                                name: p,
                                line: E,
                                row: _
                            }),
                            c = !0,
                            f = T
                        } else
                            c = !1,
                            f = -1,
                            d && (d.p.push(h),
                            h = {
                                start: s,
                                end: l,
                                spans: []
                            },
                            d.y2 = _,
                            d.name = "region_" + d.x + "_" + d.y1 + "_" + d.y2,
                            !1 === g.hasOwnProperty(d.name) ? (y.push(d),
                            g[d.name] = d) : g[d.name].p.contat(d.p),
                            d = null)
                    }
                    d && (d.p.push(h),
                    d.y2 = _ + 1,
                    d.name = "region_" + d.x + "_" + d.y1 + "_" + d.y2,
                    !1 === g.hasOwnProperty(d.name) ? (y.push(d),
                    g[d.name] = d) : g[d.name].p.contat(d.p),
                    d = null);
                    var P = [];
                    for (_ = 0; _ < y.length; ++_) {
                        var w = y[_]
                          , M = "sub_cea608_" + e++
                          , R = document.createElement("div");
                        R.id = M;
                        var x = a(w);
                        R.style.cssText = "position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;" + x;
                        var D = document.createElement("div");
                        D.className = "paragraph bodyStyle",
                        D.style.cssText = n(r);
                        var O = document.createElement("div");
                        O.className = "cueUniWrapper",
                        O.style.cssText = "unicode-bidi: normal; direction: ltr;";
                        for (var N = 0; N < w.p.length; ++N) {
                            var L = w.p[N]
                              , U = 0;
                            for (v = 0; v < L.spans.length; ++v) {
                                var F = L.spans[v];
                                if (F.line.length > 0) {
                                    if (0 !== v && U != F.row) {
                                        var B = document.createElement("br");
                                        B.className = "lineBreak",
                                        O.appendChild(B)
                                    }
                                    var j = !1;
                                    U === F.row && (j = !0),
                                    U = F.row;
                                    var G = m[F.name]
                                      , V = document.createElement("span");
                                    V.className = "spanPadding " + F.name + " customSpanColor",
                                    V.style.cssText = n(r, G),
                                    0 !== v && j ? v === L.spans.length - 1 ? V.textContent = o(F.line) : V.textContent = F.line : L.spans.length > 1 && v < L.spans.length - 1 && F.row === L.spans[v + 1].row ? V.textContent = i(F.line) : V.textContent = F.line.trim(),
                                    O.appendChild(V)
                                }
                            }
                        }
                        D.appendChild(O),
                        R.appendChild(D);
                        var K = {
                            bodyStyle: ["%", 90]
                        };
                        for (var $ in m)
                            m.hasOwnProperty($) && (K[$] = ["%", 90]);
                        P.push({
                            type: "html",
                            start: s,
                            end: l,
                            cueHTMLElement: R,
                            cueID: M,
                            cellResolution: [32, 15],
                            isFromCEA608: !0,
                            fontSize: K,
                            lineHeight: {},
                            linePadding: {}
                        })
                    }
                    return P
                }
            }
        }
        o.__dashjs_factory_name = "EmbeddedTextHtmlRender",
        t.default = i.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(3));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            var e = this.context
              , t = void 0
              , a = void 0
              , r = void 0
              , i = void 0
              , o = void 0
              , s = void 0;
            function l(e) {
                var t = e.split(":")
                  , a = t.length - 1;
                return e = 60 * parseInt(t[a - 1], 10) + parseFloat(t[a]),
                2 === a && (e += 3600 * parseInt(t[0], 10)),
                e
            }
            function u(e) {
                var t = e.split(i)
                  , a = t[1].split(s);
                return a.shift(),
                t[1] = a[0],
                a.shift(),
                {
                    cuePoints: t,
                    styles: d(a)
                }
            }
            function d(e) {
                var t = {};
                return e.forEach((function(e) {
                    if (e.split(/:/).length > 1) {
                        var a = e.split(/:/)[1];
                        a && -1 != a.search(/%/) && (a = parseInt(a.replace(/%/, ""), 10)),
                        (e.match(/align/) || e.match(/A/)) && (t.align = a),
                        (e.match(/line/) || e.match(/L/)) && (t.line = a),
                        (e.match(/position/) || e.match(/P/)) && (t.position = a),
                        (e.match(/size/) || e.match(/S/)) && (t.size = a)
                    }
                }
                )),
                t
            }
            function c(e, t) {
                for (var a, r = t, n = "", o = ""; "" !== e[r] && r < e.length; )
                    r++;
                if ((a = r - t) > 1)
                    for (var s = 0; s < a; s++) {
                        if ((o = e[t + s]).match(i)) {
                            n = "";
                            break
                        }
                        n += o,
                        s !== a - 1 && (n += "\n")
                    }
                else
                    (o = e[t]).match(i) || (n = o);
                return n
            }
            return t = {
                parse: function(e) {
                    var t, n = [], s = void 0;
                    if (!e)
                        return n;
                    t = (e = e.split(r)).length,
                    s = -1;
                    for (var d = 0; d < t; d++) {
                        var f = e[d];
                        if (f.length > 0 && "WEBVTT" !== f && f.match(i)) {
                            var h = u(f)
                              , p = h.cuePoints
                              , g = h.styles
                              , m = c(e, d + 1)
                              , y = l(p[0].replace(o, ""))
                              , _ = l(p[1].replace(o, ""));
                            !isNaN(y) && !isNaN(_) && y >= s && _ > y ? "" !== m ? (s = y,
                            n.push({
                                start: y,
                                end: _,
                                data: m,
                                styles: g
                            })) : a.error("Skipping cue due to empty/malformed cue text") : a.error("Skipping cue due to incorrect cue timing")
                        }
                    }
                    return n
                }
            },
            a = (0,
            n.default)(e).getInstance().getLogger(t),
            r = /(?:\r\n|\r|\n)/gm,
            i = /-->/,
            o = /(^[\s]+|[\s]+$)/g,
            s = /\s\b/g,
            t
        }
        o.__dashjs_factory_name = "VTTParser",
        t.default = r.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(0))
          , n = l(a(3))
          , i = l(a(2))
          , o = l(a(4))
          , s = a(212);
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u() {
            var e = this.context
              , t = (0,
            i.default)(e).getInstance()
              , a = void 0
              , r = void 0
              , l = 0;
            return a = {
                parse: function(e, a, n, i, u) {
                    var d = ""
                      , c = []
                      , f = void 0
                      , h = void 0
                      , p = void 0
                      , g = {}
                      , m = {}
                      , y = ""
                      , _ = ""
                      , v = {
                        onOpenTag: function(e, t, a) {
                            if ("image" === t && ("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt" === e || "http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt" === e)) {
                                if (!a[" imageType"] || "PNG" !== a[" imageType"].value)
                                    return void r.warn("smpte-tt imageType != PNG. Discarded");
                                y = a["http://www.w3.org/XML/1998/namespace id"].value
                            }
                        },
                        onCloseTag: function() {
                            y && (m[y] = _.trim()),
                            _ = "",
                            y = ""
                        },
                        onText: function(e) {
                            y && (_ += e)
                        }
                    };
                    if (!e)
                        throw d = "no ttml data to parse",
                        new Error(d);
                    g.data = e,
                    t.trigger(o.default.TTML_TO_PARSE, g);
                    var b = (0,
                    s.fromXML)(g.data, (function(e) {
                        d = e
                    }
                    ), v);
                    t.trigger(o.default.TTML_PARSED, {
                        ttmlString: g.data,
                        ttmlDoc: b
                    });
                    var E, k = b.getMediaTimeEvents();
                    for (p = 0; p < k.length; p++) {
                        var T = (0,
                        s.generateISD)(b, k[p], (function(e) {
                            d = e
                        }
                        ));
                        T.contents.some((function(e) {
                            return e.contents.length
                        }
                        )) && (f = k[p] + a < n ? n : k[p] + a) < (h = k[p + 1] + a > i ? i : k[p + 1] + a) && c.push({
                            start: f,
                            end: h,
                            type: "html",
                            cueID: (E = void 0,
                            E = "cue_TTML_" + l,
                            l++,
                            E),
                            isd: T,
                            images: u,
                            embeddedImages: m
                        })
                    }
                    if ("" !== d)
                        throw r.error(d),
                        new Error(d);
                    return c
                }
            },
            r = (0,
            n.default)(e).getInstance().getLogger(a),
            a
        }
        u.__dashjs_factory_name = "TTMLParser",
        t.default = r.default.getSingletonFactory(u)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(3))
          , n = i(a(0));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            var t = this.context
              , a = void 0
              , n = void 0
              , i = void 0
              , o = []
              , s = e;
            function l(e, t) {
                o = o.filter((function(a) {
                    return !((isNaN(t) || a.start < t) && (isNaN(e) || a.end > e))
                }
                ))
            }
            return a = {
                getAllBufferRanges: function() {
                    for (var e = [], t = 0; t < o.length; t++) {
                        var a = o[t];
                        0 === e.length || a.start > e[e.length - 1].end ? e.push({
                            start: a.start,
                            end: a.end
                        }) : e[e.length - 1].end = a.end
                    }
                    var r = {
                        start: function(t) {
                            return e[t].start
                        },
                        end: function(t) {
                            return e[t].end
                        }
                    };
                    return Object.defineProperty(r, "length", {
                        get: function() {
                            return e.length
                        }
                    }),
                    r
                },
                append: function(e) {
                    "InitializationSegment" !== e.segmentType ? (o.push(e),
                    o.sort((function(e, t) {
                        return e.start - t.start
                    }
                    )),
                    i = null) : i = e,
                    n.debug("PreBufferSink appended chunk s: " + e.start + "; e: " + e.end),
                    s && s({
                        chunk: e
                    })
                },
                remove: l,
                abort: function() {},
                discharge: function(e, t) {
                    var a = function(e, t) {
                        return o.filter((function(a) {
                            return (isNaN(t) || a.start < t) && (isNaN(e) || a.end > e)
                        }
                        ))
                    }(e, t);
                    return i && (a.push(i),
                    i = null),
                    l(e, t),
                    a
                },
                reset: function() {
                    o = [],
                    i = null,
                    s = null
                },
                updateTimestampOffset: function() {},
                hasDiscontinuitiesAfter: function() {
                    return !1
                },
                waitForUpdateEnd: function(e) {
                    e()
                },
                getBuffer: function() {
                    return this
                }
            },
            n = (0,
            r.default)(t).getInstance().getLogger(a),
            a
        }
        o.__dashjs_factory_name = "PreBufferSink";
        var s = n.default.getClassFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(0))
          , n = l(a(3))
          , i = l(a(44))
          , o = l(a(1))
          , s = l(a(25));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u(e) {
            e = e || {};
            var t = this.context
              , a = e.dashMetrics
              , r = void 0
              , l = void 0;
            return r = {
                getMaxIndex: function(e) {
                    var r = (0,
                    i.default)(t).create();
                    if (!(e && e.hasOwnProperty("getMediaInfo") && e.hasOwnProperty("getMediaType") && e.hasOwnProperty("useBufferOccupancyABR") && e.hasOwnProperty("getAbrController") && e.hasOwnProperty("getScheduleController")))
                        return r;
                    !function() {
                        if (!a || !a.hasOwnProperty("getCurrentBufferState"))
                            throw new Error(o.default.MISSING_CONFIG_ERROR)
                    }();
                    var n = e.getMediaInfo()
                      , u = e.getMediaType()
                      , d = a.getCurrentBufferState(u)
                      , c = e.getScheduleController()
                      , f = e.getAbrController()
                      , h = e.getStreamInfo()
                      , p = h && h.manifestInfo ? h.manifestInfo.isDynamic : null
                      , g = f.getThroughputHistory()
                      , m = g.getSafeAverageThroughput(u, p)
                      , y = g.getAverageLatency(u)
                      , _ = e.useBufferOccupancyABR();
                    return isNaN(m) || !d || _ || f.getAbandonmentStateFor(u) !== s.default.ABANDON_LOAD && (d.state === s.default.BUFFER_LOADED || p) && (r.quality = f.getQualityForBitrate(n, m, y),
                    c.setTimeToLoadDelay(0),
                    l.debug("[" + u + "] requesting switch to index: ", r.quality, "Average throughput", Math.round(m), "kbps"),
                    r.reason = {
                        throughput: m,
                        latency: y
                    }),
                    r
                },
                reset: function() {}
            },
            l = (0,
            n.default)(t).getInstance().getLogger(r),
            r
        }
        u.__dashjs_factory_name = "ThroughputRule",
        t.default = r.default.getClassFactory(u)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(2))
          , n = d(a(4))
          , i = d(a(0))
          , o = d(a(3))
          , s = d(a(44))
          , l = d(a(1))
          , u = d(a(25));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            r.default)(t).getInstance()
              , i = e.dashMetrics
              , d = void 0
              , c = void 0
              , f = void 0;
            function h() {
                (f = {})[l.default.VIDEO] = {
                    ignoreCount: 2
                },
                f[l.default.AUDIO] = {
                    ignoreCount: 2
                }
            }
            function p() {
                h()
            }
            function g(e) {
                isNaN(e.startTime) || e.mediaType !== l.default.AUDIO && e.mediaType !== l.default.VIDEO || f[e.mediaType].ignoreCount > 0 && f[e.mediaType].ignoreCount--
            }
            return d = {
                getMaxIndex: function(e) {
                    var a = (0,
                    s.default)(t).create();
                    if (!e || !e.hasOwnProperty("getMediaType"))
                        return a;
                    !function() {
                        if (!i || !i.hasOwnProperty("getCurrentBufferLevel") || !i.hasOwnProperty("getCurrentBufferState"))
                            throw new Error(l.default.MISSING_CONFIG_ERROR)
                    }();
                    var r = e.getMediaType()
                      , n = i.getCurrentBufferState(r)
                      , o = e.getRepresentationInfo().fragmentDuration;
                    if (function(e) {
                        return f[e].ignoreCount > 0
                    }(r) || !o)
                        return a;
                    if (n && n.state === u.default.BUFFER_EMPTY)
                        c.debug("[" + r + "] Switch to index 0; buffer is empty."),
                        a.quality = 0,
                        a.reason = "InsufficientBufferRule: Buffer is empty";
                    else {
                        var d = e.getMediaInfo()
                          , h = e.getAbrController()
                          , p = h.getThroughputHistory()
                          , g = i.getCurrentBufferLevel(r)
                          , m = p.getAverageThroughput(r)
                          , y = p.getAverageLatency(r)
                          , _ = m * (g / o) * .5;
                        a.quality = h.getQualityForBitrate(d, _, y),
                        a.reason = "InsufficientBufferRule: being conservative to avoid immediate rebuffering"
                    }
                    return a
                },
                reset: function() {
                    h(),
                    a.off(n.default.PLAYBACK_SEEKING, p, d),
                    a.off(n.default.BYTES_APPENDED_END_FRAGMENT, g, d)
                }
            },
            c = (0,
            o.default)(t).getInstance().getLogger(d),
            h(),
            a.on(n.default.PLAYBACK_SEEKING, p, d),
            a.on(n.default.BYTES_APPENDED_END_FRAGMENT, g, d),
            d
        }
        c.__dashjs_factory_name = "InsufficientBufferRule",
        t.default = i.default.getClassFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(44))
          , n = o(a(0))
          , i = o(a(3));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e) {
            e = e || {};
            var t = this.context
              , a = e.mediaPlayerModel
              , n = e.dashMetrics
              , o = e.settings
              , l = void 0
              , u = void 0
              , d = void 0
              , c = void 0
              , f = void 0;
            function h() {
                d = {},
                c = {},
                f = []
            }
            return l = {
                shouldAbandon: function(e) {
                    var i = (0,
                    r.default)(t).create(r.default.NO_CHANGE, {
                        name: s.__dashjs_factory_name
                    });
                    if (!(e && e.hasOwnProperty("getMediaInfo") && e.hasOwnProperty("getMediaType") && e.hasOwnProperty("getCurrentRequest") && e.hasOwnProperty("getRepresentationInfo") && e.hasOwnProperty("getAbrController")))
                        return i;
                    var l, h, p = e.getMediaInfo(), g = e.getMediaType(), m = e.getCurrentRequest();
                    if (!isNaN(m.index)) {
                        l = g,
                        h = m.index,
                        d[l] = d[l] || {},
                        d[l][h] = d[l][h] || {};
                        var y = a.getStableBufferTime();
                        if (n.getCurrentBufferLevel(g) > y)
                            return i;
                        var _ = d[g][m.index];
                        if (null === _ || null === m.firstByteDate || c.hasOwnProperty(_.id))
                            return i;
                        if (void 0 === _.firstByteTime && (f[g] = [],
                        _.firstByteTime = m.firstByteDate.getTime(),
                        _.segmentDuration = m.duration,
                        _.bytesTotal = m.bytesTotal,
                        _.id = m.index),
                        _.bytesLoaded = m.bytesLoaded,
                        _.elapsedTime = (new Date).getTime() - _.firstByteTime,
                        _.bytesLoaded > 0 && _.elapsedTime > 0 && function(e, t) {
                            f[e] = f[e] || [],
                            f[e].push(t)
                        }(g, Math.round(8 * _.bytesLoaded / _.elapsedTime)),
                        f[g].length >= 5 && _.elapsedTime > 500 && _.bytesLoaded < _.bytesTotal) {
                            var v = f[g].reduce((function(e, t) {
                                return e + t
                            }
                            ), 0);
                            if (_.measuredBandwidthInKbps = Math.round(v / f[g].length),
                            _.estimatedTimeOfDownload = +(8 * _.bytesTotal / _.measuredBandwidthInKbps / 1e3).toFixed(2),
                            _.estimatedTimeOfDownload < 1.8 * _.segmentDuration || 0 === e.getRepresentationInfo().quality)
                                return i;
                            if (!c.hasOwnProperty(_.id)) {
                                var b = e.getAbrController()
                                  , E = _.bytesTotal - _.bytesLoaded
                                  , k = b.getBitrateList(p)
                                  , T = b.getQualityForBitrate(p, _.measuredBandwidthInKbps * o.get().streaming.abr.bandwidthSafetyFactor)
                                  , S = b.getMinAllowedIndexFor(g)
                                  , A = void 0 !== S ? Math.max(S, T) : T;
                                E > _.bytesTotal * k[A].bitrate / k[b.getQualityFor(g)].bitrate && (i.quality = A,
                                i.reason.throughput = _.measuredBandwidthInKbps,
                                i.reason.fragmentID = _.id,
                                c[_.id] = _,
                                u.debug("[" + g + "] frag id", _.id, " is asking to abandon and switch to quality to ", A, " measured bandwidth was", _.measuredBandwidthInKbps),
                                delete d[g][_.id])
                            }
                        } else
                            _.bytesLoaded === _.bytesTotal && delete d[g][_.id]
                    }
                    return i
                },
                reset: h
            },
            u = (0,
            i.default)(t).getInstance().getLogger(l),
            h(),
            l
        }
        s.__dashjs_factory_name = "AbandonRequestsRule",
        t.default = n.default.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(0))
          , n = o(a(44))
          , i = o(a(3));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s() {
            var e = this.context
              , t = void 0
              , a = void 0;
            return t = {
                getMaxIndex: function(t) {
                    var r = (0,
                    n.default)(e).create();
                    if (!t || !t.hasOwnProperty("getDroppedFramesHistory"))
                        return r;
                    var i = t.getDroppedFramesHistory();
                    if (i) {
                        for (var o = i.getFrameHistory(), s = 0, l = 0, u = n.default.NO_CHANGE, d = 1; d < o.length; d++)
                            if (o[d] && (s = o[d].droppedVideoFrames,
                            (l = o[d].totalVideoFrames) > 375 && s / l > .15)) {
                                u = d - 1,
                                a.debug("index: " + u + " Dropped Frames: " + s + " Total Frames: " + l);
                                break
                            }
                        return (0,
                        n.default)(e).create(u, {
                            droppedFrames: s
                        })
                    }
                    return r
                }
            },
            a = (0,
            i.default)(e).getInstance().getLogger(t),
            t
        }
        s.__dashjs_factory_name = "DroppedFramesRule",
        t.default = r.default.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(0))
          , n = o(a(3))
          , i = o(a(44));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s() {
            var e = this.context
              , t = void 0
              , a = void 0;
            return t = {
                getMaxIndex: function(t) {
                    for (var r = t ? t.getSwitchHistory() : null, n = r ? r.getSwitchRequests() : [], o = 0, s = 0, l = 0, u = (0,
                    i.default)(e).create(), d = 0; d < n.length; d++)
                        if (void 0 !== n[d] && (o += n[d].drops,
                        s += n[d].noDrops,
                        l += n[d].dropSize,
                        o + s >= 6 && o / s > .075)) {
                            u.quality = d > 0 && n[d].drops > 0 ? d - 1 : d,
                            u.reason = {
                                index: u.quality,
                                drops: o,
                                noDrops: s,
                                dropSize: l
                            },
                            a.debug("Switch history rule index: " + u.quality + " samples: " + (o + s) + " drops: " + o);
                            break
                        }
                    return u
                }
            },
            a = (0,
            n.default)(e).getInstance().getLogger(t),
            t
        }
        s.__dashjs_factory_name = "SwitchHistoryRule",
        t.default = r.default.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(25))
          , n = d(a(44))
          , i = d(a(0))
          , o = a(20)
          , s = d(a(2))
          , l = d(a(4))
          , u = d(a(3));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e) {
            e = e || {};
            var t = this.context
              , a = e.dashMetrics
              , i = e.mediaPlayerModel
              , d = (0,
            s.default)(t).getInstance()
              , c = void 0
              , f = void 0
              , h = void 0;
            function p(e, t, a) {
                var r = a.reduce((function(e, t, r) {
                    return t > a[e] ? r : e
                }
                ), 0);
                if (0 === r)
                    return null;
                var n = Math.max(e, 10 + 2 * t.length)
                  , i = (a[r] - 1) / (n / 10 - 1);
                return {
                    gp: i,
                    Vp: 10 / i
                }
            }
            function g(e) {
                var t = {}
                  , a = e.getMediaInfo().bitrateList.map((function(e) {
                    return e.bandwidth
                }
                ))
                  , r = function(e) {
                    return e.map((function(e) {
                        return Math.log(e)
                    }
                    ))
                }(a);
                r = r.map((function(e) {
                    return e - r[0] + 1
                }
                ));
                var n = i.getStableBufferTime()
                  , o = p(n, a, r);
                return o ? (t.state = 1,
                t.bitrates = a,
                t.utilities = r,
                t.stableBufferTime = n,
                t.Vp = o.Vp,
                t.gp = o.gp,
                t.lastQuality = 0,
                m(t)) : t.state = 0,
                t
            }
            function m(e) {
                e.placeholderBuffer = 0,
                e.mostAdvancedSegmentStart = NaN,
                e.lastSegmentWasReplacement = !1,
                e.lastSegmentStart = NaN,
                e.lastSegmentDurationS = NaN,
                e.lastSegmentRequestTimeMs = NaN,
                e.lastSegmentFinishTimeMs = NaN
            }
            function y(e, t) {
                var r = i.getStableBufferTime();
                if (e.stableBufferTime !== r) {
                    var n = p(r, e.bitrates, e.utilities);
                    if (n.Vp !== e.Vp || n.gp !== e.gp) {
                        var o = a.getCurrentBufferLevel(t)
                          , s = o + e.placeholderBuffer;
                        s -= 10,
                        s *= n.Vp / e.Vp,
                        s += 10,
                        e.stableBufferTime = r,
                        e.Vp = n.Vp,
                        e.gp = n.gp,
                        e.placeholderBuffer = Math.max(0, s - o)
                    }
                }
            }
            function _(e, t) {
                return e.Vp * (e.utilities[t] + e.gp)
            }
            function v(e, t) {
                for (var a = e.bitrates[t], r = e.utilities[t], n = 0, i = t - 1; i >= 0; --i)
                    if (e.utilities[i] < e.utilities[t]) {
                        var o = e.bitrates[i]
                          , s = e.utilities[i]
                          , l = e.Vp * (e.gp + (a * s - o * r) / (a - o));
                        n = Math.max(n, l)
                    }
                return n
            }
            function b() {
                for (var e in h)
                    h.hasOwnProperty(e) && 2 === h[e].state && (h[e].placeholderBuffer = 0)
            }
            function E() {
                for (var e in h)
                    if (h.hasOwnProperty(e)) {
                        var t = h[e];
                        0 !== t.state && (t.state = 1,
                        m(t))
                    }
            }
            function k(e) {
                if (e && e.chunk && e.chunk.mediaInfo) {
                    var t = h[e.chunk.mediaInfo.type];
                    if (t && 0 !== t.state) {
                        var a = e.chunk.start;
                        isNaN(t.mostAdvancedSegmentStart) || a > t.mostAdvancedSegmentStart ? (t.mostAdvancedSegmentStart = a,
                        t.lastSegmentWasReplacement = !1) : t.lastSegmentWasReplacement = !0,
                        t.lastSegmentStart = a,
                        t.lastSegmentDurationS = e.chunk.duration,
                        t.lastQuality = e.chunk.quality,
                        S(t, e.chunk.mediaInfo.type)
                    }
                }
            }
            function T(e) {
                if (e && e.metric === r.default.HTTP_REQUEST && e.value && e.value.type === o.HTTPRequest.MEDIA_SEGMENT_TYPE && e.value.trace && e.value.trace.length) {
                    var t = h[e.mediaType];
                    t && 0 !== t.state && (t.lastSegmentRequestTimeMs = e.value.trequest.getTime(),
                    t.lastSegmentFinishTimeMs = e.value._tfinish.getTime(),
                    S(t, e.mediaType))
                }
            }
            function S(e, t) {
                if (!isNaN(e.lastSegmentStart) && !isNaN(e.lastSegmentRequestTimeMs) && !isNaN(e.placeholderBuffer)) {
                    if (e.placeholderBuffer *= .99,
                    !isNaN(e.lastSegmentFinishTimeMs)) {
                        var r = a.getCurrentBufferLevel(t) + .001 * (e.lastSegmentFinishTimeMs - e.lastSegmentRequestTimeMs)
                          , n = _(e, e.lastQuality)
                          , i = Math.max(0, n - r);
                        e.placeholderBuffer = Math.min(i, e.placeholderBuffer)
                    }
                    e.lastSegmentWasReplacement && !isNaN(e.lastSegmentDurationS) && (e.placeholderBuffer += e.lastSegmentDurationS),
                    e.lastSegmentStart = NaN,
                    e.lastSegmentRequestTimeMs = NaN
                }
            }
            function A(e) {
                if (e) {
                    var t = h[e.mediaType];
                    t && 0 !== t.state && (t.abrQuality = e.newQuality)
                }
            }
            function C(e) {
                if (e) {
                    var t = h[e.mediaType];
                    if (t && 0 !== t.state) {
                        var r = a.getCurrentBufferLevel(e.mediaType)
                          , n = void 0;
                        n = t.abrQuality > 0 ? v(t, t.abrQuality) : 10;
                        var i = Math.max(0, n - r);
                        t.placeholderBuffer = Math.min(t.placeholderBuffer, i)
                    }
                }
            }
            function I() {
                h = {}
            }
            return c = {
                getMaxIndex: function(e) {
                    var r = (0,
                    n.default)(t).create();
                    if (!(e && e.hasOwnProperty("getMediaInfo") && e.hasOwnProperty("getMediaType") && e.hasOwnProperty("getScheduleController") && e.hasOwnProperty("getStreamInfo") && e.hasOwnProperty("getAbrController") && e.hasOwnProperty("useBufferOccupancyABR")))
                        return r;
                    var i = e.getMediaInfo()
                      , o = e.getMediaType()
                      , s = e.getScheduleController()
                      , l = e.getStreamInfo()
                      , u = e.getAbrController()
                      , d = u.getThroughputHistory()
                      , c = l ? l.id : null
                      , p = l && l.manifestInfo && l.manifestInfo.isDynamic
                      , b = e.useBufferOccupancyABR();
                    if (r.reason = r.reason || {},
                    !b)
                        return r;
                    s.setTimeToLoadDelay(0);
                    var E = function(e) {
                        var t = e.getMediaType()
                          , a = h[t];
                        return a ? 0 !== a.state && y(a, t) : (a = g(e),
                        h[t] = a),
                        a
                    }(e);
                    if (0 === E.state)
                        return r;
                    var k = a.getCurrentBufferLevel(o)
                      , T = d.getAverageThroughput(o, p)
                      , S = d.getSafeAverageThroughput(o, p)
                      , A = d.getAverageLatency(o)
                      , C = void 0;
                    if (r.reason.state = E.state,
                    r.reason.throughput = T,
                    r.reason.latency = A,
                    isNaN(T))
                        return r;
                    switch (E.state) {
                    case 1:
                        C = u.getQualityForBitrate(i, S, A),
                        r.quality = C,
                        r.reason.throughput = S,
                        E.placeholderBuffer = Math.max(0, v(E, C) - k),
                        E.lastQuality = C,
                        !isNaN(E.lastSegmentDurationS) && k >= E.lastSegmentDurationS && (E.state = 2);
                        break;
                    case 2:
                        !function(e, t) {
                            var a = Date.now();
                            if (isNaN(e.lastSegmentFinishTimeMs)) {
                                if (!isNaN(e.lastCallTimeMs)) {
                                    var r = .001 * (a - e.lastCallTimeMs);
                                    e.placeholderBuffer += Math.max(0, r)
                                }
                            } else {
                                var n = .001 * (a - e.lastSegmentFinishTimeMs);
                                e.placeholderBuffer += Math.max(0, n)
                            }
                            e.lastCallTimeMs = a,
                            e.lastSegmentStart = NaN,
                            e.lastSegmentRequestTimeMs = NaN,
                            e.lastSegmentFinishTimeMs = NaN,
                            y(e, t)
                        }(E, o),
                        C = function(e, t) {
                            for (var a = e.bitrates.length, r = NaN, n = NaN, i = 0; i < a; ++i) {
                                var o = (e.Vp * (e.utilities[i] + e.gp) - t) / e.bitrates[i];
                                (isNaN(n) || o >= n) && (n = o,
                                r = i)
                            }
                            return r
                        }(E, k + E.placeholderBuffer);
                        var I = u.getQualityForBitrate(i, S, A);
                        C > E.lastQuality && C > I && (C = Math.max(I, E.lastQuality));
                        var P = Math.max(0, k + E.placeholderBuffer - _(E, C));
                        P <= E.placeholderBuffer ? (E.placeholderBuffer -= P,
                        P = 0) : (P -= E.placeholderBuffer,
                        E.placeholderBuffer = 0,
                        C < u.getTopQualityIndexFor(o, c) ? s.setTimeToLoadDelay(1e3 * P) : P = 0),
                        r.quality = C,
                        r.reason.throughput = T,
                        r.reason.latency = A,
                        r.reason.bufferLevel = k,
                        r.reason.placeholderBuffer = E.placeholderBuffer,
                        r.reason.delay = P,
                        E.lastQuality = C;
                        break;
                    default:
                        f.debug("BOLA ABR rule invoked in bad state."),
                        r.quality = u.getQualityForBitrate(i, S, A),
                        r.reason.state = E.state,
                        r.reason.throughput = S,
                        r.reason.latency = A,
                        E.state = 1,
                        m(E)
                    }
                    return r
                },
                reset: function() {
                    I(),
                    d.off(l.default.BUFFER_EMPTY, b, c),
                    d.off(l.default.PLAYBACK_SEEKING, E, c),
                    d.off(l.default.MEDIA_FRAGMENT_LOADED, k, c),
                    d.off(l.default.METRIC_ADDED, T, c),
                    d.off(l.default.QUALITY_CHANGE_REQUESTED, A, c),
                    d.off(l.default.FRAGMENT_LOADING_ABANDONED, C, c)
                }
            },
            f = (0,
            u.default)(t).getInstance().getLogger(c),
            I(),
            d.on(l.default.BUFFER_EMPTY, b, c),
            d.on(l.default.PLAYBACK_SEEKING, E, c),
            d.on(l.default.MEDIA_FRAGMENT_LOADED, k, c),
            d.on(l.default.METRIC_ADDED, T, c),
            d.on(l.default.QUALITY_CHANGE_REQUESTED, A, c),
            d.on(l.default.FRAGMENT_LOADING_ABANDONED, C, c),
            c
        }
        c.__dashjs_factory_name = "BolaRule",
        t.default = i.default.getClassFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = (e = e || {}).abrController
              , a = e.switchHistory
              , r = e.droppedFramesHistory
              , n = e.currentRequest
              , i = e.useBufferOccupancyABR
              , o = e.streamProcessor ? e.streamProcessor.getScheduleController() : null
              , s = e.streamProcessor ? e.streamProcessor.getRepresentationInfo() : null;
            function l() {
                return s ? s.mediaInfo : null
            }
            return {
                getMediaType: function() {
                    var e = l();
                    return e ? e.type : null
                },
                getMediaInfo: l,
                getDroppedFramesHistory: function() {
                    return r
                },
                getCurrentRequest: function() {
                    return n
                },
                getSwitchHistory: function() {
                    return a
                },
                getStreamInfo: function() {
                    var e = l();
                    return e ? e.streamInfo : null
                },
                getScheduleController: function() {
                    return o
                },
                getAbrController: function() {
                    return t
                },
                getRepresentationInfo: function() {
                    return s
                },
                useBufferOccupancyABR: function() {
                    return i
                }
            }
        }
        o.__dashjs_factory_name = "RulesContext",
        t.default = i.default.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(44));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            var e = []
              , t = [];
            return {
                push: function(a) {
                    a.newValue === n.default.NO_CHANGE && (a.newValue = a.oldValue),
                    e[a.oldValue] || (e[a.oldValue] = {
                        noDrops: 0,
                        drops: 0,
                        dropSize: 0
                    });
                    var r = a.newValue - a.oldValue
                      , i = r < 0 ? 1 : 0
                      , o = i ? -r : 0
                      , s = i ? 0 : 1;
                    if (e[a.oldValue].drops += i,
                    e[a.oldValue].dropSize += o,
                    e[a.oldValue].noDrops += s,
                    t.push({
                        idx: a.oldValue,
                        noDrop: s,
                        drop: i,
                        dropSize: o
                    }),
                    t.length > 8) {
                        var l = t.shift();
                        e[l.idx].drops -= l.drop,
                        e[l.idx].dropSize -= l.dropSize,
                        e[l.idx].noDrops -= l.noDrop
                    }
                },
                getSwitchRequests: function() {
                    return e
                },
                reset: function() {
                    e = [],
                    t = []
                }
            }
        }
        o.__dashjs_factory_name = "SwitchRequestHistory";
        var s = r.default.getClassFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o() {
            var e = []
              , t = 0
              , a = 0;
            return {
                push: function(r, n) {
                    var i = n && n.droppedVideoFrames ? n.droppedVideoFrames : 0
                      , o = n && n.totalVideoFrames ? n.totalVideoFrames : 0
                      , s = i - t;
                    t = i;
                    var l = o - a;
                    a = o,
                    isNaN(r) || (e[r] ? (e[r].droppedVideoFrames += s,
                    e[r].totalVideoFrames += l) : e[r] = {
                        droppedVideoFrames: s,
                        totalVideoFrames: l
                    })
                },
                getFrameHistory: function() {
                    return e
                },
                reset: function(r) {
                    e = [],
                    t = r.droppedVideoFrames,
                    a = r.totalVideoFrames
                }
            }
        }
        o.__dashjs_factory_name = "DroppedFramesHistory";
        var s = i.default.getClassFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(1))
          , n = i(a(0));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            var t = (e = e || {}).settings
              , a = void 0
              , n = void 0
              , i = void 0
              , o = void 0
              , s = void 0;
            function l(e, t, a, r) {
                var n = Math.pow(.5, a / r.fast);
                e.fastEstimate = (1 - n) * t + n * e.fastEstimate;
                var i = Math.pow(.5, a / r.slow);
                e.slowEstimate = (1 - i) * t + i * e.slowEstimate,
                e.totalWeight += a
            }
            function u(e, l, u) {
                return t.get().streaming.abr.movingAverageMethod !== r.default.MOVING_AVERAGE_SLIDING_WINDOW ? function(e, t) {
                    var a = e ? s.throughputHalfLife : s.latencyHalfLife
                      , r = e ? i[t] : o[t];
                    if (!r || r.totalWeight <= 0)
                        return NaN;
                    var n = r.fastEstimate / (1 - Math.pow(.5, r.totalWeight / a.fast))
                      , l = r.slowEstimate / (1 - Math.pow(.5, r.totalWeight / a.slow));
                    return e ? Math.min(n, l) : Math.max(n, l)
                }(e, l) : function(e, t, r) {
                    var i = function(e, t, r) {
                        var i = void 0
                          , o = void 0;
                        if (e ? (i = a[t],
                        o = r ? 3 : 4) : (i = n[t],
                        o = 4),
                        i) {
                            if (o >= i.length)
                                o = i.length;
                            else if (e)
                                for (var s = 1; s < o; ++s) {
                                    var l = i[i.length - s] / i[i.length - s - 1];
                                    if ((l >= 1.3 || l <= 1 / 1.3) && (o += 1) === i.length)
                                        break
                                }
                        } else
                            o = 0;
                        return o
                    }(e, t, r)
                      , o = (e ? a : n)[t];
                    if (0 === i || !o || 0 === o.length)
                        return NaN;
                    return (o = o.slice(-i)).reduce((function(e, t) {
                        return e + t
                    }
                    )) / o.length
                }(e, l, u)
            }
            function d(e, t) {
                return u(!0, e, t)
            }
            function c(e) {
                a[e] = a[e] || [],
                n[e] = n[e] || [],
                i[e] = i[e] || {
                    fastEstimate: 0,
                    slowEstimate: 0,
                    totalWeight: 0
                },
                o[e] = o[e] || {
                    fastEstimate: 0,
                    slowEstimate: 0,
                    totalWeight: 0
                }
            }
            function f() {
                a = {},
                n = {},
                i = {},
                o = {}
            }
            var h = {
                push: function(e, u, d) {
                    if (u.trace && u.trace.length) {
                        var f = u.tresponse.getTime() - u.trequest.getTime() || 1
                          , h = u._tfinish.getTime() - u.tresponse.getTime() || 1
                          , p = u.trace.reduce((function(e, t) {
                            return e + t.b[0]
                        }
                        ), 0)
                          , g = void 0;
                        g = t.get().streaming.lowLatencyEnabled ? u.trace.reduce((function(e, t) {
                            return e + t.d
                        }
                        ), 0) : d ? h : f + h;
                        var m = Math.round(8 * p / g);
                        if (c(e),
                        function(e, a, n) {
                            return e === r.default.VIDEO ? n < t.get().streaming.cacheLoadThresholds[r.default.VIDEO] : e === r.default.AUDIO ? n < t.get().streaming.cacheLoadThresholds[r.default.AUDIO] : void 0
                        }(e, 0, h)) {
                            if (a[e].length > 0 && !a[e].hasCachedEntries)
                                return;
                            a[e].hasCachedEntries = !0
                        } else
                            a[e] && a[e].hasCachedEntries && function(e) {
                                delete a[e],
                                delete n[e],
                                delete i[e],
                                delete o[e],
                                c(e)
                            }(e);
                        a[e].push(m),
                        a[e].length > 20 && a[e].shift(),
                        n[e].push(f),
                        n[e].length > 20 && n[e].shift(),
                        l(i[e], m, .001 * h, s.throughputHalfLife),
                        l(o[e], f, 1, s.latencyHalfLife)
                    }
                },
                getAverageThroughput: d,
                getSafeAverageThroughput: function(e, a) {
                    var r = d(e, a);
                    return isNaN(r) || (r *= t.get().streaming.abr.bandwidthSafetyFactor),
                    r
                },
                getAverageLatency: function(e) {
                    return u(!1, e)
                },
                reset: f
            };
            return s = {
                throughputHalfLife: {
                    fast: 3,
                    slow: 8
                },
                latencyHalfLife: {
                    fast: 1,
                    slow: 2
                }
            },
            f(),
            h
        }
        o.__dashjs_factory_name = "ThroughputHistory",
        t.default = n.default.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = s(a(1))
          , n = s(a(0))
          , i = s(a(209))
          , o = s(a(300));
        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function l(e) {
            e = e || {};
            var t, a = this.context, n = void 0;
            function s() {
                return n.getBuffer()
            }
            return t = {
                getBufferControllerType: function() {
                    return n.getBufferControllerType()
                },
                initialize: function(e, t) {
                    return n.initialize(e, t)
                },
                createBuffer: function(e, t) {
                    return n.createBuffer(e, t)
                },
                getType: function() {
                    return n.getType()
                },
                getBuffer: s,
                setBuffer: function(e) {
                    n.setBuffer(e)
                },
                getBufferLevel: function() {
                    return n.getBufferLevel()
                },
                setMediaSource: function(e) {
                    n.setMediaSource(e)
                },
                getMediaSource: function() {
                    return n.getMediaSource()
                },
                getIsBufferingCompleted: function() {
                    return n.getIsBufferingCompleted()
                },
                getIsPruningInProgress: function() {
                    return n.getIsPruningInProgress()
                },
                dischargePreBuffer: function() {
                    return n.dischargePreBuffer()
                },
                appendInitSegment: function(e) {
                    n.appendInitSegment(e)
                },
                getRangeAt: function(e) {
                    return n.getRangeAt(e)
                },
                reset: function(e) {
                    n.reset(e)
                },
                updateTimestampOffset: function(e) {
                    var t = s();
                    t.timestampOffset === e || isNaN(e) || (t.timestampOffset = e)
                },
                updateAppendWindow: function() {
                    n.updateAppendWindow()
                }
            },
            n = e.type === r.default.FRAGMENTED_TEXT ? (0,
            i.default)(a).create({
                streamInfo: e.streamInfo,
                type: e.type,
                mediaPlayerModel: e.mediaPlayerModel,
                manifestModel: e.manifestModel,
                fragmentModel: e.fragmentModel,
                errHandler: e.errHandler,
                mediaController: e.mediaController,
                representationController: e.representationController,
                adapter: e.adapter,
                textController: e.textController,
                abrController: e.abrController,
                playbackController: e.playbackController,
                settings: e.settings
            }) : (0,
            o.default)(a).create({
                streamInfo: e.streamInfo,
                type: e.type,
                mimeType: e.mimeType,
                fragmentModel: e.fragmentModel,
                errHandler: e.errHandler
            }),
            t
        }
        l.__dashjs_factory_name = "TextBufferController",
        t.default = n.default.getClassFactory(l)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = f(a(1))
          , n = f(a(2))
          , i = f(a(4))
          , o = f(a(0))
          , s = f(a(109))
          , l = f(a(210))
          , u = f(a(159))
          , d = f(a(12))
          , c = f(a(21));
        function f(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function h(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            n.default)(t).getInstance()
              , o = (0,
            u.default)(t).getInstance()
              , f = e.errHandler
              , h = e.streamInfo
              , p = e.type
              , g = e.mimeType
              , m = e.fragmentModel
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0;
            function T(e) {
                b = e
            }
            function S(e) {
                e.sender.getStreamId() !== h.id || e.sender.getType() !== p || e.error || null === k.extract(h.id, e.currentRepresentation.id) && (_ = !1,
                a.trigger(i.default.INIT_FRAGMENT_NEEDED, {
                    sender: y,
                    streamId: h.id,
                    mediaType: p,
                    representationId: e.currentRepresentation.id
                }))
            }
            function A(e) {
                e.chunk.streamId === h.id && e.chunk.mediaInfo.type === p && e.chunk.bytes && (k.save(e.chunk),
                E.append(e.chunk),
                _ = !0,
                a.trigger(i.default.STREAM_COMPLETED, {
                    request: e.request
                }))
            }
            return y = {
                getBufferControllerType: function() {
                    return "NotFragmentedTextBufferController"
                },
                initialize: function(e) {
                    T(e),
                    k = (0,
                    s.default)(t).getInstance()
                },
                createBuffer: function(e) {
                    var a = e[0];
                    try {
                        if (E = (0,
                        l.default)(t).create(b, a),
                        !v) {
                            var n = E.getBuffer();
                            n.hasOwnProperty(r.default.INITIALIZE) && n.initialize(g, h, e, m),
                            v = !0
                        }
                        return E
                    } catch (e) {
                        if (a && (a.isText || -1 !== a.codec.indexOf('codecs="stpp') || -1 !== a.codec.indexOf('codecs="wvtt')))
                            try {
                                E = o.getTextSourceBuffer()
                            } catch (e) {
                                f.error(new d.default(c.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,c.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE + p + " : " + e.message))
                            }
                        else
                            f.error(new d.default(c.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,c.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE + p))
                    }
                },
                getType: function() {
                    return p
                },
                getBuffer: function() {
                    return E
                },
                getBufferLevel: function() {
                    return 0
                },
                setMediaSource: T,
                getMediaSource: function() {
                    return b
                },
                getIsBufferingCompleted: function() {
                    return _
                },
                getIsPruningInProgress: function() {
                    return !1
                },
                dischargePreBuffer: function() {},
                appendInitSegment: function(e) {
                    return null !== k.extract(h.id, e)
                },
                getRangeAt: function() {
                    return null
                },
                reset: function(e) {
                    a.off(i.default.DATA_UPDATE_COMPLETED, S, y),
                    a.off(i.default.INIT_FRAGMENT_LOADED, A, y),
                    !e && E && (E.abort(),
                    E.reset(),
                    E = null)
                },
                updateTimestampOffset: function(e) {
                    E.timestampOffset === e || isNaN(e) || (E.timestampOffset = e)
                }
            },
            v = !1,
            b = null,
            _ = !1,
            a.on(i.default.DATA_UPDATE_COMPLETED, S, y),
            a.on(i.default.INIT_FRAGMENT_LOADED, A, y),
            y
        }
        h.__dashjs_factory_name = "NotFragmentedTextBufferController",
        t.default = o.default.getClassFactory(h)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = f(a(1))
          , n = f(a(25))
          , i = f(a(302))
          , o = f(a(87))
          , s = f(a(2))
          , l = f(a(4))
          , u = f(a(0))
          , d = f(a(3))
          , c = f(a(164));
        function f(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function h(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            s.default)(t).getInstance()
              , u = e.adapter
              , f = e.dashMetrics
              , h = e.mediaPlayerModel
              , p = e.fragmentModel
              , g = e.abrController
              , m = e.playbackController
              , y = e.textController
              , _ = e.streamId
              , v = e.type
              , b = e.mimeType
              , E = e.mediaController
              , k = e.bufferController
              , T = e.settings
              , S = void 0
              , A = void 0
              , C = void 0
              , I = void 0
              , P = void 0
              , w = void 0
              , M = void 0
              , R = void 0
              , x = void 0
              , D = void 0
              , O = void 0
              , N = void 0
              , L = void 0
              , U = void 0
              , F = void 0
              , B = void 0
              , j = void 0
              , G = void 0
              , V = void 0
              , K = void 0;
            function $() {
                return !1 === P
            }
            function q() {
                $() || C && !k.getIsBufferingCompleted() && (A.debug("Schedule Controller starts"),
                P = !1,
                f.createPlaylistTraceMetrics(C.id, 1e3 * m.getTime(), m.getPlaybackRate()),
                I && (I = !1),
                Y(0))
            }
            function H() {
                P || (A.debug("Schedule Controller stops"),
                A.debug(v + " Schedule Controller stops"),
                P = !0,
                clearTimeout(R))
            }
            function W() {
                if (P || w || m.isPaused() && !T.get().streaming.scheduleWhilePaused || (v === r.default.FRAGMENTED_TEXT || v === r.default.TEXT) && !y.isTextEnabled() || k.getIsBufferingCompleted())
                    H();
                else {
                    !function() {
                        var e = m.getTime()
                          , t = 1.5;
                        if (isNaN(C.fragmentDuration)) {
                            var a = f.getCurrentSchedulingInfo(C.mediaInfo.type);
                            t = a ? 1.5 * a.duration : 1.5
                        }
                        var r = p.getRequests({
                            state: o.default.FRAGMENT_MODEL_EXECUTED,
                            time: e + t,
                            threshold: 0
                        })[0];
                        if (r && -1 === F.indexOf(r) && !u.getIsTextTrack(b)) {
                            var i = T.get().streaming.fastSwitchEnabled
                              , s = k.getBufferLevel()
                              , l = g.getAbandonmentStateFor(v)
                              , d = !E.isCurrentTrack(r.mediaInfo) && E.getSwitchMode(r.mediaInfo.type) === c.default.TRACK_SWITCH_MODE_NEVER_REPLACE
                              , h = r.quality < C.quality;
                            i && (d || h) && s >= t && l !== n.default.ABANDON_LOAD ? (X(r),
                            K = !0,
                            A.debug("Reloading outdated fragment at index: ", r.index)) : r.quality > C.quality && !j && ce(m.getTime() + s)
                        }
                    }();
                    var e = F.length > 0;
                    if (j || isNaN(U) || B || e || function(e, t) {
                        L[t] = L[t] || {};
                        var a = g.getTopQualityIndexFor(e, t);
                        return L[t][e] != a && (A.info("Top quality " + e + " index has changed from " + L[t][e] + " to " + a),
                        L[t][e] = a,
                        !0)
                    }(v, _) || O.execute(v, C, D)) {
                        z(!0),
                        !e && V && g.checkPlaybackQuality(v),
                        function() {
                            if (C.quality === U && !B || j) {
                                var e = F.shift();
                                e && e.isInitializationRequest() ? (a.trigger(l.default.INIT_FRAGMENT_NEEDED, {
                                    sender: S,
                                    streamId: _,
                                    mediaType: v,
                                    representationId: e.representationId
                                }),
                                V = !1) : (a.trigger(l.default.MEDIA_FRAGMENT_NEEDED, {
                                    sender: S,
                                    streamId: _,
                                    mediaType: v,
                                    seekTarget: x,
                                    replacement: e
                                }),
                                V = !0)
                            } else
                                B ? (A.debug("Switch track for " + v + ", representation id = " + C.id),
                                (j = E.getSwitchMode(v) === c.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE) && k.replaceBuffer && k.replaceBuffer(),
                                B = !1) : A.debug("Quality has changed, get init request for representationid = " + C.id),
                                a.trigger(l.default.INIT_FRAGMENT_NEEDED, {
                                    sender: S,
                                    streamId: _,
                                    mediaType: v,
                                    representationId: C.id
                                }),
                                U = C.quality,
                                V = !1
                        }()
                    } else
                        Y(500)
                }
            }
            function Y(e) {
                clearTimeout(R),
                R = setTimeout(W, e)
            }
            function z(e) {
                w !== e ? w = e : A.debug("isFragmentProcessingInProgress is already equal to", e)
            }
            function X(e) {
                F.push(e)
            }
            function Q(e) {
                if (m && p) {
                    var t = p.getRequests({
                        state: o.default.FRAGMENT_MODEL_EXECUTED,
                        time: m.getTime(),
                        threshold: 0
                    })[0];
                    t && m.getTime() >= t.startTime && ((!N.mediaInfo || t.mediaInfo.type === N.mediaInfo.type && t.mediaInfo.id !== N.mediaInfo.id) && e && a.trigger(l.default.TRACK_CHANGE_RENDERED, {
                        mediaType: v,
                        oldMediaInfo: N.mediaInfo,
                        newMediaInfo: t.mediaInfo
                    }),
                    t.quality === N.quality && t.adaptationIndex === N.adaptationIndex || !e || a.trigger(l.default.QUALITY_CHANGE_RENDERED, {
                        mediaType: v,
                        oldQuality: N.quality,
                        newQuality: t.quality
                    }),
                    N = {
                        mediaInfo: t.mediaInfo,
                        quality: t.quality,
                        adaptationIndex: t.adaptationIndex
                    })
                }
            }
            function J(e) {
                e.request.mediaInfo.streamInfo.id === _ && e.request.mediaType === v && (H(),
                z(!1),
                A.info("Stream " + _ + " is complete"))
            }
            function Z(e) {
                e.request.mediaInfo.streamInfo.id === _ && e.request.mediaType === v && (A.info("OnFragmentLoadingCompleted - Url:", e.request ? e.request.url : "undefined", e.request.range ? ", Range:" + e.request.range : ""),
                u.getIsTextTrack(b) && z(!1),
                e.error && e.request.serviceLocation && !P && (X(e.request),
                z(!1),
                Y(0)),
                j && (G = e.request))
            }
            function ee() {
                Q(!0)
            }
            function te(e) {
                if (e.streamId === _ && e.mediaType === v)
                    if (j && !isNaN(e.startTime) && (j = !1,
                    p.addExecutedRequest(G)),
                    z(!1),
                    K && !isNaN(e.startTime)) {
                        var t = m.getTime()
                          , a = e.startTime + C.fragmentDuration
                          , r = 1.5 * C.fragmentDuration;
                        Y(t + r >= a ? 0 : 1e3 * (a - (t + r))),
                        K = !1
                    } else
                        Y(0)
            }
            function ae(e) {
                e.streamId === _ && e.mediaType === v && (A.info("onFragmentLoadingAbandoned request: " + e.request.url + " has been aborted"),
                m.isSeeking() || B || (A.info("onFragmentLoadingAbandoned request: " + e.request.url + " has to be downloaded again, origin is not seeking process or switch track call"),
                X(e.request)),
                z(!1),
                Y(0))
            }
            function re(e) {
                e.sender.getType() === v && e.sender.getStreamId()
            }
            function ne(e) {
                v === e.mediaType && _ === e.streamId && H()
            }
            function ie(e) {
                e.streamId === _ && e.mediaType === v && (j && T.get().streaming.flushBufferAtTrackSwitch && m.seek(m.getTime() + .001, !1, !0),
                e.hasEnoughSpaceToAppend && e.quotaExceeded && q())
            }
            function oe(e) {
                e.streamId === _ && e.mediaType === v && (H(),
                z(!1))
            }
            function se() {
                p.abortRequests(),
                H()
            }
            function le() {
                !P && T.get().streaming.scheduleWhilePaused || q()
            }
            function ue(e) {
                ce(e.seekTime),
                fe(0),
                P && q();
                var t = C.DVRWindow && m ? C.DVRWindow.end - m.getTime() : NaN;
                f.updateManifestUpdateInfo({
                    latency: t
                }),
                w ? p.abortRequests() : Y(0)
            }
            function de(e) {
                f.updatePlayListTraceMetrics({
                    playbackspeed: e.playbackRate.toString()
                })
            }
            function ce(e) {
                x = e
            }
            function fe(e) {
                M = e
            }
            function he() {
                V = !0,
                w = !1,
                M = 0,
                x = NaN,
                I = !0,
                U = NaN,
                N = {
                    mediaInfo: void 0,
                    quality: NaN,
                    adaptationIndex: NaN
                },
                L = {},
                F = [],
                P = !0,
                B = !1,
                j = !1,
                G = null,
                K = !1
            }
            return S = {
                initialize: function(e) {
                    D = e,
                    O = (0,
                    i.default)(t).create({
                        abrController: g,
                        dashMetrics: f,
                        mediaPlayerModel: h,
                        textController: y,
                        settings: T
                    }),
                    a.on(l.default.DATA_UPDATE_STARTED, re, this),
                    a.on(l.default.FRAGMENT_LOADING_COMPLETED, Z, this),
                    a.on(l.default.STREAM_COMPLETED, J, this),
                    a.on(l.default.BUFFER_CLEARED, ie, this),
                    a.on(l.default.BYTES_APPENDED_END_FRAGMENT, te, this),
                    a.on(l.default.QUOTA_EXCEEDED, oe, this),
                    a.on(l.default.PLAYBACK_SEEKING, ue, this),
                    a.on(l.default.PLAYBACK_STARTED, le, this),
                    a.on(l.default.PLAYBACK_RATE_CHANGED, de, this),
                    a.on(l.default.PLAYBACK_TIME_UPDATED, ee, this),
                    a.on(l.default.URL_RESOLUTION_FAILED, se, this),
                    a.on(l.default.FRAGMENT_LOADING_ABANDONED, ae, this),
                    a.on(l.default.BUFFERING_COMPLETED, ne, this)
                },
                getType: function() {
                    return v
                },
                getStreamId: function() {
                    return _
                },
                setCurrentRepresentation: function(e) {
                    C = e
                },
                setSeekTarget: ce,
                setTimeToLoadDelay: fe,
                getTimeToLoadDelay: function() {
                    return M
                },
                switchTrackAsked: function() {
                    B = !0
                },
                isStarted: $,
                start: q,
                stop: H,
                reset: function() {
                    a.off(l.default.DATA_UPDATE_STARTED, re, this),
                    a.off(l.default.FRAGMENT_LOADING_COMPLETED, Z, this),
                    a.off(l.default.STREAM_COMPLETED, J, this),
                    a.off(l.default.BUFFER_CLEARED, ie, this),
                    a.off(l.default.BYTES_APPENDED_END_FRAGMENT, te, this),
                    a.off(l.default.QUOTA_EXCEEDED, oe, this),
                    a.off(l.default.PLAYBACK_SEEKING, ue, this),
                    a.off(l.default.PLAYBACK_STARTED, le, this),
                    a.off(l.default.PLAYBACK_RATE_CHANGED, de, this),
                    a.off(l.default.PLAYBACK_TIME_UPDATED, ee, this),
                    a.off(l.default.URL_RESOLUTION_FAILED, se, this),
                    a.off(l.default.FRAGMENT_LOADING_ABANDONED, ae, this),
                    a.off(l.default.BUFFERING_COMPLETED, ne, this),
                    H(),
                    Q(!1),
                    he()
                },
                getBufferTarget: function() {
                    return O.getBufferTarget(v, C)
                },
                processInitRequest: function(e) {
                    e && (z(!0),
                    p.executeRequest(e))
                },
                processMediaRequest: function(e) {
                    e ? (A.debug("Next fragment request url is " + e.url),
                    p.executeRequest(e)) : (m.getIsDynamic() && A.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling."),
                    z(!1),
                    Y(T.get().streaming.lowLatencyEnabled ? 100 : 500))
                }
            },
            A = (0,
            d.default)(t).getInstance().getLogger(S),
            he(),
            S
        }
        h.__dashjs_factory_name = "ScheduleController",
        t.default = u.default.getClassFactory(h)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(1))
          , n = o(a(0))
          , i = o(a(25));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e) {
            var t = (e = e || {}).dashMetrics
              , a = e.mediaPlayerModel
              , n = e.textController
              , o = e.abrController
              , s = e.settings;
            function l(e, l) {
                var u = NaN;
                if (!e || !l)
                    return u;
                if (e === r.default.FRAGMENTED_TEXT)
                    if (n.isTextEnabled())
                        if (isNaN(l.fragmentDuration)) {
                            var d = t.getCurrentSchedulingInfo(i.default.SCHEDULING_INFO);
                            u = d ? d.duration : 0
                        } else
                            u = l.fragmentDuration;
                    else
                        u = 0;
                else {
                    var c = l.mediaInfo.streamInfo;
                    if (o.isPlayingAtTopQuality(c))
                        u = c.manifestInfo.duration >= s.get().streaming.longFormContentDurationThreshold ? s.get().streaming.bufferTimeAtTopQualityLongForm : s.get().streaming.bufferTimeAtTopQuality;
                    else
                        u = a.getStableBufferTime()
                }
                return u
            }
            return {
                execute: function(e, a) {
                    return !e || !a || t.getCurrentBufferLevel(e) < l(e, a)
                },
                getBufferTarget: l
            }
        }
        s.__dashjs_factory_name = "BufferLevelRule",
        t.default = n.default.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(1))
          , n = o(a(12))
          , i = o(a(0));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e) {
            var t = (e = e || {}).eventBus
              , a = e.events
              , i = e.errors
              , o = e.abrController
              , s = e.dashMetrics
              , l = e.playbackController
              , u = e.timelineConverter
              , d = e.type
              , c = e.streamId
              , f = e.dashConstants
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0;
            function _() {
                if (!(o && s && l && u))
                    throw new Error(r.default.MISSING_CONFIG_ERROR)
            }
            function v() {
                return g
            }
            function b() {
                return y
            }
            function E() {
                p = null,
                g = !0,
                m = []
            }
            function k() {
                return d
            }
            function T() {
                _();
                var e = new Date
                  , t = b()
                  , a = 1e3 * l.getTime();
                t && s.addRepresentationSwitch(t.adaptation.type, e, a, t.id)
            }
            function S(e) {
                return null == e || e >= m.length ? null : m[e]
            }
            function A(e, t) {
                var a;
                (e.segmentAvailabilityRange = u.calcSegmentAvailabilityRange(e, t),
                e.segmentAvailabilityRange.end < e.segmentAvailabilityRange.start) ? P(new n.default(i.SEGMENTS_UNAVAILABLE_ERROR_CODE,i.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{
                    availabilityDelay: e.segmentAvailabilityRange.start - e.segmentAvailabilityRange.end
                })) : t && (a = e.segmentAvailabilityRange.end,
                u.setExpectedLiveEdge(a),
                s.updateManifestUpdateInfo({
                    presentationStartTime: a
                }))
            }
            function C(e, r) {
                _();
                for (var n = 0, i = m.length; n < i; n++)
                    A(m[n], e),
                    r && t.trigger(a.REPRESENTATION_UPDATE_STARTED, {
                        sender: h,
                        representation: m[n]
                    })
            }
            function I() {
                g = !0,
                t.trigger(a.DATA_UPDATE_STARTED, {
                    sender: h
                })
            }
            function P(e) {
                g = !1;
                var r = {
                    sender: h,
                    data: p,
                    currentRepresentation: y
                };
                e && (r.error = e),
                t.trigger(a.DATA_UPDATE_COMPLETED, r)
            }
            function w(e) {
                var r = e;
                t.trigger(a.AST_IN_FUTURE, {
                    delay: r
                }),
                setTimeout((function() {
                    v() || (I(),
                    m.forEach((function(e) {
                        e.segmentAvailabilityRange = null
                    }
                    )),
                    C(l.getIsDynamic(), !0))
                }
                ), r)
            }
            function M(e) {
                if (e.sender.getType() === k() && e.sender.getStreamInfo().id === c && v())
                    if (e.error)
                        P(e.error);
                    else {
                        var t, a = e.sender.getStreamInfo(), r = e.representation, u = s.getCurrentManifestUpdate(), d = !1, h = 0, p = void 0;
                        if (r.adaptation.period.mpd.manifest.type === f.DYNAMIC && !r.adaptation.period.mpd.manifest.ignorePostponeTimePeriod && l.getStreamController().getStreams().length <= 1 && (h = function(e, t) {
                            try {
                                var a = l.getStreamController().getActiveStreamInfo()
                                  , r = e.segmentAvailabilityRange.start;
                                a && a.id && a.id !== t.id && (r = Math.min(l.getTime(), r));
                                var n = e.segmentAvailabilityRange.end - r;
                                return 1e3 * (l.getLiveDelay() - n)
                            } catch (e) {
                                return 0
                            }
                        }(r, a)),
                        h > 0)
                            return w(h),
                            void P(new n.default(i.SEGMENTS_UPDATE_FAILED_ERROR_CODE,i.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE));
                        if (u) {
                            for (var g = 0; g < u.representationInfo.length; g++)
                                if ((p = u.representationInfo[g]).index === r.index && p.mediaType === k()) {
                                    d = !0;
                                    break
                                }
                            d || s.addManifestUpdateRepresentationInfo(r, k())
                        }
                        (function() {
                            for (var e = 0, t = m.length; e < t; e++) {
                                var a = m[e].segmentInfoType;
                                if (null === m[e].segmentAvailabilityRange || !m[e].hasInitialization() || (a === f.SEGMENT_BASE || a === f.BASE_URL) && !m[e].segments)
                                    return !1
                            }
                            return !0
                        }
                        )() && (o.setPlaybackQuality(k(), a, (t = y,
                        m.indexOf(t))),
                        s.updateManifestUpdateInfo({
                            latency: y.segmentAvailabilityRange.end - l.getTime()
                        }),
                        s.getCurrentRepresentationSwitch(b().adaptation.type) || T(),
                        P())
                    }
            }
            function R(e) {
                e.isDynamic && C(e.isDynamic)
            }
            function x(e) {
                e.mediaType === k() && c === e.streamInfo.id && (y = S(e.newQuality),
                T())
            }
            function D(e) {
                if (e.newDuration) {
                    var t = b();
                    if (t && t.adaptation.period)
                        t.adaptation.period.duration = e.newDuration
                }
            }
            return h = {
                getData: function() {
                    return p
                },
                isUpdating: v,
                updateData: function(e, t, a, n) {
                    _(),
                    I(),
                    m = t,
                    y = S(n),
                    p = e,
                    a === r.default.VIDEO || a === r.default.AUDIO || a === r.default.FRAGMENTED_TEXT ? C(l.getIsDynamic(), !0) : P()
                },
                updateRepresentation: A,
                getCurrentRepresentation: b,
                getRepresentationForQuality: S,
                getType: k,
                getStreamId: function() {
                    return c
                },
                reset: function() {
                    t.off(a.QUALITY_CHANGE_REQUESTED, x, h),
                    t.off(a.REPRESENTATION_UPDATE_COMPLETED, M, h),
                    t.off(a.WALLCLOCK_TIME_UPDATED, R, h),
                    t.off(a.MANIFEST_VALIDITY_CHANGED, D, h),
                    E()
                }
            },
            E(),
            t.on(a.QUALITY_CHANGE_REQUESTED, x, h),
            t.on(a.REPRESENTATION_UPDATE_COMPLETED, M, h),
            t.on(a.WALLCLOCK_TIME_UPDATED, R, h),
            t.on(a.MANIFEST_VALIDITY_CHANGED, D, h),
            h
        }
        s.__dashjs_factory_name = "RepresentationController",
        t.default = i.default.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(1));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            var t = (e = e || {}).timelineConverter;
            return {
                getLiveEdge: function(e) {
                    return function() {
                        if (!t || !t.hasOwnProperty("getExpectedLiveEdge"))
                            throw new Error(n.default.MISSING_CONFIG_ERROR)
                    }(),
                    e.DVRWindow ? e.DVRWindow.end : 0
                },
                reset: function() {
                    t = null
                }
            }
        }
        o.__dashjs_factory_name = "LiveEdgeFinder",
        t.default = r.default.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(0))
          , n = l(a(306))
          , i = l(a(307))
          , o = l(a(308))
          , s = l(a(309));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u(e) {
            e = e || {};
            var t, a = this.context, r = e.events, l = e.eventBus, u = e.dashConstants, d = void 0;
            function c(e) {
                return e ? e.segments ? d[u.SEGMENT_BASE] : d[e.segmentInfoType] : null
            }
            return t = {
                initialize: function(t) {
                    d[u.SEGMENT_TIMELINE] = (0,
                    n.default)(a).create(e, t),
                    d[u.SEGMENT_TEMPLATE] = (0,
                    i.default)(a).create(e, t),
                    d[u.SEGMENT_LIST] = (0,
                    o.default)(a).create(e, t),
                    d[u.SEGMENT_BASE] = (0,
                    s.default)(a).create(e, t)
                },
                update: function(e, t, a, n, i) {
                    n || l.trigger(r.SEGMENTBASE_INIT_REQUEST_NEEDED, {
                        mimeType: a,
                        representation: e
                    }),
                    i || l.trigger(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED, {
                        mimeType: a,
                        mediaType: t,
                        representation: e
                    })
                },
                getSegmentByIndex: function(e, t, a) {
                    var r = c(e);
                    return r ? r.getSegmentByIndex(e, t, a) : null
                },
                getSegmentByTime: function(e, t) {
                    var a = c(e);
                    return a ? a.getSegmentByTime(e, t) : null
                }
            },
            d = {},
            t
        }
        u.__dashjs_factory_name = "SegmentsController";
        var d = r.default.getClassFactory(u);
        t.default = d
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(0))
          , n = o(a(1))
          , i = a(72);
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e, t) {
            var a = (e = e || {}).timelineConverter;
            function r() {
                if (!a || !a.hasOwnProperty("calcMediaTimeFromPresentationTime") || !a.hasOwnProperty("calcSegmentAvailabilityRange"))
                    throw new Error(n.default.MISSING_CONFIG_ERROR)
            }
            function o(e, r) {
                var n, i, o, s = e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate || e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList, l = s.SegmentTimeline, u = s.SegmentURL_asArray, d = 0, c = 0, f = -1, h = void 0, p = void 0, g = void 0, m = void 0, y = void 0, _ = void 0;
                o = e.timescale;
                var v = !1;
                for (p = 0,
                i = (n = l.S_asArray).length; p < i && !v; p++) {
                    if (m = 0,
                    (h = n[p]).hasOwnProperty("r") && (m = h.r),
                    h.hasOwnProperty("t") && (c = (d = h.t) / o),
                    m < 0) {
                        if ((_ = n[p + 1]) && _.hasOwnProperty("t"))
                            y = _.t / o;
                        else {
                            var b = e.segmentAvailabilityRange ? e.segmentAvailabilityRange.end : a.calcSegmentAvailabilityRange(e, t).end;
                            y = a.calcMediaTimeFromPresentationTime(b, e),
                            e.segmentDuration = h.d / o
                        }
                        m = Math.ceil((y - c) / (h.d / o)) - 1
                    }
                    for (g = 0; g <= m && !v; g++)
                        (v = r(d, c, s, u, h, o, ++f, p)) && (e.segmentDuration = h.d / o,
                        (g < m - 1 || p < i - 1) && f++),
                        c = (d += h.d) / o
                }
                e.availableSegmentsNumber = f
            }
            return {
                getSegmentByIndex: function(e, n, s) {
                    if (r(),
                    !e)
                        return null;
                    var l = null
                      , u = !1;
                    return o(e, (function(r, n, o, d, c, f, h, p) {
                        if (u || s < 0) {
                            var g = o.media
                              , m = c.mediaRange;
                            return d && (g = d[p].media || "",
                            m = d[p].mediaRange),
                            l = (0,
                            i.getTimeBasedSegment)(a, t, e, r, c.d, f, g, m, h, c.tManifest),
                            !0
                        }
                        return n >= s - .5 * c.d / f && (u = !0),
                        !1
                    }
                    )),
                    l
                },
                getSegmentByTime: function(e, n) {
                    if (r(),
                    !e)
                        return null;
                    void 0 === n && (n = null);
                    var s = null
                      , l = a.calcMediaTimeFromPresentationTime(n, e);
                    return o(e, (function(r, n, o, u, d, c, f, h) {
                        if (l < n + d.d / c) {
                            var p = o.media
                              , g = d.mediaRange;
                            return u && (p = u[h].media || "",
                            g = u[h].mediaRange),
                            s = (0,
                            i.getTimeBasedSegment)(a, t, e, r, d.d, c, p, g, f, d.tManifest),
                            !0
                        }
                        return !1
                    }
                    )),
                    s
                }
            }
        }
        s.__dashjs_factory_name = "TimelineSegmentsGetter";
        var l = r.default.getClassFactory(s);
        t.default = l
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(0))
          , n = o(a(1))
          , i = a(72);
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e, t) {
            var a = (e = e || {}).timelineConverter;
            function r() {
                if (!a || !a.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))
                    throw new Error(n.default.MISSING_CONFIG_ERROR)
            }
            function o(e, n) {
                if (r(),
                !e)
                    return null;
                var o = e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;
                n = Math.max(n, 0);
                var s = (0,
                i.getIndexBasedSegment)(a, t, e, n);
                if (s) {
                    s.replacementTime = (n - 1) * e.segmentDuration;
                    var l = o.media;
                    l = (0,
                    i.replaceTokenForTemplate)(l, "Number", s.replacementNumber),
                    l = (0,
                    i.replaceTokenForTemplate)(l, "Time", s.replacementTime),
                    s.media = l
                }
                var u = e.segmentDuration
                  , d = e.segmentAvailabilityRange;
                return isNaN(u) ? e.availableSegmentsNumber = 1 : e.availableSegmentsNumber = Math.ceil((d.end - d.start) / u),
                s
            }
            return {
                getSegmentByIndex: o,
                getSegmentByTime: function(e, t) {
                    if (r(),
                    !e)
                        return null;
                    var n = e.segmentDuration;
                    if (isNaN(n))
                        return null;
                    var i = a.calcPeriodRelativeTimeFromMpdRelativeTime(e, t);
                    return o(e, Math.floor(i / n))
                }
            }
        }
        s.__dashjs_factory_name = "TemplateSegmentsGetter";
        var l = r.default.getClassFactory(s);
        t.default = l
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(0))
          , n = o(a(1))
          , i = a(72);
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e, t) {
            var a = (e = e || {}).timelineConverter;
            function r() {
                if (!a || !a.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))
                    throw new Error(n.default.MISSING_CONFIG_ERROR)
            }
            function o(e, n) {
                if (r(),
                !e)
                    return null;
                var o = e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList
                  , s = o.SegmentURL_asArray.length
                  , l = e && !isNaN(e.startNumber) ? e.startNumber : 1
                  , u = Math.max(l - 1, 0)
                  , d = e.startNumber
                  , c = null;
                if (n - u < s) {
                    var f = o.SegmentURL_asArray[n - u];
                    (c = (0,
                    i.getIndexBasedSegment)(a, t, e, n)) && (c.replacementTime = (d + n - 1) * e.segmentDuration,
                    c.media = f.media ? f.media : "",
                    c.mediaRange = f.mediaRange,
                    c.index = n,
                    c.indexRange = f.indexRange)
                }
                return e.availableSegmentsNumber = s,
                c
            }
            return {
                getSegmentByIndex: o,
                getSegmentByTime: function(e, t) {
                    if (r(),
                    !e)
                        return null;
                    var n = e.segmentDuration;
                    if (isNaN(n))
                        return null;
                    var i = a.calcPeriodRelativeTimeFromMpdRelativeTime(e, t);
                    return o(e, Math.floor(i / n))
                }
            }
        }
        s.__dashjs_factory_name = "ListSegmentsGetter";
        var l = r.default.getClassFactory(s);
        t.default = l
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(1));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            var t = (e = e || {}).timelineConverter;
            function a() {
                if (!t || !t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))
                    throw new Error(n.default.MISSING_CONFIG_ERROR)
            }
            function r(e, t) {
                if (a(),
                !e)
                    return null;
                var r = e.segments ? e.segments.length : -1
                  , n = void 0;
                if (t < r && (n = e.segments[t]) && n.availabilityIdx === t)
                    return n;
                for (var i = 0; i < r; i++)
                    if ((n = e.segments[i]) && n.availabilityIdx === t)
                        return n;
                return null
            }
            return {
                getSegmentByIndex: r,
                getSegmentByTime: function(e, t) {
                    return a(),
                    r(e, function(e, t) {
                        if (!e)
                            return -1;
                        var a = e.segments
                          , r = a ? a.length : null
                          , n = -1
                          , i = void 0
                          , o = void 0
                          , s = void 0
                          , l = void 0
                          , u = void 0;
                        if (a && r > 0)
                            for (u = 0; u < r; u++)
                                if (o = a[u],
                                s = o.presentationStartTime,
                                l = o.duration,
                                t + (i = l / 2) >= s && t - i < s + l) {
                                    n = o.availabilityIdx;
                                    break
                                }
                        return n
                    }(e, t))
                }
            }
        }
        o.__dashjs_factory_name = "SegmentBaseGetter";
        var s = r.default.getClassFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o() {
            var e = void 0
              , t = /^[a-z][a-z0-9+\-_.]*:/i
              , a = /^https?:\/\//i
              , r = /^https:\/\//i
              , n = /^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i
              , i = function(e, t) {
                try {
                    return new window.URL(e,t).toString()
                } catch (t) {
                    return e
                }
            }
              , o = function(e, t) {
                var a = s;
                if (!t)
                    return e;
                if (!d(e))
                    return e;
                c(e) && (a = l),
                f(e) && (a = u);
                var r = a(t)
                  , n = "/" !== r.charAt(r.length - 1) && "/" !== e.charAt(0) ? "/" : "";
                return [r, e].join(n)
            };
            function s(e) {
                var t = e.indexOf("/")
                  , a = e.lastIndexOf("/");
                return -1 !== t ? a === t + 1 ? e : (-1 !== e.indexOf("?") && (e = e.substring(0, e.indexOf("?"))),
                e.substring(0, a + 1)) : ""
            }
            function l(e) {
                var t = e.match(n);
                return t ? t[1] : ""
            }
            function u(e) {
                var a = e.match(t);
                return a ? a[0] : ""
            }
            function d(e) {
                return !t.test(e)
            }
            function c(e) {
                return d(e) && "/" === e.charAt(0)
            }
            function f(e) {
                return 0 === e.indexOf("//")
            }
            return function() {
                try {
                    new window.URL("x","http://y");
                    e = i
                } catch (e) {} finally {
                    e = e || o
                }
            }(),
            {
                parseBaseUrl: s,
                parseOrigin: l,
                parseScheme: u,
                isRelative: d,
                isPathAbsolute: c,
                isSchemeRelative: f,
                isHTTPURL: function(e) {
                    return a.test(e)
                },
                isHTTPS: function(e) {
                    return r.test(e)
                },
                removeHostname: function(e) {
                    return /^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)
                },
                resolve: function(t, a) {
                    return e(t, a)
                }
            }
        }
        o.__dashjs_factory_name = "DefaultURLUtils",
        t.default = i.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = h(a(1))
          , n = h(a(217))
          , i = h(a(87))
          , o = h(a(312))
          , s = h(a(166))
          , l = h(a(2))
          , u = h(a(4))
          , d = h(a(21))
          , c = h(a(0))
          , f = h(a(3));
        function h(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function p(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            l.default)(t).getInstance()
              , c = e.errHandler
              , h = e.mediaPlayerModel
              , p = e.dashMetrics
              , g = (0,
            f.default)(t).getInstance()
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0;
            function b() {
                for (var e in _)
                    _[e].reset();
                _ = {}
            }
            function E(e) {
                if (e.sender) {
                    var t = e.request
                      , i = e.response
                      , o = t.isInitializationRequest()
                      , s = t.mediaInfo.streamInfo;
                    if (!s || s.id === v)
                        if (e.error && (e.request.mediaType !== r.default.AUDIO && e.request.mediaType !== r.default.VIDEO && e.request.mediaType !== r.default.FRAGMENTED_TEXT || a.trigger(u.default.SERVICE_LOCATION_BLACKLIST_ADD, {
                            entry: e.request.serviceLocation
                        })),
                        i && s) {
                            var l = function(e, t, a, r) {
                                var i = new n.default;
                                return i.streamId = a,
                                i.mediaInfo = t.mediaInfo,
                                i.segmentType = t.type,
                                i.start = t.startTime,
                                i.duration = t.duration,
                                i.end = i.start + i.duration,
                                i.bytes = e,
                                i.index = t.index,
                                i.quality = t.quality,
                                i.representationId = t.representationId,
                                i.endFragment = r,
                                i
                            }(i, t, s.id, e.type !== u.default.FRAGMENT_LOADING_PROGRESS);
                            a.trigger(o ? u.default.INIT_FRAGMENT_LOADED : u.default.MEDIA_FRAGMENT_LOADED, {
                                chunk: l,
                                request: t
                            })
                        } else
                            y.warn("No " + t.mediaType + " bytes to push or stream is inactive.")
                }
            }
            return m = {
                getModel: function(r, n) {
                    var l = _[n];
                    return l || (l = (0,
                    i.default)(t).create({
                        streamId: r,
                        dashMetrics: p,
                        fragmentLoader: (0,
                        o.default)(t).create({
                            dashMetrics: p,
                            mediaPlayerModel: h,
                            errHandler: c,
                            requestModifier: (0,
                            s.default)(t).getInstance(),
                            settings: e.settings,
                            boxParser: e.boxParser,
                            eventBus: a,
                            events: u.default,
                            errors: d.default,
                            dashConstants: e.dashConstants,
                            urlUtils: e.urlUtils
                        }),
                        debug: g,
                        eventBus: a,
                        events: u.default
                    }),
                    _[n] = l),
                    l
                },
                setStreamId: function(e) {
                    v = e
                },
                reset: function() {
                    a.off(u.default.FRAGMENT_LOADING_COMPLETED, E, this),
                    a.off(u.default.FRAGMENT_LOADING_PROGRESS, E, this),
                    b()
                }
            },
            y = g.getLogger(m),
            b(),
            a.on(u.default.FRAGMENT_LOADING_COMPLETED, E, m),
            a.on(u.default.FRAGMENT_LOADING_PROGRESS, E, m),
            m
        }
        p.__dashjs_factory_name = "FragmentController",
        t.default = c.default.getClassFactory(p)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(1))
          , n = l(a(89))
          , i = l(a(322))
          , o = l(a(12))
          , s = l(a(0));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u(e) {
            e = e || {};
            var t = this.context
              , a = e.eventBus
              , s = e.events
              , l = e.urlUtils
              , u = e.errors
              , d = void 0
              , c = void 0;
            return d = {
                checkForExistence: function(e) {
                    var t = function(t) {
                        a.trigger(s.CHECK_FOR_EXISTENCE_COMPLETED, {
                            request: e,
                            exists: t
                        })
                    };
                    if (e) {
                        var r = new i.default(e.url);
                        c.load({
                            request: r,
                            success: function() {
                                t(!0)
                            },
                            error: function() {
                                t(!1)
                            }
                        })
                    } else
                        t(!1)
                },
                load: function(e) {
                    var t = function(t, r) {
                        a.trigger(s.LOADING_COMPLETED, {
                            request: e,
                            response: t || null,
                            error: r || null,
                            sender: d
                        })
                    };
                    e ? c.load({
                        request: e,
                        progress: function(t) {
                            a.trigger(s.LOADING_PROGRESS, {
                                request: e,
                                stream: t.stream
                            }),
                            t.data && a.trigger(s.LOADING_DATA_PROGRESS, {
                                request: e,
                                response: t.data || null,
                                error: null,
                                sender: d
                            })
                        },
                        success: function(e) {
                            t(e)
                        },
                        error: function(e, a, r) {
                            t(void 0, new o.default(u.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,a))
                        },
                        abort: function(e) {
                            e && a.trigger(s.LOADING_ABANDONED, {
                                request: e,
                                mediaType: e.mediaType,
                                sender: d
                            })
                        }
                    }) : t(void 0, new o.default(u.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,u.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))
                },
                abort: function() {
                    c && c.abort()
                },
                reset: function() {
                    c && (c.abort(),
                    c = null)
                }
            },
            c = (0,
            n.default)(t).create({
                errHandler: e.errHandler,
                errors: u,
                dashMetrics: e.dashMetrics,
                mediaPlayerModel: e.mediaPlayerModel,
                requestModifier: e.requestModifier,
                useFetch: e.settings.get().streaming.lowLatencyEnabled,
                urlUtils: l,
                constants: r.default,
                boxParser: e.boxParser,
                dashConstants: e.dashConstants
            }),
            d
        }
        u.__dashjs_factory_name = "FragmentLoader",
        t.default = s.default.getClassFactory(u)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(168))
          , n = d(a(314))
          , i = a(20)
          , o = d(a(0))
          , s = d(a(12))
          , l = d(a(219))
          , u = d(a(169));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function f(e) {
            e = e || {};
            var t, a, o = this.context, d = e.errHandler, f = e.dashMetrics, h = e.mediaPlayerModel, p = e.requestModifier, g = e.boxParser, m = e.useFetch || !1, y = e.errors, _ = void 0, v = void 0, b = void 0, E = void 0, k = void 0;
            function T(e, t) {
                var a = e.request
                  , l = []
                  , c = !0
                  , y = !0
                  , S = new Date
                  , A = S
                  , C = 0
                  , I = void 0;
                if (!p || !f || !d)
                    throw new Error("config object is not correct or missing");
                var P = function(e) {
                    y = !1,
                    a.requestStartDate = S,
                    a.requestEndDate = new Date,
                    a.firstByteDate = a.firstByteDate || S,
                    a.checkExistenceOnly || (f.addHttpRequest(a, I.response ? I.response.responseURL : null, I.response ? I.response.status : null, I.response && I.response.getAllResponseHeaders ? I.response.getAllResponseHeaders() : I.response ? I.response.responseHeaders : [], e ? l : null),
                    a.type === i.HTTPRequest.MPD_TYPE && f.addManifestUpdate(a.type, a.requestStartDate, a.requestEndDate))
                }
                  , w = function() {
                    if (-1 !== _.indexOf(I) && (_.splice(_.indexOf(I), 1),
                    y))
                        if (P(!1),
                        t > 0) {
                            t--;
                            var r = {
                                config: e
                            };
                            b.push(r),
                            r.timeout = setTimeout((function() {
                                -1 !== b.indexOf(r) && (b.splice(b.indexOf(r), 1),
                                T(e, t))
                            }
                            ), h.getRetryIntervalsForType(a.type))
                        } else
                            d.error(new s.default(E[a.type],a.url + " is not available",{
                                request: a,
                                response: I.response
                            })),
                            e.error && e.error(a, "error", I.response.statusText),
                            e.complete && e.complete(a, I.response.statusText)
                }
                  , M = void 0;
                M = m && window.fetch && "arraybuffer" === a.responseType && a.type === i.HTTPRequest.MEDIA_SEGMENT_TYPE ? (0,
                n.default)(o).create({
                    requestModifier: p,
                    boxParser: g
                }) : (0,
                r.default)(o).create({
                    requestModifier: p
                });
                var R = p.modifyRequestURL(a.url)
                  , x = function(e) {
                    try {
                        var t = []
                          , a = k.getQueryParameter(e);
                        return a && t.push(a),
                        t
                    } catch (e) {
                        return []
                    }
                }(a);
                R = u.default.addAditionalQueryParameterToUrl(R, x);
                var D = a.checkExistenceOnly ? i.HTTPRequest.HEAD : i.HTTPRequest.GET
                  , O = h.getXHRWithCredentialsForType(a.type);
                I = {
                    url: R,
                    method: D,
                    withCredentials: O,
                    request: a,
                    onload: function() {
                        I.response.status >= 200 && I.response.status <= 299 && (P(!0),
                        e.success && e.success(I.response.response, I.response.statusText, I.response.responseURL),
                        e.complete && e.complete(a, I.response.statusText))
                    },
                    onend: w,
                    onerror: w,
                    progress: function(t) {
                        var r = new Date;
                        c && (c = !1,
                        (!t.lengthComputable || t.lengthComputable && t.total !== t.loaded) && (a.firstByteDate = r)),
                        t.lengthComputable && (a.bytesLoaded = t.loaded,
                        a.bytesTotal = t.total),
                        t.noTrace || (l.push({
                            s: A,
                            d: t.time ? t.time : r.getTime() - A.getTime(),
                            b: [t.loaded ? t.loaded - C : 0]
                        }),
                        A = r,
                        C = t.loaded),
                        e.progress && t && e.progress(t)
                    },
                    onabort: function() {
                        e.abort && e.abort(a)
                    },
                    loader: M
                };
                var N = (new Date).getTime();
                if (isNaN(a.delayLoadingTime) || N >= a.delayLoadingTime)
                    _.push(I),
                    M.load(I);
                else {
                    var L = {
                        httpRequest: I
                    };
                    v.push(L),
                    L.delayTimeout = setTimeout((function() {
                        if (-1 !== v.indexOf(L)) {
                            v.splice(v.indexOf(L), 1);
                            try {
                                S = new Date,
                                A = S,
                                _.push(L.httpRequest),
                                M.load(L.httpRequest)
                            } catch (e) {
                                L.httpRequest.onerror()
                            }
                        }
                    }
                    ), a.delayLoadingTime - N)
                }
            }
            return t = {
                load: function(e) {
                    e.request ? T(e, h.getRetryAttemptsForType(e.request.type)) : e.error && e.error(e.request, "error")
                },
                abort: function() {
                    b.forEach((function(e) {
                        clearTimeout(e.timeout),
                        e.config.request && e.config.abort && e.config.abort(e.config.request)
                    }
                    )),
                    b = [],
                    v.forEach((function(e) {
                        return clearTimeout(e.delayTimeout)
                    }
                    )),
                    v = [],
                    _.forEach((function(e) {
                        e.onloadend = e.onerror = e.onprogress = void 0,
                        e.loader.abort(e)
                    }
                    )),
                    _ = []
                }
            },
            _ = [],
            v = [],
            b = [],
            k = (0,
            l.default)(o).getInstance(),
            c(a = {}, i.HTTPRequest.MPD_TYPE, y.DOWNLOAD_ERROR_ID_MANIFEST_CODE),
            c(a, i.HTTPRequest.XLINK_EXPANSION_TYPE, y.DOWNLOAD_ERROR_ID_XLINK_CODE),
            c(a, i.HTTPRequest.INIT_SEGMENT_TYPE, y.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),
            c(a, i.HTTPRequest.MEDIA_SEGMENT_TYPE, y.DOWNLOAD_ERROR_ID_CONTENT_CODE),
            c(a, i.HTTPRequest.INDEX_SEGMENT_TYPE, y.DOWNLOAD_ERROR_ID_CONTENT_CODE),
            c(a, i.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE, y.DOWNLOAD_ERROR_ID_CONTENT_CODE),
            c(a, i.HTTPRequest.OTHER_TYPE, y.DOWNLOAD_ERROR_ID_CONTENT_CODE),
            E = a,
            t
        }
        f.__dashjs_factory_name = "HTTPLoader";
        var h = o.default.getClassFactory(f);
        t.default = h
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = (e = e || {}).requestModifier
              , a = e.boxParser;
            function r(e, t) {
                e.reader.read().then(t).catch((function(t) {
                    e.onerror && 200 === e.response.status && e.onerror(t)
                }
                ))
            }
            function n(e, t) {
                if ((e = e.filter((function(a) {
                    return a.bytes > t / 4 / e.length
                }
                ))).length > 1) {
                    var a = 0
                      , r = (e[e.length - 1].ts - e[0].ts) / e.length;
                    return e.forEach((function(t, n) {
                        var i = e[n + 1];
                        if (i) {
                            var o = i.ts - t.ts;
                            a += o < r ? o : 0
                        }
                    }
                    )),
                    a
                }
                return null
            }
            return {
                load: function(e) {
                    var i = new Date
                      , o = e.request
                      , s = new Headers;
                    o.range && s.append("Range", "bytes=" + o.range),
                    o.requestStartDate || (o.requestStartDate = i),
                    t && t.modifyRequestHeader({
                        setRequestHeader: function(e, t) {
                            s.append(e, t)
                        }
                    });
                    var l = void 0;
                    "function" == typeof window.AbortController && (l = new AbortController,
                    e.abortController = l,
                    l.signal.onabort = e.onabort);
                    var u = {
                        method: e.method,
                        headers: s,
                        credentials: e.withCredentials ? "include" : void 0,
                        signal: l ? l.signal : void 0
                    };
                    fetch(e.url, u).then((function(t) {
                        e.response || (e.response = {}),
                        e.response.status = t.status,
                        e.response.statusText = t.statusText,
                        e.response.responseURL = t.url,
                        t.ok || e.onerror();
                        var i = ""
                          , o = !0
                          , s = !1
                          , l = void 0;
                        try {
                            for (var u, d = t.headers.keys()[Symbol.iterator](); !(o = (u = d.next()).done); o = !0) {
                                var c = u.value;
                                i += c + ": " + t.headers.get(c) + "\r\n"
                            }
                        } catch (e) {
                            s = !0,
                            l = e
                        } finally {
                            try {
                                !o && d.return && d.return()
                            } finally {
                                if (s)
                                    throw l
                            }
                        }
                        if (e.response.responseHeaders = i,
                        !t.body)
                            return t.arrayBuffer().then((function(t) {
                                e.response.response = t;
                                var a = {
                                    loaded: t.byteLength,
                                    total: t.byteLength,
                                    stream: !1
                                };
                                e.progress(a),
                                e.onload(),
                                e.onend()
                            }
                            ));
                        var f = parseInt(t.headers.get("Content-Length"), 10)
                          , h = 0
                          , p = !1
                          , g = new Uint8Array
                          , m = 0;
                        e.reader = t.body.getReader();
                        var y = [];
                        r(e, (function t(i) {
                            var o = i.value;
                            if (i.done)
                                return g && (e.progress({
                                    loaded: h,
                                    total: isNaN(f) ? h : f,
                                    lengthComputable: !0,
                                    time: n(y, h),
                                    stream: !0
                                }),
                                e.response.response = g.buffer),
                                e.onload(),
                                void e.onend();
                            if (o && o.length > 0) {
                                g = function(e, t) {
                                    if (0 === e.length)
                                        return t;
                                    var a = new Uint8Array(e.length + t.length);
                                    return a.set(e),
                                    a.set(t, e.length),
                                    a
                                }(g, o),
                                h += o.length,
                                y.push({
                                    ts: Date.now(),
                                    bytes: o.length
                                });
                                var s = a.findLastTopIsoBoxCompleted(["moov", "mdat"], g, m);
                                if (s.found) {
                                    var l = s.lastCompletedOffset + s.size
                                      , u = void 0;
                                    l === g.length ? (u = g,
                                    g = new Uint8Array) : (u = new Uint8Array(g.subarray(0, l)),
                                    g = g.subarray(l)),
                                    e.progress({
                                        data: u.buffer,
                                        lengthComputable: !1,
                                        noTrace: !0
                                    }),
                                    m = 0
                                } else
                                    m = s.lastCompletedOffset,
                                    p || (e.progress({
                                        lengthComputable: !1,
                                        noTrace: !0
                                    }),
                                    p = !0)
                            }
                            r(e, t)
                        }
                        ))
                    }
                    )).catch((function(t) {
                        e.onerror && e.onerror(t)
                    }
                    ))
                },
                abort: function(e) {
                    if (e.abortController)
                        e.abortController.abort();
                    else if (e.reader)
                        try {
                            e.reader.cancel(),
                            e.onabort()
                        } catch (e) {}
                },
                calculateDownloadedTime: n
            }
        }
        o.__dashjs_factory_name = "FetchLoader";
        var s = i.default.getClassFactory(o);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }(), i = a(19), o = (r = i) && r.__esModule ? r : {
            default: r
        };
        var s = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.id = null,
                this.index = -1,
                this.adaptation = null,
                this.segmentInfoType = null,
                this.initialization = null,
                this.codecs = null,
                this.codecPrivateData = null,
                this.segmentDuration = NaN,
                this.timescale = 1,
                this.startNumber = 1,
                this.indexRange = null,
                this.range = null,
                this.presentationTimeOffset = 0,
                this.MSETimeOffset = NaN,
                this.segmentAvailabilityRange = null,
                this.availableSegmentsNumber = 0,
                this.bandwidth = NaN,
                this.width = NaN,
                this.height = NaN,
                this.scanType = null,
                this.maxPlayoutRate = NaN,
                this.availabilityTimeOffset = 0,
                this.availabilityTimeComplete = !0
            }
            return n(e, [{
                key: "hasInitialization",
                value: function() {
                    return null !== this.initialization || null !== this.range
                }
            }, {
                key: "hasSegments",
                value: function() {
                    return this.segmentInfoType !== o.default.BASE_URL && this.segmentInfoType !== o.default.SEGMENT_BASE && !this.indexRange
                }
            }]),
            e
        }();
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.period = null,
            this.index = -1,
            this.type = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.id = null,
            this.index = -1,
            this.duration = NaN,
            this.start = NaN,
            this.mpd = null
        };
        r.DEFAULT_ID = "defaultId",
        t.default = r
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.manifest = null,
            this.suggestedPresentationDelay = 0,
            this.availabilityStartTime = null,
            this.availabilityEndTime = Number.POSITIVE_INFINITY,
            this.timeShiftBufferDepth = Number.POSITIVE_INFINITY,
            this.maxSegmentDuration = Number.POSITIVE_INFINITY,
            this.minimumUpdatePeriod = NaN,
            this.mediaPresentationDuration = NaN
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.adaptionSet = null,
            this.representation = null,
            this.period = null,
            this.timescale = 1,
            this.value = "",
            this.schemeIdUri = ""
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = Array.isArray
          , n = Object.keys
          , i = Object.prototype.hasOwnProperty;
        e.exports = function e(t, a) {
            if (t === a)
                return !0;
            if (t && a && "object" == typeof t && "object" == typeof a) {
                var o, s, l, u = r(t), d = r(a);
                if (u && d) {
                    if ((s = t.length) != a.length)
                        return !1;
                    for (o = s; 0 != o--; )
                        if (!e(t[o], a[o]))
                            return !1;
                    return !0
                }
                if (u != d)
                    return !1;
                var c = t instanceof Date
                  , f = a instanceof Date;
                if (c != f)
                    return !1;
                if (c && f)
                    return t.getTime() == a.getTime();
                var h = t instanceof RegExp
                  , p = a instanceof RegExp;
                if (h != p)
                    return !1;
                if (h && p)
                    return t.toString() == a.toString();
                var g = n(t);
                if ((s = g.length) !== n(a).length)
                    return !1;
                for (o = s; 0 != o--; )
                    if (!i.call(a, g[o]))
                        return !1;
                for (o = s; 0 != o--; )
                    if (!e(t[l = g[o]], a[l]))
                        return !1;
                return !0
            }
            return t != t && a != a
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.bitrate = 0,
            this.width = 0,
            this.height = 0,
            this.tilesHor = 0,
            this.tilesVert = 0,
            this.widthPerTile = 0,
            this.heightPerTile = 0,
            this.startNumber = 0,
            this.segmentDuration = 0,
            this.timescale = 0,
            this.templateUrl = "",
            this.id = ""
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(43);
        var i = function(e) {
            function t(e) {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var a = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e));
                return a.checkForExistenceOnly = !0,
                a
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default);
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = u(a(0))
          , n = u(a(1))
          , i = u(a(324))
          , o = u(a(224))
          , s = u(a(215))
          , l = a(72);
        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function d(e) {
            var t, a = this.context, r = void 0;
            function u() {
                r && r.reset()
            }
            return t = {
                provide: function(e, t) {
                    if ("function" == typeof t) {
                        var a, n = r.getCurrentTrack(), o = void 0;
                        if (!n || n.segmentDuration <= 0 || null == e)
                            t(null);
                        else {
                            isNaN(n.segmentDuration) && (o = r.getThumbnailRequestForTime(e)) && (n.segmentDuration = o.duration),
                            a = e % n.segmentDuration;
                            var s = Math.floor(a * n.tilesHor * n.tilesVert / n.segmentDuration)
                              , u = new i.default;
                            if (u.width = Math.floor(n.widthPerTile),
                            u.height = Math.floor(n.heightPerTile),
                            u.x = Math.floor(s % n.tilesHor) * n.widthPerTile,
                            u.y = Math.floor(s / n.tilesHor) * n.heightPerTile,
                            "readThumbnail"in n)
                                return n.readThumbnail(e, (function(e) {
                                    u.url = e,
                                    t(u)
                                }
                                ));
                            if (o)
                                u.url = o.url,
                                n.segmentDuration = NaN;
                            else {
                                var d = Math.floor(e / n.segmentDuration);
                                u.url = function(e, t) {
                                    var a = t + e.startNumber
                                      , r = (0,
                                    l.replaceTokenForTemplate)(e.templateUrl, "Number", a);
                                    return r = (0,
                                    l.replaceTokenForTemplate)(r, "Time", (a - 1) * e.segmentDuration),
                                    r = (0,
                                    l.replaceTokenForTemplate)(r, "Bandwidth", e.bandwidth),
                                    (0,
                                    l.unescapeDollarsInTemplate)(r)
                                }(n, d)
                            }
                            t(u)
                        }
                    }
                },
                setTrackByIndex: function(e) {
                    r.setTrackByIndex(e)
                },
                getCurrentTrackIndex: function() {
                    return r.getCurrentTrackIndex()
                },
                getBitrateList: function() {
                    var e = r.getTracks()
                      , t = 0;
                    return e.map((function(e) {
                        var a = new s.default;
                        return a.mediaType = n.default.IMAGE,
                        a.qualityIndex = t++,
                        a.bitrate = e.bitrate,
                        a.width = e.width,
                        a.height = e.height,
                        a
                    }
                    ))
                },
                reset: u
            },
            u(),
            r = (0,
            o.default)(a).create({
                streamInfo: e.streamInfo,
                adapter: e.adapter,
                baseURLController: e.baseURLController,
                timelineConverter: e.timelineConverter,
                debug: e.debug,
                eventBus: e.eventBus,
                events: e.events,
                dashConstants: e.dashConstants
            }),
            t
        }
        d.__dashjs_factory_name = "ThumbnailController",
        t.default = r.default.getClassFactory(d)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.url = null,
            this.width = null,
            this.height = null,
            this.x = null,
            this.y = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = c(a(12))
          , n = a(20)
          , i = c(a(2))
          , o = c(a(4))
          , s = c(a(21))
          , l = c(a(0))
          , u = c(a(3))
          , d = c(a(39));
        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function f() {
            var e = this.context
              , t = (0,
            i.default)(e).getInstance()
              , a = (0,
            d.default)(e).getInstance()
              , l = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0;
            function _(e) {
                h = e
            }
            function v(e) {
                f = e
            }
            function b(e) {
                var t = Date.parse(e);
                return isNaN(t) && (t = function(e) {
                    var t = void 0
                      , a = void 0
                      , r = /^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);
                    return t = Date.UTC(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10), r[6] && (parseInt(r[6], 10) || 0), r[7] && 1e3 * parseFloat(r[7]) || 0),
                    r[9] && r[10] && (a = 60 * parseInt(r[9], 10) + parseInt(r[10], 10),
                    t += ("+" === r[8] ? -1 : 1) * a * 60 * 1e3),
                    new Date(t).getTime()
                }(e)),
                t
            }
            function E(e) {
                return Date.parse(e)
            }
            function k(e) {
                return Date.parse(e)
            }
            function T(e, t, a) {
                a()
            }
            function S(e, t, a) {
                var r = b(e);
                isNaN(r) ? a() : t(r)
            }
            function A(e, t, r, i, o) {
                var s, l, u = !1, d = new XMLHttpRequest, c = o ? n.HTTPRequest.HEAD : n.HTTPRequest.GET, f = t.match(/\S+/g);
                if (t = f.shift(),
                s = function() {
                    u || (u = !0,
                    f.length ? A(e, f.join(" "), r, i, o) : i())
                }
                ,
                l = function() {
                    var t = void 0
                      , a = void 0;
                    200 === d.status && (t = o ? d.getResponseHeader("Date") : d.response,
                    a = e(t),
                    isNaN(a) || (r(a),
                    u = !0))
                }
                ,
                a.isRelative(t)) {
                    var h = y.resolve();
                    h && (t = a.resolve(t, h.url))
                }
                d.open(c, t),
                d.timeout = 5e3,
                d.onload = l,
                d.onloadend = s,
                d.send()
            }
            function C(e, t, a) {
                A(k, e, t, a, !0)
            }
            function I(e, a, n) {
                _(!1),
                t.trigger(o.default.TIME_SYNCHRONIZATION_COMPLETED, {
                    time: a,
                    offset: n,
                    error: e ? new r.default(s.default.TIME_SYNC_FAILED_ERROR_CODE,s.default.TIME_SYNC_FAILED_ERROR_MESSAGE) : null
                })
            }
            return l = {
                initialize: function(e, t) {
                    p = t,
                    f = 0,
                    h = !1,
                    g = {
                        "urn:mpeg:dash:utc:http-head:2014": C,
                        "urn:mpeg:dash:utc:http-xsdate:2014": A.bind(null, b),
                        "urn:mpeg:dash:utc:http-iso:2014": A.bind(null, E),
                        "urn:mpeg:dash:utc:direct:2014": S,
                        "urn:mpeg:dash:utc:http-head:2012": C,
                        "urn:mpeg:dash:utc:http-xsdate:2012": A.bind(null, b),
                        "urn:mpeg:dash:utc:http-iso:2012": A.bind(null, E),
                        "urn:mpeg:dash:utc:direct:2012": S,
                        "urn:mpeg:dash:utc:http-ntp:2014": T,
                        "urn:mpeg:dash:utc:ntp:2014": T,
                        "urn:mpeg:dash:utc:sntp:2014": T
                    },
                    h || function e(t, a) {
                        var r = a || 0
                          , n = t[r]
                          , i = function(e, t) {
                            var a, r, n = !e || !t;
                            n && p ? (a = m.getLatestMPDRequestHeaderValueByID("Date"),
                            r = null !== a ? new Date(a).getTime() : Number.NaN,
                            isNaN(r) ? I(!0) : (v(r - (new Date).getTime()),
                            I(!1, r / 1e3, f))) : I(n, e, t)
                        };
                        _(!0),
                        n ? g.hasOwnProperty(n.schemeIdUri) ? g[n.schemeIdUri](n.value, (function(e) {
                            var t = (new Date).getTime()
                              , a = function(e, t) {
                                return e - t
                            }(e, t);
                            v(a),
                            c.info("Local time: " + new Date(t)),
                            c.info("Server time: " + new Date(e)),
                            c.info("Server Time - Local Time (ms): " + a),
                            i(e, a)
                        }
                        ), (function() {
                            e(t, r + 1)
                        }
                        )) : e(t, r + 1) : (v(0),
                        i())
                    }(e)
                },
                getOffsetToDeviceTimeMs: function() {
                    return f
                },
                setConfig: function(e) {
                    e && (e.dashMetrics && (m = e.dashMetrics),
                    e.baseURLController && (y = e.baseURLController))
                },
                reset: function() {
                    _(!1)
                }
            },
            c = (0,
            u.default)(e).getInstance().getLogger(l),
            l
        }
        f.__dashjs_factory_name = "TimeSyncController";
        var h = l.default.getSingletonFactory(f);
        h.HTTP_TIMEOUT_MS = 5e3,
        l.default.updateSingletonFactory(f.__dashjs_factory_name, h),
        t.default = h
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(3));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            var e = void 0
              , t = void 0
              , a = this.context;
            return e = {
                createMediaSource: function() {
                    var e = "WebKitMediaSource"in window;
                    return "MediaSource"in window ? new MediaSource : e ? new WebKitMediaSource : null
                },
                attachMediaSource: function(e, t) {
                    var a = window.URL.createObjectURL(e);
                    return t.setSource(a),
                    a
                },
                detachMediaSource: function(e) {
                    e.setSource(null)
                },
                setDuration: function(e, t) {
                    return e.duration != t && (e.duration = t),
                    e.duration
                },
                setSeekable: function(e, t, a) {
                    e && "function" == typeof e.setLiveSeekableRange && "function" == typeof e.clearLiveSeekableRange && "open" === e.readyState && t >= 0 && t < a && (e.clearLiveSeekableRange(),
                    e.setLiveSeekableRange(t, a))
                },
                signalEndOfStream: function(e) {
                    if (e && "open" === e.readyState) {
                        for (var a = e.sourceBuffers, r = 0; r < a.length; r++) {
                            if (a[r].updating)
                                return;
                            if (0 === a[r].buffered.length)
                                return
                        }
                        t.info("call to mediaSource endOfStream"),
                        e.endOfStream()
                    }
                }
            },
            t = (0,
            n.default)(a).getInstance().getLogger(e),
            e
        }
        o.__dashjs_factory_name = "MediaSourceController",
        t.default = r.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(0))
          , n = l(a(3))
          , i = l(a(2))
          , o = l(a(4))
          , s = l(a(168));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u() {
            var e = this.context
              , t = (0,
            i.default)(e).getInstance()
              , a = void 0
              , r = void 0
              , l = void 0
              , u = void 0
              , d = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0;
            function y() {
                if (!h || !p)
                    throw new Error("setConfig function has to be called previously")
            }
            function _() {
                m = !1,
                l = {},
                u = {},
                d = {},
                c = null,
                g = !1,
                f = Date.now() / 1e3
            }
            function v() {
                try {
                    null !== c && m && (clearInterval(c),
                    c = null,
                    m = !1,
                    function() {
                        try {
                            A(u),
                            A(l)
                        } catch (e) {}
                    }())
                } catch (e) {
                    throw e
                }
            }
            function b(e) {
                try {
                    if (1 == e.eventStream.value) {
                        var a = e.eventStream.timescale || 1
                          , n = e.calculatedPresentationTime / a
                          , i = void 0;
                        i = 4294967295 == e.calculatedPresentationTime ? NaN : (e.calculatedPresentationTime + e.duration) / a,
                        r.info("Manifest validity changed: Valid until: " + n + "; remaining duration: " + i),
                        t.trigger(o.default.MANIFEST_VALIDITY_CHANGED, {
                            id: e.id,
                            validUntil: n,
                            newDuration: i,
                            newManifestValidAfter: NaN
                        })
                    }
                } catch (e) {}
            }
            function E() {
                try {
                    if (!g) {
                        var e = p.getTime()
                          , t = e - f;
                        t = f > 0 ? Math.max(0, t) : 0,
                        k(u, t, e),
                        k(l, t, e),
                        function() {
                            try {
                                if (d)
                                    for (var e = p.getTime(), t = Object.keys(d), a = 0; a < t.length; a++) {
                                        var n = t[a]
                                          , i = d[n];
                                        null !== i && (i.duration + i.calculatedPresentationTime) / i.eventStream.timescale < e && (r.debug("Remove Event " + n + " at time " + e),
                                        i = null,
                                        delete d[n])
                                    }
                            } catch (e) {}
                        }(),
                        f = e
                    }
                    g = !1
                } catch (e) {
                    g = !1
                }
            }
            function k(e, t, a) {
                try {
                    if (e)
                        for (var n = Object.keys(e), i = 0; i < n.length; i++) {
                            var o = n[i]
                              , s = e[o];
                            if (void 0 !== s) {
                                var l = s.calculatedPresentationTime / s.eventStream.timescale;
                                l <= a && l + t >= a ? C(o, s, e) : (T(a, t, l) || S(s)) && (r.debug("Deleting event " + o + " as it is expired or invalid"),
                                delete e[o])
                            }
                        }
                } catch (e) {}
            }
            function T(e, t, a) {
                try {
                    return e - t > a
                } catch (e) {
                    return !1
                }
            }
            function S(e) {
                try {
                    var t = e.eventStream.period.start + e.eventStream.period.duration;
                    return e.calculatedPresentationTime / 1e3 > t
                } catch (e) {
                    return !1
                }
            }
            function A(e) {
                try {
                    var t = Object.keys(e)
                      , a = p.getTime();
                    if (!t || 0 === t.length)
                        return;
                    var r = e[t[0]].eventStream && e[t[0]].eventStream.period && !isNaN(e[t[0]].eventStream.period.duration) ? e[t[0]].eventStream.period.duration : NaN
                      , n = e[t[0]].eventStream && e[t[0]].eventStream.period && !isNaN(e[t[0]].eventStream.period.start) ? e[t[0]].eventStream.period.start : NaN;
                    if (isNaN(r) || isNaN(n))
                        return;
                    t.forEach((function(t) {
                        var r = e[t]
                          , n = r.calculatedPresentationTime / r.eventStream.timescale;
                        Math.abs(n - a) < 300 && C(t, r, e)
                    }
                    ))
                } catch (e) {}
            }
            function C(a, n, i) {
                try {
                    var o = p.getTime();
                    n.duration > 0 && (d[a] = n),
                    "urn:mpeg:dash:event:2012" === n.eventStream.schemeIdUri && 1 == n.eventStream.value ? 0 === n.duration && 0 === n.presentationTimeDelta || (r.debug("Starting manifest refresh event " + a + " at " + o),
                    function() {
                        try {
                            y(),
                            h.refreshManifest()
                        } catch (e) {}
                    }()) : "urn:mpeg:dash:event:callback:2015" === n.eventStream.schemeIdUri && 1 == n.eventStream.value ? (r.debug("Starting callback event " + a + " at " + o),
                    function(t) {
                        try {
                            (0,
                            s.default)(e).create({}).load({
                                method: "get",
                                url: t,
                                request: {
                                    responseType: "arraybuffer"
                                }
                            })
                        } catch (e) {
                            throw e
                        }
                    }(n.messageData)) : (r.debug("Starting event " + a + " at " + o),
                    t.trigger(n.eventStream.schemeIdUri, {
                        event: n
                    })),
                    delete i[a]
                } catch (e) {}
            }
            return a = {
                addInlineEvents: function(e) {
                    try {
                        if (y(),
                        e)
                            for (var t = 0; t < e.length; t++) {
                                var a = e[t];
                                l[a.id] = a,
                                r.debug("Add inline event with id " + a.id)
                            }
                        r.debug("Added " + e.length + " inline events")
                    } catch (e) {
                        throw e
                    }
                },
                addInbandEvents: function(e) {
                    try {
                        y();
                        for (var t = 0; t < e.length; t++) {
                            var a = e[t];
                            a.id in u ? r.debug("Repeated event with id " + a.id) : ("urn:mpeg:dash:event:2012" === a.eventStream.schemeIdUri && void 0 === u[a.id] && b(a),
                            u[a.id] = a,
                            r.debug("Add inband event with id " + a.id))
                        }
                        E()
                    } catch (e) {
                        throw e
                    }
                },
                start: function() {
                    try {
                        y(),
                        r.debug("Start Event Controller"),
                        m || isNaN(100) || (m = !0,
                        c = setInterval(E, 100))
                    } catch (e) {
                        throw e
                    }
                },
                setConfig: function(e) {
                    try {
                        if (!e)
                            return;
                        e.manifestUpdater && (h = e.manifestUpdater),
                        e.playbackController && (p = e.playbackController)
                    } catch (e) {
                        throw e
                    }
                },
                reset: function() {
                    v(),
                    _()
                }
            },
            r = (0,
            n.default)(e).getInstance().getLogger(a),
            _(),
            a
        }
        u.__dashjs_factory_name = "EventController",
        t.default = r.default.getSingletonFactory(u)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = s(a(0))
          , n = s(a(3))
          , i = s(a(4))
          , o = s(a(2));
        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function l() {
            var e = this.context
              , t = (0,
            o.default)(e).getInstance()
              , a = void 0
              , r = void 0
              , s = void 0
              , l = void 0
              , u = void 0
              , d = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0;
            function g() {
                p.debug("Stopping the gap controller"),
                u && (clearInterval(u),
                u = null),
                function() {
                    t.off(i.default.WALLCLOCK_TIME_UPDATED, _, this),
                    t.off(i.default.BYTES_APPENDED_END_FRAGMENT, m, this)
                }(),
                u = null,
                d = NaN,
                l = 0
            }
            function m() {
                u || function() {
                    try {
                        u || (p.debug("Starting the gap controller"),
                        u = setInterval((function() {
                            y() && b(c.getTime())
                        }
                        ), 100))
                    } catch (e) {}
                }()
            }
            function y() {
                return s.get().streaming.jumpGaps && f.getActiveStreamProcessors().length > 0 && (!c.isSeeking() || f.hasStreamFinishedBuffering(f.getActiveStream())) && !c.isPaused() && !f.getIsStreamSwitchInProgress() && !f.getHasMediaOrIntialisationError()
            }
            function _() {
                if (y() && ++l >= 10) {
                    var e = c.getTime();
                    r === e ? b(e, !0) : (r = e,
                    d = NaN),
                    l = 0
                }
            }
            function v(e) {
                try {
                    var t = h.getBufferRange();
                    if (!t || t.length <= 1 && e > 0)
                        return null;
                    for (var a = null, r = 0; !a && r < t.length; ) {
                        var n = r > 0 ? t.end(r - 1) : 0;
                        e < t.start(r) && n - e < .1 && (a = t.start(r)),
                        r += 1
                    }
                    return a
                } catch (e) {
                    return null
                }
            }
            function b(e) {
                var a = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]
                  , r = s.get().streaming.smallGapLimit
                  , n = s.get().streaming.jumpLargeGaps
                  , o = null
                  , l = NaN
                  , u = !1;
                if ((o = v(e)) && o > 0) {
                    var h = o - e;
                    h > 0 && (h <= r || n) && (l = o)
                }
                var g = c.getTimeToStreamEnd();
                isNaN(l) && a && isFinite(g) && !isNaN(g) && (g < r || f.hasStreamFinishedBuffering(f.getActiveStream())) && (l = parseFloat(c.getStreamEndTime().toFixed(5)),
                u = !0),
                l > 0 && d !== l && (u ? (p.warn("Jumping to end of stream because of gap from " + e + " to " + l + ". Gap duration: " + (l - e)),
                t.trigger(i.default.GAP_CAUSED_SEEK_TO_PERIOD_END, {
                    seekTime: l
                })) : (p.warn("Jumping gap from " + e + " to " + l + ". Gap duration: " + (l - e)),
                c.seek(l, !0, !0)),
                d = l)
            }
            return a = {
                reset: g,
                setConfig: function(e) {
                    e && (e.settings && (s = e.settings),
                    e.playbackController && (c = e.playbackController),
                    e.streamController && (f = e.streamController),
                    e.videoModel && (h = e.videoModel),
                    e.timelineConverter && e.timelineConverter,
                    e.adapter && e.adapter)
                },
                initialize: function() {
                    !function() {
                        t.on(i.default.WALLCLOCK_TIME_UPDATED, _, this),
                        t.on(i.default.BYTES_APPENDED_END_FRAGMENT, m, this)
                    }()
                }
            },
            p = (0,
            n.default)(e).getInstance().getLogger(a),
            g(),
            a
        }
        l.__dashjs_factory_name = "GapController",
        t.default = r.default.getSingletonFactory(l)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(330))
          , n = d(a(331))
          , i = d(a(39))
          , o = d(a(222))
          , s = d(a(0))
          , l = d(a(2))
          , u = d(a(4));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c() {
            var e = void 0
              , t = void 0
              , a = this.context
              , s = (0,
            l.default)(a).getInstance()
              , d = (0,
            i.default)(a).getInstance()
              , c = void 0
              , f = void 0;
            function h(e) {
                c.invalidateSelectedIndexes(e.entry)
            }
            return e = {
                reset: function() {
                    c.reset(),
                    f.reset()
                },
                initialize: function(e) {
                    var a;
                    c.setConfig({
                        adapter: t
                    }),
                    a = e,
                    c.update(a),
                    f.chooseSelector(t.getIsDVB(a))
                },
                resolve: function(e) {
                    var t = c.getForPath(e).reduce((function(e, t) {
                        var a = f.select(t);
                        return a ? (d.isRelative(a.url) ? e.url = d.resolve(a.url, e.url) : (e.url = a.url,
                        e.serviceLocation = a.serviceLocation),
                        e.availabilityTimeOffset = a.availabilityTimeOffset,
                        e.availabilityTimeComplete = a.availabilityTimeComplete,
                        e) : new o.default
                    }
                    ), new o.default);
                    if (!d.isRelative(t.url))
                        return t
                },
                setConfig: function(e) {
                    e.baseURLTreeModel && (c = e.baseURLTreeModel),
                    e.baseURLSelector && (f = e.baseURLSelector),
                    e.adapter && (t = e.adapter)
                }
            },
            c = (0,
            r.default)(a).create(),
            f = (0,
            n.default)(a).create(),
            s.on(u.default.SERVICE_LOCATION_BLACKLIST_CHANGED, h, e),
            e
        }
        c.__dashjs_factory_name = "BaseURLController",
        t.default = s.default.getClassFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(223))
          , n = i(a(0));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = function e(t, a) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.data = {
                baseUrls: t || null,
                selectedIdx: a || NaN
            },
            this.children = []
        };
        function s() {
            var e, t = void 0, a = void 0, n = this.context, i = (0,
            r.default)(n).getInstance();
            function s(e, t, r) {
                var n = a.getBaseURLsFromElement(r);
                e[t] ? i.areEqual(n, e[t].data.baseUrls) || (e[t].data.baseUrls = n,
                e[t].data.selectedIdx = NaN) : e[t] = new o(n)
            }
            function l(e) {
                !function() {
                    if (!a || !a.hasOwnProperty("getBaseURLsFromElement") || !a.hasOwnProperty("getRepresentationSortFunction"))
                        throw new Error("setConfig function has to be called previously")
                }();
                var r = a.getBaseURLsFromElement(e);
                i.areEqual(r, t.data.baseUrls) || (t.data.baseUrls = r,
                t.data.selectedIdx = NaN),
                e && e.Period_asArray && e.Period_asArray.forEach((function(e, r) {
                    s(t.children, r, e),
                    e.AdaptationSet_asArray && e.AdaptationSet_asArray.forEach((function(e, n) {
                        s(t.children[r].children, n, e),
                        e.Representation_asArray && e.Representation_asArray.sort(a.getRepresentationSortFunction()).forEach((function(e, a) {
                            s(t.children[r].children[n].children, a, e)
                        }
                        ))
                    }
                    ))
                }
                ))
            }
            function u() {
                t = new o
            }
            return e = {
                reset: u,
                update: function(e) {
                    l(e)
                },
                getForPath: function(e) {
                    var a = t
                      , r = [a.data];
                    return e && e.forEach((function(e) {
                        (a = a.children[e]) && r.push(a.data)
                    }
                    )),
                    r.filter((function(e) {
                        return e.baseUrls.length
                    }
                    ))
                },
                invalidateSelectedIndexes: function(e) {
                    !function e(a, r) {
                        var n = r || t;
                        a(n.data),
                        n.children && n.children.forEach((function(t) {
                            return e(a, t)
                        }
                        ))
                    }((function(t) {
                        isNaN(t.selectedIdx) || e === t.baseUrls[t.selectedIdx].serviceLocation && (t.selectedIdx = NaN)
                    }
                    ))
                },
                setConfig: function(e) {
                    e.adapter && (a = e.adapter)
                }
            },
            u(),
            e
        }
        s.__dashjs_factory_name = "BaseURLTreeModel",
        t.default = n.default.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = f(a(21))
          , n = f(a(2))
          , i = f(a(4))
          , o = f(a(332))
          , s = f(a(333))
          , l = f(a(334))
          , u = f(a(0))
          , d = f(a(12))
          , c = a(56);
        function f(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function h() {
            var e, t = this.context, a = (0,
            n.default)(t).getInstance(), u = void 0, f = void 0, h = void 0, p = void 0;
            function g() {
                u.reset()
            }
            return e = {
                chooseSelector: function(e) {
                    (0,
                    c.checkParameterType)(e, "boolean"),
                    p = e ? h : f
                },
                select: function(e) {
                    if (e) {
                        var t = e.baseUrls
                          , n = e.selectedIdx;
                        if (!isNaN(n))
                            return t[n];
                        var o = p.select(t);
                        return o ? (e.selectedIdx = t.indexOf(o),
                        o) : (a.trigger(i.default.URL_RESOLUTION_FAILED, {
                            error: new d.default(r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)
                        }),
                        void (p === f && g()))
                    }
                },
                reset: g,
                setConfig: function(e) {
                    e.selector && (p = e.selector)
                }
            },
            u = (0,
            o.default)(t).create({
                updateEventName: i.default.SERVICE_LOCATION_BLACKLIST_CHANGED,
                addBlacklistEventName: i.default.SERVICE_LOCATION_BLACKLIST_ADD
            }),
            f = (0,
            l.default)(t).create({
                blacklistController: u
            }),
            h = (0,
            s.default)(t).create({
                blacklistController: u
            }),
            p = f,
            e
        }
        h.__dashjs_factory_name = "BaseURLSelector",
        t.default = u.default.getClassFactory(h)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(0))
          , n = i(a(2));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            e = e || {};
            var t = []
              , a = (0,
            n.default)(this.context).getInstance()
              , r = e.updateEventName
              , i = e.addBlacklistEventName;
            function o(e) {
                -1 === t.indexOf(e) && (t.push(e),
                a.trigger(r, {
                    entry: e
                }))
            }
            function s(e) {
                o(e.entry)
            }
            return function() {
                i && a.on(i, s, this)
            }(),
            {
                add: o,
                contains: function(e) {
                    return !!(t.length && e && e.length) && -1 !== t.indexOf(e)
                },
                reset: function() {
                    t = []
                }
            }
        }
        o.__dashjs_factory_name = "BlackListController",
        t.default = r.default.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = (e = e || {}).blacklistController;
            return {
                select: function(e) {
                    return e && function(e) {
                        var t = 0
                          , a = []
                          , r = 0
                          , n = void 0
                          , i = void 0;
                        if ((i = e.sort((function(e, t) {
                            var a = e.dvb_priority - t.dvb_priority;
                            return isNaN(a) ? 0 : a
                        }
                        )).filter((function(e, t, a) {
                            return !t || a[0].dvb_priority && e.dvb_priority && a[0].dvb_priority === e.dvb_priority
                        }
                        ))).length)
                            return i.length > 1 && (i.forEach((function(e) {
                                t += e.dvb_weight,
                                a.push(t)
                            }
                            )),
                            n = Math.floor(Math.random() * (t - 1)),
                            a.every((function(e, t) {
                                return r = t,
                                !(n < e)
                            }
                            ))),
                            i[r]
                    }((a = [],
                    e.filter((function(e) {
                        return !t.contains(e.serviceLocation) || (e.dvb_priority && a.push(e.dvb_priority),
                        !1)
                    }
                    )).filter((function(e) {
                        return !a.length || !e.dvb_priority || -1 === a.indexOf(e.dvb_priority)
                    }
                    ))));
                    var a
                }
            }
        }
        o.__dashjs_factory_name = "DVBSelector",
        t.default = i.default.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = (e = e || {}).blacklistController;
            return {
                select: function(e) {
                    var a = 0
                      , r = void 0;
                    return e && e.some((function(e, r) {
                        return a = r,
                        !t.contains(e.serviceLocation)
                    }
                    )) && (r = e[a]),
                    r
                }
            }
        }
        o.__dashjs_factory_name = "BasicSelector",
        t.default = i.default.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = m(a(1))
          , n = m(a(19))
          , i = m(a(336))
          , o = m(a(89))
          , s = m(a(39))
          , l = m(a(226))
          , u = m(a(12))
          , d = a(20)
          , c = m(a(2))
          , f = m(a(4))
          , h = m(a(21))
          , p = m(a(0))
          , g = m(a(338));
        function m(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function y(e) {
            e = e || {};
            var t = this.context
              , a = e.debug
              , p = (0,
            c.default)(t).getInstance()
              , m = (0,
            s.default)(t).getInstance()
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = e.mssHandler
              , T = e.errHandler;
            function S(e) {
                p.trigger(f.default.INTERNAL_MANIFEST_LOADED, {
                    manifest: e.manifest
                })
            }
            return y = {
                load: function(e) {
                    var n = new l.default(e,d.HTTPRequest.MPD_TYPE);
                    v.load({
                        request: n,
                        success: function(n, i, o) {
                            if (b) {
                                var s = void 0
                                  , l = void 0
                                  , d = void 0;
                                if (o && o !== e ? (l = m.parseBaseUrl(o),
                                s = o) : (m.isRelative(e) && (e = m.resolve(e, window.location.href)),
                                l = m.parseBaseUrl(e)),
                                null === E && (E = function(e) {
                                    var r = null;
                                    return e.indexOf("SmoothStreamingMedia") > -1 ? (k && (r = k.createMssParser(),
                                    k.registerEvents()),
                                    r) : e.indexOf("MPD") > -1 ? (0,
                                    g.default)(t).create({
                                        debug: a
                                    }) : r
                                }(n)),
                                null !== E) {
                                    b.setMatchers(E.getMatchers()),
                                    b.setIron(E.getIron());
                                    try {
                                        d = E.parse(n)
                                    } catch (t) {
                                        return void p.trigger(f.default.INTERNAL_MANIFEST_LOADED, {
                                            manifest: null,
                                            error: new u.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE + "" + e)
                                        })
                                    }
                                    d ? (d.url = s || e,
                                    d.originalUrl || (d.originalUrl = d.url),
                                    d.hasOwnProperty(r.default.LOCATION) && (l = m.parseBaseUrl(d.Location_asArray[0]),
                                    _.debug("BaseURI set by Location to: " + l)),
                                    d.baseUri = l,
                                    d.loadedTime = new Date,
                                    b.resolveManifestOnLoad(d),
                                    p.trigger(f.default.ORIGINAL_MANIFEST_LOADED, {
                                        originalManifest: n
                                    })) : p.trigger(f.default.INTERNAL_MANIFEST_LOADED, {
                                        manifest: null,
                                        error: new u.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE + "" + e)
                                    })
                                } else
                                    p.trigger(f.default.INTERNAL_MANIFEST_LOADED, {
                                        manifest: null,
                                        error: new u.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE + "" + e)
                                    })
                            }
                        },
                        error: function(t, a, r) {
                            p.trigger(f.default.INTERNAL_MANIFEST_LOADED, {
                                manifest: null,
                                error: new u.default(h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE + (e + ", ") + r)
                            })
                        }
                    })
                },
                reset: function() {
                    p.off(f.default.XLINK_READY, S, y),
                    b && (b.reset(),
                    b = null),
                    v && (v.abort(),
                    v = null),
                    k && k.reset()
                }
            },
            _ = a.getLogger(y),
            p.on(f.default.XLINK_READY, S, y),
            v = (0,
            o.default)(t).create({
                errHandler: e.errHandler,
                dashMetrics: e.dashMetrics,
                mediaPlayerModel: e.mediaPlayerModel,
                requestModifier: e.requestModifier,
                useFetch: e.settings.get().streaming.lowLatencyEnabled,
                urlUtils: m,
                constants: r.default,
                dashConstants: n.default,
                errors: h.default
            }),
            b = (0,
            i.default)(t).create({
                errHandler: T,
                dashMetrics: e.dashMetrics,
                mediaPlayerModel: e.mediaPlayerModel,
                requestModifier: e.requestModifier,
                settings: e.settings
            }),
            E = null,
            y
        }
        y.__dashjs_factory_name = "ManifestLoader";
        var _ = p.default.getClassFactory(y);
        t.default = _
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(337))
          , n = d(a(2))
          , i = d(a(4))
          , o = d(a(0))
          , s = d(a(227))
          , l = d(a(39))
          , u = d(a(19));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            n.default)(t).getInstance()
              , o = (0,
            l.default)(t).getInstance()
              , d = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0;
            function m(e, t, a) {
                var r = {}
                  , n = void 0
                  , i = void 0;
                r.elements = e,
                r.type = t,
                r.resolveType = a,
                0 === r.elements.length && _(r);
                for (var s = 0; s < r.elements.length; s++)
                    n = r.elements[s],
                    i = o.isHTTPURL(n.url) ? n.url : n.originalContent.BaseURL + n.url,
                    g.load(i, n, r)
            }
            function y(e) {
                var t, a = void 0, r = "";
                if (a = e.element,
                t = e.resolveObject,
                a.resolvedContent) {
                    var n = 0;
                    0 === a.resolvedContent.indexOf("<?xml") && (n = a.resolvedContent.indexOf("?>") + 2),
                    r = a.resolvedContent.substr(0, n) + "<response>" + a.resolvedContent.substr(n) + "</response>",
                    a.resolvedContent = p.xml_str2json(r)
                }
                (function(e) {
                    var t = void 0;
                    for (t = 0; t < e.elements.length; t++)
                        if (!1 === e.elements[t].resolved)
                            return !1;
                    return !0
                }
                )(t) && _(t)
            }
            function _(e) {
                var t = []
                  , r = void 0
                  , n = void 0;
                if (function(e) {
                    var t = []
                      , a = void 0
                      , r = void 0
                      , n = void 0
                      , i = void 0
                      , o = void 0
                      , s = void 0;
                    for (i = e.elements.length - 1; i >= 0; i--) {
                        if (a = e.elements[i],
                        r = a.type + "_asArray",
                        a.resolvedContent) {
                            if (a.resolvedContent)
                                for (o = 0; o < a.resolvedContent[r].length; o++)
                                    n = a.resolvedContent[r][o],
                                    t.push(n)
                        } else
                            delete a.originalContent["xlink:actuate"],
                            delete a.originalContent["xlink:href"],
                            t.push(a.originalContent);
                        for (a.parentElement[r].splice(a.index, 1),
                        s = 0; s < t.length; s++)
                            a.parentElement[r].splice(a.index + s, 0, t[s]);
                        t = []
                    }
                    e.elements.length > 0 && f.run(h)
                }(e),
                "onActuate" === e.resolveType && a.trigger(i.default.XLINK_READY, {
                    manifest: h
                }),
                "onLoad" === e.resolveType)
                    switch (e.type) {
                    case u.default.PERIOD:
                        for (r = 0; r < h[u.default.PERIOD + "_asArray"].length; r++)
                            (n = h[u.default.PERIOD + "_asArray"][r]).hasOwnProperty(u.default.ADAPTATION_SET + "_asArray") && (t = t.concat(v(n[u.default.ADAPTATION_SET + "_asArray"], n, u.default.ADAPTATION_SET, "onLoad"))),
                            n.hasOwnProperty(u.default.EVENT_STREAM + "_asArray") && (t = t.concat(v(n[u.default.EVENT_STREAM + "_asArray"], n, u.default.EVENT_STREAM, "onLoad")));
                        m(t, u.default.ADAPTATION_SET, "onLoad");
                        break;
                    case u.default.ADAPTATION_SET:
                        a.trigger(i.default.XLINK_READY, {
                            manifest: h
                        })
                    }
            }
            function v(e, t, a, r) {
                var n = []
                  , i = void 0
                  , o = void 0
                  , s = void 0;
                for (o = e.length - 1; o >= 0; o--)
                    (i = e[o]).hasOwnProperty("xlink:href") && "urn:mpeg:dash:resolve-to-zero:2013" === i["xlink:href"] && e.splice(o, 1);
                for (o = 0; o < e.length; o++)
                    (i = e[o]).hasOwnProperty("xlink:href") && i.hasOwnProperty("xlink:actuate") && i["xlink:actuate"] === r && (s = b(i["xlink:href"], t, a, o, r, i),
                    n.push(s));
                return n
            }
            function b(e, t, a, r, n, i) {
                return {
                    url: e,
                    parentElement: t,
                    type: a,
                    index: r,
                    resolveType: n,
                    originalContent: i,
                    resolvedContent: null,
                    resolved: !1
                }
            }
            return d = {
                resolveManifestOnLoad: function(e) {
                    p = new s.default({
                        escapeMode: !1,
                        attributePrefix: "",
                        arrayAccessForm: "property",
                        emptyNodeForm: "object",
                        stripWhitespaces: !1,
                        enableToStringFunc: !1,
                        ignoreRoot: !0,
                        matchers: c
                    }),
                    m(v((h = e).Period_asArray, h, u.default.PERIOD, "onLoad"), u.default.PERIOD, "onLoad")
                },
                setMatchers: function(e) {
                    e && (c = e)
                },
                setIron: function(e) {
                    e && (f = e)
                },
                reset: function() {
                    a.off(i.default.XLINK_ELEMENT_LOADED, y, d),
                    g && (g.reset(),
                    g = null)
                }
            },
            a.on(i.default.XLINK_ELEMENT_LOADED, y, d),
            g = (0,
            r.default)(t).create({
                errHandler: e.errHandler,
                dashMetrics: e.dashMetrics,
                mediaPlayerModel: e.mediaPlayerModel,
                requestModifier: e.requestModifier,
                settings: e.settings
            }),
            d
        }
        c.__dashjs_factory_name = "XlinkController",
        t.default = o.default.getClassFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = c(a(12))
          , n = c(a(89))
          , i = a(20)
          , o = c(a(226))
          , s = c(a(2))
          , l = c(a(4))
          , u = c(a(0))
          , d = c(a(21));
        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function f(e) {
            e = e || {};
            var t = this.context
              , a = (0,
            s.default)(t).getInstance()
              , u = (0,
            n.default)(t).create({
                errHandler: e.errHandler,
                dashMetrics: e.dashMetrics,
                mediaPlayerModel: e.mediaPlayerModel,
                requestModifier: e.requestModifier,
                useFetch: e.settings ? e.settings.get().streaming.lowLatencyEnabled : null,
                errors: d.default
            });
            return {
                load: function(e, t, n) {
                    var s = function(i, o) {
                        t.resolved = !0,
                        t.resolvedContent = i || null,
                        a.trigger(l.default.XLINK_ELEMENT_LOADED, {
                            element: t,
                            resolveObject: n,
                            error: i || o ? null : new r.default(d.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,d.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE + e)
                        })
                    };
                    if ("urn:mpeg:dash:resolve-to-zero:2013" === e)
                        s(null, !0);
                    else {
                        var c = new o.default(e,i.HTTPRequest.XLINK_EXPANSION_TYPE);
                        u.load({
                            request: c,
                            success: function(e) {
                                s(e)
                            },
                            error: function() {
                                s(null)
                            }
                        })
                    }
                },
                reset: function() {
                    u && (u.abort(),
                    u = null)
                }
            }
        }
        f.__dashjs_factory_name = "XlinkLoader",
        t.default = u.default.getClassFactory(f)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = f(a(0))
          , n = f(a(339))
          , i = f(a(227))
          , o = f(a(340))
          , s = f(a(341))
          , l = f(a(342))
          , u = f(a(343))
          , d = f(a(344))
          , c = f(a(346));
        function f(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function h(e) {
            e = e || {};
            var t = this.context
              , a = e.debug
              , r = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0;
            return r = {
                parse: function(e) {
                    var t = void 0
                      , a = window.performance.now();
                    if (!(t = p.xml_str2json(e)))
                        throw new Error("parsing the manifest failed");
                    var r = window.performance.now();
                    g.run(t);
                    var n = window.performance.now();
                    return f.info("Parsing complete: ( xml2json: " + (r - a).toPrecision(3) + "ms, objectiron: " + (n - r).toPrecision(3) + "ms, total: " + ((n - a) / 1e3).toPrecision(3) + "s)"),
                    t.protocol = "DASH",
                    t
                },
                getMatchers: function() {
                    return h
                },
                getIron: function() {
                    return g
                }
            },
            f = a.getLogger(r),
            h = [new s.default, new l.default, new u.default, new o.default],
            p = new i.default({
                escapeMode: !1,
                attributePrefix: "",
                arrayAccessForm: "property",
                emptyNodeForm: "object",
                stripWhitespaces: !1,
                enableToStringFunc: !0,
                ignoreRoot: !0,
                matchers: h
            }),
            g = (0,
            n.default)(t).create({
                adaptationset: new d.default,
                period: new c.default
            }),
            r
        }
        h.__dashjs_factory_name = "DashParser",
        t.default = r.default.getClassFactory(h)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        }
        : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        }
        , i = a(0), o = (r = i) && r.__esModule ? r : {
            default: r
        };
        function s(e) {
            function t(e, t) {
                for (var a in e)
                    t.hasOwnProperty(a) || (t[a] = e[a])
            }
            function a(e, a, r) {
                for (var i = 0, o = e.length; i < o; ++i) {
                    var s = e[i];
                    if (a[s.name])
                        if (r[s.name]) {
                            if (s.merge) {
                                var l = a[s.name]
                                  , u = r[s.name];
                                "object" === (void 0 === l ? "undefined" : n(l)) && "object" === (void 0 === u ? "undefined" : n(u)) ? t(l, u) : r[s.name] = l + u
                            }
                        } else
                            r[s.name] = a[s.name]
                }
            }
            function r(e, t) {
                for (var n = 0, i = e.children.length; n < i; ++n) {
                    var o = e.children[n]
                      , s = t[o.name + "_asArray"];
                    if (s)
                        for (var l = 0, u = s.length; l < u; ++l) {
                            var d = s[l];
                            a(e.properties, t, d),
                            r(o, d)
                        }
                }
            }
            return {
                run: function(t) {
                    if (null === t || "object" !== (void 0 === t ? "undefined" : n(t)))
                        return t;
                    if ("period"in e)
                        for (var a = e.period, i = t.Period_asArray, o = 0, s = i.length; o < s; ++o) {
                            var l = i[o];
                            if (r(a, l),
                            "adaptationset"in e) {
                                var u = l.AdaptationSet_asArray;
                                if (u)
                                    for (var d = e.adaptationset, c = 0, f = u.length; c < f; ++c)
                                        r(d, u[c])
                            }
                        }
                    return t
                }
            }
        }
        s.__dashjs_factory_name = "ObjectIron";
        var l = o.default.getClassFactory(s);
        t.default = l
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(112))
          , n = i(a(19));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        var s = function(e) {
            function t() {
                return function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, (function(e, t) {
                    var a, r = (o(a = {}, n.default.MPD, [n.default.ID, n.default.PROFILES]),
                    o(a, n.default.PERIOD, [n.default.ID]),
                    o(a, n.default.BASE_URL, [n.default.SERVICE_LOCATION, n.default.BYTE_RANGE]),
                    o(a, n.default.SEGMENT_BASE, [n.default.INDEX_RANGE]),
                    o(a, n.default.INITIALIZATION, [n.default.RANGE]),
                    o(a, n.default.REPRESENTATION_INDEX, [n.default.RANGE]),
                    o(a, n.default.SEGMENT_LIST, [n.default.INDEX_RANGE]),
                    o(a, n.default.BITSTREAM_SWITCHING, [n.default.RANGE]),
                    o(a, n.default.SEGMENT_URL, [n.default.MEDIA_RANGE, n.default.INDEX_RANGE]),
                    o(a, n.default.SEGMENT_TEMPLATE, [n.default.INDEX_RANGE, n.default.MEDIA, n.default.INDEX, n.default.INITIALIZATION_MINUS, n.default.BITSTREAM_SWITCHING_MINUS]),
                    o(a, n.default.ASSET_IDENTIFIER, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.EVENT_STREAM, [n.default.VALUE]),
                    o(a, n.default.ADAPTATION_SET, [n.default.PROFILES, n.default.MIME_TYPE, n.default.SEGMENT_PROFILES, n.default.CODECS, n.default.CONTENT_TYPE]),
                    o(a, n.default.FRAME_PACKING, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.AUDIO_CHANNEL_CONFIGURATION, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.CONTENT_PROTECTION, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.ESSENTIAL_PROPERTY, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.SUPPLEMENTAL_PROPERTY, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.INBAND_EVENT_STREAM, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.ACCESSIBILITY, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.ROLE, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.RATING, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.VIEWPOINT, [n.default.VALUE, n.default.ID]),
                    o(a, n.default.CONTENT_COMPONENT, [n.default.CONTENT_TYPE]),
                    o(a, n.default.REPRESENTATION, [n.default.ID, n.default.DEPENDENCY_ID, n.default.MEDIA_STREAM_STRUCTURE_ID]),
                    o(a, n.default.SUBSET, [n.default.ID]),
                    o(a, n.default.METRICS, [n.default.METRICS_MINUS]),
                    o(a, n.default.REPORTING, [n.default.VALUE, n.default.ID]),
                    a);
                    if (r.hasOwnProperty(t)) {
                        var i = r[t];
                        return void 0 !== i && i.indexOf(e.name) >= 0
                    }
                    return !1
                }
                ), (function(e) {
                    return String(e)
                }
                )))
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(r.default);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(112))
          , n = o(a(1))
          , i = o(a(19));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = /^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/
          , l = function(e) {
            function t() {
                return function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, (function(e) {
                    for (var t = [i.default.MIN_BUFFER_TIME, i.default.MEDIA_PRESENTATION_DURATION, i.default.MINIMUM_UPDATE_PERIOD, i.default.TIMESHIFT_BUFFER_DEPTH, i.default.MAX_SEGMENT_DURATION, i.default.MAX_SUBSEGMENT_DURATION, i.default.SUGGESTED_PRESENTATION_DELAY, i.default.START, n.default.START_TIME, i.default.DURATION], a = t.length, r = 0; r < a; r++)
                        if (e.nodeName === t[r])
                            return s.test(e.value);
                    return !1
                }
                ), (function(e) {
                    var t = s.exec(e)
                      , a = 31536e3 * parseFloat(t[3] || 0) + 2592e3 * parseFloat(t[5] || 0) + 86400 * parseFloat(t[7] || 0) + 3600 * parseFloat(t[9] || 0) + 60 * parseFloat(t[11] || 0) + parseFloat(t[13] || 0);
                    return void 0 !== t[1] && (a = -a),
                    a
                }
                )))
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(r.default);
        t.default = l
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(112), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        var o = /^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/
          , s = function(e) {
            function t() {
                return function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, (function(e) {
                    return o.test(e.value)
                }
                ), (function(e) {
                    var t = o.exec(e)
                      , a = void 0;
                    if (a = Date.UTC(parseInt(t[1], 10), parseInt(t[2], 10) - 1, parseInt(t[3], 10), parseInt(t[4], 10), parseInt(t[5], 10), t[6] && parseInt(t[6], 10) || 0, t[7] && 1e3 * parseFloat(t[7]) || 0),
                    t[9] && t[10]) {
                        var r = 60 * parseInt(t[9], 10) + parseInt(t[10], 10);
                        a += ("+" === t[8] ? -1 : 1) * r * 60 * 1e3
                    }
                    return new Date(a)
                }
                )))
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(i.default);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(112), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        var o = /^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/
          , s = function(e) {
            function t() {
                return function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t),
                function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, (function(e) {
                    return o.test(e.value)
                }
                ), (function(e) {
                    return parseFloat(e)
                }
                )))
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(i.default);
        t.default = s
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(228))
          , n = i(a(19));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = [n.default.PROFILES, n.default.WIDTH, n.default.HEIGHT, n.default.SAR, n.default.FRAMERATE, n.default.AUDIO_SAMPLING_RATE, n.default.MIME_TYPE, n.default.SEGMENT_PROFILES, n.default.CODECS, n.default.MAXIMUM_SAP_PERIOD, n.default.START_WITH_SAP, n.default.MAX_PLAYOUT_RATE, n.default.CODING_DEPENDENCY, n.default.SCAN_TYPE, n.default.FRAME_PACKING, n.default.AUDIO_CHANNEL_CONFIGURATION, n.default.CONTENT_PROTECTION, n.default.ESSENTIAL_PROPERTY, n.default.SUPPLEMENTAL_PROPERTY, n.default.INBAND_EVENT_STREAM];
                return function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, n.default.ADAPTATION_SET, e, [new r.default(n.default.REPRESENTATION,e,[new r.default(n.default.SUB_REPRESENTATION,e)])]))
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(r.default);
        t.default = o
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e(t) {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e);
                var a;
                this._name = t,
                this._merge = (a = t) && a.length && a.charAt(0) === a.charAt(0).toUpperCase()
            }
            return r(e, [{
                key: "name",
                get: function() {
                    return this._name
                }
            }, {
                key: "merge",
                get: function() {
                    return this._merge
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(228))
          , n = i(a(19));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = [n.default.SEGMENT_BASE, n.default.SEGMENT_TEMPLATE, n.default.SEGMENT_LIST];
                return function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, n.default.PERIOD, e, [new r.default(n.default.ADAPTATION_SET,e,[new r.default(n.default.REPRESENTATION,e)])]))
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(r.default);
        t.default = o
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(2))
          , n = o(a(4))
          , i = o(a(0));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s() {
            var e = this.context
              , t = (0,
            r.default)(e).getInstance();
            return {
                error: function(e) {
                    t.trigger(n.default.ERROR, {
                        error: e
                    })
                }
            }
        }
        s.__dashjs_factory_name = "ErrorHandler",
        t.default = i.default.getSingletonFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o() {
            var e, t = void 0;
            return e = {
                supportsMediaSource: function() {
                    var e = "WebKitMediaSource"in window
                      , t = "MediaSource"in window;
                    return e || t
                },
                supportsEncryptedMedia: function() {
                    return t
                },
                supportsCodec: function(e) {
                    return !(!("MediaSource"in window) || !MediaSource.isTypeSupported(e)) || !(!("WebKitMediaSource"in window) || !WebKitMediaSource.isTypeSupported(e))
                },
                setEncryptedMediaSupported: function(e) {
                    t = e
                }
            },
            t = !1,
            e
        }
        o.__dashjs_factory_name = "Capabilities",
        t.default = i.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(350))
          , n = i(a(0));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            var e = void 0;
            return {
                initialize: function(t) {
                    if (e = new r.default,
                    !t)
                        return null;
                    var a = t.indexOf("#");
                    if (-1 !== a)
                        for (var n = t.substr(a + 1).split("&"), i = 0, o = n.length; i < o; ++i) {
                            var s = n[i]
                              , l = s.indexOf("=");
                            if (-1 !== l) {
                                var u = s.substring(0, l);
                                e.hasOwnProperty(u) && (e[u] = s.substr(l + 1))
                            }
                        }
                },
                getURIFragmentData: function() {
                    return e
                }
            }
        }
        o.__dashjs_factory_name = "URIFragmentModel",
        t.default = n.default.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.t = null,
            this.xywh = null,
            this.track = null,
            this.id = null,
            this.s = null,
            this.r = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(2))
          , n = o(a(4))
          , i = o(a(0));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s() {
            var e = this.context
              , t = (0,
            r.default)(e).getInstance()
              , a = void 0;
            return {
                getValue: function() {
                    return a
                },
                setValue: function(e) {
                    a = e,
                    e && t.trigger(n.default.MANIFEST_LOADED, {
                        data: e
                    })
                }
            }
        }
        s.__dashjs_factory_name = "ManifestModel",
        t.default = i.default.getSingletonFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = u(a(220))
          , n = u(a(0))
          , i = u(a(1))
          , o = u(a(214))
          , s = u(a(111))
          , l = a(56);
        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function d() {
            var e, t = void 0, a = void 0, n = void 0, u = {
                scheme: "urn:mpeg:dash:utc:http-xsdate:2014",
                value: "http://time.akamai.com/?iso&ms"
            }, d = this.context, c = (0,
            s.default)(d).getInstance();
            function f(e) {
                var t = void 0;
                for (t = 0; t < n.length; t++)
                    if (n[t].rulename === e)
                        return t;
                return -1
            }
            function h() {
                return c.get().streaming.lowLatencyEnabled ? c.get().streaming.liveDelay || 3 : c.get().streaming.liveDelay
            }
            function p(e, a) {
                g(e, a);
                var n = new r.default;
                n.schemeIdUri = e,
                n.value = a,
                t.push(n)
            }
            function g(e, a) {
                (0,
                l.checkParameterType)(e, "string"),
                (0,
                l.checkParameterType)(a, "string"),
                t.forEach((function(r, n) {
                    r.schemeIdUri === e && r.value === a && t.splice(n, 1)
                }
                ))
            }
            return e = {
                getABRCustomRules: function() {
                    return n
                },
                addABRCustomRule: function(e, t, a) {
                    if ("string" != typeof e || e !== o.default.ABANDON_FRAGMENT_RULES && e !== o.default.QUALITY_SWITCH_RULES || "string" != typeof t)
                        throw i.default.BAD_ARGUMENT_ERROR;
                    var r = f(t);
                    -1 === r ? n.push({
                        type: e,
                        rulename: t,
                        rule: a
                    }) : (n[r].type = e,
                    n[r].rule = a)
                },
                removeABRCustomRule: function(e) {
                    if (e) {
                        var t = f(e);
                        -1 !== t && n.splice(t, 1)
                    } else
                        n = []
                },
                getStableBufferTime: function() {
                    if (c.get().streaming.lowLatencyEnabled)
                        return .6 * h();
                    var e = c.get().streaming.stableBufferTime;
                    return e > -1 ? e : c.get().streaming.fastSwitchEnabled ? 20 : 12
                },
                getRetryAttemptsForType: function(e) {
                    var t = isNaN(c.get().streaming.retryAttempts.lowLatencyMultiplyFactor) ? 5 : c.get().streaming.retryAttempts.lowLatencyMultiplyFactor;
                    return c.get().streaming.lowLatencyEnabled ? c.get().streaming.retryAttempts[e] * t : c.get().streaming.retryAttempts[e]
                },
                getRetryIntervalsForType: function(e) {
                    var t = isNaN(c.get().streaming.retryIntervals.lowLatencyReductionFactor) ? 10 : c.get().streaming.retryIntervals.lowLatencyReductionFactor;
                    return c.get().streaming.lowLatencyEnabled ? c.get().streaming.retryIntervals[e] / t : c.get().streaming.retryIntervals[e]
                },
                getLiveDelay: h,
                getLiveCatchupLatencyThreshold: function() {
                    try {
                        var e = c.get().streaming.liveCatchupLatencyThreshold
                          , t = h();
                        if (null !== e && !isNaN(e))
                            return Math.max(e, t);
                        var a = c.get().streaming.liveCatchUpMinDrift
                          , r = !isNaN(t) && t ? isNaN(a) ? h() : c.get().streaming.liveCatchUpMinDrift + h() : NaN;
                        return r && !isNaN(r) ? 2 * r : NaN
                    } catch (e) {
                        return NaN
                    }
                },
                addUTCTimingSource: p,
                removeUTCTimingSource: g,
                getUTCTimingSources: function() {
                    return t
                },
                clearDefaultUTCTimingSources: function() {
                    t = []
                },
                restoreDefaultUTCTimingSources: function() {
                    p(u.scheme, u.value)
                },
                setXHRWithCredentialsForType: function e(t, r) {
                    t ? a[t] = !!r : Object.keys(a).forEach((function(t) {
                        e(t, r)
                    }
                    ))
                },
                getXHRWithCredentialsForType: function(e) {
                    var t = a[e];
                    return void 0 === t ? a.default : t
                },
                getDefaultUtcTimingSource: function() {
                    return u
                },
                reset: function() {}
            },
            t = [],
            a = {
                default: !1
            },
            n = [],
            e
        }
        d.__dashjs_factory_name = "MediaPlayerModel",
        t.default = n.default.getSingletonFactory(d)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = s(a(0))
          , n = s(a(2))
          , i = s(a(4))
          , o = s(a(3));
        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function l() {
            var e = void 0
              , t = void 0
              , a = void 0
              , r = void 0
              , s = void 0
              , l = this.context
              , u = (0,
            n.default)(l).getInstance()
              , d = [];
            function c() {
                a && (a.playbackRate = s || 1,
                a.removeEventListener("canplay", c))
            }
            function f(e) {
                a && (a.readyState <= 2 && e > 0 ? a.addEventListener("canplay", c) : a.playbackRate = e)
            }
            function h() {
                return d.length > 0
            }
            function p(e) {
                var t = d.indexOf(e)
                  , r = void 0;
                null !== e && (-1 !== t && d.splice(t, 1),
                a && !1 === h() && 0 === a.playbackRate && (f(s || 1),
                a.paused || ((r = document.createEvent("Event")).initEvent("playing", !0, !1),
                a.dispatchEvent(r))))
            }
            function g() {
                if (a && h() && 0 === a.playbackRate) {
                    var e = document.createEvent("Event");
                    e.initEvent("waiting", !0, !1),
                    a.dispatchEvent(e)
                }
            }
            function m() {
                return a ? a.buffered : null
            }
            function y(e, t, r, n, i) {
                if (a)
                    for (var o = 0; o < a.textTracks.length; o++)
                        if (a.textTracks[o].kind === e && (!t || a.textTracks[o].label == t) && a.textTracks[o].language === r && a.textTracks[o].isTTML === n && a.textTracks[o].isEmbedded === i)
                            return a.textTracks[o];
                return null
            }
            return e = {
                initialize: function() {
                    u.on(i.default.PLAYBACK_PLAYING, g, this)
                },
                setCurrentTime: function(e, t) {
                    if (a) {
                        if (a.currentTime == e)
                            return;
                        try {
                            e = t ? function(e) {
                                var t = m()
                                  , a = e
                                  , r = 9999999999;
                                if (t)
                                    for (var n = 0; n < t.length; n++) {
                                        var i = t.start(n)
                                          , o = t.end(n)
                                          , s = Math.abs(i - e)
                                          , l = Math.abs(o - e);
                                        if (e >= i && e <= o)
                                            return e;
                                        s < r && (r = s,
                                        a = i),
                                        l < r && (r = l,
                                        a = o)
                                    }
                                return a
                            }(e) : e,
                            a.currentTime = e
                        } catch (t) {
                            0 === a.readyState && t.code === t.INVALID_STATE_ERR && setTimeout((function() {
                                a.currentTime = e
                            }
                            ), 400)
                        }
                    }
                },
                play: function() {
                    if (a) {
                        a.autoplay = !0;
                        var e = a.play();
                        e && e.catch && "undefined" != typeof Promise && e.catch((function(e) {
                            "NotAllowedError" === e.name && u.trigger(i.default.PLAYBACK_NOT_ALLOWED),
                            t.warn("Caught pending play exception - continuing (" + e + ")")
                        }
                        ))
                    }
                },
                isPaused: function() {
                    return a ? a.paused : null
                },
                pause: function() {
                    a && (a.pause(),
                    a.autoplay = !1)
                },
                isStalled: h,
                isSeeking: function() {
                    return a ? a.seeking : null
                },
                getTime: function() {
                    return a ? a.currentTime : null
                },
                getPlaybackRate: function() {
                    return a ? a.playbackRate : null
                },
                setPlaybackRate: f,
                getPlayedRanges: function() {
                    return a ? a.played : null
                },
                getEnded: function() {
                    return a ? a.ended : null
                },
                setStallState: function(e, t) {
                    !function(e, t) {
                        t ? function(e) {
                            var t = void 0;
                            if (null === e || a.seeking || -1 !== d.indexOf(e))
                                return;
                            d.push(e),
                            a && 1 === d.length && ((t = document.createEvent("Event")).initEvent("waiting", !0, !1),
                            s = a.playbackRate,
                            f(0),
                            a.dispatchEvent(t))
                        }(e) : p(e)
                    }(e, t)
                },
                getElement: function() {
                    return a
                },
                setElement: function(e) {
                    if (!(null == e || e && /^(VIDEO|AUDIO)$/i.test(e.nodeName)))
                        throw "element is not video or audio DOM type!";
                    (a = e) && (a.preload = "auto")
                },
                setSource: function(e) {
                    a && (e ? a.src = e : (a.removeAttribute("src"),
                    a.load()))
                },
                getSource: function() {
                    return a ? a.src : null
                },
                getTTMLRenderingDiv: function() {
                    return r
                },
                setTTMLRenderingDiv: function(e) {
                    (r = e).style.position = "absolute",
                    r.style.display = "flex",
                    r.style.overflow = "hidden",
                    r.style.pointerEvents = "none",
                    r.style.top = 0,
                    r.style.left = 0
                },
                getPlaybackQuality: function() {
                    if (!a)
                        return null;
                    var e = "webkitDroppedFrameCount"in a && "webkitDecodedFrameCount"in a
                      , t = null;
                    return "getVideoPlaybackQuality"in a ? t = a.getVideoPlaybackQuality() : e && (t = {
                        droppedVideoFrames: a.webkitDroppedFrameCount,
                        totalVideoFrames: a.webkitDroppedFrameCount + a.webkitDecodedFrameCount,
                        creationTime: new Date
                    }),
                    t
                },
                addEventListener: function(e, t) {
                    a && a.addEventListener(e, t)
                },
                removeEventListener: function(e, t) {
                    a && a.removeEventListener(e, t)
                },
                getReadyState: function() {
                    return a ? a.readyState : NaN
                },
                getBufferRange: m,
                getClientWidth: function() {
                    return a ? a.clientWidth : NaN
                },
                getClientHeight: function() {
                    return a ? a.clientHeight : NaN
                },
                getTextTracks: function() {
                    return a ? a.textTracks : []
                },
                getTextTrack: y,
                addTextTrack: function(e, t, r, n, i) {
                    if (!a)
                        return null;
                    var o = y(e, t, r, n, i);
                    return o || ((o = a.addTextTrack(e, t, r)).isEmbedded = i,
                    o.isTTML = n),
                    o
                },
                appendChild: function(e) {
                    a && (a.appendChild(e),
                    void 0 !== e.isTTML && (a.textTracks[a.textTracks.length - 1].isTTML = e.isTTML,
                    a.textTracks[a.textTracks.length - 1].isEmbedded = e.isEmbedded))
                },
                removeChild: function(e) {
                    a && a.removeChild(e)
                },
                getVideoWidth: function() {
                    return a ? a.videoWidth : NaN
                },
                getVideoHeight: function() {
                    return a ? a.videoHeight : NaN
                },
                getVideoRelativeOffsetTop: function() {
                    var e = a.parentNode.host || a.parentNode;
                    return e ? a.getBoundingClientRect().top - e.parentNode.getBoundingClientRect().top : NaN
                },
                getVideoRelativeOffsetLeft: function() {
                    var e = a.parentNode.host || a.parentNode;
                    return e ? a.getBoundingClientRect().left - e.getBoundingClientRect().left : NaN
                },
                reset: function() {
                    u.off(i.default.PLAYBACK_PLAYING, g, this)
                }
            },
            t = (0,
            o.default)(l).getInstance().getLogger(e),
            e
        }
        l.__dashjs_factory_name = "VideoModel",
        t.default = r.default.getSingletonFactory(l)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(0))
          , n = o(a(3))
          , i = o(a(1));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var s = [{
            oldKey: "dashjs_vbitrate",
            newKey: "dashjs_video_bitrate"
        }, {
            oldKey: "dashjs_abitrate",
            newKey: "dashjs_audio_bitrate"
        }, {
            oldKey: "dashjs_vsettings",
            newKey: "dashjs_video_settings"
        }, {
            oldKey: "dashjs_asettings",
            newKey: "dashjs_audio_settings"
        }];
        function l(e) {
            e = e || {};
            var t = this.context
              , a = e.settings
              , r = void 0
              , o = void 0
              , l = void 0;
            function u(e) {
                if (void 0 !== l)
                    return l;
                l = !1;
                var t = void 0;
                try {
                    "undefined" != typeof window && (t = window[e])
                } catch (e) {
                    return o.warn("DOMStorage access denied: " + e.message),
                    l
                }
                if (!t || "localStorage" !== e && "sessionStorage" !== e)
                    return l;
                try {
                    t.setItem("1", "1"),
                    t.removeItem("1"),
                    l = !0
                } catch (e) {
                    o.warn("DOMStorage is supported, but cannot be used: " + e.message)
                }
                return l
            }
            function d() {
                return 6e5 * Math.round((new Date).getTime() / 6e5)
            }
            function c(e, t) {
                return u(e) && a.get().streaming[t + "CachingInfo"].enabled
            }
            function f() {
                if (!a)
                    throw new Error(i.default.MISSING_CONFIG_ERROR)
            }
            return r = {
                getSavedBitrateSettings: function(e) {
                    var t = NaN;
                    if (f(),
                    c("localStorage", "lastBitrate")) {
                        var r = "dashjs_?_bitrate".replace(/\?/, e);
                        try {
                            var n = JSON.parse(localStorage.getItem(r)) || {}
                              , i = (new Date).getTime() - parseInt(n.timestamp, 10) >= a.get().streaming.lastBitrateCachingInfo.ttl || !1
                              , s = parseFloat(n.bitrate);
                            isNaN(s) || i ? i && localStorage.removeItem(r) : (t = s,
                            o.debug("Last saved bitrate for " + e + " was " + s))
                        } catch (e) {
                            return null
                        }
                    }
                    return t
                },
                setSavedBitrateSettings: function(e, t) {
                    if (c("localStorage", "lastBitrate") && t) {
                        var a = "dashjs_?_bitrate".replace(/\?/, e);
                        try {
                            localStorage.setItem(a, JSON.stringify({
                                bitrate: t.toFixed(3),
                                timestamp: d()
                            }))
                        } catch (e) {
                            o.error(e.message)
                        }
                    }
                },
                getSavedMediaSettings: function(e) {
                    var t = null;
                    if (f(),
                    c("localStorage", "lastMediaSettings")) {
                        var r = "dashjs_?_settings".replace(/\?/, e);
                        try {
                            var n = JSON.parse(localStorage.getItem(r)) || {}
                              , i = (new Date).getTime() - parseInt(n.timestamp, 10) >= a.get().streaming.lastMediaSettingsCachingInfo.ttl || !1;
                            t = n.settings,
                            i && (localStorage.removeItem(r),
                            t = null)
                        } catch (e) {
                            return null
                        }
                    }
                    return t
                },
                setSavedMediaSettings: function(e, t) {
                    if (c("localStorage", "lastMediaSettings")) {
                        var a = "dashjs_?_settings".replace(/\?/, e);
                        try {
                            localStorage.setItem(a, JSON.stringify({
                                settings: t,
                                timestamp: d()
                            }))
                        } catch (e) {
                            o.error(e.message)
                        }
                    }
                }
            },
            o = (0,
            n.default)(t).getInstance().getLogger(r),
            u("localStorage") && s.forEach((function(e) {
                var t = localStorage.getItem(e.oldKey);
                if (t) {
                    localStorage.removeItem(e.oldKey);
                    try {
                        localStorage.setItem(e.newKey, t)
                    } catch (e) {
                        o.error(e.message)
                    }
                }
            }
            )),
            r
        }
        l.__dashjs_factory_name = "DOMStorage";
        var u = r.default.getSingletonFactory(l);
        t.default = u
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(0))
          , n = o(a(356))
          , i = o(a(357));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e) {
            e = e || {};
            var t = this.context
              , a = e.eventBus
              , r = e.events
              , o = e.dashMetrics
              , s = e.mediaPlayerModel
              , l = e.errHandler
              , u = e.baseURLController
              , d = e.debug
              , c = e.boxParser
              , f = e.requestModifier
              , h = e.errors
              , p = void 0
              , g = void 0
              , m = void 0;
            function y(e) {
                return "webm" === (e ? e.split("/")[1] : "").toLowerCase()
            }
            function _(e) {
                y(e.mimeType) ? m.loadInitialization(e.representation) : g.loadInitialization(e.representation)
            }
            function v(e) {
                y(e.mimeType) ? m.loadSegments(e.representation, e.mediaType, e.representation ? e.representation.indexRange : null, e.callback) : g.loadSegments(e.representation, e.mediaType, e.representation ? e.representation.indexRange : null, e.callback)
            }
            return p = {
                initialize: function() {
                    a.on(r.SEGMENTBASE_INIT_REQUEST_NEEDED, _, p),
                    a.on(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED, v, p),
                    g.initialize(),
                    m.initialize()
                },
                reset: function() {
                    a.off(r.SEGMENTBASE_INIT_REQUEST_NEEDED, _, p),
                    a.off(r.SEGMENTBASE_SEGMENTSLIST_REQUEST_NEEDED, v, p)
                }
            },
            g = (0,
            n.default)(t).getInstance(),
            m = (0,
            i.default)(t).getInstance(),
            g.setConfig({
                baseURLController: u,
                dashMetrics: o,
                mediaPlayerModel: s,
                errHandler: l,
                eventBus: a,
                events: r,
                errors: h,
                debug: d,
                boxParser: c,
                requestModifier: f
            }),
            m.setConfig({
                baseURLController: u,
                dashMetrics: o,
                mediaPlayerModel: s,
                errHandler: l,
                eventBus: a,
                events: r,
                errors: h,
                debug: d,
                requestModifier: f
            }),
            p
        }
        s.__dashjs_factory_name = "SegmentBaseController";
        var l = r.default.getSingletonFactory(s);
        t.default = l
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(165))
          , n = l(a(12))
          , i = l(a(0))
          , o = l(a(43))
          , s = l(a(89));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u() {
            var e = this.context
              , t = void 0
              , a = void 0
              , i = void 0
              , l = void 0
              , u = void 0
              , d = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0;
            function E() {
                if (!b || !b.hasOwnProperty("resolve"))
                    throw new Error("setConfig function has to be called previously")
            }
            function k(e) {
                if (e.url) {
                    var t = new o.default;
                    return t.setInfo(e),
                    t
                }
            }
            function T(e, t, a) {
                e ? g.trigger(p.SEGMENTS_LOADED, {
                    segments: e,
                    representation: t,
                    mediaType: a
                }) : g.trigger(p.SEGMENTS_LOADED, {
                    segments: null,
                    representation: t,
                    mediaType: a,
                    error: new n.default(m.SEGMENT_BASE_LOADER_ERROR_CODE,m.SEGMENT_BASE_LOADER_ERROR_MESSAGE)
                })
            }
            return t = {
                setConfig: function(e) {
                    e.baseURLController && (b = e.baseURLController),
                    e.dashMetrics && (d = e.dashMetrics),
                    e.mediaPlayerModel && (f = e.mediaPlayerModel),
                    e.errHandler && (i = e.errHandler),
                    e.settings && (c = e.settings),
                    e.boxParser && (l = e.boxParser),
                    e.events && (p = e.events),
                    e.eventBus && (g = e.eventBus),
                    e.debug && (a = e.debug.getLogger(t)),
                    e.requestModifier && (u = e.requestModifier),
                    e.errors && (m = e.errors),
                    e.urlUtils && (v = e.urlUtils),
                    e.constants && (y = e.constants),
                    e.dashConstants && (_ = e.dashConstants)
                },
                initialize: function() {
                    h = (0,
                    s.default)(e).create({
                        errHandler: i,
                        dashMetrics: d,
                        mediaPlayerModel: f,
                        requestModifier: u,
                        useFetch: c ? c.get().streaming.lowLatencyEnabled : null,
                        boxParser: l,
                        errors: m,
                        urlUtils: v,
                        constants: y,
                        dashConstants: _
                    })
                },
                loadInitialization: function e(t, r) {
                    E();
                    var n = null
                      , i = t ? b.resolve(t.path) : null
                      , o = r || {
                        init: !0,
                        url: i ? i.url : void 0,
                        range: {
                            start: 0,
                            end: 1500
                        },
                        searching: !1,
                        bytesLoaded: 0,
                        bytesToLoad: 1500,
                        mediaType: t && t.adaptation ? t.adaptation.type : null
                    };
                    a.debug("Start searching for initialization.");
                    var s = k(o);
                    h.load({
                        request: s,
                        success: function(a) {
                            o.bytesLoaded = o.range.end,
                            (n = l.findInitRange(a)) ? (t.range = n,
                            g.trigger(p.INITIALIZATION_LOADED, {
                                representation: t
                            })) : (o.range.end = o.bytesLoaded + o.bytesToLoad,
                            e(t, o))
                        },
                        error: function() {
                            g.trigger(p.INITIALIZATION_LOADED, {
                                representation: t
                            })
                        }
                    }),
                    a.debug("Perform init search: " + o.url)
                },
                loadSegments: function e(t, n, i, o, s) {
                    if (E(),
                    i && (void 0 === i.start || void 0 === i.end)) {
                        var u = i ? i.toString().split("-") : null;
                        i = u ? {
                            start: parseFloat(u[0]),
                            end: parseFloat(u[1])
                        } : null
                    }
                    o = o || T;
                    var d = null
                      , c = null
                      , f = !!i
                      , p = t ? b.resolve(t.path) : null
                      , g = {
                        init: !1,
                        url: p ? p.url : void 0,
                        range: f ? i : {
                            start: 0,
                            end: 1500
                        },
                        searching: !f,
                        bytesLoaded: s ? s.bytesLoaded : 0,
                        bytesToLoad: 1500,
                        mediaType: t && t.adaptation ? t.adaptation.type : null
                    }
                      , m = k(g);
                    h.load({
                        request: m,
                        success: function(i) {
                            var s = g.bytesToLoad
                              , u = i.byteLength;
                            if (g.bytesLoaded = g.range.end - g.range.start,
                            d = l.parse(i),
                            (c = d.getBox("sidx")) && c.isComplete) {
                                var f = c.references
                                  , h = void 0
                                  , p = void 0;
                                if (null != f && f.length > 0 && (h = 1 === f[0].reference_type),
                                h) {
                                    a.debug("Initiate multiple SIDX load."),
                                    g.range.end = g.range.start + c.size;
                                    var m = void 0
                                      , y = void 0
                                      , _ = void 0
                                      , v = void 0
                                      , b = []
                                      , E = 0
                                      , k = (c.offset || g.range.start) + c.size
                                      , T = function(e) {
                                        e ? (b = b.concat(e),
                                        ++E >= y && (b.sort((function(e, t) {
                                            return e.startTime - t.startTime < 0 ? -1 : 0
                                        }
                                        )),
                                        o(b, t, n))) : o(null, t, n)
                                    };
                                    for (m = 0,
                                    y = f.length; m < y; m++)
                                        _ = k,
                                        v = k + f[m].referenced_size - 1,
                                        k += f[m].referenced_size,
                                        e(t, null, {
                                            start: _,
                                            end: v
                                        }, T, g)
                                } else
                                    a.debug("Parsing segments from SIDX. representation " + t.adaptation.type + " - id: " + t.id + " for range : " + g.range.start + " - " + g.range.end),
                                    p = function(e, t) {
                                        for (var a = e.references, n = a.length, i = e.timescale, o = e.earliest_presentation_time, s = t.range.start + e.offset + e.first_offset + e.size, l = [], u = void 0, d = void 0, c = void 0, f = void 0, h = 0; h < n; h++)
                                            c = a[h].subsegment_duration,
                                            f = a[h].referenced_size,
                                            (u = new r.default).duration = c,
                                            u.startTime = o,
                                            u.timescale = i,
                                            d = s + f - 1,
                                            u.mediaRange = s + "-" + d,
                                            l.push(u),
                                            o += c,
                                            s += f;
                                        return l
                                    }(c, g),
                                    o(p, t, n)
                            } else {
                                if (c)
                                    g.range.start = c.offset || g.range.start,
                                    g.range.end = g.range.start + (c.size || s);
                                else {
                                    if (u < g.bytesLoaded)
                                        return void o(null, t, n);
                                    var S = d.getLastBox();
                                    S && S.size ? (g.range.start = S.offset + S.size,
                                    g.range.end = g.range.start + s) : g.range.end += s
                                }
                                e(t, n, g.range, o, g)
                            }
                        },
                        error: function() {
                            o(null, t, n)
                        }
                    }),
                    a.debug("Perform SIDX load: " + g.url + " with range : " + g.range.start + " - " + g.range.end)
                },
                reset: function() {
                    h.abort(),
                    h = null,
                    i = null,
                    l = null,
                    u = null
                }
            }
        }
        u.__dashjs_factory_name = "SegmentBaseLoader",
        t.default = i.default.getSingletonFactory(u)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(358))
          , n = d(a(1))
          , i = d(a(0))
          , o = d(a(165))
          , s = d(a(43))
          , l = d(a(89))
          , u = d(a(12));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c() {
            var e = this.context
              , t = void 0
              , a = void 0
              , i = void 0
              , d = void 0
              , c = void 0
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0;
            function b(t, n, s, l) {
                var u, d, c = void 0, f = void 0, h = void 0, p = void 0, g = void 0, m = void 0;
                for (f = [],
                p = 0,
                d = (u = function(t) {
                    var a = []
                      , n = (0,
                    r.default)(e).create({
                        data: t
                    })
                      , o = void 0
                      , s = void 0;
                    for (n.consumeTagAndSize(i.Segment.Cues); n.moreData() && n.consumeTagAndSize(i.Segment.Cues.CuePoint, !0); ) {
                        for ((o = {}).CueTime = n.parseTag(i.Segment.Cues.CuePoint.CueTime),
                        o.CueTracks = []; n.moreData() && n.consumeTag(i.Segment.Cues.CuePoint.CueTrackPositions, !0); ) {
                            var l = n.getMatroskaCodedNum()
                              , u = n.getPos();
                            if ((s = {}).Track = n.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),
                            0 === s.Track)
                                throw new Error("Cue track cannot be 0");
                            s.ClusterPosition = n.parseTag(i.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),
                            o.CueTracks.push(s),
                            n.setPos(u + l)
                        }
                        if (0 === o.CueTracks.length)
                            throw new Error("Mandatory cuetrack not found");
                        a.push(o)
                    }
                    if (0 === a.length)
                        throw new Error("mandatory cuepoint not found");
                    return a
                }(t)).length; p < d; p += 1)
                    h = new o.default,
                    c = 0,
                    c = p < u.length - 1 ? u[p + 1].CueTime - u[p].CueTime : l - u[p].CueTime,
                    h.duration = c,
                    h.startTime = u[p].CueTime,
                    h.timescale = 1e3,
                    g = u[p].CueTracks[0].ClusterPosition + n,
                    m = p < u.length - 1 ? u[p + 1].CueTracks[0].ClusterPosition + n - 1 : s - 1,
                    h.mediaRange = g + "-" + m,
                    f.push(h);
                return a.debug("Parsed cues: " + f.length + " cues."),
                f
            }
            function E() {
                if (!v || !v.hasOwnProperty("resolve"))
                    throw new Error("setConfig function has to be called previously")
            }
            function k(e, t, a) {
                e ? m.trigger(y.SEGMENTS_LOADED, {
                    segments: e,
                    representation: t,
                    mediaType: a
                }) : m.trigger(y.SEGMENTS_LOADED, {
                    segments: null,
                    representation: t,
                    mediaType: a,
                    error: new u.default(_.SEGMENT_BASE_LOADER_ERROR_CODE,_.SEGMENT_BASE_LOADER_ERROR_MESSAGE)
                })
            }
            function T(e) {
                var t = new s.default;
                return t.setInfo(e),
                t
            }
            return t = {
                setConfig: function(e) {
                    if (!(e.baseURLController && e.dashMetrics && e.mediaPlayerModel && e.errHandler))
                        throw new Error(n.default.MISSING_CONFIG_ERROR);
                    v = e.baseURLController,
                    f = e.dashMetrics,
                    h = e.mediaPlayerModel,
                    d = e.errHandler,
                    g = e.settings,
                    y = e.events,
                    m = e.eventBus,
                    _ = e.errors,
                    a = e.debug.getLogger(t),
                    c = e.requestModifier
                },
                initialize: function() {
                    p = (0,
                    l.default)(e).create({
                        errHandler: d,
                        dashMetrics: f,
                        mediaPlayerModel: h,
                        requestModifier: c,
                        useFetch: g ? g.get().streaming.lowLatencyEnabled : null,
                        errors: _
                    })
                },
                loadInitialization: function(e, t) {
                    E();
                    var r = null
                      , n = e ? v.resolve(e.path) : null
                      , i = e ? e.range.split("-") : null
                      , o = t || {
                        range: {
                            start: i ? parseFloat(i[0]) : null,
                            end: i ? parseFloat(i[1]) : null
                        },
                        request: r,
                        url: n ? n.url : void 0,
                        init: !0,
                        mediaType: e && e.adaptation ? e.adaptation.type : null
                    };
                    a.info("Start loading initialization."),
                    r = T(o),
                    p.load({
                        request: r,
                        success: function() {
                            m.trigger(y.INITIALIZATION_LOADED, {
                                representation: e
                            })
                        },
                        error: function() {
                            m.trigger(y.INITIALIZATION_LOADED, {
                                representation: e
                            })
                        }
                    }),
                    a.debug("Perform init load: " + o.url)
                },
                loadSegments: function(t, n, o, s) {
                    E();
                    var l = null
                      , u = t ? v.resolve(t.path) : null
                      , d = u ? u.url : void 0
                      , c = {
                        bytesLoaded: 0,
                        bytesToLoad: 8192,
                        range: {
                            start: 0,
                            end: 8192
                        },
                        request: l,
                        url: d,
                        init: !1,
                        mediaType: t && t.adaptation ? t.adaptation.type : null
                    };
                    s = s || k,
                    l = T(c),
                    a.debug("Parsing ebml header"),
                    p.load({
                        request: l,
                        success: function(l) {
                            !function(t, n, o, s) {
                                if (t && 0 !== t.byteLength) {
                                    var l, u = (0,
                                    r.default)(e).create({
                                        data: t
                                    }), d = void 0, c = void 0, f = void 0, h = o ? o.split("-") : null, g = null, m = {
                                        url: n,
                                        range: {
                                            start: h ? parseFloat(h[0]) : null,
                                            end: h ? parseFloat(h[1]) : null
                                        },
                                        request: g
                                    };
                                    for (a.debug("Parse EBML header: " + m.url),
                                    u.skipOverElement(i.EBML),
                                    u.consumeTag(i.Segment),
                                    f = u.getMatroskaCodedNum(),
                                    f += u.getPos(),
                                    l = u.getPos(); u.moreData() && !u.consumeTagAndSize(i.Segment.Info, !0); )
                                        if (!(u.skipOverElement(i.Segment.SeekHead, !0) || u.skipOverElement(i.Segment.Tracks, !0) || u.skipOverElement(i.Segment.Cues, !0) || u.skipOverElement(i.Void, !0)))
                                            throw new Error("no valid top level element found");
                                    for (; void 0 === d; ) {
                                        var y = u.getMatroskaCodedNum(!0)
                                          , _ = u.getMatroskaCodedNum();
                                        switch (y) {
                                        case i.Segment.Info.Duration.tag:
                                            d = u[i.Segment.Info.Duration.parse](_);
                                            break;
                                        default:
                                            u.setPos(u.getPos() + _)
                                        }
                                    }
                                    g = T(m);
                                    p.load({
                                        request: g,
                                        success: function(e) {
                                            c = b(e, l, f, d),
                                            s(c)
                                        },
                                        error: function() {
                                            a.error("Download Error: Cues " + m.url),
                                            s(null)
                                        }
                                    }),
                                    a.debug("Perform cues load: " + m.url + " bytes=" + m.range.start + "-" + m.range.end)
                                } else
                                    s(null)
                            }(l, d, o, (function(e) {
                                s(e, t, n)
                            }
                            ))
                        },
                        error: function() {
                            s(null, t, n)
                        }
                    })
                },
                reset: function() {
                    d = null,
                    c = null
                }
            },
            i = {
                EBML: {
                    tag: 440786851,
                    required: !0
                },
                Segment: {
                    tag: 408125543,
                    required: !0,
                    SeekHead: {
                        tag: 290298740,
                        required: !0
                    },
                    Info: {
                        tag: 357149030,
                        required: !0,
                        TimecodeScale: {
                            tag: 2807729,
                            required: !0,
                            parse: "getMatroskaUint"
                        },
                        Duration: {
                            tag: 17545,
                            required: !0,
                            parse: "getMatroskaFloat"
                        }
                    },
                    Tracks: {
                        tag: 374648427,
                        required: !0
                    },
                    Cues: {
                        tag: 475249515,
                        required: !0,
                        CuePoint: {
                            tag: 187,
                            required: !0,
                            CueTime: {
                                tag: 179,
                                required: !0,
                                parse: "getMatroskaUint"
                            },
                            CueTrackPositions: {
                                tag: 183,
                                required: !0,
                                CueTrack: {
                                    tag: 247,
                                    required: !0,
                                    parse: "getMatroskaUint"
                                },
                                CueClusterPosition: {
                                    tag: 241,
                                    required: !0,
                                    parse: "getMatroskaUint"
                                }
                            }
                        }
                    }
                },
                Void: {
                    tag: 236,
                    required: !0
                }
            },
            t
        }
        c.__dashjs_factory_name = "WebmSegmentBaseLoader",
        t.default = i.default.getSingletonFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(0), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            e = e || {};
            var t = void 0
              , a = new DataView(e.data)
              , r = 0;
            function n(e, t) {
                var n = !0
                  , i = 0;
                if (void 0 === t && (t = !1),
                e.tag > 16777215 ? (a.getUint32(r) !== e.tag && (n = !1),
                i = 4) : e.tag > 65535 ? (256 * a.getUint16(r) + a.getUint8(r + 2) !== e.tag && (n = !1),
                i = 3) : e.tag > 255 ? (a.getUint16(r) !== e.tag && (n = !1),
                i = 2) : (a.getUint8(r) !== e.tag && (n = !1),
                i = 1),
                !n && e.required && !t)
                    throw new Error("required tag not found");
                return n && (r += i),
                n
            }
            function i(e) {
                var t = 1
                  , n = 128
                  , i = -1
                  , o = 0
                  , s = a.getUint8(r)
                  , l = 0;
                for (l = 0; l < 8; l += 1) {
                    if ((s & n) === n) {
                        o = void 0 === e ? s & ~n : s,
                        i = l;
                        break
                    }
                    n >>= 1
                }
                for (l = 0; l < i; l += 1,
                t += 1)
                    o = o << 8 | 255 & a.getUint8(r + t);
                return r += t,
                o
            }
            return t = {
                getPos: function() {
                    return r
                },
                setPos: function(e) {
                    r = e
                },
                consumeTag: n,
                consumeTagAndSize: function(e, t) {
                    var a = n(e, t);
                    return a && i(),
                    a
                },
                parseTag: function(e) {
                    var a;
                    return n(e),
                    a = i(),
                    t[e.parse](a)
                },
                skipOverElement: function(e, t) {
                    var a = n(e, t)
                      , o = void 0;
                    return a && (o = i(),
                    r += o),
                    a
                },
                getMatroskaCodedNum: i,
                getMatroskaFloat: function(e) {
                    var t = void 0;
                    switch (e) {
                    case 4:
                        t = a.getFloat32(r),
                        r += 4;
                        break;
                    case 8:
                        t = a.getFloat64(r),
                        r += 8
                    }
                    return t
                },
                getMatroskaUint: function(e) {
                    for (var t = 0, n = 0; n < e; n += 1)
                        t <<= 8,
                        t |= 255 & a.getUint8(r + n);
                    return r += e,
                    t
                },
                moreData: function() {
                    return r < a.byteLength
                }
            }
        }
        o.__dashjs_factory_name = "EBMLParser",
        t.default = i.default.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = c(a(19))
          , n = c(a(360))
          , i = c(a(361))
          , o = c(a(362))
          , s = c(a(363))
          , l = c(a(221))
          , u = c(a(0))
          , d = c(a(170));
        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function f() {
            var e, t = void 0, a = void 0, u = void 0, c = void 0, f = void 0, h = void 0, p = this.context;
            function g(e, n, i) {
                var o, s = t.getAdaptationsForType(a[0].mpd.manifest, e, n);
                if (!s || 0 === s.length)
                    return null;
                if (s.length > 1 && i) {
                    var l = m(i, n);
                    if (c[i.id] && c[i.id][n])
                        for (var u = 0, d = s.length; u < d; u++)
                            if (c[i.id][n].isMediaInfoEqual(l[u]))
                                return s[u];
                    for (var f = 0, h = s.length; f < h; f++)
                        if (o = s[f],
                        t.getRolesForAdaptation(o).filter((function(e) {
                            return e.value === r.default.MAIN
                        }
                        ))[0])
                            return s[f]
                }
                return s[0]
            }
            function m(e, r, n) {
                var i, o = a, s = n, l = [], d = void 0, c = void 0, h = void 0, p = void 0, g = void 0, m = void 0;
                if (s)
                    C(),
                    o = y(s);
                else {
                    if (!(a.length > 0))
                        return l;
                    s = a[0].mpd.manifest
                }
                var _ = k(e, o);
                _ && (m = _.id);
                var v = t.getAdaptationsForType(s, e ? e.index : null, r !== f.EMBEDDED_TEXT ? r : f.VIDEO);
                if (!v || 0 === v.length)
                    return l;
                for (u[m] = u[m] || t.getAdaptationsForPeriod(_),
                p = 0,
                i = v.length; p < i; p++)
                    if (d = v[p],
                    h = t.getIndexForAdaptation(d, s, e.index),
                    c = T(u[m][h]),
                    r === f.EMBEDDED_TEXT) {
                        var b = c.accessibility.length;
                        for (g = 0; g < b; g++)
                            if (c) {
                                var E = c.accessibility[g];
                                if (0 === E.indexOf("cea-608:")) {
                                    var A = E.substring(8).split(";");
                                    if ("CC" === A[0].substring(0, 2))
                                        for (g = 0; g < A.length; g++)
                                            c || (c = T.call(this, u[m][h])),
                                            S(c, A[g].substring(0, 3), A[g].substring(4)),
                                            l.push(c),
                                            c = null;
                                    else
                                        for (g = 0; g < A.length; g++)
                                            c || (c = T.call(this, u[m][h])),
                                            S(c, "CC" + (g + 1), A[g]),
                                            l.push(c),
                                            c = null
                                } else
                                    0 === E.indexOf("cea-608") && (S(c, f.CC1, "eng"),
                                    l.push(c),
                                    c = null)
                            }
                    } else
                        r === f.IMAGE ? (c.type = f.IMAGE,
                        l.push(c),
                        c = null) : c && l.push(c);
                return l
            }
            function y(e) {
                var a = _(e);
                return t.getRegularPeriods(a)
            }
            function _(e) {
                var a = b(e);
                return t.getMpd(a)
            }
            function v() {
                a = [],
                u = {},
                c = {}
            }
            function b(e) {
                return e || (a.length > 0 ? a[0].mpd.manifest : null)
            }
            function E(e) {
                return e && e.streamInfo && void 0 !== e.streamInfo.id && u[e.streamInfo.id] ? u[e.streamInfo.id][e.index] : null
            }
            function k(e, t) {
                for (var a = t.length, r = 0; r < a; r++) {
                    var n = t[r];
                    if (e && e.id === n.id)
                        return n
                }
                return null
            }
            function T(e) {
                if (!e)
                    return null;
                var a, r = new i.default, n = e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];
                return r.id = e.id,
                r.index = e.index,
                r.type = e.type,
                r.streamInfo = A(e.period),
                r.representationCount = t.getRepresentationCount(n),
                r.labels = t.getLabelsForAdaptation(n),
                r.lang = t.getLanguageForAdaptation(n),
                a = t.getViewpointForAdaptation(n),
                r.viewpoint = a ? a.value : void 0,
                r.accessibility = t.getAccessibilityForAdaptation(n).map((function(e) {
                    var t = e.value
                      , a = t;
                    return e.schemeIdUri && e.schemeIdUri.search("cea-608") >= 0 && void 0 !== h && (a = t ? "cea-608:" + t : "cea-608",
                    r.embeddedCaptions = !0),
                    a
                }
                )),
                r.audioChannelConfiguration = t.getAudioChannelConfigurationForAdaptation(n).map((function(e) {
                    return e.value
                }
                )),
                0 === r.audioChannelConfiguration.length && Array.isArray(n.Representation_asArray) && n.Representation_asArray.length > 0 && (r.audioChannelConfiguration = t.getAudioChannelConfigurationForRepresentation(n.Representation_asArray[0]).map((function(e) {
                    return e.value
                }
                ))),
                r.roles = t.getRolesForAdaptation(n).map((function(e) {
                    return e.value
                }
                )),
                r.codec = t.getCodec(n),
                r.mimeType = t.getMimeType(n),
                r.contentProtection = t.getContentProtectionData(n),
                r.bitrateList = t.getBitrateListForAdaptation(n),
                r.contentProtection && r.contentProtection.forEach((function(e) {
                    e.KID = t.getKID(e)
                }
                )),
                r.isText = t.getIsTextTrack(r.mimeType),
                r.supplementalProperties = t.getSupplementalPropperties(n),
                r
            }
            function S(e, t, a) {
                e.id = t,
                e.index = 100 + parseInt(t.substring(2, 3)),
                e.type = f.EMBEDDED_TEXT,
                e.codec = "cea-608-in-SEI",
                e.isText = !0,
                e.isEmbedded = !0,
                e.lang = a,
                e.roles = ["caption"]
            }
            function A(e) {
                var a, r, n = new o.default;
                return n.id = e.id,
                n.index = e.index,
                n.start = e.start,
                n.duration = e.duration,
                n.manifestInfo = (a = e.mpd,
                (r = new s.default).DVRWindowSize = a.timeShiftBufferDepth,
                r.loadedTime = a.manifest.loadedTime,
                r.availableFrom = a.availabilityStartTime,
                r.minBufferTime = a.manifest.minBufferTime,
                r.maxFragmentDuration = a.maxSegmentDuration,
                r.duration = t.getDuration(a.manifest),
                r.isDynamic = t.getIsDynamic(a.manifest),
                r.serviceDescriptions = t.getServiceDescriptions(a.manifest),
                r.protocol = a.manifest.protocol,
                r),
                n.isLast = 1 === e.mpd.manifest.Period_asArray.length || Math.abs(n.start + n.duration - n.manifestInfo.duration) < 1,
                n
            }
            function C() {
                if (!f)
                    throw new Error("setConfig function has to be called previously")
            }
            function I(e) {
                return a.length > 0 ? a[0].mpd.manifest.Period_asArray[e] : null
            }
            function P(e, t, a) {
                var r = void 0
                  , n = void 0
                  , i = void 0
                  , o = void 0
                  , s = void 0;
                if (e)
                    for (r = e.AdaptationSet_asArray,
                    o = 0; o < r.length; o += 1)
                        for (i = r[o].Representation_asArray,
                        s = 0; s < i.length; s += 1)
                            if (t === (n = i[s]).id)
                                return a ? s : n;
                return null
            }
            return e = {
                getBandwidthForRepresentation: function(e, t) {
                    var a;
                    return (a = P(I(t), e)) ? a.bandwidth : null
                },
                getIndexForRepresentation: function(e, t) {
                    return function(e, t) {
                        var a = P(e, t, !0);
                        return null !== a ? a : -1
                    }(I(t), e)
                },
                getMaxIndexForBufferType: function(e, a) {
                    return function(e, a) {
                        var r, n = void 0, i = void 0, o = void 0;
                        if (!e || !a)
                            return -1;
                        for (r = e.AdaptationSet_asArray,
                        o = 0; o < r.length; o += 1)
                            if (n = r[o],
                            i = n.Representation_asArray,
                            t.getIsTypeOf(n, a))
                                return i.length;
                        return -1
                    }(I(a), e)
                },
                convertDataToRepresentationInfo: function(e) {
                    if (e) {
                        var a = new n.default
                          , r = e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index]
                          , i = t.getRepresentationFor(e.index, r);
                        return a.id = e.id,
                        a.quality = e.index,
                        a.bandwidth = t.getBandwidth(i),
                        a.DVRWindow = e.segmentAvailabilityRange,
                        a.fragmentDuration = e.segmentDuration || (e.segments && e.segments.length > 0 ? e.segments[0].duration : NaN),
                        a.MSETimeOffset = e.MSETimeOffset,
                        a.mediaInfo = T(e.adaptation),
                        a
                    }
                    return null
                },
                getDataForMedia: E,
                getStreamsInfo: function(e, t) {
                    var r = []
                      , n = a;
                    if (e && (C(),
                    n = y(e)),
                    n.length > 0) {
                        (!t || t > n.length) && (t = n.length);
                        for (var i = 0; i < t; i++)
                            r.push(A(n[i]))
                    }
                    return r
                },
                getMediaInfoForType: function(e, r) {
                    if (0 === a.length || !e)
                        return null;
                    var n = k(e, a);
                    if (!n)
                        return null;
                    var i = n.id;
                    u[i] = u[i] || t.getAdaptationsForPeriod(n);
                    var o = g(e.index, r, e);
                    if (!o)
                        return null;
                    var s = t.getIndexForAdaptation(o, a[0].mpd.manifest, e.index);
                    return T(u[i][s])
                },
                getAllMediaInfoForType: m,
                getAdaptationForType: g,
                getRealAdaptation: function(e, r) {
                    var n, i = void 0, o = k(e, a);
                    return n = r ? r.id : null,
                    a.length > 0 && o && (i = n ? t.getAdaptationForId(n, a[0].mpd.manifest, o.index) : t.getAdaptationForIndex(r ? r.index : null, a[0].mpd.manifest, o.index)),
                    i
                },
                getVoRepresentations: function(e) {
                    var a = E(e);
                    return t.getRepresentationsForAdaptation(a)
                },
                getEventsFor: function(e, r) {
                    var s = [];
                    if (a.length > 0) {
                        var l = a[0].mpd.manifest;
                        e instanceof o.default ? s = t.getEventsForPeriod(k(e, a)) : e instanceof i.default ? s = t.getEventStreamForAdaptationSet(l, E(e)) : e instanceof n.default && (s = t.getEventStreamForRepresentation(l, r))
                    }
                    return s
                },
                getEvent: function(e, t, a) {
                    if (!e || !t)
                        return null;
                    var r = new l.default
                      , n = e.scheme_id_uri
                      , i = e.value
                      , o = e.timescale
                      , s = void 0
                      , u = void 0;
                    0 === e.version ? u = a * o + (s = e.presentation_time_delta) : (s = 0,
                    u = e.presentation_time_delta);
                    var d = e.event_duration
                      , c = e.id
                      , f = e.message_data;
                    return t[n + "/" + i] ? (r.eventStream = t[n + "/" + i],
                    r.eventStream.value = i,
                    r.eventStream.timescale = o,
                    r.duration = d,
                    r.id = c,
                    r.calculatedPresentationTime = u,
                    r.messageData = f,
                    r.presentationTimeDelta = s,
                    r) : null
                },
                getMpd: _,
                setConfig: function(e) {
                    e && (e.constants && (f = e.constants),
                    e.cea608parser && (h = e.cea608parser),
                    e.errHandler && t.setConfig({
                        errHandler: e.errHandler
                    }),
                    e.BASE64 && t.setConfig({
                        BASE64: e.BASE64
                    }))
                },
                updatePeriods: function(e) {
                    if (!e)
                        return null;
                    C(),
                    a = y(e),
                    u = {}
                },
                getIsTextTrack: function(e) {
                    return t.getIsTextTrack(e)
                },
                getUTCTimingSources: function() {
                    var e = b();
                    return t.getUTCTimingSources(e)
                },
                getSuggestedPresentationDelay: function() {
                    var e = a.length > 0 ? a[0].mpd : null;
                    return t.getSuggestedPresentationDelay(e)
                },
                getAvailabilityStartTime: function(e) {
                    var a = _(e);
                    return t.getAvailabilityStartTime(a)
                },
                getIsDynamic: function(e) {
                    var a = b(e);
                    return t.getIsDynamic(a)
                },
                getDuration: function(e) {
                    var a = b(e);
                    return t.getDuration(a)
                },
                getRegularPeriods: y,
                getLocation: function(e) {
                    return t.getLocation(e)
                },
                getManifestUpdatePeriod: function(e) {
                    var a = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                    return t.getManifestUpdatePeriod(e, a)
                },
                getIsDVB: function(e) {
                    return t.hasProfile(e, "urn:dvb:dash:profile:dvb-dash:2014")
                },
                getBaseURLsFromElement: function(e) {
                    return t.getBaseURLsFromElement(e)
                },
                getRepresentationSortFunction: function() {
                    return t.getRepresentationSortFunction()
                },
                getCodec: function(e, a, r) {
                    return t.getCodec(e, a, r)
                },
                getVoAdaptations: function() {
                    return u
                },
                getVoPeriods: function() {
                    return a
                },
                getPeriodById: function(e) {
                    if (!e || 0 === a.length)
                        return null;
                    var t = a.filter((function(t) {
                        return t.id === e
                    }
                    ));
                    return t && t.length > 0 ? t[0] : null
                },
                setCurrentMediaInfo: function(e, t, a) {
                    c[e] = c[e] || {},
                    c[e][t] = c[e][t] || {},
                    c[e][t] = a
                },
                reset: v
            },
            t = (0,
            d.default)(p).getInstance(),
            v(),
            e
        }
        f.__dashjs_factory_name = "DashAdapter",
        t.default = u.default.getSingletonFactory(f)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.id = null,
            this.quality = null,
            this.DVRWindow = null,
            this.fragmentDuration = null,
            this.mediaInfo = null,
            this.MSETimeOffset = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.id = null,
                this.index = null,
                this.type = null,
                this.streamInfo = null,
                this.representationCount = 0,
                this.lang = null,
                this.viewpoint = null,
                this.accessibility = null,
                this.audioChannelConfiguration = null,
                this.roles = null,
                this.codec = null,
                this.mimeType = null,
                this.contentProtection = null,
                this.isText = !1,
                this.KID = null,
                this.bitrateList = null
            }
            return r(e, [{
                key: "isMediaInfoEqual",
                value: function(e) {
                    if (!e)
                        return !1;
                    var t = this.id === e.id
                      , a = this.viewpoint === e.viewpoint
                      , r = this.lang === e.lang
                      , n = this.roles.toString() === e.roles.toString()
                      , i = this.accessibility.toString() === e.accessibility.toString()
                      , o = this.audioChannelConfiguration.toString() === e.audioChannelConfiguration.toString();
                    return t && a && r && n && i && o
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.id = null,
            this.index = null,
            this.start = NaN,
            this.duration = NaN,
            this.manifestInfo = null,
            this.isLast = !0
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.DVRWindowSize = NaN,
            this.loadedTime = null,
            this.availableFrom = null,
            this.minBufferTime = NaN,
            this.duration = NaN,
            this.isDynamic = !1,
            this.maxFragmentDuration = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(1))
          , n = a(20)
          , i = d(a(0))
          , o = d(a(25))
          , s = d(a(365))
          , l = d(a(366))
          , u = a(167);
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e) {
            e = e || {};
            var t, a = this.context, i = void 0, d = void 0, c = void 0, f = e.metricsModel;
            function h(e) {
                var t = f.getMetricsFor(e, !0);
                if (!t)
                    return null;
                var a = t.HttpList
                  , r = null
                  , n = void 0;
                if (!a || a.length <= 0)
                    return null;
                for (n = a.length - 1; n >= 0; ) {
                    if (a[n].responsecode) {
                        r = a[n];
                        break
                    }
                    n--
                }
                return r
            }
            function p(e) {
                var t = f.getMetricsFor(e, !0);
                return t && t.HttpList ? t.HttpList : []
            }
            function g(e, t) {
                if (!e)
                    return null;
                var a = e[t];
                return a && 0 !== a.length ? a[a.length - 1] : null
            }
            function m(e) {
                var t = {};
                if (!e)
                    return t;
                for (var a = e.trim().split("\r\n"), r = 0, n = a.length; r < n; r++) {
                    var i = a[r]
                      , o = i.indexOf(": ");
                    o > 0 && (t[i.substring(0, o)] = i.substring(o + 2))
                }
                return t
            }
            return t = {
                getCurrentRepresentationSwitch: function(e) {
                    return g(f.getMetricsFor(e, !0), o.default.TRACK_SWITCH)
                },
                getCurrentBufferState: function(e) {
                    return g(f.getMetricsFor(e, !0), o.default.BUFFER_STATE)
                },
                getCurrentBufferLevel: function(e) {
                    var t = g(f.getMetricsFor(e, !0), o.default.BUFFER_LEVEL);
                    return t ? s.default.round10(t.level / 1e3, -3) : 0
                },
                getCurrentHttpRequest: h,
                getHttpRequests: p,
                getCurrentDroppedFrames: function() {
                    return g(f.getMetricsFor(r.default.VIDEO, !0), o.default.DROPPED_FRAMES)
                },
                getCurrentSchedulingInfo: function(e) {
                    return g(f.getMetricsFor(e, !0), o.default.SCHEDULING_INFO)
                },
                getCurrentDVRInfo: function(e) {
                    return g(e ? f.getMetricsFor(e, !0) : f.getMetricsFor(r.default.VIDEO, !0) || f.getMetricsFor(r.default.AUDIO, !0), o.default.DVR_INFO)
                },
                getCurrentManifestUpdate: function() {
                    return g(f.getMetricsFor(r.default.STREAM), o.default.MANIFEST_UPDATE)
                },
                getLatestFragmentRequestHeaderValueByID: function(e, t) {
                    var a = {}
                      , r = h(e);
                    return r && (a = m(r._responseHeaders)),
                    void 0 === a[t] ? null : a[t]
                },
                getLatestMPDRequestHeaderValueByID: function(e) {
                    var t, a = {}, i = void 0, o = void 0;
                    for (o = (t = p(r.default.STREAM)).length - 1; o >= 0; o--)
                        if ((i = t[o]).type === n.HTTPRequest.MPD_TYPE) {
                            a = m(i._responseHeaders);
                            break
                        }
                    return void 0 === a[e] ? null : a[e]
                },
                addRepresentationSwitch: function(e, t, a, r, n) {
                    f.addRepresentationSwitch(e, t, a, r, n)
                },
                addDVRInfo: function(e, t, a, r) {
                    f.addDVRInfo(e, t, a, r)
                },
                updateManifestUpdateInfo: function(e) {
                    var t = this.getCurrentManifestUpdate();
                    f.updateManifestUpdateInfo(t, e)
                },
                addManifestUpdateStreamInfo: function(e) {
                    if (e) {
                        var t = this.getCurrentManifestUpdate();
                        f.addManifestUpdateStreamInfo(t, e.id, e.index, e.start, e.duration)
                    }
                },
                addManifestUpdateRepresentationInfo: function(e, t) {
                    if (e) {
                        var a = this.getCurrentManifestUpdate();
                        f.addManifestUpdateRepresentationInfo(a, e.id, e.index, e.streamIndex, t, e.presentationTimeOffset, e.startNumber, e.fragmentInfoType)
                    }
                },
                addManifestUpdate: function(e) {
                    f.addManifestUpdate(r.default.STREAM, e.type, e.requestStartDate, e.requestEndDate)
                },
                addHttpRequest: function(e, t, a, r, n) {
                    f.addHttpRequest(e.mediaType, null, e.type, e.url, e.quality, t, e.serviceLocation || null, e.range || null, e.requestStartDate, e.firstByteDate, e.requestEndDate, a, e.duration, r, n)
                },
                addSchedulingInfo: function(e, t) {
                    f.addSchedulingInfo(e.mediaType, new Date, e.type, e.startTime, e.availabilityStartTime, e.duration, e.quality, e.range, t)
                },
                addRequestsQueue: function(e, t, a) {
                    f.addRequestsQueue(e, t, a)
                },
                addBufferLevel: function(e, t, a) {
                    f.addBufferLevel(e, t, a)
                },
                addBufferState: function(e, t, a) {
                    f.addBufferState(e, t, a)
                },
                addDroppedFrames: function(e) {
                    f.addDroppedFrames(r.default.VIDEO, e)
                },
                addPlayList: function() {
                    c && (f.addPlayList(c),
                    c = null)
                },
                addDVBErrors: function(e) {
                    f.addDVBErrors(e)
                },
                createPlaylistMetrics: function(e, t) {
                    (c = new u.PlayList).start = new Date,
                    c.mstart = e,
                    c.starttype = t
                },
                createPlaylistTraceMetrics: function(e, t, a) {
                    !0 === i && (i = !1,
                    (d = new u.PlayListTrace).representationid = e,
                    d.start = new Date,
                    d.mstart = t,
                    d.playbackspeed = null !== a ? a.toString() : null)
                },
                updatePlayListTraceMetrics: function(e) {
                    if (d)
                        for (var t in d)
                            d[t] = e[t]
                },
                pushPlayListTraceMetrics: function(e, t) {
                    if (!1 === i && c && d && d.start) {
                        var a = d.start
                          , r = e.getTime() - a.getTime();
                        d.duration = r,
                        d.stopreason = t,
                        c.trace.push(d),
                        i = !0
                    }
                },
                clearAllCurrentMetrics: function() {
                    f.clearAllCurrentMetrics()
                }
            },
            f = f || (0,
            l.default)(a).getInstance({
                settings: e.settings
            }),
            i = !0,
            d = null,
            c = null,
            t
        }
        c.__dashjs_factory_name = "DashMetrics",
        t.default = i.default.getSingletonFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function() {
            function e(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    r.enumerable = r.enumerable || !1,
                    r.configurable = !0,
                    "value"in r && (r.writable = !0),
                    Object.defineProperty(e, r.key, r)
                }
            }
            return function(t, a, r) {
                return a && e(t.prototype, a),
                r && e(t, r),
                t
            }
        }();
        var n = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            return r(e, null, [{
                key: "round10",
                value: function(e, t) {
                    return function(e, t, a) {
                        if (void 0 === a || 0 == +a)
                            return Math[e](t);
                        if (a = +a,
                        null === (t = +t) || isNaN(t) || !("number" == typeof a && a % 1 == 0))
                            return NaN;
                        return t = t.toString().split("e"),
                        +((t = (t = Math[e](+(t[0] + "e" + (t[1] ? +t[1] - a : -a)))).toString().split("e"))[0] + "e" + (t[1] ? +t[1] + a : a))
                    }("round", e, t)
                }
            }]),
            e
        }();
        t.default = n
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = _(a(1))
          , n = _(a(25))
          , i = _(a(367))
          , o = a(20)
          , s = _(a(368))
          , l = _(a(369))
          , u = _(a(370))
          , d = _(a(371))
          , c = _(a(372))
          , f = a(373)
          , h = _(a(374))
          , p = _(a(2))
          , g = _(a(375))
          , m = _(a(4))
          , y = _(a(0));
        function _(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function v(e) {
            var t, a = (e = e || {}).settings, y = this.context, _ = (0,
            p.default)(y).getInstance(), v = void 0;
            function b() {
                _.trigger(m.default.METRICS_CHANGED)
            }
            function E(e) {
                _.trigger(m.default.METRIC_CHANGED, {
                    mediaType: e
                }),
                b()
            }
            function k(e, t, a) {
                _.trigger(m.default.METRIC_UPDATED, {
                    mediaType: e,
                    metric: t,
                    value: a
                }),
                E(e)
            }
            function T(e, t, a) {
                _.trigger(m.default.METRIC_ADDED, {
                    mediaType: e,
                    metric: t,
                    value: a
                }),
                E(e)
            }
            function S(e, t) {
                var a = null;
                return e ? (v.hasOwnProperty(e) ? a = v[e] : t || (a = new i.default,
                v[e] = a),
                a) : a
            }
            function A(e, t, r) {
                var n = S(e);
                null !== n && (n[t].push(r),
                n[t].length > a.get().streaming.metricsMaxListDepth && n[t].shift())
            }
            function C(e, t, a) {
                A(e, t, a),
                T(e, t, a)
            }
            return t = {
                clearCurrentMetricsForType: function(e) {
                    delete v[e],
                    E(e)
                },
                clearAllCurrentMetrics: function() {
                    v = {},
                    b()
                },
                getMetricsFor: S,
                addHttpRequest: function e(t, a, r, i, s, l, u, d, c, f, h, p, g, m, y) {
                    var _ = new o.HTTPRequest;
                    l && l !== i && (e(t, null, r, i, s, null, null, d, c, null, null, null, g, null, null),
                    _.actualurl = l),
                    _.tcpid = a,
                    _.type = r,
                    _.url = i,
                    _.range = d,
                    _.trequest = c,
                    _.tresponse = f,
                    _.responsecode = p,
                    _._tfinish = h,
                    _._stream = t,
                    _._mediaduration = g,
                    _._quality = s,
                    _._responseHeaders = m,
                    _._serviceLocation = u,
                    y ? y.forEach((function(e) {
                        !function(e, t, a, r) {
                            var n = new o.HTTPRequestTrace;
                            n.s = t,
                            n.d = a,
                            n.b = r,
                            e.trace.push(n),
                            e.interval || (e.interval = 0),
                            e.interval += a
                        }(_, e.s, e.d, e.b)
                    }
                    )) : (delete _.interval,
                    delete _.trace),
                    C(t, n.default.HTTP_REQUEST, _)
                },
                addRepresentationSwitch: function(e, t, a, r, i) {
                    var o = new s.default;
                    o.t = t,
                    o.mt = a,
                    o.to = r,
                    i ? o.lto = i : delete o.lto,
                    C(e, n.default.TRACK_SWITCH, o)
                },
                addBufferLevel: function(e, t, a) {
                    var r = new l.default;
                    r.t = t,
                    r.level = a,
                    C(e, n.default.BUFFER_LEVEL, r)
                },
                addBufferState: function(e, t, a) {
                    var r = new u.default;
                    r.target = a,
                    r.state = t,
                    C(e, n.default.BUFFER_STATE, r)
                },
                addDVRInfo: function(e, t, a, r) {
                    var i = new d.default;
                    i.time = t,
                    i.range = r,
                    i.manifestInfo = a,
                    C(e, n.default.DVR_INFO, i)
                },
                addDroppedFrames: function(e, t) {
                    var a = new c.default
                      , r = S(e).DroppedFrames;
                    t && (a.time = t.creationTime,
                    a.droppedFrames = t.droppedVideoFrames,
                    r.length > 0 && r[r.length - 1] == a || C(e, n.default.DROPPED_FRAMES, a))
                },
                addSchedulingInfo: function(e, t, a, r, i, o, s, l, u) {
                    var d = new h.default;
                    d.mediaType = e,
                    d.t = t,
                    d.type = a,
                    d.startTime = r,
                    d.availabilityStartTime = i,
                    d.duration = o,
                    d.quality = s,
                    d.range = l,
                    d.state = u,
                    C(e, n.default.SCHEDULING_INFO, d)
                },
                addRequestsQueue: function(e, t, a) {
                    var r = new g.default;
                    r.loadingRequests = t,
                    r.executedRequests = a,
                    S(e).RequestsQueue = r,
                    T(e, n.default.REQUESTS_QUEUE, r)
                },
                addManifestUpdate: function(e, t, a, i, o, s, l, u, d, c) {
                    var h = new f.ManifestUpdate;
                    h.mediaType = e,
                    h.type = t,
                    h.requestTime = a,
                    h.fetchTime = i,
                    h.availabilityStartTime = o,
                    h.presentationStartTime = s,
                    h.clientTimeOffset = l,
                    h.currentTime = u,
                    h.buffered = d,
                    h.latency = c,
                    A(r.default.STREAM, n.default.MANIFEST_UPDATE, h),
                    T(e, n.default.MANIFEST_UPDATE, h)
                },
                updateManifestUpdateInfo: function(e, t) {
                    if (e) {
                        for (var a in t)
                            e[a] = t[a];
                        k(e.mediaType, n.default.MANIFEST_UPDATE, e)
                    }
                },
                addManifestUpdateStreamInfo: function(e, t, a, r, i) {
                    if (e) {
                        var o = new f.ManifestUpdateStreamInfo;
                        o.id = t,
                        o.index = a,
                        o.start = r,
                        o.duration = i,
                        e.streamInfo.push(o),
                        k(e.mediaType, n.default.MANIFEST_UPDATE_STREAM_INFO, e)
                    }
                },
                addManifestUpdateRepresentationInfo: function(e, t, a, r, i, o, s, l) {
                    if (e && e.representationInfo) {
                        var u = new f.ManifestUpdateRepresentationInfo;
                        u.id = t,
                        u.index = a,
                        u.streamIndex = r,
                        u.mediaType = i,
                        u.startNumber = s,
                        u.fragmentInfoType = l,
                        u.presentationTimeOffset = o,
                        e.representationInfo.push(u),
                        k(e.mediaType, n.default.MANIFEST_UPDATE_TRACK_INFO, e)
                    }
                },
                addPlayList: function(e) {
                    e.trace && Array.isArray(e.trace) ? e.trace.forEach((function(e) {
                        e.hasOwnProperty("subreplevel") && !e.subreplevel && delete e.subreplevel
                    }
                    )) : delete e.trace,
                    C(r.default.STREAM, n.default.PLAY_LIST, e)
                },
                addDVBErrors: function(e) {
                    C(r.default.STREAM, n.default.DVB_ERRORS, e)
                }
            },
            v = {},
            t
        }
        v.__dashjs_factory_name = "MetricsModel",
        t.default = y.default.getSingletonFactory(v)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.TcpList = [],
            this.HttpList = [],
            this.RepSwitchList = [],
            this.BufferLevel = [],
            this.BufferState = [],
            this.PlayList = [],
            this.DroppedFrames = [],
            this.SchedulingInfo = [],
            this.DVRInfo = [],
            this.ManifestUpdate = [],
            this.RequestsQueue = null,
            this.DVBErrors = []
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.t = null,
            this.mt = null,
            this.to = null,
            this.lto = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.t = null,
            this.level = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(25), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.target = null,
            this.state = i.default.BUFFER_EMPTY
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.time = null,
            this.range = null,
            this.manifestInfo = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.time = null,
            this.droppedFrames = null
        }
    }
    , function(e, t, a) {
        "use strict";
        function r(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.ManifestUpdate = function e() {
            r(this, e),
            this.mediaType = null,
            this.type = null,
            this.requestTime = null,
            this.fetchTime = null,
            this.availabilityStartTime = null,
            this.presentationStartTime = 0,
            this.clientTimeOffset = 0,
            this.currentTime = null,
            this.buffered = null,
            this.latency = 0,
            this.streamInfo = [],
            this.representationInfo = []
        }
        ,
        t.ManifestUpdateStreamInfo = function e() {
            r(this, e),
            this.id = null,
            this.index = null,
            this.start = null,
            this.duration = null
        }
        ,
        t.ManifestUpdateRepresentationInfo = function e() {
            r(this, e),
            this.id = null,
            this.index = null,
            this.mediaType = null,
            this.streamIndex = null,
            this.presentationTimeOffset = null,
            this.startNumber = null,
            this.fragmentInfoType = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.mediaType = null,
            this.t = null,
            this.type = null,
            this.startTime = null,
            this.availabilityStartTime = null,
            this.duration = null,
            this.quality = null,
            this.range = null,
            this.state = null
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.loadingRequests = [],
            this.executedRequests = []
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = u(a(2))
          , n = u(a(4))
          , i = u(a(0))
          , o = u(a(19))
          , s = u(a(170))
          , l = u(a(111));
        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function d() {
            var e, t = this.context, a = (0,
            r.default)(t).getInstance(), i = (0,
            l.default)(t).getInstance(), u = void 0, d = void 0, c = void 0, f = void 0;
            function h(e) {
                d = e
            }
            function p(e, t, a, r) {
                return r ? a && t.timeShiftBufferDepth != Number.POSITIVE_INFINITY ? new Date(t.availabilityStartTime.getTime() + 1e3 * (e + t.timeShiftBufferDepth)) : t.availabilityEndTime : a ? new Date(t.availabilityStartTime.getTime() + 1e3 * (e - d)) : t.availabilityStartTime
            }
            function g(e, t) {
                return (e.getTime() - t.mpd.availabilityStartTime.getTime() + 1e3 * d) / 1e3
            }
            function m(e, t) {
                return e + (t.adaptation.period.start - t.presentationTimeOffset)
            }
            function y(e) {
                c || void 0 !== e.offset && (h(e.offset / 1e3),
                c = !0)
            }
            function _() {
                d = 0,
                c = !1,
                f = NaN
            }
            function v() {
                a.off(n.default.TIME_SYNCHRONIZATION_COMPLETED, y, this),
                _()
            }
            return e = {
                initialize: function() {
                    _(),
                    a.on(n.default.TIME_SYNCHRONIZATION_COMPLETED, y, this)
                },
                isTimeSyncCompleted: function() {
                    return c
                },
                setTimeSyncCompleted: function(e) {
                    c = e
                },
                getClientTimeOffset: function() {
                    return d
                },
                setClientTimeOffset: h,
                getExpectedLiveEdge: function() {
                    return f
                },
                setExpectedLiveEdge: function(e) {
                    f = e
                },
                calcAvailabilityStartTimeFromPresentationTime: function(e, t, a) {
                    return p.call(this, e, t, a)
                },
                calcAvailabilityEndTimeFromPresentationTime: function(e, t, a) {
                    return p.call(this, e, t, a, !0)
                },
                calcPresentationTimeFromWallTime: g,
                calcPresentationTimeFromMediaTime: m,
                calcPeriodRelativeTimeFromMpdRelativeTime: function(e, t) {
                    return t - e.adaptation.period.start
                },
                calcMediaTimeFromPresentationTime: function(e, t) {
                    return e - t.adaptation.period.start + t.presentationTimeOffset
                },
                calcSegmentAvailabilityRange: function(e, t) {
                    var a = e.adaptation.period
                      , r = {
                        start: a.start,
                        end: a.start + a.duration
                    };
                    if (!t)
                        return r;
                    if (!c && e.segmentAvailabilityRange)
                        return e.segmentAvailabilityRange;
                    var n = e.segmentDuration || (e.segments && e.segments.length ? e.segments[e.segments.length - 1].duration : 0);
                    if (e.segmentInfoType === o.default.SEGMENT_TIMELINE && i.get().streaming.calcSegmentAvailabilityRangeFromTimeline)
                        return function(e) {
                            var t, a = e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index], r = u.getRepresentationFor(e.index, a), n = r.SegmentTemplate.SegmentTimeline, i = r.SegmentTemplate.timescale, o = n.S_asArray, s = {
                                start: 0,
                                end: 0
                            }, l = 0, d = void 0, c = void 0, f = void 0;
                            for (s.start = m(o[0].t / i, e),
                            f = 0,
                            t = o.length; f < t; f++)
                                d = o[f],
                                c = 0,
                                d.hasOwnProperty("r") && (c = d.r),
                                l += d.d / i * (1 + c);
                            return s.end = s.start + l,
                            s
                        }(e);
                    var s = g(new Date, a)
                      , l = a.start + a.duration;
                    r.start = Math.max(s - a.mpd.timeShiftBufferDepth, a.start);
                    var d = void 0 !== e.availabilityTimeOffset && e.availabilityTimeOffset < n ? n - e.availabilityTimeOffset : n;
                    return r.end = s >= l && s - d < l ? l : s - d,
                    r
                },
                getPeriodEnd: function(e, t) {
                    var a = e.adaptation.period;
                    if (!t)
                        return a.start + a.duration;
                    if (!c && e.segmentAvailabilityRange)
                        return e.segmentAvailabilityRange;
                    var r = e.segmentDuration || (e.segments && e.segments.length ? e.segments[e.segments.length - 1].duration : 0)
                      , n = g(new Date, a)
                      , i = a.start + a.duration
                      , o = void 0 !== e.availabilityTimeOffset && e.availabilityTimeOffset < r ? r - e.availabilityTimeOffset : r;
                    return Math.min(n - o, i)
                },
                calcWallTimeForSegment: function(e, t) {
                    var a = void 0
                      , r = void 0
                      , n = void 0;
                    return t && (a = e.representation.adaptation.period.mpd.suggestedPresentationDelay,
                    r = e.presentationStartTime + a,
                    n = new Date(e.availabilityStartTime.getTime() + 1e3 * r)),
                    n
                },
                reset: v
            },
            u = (0,
            s.default)(t).getInstance(),
            v(),
            e
        }
        d.__dashjs_factory_name = "TimelineConverter",
        t.default = i.default.getSingletonFactory(d)
    }
    , function(e, t, r) {
        "use strict";
        var n, i, o, l, u, d = {
            encode: function(e) {
                for (var t = [], a = 0; a < e.length; ++a) {
                    var r = e.charCodeAt(a);
                    r < 128 ? t.push(r) : r < 2048 ? (t.push(192 | r >> 6),
                    t.push(128 | 63 & r)) : r < 65536 ? (t.push(224 | r >> 12),
                    t.push(128 | 63 & r >> 6),
                    t.push(128 | 63 & r)) : (t.push(240 | r >> 18),
                    t.push(128 | 63 & r >> 12),
                    t.push(128 | 63 & r >> 6),
                    t.push(128 | 63 & r))
                }
                return t
            },
            decode: function(e) {
                for (var t = [], a = 0; a < e.length; ) {
                    var r = e[a++];
                    r < 128 || (r < 224 ? (r = (31 & r) << 6,
                    r |= 63 & e[a++]) : r < 240 ? (r = (15 & r) << 12,
                    r |= (63 & e[a++]) << 6,
                    r |= 63 & e[a++]) : (r = (7 & r) << 18,
                    r |= (63 & e[a++]) << 12,
                    r |= (63 & e[a++]) << 6,
                    r |= 63 & e[a++])),
                    t.push(String.fromCharCode(r))
                }
                return t.join("")
            }
        }, c = {};
        n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
        i = function(e) {
            for (var t = 0, a = [], r = 0 | e.length / 3; 0 < r--; ) {
                var i = (e[t] << 16) + (e[t + 1] << 8) + e[t + 2];
                t += 3,
                a.push(n.charAt(63 & i >> 18)),
                a.push(n.charAt(63 & i >> 12)),
                a.push(n.charAt(63 & i >> 6)),
                a.push(n.charAt(63 & i))
            }
            return 2 == e.length - t ? (i = (e[t] << 16) + (e[t + 1] << 8),
            a.push(n.charAt(63 & i >> 18)),
            a.push(n.charAt(63 & i >> 12)),
            a.push(n.charAt(63 & i >> 6)),
            a.push("=")) : 1 == e.length - t && (i = e[t] << 16,
            a.push(n.charAt(63 & i >> 18)),
            a.push(n.charAt(63 & i >> 12)),
            a.push("==")),
            a.join("")
        }
        ,
        o = function() {
            for (var e = [], t = 0; t < n.length; ++t)
                e[n.charCodeAt(t)] = t;
            return e["=".charCodeAt(0)] = 0,
            e
        }(),
        l = function(e) {
            for (var t = 0, a = [], r = 0 | e.length / 4; 0 < r--; ) {
                var n = (o[e.charCodeAt(t)] << 18) + (o[e.charCodeAt(t + 1)] << 12) + (o[e.charCodeAt(t + 2)] << 6) + o[e.charCodeAt(t + 3)];
                a.push(255 & n >> 16),
                a.push(255 & n >> 8),
                a.push(255 & n),
                t += 4
            }
            return a && ("=" == e.charAt(t - 2) ? (a.pop(),
            a.pop()) : "=" == e.charAt(t - 1) && a.pop()),
            a
        }
        ,
        u = {
            encode: function(e) {
                for (var t = [], a = 0; a < e.length; ++a)
                    t.push(e.charCodeAt(a));
                return t
            },
            decode: function(e) {
                for (var t = 0; t < s.length; ++t)
                    a[t] = String.fromCharCode(a[t]);
                return a.join("")
            }
        },
        c.decodeArray = function(e) {
            var t = l(e);
            return new Uint8Array(t)
        }
        ,
        c.encodeASCII = function(e) {
            var t = u.encode(e);
            return i(t)
        }
        ,
        c.decodeASCII = function(e) {
            var t = l(e);
            return u.decode(t)
        }
        ,
        c.encode = function(e) {
            var t = d.encode(e);
            return i(t)
        }
        ,
        c.decode = function(e) {
            var t = l(e);
            return d.decode(t)
        }
        ,
        t.decode = c.decode,
        t.decodeArray = c.decodeArray,
        t.encode = c.encode,
        t.encodeASCII = c.encodeASCII
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = l(a(379))
          , n = l(a(113))
          , i = l(a(381))
          , o = l(a(230))
          , s = l(a(229));
        function l(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function u() {
            var e = this.context;
            return {
                createMetricsReporting: function(t) {
                    return (0,
                    r.default)(e).getInstance({
                        eventBus: t.eventBus,
                        dashMetrics: t.dashMetrics,
                        metricsConstants: t.metricsConstants,
                        events: t.events
                    }),
                    (0,
                    i.default)(e).create(t)
                },
                getReportingFactory: function() {
                    return (0,
                    s.default)(e).getInstance()
                },
                getMetricsHandlerFactory: function() {
                    return (0,
                    o.default)(e).getInstance()
                }
            }
        }
        u.__dashjs_factory_name = "MetricsReporting";
        var d = dashjs.FactoryMaker.getClassFactory(u);
        d.events = n.default,
        dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name, d),
        t.default = d
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(380))
          , n = i(a(113));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            var t = void 0
              , a = void 0
              , i = (e = e || {}).eventBus
              , o = e.dashMetrics
              , s = e.metricsConstants
              , l = e.events;
            function u(e) {
                var t = new r.default;
                if (a) {
                    for (var n in e)
                        e.hasOwnProperty(n) && (t[n] = e[n]);
                    t.mpdurl || (t.mpdurl = a.originalUrl || a.url),
                    t.terror || (t.terror = new Date),
                    o.addDVBErrors(t)
                }
            }
            function d(e) {
                e.error || (a = e.manifest)
            }
            function c(e) {
                u({
                    errorcode: r.default.BASE_URL_CHANGED,
                    servicelocation: e.entry
                })
            }
            function f() {
                u({
                    errorcode: r.default.BECAME_REPORTER
                })
            }
            function h(e) {
                switch (e.metric) {
                case s.HTTP_REQUEST:
                    (0 === (t = e.value).responsecode || t.responsecode >= 400 || t.responsecode < 100 || t.responsecode >= 600) && u({
                        errorcode: t.responsecode || r.default.CONNECTION_ERROR,
                        url: t.url,
                        terror: t.tresponse,
                        servicelocation: t._serviceLocation
                    })
                }
                var t
            }
            function p(e) {
                var t = void 0;
                switch (e.error ? e.error.code : 0) {
                case MediaError.MEDIA_ERR_NETWORK:
                    t = r.default.CONNECTION_ERROR;
                    break;
                case MediaError.MEDIA_ERR_DECODE:
                    t = r.default.CORRUPT_MEDIA_OTHER;
                    break;
                default:
                    return
                }
                u({
                    errorcode: t
                })
            }
            function g() {
                i.on(l.MANIFEST_UPDATED, d, t),
                i.on(l.SERVICE_LOCATION_BLACKLIST_CHANGED, c, t),
                i.on(l.METRIC_ADDED, h, t),
                i.on(l.METRIC_UPDATED, h, t),
                i.on(l.PLAYBACK_ERROR, p, t),
                i.on(n.default.BECAME_REPORTING_PLAYER, f, t)
            }
            return t = {
                initialise: g,
                reset: function() {
                    i.off(l.MANIFEST_UPDATED, d, t),
                    i.off(l.SERVICE_LOCATION_BLACKLIST_CHANGED, c, t),
                    i.off(l.METRIC_ADDED, h, t),
                    i.off(l.METRIC_UPDATED, h, t),
                    i.off(l.PLAYBACK_ERROR, p, t),
                    i.off(n.default.BECAME_REPORTING_PLAYER, f, t)
                }
            },
            g(),
            t
        }
        o.__dashjs_factory_name = "DVBErrorsTranslator",
        t.default = dashjs.FactoryMaker.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.mpdurl = null,
            this.errorcode = null,
            this.terror = null,
            this.url = null,
            this.ipaddress = null,
            this.servicelocation = null
        };
        r.SSL_CONNECTION_FAILED_PREFIX = "SSL",
        r.DNS_RESOLUTION_FAILED = "C00",
        r.HOST_UNREACHABLE = "C01",
        r.CONNECTION_REFUSED = "C02",
        r.CONNECTION_ERROR = "C03",
        r.CORRUPT_MEDIA_ISOBMFF = "M00",
        r.CORRUPT_MEDIA_OTHER = "M01",
        r.BASE_URL_CHANGED = "F00",
        r.BECAME_REPORTER = "S00",
        t.default = r
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(382))
          , n = o(a(393))
          , i = o(a(113));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e) {
            e = e || {};
            var t = {}
              , a = this.context
              , o = e.eventBus
              , s = e.events;
            function l(s) {
                if (!s.error) {
                    var l = Object.keys(t);
                    (0,
                    n.default)(a).getInstance({
                        adapter: e.adapter,
                        constants: e.constants
                    }).getMetrics(s.manifest).forEach((function(n) {
                        var i = JSON.stringify(n);
                        if (t.hasOwnProperty(i))
                            l.splice(i, 1);
                        else
                            try {
                                var o = (0,
                                r.default)(a).create(e);
                                o.initialize(n),
                                t[i] = o
                            } catch (e) {}
                    }
                    )),
                    l.forEach((function(e) {
                        t[e].reset(),
                        delete t[e]
                    }
                    )),
                    o.trigger(i.default.METRICS_INITIALISATION_COMPLETE)
                }
            }
            function u() {
                Object.keys(t).forEach((function(e) {
                    t[e].reset()
                }
                )),
                t = {}
            }
            return o.on(s.MANIFEST_UPDATED, l),
            o.on(s.STREAM_TEARDOWN_COMPLETE, u),
            {
                reset: function() {
                    o.off(s.MANIFEST_UPDATED, l),
                    o.off(s.STREAM_TEARDOWN_COMPLETE, u)
                }
            }
        }
        s.__dashjs_factory_name = "MetricsCollectionController",
        t.default = dashjs.FactoryMaker.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(383))
          , n = o(a(384))
          , i = o(a(388));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e) {
            e = e || {};
            var t = void 0
              , a = void 0
              , o = void 0
              , s = this.context;
            function l() {
                t && t.reset(),
                a && a.reset(),
                o && o.reset()
            }
            return {
                initialize: function(u) {
                    try {
                        (o = (0,
                        r.default)(s).create({
                            mediaElement: e.mediaElement
                        })).initialize(u.Range),
                        (a = (0,
                        n.default)(s).create({
                            debug: e.debug,
                            metricsConstants: e.metricsConstants
                        })).initialize(u.Reporting, o),
                        (t = (0,
                        i.default)(s).create({
                            debug: e.debug,
                            eventBus: e.eventBus,
                            metricsConstants: e.metricsConstants,
                            events: e.events
                        })).initialize(u.metrics, a)
                    } catch (e) {
                        throw l(),
                        e
                    }
                },
                reset: l
            }
        }
        s.__dashjs_factory_name = "MetricsController",
        t.default = dashjs.FactoryMaker.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(211), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            e = e || {};
            var t, a = !1, r = this.context, n = void 0, o = e.mediaElement;
            return t = {
                initialize: function(e) {
                    e && e.length && (e.forEach((function(e) {
                        var t = e.starttime
                          , a = t + e.duration;
                        n.add(t, a)
                    }
                    )),
                    a = !!e[0]._useWallClockTime)
                },
                reset: function() {
                    n.clear()
                },
                isEnabled: function() {
                    var e, t = n.length;
                    if (!t)
                        return !0;
                    e = a ? (new Date).getTime() / 1e3 : o.currentTime;
                    for (var r = 0; r < t; r += 1) {
                        var i = n.start(r)
                          , s = n.end(r);
                        if (i <= e && e < s)
                            return !0
                    }
                    return !1
                }
            },
            n = (0,
            i.default)(r).create(),
            t
        }
        o.__dashjs_factory_name = "RangeController",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(229), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = []
              , a = (0,
            i.default)(this.context).getInstance(e);
            return {
                initialize: function(e, r) {
                    e.some((function(e) {
                        var n = a.create(e, r);
                        if (n)
                            return t.push(n),
                            !0
                    }
                    ))
                },
                reset: function() {
                    t.forEach((function(e) {
                        return e.reset()
                    }
                    )),
                    t = []
                },
                report: function(e, a) {
                    t.forEach((function(t) {
                        return t.report(e, a)
                    }
                    ))
                }
            }
        }
        o.__dashjs_factory_name = "ReportingController",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(386))
          , n = i(a(387));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e) {
            e = e || {};
            var t, a = this.context, i = void 0, o = void 0, s = void 0, l = void 0, u = void 0, d = void 0, c = [], f = e.metricsConstants;
            function h() {
                s = !1,
                l = !1,
                u = null,
                d = null
            }
            return t = {
                report: function(e, t) {
                    Array.isArray(t) || (t = [t]),
                    l && d.isEnabled() && t.forEach((function(t) {
                        var a = i.serialise(t);
                        e !== f.DVB_ERRORS && (a = "metricname=" + e + "&" + a),
                        function(e, t, a) {
                            var r = new XMLHttpRequest
                              , n = function() {
                                var e = c.indexOf(r);
                                -1 !== e && (c.splice(e, 1),
                                r.status >= 200 && r.status < 300 ? t && t() : a && a())
                            };
                            c.push(r);
                            try {
                                r.open("GET", e),
                                r.onloadend = n,
                                r.onerror = n,
                                r.send()
                            } catch (e) {
                                r.onerror()
                            }
                        }(a = u + "?" + a, null, (function() {
                            l = !1
                        }
                        ))
                    }
                    ))
                },
                initialize: function(e, t) {
                    var a = void 0;
                    if (d = t,
                    !(u = e["dvb:reportingUrl"]))
                        throw new Error("required parameter missing (dvb:reportingUrl)");
                    s || ((a = e["dvb:probability"] || e["dvb:priority"] || 0) && (1e3 === a || a / 1e3 >= o.random()) && (l = !0),
                    s = !0)
                },
                reset: function() {
                    h()
                }
            },
            i = (0,
            r.default)(a).getInstance(),
            o = (0,
            n.default)(a).getInstance(),
            h(),
            t
        }
        o.__dashjs_factory_name = "DVBReporting",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        function r() {
            return {
                serialise: function e(t) {
                    var a = []
                      , r = []
                      , n = void 0
                      , i = void 0;
                    for (n in t)
                        if (t.hasOwnProperty(n) && 0 !== n.indexOf("_")) {
                            if (null == (i = t[n]) && (i = ""),
                            Array.isArray(i)) {
                                if (!i.length)
                                    continue;
                                r = [],
                                i.forEach((function(t) {
                                    var a = "Object" !== Object.prototype.toString.call(t).slice(8, -1);
                                    r.push(a ? t : e(t))
                                }
                                )),
                                i = r.map(encodeURIComponent).join(",")
                            } else
                                "string" == typeof i ? i = encodeURIComponent(i) : i instanceof Date ? i = i.toISOString() : "number" == typeof i && (i = Math.round(i));
                            a.push(n + "=" + i)
                        }
                    return a.join("&")
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        r.__dashjs_factory_name = "MetricSerialiser",
        t.default = dashjs.FactoryMaker.getSingletonFactory(r)
    }
    , function(e, t, a) {
        "use strict";
        function r() {
            var e, t = window.crypto || window.msCrypto, a = Uint32Array, r = Math.pow(2, 8 * a.BYTES_PER_ELEMENT) - 1, n = void 0, i = void 0;
            function o() {
                t && (n || (n = new a(10)),
                t.getRandomValues(n),
                i = 0)
            }
            return e = {
                random: function(e, a) {
                    var s = void 0;
                    return e || (e = 0),
                    a || (a = 1),
                    t ? (i === n.length && o(),
                    s = n[i] / r,
                    i += 1) : s = Math.random(),
                    s * (a - e) + e
                }
            },
            o(),
            e
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        r.__dashjs_factory_name = "RNG",
        t.default = dashjs.FactoryMaker.getSingletonFactory(r)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(230), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            e = e || {};
            var t = []
              , a = void 0
              , r = this.context
              , n = e.eventBus
              , o = e.events
              , s = (0,
            i.default)(r).getInstance({
                debug: e.debug,
                eventBus: e.eventBus,
                metricsConstants: e.metricsConstants
            });
            function l(e) {
                t.forEach((function(t) {
                    t.handleNewMetric(e.metric, e.value, e.mediaType)
                }
                ))
            }
            return a = {
                initialize: function(e, r) {
                    e.split(",").forEach((function(e, a, n) {
                        var i;
                        if (-1 !== e.indexOf("(") && -1 === e.indexOf(")")) {
                            var o = n[a + 1];
                            o && -1 === o.indexOf("(") && -1 !== o.indexOf(")") && (e += "," + o,
                            delete n[a + 1])
                        }
                        (i = s.create(e, r)) && t.push(i)
                    }
                    )),
                    n.on(o.METRIC_ADDED, l, a),
                    n.on(o.METRIC_UPDATED, l, a)
                },
                reset: function() {
                    n.off(o.METRIC_ADDED, l, a),
                    n.off(o.METRIC_UPDATED, l, a),
                    t.forEach((function(e) {
                        return e.reset()
                    }
                    )),
                    t = []
                }
            }
        }
        o.__dashjs_factory_name = "MetricsHandlersController",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(231), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            e = e || {};
            var t = void 0
              , a = void 0
              , r = void 0
              , n = void 0
              , o = void 0
              , s = this.context
              , l = (0,
            i.default)(s).getInstance()
              , u = []
              , d = e.metricsConstants;
            function c() {
                var e = function() {
                    try {
                        return Object.keys(u).map((function(e) {
                            return u[e]
                        }
                        )).reduce((function(e, t) {
                            return e.level < t.level ? e : t
                        }
                        ))
                    } catch (e) {
                        return
                    }
                }();
                e && o !== e.t && (o = e.t,
                t.report(r, e))
            }
            return {
                initialize: function(e, i, o) {
                    i && (a = l.validateN(o),
                    t = i,
                    r = l.reconstructFullMetricName(e, o),
                    n = setInterval(c, a))
                },
                reset: function() {
                    clearInterval(n),
                    n = null,
                    a = 0,
                    t = null,
                    o = null
                },
                handleNewMetric: function(e, t, a) {
                    e === d.BUFFER_LEVEL && (u[a] = t)
                }
            }
        }
        o.__dashjs_factory_name = "BufferLevelHandler",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(113), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        t.default = dashjs.FactoryMaker.getClassFactory((function(e) {
            var t = void 0
              , a = (e = e || {}).eventBus
              , r = e.metricsConstants;
            function n() {
                a.off(i.default.METRICS_INITIALISATION_COMPLETE, n, this),
                a.trigger(i.default.BECAME_REPORTING_PLAYER)
            }
            return {
                initialize: function(e, r) {
                    r && (t = r,
                    a.on(i.default.METRICS_INITIALISATION_COMPLETE, n, this))
                },
                reset: function() {
                    t = null
                },
                handleNewMetric: function(e, a) {
                    e === r.DVB_ERRORS && t && t.report(e, a)
                }
            }
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(231), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            e = e || {};
            var t = void 0
              , a = void 0
              , r = void 0
              , n = void 0
              , o = void 0
              , s = []
              , l = (0,
            i.default)(this.context).getInstance()
              , u = e.metricsConstants;
            function d() {
                var e = s;
                e.length && t && t.report(n, e),
                s = []
            }
            return {
                initialize: function(e, i, s, u) {
                    i && (a = l.validateN(s),
                    t = i,
                    u && u.length && (r = u),
                    n = l.reconstructFullMetricName(e, s, u),
                    o = setInterval(d, a))
                },
                reset: function() {
                    clearInterval(o),
                    o = null,
                    a = null,
                    r = null,
                    s = [],
                    t = null
                },
                handleNewMetric: function(e, t) {
                    e === u.HTTP_REQUEST && (r && r !== t.type || s.push(t))
                }
            }
        }
        o.__dashjs_factory_name = "HttpListHandler",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        function r() {
            var e = void 0
              , t = void 0;
            return {
                initialize: function(a, r) {
                    e = a,
                    t = r
                },
                reset: function() {
                    t = null,
                    e = void 0
                },
                handleNewMetric: function(a, r) {
                    a === e && t && t.report(e, r)
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        r.__dashjs_factory_name = "GenericMetricHandler",
        t.default = dashjs.FactoryMaker.getClassFactory(r)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(394))
          , n = o(a(395))
          , i = o(a(396));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e) {
            var t = (e = e || {}).adapter
              , a = e.constants;
            return {
                getMetrics: function(e) {
                    var o = [];
                    return e && e.Metrics_asArray && e.Metrics_asArray.forEach((function(s) {
                        var l = new r.default
                          , u = t.getIsDynamic(e);
                        s.hasOwnProperty("metrics") && (l.metrics = s.metrics,
                        s.Range_asArray && s.Range_asArray.forEach((function(r) {
                            var i = new n.default;
                            i.starttime = function(e, r, n) {
                                var i = void 0
                                  , o = void 0
                                  , s = 0;
                                return r ? s = t.getAvailabilityStartTime(e) / 1e3 : (i = t.getRegularPeriods(e)).length && (s = i[0].start),
                                o = s,
                                n && n.hasOwnProperty(a.START_TIME) && (o += n.starttime),
                                o
                            }(e, u, r),
                            r.hasOwnProperty("duration") ? i.duration = r.duration : i.duration = t.getDuration(e),
                            i._useWallClockTime = u,
                            l.Range.push(i)
                        }
                        )),
                        s.Reporting_asArray && (s.Reporting_asArray.forEach((function(e) {
                            var t = new i.default;
                            if (e.hasOwnProperty(a.SCHEME_ID_URI)) {
                                for (var r in t.schemeIdUri = e.schemeIdUri,
                                e)
                                    e.hasOwnProperty(r) && (t[r] = e[r]);
                                l.Reporting.push(t)
                            }
                        }
                        )),
                        o.push(l)))
                    }
                    )),
                    o
                }
            }
        }
        s.__dashjs_factory_name = "ManifestParsing",
        t.default = dashjs.FactoryMaker.getSingletonFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.metrics = "",
            this.Range = [],
            this.Reporting = []
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.starttime = 0,
            this.duration = 1 / 0,
            this._useWallClockTime = !1
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e() {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.schemeIdUri = "",
            this.value = ""
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(398))
          , n = d(a(114))
          , i = d(a(408))
          , o = d(a(90))
          , s = d(a(409))
          , l = d(a(410))
          , u = d(a(411));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var c = [{
            generateKeyRequest: "generateKeyRequest",
            addKey: "addKey",
            cancelKeyRequest: "cancelKeyRequest",
            needkey: "needkey",
            keyerror: "keyerror",
            keyadded: "keyadded",
            keymessage: "keymessage"
        }, {
            generateKeyRequest: "webkitGenerateKeyRequest",
            addKey: "webkitAddKey",
            cancelKeyRequest: "webkitCancelKeyRequest",
            needkey: "webkitneedkey",
            keyerror: "webkitkeyerror",
            keyadded: "webkitkeyadded",
            keymessage: "webkitkeymessage"
        }]
          , f = [{
            setMediaKeys: "setMediaKeys",
            MediaKeys: "MediaKeys",
            release: "close",
            needkey: "needkey",
            error: "keyerror",
            message: "keymessage",
            ready: "keyadded",
            close: "keyclose"
        }, {
            setMediaKeys: "msSetMediaKeys",
            MediaKeys: "MSMediaKeys",
            release: "close",
            needkey: "msneedkey",
            error: "mskeyerror",
            message: "mskeymessage",
            ready: "mskeyadded",
            close: "mskeyclose"
        }];
        function h() {
            var e = void 0
              , t = this.context;
            function a(e, t) {
                for (var a = 0; a < t.length; a++) {
                    var r = t[a];
                    if ("function" == typeof e[r[Object.keys(r)[0]]])
                        return r
                }
                return null
            }
            return e = {
                createProtectionSystem: function(i) {
                    var o = null
                      , d = (0,
                    n.default)(t).getInstance();
                    d.setConfig({
                        debug: i.debug,
                        BASE64: i.BASE64
                    }),
                    d.initialize();
                    var h = function(r) {
                        var n = r.debug
                          , i = n.getLogger(e)
                          , o = r.eventBus
                          , d = r.errHandler
                          , h = r.videoModel ? r.videoModel.getElement() : null;
                        return h && void 0 === h.onencrypted || h && void 0 === h.mediaKeys ? a(h, f) ? (i.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),
                        (0,
                        l.default)(t).create({
                            debug: n,
                            eventBus: o,
                            events: r.events,
                            api: a(h, f)
                        })) : a(h, c) ? (i.info("EME detected on this user agent! (ProtectionModel_01b)"),
                        (0,
                        u.default)(t).create({
                            debug: n,
                            eventBus: o,
                            errHandler: d,
                            events: r.events,
                            api: a(h, c)
                        })) : (i.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),
                        null) : (i.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),
                        (0,
                        s.default)(t).create({
                            debug: n,
                            eventBus: o,
                            events: r.events
                        }))
                    }(i);
                    return !o && h && (o = (0,
                    r.default)(t).create({
                        protectionModel: h,
                        protectionKeyController: d,
                        eventBus: i.eventBus,
                        debug: i.debug,
                        events: i.events,
                        BASE64: i.BASE64,
                        constants: i.constants
                    }),
                    i.capabilities.setEncryptedMediaSupported(!0)),
                    o
                }
            }
        }
        h.__dashjs_factory_name = "Protection";
        var p = dashjs.FactoryMaker.getClassFactory(h);
        p.events = i.default,
        p.errors = o.default,
        dashjs.FactoryMaker.updateClassFactory(h.__dashjs_factory_name, p),
        t.default = p
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        }
        : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        }
          , n = u(a(73))
          , i = u(a(399))
          , o = u(a(172))
          , s = u(a(90))
          , l = u(a(12));
        function u(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function d(e) {
            var t = (e = e || {}).protectionKeyController
              , a = e.protectionModel
              , u = e.eventBus
              , d = e.events
              , c = e.debug
              , f = e.BASE64
              , h = e.constants
              , p = []
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0;
            function T() {
                if (!(u && u.hasOwnProperty("on") && t && t.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))
                    throw new Error("Missing config parameter(s)")
            }
            function S(e, r) {
                var i = n.default.getPSSHForKeySystem(k, e)
                  , o = I(k);
                if (i) {
                    for (var c = a.getAllInitData(), f = 0; f < c.length; f++)
                        if (t.initDataEquals(i, c[f]))
                            return void m.warn("DRM: Ignoring initData because we have already seen it!");
                    try {
                        a.createKeySession(i, o, w(k), r)
                    } catch (e) {
                        u.trigger(d.KEY_SESSION_CREATED, {
                            data: null,
                            error: new l.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE + e.message)
                        })
                    }
                } else
                    e ? a.createKeySession(e, o, w(k), r) : u.trigger(d.KEY_SESSION_CREATED, {
                        data: null,
                        error: new l.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE + "Selected key system is " + (k ? k.systemString : null) + ".  needkey/encrypted event contains no initData corresponding to that key system!")
                    })
            }
            function A(e, t) {
                T(),
                a.loadKeySession(e, t, w(k))
            }
            function C(e) {
                T(),
                e ? (a.setMediaElement(e),
                u.on(d.NEED_KEY, O, this)) : null === e && (a.setMediaElement(e),
                u.off(d.NEED_KEY, O, this))
            }
            function I(e) {
                var t = null;
                if (e) {
                    var a = e.systemString;
                    v && (t = a in v ? v[a] : null)
                }
                return t
            }
            function P(e) {
                var t = I(e)
                  , a = []
                  , r = []
                  , n = t && t.audioRobustness && t.audioRobustness.length > 0 ? t.audioRobustness : E
                  , s = t && t.videoRobustness && t.videoRobustness.length > 0 ? t.videoRobustness : E
                  , l = w(e)
                  , u = t && t.distinctiveIdentifier ? t.distinctiveIdentifier : "optional"
                  , d = t && t.persistentState ? t.persistentState : "temporary" === l ? "optional" : "required";
                return _.forEach((function(e) {
                    e.type === h.AUDIO ? a.push(new i.default(e.codec,n)) : e.type === h.VIDEO && r.push(new i.default(e.codec,s))
                }
                )),
                new o.default(a,r,u,d,[l])
            }
            function w(e) {
                var t = I(e);
                return t && t.sessionType ? t.sessionType : b
            }
            function M(e, r) {
                var n = this
                  , i = [];
                e = e.sort((function(t, a) {
                    return (v && v[t.ks.systemString] && v[t.ks.systemString].priority >= 0 ? v[t.ks.systemString].priority : e.length) - (v && v[a.ks.systemString] && v[a.ks.systemString].priority >= 0 ? v[a.ks.systemString].priority : e.length)
                }
                ));
                var o = void 0;
                if (k)
                    for (o = 0; o < e.length; o++) {
                        if (k === e[o].ks)
                            if ("break" === function() {
                                i.push({
                                    ks: e[o].ks,
                                    configs: [P(k)]
                                });
                                return u.on(d.KEY_SYSTEM_ACCESS_COMPLETE, (function a(i) {
                                    if (u.off(d.KEY_SYSTEM_ACCESS_COMPLETE, a, n),
                                    i.error)
                                        r || u.trigger(d.KEY_SYSTEM_SELECTED, {
                                            error: new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE + i.error)
                                        });
                                    else {
                                        m.info("DRM: KeySystem Access Granted"),
                                        u.trigger(d.KEY_SYSTEM_SELECTED, {
                                            data: i.data
                                        });
                                        var c = I(k);
                                        if (t.isClearKey(k) && c && c.hasOwnProperty("clearkeys")) {
                                            var f = {
                                                kids: Object.keys(c.clearkeys)
                                            };
                                            e[o].initData = (new TextEncoder).encode(JSON.stringify(f))
                                        }
                                        e[o].sessionId ? A(e[o].sessionId, e[o].initData) : e[o].initData && S(e[o].initData, e[o].cdmData)
                                    }
                                }
                                ), n),
                                a.requestKeySystemAccess(i),
                                "break"
                            }())
                                break
                    }
                else if (void 0 === k) {
                    k = null,
                    y.push(e);
                    for (var c = 0; c < e.length; c++)
                        i.push({
                            ks: e[c].ks,
                            configs: [P(e[c].ks)]
                        });
                    var h = void 0
                      , p = function e(t) {
                        u.off(d.KEY_SYSTEM_ACCESS_COMPLETE, e, n),
                        t.error ? (k = void 0,
                        u.off(d.INTERNAL_KEY_SYSTEM_SELECTED, g, n),
                        r || u.trigger(d.KEY_SYSTEM_SELECTED, {
                            data: null,
                            error: new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE + t.error)
                        })) : (h = t.data,
                        m.info("DRM: KeySystem Access Granted (" + h.keySystem.systemString + ")!  Selecting key system..."),
                        a.selectKeySystem(h))
                    }
                      , g = function e(i) {
                        if (u.off(d.INTERNAL_KEY_SYSTEM_SELECTED, e, n),
                        u.off(d.KEY_SYSTEM_ACCESS_COMPLETE, p, n),
                        i.error)
                            k = void 0,
                            r || u.trigger(d.KEY_SYSTEM_SELECTED, {
                                data: null,
                                error: new l.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE + "Error selecting key system! -- " + i.error)
                            });
                        else {
                            if (!a)
                                return;
                            k = a.getKeySystem(),
                            u.trigger(d.KEY_SYSTEM_SELECTED, {
                                data: h
                            });
                            var c = I(k);
                            c && c.serverCertificate && c.serverCertificate.length > 0 && a.setServerCertificate(f.decodeArray(c.serverCertificate).buffer);
                            for (var g = 0; g < y.length; g++)
                                for (o = 0; o < y[g].length; o++)
                                    if (k === y[g][o].ks) {
                                        if (t.isClearKey(k) && c && c.hasOwnProperty("clearkeys")) {
                                            var m = {
                                                kids: Object.keys(c.clearkeys)
                                            };
                                            y[g][o].initData = (new TextEncoder).encode(JSON.stringify(m))
                                        }
                                        y[g][o].sessionId ? A(y[g][o].sessionId, y[g][o].initData) : null !== y[g][o].initData && S(y[g][o].initData, y[g][o].cdmData);
                                        break
                                    }
                        }
                    };
                    u.on(d.INTERNAL_KEY_SYSTEM_SELECTED, g, n),
                    u.on(d.KEY_SYSTEM_ACCESS_COMPLETE, p, n),
                    a.requestKeySystemAccess(i)
                } else
                    y.push(e)
            }
            function R(e, t) {
                u.trigger(d.LICENSE_REQUEST_COMPLETE, {
                    data: e,
                    error: t
                })
            }
            function x(e) {
                e.error ? u.trigger(d.KEY_STATUSES_CHANGED, {
                    data: null,
                    error: e.error
                }) : m.debug("DRM: key status = " + e.status)
            }
            function D(e) {
                m.debug("DRM: onKeyMessage");
                var i = e.data;
                u.trigger(d.KEY_MESSAGE, {
                    data: i
                });
                var o = i.messageType ? i.messageType : "license-request"
                  , c = i.message
                  , f = i.sessionToken
                  , h = I(k)
                  , p = k ? k.systemString : null
                  , g = t.getLicenseServer(k, h, o)
                  , y = {
                    sessionToken: f,
                    messageType: o
                };
                if (c && 0 !== c.byteLength) {
                    if (!g)
                        return m.debug("DRM: License server request not required for this message (type = " + e.data.messageType + ").  Session ID = " + f.getSessionID()),
                        void R(y);
                    if (t.isClearKey(k)) {
                        var v = t.processClearKeyLicenseRequest(k, h, c);
                        if (v)
                            return m.debug("DRM: ClearKey license request handled by application!"),
                            R(y),
                            void a.updateKeySession(f, v)
                    }
                    var b = null;
                    if (h && h.serverURL) {
                        var E = h.serverURL;
                        "string" == typeof E && "" !== E ? b = E : "object" === (void 0 === E ? "undefined" : r(E)) && E.hasOwnProperty(o) && (b = E[o])
                    } else if (h && h.laURL && "" !== h.laURL)
                        b = h.laURL;
                    else if (t.isClearKey(k))
                        b = k.getLicenseServerUrlFromMediaInfo(_);
                    else {
                        var T = n.default.getPSSHData(f.initData);
                        (b = k.getLicenseServerURLFromInitData(T)) || (b = e.data.laURL)
                    }
                    if (b = g.getServerURLFromMessage(b, c, o)) {
                        var S = {}
                          , A = !1
                          , C = function(e) {
                            if (e)
                                for (var t in e)
                                    "authorization" === t.toLowerCase() && (A = !0),
                                    S[t] = e[t]
                        };
                        h && C(h.httpRequestHeaders),
                        C(k.getRequestHeadersFromMessage(c)),
                        h && "boolean" == typeof h.withCredentials && (A = h.withCredentials);
                        var P = function(e, t, a, r) {
                            var n = e.response ? g.getErrorResponse(e.response, a, r) : "NONE";
                            R(t, new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE + a + ' update, XHR complete. status is "' + e.statusText + '" (' + e.status + "), readyState is " + e.readyState + ".  Response is " + n))
                        }
                          , w = k.getLicenseRequestFromMessage(c)
                          , M = g.getHTTPMethod(o)
                          , x = g.getResponseType(p, o)
                          , D = h && !isNaN(h.httpTimeout) ? h.httpTimeout : 8e3;
                        !function e(t, a, r, n, i, o, s, l, u, d, c) {
                            var f = new XMLHttpRequest;
                            f.open(r, t, !0),
                            f.responseType = n,
                            f.withCredentials = i,
                            l > 0 && (f.timeout = l);
                            for (var h in a)
                                f.setRequestHeader(h, a[h]);
                            var p = function() {
                                s--,
                                setTimeout((function() {
                                    e(t, a, r, n, i, o, s, l, u, d, c)
                                }
                                ), 1e3)
                            };
                            f.onload = function() {
                                200 === this.status || s <= 0 ? u(this) : (m.warn("License request failed (" + this.status + "). Retrying it... Pending retries: " + s),
                                p())
                            }
                            ,
                            f.ontimeout = f.onerror = function() {
                                s <= 0 ? c(this) : (m.warn("License request network request failed . Retrying it... Pending retries: " + s),
                                p())
                            }
                            ,
                            f.onabort = function() {
                                d(this)
                            }
                            ,
                            f.send(o)
                        }(b, S, M, x, A, w, 3, D, (function(e) {
                            if (a)
                                if (200 === e.status) {
                                    var t = g.getLicenseMessage(e.response, p, o);
                                    null !== t ? (R(y),
                                    a.updateKeySession(f, t)) : P(e, y, p, o)
                                } else
                                    P(e, y, p, o)
                        }
                        ), (function(e) {
                            R(y, new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE + p + ' update, XHR aborted. status is "' + e.statusText + '" (' + e.status + "), readyState is " + e.readyState))
                        }
                        ), (function(e) {
                            R(y, new l.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE + p + ' update, XHR error. status is "' + e.statusText + '" (' + e.status + "), readyState is " + e.readyState))
                        }
                        ))
                    } else
                        R(y, new l.default(s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))
                } else
                    R(y, new l.default(s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))
            }
            function O(e, r) {
                if (m.debug("DRM: onNeedKey"),
                "cenc" === e.key.initDataType)
                    if (0 === _.length && (m.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),
                    (r = void 0 === r ? 1 : r + 1) < 5))
                        p.push(setTimeout((function() {
                            O(e, r)
                        }
                        ), 500));
                    else {
                        var i = e.key.initData;
                        if (ArrayBuffer.isView(i) && (i = i.buffer),
                        k) {
                            var o = n.default.getPSSHForKeySystem(k, i);
                            if (o)
                                for (var s = a.getAllInitData(), l = 0; l < s.length; l++)
                                    if (t.initDataEquals(o, s[l]))
                                        return void m.warn("DRM: Ignoring initData because we have already seen it!")
                        }
                        m.debug("DRM: initData:", String.fromCharCode.apply(null, new Uint8Array(i)));
                        var u = t.getSupportedKeySystems(i, v);
                        0 !== u.length ? M(u, !1) : m.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")
                    }
                else
                    m.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: " + e.key.initDataType)
            }
            return g = {
                initializeForMedia: function(e) {
                    if (!e)
                        throw new Error("mediaInfo can not be null or undefined");
                    T(),
                    u.on(d.INTERNAL_KEY_MESSAGE, D, this),
                    u.on(d.INTERNAL_KEY_STATUS_CHANGED, x, this),
                    _.push(e);
                    var a = t.getSupportedKeySystemsFromContentProtection(e.contentProtection);
                    a && a.length > 0 && M(a, !0)
                },
                createKeySession: S,
                loadKeySession: A,
                removeKeySession: function(e) {
                    T(),
                    a.removeKeySession(e)
                },
                closeKeySession: function(e) {
                    T(),
                    a.closeKeySession(e)
                },
                setServerCertificate: function(e) {
                    T(),
                    a.setServerCertificate(e)
                },
                setMediaElement: C,
                setSessionType: function(e) {
                    b = e
                },
                setRobustnessLevel: function(e) {
                    E = e
                },
                setProtectionData: function(e) {
                    v = e,
                    t.setProtectionData(e)
                },
                getSupportedKeySystemsFromContentProtection: function(e) {
                    return T(),
                    t.getSupportedKeySystemsFromContentProtection(e)
                },
                getKeySystems: function() {
                    return t ? t.getKeySystems() : []
                },
                setKeySystems: function(e) {
                    t && t.setKeySystems(e)
                },
                stop: function() {
                    a && a.stop()
                },
                reset: function() {
                    T(),
                    u.off(d.INTERNAL_KEY_MESSAGE, D, this),
                    u.off(d.INTERNAL_KEY_STATUS_CHANGED, x, this),
                    C(null),
                    k = void 0,
                    a && (a.reset(),
                    a = null),
                    p.forEach((function(e) {
                        return clearTimeout(e)
                    }
                    )),
                    p = [],
                    _ = []
                }
            },
            m = c.getLogger(g),
            y = [],
            _ = [],
            b = "temporary",
            E = "",
            g
        }
        d.__dashjs_factory_name = "ProtectionController",
        t.default = dashjs.FactoryMaker.getClassFactory(d)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        t.default = function e(t, a) {
            !function(e, t) {
                if (!(e instanceof t))
                    throw new TypeError("Cannot call a class as a function")
            }(this, e),
            this.contentType = t,
            this.robustness = a
        }
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = s(a(173))
          , n = s(a(174))
          , i = s(a(73))
          , o = s(a(62));
        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l = "e2719d58-a985-b3c9-781a-b030af78d30e"
          , u = o.default.CLEARKEY_KEYSTEM_STRING
          , d = "urn:uuid:" + l;
        function c(e) {
            var t = (e = e || {}).BASE64
              , a = {
                attributes: ["Laurl", "laurl"],
                prefixes: ["clearkey", "dashif"]
            };
            return {
                uuid: l,
                schemeIdURI: d,
                systemString: u,
                getInitData: function(e, a) {
                    try {
                        var r = i.default.parseInitDataFromContentProtection(e, t);
                        if (!r && a) {
                            var n = {
                                kids: [function(e) {
                                    try {
                                        var t = e.replace(/-/g, "");
                                        return (t = btoa(t.match(/\w{2}/g).map((function(e) {
                                            return String.fromCharCode(parseInt(e, 16))
                                        }
                                        )).join(""))).replace(/=/g, "")
                                    } catch (e) {
                                        return null
                                    }
                                }(a["cenc:default_KID"])]
                            };
                            r = (new TextEncoder).encode(JSON.stringify(n))
                        }
                        return r
                    } catch (e) {
                        return null
                    }
                },
                getRequestHeadersFromMessage: function() {
                    return {
                        "Content-Type": "application/json"
                    }
                },
                getLicenseRequestFromMessage: function(e) {
                    return JSON.parse(String.fromCharCode.apply(null, new Uint8Array(e)))
                },
                getLicenseServerURLFromInitData: function() {
                    return null
                },
                getCDMData: function() {
                    return null
                },
                getSessionId: function() {
                    return null
                },
                getLicenseServerUrlFromMediaInfo: function(e) {
                    try {
                        if (!e || 0 === e.length)
                            return null;
                        for (var t = 0, r = null; t < e.length && !r; ) {
                            var n = e[t];
                            if (n && n.contentProtection && n.contentProtection.length > 0) {
                                var i = n.contentProtection.filter((function(e) {
                                    return e.schemeIdUri && e.schemeIdUri === d
                                }
                                ));
                                if (i && i.length > 0)
                                    for (var o = 0; o < i.length && !r; ) {
                                        for (var s = i[o], l = 0; l < a.attributes.length && !r; ) {
                                            for (var u = 0, c = a.attributes[l]; u < a.prefixes.length && !r; ) {
                                                var f = a.prefixes[u];
                                                s[c] && s[c].__prefix && s[c].__prefix === f && s[c].__text && (r = s[c].__text),
                                                u += 1
                                            }
                                            l += 1
                                        }
                                        o += 1
                                    }
                            }
                            t += 1
                        }
                        return r
                    } catch (e) {
                        return null
                    }
                },
                getClearKeysFromProtectionData: function(e, t) {
                    var a = null;
                    if (e) {
                        for (var i = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(t))), o = [], s = 0; s < i.kids.length; s++) {
                            var l = i.kids[s]
                              , u = e.clearkeys && e.clearkeys.hasOwnProperty(l) ? e.clearkeys[l] : null;
                            if (!u)
                                throw new Error("DRM: ClearKey keyID (" + l + ") is not known!");
                            o.push(new r.default(l,u))
                        }
                        a = new n.default(o)
                    }
                    return a
                }
            }
        }
        c.__dashjs_factory_name = "KeySystemClearKey",
        t.default = dashjs.FactoryMaker.getSingletonFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = s(a(173))
          , n = s(a(174))
          , i = s(a(73))
          , o = s(a(62));
        function s(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var l = "1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"
          , u = o.default.CLEARKEY_KEYSTEM_STRING;
        function d(e) {
            var t = void 0
              , a = e.BASE64
              , o = e.debug.getLogger(t);
            return t = {
                uuid: l,
                schemeIdURI: "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",
                systemString: u,
                getInitData: function(e) {
                    return i.default.parseInitDataFromContentProtection(e, a)
                },
                getRequestHeadersFromMessage: function() {
                    return null
                },
                getLicenseRequestFromMessage: function(e) {
                    return new Uint8Array(e)
                },
                getLicenseServerURLFromInitData: function() {
                    return null
                },
                getCDMData: function() {
                    return null
                },
                getSessionId: function() {
                    return null
                },
                getClearKeysFromProtectionData: function(e, t) {
                    var a = null;
                    if (e) {
                        for (var i = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(t))), s = [], l = 0; l < i.kids.length; l++) {
                            var u = i.kids[l]
                              , d = e.clearkeys && e.clearkeys.hasOwnProperty(u) ? e.clearkeys[u] : null;
                            if (!d)
                                throw new Error("DRM: ClearKey keyID (" + u + ") is not known!");
                            s.push(new r.default(u,d))
                        }
                        a = new n.default(s),
                        o.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")
                    }
                    return a
                }
            }
        }
        d.__dashjs_factory_name = "KeySystemW3CClearKey",
        t.default = dashjs.FactoryMaker.getSingletonFactory(d)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(73))
          , n = i(a(62));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = "edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"
          , s = n.default.WIDEVINE_KEYSTEM_STRING;
        function l(e) {
            var t = null
              , a = (e = e || {}).BASE64;
            return {
                uuid: o,
                schemeIdURI: "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",
                systemString: s,
                init: function(e) {
                    e && (t = e)
                },
                getInitData: function(e) {
                    return r.default.parseInitDataFromContentProtection(e, a)
                },
                getRequestHeadersFromMessage: function() {
                    return null
                },
                getLicenseRequestFromMessage: function(e) {
                    return new Uint8Array(e)
                },
                getLicenseServerURLFromInitData: function() {
                    return null
                },
                getCDMData: function() {
                    return null
                },
                getSessionId: function(e) {
                    return t && t.sessionId ? t.sessionId : e && e.sessionId ? e.sessionId : null
                }
            }
        }
        l.__dashjs_factory_name = "KeySystemWidevine",
        t.default = dashjs.FactoryMaker.getSingletonFactory(l)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(73))
          , n = i(a(62));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        var o = "9a04f079-9840-4286-ab92-e65be0885f95"
          , s = n.default.PLAYREADY_KEYSTEM_STRING
          , l = void 0;
        function u(e) {
            var t = "utf-16"
              , a = (e = e || {}).BASE64;
            function n() {
                if (!a || !a.hasOwnProperty("decodeArray") || !a.hasOwnProperty("decodeArray"))
                    throw new Error("Missing config parameter(s)")
            }
            return {
                uuid: o,
                schemeIdURI: "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",
                systemString: s,
                getInitData: function(e) {
                    var t, i, o, s = new Uint8Array([112, 115, 115, 104, 0, 0, 0, 0]), l = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]), u = 0, d = null, c = void 0, f = void 0;
                    if (n(),
                    !e)
                        return null;
                    if ("pssh"in e)
                        return r.default.parseInitDataFromContentProtection(e, a);
                    if ("pro"in e)
                        d = a.decodeArray(e.pro.__text);
                    else {
                        if (!("prheader"in e))
                            return null;
                        d = a.decodeArray(e.prheader.__text)
                    }
                    return t = d.length,
                    i = 4 + s.length + l.length + 4 + t,
                    o = new ArrayBuffer(i),
                    c = new Uint8Array(o),
                    (f = new DataView(o)).setUint32(u, i),
                    u += 4,
                    c.set(s, u),
                    u += s.length,
                    c.set(l, u),
                    u += l.length,
                    f.setUint32(u, t),
                    u += 4,
                    c.set(d, u),
                    u += t,
                    c.buffer
                },
                getRequestHeadersFromMessage: function(e) {
                    var a, r = void 0, n = {}, i = new DOMParser, o = "utf-16" === t ? new Uint16Array(e) : new Uint8Array(e);
                    a = String.fromCharCode.apply(null, o);
                    for (var s = (r = i.parseFromString(a, "application/xml")).getElementsByTagName("name"), l = r.getElementsByTagName("value"), u = 0; u < s.length; u++)
                        n[s[u].childNodes[0].nodeValue] = l[u].childNodes[0].nodeValue;
                    return n.hasOwnProperty("Content") && (n["Content-Type"] = n.Content,
                    delete n.Content),
                    n.hasOwnProperty("Content-Type") || (n["Content-Type"] = "text/xml; charset=utf-8"),
                    n
                },
                getLicenseRequestFromMessage: function(e) {
                    var r = null
                      , i = new DOMParser
                      , o = "utf-16" === t ? new Uint16Array(e) : new Uint8Array(e);
                    n();
                    var s = String.fromCharCode.apply(null, o)
                      , l = i.parseFromString(s, "application/xml");
                    if (!l.getElementsByTagName("PlayReadyKeyMessage")[0])
                        return e;
                    var u = l.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;
                    return u && (r = a.decode(u)),
                    r
                },
                getLicenseServerURLFromInitData: function(e) {
                    if (e)
                        for (var t = new DataView(e), a = t.getUint16(4, !0), r = 6, n = new DOMParser, i = 0; i < a; i++) {
                            var o = t.getUint16(r, !0);
                            r += 2;
                            var s = t.getUint16(r, !0);
                            if (r += 2,
                            1 === o) {
                                var l = e.slice(r, r + s)
                                  , u = String.fromCharCode.apply(null, new Uint16Array(l))
                                  , d = n.parseFromString(u, "application/xml");
                                if (d.getElementsByTagName("LA_URL")[0]) {
                                    var c = d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;
                                    if (c)
                                        return c
                                }
                                if (d.getElementsByTagName("LUI_URL")[0]) {
                                    var f = d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;
                                    if (f)
                                        return f
                                }
                            } else
                                r += s
                        }
                    return null
                },
                getCDMData: function() {
                    var e = void 0
                      , t = void 0
                      , r = void 0
                      , i = void 0;
                    if (n(),
                    l && l.cdmData) {
                        for (e = [],
                        i = 0; i < l.cdmData.length; ++i)
                            e.push(l.cdmData.charCodeAt(i)),
                            e.push(0);
                        for (e = String.fromCharCode.apply(null, e),
                        e = a.encode(e),
                        t = '<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%", e),
                        r = [],
                        i = 0; i < t.length; ++i)
                            r.push(t.charCodeAt(i)),
                            r.push(0);
                        return new Uint8Array(r).buffer
                    }
                    return null
                },
                getSessionId: function(e) {
                    return l && l.sessionId ? l.sessionId : e && e.sessionId ? e.sessionId : null
                },
                setPlayReadyMessageFormat: function(e) {
                    if ("utf-8" !== e && "utf-16" !== e)
                        throw new Error('Specified message format is not one of "utf-8" or "utf-16"');
                    t = e
                },
                init: function(e) {
                    e && (l = e)
                }
            }
        }
        u.__dashjs_factory_name = "KeySystemPlayReady",
        t.default = dashjs.FactoryMaker.getSingletonFactory(u)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(62), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = (e = e || {}).BASE64
              , a = {};
            a[i.default.WIDEVINE_KEYSTEM_STRING] = {
                responseType: "json",
                getLicenseMessage: function(e) {
                    return t.decodeArray(e.license)
                },
                getErrorResponse: function(e) {
                    return e
                }
            },
            a[i.default.PLAYREADY_KEYSTEM_STRING] = {
                responseType: "arraybuffer",
                getLicenseMessage: function(e) {
                    return e
                },
                getErrorResponse: function(e) {
                    return String.fromCharCode.apply(null, new Uint8Array(e))
                }
            };
            return {
                getServerURLFromMessage: function(e) {
                    return e
                },
                getHTTPMethod: function() {
                    return "POST"
                },
                getResponseType: function(e) {
                    return a[e].responseType
                },
                getLicenseMessage: function(e, r) {
                    return function() {
                        if (!t || !t.hasOwnProperty("decodeArray"))
                            throw new Error("Missing config parameter(s)")
                    }(),
                    a[r].getLicenseMessage(e)
                },
                getErrorResponse: function(e, t) {
                    return a[t].getErrorResponse(e)
                }
            }
        }
        o.__dashjs_factory_name = "DRMToday",
        t.default = dashjs.FactoryMaker.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        function r() {
            var e = "http://schemas.xmlsoap.org/soap/envelope/";
            function t(e) {
                var t = String.fromCharCode.apply(null, new Uint8Array(e));
                return decodeURIComponent(escape(t))
            }
            function a(a) {
                if (window.DOMParser) {
                    var r = t(a)
                      , n = (new window.DOMParser).parseFromString(r, "text/xml")
                      , i = n ? n.getElementsByTagNameNS(e, "Envelope")[0] : null
                      , o = i ? i.getElementsByTagNameNS(e, "Body")[0] : null;
                    if (o ? o.getElementsByTagNameNS(e, "Fault")[0] : null)
                        return null
                }
                return a
            }
            function r(a) {
                var r = ""
                  , n = ""
                  , i = ""
                  , o = -1
                  , s = -1;
                if (window.DOMParser) {
                    var l = t(a)
                      , u = (new window.DOMParser).parseFromString(l, "text/xml")
                      , d = u ? u.getElementsByTagNameNS(e, "Envelope")[0] : null
                      , c = d ? d.getElementsByTagNameNS(e, "Body")[0] : null
                      , f = c ? c.getElementsByTagNameNS(e, "Fault")[0] : null
                      , h = f ? f.getElementsByTagName("detail")[0] : null
                      , p = h ? h.getElementsByTagName("Exception")[0] : null
                      , g = null;
                    if (null === f)
                        return l;
                    r = (g = f.getElementsByTagName("faultstring")[0].firstChild) ? g.nodeValue : null,
                    null !== p && (n = (g = p.getElementsByTagName("StatusCode")[0]) ? g.firstChild.nodeValue : null,
                    o = (i = (g = p.getElementsByTagName("Message")[0]) ? g.firstChild.nodeValue : null) ? i.lastIndexOf("[") + 1 : -1,
                    s = i ? i.indexOf("]") : -1,
                    i = i ? i.substring(o, s) : "")
                }
                var m = "code: " + n + ", name: " + r;
                return i && (m += ", message: " + i),
                m
            }
            return {
                getServerURLFromMessage: function(e) {
                    return e
                },
                getHTTPMethod: function() {
                    return "POST"
                },
                getResponseType: function() {
                    return "arraybuffer"
                },
                getLicenseMessage: function(e) {
                    return a.call(this, e)
                },
                getErrorResponse: function(e) {
                    return r.call(this, e)
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        r.__dashjs_factory_name = "PlayReady",
        t.default = dashjs.FactoryMaker.getSingletonFactory(r)
    }
    , function(e, t, a) {
        "use strict";
        function r() {
            return {
                getServerURLFromMessage: function(e) {
                    return e
                },
                getHTTPMethod: function() {
                    return "POST"
                },
                getResponseType: function() {
                    return "arraybuffer"
                },
                getLicenseMessage: function(e) {
                    return e
                },
                getErrorResponse: function(e) {
                    return String.fromCharCode.apply(null, new Uint8Array(e))
                }
            }
        }
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        r.__dashjs_factory_name = "Widevine",
        t.default = dashjs.FactoryMaker.getSingletonFactory(r)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(173))
          , n = i(a(174));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o() {
            return {
                getServerURLFromMessage: function(e) {
                    return e
                },
                getHTTPMethod: function() {
                    return "POST"
                },
                getResponseType: function() {
                    return "json"
                },
                getLicenseMessage: function(e) {
                    if (!e.hasOwnProperty("keys"))
                        return null;
                    for (var t = [], a = 0; a < e.keys.length; a++) {
                        var i = e.keys[a]
                          , o = i.kid.replace(/=/g, "")
                          , s = i.k.replace(/=/g, "");
                        t.push(new r.default(o,s))
                    }
                    return new n.default(t)
                },
                getErrorResponse: function(e) {
                    return String.fromCharCode.apply(null, new Uint8Array(e))
                }
            }
        }
        o.__dashjs_factory_name = "ClearKey",
        t.default = dashjs.FactoryMaker.getSingletonFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(106);
        var i = new (function(e) {
            function t() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, t);
                var e = function(e, t) {
                    if (!e)
                        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" != typeof t && "function" != typeof t ? e : t
                }(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return e.INTERNAL_KEY_MESSAGE = "internalKeyMessage",
                e.INTERNAL_KEY_SYSTEM_SELECTED = "internalKeySystemSelected",
                e.INTERNAL_KEY_STATUS_CHANGED = "internalkeyStatusChanged",
                e.KEY_ADDED = "public_keyAdded",
                e.KEY_ERROR = "public_keyError",
                e.KEY_MESSAGE = "public_keyMessage",
                e.KEY_SESSION_CLOSED = "public_keySessionClosed",
                e.KEY_SESSION_CREATED = "public_keySessionCreated",
                e.KEY_SESSION_REMOVED = "public_keySessionRemoved",
                e.KEY_STATUSES_CHANGED = "public_keyStatusesChanged",
                e.KEY_SYSTEM_ACCESS_COMPLETE = "public_keySystemAccessComplete",
                e.KEY_SYSTEM_SELECTED = "public_keySystemSelected",
                e.LICENSE_REQUEST_COMPLETE = "public_licenseRequestComplete",
                e.NEED_KEY = "needkey",
                e.PROTECTION_CREATED = "public_protectioncreated",
                e.PROTECTION_DESTROYED = "public_protectiondestroyed",
                e.SERVER_CERTIFICATE_UPDATED = "serverCertificateUpdated",
                e.TEARDOWN_COMPLETE = "protectionTeardownComplete",
                e.VIDEO_ELEMENT_SELECTED = "videoElementSelected",
                e
            }
            return function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
            }(t, e),
            t
        }(((r = n) && r.__esModule ? r : {
            default: r
        }).default));
        t.default = i
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(114))
          , n = d(a(175))
          , i = d(a(90))
          , o = d(a(12))
          , s = d(a(176))
          , l = d(a(177))
          , u = d(a(62));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e) {
            e = e || {};
            var t = this.context
              , a = e.eventBus
              , d = e.events
              , c = e.debug
              , f = void 0
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0;
            function b(e) {
                var t = e.session;
                return t.removeEventListener("keystatuseschange", e),
                t.removeEventListener("message", e),
                t.close()
            }
            function E(e) {
                for (var t = 0; t < y.length; t++)
                    if (y[t] === e) {
                        y.splice(t, 1);
                        break
                    }
            }
            function k(e) {
                var t = void 0
                  , a = void 0;
                return e && e.length > 0 && (e[0] && ("string" == typeof e[0] ? t = e[0] : a = e[0]),
                e[1] && ("string" == typeof e[1] ? t = e[1] : a = e[1])),
                {
                    status: t,
                    keyId: a
                }
            }
            function T(e, t, r, n) {
                var l = {
                    session: e,
                    initData: t,
                    sessionId: n,
                    handleEvent: function(e) {
                        switch (e.type) {
                        case "keystatuseschange":
                            a.trigger(d.KEY_STATUSES_CHANGED, {
                                data: this
                            }),
                            e.target.keyStatuses.forEach((function() {
                                var e = k(arguments);
                                switch (e.status) {
                                case "expired":
                                    a.trigger(d.INTERNAL_KEY_STATUS_CHANGED, {
                                        error: new o.default(i.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,i.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)
                                    });
                                    break;
                                default:
                                    a.trigger(d.INTERNAL_KEY_STATUS_CHANGED, e)
                                }
                            }
                            ));
                            break;
                        case "message":
                            var t = ArrayBuffer.isView(e.message) ? e.message.buffer : e.message;
                            a.trigger(d.INTERNAL_KEY_MESSAGE, {
                                data: new s.default(this,t,void 0,e.messageType)
                            })
                        }
                    },
                    getSessionID: function() {
                        return e.sessionId
                    },
                    getExpirationTime: function() {
                        return e.expiration
                    },
                    getKeyStatuses: function() {
                        return e.keyStatuses
                    },
                    getUsable: function() {
                        var t = !1;
                        return e.keyStatuses.forEach((function() {
                            var e = k(arguments);
                            "usable" === e.status && (t = !0)
                        }
                        )),
                        t
                    },
                    getSessionType: function() {
                        return r
                    }
                };
                return e.addEventListener("keystatuseschange", l),
                e.addEventListener("message", l),
                e.closed.then((function() {
                    E(l),
                    h.debug("DRM: Session closed.  SessionID = " + l.getSessionID()),
                    a.trigger(d.KEY_SESSION_CLOSED, {
                        data: l.getSessionID()
                    })
                }
                )),
                y.push(l),
                l
            }
            return f = {
                getAllInitData: function() {
                    for (var e = [], t = 0; t < y.length; t++)
                        y[t].initData && e.push(y[t].initData);
                    return e
                },
                requestKeySystemAccess: function(e) {
                    !function e(t, r) {
                        if (void 0 === navigator.requestMediaKeySystemAccess || "function" != typeof navigator.requestMediaKeySystemAccess)
                            return void a.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE, {
                                error: "Insecure origins are not allowed"
                            });
                        !function(r) {
                            var n = t[r].ks
                              , i = t[r].configs
                              , o = n.systemString;
                            o === u.default.PLAYREADY_KEYSTEM_STRING && "required" === i[0].persistentState && (o += ".recommendation"),
                            navigator.requestMediaKeySystemAccess(o, i).then((function(e) {
                                var t = "function" == typeof e.getConfiguration ? e.getConfiguration() : null
                                  , r = new l.default(n,t);
                                r.mksa = e,
                                a.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE, {
                                    data: r
                                })
                            }
                            )).catch((function(n) {
                                ++r < t.length ? e(t, r) : a.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE, {
                                    error: "Key system access denied! " + n.message
                                })
                            }
                            ))
                        }(r)
                    }(e, 0)
                },
                getKeySystem: function() {
                    return p
                },
                selectKeySystem: function(e) {
                    e.mksa.createMediaKeys().then((function(t) {
                        p = e.keySystem,
                        m = t,
                        g ? g.setMediaKeys(m).then((function() {
                            a.trigger(d.INTERNAL_KEY_SYSTEM_SELECTED)
                        }
                        )) : a.trigger(d.INTERNAL_KEY_SYSTEM_SELECTED)
                    }
                    )).catch((function() {
                        a.trigger(d.INTERNAL_KEY_SYSTEM_SELECTED, {
                            error: "Error selecting keys system (" + e.keySystem.systemString + ")! Could not create MediaKeys -- TODO"
                        })
                    }
                    ))
                },
                setMediaElement: function(e) {
                    g !== e && (g && (g.removeEventListener("encrypted", _),
                    g.setMediaKeys && g.setMediaKeys(null)),
                    (g = e) && (g.addEventListener("encrypted", _),
                    g.setMediaKeys && m && g.setMediaKeys(m)))
                },
                setServerCertificate: function(e) {
                    if (!p || !m)
                        throw new Error("Can not set server certificate until you have selected a key system");
                    m.setServerCertificate(e).then((function() {
                        h.info("DRM: License server certificate successfully updated."),
                        a.trigger(d.SERVER_CERTIFICATE_UPDATED)
                    }
                    )).catch((function(e) {
                        a.trigger(d.SERVER_CERTIFICATE_UPDATED, {
                            error: new o.default(i.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,i.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE + e.name)
                        })
                    }
                    ))
                },
                createKeySession: function(e, t, r) {
                    if (!p || !m)
                        throw new Error("Can not create sessions until you have selected a key system");
                    var n = m.createSession(r)
                      , s = T(n, e, r)
                      , l = this.getKeySystem().systemString === u.default.CLEARKEY_KEYSTEM_STRING && (e || t && t.clearkeys) ? "keyids" : "cenc";
                    n.generateRequest(l, e).then((function() {
                        h.debug("DRM: Session created.  SessionID = " + s.getSessionID()),
                        a.trigger(d.KEY_SESSION_CREATED, {
                            data: s
                        })
                    }
                    )).catch((function(e) {
                        E(s),
                        a.trigger(d.KEY_SESSION_CREATED, {
                            data: null,
                            error: new o.default(i.default.KEY_SESSION_CREATED_ERROR_CODE,i.default.KEY_SESSION_CREATED_ERROR_MESSAGE + "Error generating key request -- " + e.name)
                        })
                    }
                    ))
                },
                updateKeySession: function(e, t) {
                    var r = e.session;
                    v.isClearKey(p) && (t = t.toJWK()),
                    r.update(t).catch((function(t) {
                        a.trigger(d.KEY_ERROR, {
                            data: new o.default(i.default.MEDIA_KEYERR_CODE,"Error sending update() message! " + t.name,e)
                        })
                    }
                    ))
                },
                loadKeySession: function(e, t, r) {
                    if (!p || !m)
                        throw new Error("Can not load sessions until you have selected a key system");
                    for (var n = 0; n < y.length; n++)
                        if (e === y[n].sessionId)
                            return void h.warn("DRM: Ignoring session ID because we have already seen it!");
                    var s = m.createSession(r)
                      , l = T(s, t, r, e);
                    s.load(e).then((function(t) {
                        t ? (h.debug("DRM: Session loaded.  SessionID = " + l.getSessionID()),
                        a.trigger(d.KEY_SESSION_CREATED, {
                            data: l
                        })) : (E(l),
                        a.trigger(d.KEY_SESSION_CREATED, {
                            data: null,
                            error: new o.default(i.default.KEY_SESSION_CREATED_ERROR_CODE,i.default.KEY_SESSION_CREATED_ERROR_MESSAGE + "Could not load session! Invalid Session ID (" + e + ")")
                        }))
                    }
                    )).catch((function(t) {
                        E(l),
                        a.trigger(d.KEY_SESSION_CREATED, {
                            data: null,
                            error: new o.default(i.default.KEY_SESSION_CREATED_ERROR_CODE,i.default.KEY_SESSION_CREATED_ERROR_MESSAGE + "Could not load session (" + e + ")! " + t.name)
                        })
                    }
                    ))
                },
                removeKeySession: function(e) {
                    e.session.remove().then((function() {
                        h.debug("DRM: Session removed.  SessionID = " + e.getSessionID()),
                        a.trigger(d.KEY_SESSION_REMOVED, {
                            data: e.getSessionID()
                        })
                    }
                    ), (function(t) {
                        a.trigger(d.KEY_SESSION_REMOVED, {
                            data: null,
                            error: "Error removing session (" + e.getSessionID() + "). " + t.name
                        })
                    }
                    ))
                },
                closeKeySession: function(e) {
                    b(e).catch((function(t) {
                        E(e),
                        a.trigger(d.KEY_SESSION_CLOSED, {
                            data: null,
                            error: "Error closing session (" + e.getSessionID() + ") " + t.name
                        })
                    }
                    ))
                },
                stop: function() {
                    for (var e = void 0, t = 0; t < y.length; t++)
                        (e = y[t]).getUsable() || b(e).catch((function() {
                            E(e)
                        }
                        ))
                },
                reset: function() {
                    var e = y.length
                      , t = void 0;
                    0 !== e ? function() {
                        for (var r = function(e) {
                            E(e),
                            0 === y.length && (g ? (g.removeEventListener("encrypted", _),
                            g.setMediaKeys(null).then((function() {
                                a.trigger(d.TEARDOWN_COMPLETE)
                            }
                            ))) : a.trigger(d.TEARDOWN_COMPLETE))
                        }, n = 0; n < e; n++)
                            !function(e) {
                                t.session.closed.then((function() {
                                    r(e)
                                }
                                )),
                                b(t).catch((function() {
                                    r(e)
                                }
                                ))
                            }(t = y[n])
                    }() : a.trigger(d.TEARDOWN_COMPLETE)
                }
            },
            h = c.getLogger(f),
            p = null,
            g = null,
            m = null,
            y = [],
            v = (0,
            r.default)(t).getInstance(),
            _ = {
                handleEvent: function(e) {
                    switch (e.type) {
                    case "encrypted":
                        if (e.initData) {
                            var t = ArrayBuffer.isView(e.initData) ? e.initData.buffer : e.initData;
                            a.trigger(d.NEED_KEY, {
                                key: new n.default(t,e.initDataType)
                            })
                        }
                    }
                }
            },
            f
        }
        c.__dashjs_factory_name = "ProtectionModel_21Jan2015",
        t.default = dashjs.FactoryMaker.getClassFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(114))
          , n = d(a(175))
          , i = d(a(12))
          , o = d(a(90))
          , s = d(a(176))
          , l = d(a(172))
          , u = d(a(177));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e) {
            e = e || {};
            var t = this.context
              , a = e.eventBus
              , d = e.events
              , c = e.debug
              , f = e.api
              , h = void 0
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0;
            function k() {
                try {
                    for (var e = 0; e < v.length; e++)
                        T(v[e]);
                    g && g.removeEventListener(f.needkey, b),
                    a.trigger(d.TEARDOWN_COMPLETE)
                } catch (e) {
                    a.trigger(d.TEARDOWN_COMPLETE, {
                        error: "Error tearing down key sessions and MediaKeys! -- " + e.message
                    })
                }
            }
            function T(e) {
                var t = e.session;
                t.removeEventListener(f.error, e),
                t.removeEventListener(f.message, e),
                t.removeEventListener(f.ready, e),
                t.removeEventListener(f.close, e);
                for (var a = 0; a < v.length; a++)
                    if (v[a] === e) {
                        v.splice(a, 1);
                        break
                    }
                t[f.release]()
            }
            function S() {
                var e = null
                  , t = function() {
                    g.removeEventListener("loadedmetadata", e),
                    g[f.setMediaKeys](y),
                    a.trigger(d.VIDEO_ELEMENT_SELECTED)
                };
                g.readyState >= 1 ? t() : (e = t.bind(this),
                g.addEventListener("loadedmetadata", e))
            }
            return h = {
                getAllInitData: function() {
                    for (var e = [], t = 0; t < v.length; t++)
                        e.push(v[t].initData);
                    return e
                },
                requestKeySystemAccess: function(e) {
                    for (var t = !1, r = 0; r < e.length; r++)
                        for (var n = e[r].ks.systemString, i = e[r].configs, o = null, s = null, c = 0; c < i.length; c++) {
                            var h = i[c].audioCapabilities
                              , p = i[c].videoCapabilities;
                            if (h && 0 !== h.length) {
                                o = [];
                                for (var g = 0; g < h.length; g++)
                                    window[f.MediaKeys].isTypeSupported(n, h[g].contentType) && o.push(h[g])
                            }
                            if (p && 0 !== p.length) {
                                s = [];
                                for (var m = 0; m < p.length; m++)
                                    window[f.MediaKeys].isTypeSupported(n, p[m].contentType) && s.push(p[m])
                            }
                            if (!(!o && !s || o && 0 === o.length || s && 0 === s.length)) {
                                t = !0;
                                var y = new l.default(o,s)
                                  , _ = E.getKeySystemBySystemString(n);
                                a.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE, {
                                    data: new u.default(_,y)
                                });
                                break
                            }
                        }
                    t || a.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE, {
                        error: "Key system access denied! -- No valid audio/video content configurations detected!"
                    })
                },
                getKeySystem: function() {
                    return m
                },
                selectKeySystem: function(e) {
                    try {
                        y = e.mediaKeys = new window[f.MediaKeys](e.keySystem.systemString),
                        m = e.keySystem,
                        _ = e,
                        g && S(),
                        a.trigger(d.INTERNAL_KEY_SYSTEM_SELECTED)
                    } catch (e) {
                        a.trigger(d.INTERNAL_KEY_SYSTEM_SELECTED, {
                            error: "Error selecting keys system (" + m.systemString + ")! Could not create MediaKeys -- TODO"
                        })
                    }
                },
                setMediaElement: function(e) {
                    g !== e && (g && g.removeEventListener(f.needkey, b),
                    (g = e) && (g.addEventListener(f.needkey, b),
                    y && S()))
                },
                createKeySession: function(e, t, r, n) {
                    if (!m || !y || !_)
                        throw new Error("Can not create sessions until you have selected a key system");
                    var l = null;
                    if (_.ksConfiguration.videoCapabilities && _.ksConfiguration.videoCapabilities.length > 0 && (l = _.ksConfiguration.videoCapabilities[0]),
                    null === l && _.ksConfiguration.audioCapabilities && _.ksConfiguration.audioCapabilities.length > 0 && (l = _.ksConfiguration.audioCapabilities[0]),
                    null === l)
                        throw new Error("Can not create sessions for unknown content types.");
                    var u = l.contentType
                      , c = y.createSession(u, new Uint8Array(e), n ? new Uint8Array(n) : null)
                      , h = function(e, t) {
                        return {
                            session: e,
                            initData: t,
                            getSessionID: function() {
                                return this.session.sessionId
                            },
                            getExpirationTime: function() {
                                return NaN
                            },
                            getSessionType: function() {
                                return "temporary"
                            },
                            handleEvent: function(e) {
                                switch (e.type) {
                                case f.error:
                                    a.trigger(d.KEY_ERROR, {
                                        data: new i.default(o.default.MEDIA_KEYERR_CODE,"KeyError",this)
                                    });
                                    break;
                                case f.message:
                                    var t = ArrayBuffer.isView(e.message) ? e.message.buffer : e.message;
                                    a.trigger(d.INTERNAL_KEY_MESSAGE, {
                                        data: new s.default(this,t,e.destinationURL)
                                    });
                                    break;
                                case f.ready:
                                    p.debug("DRM: Key added."),
                                    a.trigger(d.KEY_ADDED);
                                    break;
                                case f.close:
                                    p.debug("DRM: Session closed.  SessionID = " + this.getSessionID()),
                                    a.trigger(d.KEY_SESSION_CLOSED, {
                                        data: this.getSessionID()
                                    })
                                }
                            }
                        }
                    }(c, e);
                    c.addEventListener(f.error, h),
                    c.addEventListener(f.message, h),
                    c.addEventListener(f.ready, h),
                    c.addEventListener(f.close, h),
                    v.push(h),
                    p.debug("DRM: Session created.  SessionID = " + h.getSessionID()),
                    a.trigger(d.KEY_SESSION_CREATED, {
                        data: h
                    })
                },
                updateKeySession: function(e, t) {
                    var a = e.session;
                    E.isClearKey(m) ? a.update(new Uint8Array(t.toJWK())) : a.update(new Uint8Array(t))
                },
                closeKeySession: T,
                setServerCertificate: function() {},
                loadKeySession: function() {},
                removeKeySession: function() {},
                stop: k,
                reset: k
            },
            p = c.getLogger(h),
            g = null,
            m = null,
            y = null,
            _ = null,
            v = [],
            E = (0,
            r.default)(t).getInstance(),
            b = {
                handleEvent: function(e) {
                    switch (e.type) {
                    case f.needkey:
                        if (e.initData) {
                            var t = ArrayBuffer.isView(e.initData) ? e.initData.buffer : e.initData;
                            a.trigger(d.NEED_KEY, {
                                key: new n.default(t,"cenc")
                            })
                        }
                    }
                }
            },
            h
        }
        c.__dashjs_factory_name = "ProtectionModel_3Feb2014",
        t.default = dashjs.FactoryMaker.getClassFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = d(a(114))
          , n = d(a(175))
          , i = d(a(12))
          , o = d(a(176))
          , s = d(a(172))
          , l = d(a(177))
          , u = d(a(90));
        function d(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function c(e) {
            e = e || {};
            var t = this.context
              , a = e.eventBus
              , d = e.events
              , c = e.debug
              , f = e.api
              , h = e.errHandler
              , p = void 0
              , g = void 0
              , m = void 0
              , y = void 0
              , _ = void 0
              , v = void 0
              , b = void 0
              , E = void 0
              , k = void 0;
            function T() {
                m && C();
                for (var e = 0; e < b.length; e++)
                    S(b[e]);
                a.trigger(d.TEARDOWN_COMPLETE)
            }
            function S(e) {
                try {
                    m[f.cancelKeyRequest](y.systemString, e.sessionID)
                } catch (t) {
                    a.trigger(d.KEY_SESSION_CLOSED, {
                        data: null,
                        error: "Error closing session (" + e.sessionID + ") " + t.message
                    })
                }
            }
            function A(e, t) {
                if (t && e) {
                    for (var a = e.length, r = 0; r < a; r++)
                        if (e[r].sessionID == t)
                            return e[r];
                    return null
                }
                return null
            }
            function C() {
                m.removeEventListener(f.keyerror, k),
                m.removeEventListener(f.needkey, k),
                m.removeEventListener(f.keymessage, k),
                m.removeEventListener(f.keyadded, k)
            }
            return p = {
                getAllInitData: function() {
                    for (var e = [], t = 0; t < v.length; t++)
                        e.push(v[t].initData);
                    for (var a = 0; a < b.length; a++)
                        e.push(b[a].initData);
                    return e
                },
                requestKeySystemAccess: function(e) {
                    var t = m;
                    t || (t = document.createElement("video"));
                    for (var r = !1, n = 0; n < e.length; n++)
                        for (var i = e[n].ks.systemString, o = e[n].configs, u = null, c = 0; c < o.length; c++) {
                            var f = o[c].videoCapabilities;
                            if (f && 0 !== f.length) {
                                u = [];
                                for (var h = 0; h < f.length; h++)
                                    "" !== t.canPlayType(f[h].contentType, i) && u.push(f[h])
                            }
                            if (u && (!u || 0 !== u.length)) {
                                r = !0;
                                var p = new s.default(null,u)
                                  , g = _.getKeySystemBySystemString(i);
                                a.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE, {
                                    data: new l.default(g,p)
                                });
                                break
                            }
                        }
                    r || a.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE, {
                        error: "Key system access denied! -- No valid audio/video content configurations detected!"
                    })
                },
                getKeySystem: function() {
                    return y
                },
                selectKeySystem: function(e) {
                    y = e.keySystem,
                    a.trigger(d.INTERNAL_KEY_SYSTEM_SELECTED)
                },
                setMediaElement: function(e) {
                    if (m !== e) {
                        if (m) {
                            C();
                            for (var t = 0; t < b.length; t++)
                                S(b[t]);
                            b = []
                        }
                        (m = e) && (m.addEventListener(f.keyerror, k),
                        m.addEventListener(f.needkey, k),
                        m.addEventListener(f.keymessage, k),
                        m.addEventListener(f.keyadded, k),
                        a.trigger(d.VIDEO_ELEMENT_SELECTED))
                    }
                },
                createKeySession: function(e) {
                    if (!y)
                        throw new Error("Can not create sessions until you have selected a key system");
                    if (E || 0 === b.length) {
                        var t = {
                            sessionID: null,
                            initData: e,
                            getSessionID: function() {
                                return this.sessionID
                            },
                            getExpirationTime: function() {
                                return NaN
                            },
                            getSessionType: function() {
                                return "temporary"
                            }
                        };
                        return v.push(t),
                        m[f.generateKeyRequest](y.systemString, new Uint8Array(e)),
                        t
                    }
                    throw new Error("Multiple sessions not allowed!")
                },
                updateKeySession: function(e, t) {
                    var a = e.sessionID;
                    if (_.isClearKey(y))
                        for (var r = 0; r < t.keyPairs.length; r++)
                            m[f.addKey](y.systemString, t.keyPairs[r].key, t.keyPairs[r].keyID, a);
                    else
                        m[f.addKey](y.systemString, new Uint8Array(t), new Uint8Array(e.initData), a)
                },
                closeKeySession: S,
                setServerCertificate: function() {},
                loadKeySession: function() {},
                removeKeySession: function() {},
                stop: T,
                reset: T
            },
            g = c.getLogger(p),
            m = null,
            y = null,
            v = [],
            b = [],
            _ = (0,
            r.default)(t).getInstance(),
            k = {
                handleEvent: function(e) {
                    var t = null;
                    switch (e.type) {
                    case f.needkey:
                        var r = ArrayBuffer.isView(e.initData) ? e.initData.buffer : e.initData;
                        a.trigger(d.NEED_KEY, {
                            key: new n.default(r,"cenc")
                        });
                        break;
                    case f.keyerror:
                        if ((t = A(b, e.sessionId)) || (t = A(v, e.sessionId)),
                        t) {
                            var s = u.default.MEDIA_KEYERR_CODE
                              , l = "";
                            switch (e.errorCode.code) {
                            case 1:
                                s = u.default.MEDIA_KEYERR_UNKNOWN_CODE,
                                l += "MEDIA_KEYERR_UNKNOWN - " + u.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;
                                break;
                            case 2:
                                s = u.default.MEDIA_KEYERR_CLIENT_CODE,
                                l += "MEDIA_KEYERR_CLIENT - " + u.default.MEDIA_KEYERR_CLIENT_MESSAGE;
                                break;
                            case 3:
                                s = u.default.MEDIA_KEYERR_SERVICE_CODE,
                                l += "MEDIA_KEYERR_SERVICE - " + u.default.MEDIA_KEYERR_SERVICE_MESSAGE;
                                break;
                            case 4:
                                s = u.default.MEDIA_KEYERR_OUTPUT_CODE,
                                l += "MEDIA_KEYERR_OUTPUT - " + u.default.MEDIA_KEYERR_OUTPUT_MESSAGE;
                                break;
                            case 5:
                                s = u.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,
                                l += "MEDIA_KEYERR_HARDWARECHANGE - " + u.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;
                                break;
                            case 6:
                                s = u.default.MEDIA_KEYERR_DOMAIN_CODE,
                                l += "MEDIA_KEYERR_DOMAIN - " + u.default.MEDIA_KEYERR_DOMAIN_MESSAGE
                            }
                            l += "  System Code = " + e.systemCode,
                            a.trigger(d.KEY_ERROR, {
                                data: new i.default(s,l,t)
                            })
                        } else
                            g.error("No session token found for key error");
                        break;
                    case f.keyadded:
                        (t = A(b, e.sessionId)) || (t = A(v, e.sessionId)),
                        t ? (g.debug("DRM: Key added."),
                        a.trigger(d.KEY_ADDED, {
                            data: t
                        })) : g.debug("No session token found for key added");
                        break;
                    case f.keymessage:
                        if ((E = null !== e.sessionId && void 0 !== e.sessionId) ? !(t = A(b, e.sessionId)) && v.length > 0 && (t = v.shift(),
                        b.push(t),
                        t.sessionID = e.sessionId,
                        a.trigger(d.KEY_SESSION_CREATED, {
                            data: t
                        })) : v.length > 0 && (t = v.shift(),
                        b.push(t),
                        0 !== v.length && h.error(new i.default(u.default.MEDIA_KEY_MESSAGE_ERROR_CODE,u.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),
                        t) {
                            var c = ArrayBuffer.isView(e.message) ? e.message.buffer : e.message;
                            t.keyMessage = c,
                            a.trigger(d.INTERNAL_KEY_MESSAGE, {
                                data: new o.default(t,c,e.defaultURL)
                            })
                        } else
                            g.warn("No session token found for key message")
                    }
                }
            },
            p
        }
        c.__dashjs_factory_name = "ProtectionModel_01b",
        t.default = dashjs.FactoryMaker.getClassFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(207), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        var o = function() {
            var e = void 0;
            function t(t, a, r) {
                if (!t || !/^VIDEO$/i.test(t.nodeName))
                    return null;
                if (t._dashjs_player)
                    return t._dashjs_player;
                var n = void 0
                  , o = t.id || t.name || "video element";
                if (!(a = a || [].slice.call(t.querySelectorAll("source")).filter((function(e) {
                    return "application/dash+xml" == e.type
                }
                ))[0]) && t.src)
                    (a = document.createElement("source")).src = t.src;
                else if (!a && !t.src)
                    return null;
                return r = r || {},
                (n = (0,
                i.default)(r).create()).initialize(t, a.src, t.autoplay),
                e || (e = n.getDebug().getLogger()),
                e.debug("Converted " + o + " to dash.js player and added content: " + a.src),
                t._dashjs_player = n,
                n
            }
            function a(e) {
                return /^VIDEO$/i.test(e.nodeName) ? e : a(e.parentNode)
            }
            return {
                create: t,
                createAll: function(e, r) {
                    var n = [];
                    e = e || "[data-dashjs-player]";
                    for (var i = (r = r || document).querySelectorAll(e), o = 0; o < i.length; o++) {
                        var s = t(i[o], null);
                        n.push(s)
                    }
                    for (var l = r.querySelectorAll('source[type="application/dash+xml"]'), u = 0; u < l.length; u++) {
                        var d = t(a(l[u]), null);
                        n.push(d)
                    }
                    return n
                }
            }
        }()
          , s = void 0;
        !("undefined" != typeof window && window && window.dashjs && window.dashjs.skipAutoCreate) && "undefined" != typeof window && window && window.addEventListener && ("complete" === window.document.readyState ? window.dashjs ? o.createAll() : s = window.setInterval((function() {
            window.dashjs && (window.clearInterval(s),
            o.createAll())
        }
        ), 500) : window.addEventListener("load", (function e() {
            window.removeEventListener("load", e),
            o.createAll()
        }
        ))),
        t.default = o
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        t.MssHandler = void 0;
        var r, n = a(414), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        var o = "undefined" != typeof window && window || global
          , s = o.dashjs;
        s || (s = o.dashjs = {}),
        s.MssHandler = i.default,
        t.default = s,
        t.MssHandler = i.default
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = c(a(217))
          , n = c(a(43))
          , i = c(a(415))
          , o = c(a(416))
          , s = c(a(419))
          , l = c(a(178))
          , u = c(a(12))
          , d = c(a(109));
        function c(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function f(e) {
            e = e || {};
            var t = this.context
              , a = e.eventBus
              , l = e.events
              , c = e.constants
              , f = e.initSegmentType
              , h = e.dashMetrics
              , p = e.playbackController
              , g = e.streamController
              , m = e.protectionController
              , y = (0,
            o.default)(t).create({
                dashMetrics: h,
                playbackController: p,
                protectionController: m,
                streamController: g,
                eventBus: a,
                constants: c,
                ISOBoxer: e.ISOBoxer,
                debug: e.debug,
                errHandler: e.errHandler
            })
              , _ = void 0
              , v = void 0
              , b = void 0;
            function E(e) {
                return g.getActiveStreamProcessors().filter((function(t) {
                    return t.getType() === e
                }
                ))[0]
            }
            function k(e) {
                return v.filter((function(t) {
                    return t.getType() === e
                }
                ))[0]
            }
            function T() {
                g.getActiveStreamProcessors().forEach((function(a) {
                    if (a.getType() === c.VIDEO || a.getType() === c.AUDIO || a.getType() === c.FRAGMENTED_TEXT) {
                        var r = k(a.getType());
                        r || ((r = (0,
                        i.default)(t).create({
                            streamProcessor: a,
                            baseURLController: e.baseURLController,
                            debug: e.debug
                        })).initialize(),
                        v.push(r)),
                        r.start()
                    }
                }
                ))
            }
            function S(t) {
                var i = E(t.sender.getType());
                if (i) {
                    var o = i.getRepresentationController().getCurrentRepresentation()
                      , s = i.getMediaInfo()
                      , d = new n.default;
                    d.mediaType = o.adaptation.type,
                    d.type = f,
                    d.range = o.range,
                    d.quality = o.index,
                    d.mediaInfo = s,
                    d.representationId = o.id;
                    var c = function(e, t, a) {
                        var n = new r.default;
                        return n.streamId = t,
                        n.mediaInfo = e.mediaInfo,
                        n.segmentType = e.type,
                        n.start = e.startTime,
                        n.duration = e.duration,
                        n.end = n.start + n.duration,
                        n.index = e.index,
                        n.quality = e.quality,
                        n.representationId = e.representationId,
                        n.endFragment = a,
                        n
                    }(d, s.streamInfo.id, t.type !== l.FRAGMENT_LOADING_PROGRESS);
                    try {
                        c.bytes = y.generateMoov(o),
                        a.trigger(l.INIT_FRAGMENT_LOADED, {
                            chunk: c
                        })
                    } catch (t) {
                        e.errHandler.error(new u.default(t.code,t.message,t.data))
                    }
                    t.sender = null
                }
            }
            function A(e) {
                if (!e.error) {
                    var t = E(e.request.mediaType);
                    if (t) {
                        if (y.processFragment(e, t),
                        "FragmentInfoSegment" === e.request.type) {
                            var a = k(e.request.mediaType);
                            a && a.fragmentInfoLoaded(e)
                        }
                        var r = e.request.mediaInfo.streamInfo.manifestInfo;
                        r.isDynamic || r.DVRWindowSize === 1 / 0 || T()
                    }
                }
            }
            function C() {
                p.getIsDynamic() && 0 !== p.getTime() && T()
            }
            function I() {
                p.getIsDynamic() && 0 !== p.getTime() && T()
            }
            function P(e) {
                e && e.data && (e.data = e.data.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi, "http://www.w3.org/ns/ttml"))
            }
            return b = {
                reset: function() {
                    _ && (_.reset(),
                    _ = void 0),
                    a.off(l.INIT_FRAGMENT_NEEDED, S, this),
                    a.off(l.PLAYBACK_PAUSED, C, this),
                    a.off(l.PLAYBACK_SEEK_ASKED, I, this),
                    a.off(l.FRAGMENT_LOADING_COMPLETED, A, this),
                    a.off(l.TTML_TO_PARSE, P, this),
                    v.forEach((function(e) {
                        e.reset()
                    }
                    )),
                    v = []
                },
                createMssParser: function() {
                    return _ = (0,
                    s.default)(t).create(e)
                },
                registerEvents: function() {
                    a.on(l.INIT_FRAGMENT_NEEDED, S, b, dashjs.FactoryMaker.getSingletonFactoryByName(a.getClassName()).EVENT_PRIORITY_HIGH),
                    a.on(l.PLAYBACK_PAUSED, C, b, dashjs.FactoryMaker.getSingletonFactoryByName(a.getClassName()).EVENT_PRIORITY_HIGH),
                    a.on(l.PLAYBACK_SEEK_ASKED, I, b, dashjs.FactoryMaker.getSingletonFactoryByName(a.getClassName()).EVENT_PRIORITY_HIGH),
                    a.on(l.FRAGMENT_LOADING_COMPLETED, A, b, dashjs.FactoryMaker.getSingletonFactoryByName(a.getClassName()).EVENT_PRIORITY_HIGH),
                    a.on(l.TTML_TO_PARSE, P, b)
                }
            },
            v = [],
            (0,
            d.default)(t).getInstance(),
            b
        }
        f.__dashjs_factory_name = "MssHandler";
        var h = dashjs.FactoryMaker.getClassFactory(f);
        h.errors = l.default,
        dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name, h),
        t.default = h
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(43), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = void 0
              , a = void 0
              , r = void 0
              , n = void 0
              , o = void 0
              , s = void 0
              , l = void 0
              , u = void 0
              , d = void 0
              , c = (e = e || {}).streamProcessor
              , f = e.baseURLController
              , h = e.debug;
            function p() {
                n && (a.debug("Stop"),
                clearTimeout(s),
                n = !1,
                l = null,
                u = null)
            }
            function g() {
                if (n) {
                    var e = c.getRepresentationController().getCurrentRepresentation()
                      , t = e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index]
                      , a = t.SegmentTemplate.SegmentTimeline.S_asArray
                      , r = function(e, t, a) {
                        var r = e.SegmentTemplate.timescale
                          , n = new i.default;
                        return n.mediaType = o,
                        n.type = "FragmentInfoSegment",
                        n.startTime = a.t / r,
                        n.duration = a.d / r,
                        n.timescale = r,
                        n.quality = t.index,
                        n.index = d++,
                        n.mediaInfo = c.getMediaInfo(),
                        n.adaptationIndex = t.adaptation.index,
                        n.representationId = t.id,
                        n.url = f.resolve(t.path).url + e.SegmentTemplate.media,
                        n.url = n.url.replace("$Bandwidth$", t.bandwidth),
                        n.url = n.url.replace("$Time$", a.tManifest ? a.tManifest : a.t),
                        n.url = n.url.replace("/Fragments(", "/FragmentInfo("),
                        n
                    }(t, e, a[a.length - 1]);
                    m.call(this, r)
                }
            }
            function m(e) {
                if (c.getFragmentModel().isFragmentLoadedOrPending(e))
                    return a.debug("End of timeline"),
                    void p();
                r.executeRequest(e)
            }
            return t = {
                initialize: function() {
                    o = c.getType(),
                    r = c.getFragmentModel(),
                    n = !1,
                    l = null,
                    u = null
                },
                controllerType: "MssFragmentInfoController",
                start: function() {
                    n || (a.debug("Start"),
                    n = !0,
                    l = (new Date).getTime(),
                    d = 0,
                    g())
                },
                fragmentInfoLoaded: function(e) {
                    if (n) {
                        var t = e.request;
                        if (e.response) {
                            var r, i, o;
                            u || (u = t.startTime),
                            i = ((new Date).getTime() - l) / 1e3,
                            r = t.startTime + t.duration - u,
                            o = Math.max(0, r - i),
                            clearTimeout(s),
                            s = setTimeout((function() {
                                s = null,
                                g()
                            }
                            ), 1e3 * o)
                        } else
                            a.error("Load error", t.url)
                    }
                },
                getType: function() {
                    return o
                },
                reset: function() {
                    p()
                }
            },
            a = h.getLogger(t),
            t
        }
        o.__dashjs_factory_name = "MssFragmentInfoController",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = i(a(417))
          , n = i(a(418));
        function i(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function o(e, t) {
            return e.length === t.length && e.every((function(e, a) {
                return e === t[a]
            }
            ))
        }
        function s() {
            this._procFullBox(),
            1 & this.flags && (this._procField("aux_info_type", "uint", 32),
            this._procField("aux_info_type_parameter", "uint", 32)),
            this._procField("entry_count", "uint", 32),
            this._procFieldArray("offset", this.entry_count, "uint", 1 === this.version ? 64 : 32)
        }
        function l() {
            this._procFullBox(),
            1 & this.flags && (this._procField("aux_info_type", "uint", 32),
            this._procField("aux_info_type_parameter", "uint", 32)),
            this._procField("default_sample_info_size", "uint", 8),
            this._procField("sample_count", "uint", 32),
            0 === this.default_sample_info_size && this._procFieldArray("sample_info_size", this.sample_count, "uint", 8)
        }
        function u() {
            this._procFullBox(),
            this._procField("sample_count", "uint", 32),
            1 & this.flags && this._procField("IV_size", "uint", 8),
            this._procEntries("entry", this.sample_count, (function(e) {
                this._procEntryField(e, "InitializationVector", "data", 8),
                2 & this.flags && (this._procEntryField(e, "NumberOfEntries", "uint", 16),
                this._procSubEntries(e, "clearAndCryptedData", e.NumberOfEntries, (function(e) {
                    this._procEntryField(e, "BytesOfClearData", "uint", 16),
                    this._procEntryField(e, "BytesOfEncryptedData", "uint", 32)
                }
                )))
            }
            ))
        }
        function d() {
            o(this.usertype, [109, 29, 155, 5, 66, 213, 68, 230, 128, 226, 20, 29, 175, 247, 87, 178]) && (this._procFullBox(),
            this._parsing && (this.type = "tfxd"),
            this._procField("fragment_absolute_time", "uint", 1 === this.version ? 64 : 32),
            this._procField("fragment_duration", "uint", 1 === this.version ? 64 : 32)),
            o(this.usertype, [212, 128, 126, 242, 202, 57, 70, 149, 142, 84, 38, 203, 158, 70, 167, 159]) && (this._procFullBox(),
            this._parsing && (this.type = "tfrf"),
            this._procField("fragment_count", "uint", 8),
            this._procEntries("entry", this.fragment_count, (function(e) {
                this._procEntryField(e, "fragment_absolute_time", "uint", 1 === this.version ? 64 : 32),
                this._procEntryField(e, "fragment_duration", "uint", 1 === this.version ? 64 : 32)
            }
            ))),
            o(this.usertype, [162, 57, 79, 82, 90, 155, 79, 20, 162, 68, 108, 66, 124, 100, 141, 244]) && (this._parsing && (this.type = "sepiff"),
            u.call(this))
        }
        function c(e) {
            e = e || {};
            var t, a = this.context, i = e.dashMetrics, o = e.playbackController, c = e.eventBus, f = e.protectionController, h = e.ISOBoxer, p = e.debug, g = void 0, m = void 0;
            return t = {
                generateMoov: function(e) {
                    return g.generateMoov(e)
                },
                processFragment: function(e, t) {
                    if (!e || !e.request || !e.response)
                        throw new Error("e parameter is missing or malformed");
                    "MediaSegment" === e.request.type ? m.convertFragment(e, t) : "FragmentInfoSegment" === e.request.type && (m.updateSegmentList(e, t),
                    e.sender = null)
                }
            },
            h.addBoxProcessor("uuid", d),
            h.addBoxProcessor("saio", s),
            h.addBoxProcessor("saiz", l),
            h.addBoxProcessor("senc", u),
            g = (0,
            n.default)(a).create({
                protectionController: f,
                constants: e.constants,
                ISOBoxer: h
            }),
            m = (0,
            r.default)(a).create({
                dashMetrics: i,
                playbackController: o,
                ISOBoxer: h,
                eventBus: c,
                debug: p,
                errHandler: e.errHandler
            }),
            t
        }
        c.__dashjs_factory_name = "MssFragmentProcessor",
        t.default = dashjs.FactoryMaker.getClassFactory(c)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r = o(a(12))
          , n = o(a(178))
          , i = o(a(110));
        function o(e) {
            return e && e.__esModule ? e : {
                default: e
            }
        }
        function s(e) {
            var t = void 0
              , a = void 0
              , o = void 0
              , s = (e = e || {}).dashMetrics
              , l = e.playbackController
              , u = e.errHandler
              , d = e.eventBus
              , c = e.ISOBoxer
              , f = e.debug;
            function h(e, t, o, s) {
                var l = s.getRepresentationController()
                  , c = l.getCurrentRepresentation()
                  , f = c.adaptation.period.mpd.manifest
                  , h = f.Period_asArray[c.adaptation.period.index].AdaptationSet_asArray[c.adaptation.index]
                  , g = h.SegmentTemplate.timescale;
                if (a = s.getType(),
                "dynamic" === f.type || f.timeShiftBufferDepth)
                    if (t) {
                        var m, y = h.SegmentTemplate.SegmentTimeline.S, _ = t.entry, v = void 0, b = void 0, E = null, k = 0, T = null;
                        if (0 !== _.length && (m = _[0],
                        !("static" === f.type && (v = y[0].tManifest ? parseFloat(y[0].tManifest) : y[0].t,
                        m.fragment_absolute_time > v + f.timeShiftBufferDepth * g)))) {
                            if (v = y[y.length - 1].tManifest ? parseFloat(y[y.length - 1].tManifest) : y[y.length - 1].t,
                            m.fragment_absolute_time <= v)
                                return b = {
                                    start: y[0].t / g,
                                    end: o.baseMediaDecodeTime / g + e.duration
                                },
                                void p(e.mediaType, b, s.getStreamInfo().manifestInfo);
                            if ((E = {}).t = m.fragment_absolute_time,
                            E.d = m.fragment_duration,
                            y[0].tManifest && (E.t -= parseFloat(y[0].tManifest) - y[0].t,
                            E.tManifest = m.fragment_absolute_time),
                            y.push(E),
                            "static" !== f.type) {
                                if (f.timeShiftBufferDepth && f.timeShiftBufferDepth > 0) {
                                    for (k = (E = y[y.length - 1]).t,
                                    T = Math.round((k - f.timeShiftBufferDepth * g) / g),
                                    E = y[0]; Math.round(E.t / g) < T; )
                                        y.splice(0, 1),
                                        E = y[0];
                                    b = {
                                        start: y[0].t / g,
                                        end: o.baseMediaDecodeTime / g + e.duration
                                    },
                                    p(a, b, s.getStreamInfo().manifestInfo)
                                }
                                l.updateRepresentation(c, !0)
                            } else if ("video" === a) {
                                var S = ((E = y[y.length - 1]).t + E.d) / g;
                                S > c.adaptation.period.duration && d.trigger(i.default.MANIFEST_VALIDITY_CHANGED, {
                                    sender: this,
                                    newDuration: S
                                })
                            }
                        }
                    } else
                        u.error(new r.default(n.default.MSS_NO_TFRF_CODE,n.default.MSS_NO_TFRF_MESSAGE))
            }
            function p(e, t, a) {
                var r = s.getCurrentDVRInfo(e);
                (!r || t.end > r.range.end) && (o.debug("Update DVR range: [" + t.start + " - " + t.end + "]"),
                s.addDVRInfo(e, l.getTime(), a, t))
            }
            function g(e, t) {
                var a = 8
                  , r = 0;
                for (r = 0; r < e.boxes.length; r++) {
                    if (e.boxes[r].type === t)
                        return a;
                    a += e.boxes[r].size
                }
                return a
            }
            return t = {
                convertFragment: function(e, t) {
                    var a = void 0
                      , r = c.parseBuffer(e.response)
                      , n = r.fetch("tfhd");
                    n.track_ID = e.request.mediaInfo.index + 1;
                    var i = r.fetch("tfdt")
                      , o = r.fetch("traf");
                    null === i && ((i = c.createFullBox("tfdt", o, n)).version = 1,
                    i.flags = 0,
                    i.baseMediaDecodeTime = Math.floor(e.request.startTime * e.request.timescale));
                    var s = r.fetch("trun")
                      , l = r.fetch("tfxd");
                    l && (l._parent.boxes.splice(l._parent.boxes.indexOf(l), 1),
                    l = null);
                    var u = r.fetch("tfrf");
                    h(e.request, u, i, t),
                    u && (u._parent.boxes.splice(u._parent.boxes.indexOf(u), 1),
                    u = null);
                    var d = r.fetch("sepiff");
                    if (null !== d) {
                        d.type = "senc",
                        d.usertype = void 0;
                        var f = r.fetch("saio");
                        if (null === f) {
                            (f = c.createFullBox("saio", o)).version = 0,
                            f.flags = 0,
                            f.entry_count = 1,
                            f.offset = [0];
                            var p = c.createFullBox("saiz", o);
                            if (p.version = 0,
                            p.flags = 0,
                            p.sample_count = d.sample_count,
                            p.default_sample_info_size = 0,
                            p.sample_info_size = [],
                            2 & d.flags)
                                for (a = 0; a < d.sample_count; a += 1)
                                    p.sample_info_size[a] = 10 + 6 * d.entry[a].NumberOfEntries;
                            else
                                p.default_sample_info_size = 8
                        }
                    }
                    n.flags &= 16777214,
                    n.flags |= 131072,
                    s.flags |= 1;
                    var m = r.fetch("moof")
                      , y = m.getLength();
                    s.data_offset = y + 8;
                    var _ = r.fetch("saio");
                    if (null !== _) {
                        var v = g(m, "traf")
                          , b = g(o, "senc");
                        _.offset[0] = v + b + 16
                    }
                    e.response = r.write()
                },
                updateSegmentList: function(e, t) {
                    if (!e.response)
                        throw new Error("e.response parameter is missing");
                    var a = c.parseBuffer(e.response)
                      , r = a.fetch("tfhd");
                    r.track_ID = e.request.mediaInfo.index + 1;
                    var n = a.fetch("tfdt")
                      , i = a.fetch("traf");
                    null === n && ((n = c.createFullBox("tfdt", i, r)).version = 1,
                    n.flags = 0,
                    n.baseMediaDecodeTime = Math.floor(e.request.startTime * e.request.timescale));
                    var o = a.fetch("tfrf");
                    h(e.request, o, n, t),
                    o && (o._parent.boxes.splice(o._parent.boxes.indexOf(o), 1),
                    o = null)
                },
                getType: function() {
                    return a
                }
            },
            o = f.getLogger(t),
            a = "",
            t
        }
        s.__dashjs_factory_name = "MssFragmentMoofProcessor",
        t.default = dashjs.FactoryMaker.getClassFactory(s)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(178), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = (e = e || {}).constants
              , a = e.ISOBoxer
              , r = e.protectionController
              , n = void 0
              , o = void 0
              , s = void 0
              , l = void 0
              , u = void 0
              , d = void 0;
            function c(e) {
                var c = a.createBox("moov", e);
                !function(e) {
                    var t = a.createFullBox("mvhd", e);
                    t.version = 1,
                    t.creation_time = 0,
                    t.modification_time = 0,
                    t.timescale = u,
                    t.duration = n.duration === 1 / 0 ? 0x10000000000000000 : Math.round(n.duration * u),
                    t.rate = 1,
                    t.volume = 1,
                    t.reserved1 = 0,
                    t.reserved2 = [0, 0],
                    t.matrix = [1, 0, 0, 0, 1, 0, 0, 0, 16384],
                    t.pre_defined = [0, 0, 0, 0, 0, 0],
                    t.next_track_ID = d + 1
                }(c);
                var m = a.createBox("trak", c);
                !function(e) {
                    var t = a.createFullBox("tkhd", e);
                    t.version = 1,
                    t.flags = 7,
                    t.creation_time = 0,
                    t.modification_time = 0,
                    t.track_ID = d,
                    t.reserved1 = 0,
                    t.duration = n.duration === 1 / 0 ? 0x10000000000000000 : Math.round(n.duration * u),
                    t.reserved2 = [0, 0],
                    t.layer = 0,
                    t.alternate_group = 0,
                    t.volume = 1,
                    t.reserved3 = 0,
                    t.matrix = [1, 0, 0, 0, 1, 0, 0, 0, 16384],
                    t.width = s.width,
                    t.height = s.height
                }(m);
                var y = a.createBox("mdia", m);
                !function(e) {
                    var t = a.createFullBox("mdhd", e);
                    t.version = 1,
                    t.creation_time = 0,
                    t.modification_time = 0,
                    t.timescale = u,
                    t.duration = n.duration === 1 / 0 ? 0x10000000000000000 : Math.round(n.duration * u),
                    t.language = o.lang || "und",
                    t.pre_defined = 0
                }(y),
                function(e) {
                    var r = a.createFullBox("hdlr", e);
                    switch (r.pre_defined = 0,
                    o.type) {
                    case t.VIDEO:
                        r.handler_type = "vide";
                        break;
                    case t.AUDIO:
                        r.handler_type = "soun";
                        break;
                    default:
                        r.handler_type = "meta"
                    }
                    r.name = s.id,
                    r.reserved = [0, 0, 0]
                }(y);
                var _ = a.createBox("minf", y);
                switch (o.type) {
                case t.VIDEO:
                    !function(e) {
                        var t = a.createFullBox("vmhd", e);
                        t.flags = 1,
                        t.graphicsmode = 0,
                        t.opcolor = [0, 0, 0]
                    }(_);
                    break;
                case t.AUDIO:
                    !function(e) {
                        var t = a.createFullBox("smhd", e);
                        t.flags = 1,
                        t.balance = 0,
                        t.reserved = 0
                    }(_)
                }
                !function(e) {
                    var t = a.createFullBox("dref", e);
                    t.entry_count = 1,
                    t.entries = [];
                    var r = a.createFullBox("url ", t, !1);
                    r.location = "",
                    r.flags = 1,
                    t.entries.push(r)
                }(a.createBox("dinf", _));
                var v = a.createBox("stbl", _);
                (a.createFullBox("stts", v)._data = [0, 0, 0, 0, 0, 0, 0, 0],
                a.createFullBox("stsc", v)._data = [0, 0, 0, 0, 0, 0, 0, 0],
                a.createFullBox("stco", v)._data = [0, 0, 0, 0, 0, 0, 0, 0],
                a.createFullBox("stsz", v)._data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                function(e) {
                    var r = a.createFullBox("stsd", e);
                    switch (r.entries = [],
                    o.type) {
                    case t.VIDEO:
                    case t.AUDIO:
                        r.entries.push(function(e) {
                            var t = s.codecs.substring(0, s.codecs.indexOf("."));
                            switch (t) {
                            case "avc1":
                                return function(e, t) {
                                    var r = void 0;
                                    r = l ? a.createBox("encv", e, !1) : a.createBox("avc1", e, !1);
                                    if (r.reserved1 = [0, 0, 0, 0, 0, 0],
                                    r.data_reference_index = 1,
                                    r.pre_defined1 = 0,
                                    r.reserved2 = 0,
                                    r.pre_defined2 = [0, 0, 0],
                                    r.height = s.height,
                                    r.width = s.width,
                                    r.horizresolution = 72,
                                    r.vertresolution = 72,
                                    r.reserved3 = 0,
                                    r.frame_count = 1,
                                    r.compressorname = [10, 65, 86, 67, 32, 67, 111, 100, 105, 110, 103, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                                    r.depth = 24,
                                    r.pre_defined3 = 65535,
                                    r.config = function() {
                                        for (var e = null, t = 15, a = [], r = [], n = 0, i = 0, o = 0, l = s.codecPrivateData.split("00000001").slice(1), u = void 0, d = 0; d < l.length; d++)
                                            switch (u = g(l[d]),
                                            31 & u[0]) {
                                            case 7:
                                                a.push(u),
                                                t += u.length + 2;
                                                break;
                                            case 8:
                                                r.push(u),
                                                t += u.length + 2
                                            }
                                        a.length > 0 && (n = a[0][1],
                                        o = a[0][2],
                                        i = a[0][3]);
                                        e = new Uint8Array(t);
                                        var c = 0;
                                        e[c++] = (4278190080 & t) >> 24,
                                        e[c++] = (16711680 & t) >> 16,
                                        e[c++] = (65280 & t) >> 8,
                                        e[c++] = 255 & t,
                                        e.set([97, 118, 99, 67], c),
                                        c += 4,
                                        e[c++] = 1,
                                        e[c++] = n,
                                        e[c++] = o,
                                        e[c++] = i,
                                        e[c++] = 255,
                                        e[c++] = 224 | a.length;
                                        for (var f = 0; f < a.length; f++)
                                            e[c++] = (65280 & a[f].length) >> 8,
                                            e[c++] = 255 & a[f].length,
                                            e.set(a[f], c),
                                            c += a[f].length;
                                        e[c++] = r.length;
                                        for (var h = 0; h < r.length; h++)
                                            e[c++] = (65280 & r[h].length) >> 8,
                                            e[c++] = 255 & r[h].length,
                                            e.set(r[h], c),
                                            c += r[h].length;
                                        return e
                                    }(),
                                    l) {
                                        var n = a.createBox("sinf", r);
                                        f(n, t),
                                        h(n),
                                        p(n)
                                    }
                                    return r
                                }(e, t);
                            case "mp4a":
                                return function(e, t) {
                                    var r = void 0;
                                    r = l ? a.createBox("enca", e, !1) : a.createBox("mp4a", e, !1);
                                    if (r.reserved1 = [0, 0, 0, 0, 0, 0],
                                    r.data_reference_index = 1,
                                    r.reserved2 = [0, 0],
                                    r.channelcount = s.audioChannels,
                                    r.samplesize = 16,
                                    r.pre_defined = 0,
                                    r.reserved_3 = 0,
                                    r.samplerate = s.audioSamplingRate << 16,
                                    r.esds = function() {
                                        var e = g(s.codecPrivateData)
                                          , t = 34 + e.length
                                          , a = new Uint8Array(t)
                                          , r = 0;
                                        return a[r++] = (4278190080 & t) >> 24,
                                        a[r++] = (16711680 & t) >> 16,
                                        a[r++] = (65280 & t) >> 8,
                                        a[r++] = 255 & t,
                                        a.set([101, 115, 100, 115], r),
                                        r += 4,
                                        a.set([0, 0, 0, 0], r),
                                        r += 4,
                                        a[r++] = 3,
                                        a[r++] = 20 + e.length,
                                        a[r++] = (65280 & d) >> 8,
                                        a[r++] = 255 & d,
                                        a[r++] = 0,
                                        a[r++] = 4,
                                        a[r++] = 15 + e.length,
                                        a[r++] = 64,
                                        a[r] = 20,
                                        a[r] |= 0,
                                        a[r++] |= 1,
                                        a[r++] = 255,
                                        a[r++] = 255,
                                        a[r++] = 255,
                                        a[r++] = (4278190080 & s.bandwidth) >> 24,
                                        a[r++] = (16711680 & s.bandwidth) >> 16,
                                        a[r++] = (65280 & s.bandwidth) >> 8,
                                        a[r++] = 255 & s.bandwidth,
                                        a[r++] = (4278190080 & s.bandwidth) >> 24,
                                        a[r++] = (16711680 & s.bandwidth) >> 16,
                                        a[r++] = (65280 & s.bandwidth) >> 8,
                                        a[r++] = 255 & s.bandwidth,
                                        a[r++] = 5,
                                        a[r++] = e.length,
                                        a.set(e, r),
                                        a
                                    }(),
                                    l) {
                                        var n = a.createBox("sinf", r);
                                        f(n, t),
                                        h(n),
                                        p(n)
                                    }
                                    return r
                                }(e, t);
                            default:
                                throw {
                                    code: i.default.MSS_UNSUPPORTED_CODEC_CODE,
                                    message: i.default.MSS_UNSUPPORTED_CODEC_MESSAGE,
                                    data: {
                                        codec: t
                                    }
                                }
                            }
                        }(r))
                    }
                    r.entry_count = r.entries.length
                }(v),
                function(e) {
                    var t = a.createFullBox("trex", e);
                    t.track_ID = d,
                    t.default_sample_description_index = 1,
                    t.default_sample_duration = 0,
                    t.default_sample_size = 0,
                    t.default_sample_flags = 0
                }(a.createBox("mvex", c)),
                l && r) && function(e, t) {
                    var r = void 0
                      , n = void 0
                      , i = void 0
                      , o = void 0;
                    for (i = 0; i < t.length; i += 1)
                        (r = t[i].initData) && (o = a.parseBuffer(r),
                        (n = o.fetch("pssh")) && a.Utils.appendBox(e, n))
                }(c, r.getSupportedKeySystemsFromContentProtection(l))
            }
            function f(e, t) {
                a.createBox("frma", e).data_format = function(e) {
                    var t = 0
                      , a = void 0;
                    for (a = 0; a < e.length; a += 1)
                        t |= e.charCodeAt(a) << 8 * (e.length - a - 1);
                    return t
                }(t)
            }
            function h(e) {
                var t = a.createFullBox("schm", e);
                t.flags = 0,
                t.version = 0,
                t.scheme_type = 1667591779,
                t.scheme_version = 65536
            }
            function p(e) {
                !function(e) {
                    var t = a.createFullBox("tenc", e);
                    t.flags = 0,
                    t.version = 0,
                    t.default_IsEncrypted = 1,
                    t.default_IV_size = 8,
                    t.default_KID = l && l.length > 0 && l[0]["cenc:default_KID"] ? l[0]["cenc:default_KID"] : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                }(a.createBox("schi", e))
            }
            function g(e) {
                var t = new Uint8Array(e.length / 2)
                  , a = void 0;
                for (a = 0; a < e.length / 2; a += 1)
                    t[a] = parseInt("" + e[2 * a] + e[2 * a + 1], 16);
                return t
            }
            return {
                generateMoov: function(e) {
                    if (e && e.adaptation) {
                        var t = void 0;
                        return o = (s = e).adaptation,
                        n = o.period,
                        d = o.index + 1,
                        l = n.mpd.manifest.Period_asArray[n.index].AdaptationSet_asArray[o.index].ContentProtection,
                        u = n.mpd.manifest.Period_asArray[n.index].AdaptationSet_asArray[o.index].SegmentTemplate.timescale,
                        function(e) {
                            var t = a.createBox("ftyp", e);
                            t.major_brand = "iso6",
                            t.minor_version = 1,
                            t.compatible_brands = [],
                            t.compatible_brands[0] = "isom",
                            t.compatible_brands[1] = "iso6",
                            t.compatible_brands[2] = "msdh"
                        }(t = a.createFile()),
                        c(t),
                        t.write()
                    }
                }
            }
        }
        o.__dashjs_factory_name = "MssFragmentMoovProcessor",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        Object.defineProperty(t, "__esModule", {
            value: !0
        });
        var r, n = a(420), i = (r = n) && r.__esModule ? r : {
            default: r
        };
        function o(e) {
            var t = (e = e || {}).BASE64
              , a = e.debug
              , r = e.constants
              , n = e.manifestModel
              , o = e.mediaPlayerModel
              , s = e.settings
              , l = ["AAC", "AACL", "AVC1", "H264", "TTML", "DFXP"]
              , u = {
                CAPT: "main",
                SUBT: "alternate",
                DESC: "main"
            }
              , d = {
                DESC: "2"
            }
              , c = {
                96e3: 0,
                88200: 1,
                64e3: 2,
                48e3: 3,
                44100: 4,
                32e3: 5,
                24e3: 6,
                22050: 7,
                16e3: 8,
                12e3: 9,
                11025: 10,
                8e3: 11,
                7350: 12
            }
              , f = {
                video: "video/mp4",
                audio: "audio/mp4",
                text: "application/mp4"
            }
              , h = void 0
              , p = void 0
              , g = void 0;
            function m(e, t) {
                var a, r = {}, n = [], o = void 0, s = void 0, l = void 0, c = e.getAttribute("Name"), h = e.getAttribute("Type"), p = e.getAttribute("Language"), g = p ? h + "_" + p : h;
                if (r.id = c || g,
                r.contentType = h,
                r.lang = p || "und",
                r.mimeType = f[h],
                r.subType = e.getAttribute("Subtype"),
                r.maxWidth = e.getAttribute("MaxWidth"),
                r.maxHeight = e.getAttribute("MaxHeight"),
                r.subType) {
                    if (u[r.subType]) {
                        var m = {
                            schemeIdUri: "urn:mpeg:dash:role:2011",
                            value: u[r.subType]
                        };
                        r.Role = m,
                        r.Role_asArray = [m]
                    }
                    if (d[r.subType]) {
                        var _ = {
                            schemeIdUri: "urn:tva:metadata:cs:AudioPurposeCS:2007",
                            value: d[r.subType]
                        };
                        r.Accessibility = _,
                        r.Accessibility_asArray = [_]
                    }
                }
                for (a = function(e, t) {
                    var a = {}
                      , r = void 0
                      , n = void 0
                      , o = void 0;
                    return o = e.getAttribute("Url"),
                    r = (r = o ? o.replace("{bitrate}", "$Bandwidth$") : null) ? r.replace("{start time}", "$Time$") : null,
                    n = (n = e.getAttribute("TimeScale")) ? parseFloat(n) : t,
                    a.media = r,
                    a.timescale = n,
                    a.SegmentTimeline = function(e, t) {
                        var a = {}
                          , r = e.getElementsByTagName("c")
                          , n = []
                          , o = void 0
                          , s = void 0
                          , l = void 0
                          , u = void 0
                          , d = void 0
                          , c = void 0
                          , f = 0;
                        for (u = 0; u < r.length; u++)
                            if (o = {},
                            (l = r[u].getAttribute("t")) && (0,
                            i.default)(l).greater((0,
                            i.default)(Number.MAX_SAFE_INTEGER)) && (o.tManifest = l),
                            o.t = parseFloat(l),
                            o.d = parseFloat(r[u].getAttribute("d")),
                            0 !== u || o.t || (o.t = 0),
                            u > 0 && ((s = n[n.length - 1]).d || (s.tManifest ? s.d = (0,
                            i.default)(l).subtract((0,
                            i.default)(s.tManifest)).toJSNumber() : s.d = o.t - s.t,
                            f += s.d),
                            o.t || (s.tManifest ? (o.tManifest = (0,
                            i.default)(s.tManifest).add((0,
                            i.default)(s.d)).toString(),
                            o.t = parseFloat(o.tManifest)) : o.t = s.t + s.d)),
                            o.d && (f += o.d),
                            n.push(o),
                            c = parseFloat(r[u].getAttribute("r")))
                                for (d = 0; d < c - 1; d++)
                                    s = n[n.length - 1],
                                    (o = {}).t = s.t + s.d,
                                    o.d = s.d,
                                    s.tManifest && (o.tManifest = (0,
                                    i.default)(s.tManifest).add((0,
                                    i.default)(s.d)).toString()),
                                    f += o.d,
                                    n.push(o);
                        return a.S = n,
                        a.S_asArray = n,
                        a.duration = f / t,
                        a
                    }(e, a.timescale),
                    a
                }(e, t),
                o = e.getElementsByTagName("QualityLevel"),
                l = 0; l < o.length; l++)
                    o[l].BaseURL = r.BaseURL,
                    o[l].mimeType = r.mimeType,
                    o[l].Id = r.id + "_" + o[l].getAttribute("Index"),
                    null !== (s = y(o[l], e)) && (s.SegmentTemplate = a,
                    n.push(s));
                return 0 === n.length ? null : (r.Representation = n.length > 1 ? n : n[0],
                r.Representation_asArray = n,
                r.SegmentTemplate = a,
                a.SegmentTimeline.S_asArray,
                r)
            }
            function y(e, t) {
                var a = {}
                  , n = t.getAttribute("Type")
                  , i = null;
                if (a.id = e.Id,
                a.bandwidth = parseInt(e.getAttribute("Bitrate"), 10),
                a.mimeType = e.mimeType,
                a.width = parseInt(e.getAttribute("MaxWidth"), 10),
                a.height = parseInt(e.getAttribute("MaxHeight"), 10),
                null !== (i = e.getAttribute("FourCC")) && "" !== i || (i = t.getAttribute("FourCC")),
                null === i || "" === i)
                    if (n === r.AUDIO)
                        i = "AAC";
                    else if (n === r.VIDEO)
                        return p.debug('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),
                        null;
                return -1 === l.indexOf(i.toUpperCase()) ? (p.warn("Codec not supported: " + i),
                null) : ("H264" === i || "AVC1" === i ? a.codecs = function(e) {
                    var t, a = e.getAttribute("CodecPrivateData").toString();
                    return t = /00000001[0-9]7/.exec(a),
                    "avc1." + (t && t[0] ? a.substr(a.indexOf(t[0]) + 10, 6) : void 0)
                }(e) : i.indexOf("AAC") >= 0 ? (a.codecs = function(e, t) {
                    var a = parseInt(e.getAttribute("SamplingRate"), 10)
                      , r = e.getAttribute("CodecPrivateData").toString()
                      , n = 0
                      , i = void 0
                      , o = void 0
                      , s = void 0
                      , l = void 0;
                    "AACH" === t && (n = 5);
                    void 0 === r || "" === r ? (n = 2,
                    s = c[a],
                    "AACH" === t ? (n = 5,
                    r = new Uint8Array(4),
                    l = c[2 * a],
                    r[0] = n << 3 | s >> 1,
                    r[1] = s << 7 | e.Channels << 3 | l >> 1,
                    r[2] = l << 7 | 8,
                    r[3] = 0,
                    (o = new Uint16Array(2))[0] = (r[0] << 8) + r[1],
                    o[1] = (r[2] << 8) + r[3],
                    i = o[0].toString(16),
                    i = o[0].toString(16) + o[1].toString(16)) : ((r = new Uint8Array(2))[0] = n << 3 | s >> 1,
                    r[1] = s << 7 | parseInt(e.getAttribute("Channels"), 10) << 3,
                    (o = new Uint16Array(1))[0] = (r[0] << 8) + r[1],
                    i = o[0].toString(16)),
                    r = (r = "" + i).toUpperCase(),
                    e.setAttribute("CodecPrivateData", r)) : 0 === n && (n = (248 & parseInt(r.substr(0, 2), 16)) >> 3);
                    return "mp4a.40." + n
                }(e, i),
                a.audioSamplingRate = parseInt(e.getAttribute("SamplingRate"), 10),
                a.audioChannels = parseInt(e.getAttribute("Channels"), 10)) : (i.indexOf("TTML") || i.indexOf("DFXP")) && (a.codecs = r.STPP),
                a.codecPrivateData = "" + e.getAttribute("CodecPrivateData"),
                a.BaseURL = e.BaseURL,
                a)
            }
            function _(e) {
                var a, r = void 0, n = void 0;
                return (r = function(e) {
                    var t = void 0
                      , a = void 0
                      , r = void 0
                      , n = 0;
                    (e[n + 3] << 24) + (e[n + 2] << 16) + (e[n + 1] << 8) + e[n],
                    (e[(n += 4) + 1] << 8) + e[n],
                    n += 2;
                    for (; n < e.length; )
                        if (t = (e[n + 1] << 8) + e[n],
                        n += 2,
                        1 === t)
                            return a = (e[n + 1] << 8) + e[n],
                            n += 2,
                            (r = new Uint8Array(a)).set(e.subarray(n, n + a)),
                            r;
                    return null
                }(t.decodeArray(e.firstChild.data))) && (r = new Uint16Array(r.buffer),
                r = String.fromCharCode.apply(null, r),
                n = (new DOMParser).parseFromString(r, "application/xml").querySelector("KID").textContent,
                n = t.decodeArray(n),
                v(a = n, 0, 3),
                v(a, 1, 2),
                v(a, 4, 5),
                v(a, 6, 7)),
                n
            }
            function v(e, t, a) {
                var r = e[t];
                e[t] = e[a],
                e[a] = r
            }
            function b(e, a) {
                var i, l = {}, u = [], d = e.getElementsByTagName("SmoothStreamingMedia")[0], c = e.getElementsByTagName("Protection")[0], f = null, h = void 0, p = void 0, y = void 0, v = void 0, b = void 0, E = void 0, k = void 0, T = void 0, S = void 0, A = void 0;
                l.protocol = "MSS",
                l.profiles = "urn:mpeg:dash:profile:isoff-live:2011",
                l.type = "TRUE" === d.getAttribute("IsLive") ? "dynamic" : "static",
                i = d.getAttribute("TimeScale"),
                l.timescale = i ? parseFloat(i) : 1e7;
                var C = parseFloat(d.getAttribute("DVRWindowLength"));
                "dynamic" !== l.type || 0 !== C && !isNaN(C) || (C = 1 / 0),
                0 === C && "TRUE" === d.getAttribute("CanSeek") && (C = 1 / 0),
                C > 0 && (l.timeShiftBufferDepth = C / l.timescale);
                var I = parseFloat(d.getAttribute("Duration"));
                for (l.mediaPresentationDuration = 0 === I ? 1 / 0 : I / l.timescale,
                l.minBufferTime = 2,
                l.ttmlTimeIsRelative = !0,
                "dynamic" === l.type && I > 0 && (l.type = "static",
                l.timeShiftBufferDepth = I / l.timescale),
                "dynamic" === l.type && l.timeShiftBufferDepth < 1 / 0 && (l.refreshManifestOnSwitchTrack = !0,
                l.doNotUpdateDVRWindowOnBufferUpdated = !0,
                l.ignorePostponeTimePeriod = !0),
                l.Period = function(e, t) {
                    var a, r = {}, n = void 0;
                    r.AdaptationSet_asArray = [],
                    a = e.getElementsByTagName("StreamIndex");
                    for (var i = 0; i < a.length; i++)
                        null !== (n = m(a[i], t)) && r.AdaptationSet_asArray.push(n);
                    return r.AdaptationSet_asArray.length > 0 && (r.AdaptationSet = r.AdaptationSet_asArray.length > 1 ? r.AdaptationSet_asArray : r.AdaptationSet_asArray[0]),
                    r
                }(d, l.timescale),
                l.Period_asArray = [l.Period],
                (h = l.Period).start = 0,
                void 0 !== c && ((f = e.getElementsByTagName("ProtectionHeader")[0]).firstChild.data = f.firstChild.data.replace(/\n|\r/g, ""),
                v = _(f),
                (y = function(e) {
                    var t = {
                        __text: e.firstChild.data,
                        __prefix: "mspr"
                    };
                    return {
                        schemeIdUri: "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",
                        value: "com.microsoft.playready",
                        pro: t,
                        pro_asArray: t
                    }
                }(f))["cenc:default_KID"] = v,
                u.push(y),
                (y = function(e) {
                    var a = {
                        schemeIdUri: "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",
                        value: "com.widevine.alpha"
                    };
                    if (!e)
                        return a;
                    var r = new Uint8Array(2 + e.length);
                    r[0] = 18,
                    r[1] = 16,
                    r.set(e, 2);
                    var n = 32 + r.length
                      , i = new Uint8Array(n)
                      , o = 0;
                    return i[o++] = (4278190080 & n) >> 24,
                    i[o++] = (16711680 & n) >> 16,
                    i[o++] = (65280 & n) >> 8,
                    i[o++] = 255 & n,
                    i.set([112, 115, 115, 104, 0, 0, 0, 0], o),
                    o += 8,
                    i.set([237, 239, 139, 169, 121, 214, 74, 206, 163, 200, 39, 220, 213, 29, 33, 237], o),
                    o += 16,
                    i[o++] = (4278190080 & r.length) >> 24,
                    i[o++] = (16711680 & r.length) >> 16,
                    i[o++] = (65280 & r.length) >> 8,
                    i[o++] = 255 & r.length,
                    i.set(r, o),
                    i = String.fromCharCode.apply(null, i),
                    i = t.encodeASCII(i),
                    a.pssh = {
                        __text: i
                    },
                    a
                }(v))["cenc:default_KID"] = v,
                u.push(y),
                l.ContentProtection = u,
                l.ContentProtection_asArray = u),
                p = h.AdaptationSet_asArray,
                S = 0; S < p.length; S += 1)
                    if (p[S].SegmentTemplate.initialization = "$Bandwidth$",
                    void 0 !== l.ContentProtection && (p[S].ContentProtection = l.ContentProtection,
                    p[S].ContentProtection_asArray = l.ContentProtection_asArray),
                    "video" === p[S].contentType && (T = p[S].SegmentTemplate.SegmentTimeline.S_asArray[0].d / p[S].SegmentTemplate.timescale,
                    l.minBufferTime = T,
                    "dynamic" === l.type)) {
                        var P = ((k = p[S].SegmentTemplate.SegmentTimeline.S_asArray)[k.length - 1].t + k[k.length - 1].d) / p[S].SegmentTemplate.timescale * 1e3;
                        l.availabilityStartTime = new Date(a.getTime() - P),
                        l.timeShiftBufferDepth > 0 && l.timeShiftBufferDepth !== 1 / 0 && l.timeShiftBufferDepth > p[S].SegmentTemplate.SegmentTimeline.duration && (l.timeShiftBufferDepth = p[S].SegmentTemplate.SegmentTimeline.duration)
                    }
                if (l.minBufferTime = Math.min(l.minBufferTime, l.timeShiftBufferDepth ? l.timeShiftBufferDepth : 1 / 0),
                "dynamic" === l.type) {
                    var w = o.getLiveDelay();
                    if (!w)
                        w = T * (null === s.get().streaming.liveDelayFragmentCount || isNaN(s.get().streaming.liveDelayFragmentCount) ? 4 : s.get().streaming.liveDelayFragmentCount);
                    var M = Math.max(l.timeShiftBufferDepth - 10, l.timeShiftBufferDepth / 2)
                      , R = Math.min(M, w)
                      , x = R - T;
                    g = {
                        streaming: {
                            liveDelay: s.get().streaming.liveDelay,
                            stableBufferTime: s.get().streaming.stableBufferTime,
                            bufferTimeAtTopQuality: s.get().streaming.bufferTimeAtTopQuality,
                            bufferTimeAtTopQualityLongForm: s.get().streaming.bufferTimeAtTopQualityLongForm
                        }
                    },
                    s.update({
                        streaming: {
                            liveDelay: R,
                            stableBufferTime: x,
                            bufferTimeAtTopQuality: x,
                            bufferTimeAtTopQualityLongForm: x
                        }
                    })
                }
                if (delete l.ContentProtection,
                delete l.ContentProtection_asArray,
                "static" === l.type) {
                    var D = n.getValue();
                    if (D && D.timestampOffset)
                        b = D.timestampOffset;
                    else
                        for (S = 0; S < p.length; S++)
                            p[S].contentType !== r.AUDIO && p[S].contentType !== r.VIDEO || (E = (k = p[S].SegmentTemplate.SegmentTimeline.S_asArray)[0].t,
                            void 0 === b && (b = E),
                            b = Math.min(b, E),
                            l.mediaPresentationDuration = Math.min(l.mediaPresentationDuration, p[S].SegmentTemplate.SegmentTimeline.duration));
                    if (b > 0) {
                        for (l.timestampOffset = b,
                        S = 0; S < p.length; S++) {
                            for (k = p[S].SegmentTemplate.SegmentTimeline.S_asArray,
                            A = 0; A < k.length; A++)
                                k[A].tManifest || (k[A].tManifest = k[A].t.toString()),
                                k[A].t -= b;
                            p[S].contentType !== r.AUDIO && p[S].contentType !== r.VIDEO || (h.start = Math.max(k[0].t, h.start),
                            p[S].SegmentTemplate.presentationTimeOffset = h.start)
                        }
                        h.start /= l.timescale
                    }
                }
                return l.mediaPresentationDuration = Math.floor(1e3 * l.mediaPresentationDuration) / 1e3,
                h.duration = l.mediaPresentationDuration,
                l
            }
            return h = {
                parse: function(e) {
                    var t, a, r = window.performance.now();
                    t = function(e) {
                        var t = null;
                        if (window.DOMParser && (t = (new window.DOMParser).parseFromString(e, "text/xml")).getElementsByTagName("parsererror").length > 0)
                            throw new Error("parsing the manifest failed");
                        return t
                    }(e);
                    var n = window.performance.now();
                    if (null === t)
                        return null;
                    a = b(t, new Date);
                    var i = window.performance.now();
                    return p.info("Parsing complete: (xmlParsing: " + (n - r).toPrecision(3) + "ms, mss2dash: " + (i - n).toPrecision(3) + "ms, total: " + ((i - r) / 1e3).toPrecision(3) + "s)"),
                    a
                },
                getMatchers: function() {
                    return null
                },
                getIron: function() {
                    return null
                },
                reset: function() {
                    g && s.update(g)
                }
            },
            p = a.getLogger(h),
            h
        }
        o.__dashjs_factory_name = "MssParser",
        t.default = dashjs.FactoryMaker.getClassFactory(o)
    }
    , function(e, t, a) {
        "use strict";
        (function(e) {
            var a, r = function(e) {
                var t = 1e7
                  , a = 9007199254740992
                  , n = c(a)
                  , i = "function" == typeof BigInt;
                function o(e, t, a, r) {
                    return void 0 === e ? o[0] : void 0 !== t && (10 != +t || a) ? j(e, t, a, r) : q(e)
                }
                function s(e, t) {
                    this.value = e,
                    this.sign = t,
                    this.isSmall = !1
                }
                function l(e) {
                    this.value = e,
                    this.sign = e < 0,
                    this.isSmall = !0
                }
                function u(e) {
                    this.value = e
                }
                function d(e) {
                    return -a < e && e < a
                }
                function c(e) {
                    return e < 1e7 ? [e] : e < 1e14 ? [e % 1e7, Math.floor(e / 1e7)] : [e % 1e7, Math.floor(e / 1e7) % 1e7, Math.floor(e / 1e14)]
                }
                function f(e) {
                    h(e);
                    var a = e.length;
                    if (a < 4 && P(e, n) < 0)
                        switch (a) {
                        case 0:
                            return 0;
                        case 1:
                            return e[0];
                        case 2:
                            return e[0] + e[1] * t;
                        default:
                            return e[0] + (e[1] + e[2] * t) * t
                        }
                    return e
                }
                function h(e) {
                    for (var t = e.length; 0 === e[--t]; )
                        ;
                    e.length = t + 1
                }
                function p(e) {
                    for (var t = new Array(e), a = -1; ++a < e; )
                        t[a] = 0;
                    return t
                }
                function g(e) {
                    return e > 0 ? Math.floor(e) : Math.ceil(e)
                }
                function m(e, a) {
                    var r, n, i = e.length, o = a.length, s = new Array(i), l = 0, u = t;
                    for (n = 0; n < o; n++)
                        l = (r = e[n] + a[n] + l) >= u ? 1 : 0,
                        s[n] = r - l * u;
                    for (; n < i; )
                        l = (r = e[n] + l) === u ? 1 : 0,
                        s[n++] = r - l * u;
                    return l > 0 && s.push(l),
                    s
                }
                function y(e, t) {
                    return e.length >= t.length ? m(e, t) : m(t, e)
                }
                function _(e, a) {
                    var r, n, i = e.length, o = new Array(i), s = t;
                    for (n = 0; n < i; n++)
                        r = e[n] - s + a,
                        a = Math.floor(r / s),
                        o[n] = r - a * s,
                        a += 1;
                    for (; a > 0; )
                        o[n++] = a % s,
                        a = Math.floor(a / s);
                    return o
                }
                function v(e, t) {
                    var a, r, n = e.length, i = t.length, o = new Array(n), s = 0;
                    for (a = 0; a < i; a++)
                        (r = e[a] - s - t[a]) < 0 ? (r += 1e7,
                        s = 1) : s = 0,
                        o[a] = r;
                    for (a = i; a < n; a++) {
                        if (!((r = e[a] - s) < 0)) {
                            o[a++] = r;
                            break
                        }
                        r += 1e7,
                        o[a] = r
                    }
                    for (; a < n; a++)
                        o[a] = e[a];
                    return h(o),
                    o
                }
                function b(e, t, a) {
                    var r, n, i = e.length, o = new Array(i), u = -t;
                    for (r = 0; r < i; r++)
                        n = e[r] + u,
                        u = Math.floor(n / 1e7),
                        n %= 1e7,
                        o[r] = n < 0 ? n + 1e7 : n;
                    return "number" == typeof (o = f(o)) ? (a && (o = -o),
                    new l(o)) : new s(o,a)
                }
                function E(e, t) {
                    var a, r, n, i, o = e.length, s = t.length, l = p(o + s);
                    for (n = 0; n < o; ++n) {
                        i = e[n];
                        for (var u = 0; u < s; ++u)
                            a = i * t[u] + l[n + u],
                            r = Math.floor(a / 1e7),
                            l[n + u] = a - 1e7 * r,
                            l[n + u + 1] += r
                    }
                    return h(l),
                    l
                }
                function k(e, a) {
                    var r, n, i = e.length, o = new Array(i), s = t, l = 0;
                    for (n = 0; n < i; n++)
                        r = e[n] * a + l,
                        l = Math.floor(r / s),
                        o[n] = r - l * s;
                    for (; l > 0; )
                        o[n++] = l % s,
                        l = Math.floor(l / s);
                    return o
                }
                function T(e, t) {
                    for (var a = []; t-- > 0; )
                        a.push(0);
                    return a.concat(e)
                }
                function S(e, a, r) {
                    return new s(e < t ? k(a, e) : E(a, c(e)),r)
                }
                function A(e) {
                    var t, a, r, n, i = e.length, o = p(i + i);
                    for (r = 0; r < i; r++) {
                        a = 0 - (n = e[r]) * n;
                        for (var s = r; s < i; s++)
                            t = n * e[s] * 2 + o[r + s] + a,
                            a = Math.floor(t / 1e7),
                            o[r + s] = t - 1e7 * a;
                        o[r + i] = a
                    }
                    return h(o),
                    o
                }
                function C(e, t) {
                    var a, r, n, i, o = e.length, s = p(o);
                    for (n = 0,
                    a = o - 1; a >= 0; --a)
                        n = (i = 1e7 * n + e[a]) - (r = g(i / t)) * t,
                        s[a] = 0 | r;
                    return [s, 0 | n]
                }
                function I(e, a) {
                    var r, n = q(a);
                    if (i)
                        return [new u(e.value / n.value), new u(e.value % n.value)];
                    var d, m = e.value, y = n.value;
                    if (0 === y)
                        throw new Error("Cannot divide by zero");
                    if (e.isSmall)
                        return n.isSmall ? [new l(g(m / y)), new l(m % y)] : [o[0], e];
                    if (n.isSmall) {
                        if (1 === y)
                            return [e, o[0]];
                        if (-1 == y)
                            return [e.negate(), o[0]];
                        var _ = Math.abs(y);
                        if (_ < t) {
                            d = f((r = C(m, _))[0]);
                            var b = r[1];
                            return e.sign && (b = -b),
                            "number" == typeof d ? (e.sign !== n.sign && (d = -d),
                            [new l(d), new l(b)]) : [new s(d,e.sign !== n.sign), new l(b)]
                        }
                        y = c(_)
                    }
                    var E = P(m, y);
                    if (-1 === E)
                        return [o[0], e];
                    if (0 === E)
                        return [o[e.sign === n.sign ? 1 : -1], o[0]];
                    d = (r = m.length + y.length <= 200 ? function(e, a) {
                        var r, n, i, o, s, l, u, d = e.length, c = a.length, h = t, g = p(a.length), m = a[c - 1], y = Math.ceil(h / (2 * m)), _ = k(e, y), v = k(a, y);
                        for (_.length <= d && _.push(0),
                        v.push(0),
                        m = v[c - 1],
                        n = d - c; n >= 0; n--) {
                            for (r = h - 1,
                            _[n + c] !== m && (r = Math.floor((_[n + c] * h + _[n + c - 1]) / m)),
                            i = 0,
                            o = 0,
                            l = v.length,
                            s = 0; s < l; s++)
                                i += r * v[s],
                                u = Math.floor(i / h),
                                o += _[n + s] - (i - u * h),
                                i = u,
                                o < 0 ? (_[n + s] = o + h,
                                o = -1) : (_[n + s] = o,
                                o = 0);
                            for (; 0 !== o; ) {
                                for (r -= 1,
                                i = 0,
                                s = 0; s < l; s++)
                                    (i += _[n + s] - h + v[s]) < 0 ? (_[n + s] = i + h,
                                    i = 0) : (_[n + s] = i,
                                    i = 1);
                                o += i
                            }
                            g[n] = r
                        }
                        return _ = C(_, y)[0],
                        [f(g), f(_)]
                    }(m, y) : function(e, t) {
                        for (var a, r, n, i, o, s = e.length, l = t.length, u = [], d = []; s; )
                            if (d.unshift(e[--s]),
                            h(d),
                            P(d, t) < 0)
                                u.push(0);
                            else {
                                n = 1e7 * d[(r = d.length) - 1] + d[r - 2],
                                i = 1e7 * t[l - 1] + t[l - 2],
                                r > l && (n = 1e7 * (n + 1)),
                                a = Math.ceil(n / i);
                                do {
                                    if (P(o = k(t, a), d) <= 0)
                                        break;
                                    a--
                                } while (a);
                                u.push(a),
                                d = v(d, o)
                            }
                        return u.reverse(),
                        [f(u), f(d)]
                    }(m, y))[0];
                    var T = e.sign !== n.sign
                      , S = r[1]
                      , A = e.sign;
                    return "number" == typeof d ? (T && (d = -d),
                    d = new l(d)) : d = new s(d,T),
                    "number" == typeof S ? (A && (S = -S),
                    S = new l(S)) : S = new s(S,A),
                    [d, S]
                }
                function P(e, t) {
                    if (e.length !== t.length)
                        return e.length > t.length ? 1 : -1;
                    for (var a = e.length - 1; a >= 0; a--)
                        if (e[a] !== t[a])
                            return e[a] > t[a] ? 1 : -1;
                    return 0
                }
                function w(e) {
                    var t = e.abs();
                    return !t.isUnit() && (!!(t.equals(2) || t.equals(3) || t.equals(5)) || !(t.isEven() || t.isDivisibleBy(3) || t.isDivisibleBy(5)) && (!!t.lesser(49) || void 0))
                }
                function M(e, t) {
                    for (var a, n, i, o = e.prev(), s = o, l = 0; s.isEven(); )
                        s = s.divide(2),
                        l++;
                    e: for (n = 0; n < t.length; n++)
                        if (!e.lesser(t[n]) && !(i = r(t[n]).modPow(s, e)).isUnit() && !i.equals(o)) {
                            for (a = l - 1; 0 != a; a--) {
                                if ((i = i.square().mod(e)).isUnit())
                                    return !1;
                                if (i.equals(o))
                                    continue e
                            }
                            return !1
                        }
                    return !0
                }
                s.prototype = Object.create(o.prototype),
                l.prototype = Object.create(o.prototype),
                u.prototype = Object.create(o.prototype),
                s.prototype.add = function(e) {
                    var t = q(e);
                    if (this.sign !== t.sign)
                        return this.subtract(t.negate());
                    var a = this.value
                      , r = t.value;
                    return t.isSmall ? new s(_(a, Math.abs(r)),this.sign) : new s(y(a, r),this.sign)
                }
                ,
                s.prototype.plus = s.prototype.add,
                l.prototype.add = function(e) {
                    var t = q(e)
                      , a = this.value;
                    if (a < 0 !== t.sign)
                        return this.subtract(t.negate());
                    var r = t.value;
                    if (t.isSmall) {
                        if (d(a + r))
                            return new l(a + r);
                        r = c(Math.abs(r))
                    }
                    return new s(_(r, Math.abs(a)),a < 0)
                }
                ,
                l.prototype.plus = l.prototype.add,
                u.prototype.add = function(e) {
                    return new u(this.value + q(e).value)
                }
                ,
                u.prototype.plus = u.prototype.add,
                s.prototype.subtract = function(e) {
                    var t = q(e);
                    if (this.sign !== t.sign)
                        return this.add(t.negate());
                    var a = this.value
                      , r = t.value;
                    return t.isSmall ? b(a, Math.abs(r), this.sign) : function(e, t, a) {
                        var r;
                        return P(e, t) >= 0 ? r = v(e, t) : (r = v(t, e),
                        a = !a),
                        "number" == typeof (r = f(r)) ? (a && (r = -r),
                        new l(r)) : new s(r,a)
                    }(a, r, this.sign)
                }
                ,
                s.prototype.minus = s.prototype.subtract,
                l.prototype.subtract = function(e) {
                    var t = q(e)
                      , a = this.value;
                    if (a < 0 !== t.sign)
                        return this.add(t.negate());
                    var r = t.value;
                    return t.isSmall ? new l(a - r) : b(r, Math.abs(a), a >= 0)
                }
                ,
                l.prototype.minus = l.prototype.subtract,
                u.prototype.subtract = function(e) {
                    return new u(this.value - q(e).value)
                }
                ,
                u.prototype.minus = u.prototype.subtract,
                s.prototype.negate = function() {
                    return new s(this.value,!this.sign)
                }
                ,
                l.prototype.negate = function() {
                    var e = this.sign
                      , t = new l(-this.value);
                    return t.sign = !e,
                    t
                }
                ,
                u.prototype.negate = function() {
                    return new u(-this.value)
                }
                ,
                s.prototype.abs = function() {
                    return new s(this.value,!1)
                }
                ,
                l.prototype.abs = function() {
                    return new l(Math.abs(this.value))
                }
                ,
                u.prototype.abs = function() {
                    return new u(this.value >= 0 ? this.value : -this.value)
                }
                ,
                s.prototype.multiply = function(e) {
                    var a, r, n, i = q(e), l = this.value, u = i.value, d = this.sign !== i.sign;
                    if (i.isSmall) {
                        if (0 === u)
                            return o[0];
                        if (1 === u)
                            return this;
                        if (-1 === u)
                            return this.negate();
                        if ((a = Math.abs(u)) < t)
                            return new s(k(l, a),d);
                        u = c(a)
                    }
                    return r = l.length,
                    n = u.length,
                    new s(-.012 * r - .012 * n + 15e-6 * r * n > 0 ? function e(t, a) {
                        var r = Math.max(t.length, a.length);
                        if (r <= 30)
                            return E(t, a);
                        r = Math.ceil(r / 2);
                        var n = t.slice(r)
                          , i = t.slice(0, r)
                          , o = a.slice(r)
                          , s = a.slice(0, r)
                          , l = e(i, s)
                          , u = e(n, o)
                          , d = e(y(i, n), y(s, o))
                          , c = y(y(l, T(v(v(d, l), u), r)), T(u, 2 * r));
                        return h(c),
                        c
                    }(l, u) : E(l, u),d)
                }
                ,
                s.prototype.times = s.prototype.multiply,
                l.prototype._multiplyBySmall = function(e) {
                    return d(e.value * this.value) ? new l(e.value * this.value) : S(Math.abs(e.value), c(Math.abs(this.value)), this.sign !== e.sign)
                }
                ,
                s.prototype._multiplyBySmall = function(e) {
                    return 0 === e.value ? o[0] : 1 === e.value ? this : -1 === e.value ? this.negate() : S(Math.abs(e.value), this.value, this.sign !== e.sign)
                }
                ,
                l.prototype.multiply = function(e) {
                    return q(e)._multiplyBySmall(this)
                }
                ,
                l.prototype.times = l.prototype.multiply,
                u.prototype.multiply = function(e) {
                    return new u(this.value * q(e).value)
                }
                ,
                u.prototype.times = u.prototype.multiply,
                s.prototype.square = function() {
                    return new s(A(this.value),!1)
                }
                ,
                l.prototype.square = function() {
                    var e = this.value * this.value;
                    return d(e) ? new l(e) : new s(A(c(Math.abs(this.value))),!1)
                }
                ,
                u.prototype.square = function(e) {
                    return new u(this.value * this.value)
                }
                ,
                s.prototype.divmod = function(e) {
                    var t = I(this, e);
                    return {
                        quotient: t[0],
                        remainder: t[1]
                    }
                }
                ,
                u.prototype.divmod = l.prototype.divmod = s.prototype.divmod,
                s.prototype.divide = function(e) {
                    return I(this, e)[0]
                }
                ,
                u.prototype.over = u.prototype.divide = function(e) {
                    return new u(this.value / q(e).value)
                }
                ,
                l.prototype.over = l.prototype.divide = s.prototype.over = s.prototype.divide,
                s.prototype.mod = function(e) {
                    return I(this, e)[1]
                }
                ,
                u.prototype.mod = u.prototype.remainder = function(e) {
                    return new u(this.value % q(e).value)
                }
                ,
                l.prototype.remainder = l.prototype.mod = s.prototype.remainder = s.prototype.mod,
                s.prototype.pow = function(e) {
                    var t, a, r, n = q(e), i = this.value, s = n.value;
                    if (0 === s)
                        return o[1];
                    if (0 === i)
                        return o[0];
                    if (1 === i)
                        return o[1];
                    if (-1 === i)
                        return n.isEven() ? o[1] : o[-1];
                    if (n.sign)
                        return o[0];
                    if (!n.isSmall)
                        throw new Error("The exponent " + n.toString() + " is too large.");
                    if (this.isSmall && d(t = Math.pow(i, s)))
                        return new l(g(t));
                    for (a = this,
                    r = o[1]; !0 & s && (r = r.times(a),
                    --s),
                    0 !== s; )
                        s /= 2,
                        a = a.square();
                    return r
                }
                ,
                l.prototype.pow = s.prototype.pow,
                u.prototype.pow = function(e) {
                    var t = q(e)
                      , a = this.value
                      , r = t.value
                      , n = BigInt(0)
                      , i = BigInt(1)
                      , s = BigInt(2);
                    if (r === n)
                        return o[1];
                    if (a === n)
                        return o[0];
                    if (a === i)
                        return o[1];
                    if (a === BigInt(-1))
                        return t.isEven() ? o[1] : o[-1];
                    if (t.isNegative())
                        return new u(n);
                    for (var l = this, d = o[1]; (r & i) === i && (d = d.times(l),
                    --r),
                    r !== n; )
                        r /= s,
                        l = l.square();
                    return d
                }
                ,
                s.prototype.modPow = function(e, t) {
                    if (e = q(e),
                    (t = q(t)).isZero())
                        throw new Error("Cannot take modPow with modulus 0");
                    for (var a = o[1], r = this.mod(t); e.isPositive(); ) {
                        if (r.isZero())
                            return o[0];
                        e.isOdd() && (a = a.multiply(r).mod(t)),
                        e = e.divide(2),
                        r = r.square().mod(t)
                    }
                    return a
                }
                ,
                u.prototype.modPow = l.prototype.modPow = s.prototype.modPow,
                s.prototype.compareAbs = function(e) {
                    var t = q(e)
                      , a = this.value
                      , r = t.value;
                    return t.isSmall ? 1 : P(a, r)
                }
                ,
                l.prototype.compareAbs = function(e) {
                    var t = q(e)
                      , a = Math.abs(this.value)
                      , r = t.value;
                    return t.isSmall ? a === (r = Math.abs(r)) ? 0 : a > r ? 1 : -1 : -1
                }
                ,
                u.prototype.compareAbs = function(e) {
                    var t = this.value
                      , a = q(e).value;
                    return (t = t >= 0 ? t : -t) === (a = a >= 0 ? a : -a) ? 0 : t > a ? 1 : -1
                }
                ,
                s.prototype.compare = function(e) {
                    if (e === 1 / 0)
                        return -1;
                    if (e === -1 / 0)
                        return 1;
                    var t = q(e)
                      , a = this.value
                      , r = t.value;
                    return this.sign !== t.sign ? t.sign ? 1 : -1 : t.isSmall ? this.sign ? -1 : 1 : P(a, r) * (this.sign ? -1 : 1)
                }
                ,
                s.prototype.compareTo = s.prototype.compare,
                l.prototype.compare = function(e) {
                    if (e === 1 / 0)
                        return -1;
                    if (e === -1 / 0)
                        return 1;
                    var t = q(e)
                      , a = this.value
                      , r = t.value;
                    return t.isSmall ? a == r ? 0 : a > r ? 1 : -1 : a < 0 !== t.sign ? a < 0 ? -1 : 1 : a < 0 ? 1 : -1
                }
                ,
                l.prototype.compareTo = l.prototype.compare,
                u.prototype.compare = function(e) {
                    if (e === 1 / 0)
                        return -1;
                    if (e === -1 / 0)
                        return 1;
                    var t = this.value
                      , a = q(e).value;
                    return t === a ? 0 : t > a ? 1 : -1
                }
                ,
                u.prototype.compareTo = u.prototype.compare,
                s.prototype.equals = function(e) {
                    return 0 === this.compare(e)
                }
                ,
                u.prototype.eq = u.prototype.equals = l.prototype.eq = l.prototype.equals = s.prototype.eq = s.prototype.equals,
                s.prototype.notEquals = function(e) {
                    return 0 !== this.compare(e)
                }
                ,
                u.prototype.neq = u.prototype.notEquals = l.prototype.neq = l.prototype.notEquals = s.prototype.neq = s.prototype.notEquals,
                s.prototype.greater = function(e) {
                    return this.compare(e) > 0
                }
                ,
                u.prototype.gt = u.prototype.greater = l.prototype.gt = l.prototype.greater = s.prototype.gt = s.prototype.greater,
                s.prototype.lesser = function(e) {
                    return this.compare(e) < 0
                }
                ,
                u.prototype.lt = u.prototype.lesser = l.prototype.lt = l.prototype.lesser = s.prototype.lt = s.prototype.lesser,
                s.prototype.greaterOrEquals = function(e) {
                    return this.compare(e) >= 0
                }
                ,
                u.prototype.geq = u.prototype.greaterOrEquals = l.prototype.geq = l.prototype.greaterOrEquals = s.prototype.geq = s.prototype.greaterOrEquals,
                s.prototype.lesserOrEquals = function(e) {
                    return this.compare(e) <= 0
                }
                ,
                u.prototype.leq = u.prototype.lesserOrEquals = l.prototype.leq = l.prototype.lesserOrEquals = s.prototype.leq = s.prototype.lesserOrEquals,
                s.prototype.isEven = function() {
                    return 0 == (1 & this.value[0])
                }
                ,
                l.prototype.isEven = function() {
                    return 0 == (1 & this.value)
                }
                ,
                u.prototype.isEven = function() {
                    return (this.value & BigInt(1)) === BigInt(0)
                }
                ,
                s.prototype.isOdd = function() {
                    return 1 == (1 & this.value[0])
                }
                ,
                l.prototype.isOdd = function() {
                    return 1 == (1 & this.value)
                }
                ,
                u.prototype.isOdd = function() {
                    return (this.value & BigInt(1)) === BigInt(1)
                }
                ,
                s.prototype.isPositive = function() {
                    return !this.sign
                }
                ,
                l.prototype.isPositive = function() {
                    return this.value > 0
                }
                ,
                u.prototype.isPositive = l.prototype.isPositive,
                s.prototype.isNegative = function() {
                    return this.sign
                }
                ,
                l.prototype.isNegative = function() {
                    return this.value < 0
                }
                ,
                u.prototype.isNegative = l.prototype.isNegative,
                s.prototype.isUnit = function() {
                    return !1
                }
                ,
                l.prototype.isUnit = function() {
                    return 1 === Math.abs(this.value)
                }
                ,
                u.prototype.isUnit = function() {
                    return this.abs().value === BigInt(1)
                }
                ,
                s.prototype.isZero = function() {
                    return !1
                }
                ,
                l.prototype.isZero = function() {
                    return 0 === this.value
                }
                ,
                u.prototype.isZero = function() {
                    return this.value === BigInt(0)
                }
                ,
                s.prototype.isDivisibleBy = function(e) {
                    var t = q(e);
                    return !t.isZero() && (!!t.isUnit() || (0 === t.compareAbs(2) ? this.isEven() : this.mod(t).isZero()))
                }
                ,
                u.prototype.isDivisibleBy = l.prototype.isDivisibleBy = s.prototype.isDivisibleBy,
                s.prototype.isPrime = function(e) {
                    var t = w(this);
                    if (void 0 !== t)
                        return t;
                    var a = this.abs()
                      , n = a.bitLength();
                    if (n <= 64)
                        return M(a, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);
                    for (var i = Math.log(2) * n.toJSNumber(), o = Math.ceil(!0 === e ? 2 * Math.pow(i, 2) : i), s = [], l = 0; l < o; l++)
                        s.push(r(l + 2));
                    return M(a, s)
                }
                ,
                u.prototype.isPrime = l.prototype.isPrime = s.prototype.isPrime,
                s.prototype.isProbablePrime = function(e) {
                    var t = w(this);
                    if (void 0 !== t)
                        return t;
                    for (var a = this.abs(), n = void 0 === e ? 5 : e, i = [], o = 0; o < n; o++)
                        i.push(r.randBetween(2, a.minus(2)));
                    return M(a, i)
                }
                ,
                u.prototype.isProbablePrime = l.prototype.isProbablePrime = s.prototype.isProbablePrime,
                s.prototype.modInv = function(e) {
                    for (var t, a, n, i = r.zero, o = r.one, s = q(e), l = this.abs(); !l.isZero(); )
                        t = s.divide(l),
                        a = i,
                        n = s,
                        i = o,
                        s = l,
                        o = a.subtract(t.multiply(o)),
                        l = n.subtract(t.multiply(l));
                    if (!s.isUnit())
                        throw new Error(this.toString() + " and " + e.toString() + " are not co-prime");
                    return -1 === i.compare(0) && (i = i.add(e)),
                    this.isNegative() ? i.negate() : i
                }
                ,
                u.prototype.modInv = l.prototype.modInv = s.prototype.modInv,
                s.prototype.next = function() {
                    var e = this.value;
                    return this.sign ? b(e, 1, this.sign) : new s(_(e, 1),this.sign)
                }
                ,
                l.prototype.next = function() {
                    var e = this.value;
                    return e + 1 < a ? new l(e + 1) : new s(n,!1)
                }
                ,
                u.prototype.next = function() {
                    return new u(this.value + BigInt(1))
                }
                ,
                s.prototype.prev = function() {
                    var e = this.value;
                    return this.sign ? new s(_(e, 1),!0) : b(e, 1, this.sign)
                }
                ,
                l.prototype.prev = function() {
                    var e = this.value;
                    return e - 1 > -a ? new l(e - 1) : new s(n,!0)
                }
                ,
                u.prototype.prev = function() {
                    return new u(this.value - BigInt(1))
                }
                ;
                for (var R = [1]; 2 * R[R.length - 1] <= t; )
                    R.push(2 * R[R.length - 1]);
                var x = R.length
                  , D = R[x - 1];
                function O(e) {
                    return Math.abs(e) <= t
                }
                function N(e, t, a) {
                    t = q(t);
                    for (var n = e.isNegative(), i = t.isNegative(), o = n ? e.not() : e, s = i ? t.not() : t, l = 0, u = 0, d = null, c = null, f = []; !o.isZero() || !s.isZero(); )
                        l = (d = I(o, D))[1].toJSNumber(),
                        n && (l = D - 1 - l),
                        u = (c = I(s, D))[1].toJSNumber(),
                        i && (u = D - 1 - u),
                        o = d[0],
                        s = c[0],
                        f.push(a(l, u));
                    for (var h = 0 !== a(n ? 1 : 0, i ? 1 : 0) ? r(-1) : r(0), p = f.length - 1; p >= 0; p -= 1)
                        h = h.multiply(D).add(r(f[p]));
                    return h
                }
                s.prototype.shiftLeft = function(e) {
                    var t = q(e).toJSNumber();
                    if (!O(t))
                        throw new Error(String(t) + " is too large for shifting.");
                    if (t < 0)
                        return this.shiftRight(-t);
                    var a = this;
                    if (a.isZero())
                        return a;
                    for (; t >= x; )
                        a = a.multiply(D),
                        t -= x - 1;
                    return a.multiply(R[t])
                }
                ,
                u.prototype.shiftLeft = l.prototype.shiftLeft = s.prototype.shiftLeft,
                s.prototype.shiftRight = function(e) {
                    var t, a = q(e).toJSNumber();
                    if (!O(a))
                        throw new Error(String(a) + " is too large for shifting.");
                    if (a < 0)
                        return this.shiftLeft(-a);
                    for (var r = this; a >= x; ) {
                        if (r.isZero() || r.isNegative() && r.isUnit())
                            return r;
                        r = (t = I(r, D))[1].isNegative() ? t[0].prev() : t[0],
                        a -= x - 1
                    }
                    return (t = I(r, R[a]))[1].isNegative() ? t[0].prev() : t[0]
                }
                ,
                u.prototype.shiftRight = l.prototype.shiftRight = s.prototype.shiftRight,
                s.prototype.not = function() {
                    return this.negate().prev()
                }
                ,
                u.prototype.not = l.prototype.not = s.prototype.not,
                s.prototype.and = function(e) {
                    return N(this, e, (function(e, t) {
                        return e & t
                    }
                    ))
                }
                ,
                u.prototype.and = l.prototype.and = s.prototype.and,
                s.prototype.or = function(e) {
                    return N(this, e, (function(e, t) {
                        return e | t
                    }
                    ))
                }
                ,
                u.prototype.or = l.prototype.or = s.prototype.or,
                s.prototype.xor = function(e) {
                    return N(this, e, (function(e, t) {
                        return e ^ t
                    }
                    ))
                }
                ,
                u.prototype.xor = l.prototype.xor = s.prototype.xor;
                function L(e) {
                    var a = e.value
                      , r = "number" == typeof a ? a | 1 << 30 : "bigint" == typeof a ? a | BigInt(1 << 30) : a[0] + a[1] * t | 1073758208;
                    return r & -r
                }
                function U(e, t) {
                    return e = q(e),
                    t = q(t),
                    e.greater(t) ? e : t
                }
                function F(e, t) {
                    return e = q(e),
                    t = q(t),
                    e.lesser(t) ? e : t
                }
                function B(e, t) {
                    if (e = q(e).abs(),
                    t = q(t).abs(),
                    e.equals(t))
                        return e;
                    if (e.isZero())
                        return t;
                    if (t.isZero())
                        return e;
                    for (var a, r, n = o[1]; e.isEven() && t.isEven(); )
                        a = F(L(e), L(t)),
                        e = e.divide(a),
                        t = t.divide(a),
                        n = n.multiply(a);
                    for (; e.isEven(); )
                        e = e.divide(L(e));
                    do {
                        for (; t.isEven(); )
                            t = t.divide(L(t));
                        e.greater(t) && (r = t,
                        t = e,
                        e = r),
                        t = t.subtract(e)
                    } while (!t.isZero());
                    return n.isUnit() ? e : e.multiply(n)
                }
                s.prototype.bitLength = function() {
                    var e = this;
                    return e.compareTo(r(0)) < 0 && (e = e.negate().subtract(r(1))),
                    0 === e.compareTo(r(0)) ? r(0) : r(function e(t, a) {
                        if (a.compareTo(t) <= 0) {
                            var n = e(t, a.square(a))
                              , i = n.p
                              , o = n.e
                              , s = i.multiply(a);
                            return s.compareTo(t) <= 0 ? {
                                p: s,
                                e: 2 * o + 1
                            } : {
                                p: i,
                                e: 2 * o
                            }
                        }
                        return {
                            p: r(1),
                            e: 0
                        }
                    }(e, r(2)).e).add(r(1))
                }
                ,
                u.prototype.bitLength = l.prototype.bitLength = s.prototype.bitLength;
                var j = function(e, t, a, r) {
                    a = a || "0123456789abcdefghijklmnopqrstuvwxyz",
                    e = String(e),
                    r || (e = e.toLowerCase(),
                    a = a.toLowerCase());
                    var n, i = e.length, o = Math.abs(t), s = {};
                    for (n = 0; n < a.length; n++)
                        s[a[n]] = n;
                    for (n = 0; n < i; n++) {
                        if ("-" !== (d = e[n]) && (d in s && s[d] >= o)) {
                            if ("1" === d && 1 === o)
                                continue;
                            throw new Error(d + " is not a valid digit in base " + t + ".")
                        }
                    }
                    t = q(t);
                    var l = []
                      , u = "-" === e[0];
                    for (n = u ? 1 : 0; n < e.length; n++) {
                        var d;
                        if ((d = e[n])in s)
                            l.push(q(s[d]));
                        else {
                            if ("<" !== d)
                                throw new Error(d + " is not a valid character");
                            var c = n;
                            do {
                                n++
                            } while (">" !== e[n] && n < e.length);
                            l.push(q(e.slice(c + 1, n)))
                        }
                    }
                    return G(l, t, u)
                };
                function G(e, t, a) {
                    var r, n = o[0], i = o[1];
                    for (r = e.length - 1; r >= 0; r--)
                        n = n.add(e[r].times(i)),
                        i = i.times(t);
                    return a ? n.negate() : n
                }
                function V(e, t) {
                    if ((t = r(t)).isZero()) {
                        if (e.isZero())
                            return {
                                value: [0],
                                isNegative: !1
                            };
                        throw new Error("Cannot convert nonzero numbers to base 0.")
                    }
                    if (t.equals(-1)) {
                        if (e.isZero())
                            return {
                                value: [0],
                                isNegative: !1
                            };
                        if (e.isNegative())
                            return {
                                value: [].concat.apply([], Array.apply(null, Array(-e.toJSNumber())).map(Array.prototype.valueOf, [1, 0])),
                                isNegative: !1
                            };
                        var a = Array.apply(null, Array(e.toJSNumber() - 1)).map(Array.prototype.valueOf, [0, 1]);
                        return a.unshift([1]),
                        {
                            value: [].concat.apply([], a),
                            isNegative: !1
                        }
                    }
                    var n = !1;
                    if (e.isNegative() && t.isPositive() && (n = !0,
                    e = e.abs()),
                    t.isUnit())
                        return e.isZero() ? {
                            value: [0],
                            isNegative: !1
                        } : {
                            value: Array.apply(null, Array(e.toJSNumber())).map(Number.prototype.valueOf, 1),
                            isNegative: n
                        };
                    for (var i, o = [], s = e; s.isNegative() || s.compareAbs(t) >= 0; ) {
                        i = s.divmod(t),
                        s = i.quotient;
                        var l = i.remainder;
                        l.isNegative() && (l = t.minus(l).abs(),
                        s = s.next()),
                        o.push(l.toJSNumber())
                    }
                    return o.push(s.toJSNumber()),
                    {
                        value: o.reverse(),
                        isNegative: n
                    }
                }
                function K(e, t, a) {
                    var r = V(e, t);
                    return (r.isNegative ? "-" : "") + r.value.map((function(e) {
                        return function(e, t) {
                            return e < (t = t || "0123456789abcdefghijklmnopqrstuvwxyz").length ? t[e] : "<" + e + ">"
                        }(e, a)
                    }
                    )).join("")
                }
                function $(e) {
                    if (d(+e)) {
                        var t = +e;
                        if (t === g(t))
                            return i ? new u(BigInt(t)) : new l(t);
                        throw new Error("Invalid integer: " + e)
                    }
                    var a = "-" === e[0];
                    a && (e = e.slice(1));
                    var r = e.split(/e/i);
                    if (r.length > 2)
                        throw new Error("Invalid integer: " + r.join("e"));
                    if (2 === r.length) {
                        var n = r[1];
                        if ("+" === n[0] && (n = n.slice(1)),
                        (n = +n) !== g(n) || !d(n))
                            throw new Error("Invalid integer: " + n + " is not a valid exponent.");
                        var o = r[0]
                          , c = o.indexOf(".");
                        if (c >= 0 && (n -= o.length - c - 1,
                        o = o.slice(0, c) + o.slice(c + 1)),
                        n < 0)
                            throw new Error("Cannot include negative exponent part for integers");
                        e = o += new Array(n + 1).join("0")
                    }
                    if (!/^([0-9][0-9]*)$/.test(e))
                        throw new Error("Invalid integer: " + e);
                    if (i)
                        return new u(BigInt(a ? "-" + e : e));
                    for (var f = [], p = e.length, m = p - 7; p > 0; )
                        f.push(+e.slice(m, p)),
                        (m -= 7) < 0 && (m = 0),
                        p -= 7;
                    return h(f),
                    new s(f,a)
                }
                function q(e) {
                    return "number" == typeof e ? function(e) {
                        if (i)
                            return new u(BigInt(e));
                        if (d(e)) {
                            if (e !== g(e))
                                throw new Error(e + " is not an integer.");
                            return new l(e)
                        }
                        return $(e.toString())
                    }(e) : "string" == typeof e ? $(e) : "bigint" == typeof e ? new u(e) : e
                }
                s.prototype.toArray = function(e) {
                    return V(this, e)
                }
                ,
                l.prototype.toArray = function(e) {
                    return V(this, e)
                }
                ,
                u.prototype.toArray = function(e) {
                    return V(this, e)
                }
                ,
                s.prototype.toString = function(e, t) {
                    if (void 0 === e && (e = 10),
                    10 !== e)
                        return K(this, e, t);
                    for (var a, r = this.value, n = r.length, i = String(r[--n]); --n >= 0; )
                        a = String(r[n]),
                        i += "0000000".slice(a.length) + a;
                    return (this.sign ? "-" : "") + i
                }
                ,
                l.prototype.toString = function(e, t) {
                    return void 0 === e && (e = 10),
                    10 != e ? K(this, e, t) : String(this.value)
                }
                ,
                u.prototype.toString = l.prototype.toString,
                u.prototype.toJSON = s.prototype.toJSON = l.prototype.toJSON = function() {
                    return this.toString()
                }
                ,
                s.prototype.valueOf = function() {
                    return parseInt(this.toString(), 10)
                }
                ,
                s.prototype.toJSNumber = s.prototype.valueOf,
                l.prototype.valueOf = function() {
                    return this.value
                }
                ,
                l.prototype.toJSNumber = l.prototype.valueOf,
                u.prototype.valueOf = u.prototype.toJSNumber = function() {
                    return parseInt(this.toString(), 10)
                }
                ;
                for (var H = 0; H < 1e3; H++)
                    o[H] = q(H),
                    H > 0 && (o[-H] = q(-H));
                return o.one = o[1],
                o.zero = o[0],
                o.minusOne = o[-1],
                o.max = U,
                o.min = F,
                o.gcd = B,
                o.lcm = function(e, t) {
                    return e = q(e).abs(),
                    t = q(t).abs(),
                    e.divide(B(e, t)).multiply(t)
                }
                ,
                o.isInstance = function(e) {
                    return e instanceof s || e instanceof l || e instanceof u
                }
                ,
                o.randBetween = function(e, a) {
                    var r = F(e = q(e), a = q(a))
                      , n = U(e, a).subtract(r).add(1);
                    if (n.isSmall)
                        return r.add(Math.floor(Math.random() * n));
                    for (var i = V(n, t).value, s = [], l = !0, u = 0; u < i.length; u++) {
                        var d = l ? i[u] : t
                          , c = g(Math.random() * d);
                        s.push(c),
                        c < d && (l = !1)
                    }
                    return r.add(o.fromArray(s, t, !1))
                }
                ,
                o.fromArray = function(e, t, a) {
                    return G(e.map(q), q(t || 10), a)
                }
                ,
                o
            }();
            e.hasOwnProperty("exports") && (e.exports = r),
            void 0 === (a = function() {
                return r
            }
            .apply(t, [])) || (e.exports = a)
        }
        ).call(this, a(421)(e))
    }
    , function(e, t) {
        e.exports = function(e) {
            return e.webpackPolyfill || (e.deprecate = function() {}
            ,
            e.paths = [],
            e.children || (e.children = []),
            Object.defineProperty(e, "loaded", {
                enumerable: !0,
                get: function() {
                    return e.l
                }
            }),
            Object.defineProperty(e, "id", {
                enumerable: !0,
                get: function() {
                    return e.i
                }
            }),
            e.webpackPolyfill = 1),
            e
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(35)
          , i = a(423)
          , o = a(232)
          , s = a(7)
          , l = 1..toFixed
          , u = Math.floor
          , d = function(e, t, a) {
            return 0 === t ? a : t % 2 == 1 ? d(e, t - 1, a * e) : d(e * e, t / 2, a)
        };
        r({
            target: "Number",
            proto: !0,
            forced: l && ("0.000" !== 8e-5.toFixed(3) || "1" !== .9.toFixed(0) || "1.25" !== 1.255.toFixed(2) || "1000000000000000128" !== (0xde0b6b3a7640080).toFixed(0)) || !s((function() {
                l.call({})
            }
            ))
        }, {
            toFixed: function(e) {
                var t, a, r, s, l = i(this), c = n(e), f = [0, 0, 0, 0, 0, 0], h = "", p = "0", g = function(e, t) {
                    for (var a = -1, r = t; ++a < 6; )
                        r += e * f[a],
                        f[a] = r % 1e7,
                        r = u(r / 1e7)
                }, m = function(e) {
                    for (var t = 6, a = 0; --t >= 0; )
                        a += f[t],
                        f[t] = u(a / e),
                        a = a % e * 1e7
                }, y = function() {
                    for (var e = 6, t = ""; --e >= 0; )
                        if ("" !== t || 0 === e || 0 !== f[e]) {
                            var a = String(f[e]);
                            t = "" === t ? a : t + o.call("0", 7 - a.length) + a
                        }
                    return t
                };
                if (c < 0 || c > 20)
                    throw RangeError("Incorrect fraction digits");
                if (l != l)
                    return "NaN";
                if (l <= -1e21 || l >= 1e21)
                    return String(l);
                if (l < 0 && (h = "-",
                l = -l),
                l > 1e-21)
                    if (a = (t = function(e) {
                        for (var t = 0, a = e; a >= 4096; )
                            t += 12,
                            a /= 4096;
                        for (; a >= 2; )
                            t += 1,
                            a /= 2;
                        return t
                    }(l * d(2, 69, 1)) - 69) < 0 ? l * d(2, -t, 1) : l / d(2, t, 1),
                    a *= 4503599627370496,
                    (t = 52 - t) > 0) {
                        for (g(0, a),
                        r = c; r >= 7; )
                            g(1e7, 0),
                            r -= 7;
                        for (g(d(10, r, 1), 0),
                        r = t - 1; r >= 23; )
                            m(1 << 23),
                            r -= 23;
                        m(1 << r),
                        g(1, 1),
                        m(2),
                        p = y()
                    } else
                        g(0, a),
                        g(1 << -t, 0),
                        p = y() + o.call("0", c);
                return p = c > 0 ? h + ((s = p.length) <= c ? "0." + o.call("0", c - s) + p : p.slice(0, s - c) + "." + p.slice(s - c)) : h + p
            }
        })
    }
    , function(e, t, a) {
        var r = a(45);
        e.exports = function(e) {
            if ("number" != typeof e && "Number" != r(e))
                throw TypeError("Incorrect invocation");
            return +e
        }
    }
    , function(e, t, a) {
        "use strict";
        a(70);
        var r = a(27)
          , n = a(7)
          , i = a(11)
          , o = a(156)
          , s = a(26)
          , l = i("species")
          , u = !n((function() {
            var e = /./;
            return e.exec = function() {
                var e = [];
                return e.groups = {
                    a: "7"
                },
                e
            }
            ,
            "7" !== "".replace(e, "$<a>")
        }
        ))
          , d = "$0" === "a".replace(/./, "$0")
          , c = i("replace")
          , f = !!/./[c] && "" === /./[c]("a", "$0")
          , h = !n((function() {
            var e = /(?:)/
              , t = e.exec;
            e.exec = function() {
                return t.apply(this, arguments)
            }
            ;
            var a = "ab".split(e);
            return 2 !== a.length || "a" !== a[0] || "b" !== a[1]
        }
        ));
        e.exports = function(e, t, a, c) {
            var p = i(e)
              , g = !n((function() {
                var t = {};
                return t[p] = function() {
                    return 7
                }
                ,
                7 != ""[e](t)
            }
            ))
              , m = g && !n((function() {
                var t = !1
                  , a = /a/;
                return "split" === e && ((a = {}).constructor = {},
                a.constructor[l] = function() {
                    return a
                }
                ,
                a.flags = "",
                a[p] = /./[p]),
                a.exec = function() {
                    return t = !0,
                    null
                }
                ,
                a[p](""),
                !t
            }
            ));
            if (!g || !m || "replace" === e && (!u || !d || f) || "split" === e && !h) {
                var y = /./[p]
                  , _ = a(p, ""[e], (function(e, t, a, r, n) {
                    return t.exec === o ? g && !n ? {
                        done: !0,
                        value: y.call(t, a, r)
                    } : {
                        done: !0,
                        value: e.call(a, t, r)
                    } : {
                        done: !1
                    }
                }
                ), {
                    REPLACE_KEEPS_$0: d,
                    REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: f
                })
                  , v = _[0]
                  , b = _[1];
                r(String.prototype, e, v),
                r(RegExp.prototype, p, 2 == t ? function(e, t) {
                    return b.call(e, this, t)
                }
                : function(e) {
                    return b.call(e, this)
                }
                )
            }
            c && s(RegExp.prototype[p], "sham", !0)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(157).charAt;
        e.exports = function(e, t, a) {
            return t + (a ? r(e, t).length : 1)
        }
    }
    , function(e, t, a) {
        var r = a(45)
          , n = a(156);
        e.exports = function(e, t) {
            var a = e.exec;
            if ("function" == typeof a) {
                var i = a.call(e, t);
                if ("object" != typeof i)
                    throw TypeError("RegExp exec method returned something other than an Object or null");
                return i
            }
            if ("RegExp" !== r(e))
                throw TypeError("RegExp#exec called on incompatible receiver");
            return n.call(e, t)
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(78).includes
          , i = a(152);
        r({
            target: "Array",
            proto: !0,
            forced: !a(38)("indexOf", {
                ACCESSORS: !0,
                1: 0
            })
        }, {
            includes: function(e) {
                return n(this, e, arguments.length > 1 ? arguments[1] : void 0)
            }
        }),
        i("includes")
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(234)
          , i = a(42);
        r({
            target: "String",
            proto: !0,
            forced: !a(235)("includes")
        }, {
            includes: function(e) {
                return !!~String(i(this)).indexOf(n(e), arguments.length > 1 ? arguments[1] : void 0)
            }
        })
    }
    , function(e, t, a) {
        var r = a(13)
          , n = a(45)
          , i = a(11)("match");
        e.exports = function(e) {
            var t;
            return r(e) && (void 0 !== (t = e[i]) ? !!t : "RegExp" == n(e))
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(23).find
          , i = a(152)
          , o = a(38)
          , s = !0
          , l = o("find");
        "find"in [] && Array(1).find((function() {
            s = !1
        }
        )),
        r({
            target: "Array",
            proto: !0,
            forced: s || !l
        }, {
            find: function(e) {
                return n(this, e, arguments.length > 1 ? arguments[1] : void 0)
            }
        }),
        i("find")
    }
    , function(e, t) {
        var a = Math.abs
          , r = Math.pow
          , n = Math.floor
          , i = Math.log
          , o = Math.LN2;
        e.exports = {
            pack: function(e, t, s) {
                var l, u, d, c = new Array(s), f = 8 * s - t - 1, h = (1 << f) - 1, p = h >> 1, g = 23 === t ? r(2, -24) - r(2, -77) : 0, m = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0, y = 0;
                for ((e = a(e)) != e || e === 1 / 0 ? (u = e != e ? 1 : 0,
                l = h) : (l = n(i(e) / o),
                e * (d = r(2, -l)) < 1 && (l--,
                d *= 2),
                (e += l + p >= 1 ? g / d : g * r(2, 1 - p)) * d >= 2 && (l++,
                d /= 2),
                l + p >= h ? (u = 0,
                l = h) : l + p >= 1 ? (u = (e * d - 1) * r(2, t),
                l += p) : (u = e * r(2, p - 1) * r(2, t),
                l = 0)); t >= 8; c[y++] = 255 & u,
                u /= 256,
                t -= 8)
                    ;
                for (l = l << t | u,
                f += t; f > 0; c[y++] = 255 & l,
                l /= 256,
                f -= 8)
                    ;
                return c[--y] |= 128 * m,
                c
            },
            unpack: function(e, t) {
                var a, n = e.length, i = 8 * n - t - 1, o = (1 << i) - 1, s = o >> 1, l = i - 7, u = n - 1, d = e[u--], c = 127 & d;
                for (d >>= 7; l > 0; c = 256 * c + e[u],
                u--,
                l -= 8)
                    ;
                for (a = c & (1 << -l) - 1,
                c >>= -l,
                l += t; l > 0; a = 256 * a + e[u],
                u--,
                l -= 8)
                    ;
                if (0 === c)
                    c = 1 - s;
                else {
                    if (c === o)
                        return a ? NaN : d ? -1 / 0 : 1 / 0;
                    a += r(2, t),
                    c -= s
                }
                return (d ? -1 : 1) * a * r(2, c - t)
            }
        }
    }
    , function(e, t, a) {
        var r = a(35);
        e.exports = function(e) {
            var t = r(e);
            if (t < 0)
                throw RangeError("The argument can't be less than 0");
            return t
        }
    }
    , function(e, t, a) {
        var r = a(22)
          , n = a(14)
          , i = a(82)
          , o = a(150)
          , s = a(59)
          , l = a(10).aTypedArrayConstructor;
        e.exports = function(e) {
            var t, a, u, d, c, f, h = r(e), p = arguments.length, g = p > 1 ? arguments[1] : void 0, m = void 0 !== g, y = i(h);
            if (null != y && !o(y))
                for (f = (c = y.call(h)).next,
                h = []; !(d = f.call(c)).done; )
                    h.push(d.value);
            for (m && p > 2 && (g = s(g, arguments[2], 2)),
            a = n(h.length),
            u = new (l(this))(a),
            t = 0; a > t; t++)
                u[t] = m ? g(h[t], t) : h[t];
            return u
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(22)
          , n = a(65)
          , i = a(14)
          , o = Math.min;
        e.exports = [].copyWithin || function(e, t) {
            var a = r(this)
              , s = i(a.length)
              , l = n(e, s)
              , u = n(t, s)
              , d = arguments.length > 2 ? arguments[2] : void 0
              , c = o((void 0 === d ? s : n(d, s)) - u, s - l)
              , f = 1;
            for (u < l && l < u + c && (f = -1,
            u += c - 1,
            l += c - 1); c-- > 0; )
                u in a ? a[l] = a[u] : delete a[l],
                l += f,
                u += f;
            return a
        }
    }
    , function(e, t, a) {
        "use strict";
        var r = a(33)
          , n = a(35)
          , i = a(14)
          , o = a(80)
          , s = a(38)
          , l = Math.min
          , u = [].lastIndexOf
          , d = !!u && 1 / [1].lastIndexOf(1, -0) < 0
          , c = o("lastIndexOf")
          , f = s("indexOf", {
            ACCESSORS: !0,
            1: 0
        })
          , h = d || !c || !f;
        e.exports = h ? function(e) {
            if (d)
                return u.apply(this, arguments) || 0;
            var t = r(this)
              , a = i(t.length)
              , o = a - 1;
            for (arguments.length > 1 && (o = l(o, n(arguments[1]))),
            o < 0 && (o = a + o); o >= 0; o--)
                if (o in t && t[o] === e)
                    return o || 0;
            return -1
        }
        : u
    }
    , function(e, t, a) {
        "use strict";
        var r = a(10)
          , n = a(240)
          , i = r.aTypedArrayConstructor;
        (0,
        r.exportTypedArrayStaticMethod)("of", (function() {
            for (var e = 0, t = arguments.length, a = new (i(this))(t); t > e; )
                a[e] = arguments[e++];
            return a
        }
        ), n)
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(6)
          , i = a(179)
          , o = a(104)
          , s = i.ArrayBuffer;
        r({
            global: !0,
            forced: n.ArrayBuffer !== s
        }, {
            ArrayBuffer: s
        }),
        o("ArrayBuffer")
    }
    , function(e, t, a) {
        "use strict";
        var r, n = a(5), i = a(41).f, o = a(14), s = a(234), l = a(42), u = a(235), d = a(58), c = "".startsWith, f = Math.min, h = u("startsWith");
        n({
            target: "String",
            proto: !0,
            forced: !!(d || h || (r = i(String.prototype, "startsWith"),
            !r || r.writable)) && !h
        }, {
            startsWith: function(e) {
                var t = String(l(this));
                s(e);
                var a = o(f(arguments.length > 1 ? arguments[1] : void 0, t.length))
                  , r = String(e);
                return c ? c.call(t, r, a) : t.slice(a, a + r.length) === r
            }
        })
    }
    , function(e, t, a) {
        a(239)("Uint16", (function(e) {
            return function(t, a, r) {
                return e(this, t, a, r)
            }
        }
        ))
    }
    , function(e, t, a) {
        "use strict";
        var r = a(5)
          , n = a(441).start;
        r({
            target: "String",
            proto: !0,
            forced: a(442)
        }, {
            padStart: function(e) {
                return n(this, e, arguments.length > 1 ? arguments[1] : void 0)
            }
        })
    }
    , function(e, t, a) {
        var r = a(14)
          , n = a(232)
          , i = a(42)
          , o = Math.ceil
          , s = function(e) {
            return function(t, a, s) {
                var l, u, d = String(i(t)), c = d.length, f = void 0 === s ? " " : String(s), h = r(a);
                return h <= c || "" == f ? d : (l = h - c,
                (u = n.call(f, o(l / f.length))).length > l && (u = u.slice(0, l)),
                e ? d + u : u + d)
            }
        };
        e.exports = {
            start: s(!1),
            end: s(!0)
        }
    }
    , function(e, t, a) {
        var r = a(149);
        e.exports = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)
    }
    , function(e, t, a) {
        "use strict";
        a(30);
        var r, n = a(5), i = a(15), o = a(242), s = a(6), l = a(186), u = a(27), d = a(61), c = a(16), f = a(444), h = a(192), p = a(157).codeAt, g = a(445), m = a(48), y = a(446), _ = a(34), v = s.URL, b = y.URLSearchParams, E = y.getState, k = _.set, T = _.getterFor("URL"), S = Math.floor, A = Math.pow, C = /[A-Za-z]/, I = /[\d+-.A-Za-z]/, P = /\d/, w = /^(0x|0X)/, M = /^[0-7]+$/, R = /^\d+$/, x = /^[\dA-Fa-f]+$/, D = /[\u0000\u0009\u000A\u000D #%/:?@[\\]]/, O = /[\u0000\u0009\u000A\u000D #/:?@[\\]]/, N = /^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g, L = /[\u0009\u000A\u000D]/g, U = function(e, t) {
            var a, r, n;
            if ("[" == t.charAt(0)) {
                if ("]" != t.charAt(t.length - 1))
                    return "Invalid host";
                if (!(a = B(t.slice(1, -1))))
                    return "Invalid host";
                e.host = a
            } else if (W(e)) {
                if (t = g(t),
                D.test(t))
                    return "Invalid host";
                if (null === (a = F(t)))
                    return "Invalid host";
                e.host = a
            } else {
                if (O.test(t))
                    return "Invalid host";
                for (a = "",
                r = h(t),
                n = 0; n < r.length; n++)
                    a += q(r[n], G);
                e.host = a
            }
        }, F = function(e) {
            var t, a, r, n, i, o, s, l = e.split(".");
            if (l.length && "" == l[l.length - 1] && l.pop(),
            (t = l.length) > 4)
                return e;
            for (a = [],
            r = 0; r < t; r++) {
                if ("" == (n = l[r]))
                    return e;
                if (i = 10,
                n.length > 1 && "0" == n.charAt(0) && (i = w.test(n) ? 16 : 8,
                n = n.slice(8 == i ? 1 : 2)),
                "" === n)
                    o = 0;
                else {
                    if (!(10 == i ? R : 8 == i ? M : x).test(n))
                        return e;
                    o = parseInt(n, i)
                }
                a.push(o)
            }
            for (r = 0; r < t; r++)
                if (o = a[r],
                r == t - 1) {
                    if (o >= A(256, 5 - t))
                        return null
                } else if (o > 255)
                    return null;
            for (s = a.pop(),
            r = 0; r < a.length; r++)
                s += a[r] * A(256, 3 - r);
            return s
        }, B = function(e) {
            var t, a, r, n, i, o, s, l = [0, 0, 0, 0, 0, 0, 0, 0], u = 0, d = null, c = 0, f = function() {
                return e.charAt(c)
            };
            if (":" == f()) {
                if (":" != e.charAt(1))
                    return;
                c += 2,
                d = ++u
            }
            for (; f(); ) {
                if (8 == u)
                    return;
                if (":" != f()) {
                    for (t = a = 0; a < 4 && x.test(f()); )
                        t = 16 * t + parseInt(f(), 16),
                        c++,
                        a++;
                    if ("." == f()) {
                        if (0 == a)
                            return;
                        if (c -= a,
                        u > 6)
                            return;
                        for (r = 0; f(); ) {
                            if (n = null,
                            r > 0) {
                                if (!("." == f() && r < 4))
                                    return;
                                c++
                            }
                            if (!P.test(f()))
                                return;
                            for (; P.test(f()); ) {
                                if (i = parseInt(f(), 10),
                                null === n)
                                    n = i;
                                else {
                                    if (0 == n)
                                        return;
                                    n = 10 * n + i
                                }
                                if (n > 255)
                                    return;
                                c++
                            }
                            l[u] = 256 * l[u] + n,
                            2 != ++r && 4 != r || u++
                        }
                        if (4 != r)
                            return;
                        break
                    }
                    if (":" == f()) {
                        if (c++,
                        !f())
                            return
                    } else if (f())
                        return;
                    l[u++] = t
                } else {
                    if (null !== d)
                        return;
                    c++,
                    d = ++u
                }
            }
            if (null !== d)
                for (o = u - d,
                u = 7; 0 != u && o > 0; )
                    s = l[u],
                    l[u--] = l[d + o - 1],
                    l[d + --o] = s;
            else if (8 != u)
                return;
            return l
        }, j = function(e) {
            var t, a, r, n;
            if ("number" == typeof e) {
                for (t = [],
                a = 0; a < 4; a++)
                    t.unshift(e % 256),
                    e = S(e / 256);
                return t.join(".")
            }
            if ("object" == typeof e) {
                for (t = "",
                r = function(e) {
                    for (var t = null, a = 1, r = null, n = 0, i = 0; i < 8; i++)
                        0 !== e[i] ? (n > a && (t = r,
                        a = n),
                        r = null,
                        n = 0) : (null === r && (r = i),
                        ++n);
                    return n > a && (t = r,
                    a = n),
                    t
                }(e),
                a = 0; a < 8; a++)
                    n && 0 === e[a] || (n && (n = !1),
                    r === a ? (t += a ? ":" : "::",
                    n = !0) : (t += e[a].toString(16),
                    a < 7 && (t += ":")));
                return "[" + t + "]"
            }
            return e
        }, G = {}, V = f({}, G, {
            " ": 1,
            '"': 1,
            "<": 1,
            ">": 1,
            "`": 1
        }), K = f({}, V, {
            "#": 1,
            "?": 1,
            "{": 1,
            "}": 1
        }), $ = f({}, K, {
            "/": 1,
            ":": 1,
            ";": 1,
            "=": 1,
            "@": 1,
            "[": 1,
            "\\": 1,
            "]": 1,
            "^": 1,
            "|": 1
        }), q = function(e, t) {
            var a = p(e, 0);
            return a > 32 && a < 127 && !c(t, e) ? e : encodeURIComponent(e)
        }, H = {
            ftp: 21,
            file: null,
            http: 80,
            https: 443,
            ws: 80,
            wss: 443
        }, W = function(e) {
            return c(H, e.scheme)
        }, Y = function(e) {
            return "" != e.username || "" != e.password
        }, z = function(e) {
            return !e.host || e.cannotBeABaseURL || "file" == e.scheme
        }, X = function(e, t) {
            var a;
            return 2 == e.length && C.test(e.charAt(0)) && (":" == (a = e.charAt(1)) || !t && "|" == a)
        }, Q = function(e) {
            var t;
            return e.length > 1 && X(e.slice(0, 2)) && (2 == e.length || "/" === (t = e.charAt(2)) || "\\" === t || "?" === t || "#" === t)
        }, J = function(e) {
            var t = e.path
              , a = t.length;
            !a || "file" == e.scheme && 1 == a && X(t[0], !0) || t.pop()
        }, Z = function(e) {
            return "." === e || "%2e" === e.toLowerCase()
        }, ee = {}, te = {}, ae = {}, re = {}, ne = {}, ie = {}, oe = {}, se = {}, le = {}, ue = {}, de = {}, ce = {}, fe = {}, he = {}, pe = {}, ge = {}, me = {}, ye = {}, _e = {}, ve = {}, be = {}, Ee = function(e, t, a, n) {
            var i, o, s, l, u, d = a || ee, f = 0, p = "", g = !1, m = !1, y = !1;
            for (a || (e.scheme = "",
            e.username = "",
            e.password = "",
            e.host = null,
            e.port = null,
            e.path = [],
            e.query = null,
            e.fragment = null,
            e.cannotBeABaseURL = !1,
            t = t.replace(N, "")),
            t = t.replace(L, ""),
            i = h(t); f <= i.length; ) {
                switch (o = i[f],
                d) {
                case ee:
                    if (!o || !C.test(o)) {
                        if (a)
                            return "Invalid scheme";
                        d = ae;
                        continue
                    }
                    p += o.toLowerCase(),
                    d = te;
                    break;
                case te:
                    if (o && (I.test(o) || "+" == o || "-" == o || "." == o))
                        p += o.toLowerCase();
                    else {
                        if (":" != o) {
                            if (a)
                                return "Invalid scheme";
                            p = "",
                            d = ae,
                            f = 0;
                            continue
                        }
                        if (a && (W(e) != c(H, p) || "file" == p && (Y(e) || null !== e.port) || "file" == e.scheme && !e.host))
                            return;
                        if (e.scheme = p,
                        a)
                            return void (W(e) && H[e.scheme] == e.port && (e.port = null));
                        p = "",
                        "file" == e.scheme ? d = he : W(e) && n && n.scheme == e.scheme ? d = re : W(e) ? d = se : "/" == i[f + 1] ? (d = ne,
                        f++) : (e.cannotBeABaseURL = !0,
                        e.path.push(""),
                        d = _e)
                    }
                    break;
                case ae:
                    if (!n || n.cannotBeABaseURL && "#" != o)
                        return "Invalid scheme";
                    if (n.cannotBeABaseURL && "#" == o) {
                        e.scheme = n.scheme,
                        e.path = n.path.slice(),
                        e.query = n.query,
                        e.fragment = "",
                        e.cannotBeABaseURL = !0,
                        d = be;
                        break
                    }
                    d = "file" == n.scheme ? he : ie;
                    continue;
                case re:
                    if ("/" != o || "/" != i[f + 1]) {
                        d = ie;
                        continue
                    }
                    d = le,
                    f++;
                    break;
                case ne:
                    if ("/" == o) {
                        d = ue;
                        break
                    }
                    d = ye;
                    continue;
                case ie:
                    if (e.scheme = n.scheme,
                    o == r)
                        e.username = n.username,
                        e.password = n.password,
                        e.host = n.host,
                        e.port = n.port,
                        e.path = n.path.slice(),
                        e.query = n.query;
                    else if ("/" == o || "\\" == o && W(e))
                        d = oe;
                    else if ("?" == o)
                        e.username = n.username,
                        e.password = n.password,
                        e.host = n.host,
                        e.port = n.port,
                        e.path = n.path.slice(),
                        e.query = "",
                        d = ve;
                    else {
                        if ("#" != o) {
                            e.username = n.username,
                            e.password = n.password,
                            e.host = n.host,
                            e.port = n.port,
                            e.path = n.path.slice(),
                            e.path.pop(),
                            d = ye;
                            continue
                        }
                        e.username = n.username,
                        e.password = n.password,
                        e.host = n.host,
                        e.port = n.port,
                        e.path = n.path.slice(),
                        e.query = n.query,
                        e.fragment = "",
                        d = be
                    }
                    break;
                case oe:
                    if (!W(e) || "/" != o && "\\" != o) {
                        if ("/" != o) {
                            e.username = n.username,
                            e.password = n.password,
                            e.host = n.host,
                            e.port = n.port,
                            d = ye;
                            continue
                        }
                        d = ue
                    } else
                        d = le;
                    break;
                case se:
                    if (d = le,
                    "/" != o || "/" != p.charAt(f + 1))
                        continue;
                    f++;
                    break;
                case le:
                    if ("/" != o && "\\" != o) {
                        d = ue;
                        continue
                    }
                    break;
                case ue:
                    if ("@" == o) {
                        g && (p = "%40" + p),
                        g = !0,
                        s = h(p);
                        for (var _ = 0; _ < s.length; _++) {
                            var v = s[_];
                            if (":" != v || y) {
                                var b = q(v, $);
                                y ? e.password += b : e.username += b
                            } else
                                y = !0
                        }
                        p = ""
                    } else if (o == r || "/" == o || "?" == o || "#" == o || "\\" == o && W(e)) {
                        if (g && "" == p)
                            return "Invalid authority";
                        f -= h(p).length + 1,
                        p = "",
                        d = de
                    } else
                        p += o;
                    break;
                case de:
                case ce:
                    if (a && "file" == e.scheme) {
                        d = ge;
                        continue
                    }
                    if (":" != o || m) {
                        if (o == r || "/" == o || "?" == o || "#" == o || "\\" == o && W(e)) {
                            if (W(e) && "" == p)
                                return "Invalid host";
                            if (a && "" == p && (Y(e) || null !== e.port))
                                return;
                            if (l = U(e, p))
                                return l;
                            if (p = "",
                            d = me,
                            a)
                                return;
                            continue
                        }
                        "[" == o ? m = !0 : "]" == o && (m = !1),
                        p += o
                    } else {
                        if ("" == p)
                            return "Invalid host";
                        if (l = U(e, p))
                            return l;
                        if (p = "",
                        d = fe,
                        a == ce)
                            return
                    }
                    break;
                case fe:
                    if (!P.test(o)) {
                        if (o == r || "/" == o || "?" == o || "#" == o || "\\" == o && W(e) || a) {
                            if ("" != p) {
                                var E = parseInt(p, 10);
                                if (E > 65535)
                                    return "Invalid port";
                                e.port = W(e) && E === H[e.scheme] ? null : E,
                                p = ""
                            }
                            if (a)
                                return;
                            d = me;
                            continue
                        }
                        return "Invalid port"
                    }
                    p += o;
                    break;
                case he:
                    if (e.scheme = "file",
                    "/" == o || "\\" == o)
                        d = pe;
                    else {
                        if (!n || "file" != n.scheme) {
                            d = ye;
                            continue
                        }
                        if (o == r)
                            e.host = n.host,
                            e.path = n.path.slice(),
                            e.query = n.query;
                        else if ("?" == o)
                            e.host = n.host,
                            e.path = n.path.slice(),
                            e.query = "",
                            d = ve;
                        else {
                            if ("#" != o) {
                                Q(i.slice(f).join("")) || (e.host = n.host,
                                e.path = n.path.slice(),
                                J(e)),
                                d = ye;
                                continue
                            }
                            e.host = n.host,
                            e.path = n.path.slice(),
                            e.query = n.query,
                            e.fragment = "",
                            d = be
                        }
                    }
                    break;
                case pe:
                    if ("/" == o || "\\" == o) {
                        d = ge;
                        break
                    }
                    n && "file" == n.scheme && !Q(i.slice(f).join("")) && (X(n.path[0], !0) ? e.path.push(n.path[0]) : e.host = n.host),
                    d = ye;
                    continue;
                case ge:
                    if (o == r || "/" == o || "\\" == o || "?" == o || "#" == o) {
                        if (!a && X(p))
                            d = ye;
                        else if ("" == p) {
                            if (e.host = "",
                            a)
                                return;
                            d = me
                        } else {
                            if (l = U(e, p))
                                return l;
                            if ("localhost" == e.host && (e.host = ""),
                            a)
                                return;
                            p = "",
                            d = me
                        }
                        continue
                    }
                    p += o;
                    break;
                case me:
                    if (W(e)) {
                        if (d = ye,
                        "/" != o && "\\" != o)
                            continue
                    } else if (a || "?" != o)
                        if (a || "#" != o) {
                            if (o != r && (d = ye,
                            "/" != o))
                                continue
                        } else
                            e.fragment = "",
                            d = be;
                    else
                        e.query = "",
                        d = ve;
                    break;
                case ye:
                    if (o == r || "/" == o || "\\" == o && W(e) || !a && ("?" == o || "#" == o)) {
                        if (".." === (u = (u = p).toLowerCase()) || "%2e." === u || ".%2e" === u || "%2e%2e" === u ? (J(e),
                        "/" == o || "\\" == o && W(e) || e.path.push("")) : Z(p) ? "/" == o || "\\" == o && W(e) || e.path.push("") : ("file" == e.scheme && !e.path.length && X(p) && (e.host && (e.host = ""),
                        p = p.charAt(0) + ":"),
                        e.path.push(p)),
                        p = "",
                        "file" == e.scheme && (o == r || "?" == o || "#" == o))
                            for (; e.path.length > 1 && "" === e.path[0]; )
                                e.path.shift();
                        "?" == o ? (e.query = "",
                        d = ve) : "#" == o && (e.fragment = "",
                        d = be)
                    } else
                        p += q(o, K);
                    break;
                case _e:
                    "?" == o ? (e.query = "",
                    d = ve) : "#" == o ? (e.fragment = "",
                    d = be) : o != r && (e.path[0] += q(o, G));
                    break;
                case ve:
                    a || "#" != o ? o != r && ("'" == o && W(e) ? e.query += "%27" : e.query += "#" == o ? "%23" : q(o, G)) : (e.fragment = "",
                    d = be);
                    break;
                case be:
                    o != r && (e.fragment += q(o, V))
                }
                f++
            }
        }, ke = function(e) {
            var t, a, r = d(this, ke, "URL"), n = arguments.length > 1 ? arguments[1] : void 0, o = String(e), s = k(r, {
                type: "URL"
            });
            if (void 0 !== n)
                if (n instanceof ke)
                    t = T(n);
                else if (a = Ee(t = {}, String(n)))
                    throw TypeError(a);
            if (a = Ee(s, o, null, t))
                throw TypeError(a);
            var l = s.searchParams = new b
              , u = E(l);
            u.updateSearchParams(s.query),
            u.updateURL = function() {
                s.query = String(l) || null
            }
            ,
            i || (r.href = Se.call(r),
            r.origin = Ae.call(r),
            r.protocol = Ce.call(r),
            r.username = Ie.call(r),
            r.password = Pe.call(r),
            r.host = we.call(r),
            r.hostname = Me.call(r),
            r.port = Re.call(r),
            r.pathname = xe.call(r),
            r.search = De.call(r),
            r.searchParams = Oe.call(r),
            r.hash = Ne.call(r))
        }, Te = ke.prototype, Se = function() {
            var e = T(this)
              , t = e.scheme
              , a = e.username
              , r = e.password
              , n = e.host
              , i = e.port
              , o = e.path
              , s = e.query
              , l = e.fragment
              , u = t + ":";
            return null !== n ? (u += "//",
            Y(e) && (u += a + (r ? ":" + r : "") + "@"),
            u += j(n),
            null !== i && (u += ":" + i)) : "file" == t && (u += "//"),
            u += e.cannotBeABaseURL ? o[0] : o.length ? "/" + o.join("/") : "",
            null !== s && (u += "?" + s),
            null !== l && (u += "#" + l),
            u
        }, Ae = function() {
            var e = T(this)
              , t = e.scheme
              , a = e.port;
            if ("blob" == t)
                try {
                    return new URL(t.path[0]).origin
                } catch (e) {
                    return "null"
                }
            return "file" != t && W(e) ? t + "://" + j(e.host) + (null !== a ? ":" + a : "") : "null"
        }, Ce = function() {
            return T(this).scheme + ":"
        }, Ie = function() {
            return T(this).username
        }, Pe = function() {
            return T(this).password
        }, we = function() {
            var e = T(this)
              , t = e.host
              , a = e.port;
            return null === t ? "" : null === a ? j(t) : j(t) + ":" + a
        }, Me = function() {
            var e = T(this).host;
            return null === e ? "" : j(e)
        }, Re = function() {
            var e = T(this).port;
            return null === e ? "" : String(e)
        }, xe = function() {
            var e = T(this)
              , t = e.path;
            return e.cannotBeABaseURL ? t[0] : t.length ? "/" + t.join("/") : ""
        }, De = function() {
            var e = T(this).query;
            return e ? "?" + e : ""
        }, Oe = function() {
            return T(this).searchParams
        }, Ne = function() {
            var e = T(this).fragment;
            return e ? "#" + e : ""
        }, Le = function(e, t) {
            return {
                get: e,
                set: t,
                configurable: !0,
                enumerable: !0
            }
        };
        if (i && l(Te, {
            href: Le(Se, (function(e) {
                var t = T(this)
                  , a = String(e)
                  , r = Ee(t, a);
                if (r)
                    throw TypeError(r);
                E(t.searchParams).updateSearchParams(t.query)
            }
            )),
            origin: Le(Ae),
            protocol: Le(Ce, (function(e) {
                var t = T(this);
                Ee(t, String(e) + ":", ee)
            }
            )),
            username: Le(Ie, (function(e) {
                var t = T(this)
                  , a = h(String(e));
                if (!z(t)) {
                    t.username = "";
                    for (var r = 0; r < a.length; r++)
                        t.username += q(a[r], $)
                }
            }
            )),
            password: Le(Pe, (function(e) {
                var t = T(this)
                  , a = h(String(e));
                if (!z(t)) {
                    t.password = "";
                    for (var r = 0; r < a.length; r++)
                        t.password += q(a[r], $)
                }
            }
            )),
            host: Le(we, (function(e) {
                var t = T(this);
                t.cannotBeABaseURL || Ee(t, String(e), de)
            }
            )),
            hostname: Le(Me, (function(e) {
                var t = T(this);
                t.cannotBeABaseURL || Ee(t, String(e), ce)
            }
            )),
            port: Le(Re, (function(e) {
                var t = T(this);
                z(t) || ("" == (e = String(e)) ? t.port = null : Ee(t, e, fe))
            }
            )),
            pathname: Le(xe, (function(e) {
                var t = T(this);
                t.cannotBeABaseURL || (t.path = [],
                Ee(t, e + "", me))
            }
            )),
            search: Le(De, (function(e) {
                var t = T(this);
                "" == (e = String(e)) ? t.query = null : ("?" == e.charAt(0) && (e = e.slice(1)),
                t.query = "",
                Ee(t, e, ve)),
                E(t.searchParams).updateSearchParams(t.query)
            }
            )),
            searchParams: Le(Oe),
            hash: Le(Ne, (function(e) {
                var t = T(this);
                "" != (e = String(e)) ? ("#" == e.charAt(0) && (e = e.slice(1)),
                t.fragment = "",
                Ee(t, e, be)) : t.fragment = null
            }
            ))
        }),
        u(Te, "toJSON", (function() {
            return Se.call(this)
        }
        ), {
            enumerable: !0
        }),
        u(Te, "toString", (function() {
            return Se.call(this)
        }
        ), {
            enumerable: !0
        }),
        v) {
            var Ue = v.createObjectURL
              , Fe = v.revokeObjectURL;
            Ue && u(ke, "createObjectURL", (function(e) {
                return Ue.apply(v, arguments)
            }
            )),
            Fe && u(ke, "revokeObjectURL", (function(e) {
                return Fe.apply(v, arguments)
            }
            ))
        }
        m(ke, "URL"),
        n({
            global: !0,
            forced: !o,
            sham: !i
        }, {
            URL: ke
        })
    }
    , function(e, t, a) {
        "use strict";
        var r = a(15)
          , n = a(7)
          , i = a(96)
          , o = a(147)
          , s = a(140)
          , l = a(22)
          , u = a(92)
          , d = Object.assign
          , c = Object.defineProperty;
        e.exports = !d || n((function() {
            if (r && 1 !== d({
                b: 1
            }, d(c({}, "a", {
                enumerable: !0,
                get: function() {
                    c(this, "b", {
                        value: 3,
                        enumerable: !1
                    })
                }
            }), {
                b: 2
            })).b)
                return !0;
            var e = {}
              , t = {}
              , a = Symbol();
            return e[a] = 7,
            "abcdefghijklmnopqrst".split("").forEach((function(e) {
                t[e] = e
            }
            )),
            7 != d({}, e)[a] || "abcdefghijklmnopqrst" != i(d({}, t)).join("")
        }
        )) ? function(e, t) {
            for (var a = l(e), n = arguments.length, d = 1, c = o.f, f = s.f; n > d; )
                for (var h, p = u(arguments[d++]), g = c ? i(p).concat(c(p)) : i(p), m = g.length, y = 0; m > y; )
                    h = g[y++],
                    r && !f.call(p, h) || (a[h] = p[h]);
            return a
        }
        : d
    }
    , function(e, t, a) {
        "use strict";
        var r = /[^\0-\u007E]/
          , n = /[.\u3002\uFF0E\uFF61]/g
          , i = "Overflow: input needs wider integers to process"
          , o = Math.floor
          , s = String.fromCharCode
          , l = function(e) {
            return e + 22 + 75 * (e < 26)
        }
          , u = function(e, t, a) {
            var r = 0;
            for (e = a ? o(e / 700) : e >> 1,
            e += o(e / t); e > 455; r += 36)
                e = o(e / 35);
            return o(r + 36 * e / (e + 38))
        }
          , d = function(e) {
            var t, a, r = [], n = (e = function(e) {
                for (var t = [], a = 0, r = e.length; a < r; ) {
                    var n = e.charCodeAt(a++);
                    if (n >= 55296 && n <= 56319 && a < r) {
                        var i = e.charCodeAt(a++);
                        56320 == (64512 & i) ? t.push(((1023 & n) << 10) + (1023 & i) + 65536) : (t.push(n),
                        a--)
                    } else
                        t.push(n)
                }
                return t
            }(e)).length, d = 128, c = 0, f = 72;
            for (t = 0; t < e.length; t++)
                (a = e[t]) < 128 && r.push(s(a));
            var h = r.length
              , p = h;
            for (h && r.push("-"); p < n; ) {
                var g = 2147483647;
                for (t = 0; t < e.length; t++)
                    (a = e[t]) >= d && a < g && (g = a);
                var m = p + 1;
                if (g - d > o((2147483647 - c) / m))
                    throw RangeError(i);
                for (c += (g - d) * m,
                d = g,
                t = 0; t < e.length; t++) {
                    if ((a = e[t]) < d && ++c > 2147483647)
                        throw RangeError(i);
                    if (a == d) {
                        for (var y = c, _ = 36; ; _ += 36) {
                            var v = _ <= f ? 1 : _ >= f + 26 ? 26 : _ - f;
                            if (y < v)
                                break;
                            var b = y - v
                              , E = 36 - v;
                            r.push(s(l(v + b % E))),
                            y = o(b / E)
                        }
                        r.push(s(l(y))),
                        f = u(c, m, p == h),
                        c = 0,
                        ++p
                    }
                }
                ++c,
                ++d
            }
            return r.join("")
        };
        e.exports = function(e) {
            var t, a, i = [], o = e.toLowerCase().replace(n, ".").split(".");
            for (t = 0; t < o.length; t++)
                a = o[t],
                i.push(r.test(a) ? "xn--" + d(a) : a);
            return i.join(".")
        }
    }
    , function(e, t, a) {
        "use strict";
        a(24);
        var r = a(5)
          , n = a(46)
          , i = a(242)
          , o = a(27)
          , s = a(103)
          , l = a(48)
          , u = a(194)
          , d = a(34)
          , c = a(61)
          , f = a(16)
          , h = a(59)
          , p = a(83)
          , g = a(17)
          , m = a(13)
          , y = a(47)
          , _ = a(57)
          , v = a(447)
          , b = a(82)
          , E = a(11)
          , k = n("fetch")
          , T = n("Headers")
          , S = E("iterator")
          , A = d.set
          , C = d.getterFor("URLSearchParams")
          , I = d.getterFor("URLSearchParamsIterator")
          , P = /\+/g
          , w = Array(4)
          , M = function(e) {
            return w[e - 1] || (w[e - 1] = RegExp("((?:%[\\da-f]{2}){" + e + "})", "gi"))
        }
          , R = function(e) {
            try {
                return decodeURIComponent(e)
            } catch (t) {
                return e
            }
        }
          , x = function(e) {
            var t = e.replace(P, " ")
              , a = 4;
            try {
                return decodeURIComponent(t)
            } catch (e) {
                for (; a; )
                    t = t.replace(M(a--), R);
                return t
            }
        }
          , D = /[!'()~]|%20/g
          , O = {
            "!": "%21",
            "'": "%27",
            "(": "%28",
            ")": "%29",
            "~": "%7E",
            "%20": "+"
        }
          , N = function(e) {
            return O[e]
        }
          , L = function(e) {
            return encodeURIComponent(e).replace(D, N)
        }
          , U = function(e, t) {
            if (t)
                for (var a, r, n = t.split("&"), i = 0; i < n.length; )
                    (a = n[i++]).length && (r = a.split("="),
                    e.push({
                        key: x(r.shift()),
                        value: x(r.join("="))
                    }))
        }
          , F = function(e) {
            this.entries.length = 0,
            U(this.entries, e)
        }
          , B = function(e, t) {
            if (e < t)
                throw TypeError("Not enough arguments")
        }
          , j = u((function(e, t) {
            A(this, {
                type: "URLSearchParamsIterator",
                iterator: v(C(e).entries),
                kind: t
            })
        }
        ), "Iterator", (function() {
            var e = I(this)
              , t = e.kind
              , a = e.iterator.next()
              , r = a.value;
            return a.done || (a.value = "keys" === t ? r.key : "values" === t ? r.value : [r.key, r.value]),
            a
        }
        ))
          , G = function() {
            c(this, G, "URLSearchParams");
            var e, t, a, r, n, i, o, s, l, u = arguments.length > 0 ? arguments[0] : void 0, d = this, h = [];
            if (A(d, {
                type: "URLSearchParams",
                entries: h,
                updateURL: function() {},
                updateSearchParams: F
            }),
            void 0 !== u)
                if (m(u))
                    if ("function" == typeof (e = b(u)))
                        for (a = (t = e.call(u)).next; !(r = a.call(t)).done; ) {
                            if ((o = (i = (n = v(g(r.value))).next).call(n)).done || (s = i.call(n)).done || !i.call(n).done)
                                throw TypeError("Expected sequence with length 2");
                            h.push({
                                key: o.value + "",
                                value: s.value + ""
                            })
                        }
                    else
                        for (l in u)
                            f(u, l) && h.push({
                                key: l,
                                value: u[l] + ""
                            });
                else
                    U(h, "string" == typeof u ? "?" === u.charAt(0) ? u.slice(1) : u : u + "")
        }
          , V = G.prototype;
        s(V, {
            append: function(e, t) {
                B(arguments.length, 2);
                var a = C(this);
                a.entries.push({
                    key: e + "",
                    value: t + ""
                }),
                a.updateURL()
            },
            delete: function(e) {
                B(arguments.length, 1);
                for (var t = C(this), a = t.entries, r = e + "", n = 0; n < a.length; )
                    a[n].key === r ? a.splice(n, 1) : n++;
                t.updateURL()
            },
            get: function(e) {
                B(arguments.length, 1);
                for (var t = C(this).entries, a = e + "", r = 0; r < t.length; r++)
                    if (t[r].key === a)
                        return t[r].value;
                return null
            },
            getAll: function(e) {
                B(arguments.length, 1);
                for (var t = C(this).entries, a = e + "", r = [], n = 0; n < t.length; n++)
                    t[n].key === a && r.push(t[n].value);
                return r
            },
            has: function(e) {
                B(arguments.length, 1);
                for (var t = C(this).entries, a = e + "", r = 0; r < t.length; )
                    if (t[r++].key === a)
                        return !0;
                return !1
            },
            set: function(e, t) {
                B(arguments.length, 1);
                for (var a, r = C(this), n = r.entries, i = !1, o = e + "", s = t + "", l = 0; l < n.length; l++)
                    (a = n[l]).key === o && (i ? n.splice(l--, 1) : (i = !0,
                    a.value = s));
                i || n.push({
                    key: o,
                    value: s
                }),
                r.updateURL()
            },
            sort: function() {
                var e, t, a, r = C(this), n = r.entries, i = n.slice();
                for (n.length = 0,
                a = 0; a < i.length; a++) {
                    for (e = i[a],
                    t = 0; t < a; t++)
                        if (n[t].key > e.key) {
                            n.splice(t, 0, e);
                            break
                        }
                    t === a && n.push(e)
                }
                r.updateURL()
            },
            forEach: function(e) {
                for (var t, a = C(this).entries, r = h(e, arguments.length > 1 ? arguments[1] : void 0, 3), n = 0; n < a.length; )
                    r((t = a[n++]).value, t.key, this)
            },
            keys: function() {
                return new j(this,"keys")
            },
            values: function() {
                return new j(this,"values")
            },
            entries: function() {
                return new j(this,"entries")
            }
        }, {
            enumerable: !0
        }),
        o(V, S, V.entries),
        o(V, "toString", (function() {
            for (var e, t = C(this).entries, a = [], r = 0; r < t.length; )
                e = t[r++],
                a.push(L(e.key) + "=" + L(e.value));
            return a.join("&")
        }
        ), {
            enumerable: !0
        }),
        l(G, "URLSearchParams"),
        r({
            global: !0,
            forced: !i
        }, {
            URLSearchParams: G
        }),
        i || "function" != typeof k || "function" != typeof T || r({
            global: !0,
            enumerable: !0,
            forced: !0
        }, {
            fetch: function(e) {
                var t, a, r, n = [e];
                return arguments.length > 1 && (m(t = arguments[1]) && (a = t.body,
                "URLSearchParams" === p(a) && ((r = t.headers ? new T(t.headers) : new T).has("content-type") || r.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8"),
                t = y(t, {
                    body: _(0, String(a)),
                    headers: _(0, r)
                }))),
                n.push(t)),
                k.apply(this, n)
            }
        }),
        e.exports = {
            URLSearchParams: G,
            getState: C
        }
    }
    , function(e, t, a) {
        var r = a(17)
          , n = a(82);
        e.exports = function(e) {
            var t = n(e);
            if ("function" != typeof t)
                throw TypeError(String(e) + " is not iterable");
            return r(t.call(e))
        }
    }
    , function(e, t, a) {
        "use strict";
        a.r(t),
        a.d(t, "version", (function() {
            return Zt.b
        }
        )),
        a.d(t, "VideoEvent", (function() {
            return n
        }
        )),
        a.d(t, "DMMVideoFactory", (function() {
            return Sa
        }
        )),
        a.d(t, "EnvCode", (function() {
            return S
        }
        )),
        a.d(t, "getStreamIdFromStreamUrl", (function() {
            return r.getStreamIdFromStreamUrl
        }
        ));
        var r = a(8)
          , n = {
            LOADSTART: "loadstart",
            LOADEDMETADATA: "loadedmetadata",
            LOADEDDATA: "loadeddata",
            DURATIONCHANGE: "durationchange",
            CANPLAY: "canplay",
            PLAY: "play",
            PLAYING: "playing",
            PAUSE: "pause",
            WAITING: "waiting",
            TIMEUPDATE: "timeupdate",
            SEEKED: "seeked",
            SEEKING: "seeking",
            ENDED: "ended",
            STALLED: "stalled",
            ERROR: "dmmvideoerror",
            VOLUMECHANGE: "volumechange",
            BITRATECHANGE: "bitratechange",
            RESOLUTIONCHANGE: "resolutionchange",
            SAFARIWIDTHCHANGE: "safariwidthchange",
            SIMULWATCHBLOCKED: "simulwatchblocked"
        }
          , i = (a(28),
        a(36),
        a(37),
        a(79),
        a(49),
        a(50),
        a(100),
        a(24),
        a(86),
        a(66),
        a(250),
        a(67),
        a(102),
        a(51),
        a(52),
        a(53),
        a(29),
        a(68),
        a(70),
        a(31),
        a(204),
        a(30),
        a(54),
        a(32),
        a(71),
        a(259),
        a(206),
        a(262),
        a(55),
        a(40))
          , o = a.n(i)
          , s = (a(413),
        a(422),
        a(74),
        a(243))
          , l = a.n(s)
          , u = (a(233),
        a(115),
        a(244))
          , d = a.n(u);
        function c(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        var f = "1"
          , h = "2"
          , p = "3"
          , g = "4"
          , m = "9"
          , y = "1"
          , _ = "2"
          , v = "3"
          , b = "4"
          , E = "5"
          , k = "6"
          , T = "9"
          , S = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.osNumber = m,
                this.osVersion = "0000",
                this.browserNumber = T,
                this.browserVersion = "0000",
                this._parse()
            }
            var t, a, r;
            return t = e,
            (a = [{
                key: "toString",
                value: function() {
                    return "".concat(this.osNumber, "-").concat(this.osVersion, "-").concat(this.browserNumber, "-").concat(this.browserVersion)
                }
            }, {
                key: "_parse",
                value: function() {
                    var e = d.a.parse(navigator.userAgent);
                    /Windows/.test(e.os) ? (this.osNumber = f,
                    this.osVersion = e.os_version.replace(/NT /, "")) : /Mac/.test(e.os) ? (this.osNumber = h,
                    this.osVersion = e.os_version) : /Linux/.test(e.os) ? (this.osNumber = p,
                    this.osVersion = "0000") : /ChromeOS/.test(e.os) ? (this.osNumber = g,
                    this.osVersion = e.os_version) : (this.osNumber = m,
                    this.osVersion = "0000"),
                    /Internet Explorer/.test(e.name) ? (this.browserNumber = v,
                    this.browserVersion = e.version) : /Edge/.test(e.name) ? (this.browserNumber = b,
                    this.browserVersion = e.version) : /Chrome/.test(e.name) ? (this.browserNumber = y,
                    this.browserVersion = e.version) : /Safari/.test(e.name) ? (this.browserNumber = E,
                    this.browserVersion = e.version) : /Firefox/.test(e.name) ? (this.browserNumber = _,
                    this.browserVersion = e.version) : /Opera/.test(e.name) ? (this.browserNumber = k,
                    this.browserVersion = e.version) : (this.browserNumber = T,
                    this.browserVersion = "0000")
                }
            }, {
                key: "getEnvCode",
                value: function() {
                    return "".concat(this.osNumber, "-").concat(this.osVersion, "-").concat(this.browserNumber, "-").concat(this.browserVersion)
                }
            }]) && c(t.prototype, a),
            r && c(t, r),
            e
        }();
        function A(e) {
            return (A = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function C(e, t) {
            return !t || "object" !== A(t) && "function" != typeof t ? function(e) {
                if (void 0 === e)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }
        function I(e) {
            var t = "function" == typeof Map ? new Map : void 0;
            return (I = function(e) {
                if (null === e || (a = e,
                -1 === Function.toString.call(a).indexOf("[native code]")))
                    return e;
                var a;
                if ("function" != typeof e)
                    throw new TypeError("Super expression must either be null or a function");
                if (void 0 !== t) {
                    if (t.has(e))
                        return t.get(e);
                    t.set(e, r)
                }
                function r() {
                    return P(e, arguments, R(this).constructor)
                }
                return r.prototype = Object.create(e.prototype, {
                    constructor: {
                        value: r,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                M(r, e)
            }
            )(e)
        }
        function P(e, t, a) {
            return (P = w() ? Reflect.construct : function(e, t, a) {
                var r = [null];
                r.push.apply(r, t);
                var n = new (Function.bind.apply(e, r));
                return a && M(n, a.prototype),
                n
            }
            ).apply(null, arguments)
        }
        function w() {
            if ("undefined" == typeof Reflect || !Reflect.construct)
                return !1;
            if (Reflect.construct.sham)
                return !1;
            if ("function" == typeof Proxy)
                return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}
                ))),
                !0
            } catch (e) {
                return !1
            }
        }
        function M(e, t) {
            return (M = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function R(e) {
            return (R = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        var x = function(e) {
            !function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && M(e, t)
            }(n, e);
            var t, a, r = (t = n,
            a = w(),
            function() {
                var e, r = R(t);
                if (a) {
                    var n = R(this).constructor;
                    e = Reflect.construct(r, arguments, n)
                } else
                    e = r.apply(this, arguments);
                return C(this, e)
            }
            );
            function n(e, t) {
                var a;
                return function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, n),
                (a = r.call(this, t)).name = "DMMVideoError",
                a.code = "".concat(new S, "-").concat(e),
                a
            }
            return n
        }(I(Error))
          , D = (a(427),
        a(428),
        a(245))
          , O = a.n(D);
        function N(e, t) {
            var a = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                a.push.apply(a, r)
            }
            return a
        }
        function L(e) {
            for (var t = 1; t < arguments.length; t++) {
                var a = null != arguments[t] ? arguments[t] : {};
                t % 2 ? N(Object(a), !0).forEach((function(t) {
                    U(e, t, a[t])
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : N(Object(a)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                }
                ))
            }
            return e
        }
        function U(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function F(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , a = console;
            return Object.keys(a).includes("log") || (a = {
                debug: console.debug.bind(console),
                error: console.error.bind(console),
                info: console.info.bind(console),
                log: console.log.bind(console),
                warn: console.warn.bind(console)
            }),
            O()(e, L({
                logger: a,
                markdown: !1
            }, t))
        }
        function B(e) {
            return 1e3 * e
        }
        function j(e) {
            return e / 1e3
        }
        function G(e) {
            return (G = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function V(e, t) {
            var a = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                a.push.apply(a, r)
            }
            return a
        }
        function K(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function $(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        function q(e, t) {
            return (q = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function H(e) {
            var t = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}
                    ))),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var a, r = Y(e);
                if (t) {
                    var n = Y(this).constructor;
                    a = Reflect.construct(r, arguments, n)
                } else
                    a = r.apply(this, arguments);
                return W(this, a)
            }
        }
        function W(e, t) {
            return !t || "object" !== G(t) && "function" != typeof t ? function(e) {
                if (void 0 === e)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }
        function Y(e) {
            return (Y = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        var z = F("dom:HTMLVideoElement")
          , X = new Set;
        var Q = function(e) {
            !function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && q(e, t)
            }(o, e);
            var t, a, r, i = H(o);
            function o(e) {
                var t;
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, o),
                (t = i.call(this)).url = null,
                t.part = 0,
                t._params = e,
                t._container = null,
                t._video = void 0,
                t._playerLog = void 0,
                t._previousCurrentTime = 0,
                t._previousResolution = {
                    x: 0,
                    y: 0
                },
                t._isErrorEmitted = !1;
                var a = document.getElementById(e.id);
                return a instanceof HTMLVideoElement ? t._video = a : t._container = a,
                t._resetElement(),
                t
            }
            return t = o,
            (a = [{
                key: "play",
                value: function() {
                    this._video.play()
                }
            }, {
                key: "pause",
                value: function() {
                    this._video.pause()
                }
            }, {
                key: "_resetElement",
                value: function() {
                    var e = this;
                    if (this._container) {
                        for (var t = this._video || {
                            id: "".concat(this._container.id, "-video-").concat(Math.random().toFixed(8).slice(-8)),
                            autoplay: this._params.autoplay
                        }, a = t.id, r = t.autoplay; this._container.lastChild; )
                            this._container.removeChild(this._container.lastChild);
                        this._video = document.createElement("video"),
                        this._video.id = a,
                        this._video.autoplay = r,
                        this._video.style.width = "100%",
                        this._video.style.height = "100%",
                        this._container.appendChild(this._video)
                    }
                    X.has(this._video) || (this._video.addEventListener("loadstart", (function(t) {
                        z.debug("loadstart"),
                        e._previousResolution = {
                            x: 0,
                            y: 0
                        },
                        e.emit(n.LOADSTART, t)
                    }
                    )),
                    this._video.addEventListener("loadedmetadata", (function(t) {
                        z.debug("loadedmetadata"),
                        e.emit(n.LOADEDMETADATA, t),
                        "WebKitMediaKeys"in window && "ontouchend"in document && e.emit(n.CANPLAY, function(e) {
                            for (var t = 1; t < arguments.length; t++) {
                                var a = null != arguments[t] ? arguments[t] : {};
                                t % 2 ? V(Object(a), !0).forEach((function(t) {
                                    K(e, t, a[t])
                                }
                                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : V(Object(a)).forEach((function(t) {
                                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                                }
                                ))
                            }
                            return e
                        }({
                            type: "canplay"
                        }, t))
                    }
                    )),
                    this._video.addEventListener("loadeddata", (function(t) {
                        z.debug("loadeddata"),
                        e.emit(n.LOADEDDATA, t)
                    }
                    )),
                    this._video.addEventListener("durationchange", (function(t) {
                        z.debug("durationchange", {
                            duration: e._video.duration
                        }),
                        e.emit(n.DURATIONCHANGE, t)
                    }
                    )),
                    this._video.addEventListener("canplay", (function(t) {
                        z.debug("canplay"),
                        e.emit(n.CANPLAY, t)
                    }
                    )),
                    this._video.addEventListener("play", (function(t) {
                        z.debug("play", {
                            currentTime: e._video.currentTime
                        }),
                        e.emit(n.PLAY, t)
                    }
                    )),
                    this._video.addEventListener("playing", (function(t) {
                        z.debug("playing", {
                            currentTime: e._video.currentTime
                        }),
                        e.emit(n.PLAYING, t)
                    }
                    )),
                    this._video.addEventListener("pause", (function(t) {
                        z.debug("pause", {
                            currentTime: e._video.currentTime
                        }),
                        e.emit(n.PAUSE, t)
                    }
                    )),
                    this._video.addEventListener("waiting", (function(t) {
                        z.debug("waiting", {
                            currentTime: e._video.currentTime
                        }),
                        e.emit(n.WAITING, t)
                    }
                    )),
                    this._video.addEventListener("timeupdate", (function(t) {
                        e.emit(n.TIMEUPDATE, t);
                        var a = e._video
                          , r = a.videoWidth
                          , i = a.videoHeight;
                        r === e._previousResolution.x && i === e._previousResolution.y || (e.emit(n.RESOLUTIONCHANGE),
                        e._previousResolution = {
                            x: r,
                            y: i
                        }),
                        e._previousCurrentTime = e._video.currentTime
                    }
                    )),
                    this._video.addEventListener("seeking", (function(t) {
                        z.debug("seeking", {
                            currentTime: e._video.currentTime
                        }),
                        e.emit(n.SEEKING, t)
                    }
                    )),
                    this._video.addEventListener("seeked", (function(t) {
                        z.debug("seeked", {
                            currentTime: e._video.currentTime
                        }),
                        e.emit(n.SEEKED, t)
                    }
                    )),
                    this._video.addEventListener("ended", (function(t) {
                        z.debug("ended", {
                            currentTime: e._video.currentTime
                        }),
                        e.emit(n.ENDED, t)
                    }
                    )),
                    this._video.addEventListener("stalled", (function(t) {
                        z.debug("stalled", {
                            currentTime: e._video.currentTime
                        }),
                        e.emit(n.STALLED, t)
                    }
                    )),
                    this._video.addEventListener("volumechange", (function(t) {
                        z.debug("volumechange", {
                            muted: e._video.muted,
                            volume: e._video.volume
                        }),
                        e.emit(n.VOLUMECHANGE, t)
                    }
                    )),
                    this._video.addEventListener("error", (function() {
                        switch (z.error("error", e._video.error),
                        e._video.error.code) {
                        case MediaError.MEDIA_ERR_ABORTED:
                            e._emitError("V200");
                            break;
                        case MediaError.MEDIA_ERR_NETWORK:
                            e._emitError("V201");
                            break;
                        case MediaError.MEDIA_ERR_DECODE:
                            e._emitError("V202");
                            break;
                        case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:
                            e._emitError("V203");
                            break;
                        default:
                            e._emitError("V204")
                        }
                    }
                    )),
                    X.add(this._video))
                }
            }, {
                key: "_emitError",
                value: function(e) {
                    if (!this._isErrorEmitted) {
                        var t = this._params.messages[e] || this._params.messages.V999;
                        this._isErrorEmitted = !0,
                        this.emit(n.ERROR, new x(e,t))
                    }
                }
            }, {
                key: "autoplay",
                get: function() {
                    return this._video.autoplay
                },
                set: function(e) {
                    this._video.autoplay = e
                }
            }, {
                key: "volume",
                get: function() {
                    return this._video.volume
                },
                set: function(e) {
                    this._video.volume = e
                }
            }, {
                key: "muted",
                get: function() {
                    return this._video.muted
                },
                set: function(e) {
                    this._video.muted = e
                }
            }, {
                key: "paused",
                get: function() {
                    return this._video.paused
                }
            }, {
                key: "duration",
                get: function() {
                    return B(this._video.duration)
                }
            }, {
                key: "currentTime",
                get: function() {
                    return B(this._video.currentTime)
                },
                set: function(e) {
                    this._video.currentTime = j(e)
                }
            }, {
                key: "videoWidth",
                get: function() {
                    return this._video.videoWidth
                }
            }, {
                key: "videoHeight",
                get: function() {
                    return this._video.videoHeight
                }
            }, {
                key: "bitrate",
                get: function() {
                    return Number.NaN
                }
            }, {
                key: "bitrates",
                get: function() {
                    return []
                }
            }, {
                key: "playerLog",
                get: function() {
                    return this._playerLog
                }
            }]) && $(t.prototype, a),
            r && $(t, r),
            o
        }(l.a);
        function J(e) {
            return e.replace(/(dl|dl6|rp|st|dl3|hd|m|l|r|rs|ddl6|dsdl6|dl7)$/, "")
        }
        function Z(e) {
            var t = /\/monthly\/.*\/cid=([^/]+)\//.exec(e);
            if (t)
                return t[1];
            var a = /\/digital\/.*\/pid=([^/]+)\//.exec(e);
            if (a)
                return J(a[1]);
            var r = /\/player\.html\?.*&pid=(\w+)/.exec(e);
            if (r)
                return J(r[1]);
            var n = /\/(?:lod|monthly)\/.*\/pid=([^/]+)\//.exec(e);
            return n ? J(n[1]) : null
        }
        function ee(e) {
            return (ee = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function te(e, t, a, r, n, i, o) {
            try {
                var s = e[i](o)
                  , l = s.value
            } catch (e) {
                return void a(e)
            }
            s.done ? t(l) : Promise.resolve(l).then(r, n)
        }
        function ae(e) {
            return function() {
                var t = this
                  , a = arguments;
                return new Promise((function(r, n) {
                    var i = e.apply(t, a);
                    function o(e) {
                        te(i, r, n, o, s, "next", e)
                    }
                    function s(e) {
                        te(i, r, n, o, s, "throw", e)
                    }
                    o(void 0)
                }
                ))
            }
        }
        function re(e, t) {
            var a = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                a.push.apply(a, r)
            }
            return a
        }
        function ne(e) {
            for (var t = 1; t < arguments.length; t++) {
                var a = null != arguments[t] ? arguments[t] : {};
                t % 2 ? re(Object(a), !0).forEach((function(t) {
                    ie(e, t, a[t])
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : re(Object(a)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                }
                ))
            }
            return e
        }
        function ie(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function oe(e, t) {
            return (oe = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function se(e) {
            var t = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}
                    ))),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var a, r = ue(e);
                if (t) {
                    var n = ue(this).constructor;
                    a = Reflect.construct(r, arguments, n)
                } else
                    a = r.apply(this, arguments);
                return le(this, a)
            }
        }
        function le(e, t) {
            return !t || "object" !== ee(t) && "function" != typeof t ? function(e) {
                if (void 0 === e)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }
        function ue(e) {
            return (ue = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        function de(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function ce(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        function fe(e, t, a) {
            return t && ce(e.prototype, t),
            a && ce(e, a),
            e
        }
        var he = F("beacons.js:PlayerLogController")
          , pe = F("beacons.js:SimulWatchController")
          , ge = F("dmmvideo.js:DashJsVideo")
          , me = function() {
            function e(t) {
                de(this, e),
                this._instance = t,
                this._className = void 0,
                this._logger = void 0
            }
            return fe(e, [{
                key: "debug",
                value: function() {
                    var e;
                    (e = this.logger).debug.apply(e, arguments)
                }
            }, {
                key: "info",
                value: function() {
                    for (var e = arguments.length, t = new Array(e), a = 0; a < e; a++)
                        t[a] = arguments[a];
                    this.logger.info(t)
                }
            }, {
                key: "warn",
                value: function() {
                    var e;
                    (e = this.logger).warn.apply(e, arguments)
                }
            }, {
                key: "error",
                value: function() {
                    var e;
                    (e = this.logger).error.apply(e, arguments)
                }
            }, {
                key: "fatal",
                value: function() {
                    var e;
                    (e = this.logger).error.apply(e, arguments)
                }
            }, {
                key: "logger",
                get: function() {
                    if (!this._logger) {
                        var e = "dash.js";
                        this._instance && this._instance.getClassName && (e += ":".concat(this._instance.getClassName())),
                        this._instance && this._instance.getType && (e += ":".concat(this._instance.getType())),
                        this._logger = F(e)
                    }
                    return this._logger
                }
            }]),
            e
        }()
          , ye = function(e) {
            !function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && oe(e, t)
            }(a, e);
            var t = se(a);
            function a(e) {
                var n;
                return de(this, a),
                (n = t.call(this, e))._player = null,
                n._currentVideoQuality = 0,
                n._simulWatch = new r.SimulWatchController(ne(ne({}, e), {}, {
                    logger: pe
                })),
                n._simulWatch.addEventListener("sidchange", (function(e) {
                    return n._onBlock()
                }
                )),
                n._playerLog = new r.PlayerLogController(ne(ne({}, e), {}, {
                    logger: he
                })),
                n._playerLog.contentId = e.contentId || Z(window.location.href),
                n._bindEvents(),
                n._sidAndLiveStreamNameResolved = new Promise((function(e) {
                    return n._resolveSidAndLiveStreamName = e
                }
                )),
                n
            }
            return fe(a, [{
                key: "load",
                value: function(e) {
                    var t = this
                      , a = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        keepPosition: !1,
                        part: 0
                    };
                    ge.log("load", e, a),
                    this._isErrorEmitted = !1;
                    var n = this.currentTime;
                    if (this._currentVideoQuality = 0,
                    this._player || (this._player = o.a.MediaPlayer().create(),
                    this._playerLog.watch({
                        $video: this._video,
                        dashjsPlayer: this._player,
                        simulWatch: this._simulWatch
                    }),
                    Object.defineProperties(this._player.getDebug(), {
                        getLogger: {
                            value: function(e) {
                                return new me(e)
                            }
                        }
                    }),
                    this._player.initialize(this._video),
                    this._player.setProtectionData({
                        "com.microsoft.playready": {
                            serverURL: this._params.keySystems["com.microsoft.playready"],
                            withCredentials: !0,
                            cdmData: this._params.customData
                        },
                        "com.widevine.alpha": {
                            serverURL: this._params.keySystems["com.widevine.alpha"],
                            withCredentials: !0,
                            audioRobustness: "SW_SECURE_CRYPTO",
                            videoRobustness: "SW_SECURE_CRYPTO"
                        },
                        "org.w3.clearkey": {
                            serverURL: this._params.keySystems["org.w3.clearkey"],
                            withCredentials: !0
                        }
                    }),
                    this._player.updateSettings(ne({
                        debug: {
                            logLevel: 5
                        }
                    }, this._params.dashjs)),
                    this._bindDashEvents()),
                    this._simulWatch.stop(),
                    this._player.attachSource(e),
                    a.keepPosition) {
                        var i = function() {
                            return t.currentTime = n
                        };
                        try {
                            i()
                        } catch (e) {
                            ge.debug("failed to set currentTime, defer it untill metadata loaded"),
                            this._video.addEventListener("loadedmetadata", i, {
                                once: !0,
                                passive: !0
                            }),
                            this._video.addEventListener("error", (function() {
                                t._video.removeEventListener("loadedmetadata", i)
                            }
                            ), {
                                once: !0,
                                passive: !0
                            })
                        }
                    }
                    this._playerLog.streamUrl = this.url = e,
                    this._playerLog.part = this.part = a.part || 0,
                    this._params.isLive ? (this._sid = a.sid || Object(r.getStreamIdForLive)(),
                    this._liveStreamName = a.liveStreamName || Object(r.getLiveStreamName)(e)) : (this._sid = a.sid || Object(r.getStreamIdFromStreamUrl)(e),
                    this._liveStreamName = void 0),
                    this._resolveSidAndLiveStreamName(),
                    this._playerLog.start({
                        sid: this._sid
                    })
                }
            }, {
                key: "_onBlock",
                value: function() {
                    this.pause(),
                    this.emit(n.SIMULWATCHBLOCKED)
                }
            }, {
                key: "_bindDashEvents",
                value: function() {
                    var e = this;
                    this._player.on(o.a.MediaPlayer.events.BUFFER_EMPTY, (function(e) {
                        ge.debug("dashjs.MediaPlayer.events.BUFFER_EMPTY")
                    }
                    )),
                    this._player.on(o.a.MediaPlayer.events.ERROR, (function(t) {
                        ge.debug("dashjs.MediaPlayer.events.ERROR", t),
                        e._onDashjsError(t)
                    }
                    )),
                    this._player.on(o.a.MediaPlayer.events.KEY_STATUSES_CHANGED, (function(e) {
                        ge.debug("dashjs.MediaPlayer.events.KEY_STATUSES_CHANGED", e),
                        e.data && !Number.isNaN(e.data.session.expiration) && ge.info("License expiration: ".concat(new Date(e.data.session.expiration)))
                    }
                    )),
                    this._player.on(o.a.MediaPlayer.events.LICENSE_REQUEST_COMPLETE, (function(e) {
                        ge.debug("dashjs.MediaPlayer.events.LICENSE_REQUEST_COMPLETE", e)
                    }
                    )),
                    this._player.on(o.a.MediaPlayer.events.MANIFEST_LOADED, (function(e) {
                        ge.debug("dashjs.MediaPlayer.events.MANIFEST_LOADED", e)
                    }
                    )),
                    this._player.on(o.a.MediaPlayer.events.PLAYBACK_METADATA_LOADED, (function(e) {
                        ge.debug("dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED")
                    }
                    )),
                    this._player.on(o.a.MediaPlayer.events.QUALITY_CHANGE_REQUESTED, (function(t) {
                        if (ge.debug("dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED", t),
                        "video" === t.mediaType) {
                            e._currentVideoQuality = t.newQuality;
                            var a = e.audioBitrate
                              , r = e.videoBitrate;
                            e.emit(n.BITRATECHANGE, Math.floor((a + r) / 1e3))
                        }
                    }
                    )),
                    this._player.on(o.a.MediaPlayer.events.STREAM_INITIALIZED, (function(e) {
                        ge.debug("dashjs.MediaPlayer.events.STREAM_INITIALIZED", e)
                    }
                    ))
                }
            }, {
                key: "_bindEvents",
                value: function() {
                    var e = this;
                    this.on(n.PLAY, ae(regeneratorRuntime.mark((function t() {
                        return regeneratorRuntime.wrap((function(t) {
                            for (; ; )
                                switch (t.prev = t.next) {
                                case 0:
                                    return t.next = 2,
                                    e._sidAndLiveStreamNameResolved;
                                case 2:
                                    e._simulWatch.start(e._sid, e._liveStreamName).catch((function(e) {
                                        ge.warn("simul watch start", e)
                                    }
                                    ));
                                case 3:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))),
                    this.on(n.PAUSE, (function() {
                        e._simulWatch.stop()
                    }
                    )),
                    this.on(n.ENDED, (function() {
                        e._simulWatch.stop()
                    }
                    )),
                    this.on(n.ERROR, (function() {
                        e._simulWatch.stop()
                    }
                    ))
                }
            }, {
                key: "_onDashjsError",
                value: function(e) {
                    if ("code"in e.error) {
                        var t = e.error.code;
                        this._emitError("V".concat(300 + t))
                    } else
                        switch (e.error) {
                        case "capability":
                            this._emitError("V301");
                            break;
                        case "mediasource":
                            this._emitError("V302");
                            break;
                        case "key_session":
                            this._emitError("V303");
                            break;
                        case "key_message":
                            this._emitError("V304");
                            break;
                        case "download":
                            this._emitError("V305");
                            break;
                        case "manifestError":
                            this._emitError("V306")
                        }
                }
            }, {
                key: "bitrate",
                get: function() {
                    return this.audioBitrate + this.videoBitrate
                }
            }, {
                key: "bitrates",
                get: function() {
                    var e = this.audioBitrate;
                    return this._player.getBitrateInfoListFor("video").map((function(t) {
                        return e + t.bitrate
                    }
                    ))
                }
            }, {
                key: "audioBitrate",
                get: function() {
                    return this._player.getBitrateInfoListFor("audio").reduce((function(e, t) {
                        return Math.max(e, t.bitrate)
                    }
                    ), 0)
                }
            }, {
                key: "videoBitrate",
                get: function() {
                    var e = this._player.getBitrateInfoListFor("video");
                    return this._currentVideoQuality in e ? e[this._currentVideoQuality].bitrate : Number.NaN
                }
            }]),
            a
        }(Q);
        a(430),
        a(91),
        a(116),
        a(117),
        a(118),
        a(119),
        a(120),
        a(121),
        a(122),
        a(123),
        a(124),
        a(125),
        a(126),
        a(127),
        a(128),
        a(129),
        a(436),
        a(130),
        a(131),
        a(132),
        a(133),
        a(134),
        a(135),
        a(136),
        a(137),
        a(138),
        a(139);
        function _e(e) {
            return function(e) {
                if (Array.isArray(e))
                    return ve(e)
            }(e) || function(e) {
                if ("undefined" != typeof Symbol && Symbol.iterator in Object(e))
                    return Array.from(e)
            }(e) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return ve(e, t);
                var a = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === a && e.constructor && (a = e.constructor.name);
                if ("Map" === a || "Set" === a)
                    return Array.from(e);
                if ("Arguments" === a || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))
                    return ve(e, t)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function ve(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var a = 0, r = new Array(t); a < t; a++)
                r[a] = e[a];
            return r
        }
        function be(e) {
            for (var t = atob(e.replace(/-/g, "+").replace(/_/g, "/")), a = new Uint8Array(t.length), r = 0; r < t.length; r++)
                a[r] = t.charCodeAt(r);
            return a
        }
        function Ee(e) {
            return btoa(String.fromCharCode.apply(String, _e(e))).replace(/\+/g, "-").replace(/\//g, "_").replace(/=/g, "")
        }
        function ke(e, t, a, r, n, i, o) {
            try {
                var s = e[i](o)
                  , l = s.value
            } catch (e) {
                return void a(e)
            }
            s.done ? t(l) : Promise.resolve(l).then(r, n)
        }
        function Te(e) {
            return function() {
                var t = this
                  , a = arguments;
                return new Promise((function(r, n) {
                    var i = e.apply(t, a);
                    function o(e) {
                        ke(i, r, n, o, s, "next", e)
                    }
                    function s(e) {
                        ke(i, r, n, o, s, "throw", e)
                    }
                    o(void 0)
                }
                ))
            }
        }
        function Se(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        var Ae = {
            name: "RSA-OAEP",
            modulusLength: 2048,
            publicExponent: Uint8Array.of(1, 0, 1),
            hash: {
                name: "SHA-256"
            }
        }
          , Ce = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e),
                this.pki = new Map
            }
            var t, a, r, n, i;
            return t = e,
            (a = [{
                key: "encrypt",
                value: (i = Te(regeneratorRuntime.mark((function e(t) {
                    var a, r, n, i;
                    return regeneratorRuntime.wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (a = JSON.parse(new TextDecoder("utf-8").decode(t)),
                                r = a.kids,
                                n = a.type,
                                this.pki.has(r[0])) {
                                    e.next = 8;
                                    break
                                }
                                return e.t0 = this.pki,
                                e.t1 = r[0],
                                e.next = 6,
                                crypto.subtle.generateKey(Ae, !0, ["encrypt", "decrypt"]);
                            case 6:
                                e.t2 = e.sent,
                                e.t0.set.call(e.t0, e.t1, e.t2);
                            case 8:
                                return e.next = 10,
                                crypto.subtle.exportKey("spki", this.pki.get(r[0]).publicKey);
                            case 10:
                                return i = e.sent,
                                e.abrupt("return", (new TextEncoder).encode(JSON.stringify({
                                    kids: r,
                                    type: n,
                                    spki: Ee(new Uint8Array(i))
                                })));
                            case 12:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e, this)
                }
                ))),
                function(e) {
                    return i.apply(this, arguments)
                }
                )
            }, {
                key: "decrypt",
                value: (n = Te(regeneratorRuntime.mark((function e(t) {
                    var a, r, n, i, o;
                    return regeneratorRuntime.wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                return a = JSON.parse(new TextDecoder("utf-8").decode(t)),
                                r = a.keys,
                                n = a.type,
                                i = this.pki.get(r[0].kid),
                                o = i.privateKey,
                                e.next = 4,
                                Promise.all(r.map(function() {
                                    var e = Te(regeneratorRuntime.mark((function e(t) {
                                        var a;
                                        return regeneratorRuntime.wrap((function(e) {
                                            for (; ; )
                                                switch (e.prev = e.next) {
                                                case 0:
                                                    if (16 === (a = be(t.k)).length) {
                                                        e.next = 8;
                                                        break
                                                    }
                                                    return e.t0 = Uint8Array,
                                                    e.next = 5,
                                                    crypto.subtle.decrypt(Ae, o, a);
                                                case 5:
                                                    e.t1 = e.sent,
                                                    a = new e.t0(e.t1),
                                                    t.k = Ee(a);
                                                case 8:
                                                case "end":
                                                    return e.stop()
                                                }
                                        }
                                        ), e)
                                    }
                                    )));
                                    return function(t) {
                                        return e.apply(this, arguments)
                                    }
                                }()));
                            case 4:
                                return this.pki.delete(r[0].kid),
                                e.abrupt("return", (new TextEncoder).encode(JSON.stringify({
                                    keys: r,
                                    type: n
                                })));
                            case 6:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e, this)
                }
                ))),
                function(e) {
                    return n.apply(this, arguments)
                }
                )
            }]) && Se(t.prototype, a),
            r && Se(t, r),
            e
        }();
        function Ie(e) {
            return (Ie = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function Pe(e, t, a, r, n, i, o) {
            try {
                var s = e[i](o)
                  , l = s.value
            } catch (e) {
                return void a(e)
            }
            s.done ? t(l) : Promise.resolve(l).then(r, n)
        }
        function we(e) {
            return function() {
                var t = this
                  , a = arguments;
                return new Promise((function(r, n) {
                    var i = e.apply(t, a);
                    function o(e) {
                        Pe(i, r, n, o, s, "next", e)
                    }
                    function s(e) {
                        Pe(i, r, n, o, s, "throw", e)
                    }
                    o(void 0)
                }
                ))
            }
        }
        function Me(e, t) {
            var a = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                a.push.apply(a, r)
            }
            return a
        }
        function Re(e) {
            for (var t = 1; t < arguments.length; t++) {
                var a = null != arguments[t] ? arguments[t] : {};
                t % 2 ? Me(Object(a), !0).forEach((function(t) {
                    xe(e, t, a[t])
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : Me(Object(a)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                }
                ))
            }
            return e
        }
        function xe(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function De(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        function Oe(e, t) {
            return (Oe = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function Ne(e) {
            var t = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}
                    ))),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var a, r = Ue(e);
                if (t) {
                    var n = Ue(this).constructor;
                    a = Reflect.construct(r, arguments, n)
                } else
                    a = r.apply(this, arguments);
                return Le(this, a)
            }
        }
        function Le(e, t) {
            return !t || "object" !== Ie(t) && "function" != typeof t ? function(e) {
                if (void 0 === e)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }
        function Ue(e) {
            return (Ue = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        var Fe = F("beacons.js:PlayerLogController")
          , Be = F("beacons.js:SimulWatchController")
          , je = F("dmmvideo.js:ShakaVideo")
          , Ge = F("shaka-player");
        var Ve = function(e) {
            !function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && Oe(e, t)
            }(l, e);
            var t, a, i, o, s = Ne(l);
            function l(e) {
                var t;
                return function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, l),
                t = s.call(this, e),
                function() {
                    if (!("shaka"in window)) {
                        var e = performance.now();
                        eval.call(null, "".concat('/*\n @license\n Shaka Player\n Copyright 2016 Google LLC\n SPDX-License-Identifier: Apache-2.0\n*/\n(function(){var innerGlobal=typeof window!="undefined"?window:global;var exportTo={};(function(window,global,module){/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\nvar $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;\n$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);\n$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var c=$jscomp.propertyToPolyfillSymbol[b];if(null==c)return a[b];c=a[c];return void 0!==c?c:a[b]};\n$jscomp.polyfill=function(a,b,c,d){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,c,d):$jscomp.polyfillUnisolated(a,b,c,d))};$jscomp.polyfillUnisolated=function(a,b,c,d){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))return;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};\n$jscomp.polyfillIsolated=function(a,b,c,d){var e=a.split(".");a=1===e.length;d=e[0];d=!a&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;b=b(c);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=\n$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:b})))};$jscomp.initSymbol=function(){};\n$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(e,f){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:f})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(e||"")+"_"+c++,e)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};\n$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=$jscomp.global[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&$jscomp.defineProperty(d.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",\n"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};\n$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};\n$jscomp.getConstructImplementation=function(){function a(){function c(){}new c;Reflect.construct(c,[],function(){});return new c instanceof c}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(a())return Reflect.construct;var b=Reflect.construct;return function(c,d,e){c=b(c,d);e&&Reflect.setPrototypeOf(c,e.prototype);return c}}return function(c,d,e){void 0===e&&(e=c);e=$jscomp.objectCreate(e.prototype||Object.prototype);return Function.prototype.apply.call(c,e,d)||\ne}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;\n$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};$jscomp.generator={};\n$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};\n$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};\n$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype["return"]=function(a){this.abruptCompletion_={"return":a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};\n$jscomp.generator.Context.prototype.yieldAll=function(a,b){var c=$jscomp.makeIterator(a),d=c.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=c,this.yield(d.value,b)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};\n$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};\n$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};\n$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){var c=this.finallyContexts_.splice(b||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};\n$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};\n$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};\n$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(c){return{value:c,done:!0}},a,this.context_["return"]);this.context_["return"](a);return this.nextStep_()};\n$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};\n$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,c){try{var d=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(f){return this.context_.yieldAllIterator_=null,this.context_.throw_(f),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};\n$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a["return"],done:!0}}return{value:void 0,done:!0}};\n$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this["throw"]=function(b){return a.throw_(b)};this["return"]=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){var c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(c,a.prototype);return c};\n$jscomp.asyncExecutePromiseGenerator=function(a){function b(d){return a.next(d)}function c(d){return a["throw"](d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};\n$jscomp.polyfill("Reflect",function(a){return a?a:{}},"es6","es3");$jscomp.polyfill("Reflect.construct",function(a){return $jscomp.construct},"es6","es3");$jscomp.polyfill("Reflect.setPrototypeOf",function(a){if(a)return a;if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;return function(c,d){try{return b(c,d),!0}catch(e){return!1}}}return null},"es6","es5");\n$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(g){return g instanceof e?g:new e(function(h,k){h(g)})}if(a&&!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent))return a;b.prototype.asyncExecute=function(g){if(null==this.batch_){this.batch_=[];var h=this;this.asyncExecuteFunction(function(){h.executeBatch_()})}this.batch_.push(g)};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=\nfunction(g){d(g,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var g=this.batch_;this.batch_=[];for(var h=0;h<g.length;++h){var k=g[h];g[h]=null;try{k()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(g){this.asyncExecuteFunction(function(){throw g;})};var e=function(g){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var h=this.createResolveAndReject_();try{g(h.resolve,h.reject)}catch(k){h.reject(k)}};\ne.prototype.createResolveAndReject_=function(){function g(l){return function(m){k||(k=!0,l.call(h,m))}}var h=this,k=!1;return{resolve:g(this.resolveTo_),reject:g(this.reject_)}};e.prototype.resolveTo_=function(g){if(g===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(g instanceof e)this.settleSameAsPromise_(g);else{a:switch(typeof g){case "object":var h=null!=g;break a;case "function":h=!0;break a;default:h=!1}h?this.resolveToNonPromiseObj_(g):this.fulfill_(g)}};e.prototype.resolveToNonPromiseObj_=\nfunction(g){var h=void 0;try{h=g.then}catch(k){this.reject_(k);return}"function"==typeof h?this.settleSameAsThenable_(h,g):this.fulfill_(g)};e.prototype.reject_=function(g){this.settle_(2,g)};e.prototype.fulfill_=function(g){this.settle_(1,g)};e.prototype.settle_=function(g,h){if(0!=this.state_)throw Error("Cannot settle("+g+", "+h+"): Promise already settled in state"+this.state_);this.state_=g;this.result_=h;2===this.state_&&this.scheduleUnhandledRejectionCheck_();this.executeOnSettledCallbacks_()};\ne.prototype.scheduleUnhandledRejectionCheck_=function(){var g=this;d(function(){if(g.notifyUnhandledRejection_()){var h=$jscomp.global.console;"undefined"!==typeof h&&h.error(g.result_)}},1)};e.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var g=$jscomp.global.CustomEvent,h=$jscomp.global.Event,k=$jscomp.global.dispatchEvent;if("undefined"===typeof k)return!0;"function"===typeof g?g=new g("unhandledrejection",{cancelable:!0}):"function"===typeof h?g=new h("unhandledrejection",\n{cancelable:!0}):(g=$jscomp.global.document.createEvent("CustomEvent"),g.initCustomEvent("unhandledrejection",!1,!0,g));g.promise=this;g.reason=this.result_;return k(g)};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var g=0;g<this.onSettledCallbacks_.length;++g)f.asyncExecute(this.onSettledCallbacks_[g]);this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(g){var h=this.createResolveAndReject_();g.callWhenSettled_(h.resolve,\nh.reject)};e.prototype.settleSameAsThenable_=function(g,h){var k=this.createResolveAndReject_();try{g.call(h,k.resolve,k.reject)}catch(l){k.reject(l)}};e.prototype.then=function(g,h){function k(p,q){return"function"==typeof p?function(r){try{l(p(r))}catch(t){m(t)}}:q}var l,m,n=new e(function(p,q){l=p;m=q});this.callWhenSettled_(k(g,l),k(h,m));return n};e.prototype["catch"]=function(g){return this.then(void 0,g)};e.prototype.callWhenSettled_=function(g,h){function k(){switch(l.state_){case 1:g(l.result_);\nbreak;case 2:h(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?f.asyncExecute(k):this.onSettledCallbacks_.push(k);this.isRejectionHandled_=!0};e.resolve=c;e.reject=function(g){return new e(function(h,k){k(g)})};e.race=function(g){return new e(function(h,k){for(var l=$jscomp.makeIterator(g),m=l.next();!m.done;m=l.next())c(m.value).callWhenSettled_(h,k)})};e.all=function(g){var h=$jscomp.makeIterator(g),k=h.next();return k.done?c([]):new e(function(l,\nm){function n(r){return function(t){p[r]=t;q--;0==q&&l(p)}}var p=[],q=0;do p.push(void 0),q++,c(k.value).callWhenSettled_(n(p.length-1),m),k=h.next();while(!k.done)})};return e},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var a={},b=Object.create(new $jscomp.global.Proxy(a,{get:function(c,d,e){return c==a&&"q"==d&&e==b}}));return!0===b.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();\n$jscomp.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};\n$jscomp.polyfill("WeakMap",function(a){function b(){if(!a||!Object.seal)return!1;try{var l=Object.seal({}),m=Object.seal({}),n=new a([[l,2],[m,3]]);if(2!=n.get(l)||3!=n.get(m))return!1;n["delete"](l);n.set(m,4);return!n.has(l)&&4==n.get(m)}catch(p){return!1}}function c(){}function d(l){var m=typeof l;return"object"===m&&null!==l||"function"===m}function e(l){if(!$jscomp.owns(l,g)){var m=new c;$jscomp.defineProperty(l,g,{value:m})}}function f(l){if(!$jscomp.ISOLATE_POLYFILLS){var m=Object[l];m&&(Object[l]=\nfunction(n){if(n instanceof c)return n;Object.isExtensible(n)&&e(n);return m(n)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var g="$jscomp_hidden_"+Math.random();f("freeze");f("preventExtensions");f("seal");var h=0,k=function(l){this.id_=(h+=Math.random()+1).toString();if(l){l=$jscomp.makeIterator(l);for(var m;!(m=l.next()).done;)m=m.value,this.set(m[0],m[1])}};k.prototype.set=function(l,m){if(!d(l))throw Error("Invalid WeakMap key");\ne(l);if(!$jscomp.owns(l,g))throw Error("WeakMap key fail: "+l);l[g][this.id_]=m;return this};k.prototype.get=function(l){return d(l)&&$jscomp.owns(l,g)?l[g][this.id_]:void 0};k.prototype.has=function(l){return d(l)&&$jscomp.owns(l,g)&&$jscomp.owns(l[g],this.id_)};k.prototype["delete"]=function(l){return d(l)&&$jscomp.owns(l,g)&&$jscomp.owns(l[g],this.id_)?delete l[g][this.id_]:!1};return k},"es6","es3");$jscomp.MapEntry=function(){};\n$jscomp.polyfill("Map",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_MAP||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var k=Object.seal({x:4}),l=new a($jscomp.makeIterator([[k,"s"]]));if("s"!=l.get(k)||1!=l.size||l.get({x:4})||l.set({x:4},"t")!=l||2!=l.size)return!1;var m=l.entries(),n=m.next();if(n.done||n.value[0]!=k||"s"!=n.value[1])return!1;n=m.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!m.next().done?!1:!0}catch(p){return!1}}\nif($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=new WeakMap,d=function(k){this.data_={};this.head_=g();this.size=0;if(k){k=$jscomp.makeIterator(k);for(var l;!(l=k.next()).done;)l=l.value,this.set(l[0],l[1])}};d.prototype.set=function(k,l){k=0===k?0:k;var m=e(this,k);m.list||(m.list=this.data_[m.id]=[]);m.entry?m.entry.value=l:(m.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:k,value:l},m.list.push(m.entry),\nthis.head_.previous.next=m.entry,this.head_.previous=m.entry,this.size++);return this};d.prototype["delete"]=function(k){k=e(this,k);return k.entry&&k.list?(k.list.splice(k.index,1),k.list.length||delete this.data_[k.id],k.entry.previous.next=k.entry.next,k.entry.next.previous=k.entry.previous,k.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=g();this.size=0};d.prototype.has=function(k){return!!e(this,k).entry};d.prototype.get=function(k){return(k=\ne(this,k).entry)&&k.value};d.prototype.entries=function(){return f(this,function(k){return[k.key,k.value]})};d.prototype.keys=function(){return f(this,function(k){return k.key})};d.prototype.values=function(){return f(this,function(k){return k.value})};d.prototype.forEach=function(k,l){for(var m=this.entries(),n;!(n=m.next()).done;)n=n.value,k.call(l,n[1],n[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(k,l){var m=l&&typeof l;"object"==m||"function"==m?c.has(l)?m=c.get(l):\n(m=""+ ++h,c.set(l,m)):m="p_"+l;var n=k.data_[m];if(n&&$jscomp.owns(k.data_,m))for(var p=0;p<n.length;p++){var q=n[p];if(l!==l&&q.key!==q.key||l===q.key)return{id:m,list:n,index:p,entry:q}}return{id:m,list:n,index:-1,entry:void 0}},f=function(k,l){var m=k.head_;return $jscomp.iteratorPrototype(function(){if(m){for(;m.head!=k.head_;)m=m.previous;for(;m.next!=m.head;)return m=m.next,{done:!1,value:l(m)};m=null}return{done:!0,value:void 0}})},g=function(){var k={};return k.previous=k.next=k.head=k},\nh=0;return d},"es6","es3");\n$jscomp.polyfill("Set",function(a){function b(){if($jscomp.ASSUME_NO_NATIVE_SET||!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var d=Object.seal({x:4}),e=new a($jscomp.makeIterator([d]));if(!e.has(d)||1!=e.size||e.add(d)!=e||1!=e.size||e.add({x:4})!=e||2!=e.size)return!1;var f=e.entries(),g=f.next();if(g.done||g.value[0]!=d||g.value[1]!=d)return!1;g=f.next();return g.done||g.value[0]==d||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:f.next().done}catch(h){return!1}}\nif($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(a&&$jscomp.ES6_CONFORMANCE)return a}else if(b())return a;var c=function(d){this.map_=new Map;if(d){d=$jscomp.makeIterator(d);for(var e;!(e=d.next()).done;)this.add(e.value)}this.size=this.map_.size};c.prototype.add=function(d){d=0===d?0:d;this.map_.set(d,d);this.size=this.map_.size;return this};c.prototype["delete"]=function(d){d=this.map_["delete"](d);this.size=this.map_.size;return d};c.prototype.clear=function(){this.map_.clear();this.size=0};\nc.prototype.has=function(d){return this.map_.has(d)};c.prototype.entries=function(){return this.map_.entries()};c.prototype.values=function(){return this.map_.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=c.prototype.values;c.prototype.forEach=function(d,e){var f=this;this.map_.forEach(function(g){return d.call(e,g,g,f)})};return c},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");\n$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var d=this;d instanceof String&&(d=String(d));var e=d.length,f=c||0;for(0>f&&(f=Math.max(f+e,0));f<e;f++){var g=d[f];if(g===b||Object.is(g,b))return!0}return!1}},"es7","es3");\n$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The \'this\' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");\n$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).i}},"es6","es3");\n$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var c=0,d=!1,e={next:function(){if(!d&&c<a.length){var f=c++;return{value:b(f,a[f]),done:!1}}d=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};$jscomp.polyfill("Array.prototype.values",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return c})}},"es8","es3");\n$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)$jscomp.owns(d,e)&&(a[e]=d[e])}return a};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");\n$jscomp.polyfill("Array.from",function(a){return a?a:function(b,c,d){c=null!=c?c:function(h){return h};var e=[],f="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof f){b=f.call(b);for(var g=0;!(f=b.next()).done;)e.push(c.call(d,f.value,g++))}else for(f=b.length,g=0;g<f;g++)e.push(c.call(d,b[g],g));return e}},"es6","es3");\n$jscomp.polyfill("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}},"es9","es3");$jscomp.polyfill("Array.prototype.entries",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b,c){return[b,c]})}},"es6","es3");\n$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(b){var c=$jscomp.checkStringArgs(this,null,"repeat");if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}},"es6","es3");\n$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var d=$jscomp.checkStringArgs(this,b,"startsWith");b+="";for(var e=d.length,f=b.length,g=Math.max(0,Math.min(c|0,d.length)),h=0;h<f&&g<e;)if(d[g++]!=b[h++])return!1;return h>=f}},"es6","es3");$jscomp.polyfill("Object.values",function(a){return a?a:function(b){var c=[],d;for(d in b)$jscomp.owns(b,d)&&c.push(b[d]);return c}},"es8","es3");\n$jscomp.polyfill("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}},"es6","es3");$jscomp.polyfill("Object.entries",function(a){return a?a:function(b){var c=[],d;for(d in b)$jscomp.owns(b,d)&&c.push([d,b[d]]);return c}},"es8","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self;\ngoog.exportPath_=function(a,b,c,d){a=a.split(".");d=d||goog.global;a[0]in d||"undefined"==typeof d.execScript||d.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)if(a.length||void 0===b)d=d[e]&&d[e]!==Object.prototype[e]?d[e]:d[e]={};else if(!c&&goog.isObject(b)&&goog.isObject(d[e]))for(var f in b)b.hasOwnProperty(f)&&(d[e][f]=b[f]);else d[e]=b};\ngoog.define=function(a,b){var c=b;if(!COMPILED){var d=goog.global.CLOSURE_UNCOMPILED_DEFINES,e=goog.global.CLOSURE_DEFINES;d&&void 0===d.nodeType&&Object.prototype.hasOwnProperty.call(d,a)?c=d[a]:e&&void 0===e.nodeType&&Object.prototype.hasOwnProperty.call(e,a)&&(c=e[a])}return c};goog.FEATURESET_YEAR=2012;goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;\ngoog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(a))throw Error(\'Namespace "\'+a+\'" already declared.\');goog.constructNamespace_(a)};goog.constructNamespace_=function(a,b,c){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var d=a;(d=d.substring(0,d.lastIndexOf(".")))&&!goog.getObjectByName(d);)goog.implicitNamespaces_[d]=!0}goog.exportPath_(a,b,c)};\ngoog.getScriptNonce=function(a){if(a&&a!=goog.global)return goog.getScriptNonce_(a.document);null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document));return goog.cspNonce_};goog.NONCE_PATTERN_=/^[\\w+/_-]+[=]{0,2}$/;goog.cspNonce_=null;goog.getScriptNonce_=function(a){return(a=a.querySelector&&a.querySelector("script[nonce]"))&&(a=a.nonce||a.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(a)?a:""};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;\ngoog.module=function(a){if("string"!==typeof a||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You\'re likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");\nif(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error(\'Namespace "\'+a+\'" already declared.\');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};\ngoog.module.getInternal_=function(a){if(!COMPILED){if(a in goog.loadedModules_)return goog.loadedModules_[a].exports;if(!goog.implicitNamespaces_[a])return a=goog.getObjectByName(a),null!=a?a:null}return null};goog.ModuleType={ES6:"es6",GOOG:"goog"};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()};goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG};\ngoog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var a=goog.global.$jscomp;return a?"function"!=typeof a.getCurrentModulePath?!1:!!a.getCurrentModulePath():!1};\ngoog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};\ngoog.declareModuleId=function(a){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(a in goog.loadedModules_)throw Error(\'Module with namespace "\'+a+\'" already exists.\');}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=a;else{var b=goog.global.$jscomp;if(!b||"function"!=typeof b.getCurrentModulePath)throw Error(\'Module with namespace "\'+\na+\'" has been loaded incorrectly.\');b=b.require(b.getCurrentModulePath());goog.loadedModules_[a]={exports:b,type:goog.ModuleType.ES6,moduleId:a}}};goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&null!=goog.getObjectByName(a)},goog.implicitNamespaces_={"goog.module":!0});\ngoog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e=0;e<c.length;e++)if(d=d[c[e]],null==d)return null;return d};goog.addDependency=function(a,b,c,d){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(a,b,c,d)};goog.ENABLE_DEBUG_LOADER=!1;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};\ngoog.require=function(a){if(!COMPILED){goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(a);if(goog.isProvided_(a)){if(goog.isInModuleLoader_())return goog.module.getInternal_(a)}else if(goog.ENABLE_DEBUG_LOADER){var b=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(a)}finally{goog.moduleLoaderState_=b}}return null}};goog.requireType=function(a){return{}};goog.basePath="";goog.nullFunction=function(){};\ngoog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.instance_=void 0;a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;goog.TRANSPILE="detect";\ngoog.ASSUME_ES_MODULES_TRANSPILED=!1;goog.TRANSPILE_TO_LANGUAGE="";goog.TRANSPILER="transpile.js";goog.hasBadLetScoping=null;goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval(\'"use strict";let x = 1; function f() { return typeof x; };f() == "number";\')}catch(b){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping};goog.workaroundSafari10EvalBug=function(a){return"(function(){"+a+"\\n;})();\\n"};\ngoog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};var c={},d=c;if(goog.isFunction(a))d=a.call(void 0,d);else if("string"===typeof a)goog.useSafari10Workaround()&&(a=goog.workaroundSafari10EvalBug(a)),d=goog.loadModuleFromSource_.call(void 0,d,a);else throw Error("Invalid module definition");var e=goog.moduleLoaderState_.moduleName;if("string"===typeof e&&e)goog.moduleLoaderState_.declareLegacyNamespace?\ngoog.constructNamespace_(e,d,c!==d):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof d&&null!=d&&Object.seal(d),goog.loadedModules_[e]={exports:d,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error(\'Invalid module name "\'+e+\'"\');}finally{goog.moduleLoaderState_=b}};goog.loadModuleFromSource_=function(a,b){eval(b);return a};\ngoog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);try{var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return 0==b.status||200==b.status?b.responseText:null}catch(c){return null}};\ngoog.transpile_=function(a,b,c){var d=goog.global.$jscomp;d||(goog.global.$jscomp=d={});var e=d.transpile;if(!e){var f=goog.basePath+goog.TRANSPILER,g=goog.loadFileSync_(f);if(g){(function(){(0,eval)(g+"\\n//# sourceURL="+f)}).call(goog.global);if(goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error(\'The transpiler did not properly export the "transpile" method. $gwtExport: \'+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=\ngoog.global.$gwtExport.$jscomp.transpile;d=goog.global.$jscomp;e=d.transpile}}e||(e=d.transpile=function(h,k){goog.logToConsole_(k+" requires transpilation but no transpiler was found.");return h});return e(a,b,c)};goog.typeOf=function(a){var b=typeof a;return"object"!=b?b:a?Array.isArray(a)?"array":b:"null"};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};\ngoog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return Object.prototype.hasOwnProperty.call(a,goog.UID_PROPERTY_)&&a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};\ngoog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if("function"===typeof a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};\ngoog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};\ngoog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();d.push.apply(d,arguments);return a.apply(this,d)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=Date.now;goog.globalEval=function(a){(0,eval)(a)};\ngoog.getCssName=function(a,b){if("."==String(a).charAt(0))throw Error(\'className passed in goog.getCssName must not start with ".". You passed: \'+a);var c=function(e){return goog.cssNameMapping_[e]||e},d=function(e){e=e.split("-");for(var f=[],g=0;g<e.length;g++)f.push(c(e[g]));return f.join("-")};d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(e){return e};d=b?a+"-"+d(b):d(a);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(d):d};\ngoog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b,c){c&&c.html&&(a=a.replace(/</g,"&lt;"));b&&(a=a.replace(/\\{\\$([^}]+)}/g,function(d,e){return null!=b&&e in b?b[e]:d}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,!0,c)};\ngoog.exportProperty=function(a,b,c){a[b]=c};goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(d,e,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[e].apply(d,g)}};goog.scope=function(a){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);\ngoog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;\ngoog.defineClass.createSealingConstructor_=function(a,b){return goog.defineClass.SEAL_CLASS_INSTANCES?function(){var c=a.apply(this,arguments)||this;c[goog.UID_PROPERTY_]=c[goog.UID_PROPERTY_];return c}:a};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");\ngoog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};\n!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.getLastScript_=function(){for(var a=document.documentElement;"SCRIPT"!=a.nodeName&&a.lastChild;)a=a.lastChild;return a},goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.isDocumentLoading_=function(){var a=goog.global.document;return a.attachEvent?"complete"!=a.readyState:"loading"==a.readyState},goog.findBasePath_=function(){if(void 0!=goog.global.CLOSURE_BASE_PATH&&"string"===typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=\ngoog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var a=goog.global.document,b=a.currentScript;a=b?[b]:a.getElementsByTagName("SCRIPT");for(b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?");d=-1==d?c.length:d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null;this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(g,\nh){e?d[g]=!0:h()?(c=g,d[g]=!1):e=d[g]=!0}function b(g){try{return!!eval(g)}catch(h){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";a("es5",function(){return b("[1,].length==1")});a("es6",function(){return f.match(/Edge\\/(\\d+)(\\.\\d)*/i)?!1:b(\'(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()\')});\na("es7",function(){return b("2 ** 2 == 4")});a("es8",function(){return b("async () => 1, true")});a("es9",function(){return b("({...rest} = {}), true")});a("es_next",function(){return!1});return{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(a,b){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var c=this.createRequiresTranspilation_();this.requiresTranspilation_=c.map;this.transpilationTarget_=this.transpilationTarget_||\nc.target}if(a in this.requiresTranspilation_)return this.requiresTranspilation_[a]?!0:!goog.inHtmlDocument_()||"es6"!=b||"noModule"in goog.global.document.createElement("script")?!1:!0;throw Error("Unknown language mode: "+a);},goog.Transpiler.prototype.transpile=function(a,b){return goog.transpile_(a,b,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(a){return a.replace(/<\\/(SCRIPT)/ig,"\\\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={};\nthis.idToPath_={};this.written_={};this.loadingDeps_=[];this.depsToLoad_=[];this.paused_=!1;this.factory_=new goog.DependencyFactory(goog.transpiler_);this.deferredCallbacks_={};this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(a,b){function c(){d&&(goog.global.setTimeout(d,0),d=null)}var d=b;if(a.length){for(var e=[],f=0;f<a.length;f++){var g=this.getPathFromDeps_(a[f]);if(!g)throw Error("Unregonized namespace: "+a[f]);e.push(this.dependencies_[g])}g=goog.require;var h=0;for(f=\n0;f<a.length;f++)g(a[f]),e[f].onLoad(function(){++h==a.length&&c()})}else c()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1));this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(a,b){var c=this.getPathFromDeps_(a);if(c&&(b||this.areDepsLoaded_(this.dependencies_[c].requires))){var d=this.deferredCallbacks_[c];d&&(delete this.deferredCallbacks_[c],d())}},goog.DebugLoader_.prototype.setDependencyFactory=\nfunction(a){this.factory_=a},goog.DebugLoader_.prototype.load_=function(a){if(this.getPathFromDeps_(a)){var b=this,c=[],d=function(e){var f=b.getPathFromDeps_(e);if(!f)throw Error("Bad dependency path or symbol: "+e);if(!b.written_[f]){b.written_[f]=!0;e=b.dependencies_[f];for(f=0;f<e.requires.length;f++)goog.isProvided_(e.requires[f])||d(e.requires[f]);c.push(e)}};d(a);a=!!this.depsToLoad_.length;this.depsToLoad_=this.depsToLoad_.concat(c);this.paused_||a||this.loadDeps_()}else throw a="goog.require could not find: "+\na,goog.logToConsole_(a),Error(a);},goog.DebugLoader_.prototype.loadDeps_=function(){for(var a=this,b=this.paused_;this.depsToLoad_.length&&!b;)(function(){var c=!1,d=a.depsToLoad_.shift(),e=!1;a.loading_(d);var f={pause:function(){if(c)throw Error("Cannot call pause after the call to load.");b=!0},resume:function(){c?a.resume_():b=!1},loaded:function(){if(e)throw Error("Double call to loaded.");e=!0;a.loaded_(d)},pending:function(){for(var g=[],h=0;h<a.loadingDeps_.length;h++)g.push(a.loadingDeps_[h]);\nreturn g},setModuleState:function(g){goog.moduleLoaderState_={type:g,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(g,h,k){k&&(goog.loadedModules_[k]={exports:h,type:goog.ModuleType.ES6,moduleId:k||""})},registerGoogModuleExports:function(g,h){goog.loadedModules_[g]={exports:h,type:goog.ModuleType.GOOG,moduleId:g}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(g){if(c)throw Error("Cannot register with defer after the call to load.");a.defer_(d,\ng)},areDepsLoaded:function(){return a.areDepsLoaded_(d.requires)}};try{d.load(f)}finally{c=!0}})();b&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(a){this.loadingDeps_.push(a)},goog.DebugLoader_.prototype.loaded_=function(a){for(var b=0;b<this.loadingDeps_.length;b++)if(this.loadingDeps_[b]==a){this.loadingDeps_.splice(b,1);\nbreak}for(b=0;b<this.deferredQueue_.length;b++)if(this.deferredQueue_[b]==a.path){this.deferredQueue_.splice(b,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);a.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(a){for(var b=0;b<a.length;b++){var c=this.getPathFromDeps_(a[b]);if(!c||!(c in this.deferredCallbacks_||goog.isProvided_(a[b])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=\nfunction(a){return a in this.idToPath_?this.idToPath_[a]:a in this.dependencies_?a:null},goog.DebugLoader_.prototype.defer_=function(a,b){this.deferredCallbacks_[a.path]=b;this.deferredQueue_.push(a.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(a,\nb,c){},goog.LoadController.prototype.setModuleState=function(a){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(a){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(a,b,c,d,e){this.path=a;this.relativePath=b;this.provides=c;this.requires=d;this.loadFlags=e;this.loaded_=!1;this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var a=this.path,b=a.indexOf("://");0<=b&&(a=a.substring(b+3),b=\na.indexOf("/"),0<=b&&(a=a.substring(b+1)));return a},goog.Dependency.prototype.onLoad=function(a){this.loaded_?a():this.loadCallbacks_.push(a)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var a=this.loadCallbacks_;this.loadCallbacks_=[];for(var b=0;b<a.length;b++)a[b]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(a){var b=Math.random().toString(32);goog.Dependency.callbackMap_[b]=a;return b},goog.Dependency.unregisterCallback_=\nfunction(a){delete goog.Dependency.callbackMap_[a]},goog.Dependency.callback_=function(a,b){if(a in goog.Dependency.callbackMap_){for(var c=goog.Dependency.callbackMap_[a],d=[],e=1;e<arguments.length;e++)d.push(arguments[e]);c.apply(void 0,d)}else throw Error("Callback key "+a+" does not exist (was base.js loaded more than once?).");},goog.Dependency.prototype.load=function(a){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var b=\ngoog.global.document;if("complete"==b.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\\bdeps.js$/.test(this.path)){a.loaded();return}throw Error(\'Cannot write "\'+this.path+\'" after document load\');}var c=goog.getScriptNonce();if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var d=!c,e=goog.Dependency.registerCallback_(function(k){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=k.readyState||(goog.Dependency.unregisterCallback_(e),a.loaded())}),f=goog.DebugLoader_.IS_OLD_IE_?\n"onreadystatechange":"onload",g="";d&&(g=" "+f+"=\\"goog.Dependency.callback_(\'"+e+"\', this)\\"");c=\'<script src="\'+this.path+\'"\'+(c?\' nonce="\'+c+\'"\':"")+g+(goog.Dependency.defer_?" defer":"")+">\\x3c/script>";b.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(c):c);d||(goog.getLastScript_().onload=function(){goog.Dependency.callback_(e,this)})}else{var h=b.createElement("script");h.defer=goog.Dependency.defer_;h.async=!1;h.type="text/javascript";c&&h.setAttribute("nonce",c);goog.DebugLoader_.IS_OLD_IE_?\n(a.pause(),h.onreadystatechange=function(){if("loaded"==h.readyState||"complete"==h.readyState)a.loaded(),a.resume()}):h.onload=function(){h.onload=null;a.loaded()};h.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path;b.head.appendChild(h)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),\na.loaded()):a.pause()},goog.Es6ModuleDependency=function(a,b,c,d,e){goog.Dependency.call(this,a,b,c,d,e)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(a){function b(l,m){var n=m?\'<script type="module" crossorigin>\'+m+"\\x3c/script>":\'<script type="module" crossorigin src="\'+l+\'">\\x3c/script>\';d.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(n):n)}function c(l,m){var n=d.createElement("script");n.defer=!0;n.async=!1;\nn.type="module";n.setAttribute("crossorigin",!0);var p=goog.getScriptNonce();p&&n.setAttribute("nonce",p);m?n.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(m):m:n.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(l):l;d.head.appendChild(n)}if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?a.loaded():a.pause();else if(goog.inHtmlDocument_()){var d=goog.global.document,e=this;if(goog.isDocumentLoading_()){var f=\nb;goog.Dependency.defer_=!0}else f=c;var g=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(g);a.setModuleState(goog.ModuleType.ES6)});f(void 0,\'goog.Dependency.callback_("\'+g+\'")\');f(this.path,void 0);var h=goog.Dependency.registerCallback_(function(l){goog.Dependency.unregisterCallback_(h);a.registerEs6ModuleExports(e.path,l,goog.moduleLoaderState_.moduleName)});f(void 0,\'import * as m from "\'+this.path+\'"; goog.Dependency.callback_("\'+h+\'", m)\');var k=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(k);\na.clearModuleState();a.loaded()});f(void 0,\'goog.Dependency.callback_("\'+k+\'")\')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),a.pause()},goog.TransformedDependency=function(a,b,c,d,e){goog.Dependency.call(this,a,b,c,d,e);this.contents_=null;this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(a){function b(){e.contents_=\ngoog.loadFileSync_(e.path);e.contents_&&(e.contents_=e.transform(e.contents_),e.contents_&&(e.contents_+="\\n//# sourceURL="+e.path))}function c(){e.lazyFetch_&&b();if(e.contents_){f&&a.setModuleState(goog.ModuleType.ES6);try{var m=e.contents_;e.contents_=null;goog.globalEval(m);if(f)var n=goog.moduleLoaderState_.moduleName}finally{f&&a.clearModuleState()}f&&goog.global.$jscomp.require.ensure([e.getPathName()],function(){a.registerEs6ModuleExports(e.path,goog.global.$jscomp.require(e.getPathName()),\nn)});a.loaded()}}function d(){var m=goog.global.document,n=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(n);c()}),p=goog.getScriptNonce();p="<script"+(p?\' nonce="\'+p+\'"\':"")+">"+goog.protectScriptTag_(\'goog.Dependency.callback_("\'+n+\'");\')+"\\x3c/script>";m.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(p):p)}var e=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)b(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=\nnull,a.loaded()):a.pause();else{var f=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||b();var g=1<a.pending().length,h=g&&goog.DebugLoader_.IS_OLD_IE_;g=goog.Dependency.defer_&&(g||goog.isDocumentLoading_());if(h||g)a.defer(function(){c()});else{var k=goog.global.document;h=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global;if(f&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!h){goog.Dependency.defer_=!0;a.pause();var l=k.onreadystatechange;k.onreadystatechange=function(){"interactive"==\nk.readyState&&(k.onreadystatechange=l,c(),a.resume());goog.isFunction(l)&&l.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?d():c()}}},goog.TransformedDependency.prototype.transform=function(a){},goog.TranspiledDependency=function(a,b,c,d,e,f){goog.TransformedDependency.call(this,a,b,c,d,e);this.transpiler=f},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(a){return this.transpiler.transpile(a,\nthis.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(a,b,c,d,e){goog.TransformedDependency.call(this,a,b,c,d,e)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(a){return a},goog.GoogModuleDependency=function(a,b,c,d,e,f,g){goog.TransformedDependency.call(this,a,b,c,d,e);this.needsTranspile_=f;this.transpiler_=g},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=\nfunction(a){this.needsTranspile_&&(a=this.transpiler_.transpile(a,this.getPathName()));return goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(a+"\\n//# sourceURL="+this.path+"\\n")+");":\'goog.loadModule(function(exports) {"use strict";\'+a+"\\n;return exports});\\n//# sourceURL="+this.path+"\\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(a,b,c,\nd){b=b||[];a=a.replace(/\\\\/g,"/");var e=goog.normalizePath_(goog.basePath+a);d&&"boolean"!==typeof d||(d=d?{module:goog.ModuleType.GOOG}:{});c=this.factory_.createDependency(e,a,b,c,d,goog.transpiler_.needsTranspile(d.lang||"es3",d.module));this.dependencies_[e]=c;for(c=0;c<b.length;c++)this.idToPath_[b[c]]=e;this.idToPath_[a]=e},goog.DependencyFactory=function(a){this.transpiler=a},goog.DependencyFactory.prototype.createDependency=function(a,b,c,d,e,f){return e.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(a,\nb,c,d,e,f,this.transpiler):f?new goog.TranspiledDependency(a,b,c,d,e,this.transpiler):e.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(a,b,c,d,e):new goog.Es6ModuleDependency(a,b,c,d,e):new goog.Dependency(a,b,c,d,e)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(a){goog.debugLoader_.setDependencyFactory(a)},goog.TRUSTED_TYPES_POLICY_=\ngoog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(a,b){goog.debugLoader_.bootstrap(a,b)});goog.TRUSTED_TYPES_POLICY_NAME="goog";goog.identity_=function(a){return a};goog.createTrustedTypesPolicy=function(a){var b=null,c=goog.global.trustedTypes;if(!c||!c.createPolicy)return b;try{b=c.createPolicy(a,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(d){goog.logToConsole_(d.message)}return b};/*\n @license\n Shaka Player\n Copyright 2016 Google LLC\n SPDX-License-Identifier: Apache-2.0\n*/\ngoog.asserts=function(){};goog.asserts.assert=function(a,b){};goog.asserts.ENABLE_ASSERTS=!0;goog.asserts.ENABLE_ASSERTS&&console.assert&&console.assert.bind&&(goog.asserts.assert=console.assert.bind(console));var shaka={abr:{}};shaka.abr.Ewma=function(a){goog.asserts.assert(0<a,"expected halfLife to be positive");this.alpha_=Math.exp(Math.log(.5)/a);this.totalWeight_=this.estimate_=0};shaka.abr.Ewma.prototype.sample=function(a,b){var c=Math.pow(this.alpha_,a);c=b*(1-c)+c*this.estimate_;isNaN(c)||(this.estimate_=c,this.totalWeight_+=a)};shaka.abr.Ewma.prototype.getEstimate=function(){return this.estimate_/(1-Math.pow(this.alpha_,this.totalWeight_))};shaka.abr.EwmaBandwidthEstimator=function(){this.fast_=new shaka.abr.Ewma(2);this.slow_=new shaka.abr.Ewma(5);this.bytesSampled_=0;this.minTotalBytes_=128E3;this.minBytes_=16E3};shaka.abr.EwmaBandwidthEstimator.prototype.sample=function(a,b){if(!(b<this.minBytes_)){var c=8E3*b/a,d=a/1E3;this.bytesSampled_+=b;this.fast_.sample(d,c);this.slow_.sample(d,c)}};\nshaka.abr.EwmaBandwidthEstimator.prototype.getBandwidthEstimate=function(a){return this.bytesSampled_<this.minTotalBytes_?a:Math.min(this.fast_.getEstimate(),this.slow_.getEstimate())};shaka.abr.EwmaBandwidthEstimator.prototype.hasGoodEstimate=function(){return this.bytesSampled_>=this.minTotalBytes_};shaka.log=function(){};shaka.log.alwaysError=function(a){};shaka.log.alwaysWarn=function(a){};shaka.log.warnOnce=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];shaka.log.oneTimeWarningIssued_.has(a)||(shaka.log.oneTimeWarningIssued_.add(a),shaka.log.alwaysWarn.apply(shaka.log,$jscomp.arrayFromIterable(c)))};shaka.log.error=function(a){};shaka.log.warning=function(a){};shaka.log.info=function(a){};shaka.log.debug=function(a){};shaka.log.v1=function(a){};shaka.log.v2=function(a){};\nshaka.log.Level={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,V1:5,V2:6};shaka.log.MAX_LOG_LEVEL=4;shaka.log.oneTimeWarningIssued_=new Set;\nif(window.console&&window.console.log.bind){var $jscomp$compprop0={};shaka.log.logMap_=($jscomp$compprop0[shaka.log.Level.ERROR]=console.error.bind(console),$jscomp$compprop0[shaka.log.Level.WARNING]=console.warn.bind(console),$jscomp$compprop0[shaka.log.Level.INFO]=console.info.bind(console),$jscomp$compprop0[shaka.log.Level.DEBUG]=console.log.bind(console),$jscomp$compprop0[shaka.log.Level.V1]=console.debug.bind(console),$jscomp$compprop0[shaka.log.Level.V2]=console.debug.bind(console),$jscomp$compprop0);\nshaka.log.alwaysWarn=shaka.log.logMap_[shaka.log.Level.WARNING];shaka.log.alwaysError=shaka.log.logMap_[shaka.log.Level.ERROR];goog.DEBUG?(goog.exportSymbol("shaka.log",shaka.log),shaka.log.setLevel=function(a){var b=function(c){return c<=a?(goog.asserts.assert(shaka.log.logMap_[c],"Unexpected log level"),shaka.log.logMap_[c]):function(){}};shaka.log.currentLevel=a;shaka.log.error=b(shaka.log.Level.ERROR);shaka.log.warning=b(shaka.log.Level.WARNING);shaka.log.info=b(shaka.log.Level.INFO);shaka.log.debug=\nb(shaka.log.Level.DEBUG);shaka.log.v1=b(shaka.log.Level.V1);shaka.log.v2=b(shaka.log.Level.V2)},shaka.log.setLevel(shaka.log.MAX_LOG_LEVEL)):(shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.ERROR&&(shaka.log.error=shaka.log.logMap_[shaka.log.Level.ERROR]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.WARNING&&(shaka.log.warning=shaka.log.logMap_[shaka.log.Level.WARNING]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.INFO&&(shaka.log.info=shaka.log.logMap_[shaka.log.Level.INFO]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.DEBUG&&\n(shaka.log.debug=shaka.log.logMap_[shaka.log.Level.DEBUG]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.V1&&(shaka.log.v1=shaka.log.logMap_[shaka.log.Level.V1]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.V2&&(shaka.log.v2=shaka.log.logMap_[shaka.log.Level.V2]))};shaka.util={};shaka.util.Iterables=function(){};shaka.util.Iterables.map=function(a,b){for(var c=[],d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next())c.push(b(e.value));return c};shaka.util.Iterables.every=function(a,b){for(var c=$jscomp.makeIterator(a),d=c.next();!d.done;d=c.next())if(!b(d.value))return!1;return!0};shaka.util.Iterables.some=function(a,b){for(var c=$jscomp.makeIterator(a),d=c.next();!d.done;d=c.next())if(b(d.value))return!0;return!1};\nshaka.util.Iterables.filter=function(a,b){for(var c=[],d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next())e=e.value,b(e)&&c.push(e);return c};shaka.util.Iterables.range=function $jscomp$generator$function(a){var c;return $jscomp.generator.createGenerator($jscomp$generator$function,function(d){1==d.nextAddress&&(c=0);if(3!=d.nextAddress)return c<a?d.yield(c,3):d.jumpTo(0);c++;return d.jumpTo(2)})};\nshaka.util.Iterables.enumerate=function $jscomp$generator$function(a){var c,d,e,f,g,h;return $jscomp.generator.createGenerator($jscomp$generator$function,function(k){1==k.nextAddress&&(c=-1,e=d=void 0,f=$jscomp.makeIterator(a),g=f.next());if(5!=k.nextAddress){if(g.done)return-1==c?k.jumpTo(0):k.yield({i:c,prev:d,item:e,next:void 0},0);h=g.value;return 0<=c?k.yield({i:c,item:e,prev:d,next:h},5):k.jumpTo(5)}c++;d=e;e=h;g=f.next();return k.jumpTo(2)})};shaka.util.BufferUtils=function(){};shaka.util.BufferUtils.equal=function(a,b){var c=shaka.util.BufferUtils;if(!a&&!b)return!0;if(!a||!b||a.byteLength!=b.byteLength)return!1;if(c.unsafeGetArrayBuffer_(a)==c.unsafeGetArrayBuffer_(b)&&(a.byteOffset||0)==(b.byteOffset||0))return!0;c=shaka.util.BufferUtils.toUint8(a);for(var d=shaka.util.BufferUtils.toUint8(b),e=$jscomp.makeIterator(shaka.util.Iterables.range(a.byteLength)),f=e.next();!f.done;f=e.next())if(f=f.value,c[f]!=d[f])return!1;return!0};\nshaka.util.BufferUtils.unsafeGetArrayBuffer_=function(a){return a instanceof ArrayBuffer?a:a.buffer};shaka.util.BufferUtils.toArrayBuffer=function(a){return a instanceof ArrayBuffer?a:0==a.byteOffset&&a.byteLength==a.buffer.byteLength?a.buffer:(new Uint8Array(a)).buffer};shaka.util.BufferUtils.toUint8=function(a,b,c){c=void 0===c?Infinity:c;return shaka.util.BufferUtils.view_(a,void 0===b?0:b,c,Uint8Array)};\nshaka.util.BufferUtils.toDataView=function(a,b,c){c=void 0===c?Infinity:c;return shaka.util.BufferUtils.view_(a,void 0===b?0:b,c,DataView)};shaka.util.BufferUtils.view_=function(a,b,c,d){var e=shaka.util.BufferUtils.unsafeGetArrayBuffer_(a),f=(a.byteOffset||0)+a.byteLength;a=Math.max(0,Math.min((a.byteOffset||0)+b,f));return new d(e,a,Math.min(a+Math.max(c,0),f)-a)};goog.exportSymbol("shaka.util.BufferUtils",shaka.util.BufferUtils);goog.exportProperty(shaka.util.BufferUtils,"toDataView",shaka.util.BufferUtils.toDataView);\ngoog.exportProperty(shaka.util.BufferUtils,"toUint8",shaka.util.BufferUtils.toUint8);goog.exportProperty(shaka.util.BufferUtils,"toArrayBuffer",shaka.util.BufferUtils.toArrayBuffer);goog.exportProperty(shaka.util.BufferUtils,"equal",shaka.util.BufferUtils.equal);shaka.util.Error=function(a,b,c,d){for(var e=[],f=3;f<arguments.length;++f)e[f-3]=arguments[f];this.severity=a;this.category=b;this.code=c;this.data=e;this.handled=!1;if(goog.DEBUG){f=e="UNKNOWN";for(var g in shaka.util.Error.Category)shaka.util.Error.Category[g]==this.category&&(e=g);for(var h in shaka.util.Error.Code)shaka.util.Error.Code[h]==this.code&&(f=h);this.message="Shaka Error "+e+"."+f+" ("+this.data.toString()+")";if(shaka.util.Error.createStack)try{throw Error(this.message);}catch(k){this.stack=\nk.stack}}};shaka.util.Error.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")};goog.exportSymbol("shaka.util.Error",shaka.util.Error);goog.DEBUG&&(shaka.util.Error.createStack=!0);shaka.util.Error.Severity={RECOVERABLE:1,CRITICAL:2};goog.exportProperty(shaka.util.Error,"Severity",shaka.util.Error.Severity);shaka.util.Error.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10};\ngoog.exportProperty(shaka.util.Error,"Category",shaka.util.Error.Category);\nshaka.util.Error.Code={UNSUPPORTED_SCHEME:1E3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2E3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,\nTEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,BUFFER_READ_OUT_OF_BOUNDS:3E3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,\nMEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4E3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,\nHLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,\nHLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6E3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,\nENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7E3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8E3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9E3,\nINDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,CS_IMA_SDK_MISSING:1E4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};\ngoog.exportProperty(shaka.util.Error,"Code",shaka.util.Error.Code);shaka.util.Lazy=function(a){this.gen_=a;this.value_=void 0};shaka.util.Lazy.prototype.value=function(){void 0==this.value_&&(this.value_=this.gen_(),goog.asserts.assert(void 0!=this.value_,"Unable to create lazy value"));return this.value_};shaka.util.Lazy.prototype.reset=function(){this.value_=void 0};shaka.util.StringUtils=function(){};shaka.util.StringUtils.fromUTF8=function(a){if(!a)return"";a=shaka.util.BufferUtils.toUint8(a);239==a[0]&&187==a[1]&&191==a[2]&&(a=a.subarray(3));a=(new TextDecoder).decode(a);a.includes("\\ufffd")&&shaka.log.alwaysError(\'Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!\');return a};\nshaka.util.StringUtils.fromUTF16=function(a,b,c){if(!a)return"";if(!c&&0!=a.byteLength%2)throw shaka.log.error("Data has an incorrect length, must be even."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BAD_ENCODING);var d=Math.floor(a.byteLength/2);c=new Uint16Array(d);a=shaka.util.BufferUtils.toDataView(a);d=$jscomp.makeIterator(shaka.util.Iterables.range(d));for(var e=d.next();!e.done;e=d.next())e=e.value,c[e]=a.getUint16(2*e,b);return shaka.util.StringUtils.fromCharCode(c)};\nshaka.util.StringUtils.fromBytesAutoDetect=function(a){var b=shaka.util.StringUtils;if(!a)return"";var c=shaka.util.BufferUtils.toUint8(a);if(239==c[0]&&187==c[1]&&191==c[2])return b.fromUTF8(c);if(254==c[0]&&255==c[1])return b.fromUTF16(c.subarray(2),!1);if(255==c[0]&&254==c[1])return b.fromUTF16(c.subarray(2),!0);var d=function(e){return c.byteLength<=e||32<=c[e]&&126>=c[e]};shaka.log.debug("Unable to find byte-order-mark, making an educated guess.");if(0==c[0]&&0==c[2])return b.fromUTF16(a,!1);\nif(0==c[1]&&0==c[3])return b.fromUTF16(a,!0);if(d(0)&&d(1)&&d(2)&&d(3))return b.fromUTF8(a);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.UNABLE_TO_DETECT_ENCODING);};shaka.util.StringUtils.toUTF8=function(a){var b=new TextEncoder;return shaka.util.BufferUtils.toArrayBuffer(b.encode(a))};\nshaka.util.StringUtils.toUTF16=function(a,b){for(var c=new ArrayBuffer(2*a.length),d=new DataView(c),e=$jscomp.makeIterator(shaka.util.Iterables.enumerate(a)),f=e.next();!f.done;f=e.next()){var g=f.value;f=g.i;g=g.item.charCodeAt(0);d.setUint16(2*f,g,b)}return c};shaka.util.StringUtils.fromCharCode=function(a){return shaka.util.StringUtils.fromCharCodeImpl_.value()(a)};shaka.util.StringUtils.resetFromCharCode=function(){shaka.util.StringUtils.fromCharCodeImpl_.reset()};\ngoog.exportSymbol("shaka.util.StringUtils",shaka.util.StringUtils);goog.exportProperty(shaka.util.StringUtils,"resetFromCharCode",shaka.util.StringUtils.resetFromCharCode);goog.exportProperty(shaka.util.StringUtils,"toUTF16",shaka.util.StringUtils.toUTF16);goog.exportProperty(shaka.util.StringUtils,"toUTF8",shaka.util.StringUtils.toUTF8);goog.exportProperty(shaka.util.StringUtils,"fromBytesAutoDetect",shaka.util.StringUtils.fromBytesAutoDetect);\ngoog.exportProperty(shaka.util.StringUtils,"fromUTF16",shaka.util.StringUtils.fromUTF16);goog.exportProperty(shaka.util.StringUtils,"fromUTF8",shaka.util.StringUtils.fromUTF8);\nshaka.util.StringUtils.fromCharCodeImpl_=new shaka.util.Lazy(function(){for(var a=function(c){try{var d=new Uint8Array(c),e=String.fromCharCode.apply(null,d);goog.asserts.assert(e,"Should get value");return 0<e.length}catch(f){return!1}},b={$jscomp$loop$prop$size$561:65536};0<b.$jscomp$loop$prop$size$561;b={$jscomp$loop$prop$size$561:b.$jscomp$loop$prop$size$561},b.$jscomp$loop$prop$size$561/=2)if(a(b.$jscomp$loop$prop$size$561))return function(c){return function(d){for(var e="",f=0;f<d.length;f+=\nc.$jscomp$loop$prop$size$561){var g=d.subarray(f,f+c.$jscomp$loop$prop$size$561);e+=String.fromCharCode.apply(null,g)}return e}}(b);goog.asserts.assert(!1,"Unable to create a fromCharCode method");return null});shaka.util.DataViewReader=function(a,b){this.dataView_=shaka.util.BufferUtils.toDataView(a);this.littleEndian_=b==shaka.util.DataViewReader.Endianness.LITTLE_ENDIAN;this.position_=0};shaka.util.DataViewReader.prototype.getDataView=function(){return this.dataView_};shaka.util.DataViewReader.prototype.hasMoreData=function(){return this.position_<this.dataView_.byteLength};shaka.util.DataViewReader.prototype.getPosition=function(){return this.position_};\nshaka.util.DataViewReader.prototype.getLength=function(){return this.dataView_.byteLength};shaka.util.DataViewReader.prototype.readUint8=function(){try{var a=this.dataView_.getUint8(this.position_);this.position_+=1;return a}catch(b){throw this.outOfBounds_();}};shaka.util.DataViewReader.prototype.readUint16=function(){try{var a=this.dataView_.getUint16(this.position_,this.littleEndian_);this.position_+=2;return a}catch(b){throw this.outOfBounds_();}};\nshaka.util.DataViewReader.prototype.readUint32=function(){try{var a=this.dataView_.getUint32(this.position_,this.littleEndian_);this.position_+=4;return a}catch(b){throw this.outOfBounds_();}};shaka.util.DataViewReader.prototype.readInt32=function(){try{var a=this.dataView_.getInt32(this.position_,this.littleEndian_);this.position_+=4;return a}catch(b){throw this.outOfBounds_();}};\nshaka.util.DataViewReader.prototype.readUint64=function(){try{if(this.littleEndian_){var a=this.dataView_.getUint32(this.position_,!0);var b=this.dataView_.getUint32(this.position_+4,!0)}else b=this.dataView_.getUint32(this.position_,!1),a=this.dataView_.getUint32(this.position_+4,!1)}catch(c){throw this.outOfBounds_();}if(2097151<b)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);this.position_+=8;return b*Math.pow(2,\n32)+a};shaka.util.DataViewReader.prototype.readBytes=function(a){goog.asserts.assert(0<=a,"Bad call to DataViewReader.readBytes");if(this.position_+a>this.dataView_.byteLength)throw this.outOfBounds_();var b=shaka.util.BufferUtils.toUint8(this.dataView_,this.position_,a);this.position_+=a;return b};\nshaka.util.DataViewReader.prototype.skip=function(a){goog.asserts.assert(0<=a,"Bad call to DataViewReader.skip");if(this.position_+a>this.dataView_.byteLength)throw this.outOfBounds_();this.position_+=a};shaka.util.DataViewReader.prototype.rewind=function(a){goog.asserts.assert(0<=a,"Bad call to DataViewReader.rewind");if(this.position_<a)throw this.outOfBounds_();this.position_-=a};\nshaka.util.DataViewReader.prototype.seek=function(a){goog.asserts.assert(0<=a,"Bad call to DataViewReader.seek");if(0>a||a>this.dataView_.byteLength)throw this.outOfBounds_();this.position_=a};shaka.util.DataViewReader.prototype.readTerminatedString=function(){for(var a=this.position_;this.hasMoreData()&&0!=this.dataView_.getUint8(this.position_);)this.position_+=1;a=shaka.util.BufferUtils.toUint8(this.dataView_,a,this.position_-a);this.position_+=1;return shaka.util.StringUtils.fromUTF8(a)};\nshaka.util.DataViewReader.prototype.outOfBounds_=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS)};goog.exportSymbol("shaka.util.DataViewReader",shaka.util.DataViewReader);goog.exportProperty(shaka.util.DataViewReader.prototype,"readTerminatedString",shaka.util.DataViewReader.prototype.readTerminatedString);goog.exportProperty(shaka.util.DataViewReader.prototype,"seek",shaka.util.DataViewReader.prototype.seek);\ngoog.exportProperty(shaka.util.DataViewReader.prototype,"rewind",shaka.util.DataViewReader.prototype.rewind);goog.exportProperty(shaka.util.DataViewReader.prototype,"skip",shaka.util.DataViewReader.prototype.skip);goog.exportProperty(shaka.util.DataViewReader.prototype,"readBytes",shaka.util.DataViewReader.prototype.readBytes);goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint64",shaka.util.DataViewReader.prototype.readUint64);\ngoog.exportProperty(shaka.util.DataViewReader.prototype,"readInt32",shaka.util.DataViewReader.prototype.readInt32);goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint32",shaka.util.DataViewReader.prototype.readUint32);goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint16",shaka.util.DataViewReader.prototype.readUint16);goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint8",shaka.util.DataViewReader.prototype.readUint8);\ngoog.exportProperty(shaka.util.DataViewReader.prototype,"getLength",shaka.util.DataViewReader.prototype.getLength);goog.exportProperty(shaka.util.DataViewReader.prototype,"getPosition",shaka.util.DataViewReader.prototype.getPosition);goog.exportProperty(shaka.util.DataViewReader.prototype,"hasMoreData",shaka.util.DataViewReader.prototype.hasMoreData);shaka.util.DataViewReader.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:1};goog.exportProperty(shaka.util.DataViewReader,"Endianness",shaka.util.DataViewReader.Endianness);shaka.deprecate={};shaka.deprecate.Version=function(a,b){this.major_=a;this.minor_=b};shaka.deprecate.Version.prototype.major=function(){return this.major_};shaka.deprecate.Version.prototype.minor=function(){return this.minor_};shaka.deprecate.Version.prototype.compareTo=function(a){var b=this.minor_-a.minor_;return this.major_-a.major_||b};shaka.deprecate.Version.prototype.toString=function(){return"v"+this.major_+"."+this.minor_};\nshaka.deprecate.Version.parse=function(a){a=a.substring(1).split(".",2);return new shaka.deprecate.Version(Number(a[0]),Number(a[1]))};shaka.deprecate.Enforcer=function(a,b,c){this.libraryVersion_=a;this.onPending_=b;this.onExpired_=c};shaka.deprecate.Enforcer.prototype.enforce=function(a,b,c){(0<a.compareTo(this.libraryVersion_)?this.onPending_:this.onExpired_)(this.libraryVersion_,a,b,c)};shaka.Deprecate=function(){};shaka.Deprecate.init=function(a){goog.asserts.assert(null==shaka.Deprecate.enforcer_,"Deprecate.init should only be called once.");shaka.Deprecate.enforcer_=new shaka.deprecate.Enforcer(shaka.deprecate.Version.parse(a),shaka.Deprecate.onPending_,shaka.Deprecate.onExpired_)};\nshaka.Deprecate.deprecateFeature=function(a,b,c){var d=shaka.Deprecate.enforcer_;goog.asserts.assert(d,"Missing deprecation enforcer. Was |init| called?");a=new shaka.deprecate.Version(a,0);d.enforce(a,b,c)};shaka.Deprecate.onPending_=function(a,b,c,d){shaka.log.alwaysWarn([c,"has been deprecated and will be removed in",b,". We are currently at version",a,". Additional information:",d].join(" "))};\nshaka.Deprecate.onExpired_=function(a,b,c,d){a=[c,"has been deprecated and has been removed in",b,". We are now at version",a,". Additional information:",d].join("");shaka.log.alwaysError(a);goog.asserts.assert(!1,a)};shaka.Deprecate.enforcer_=null;shaka.util.Functional=function(){};shaka.util.Functional.createFallbackPromiseChain=function(a,b){return a.reduce(function(c,d){return c["catch"](function(){return b(d)})},Promise.reject())};shaka.util.Functional.collapseArrays=function(a,b){return a.concat(b)};shaka.util.Functional.ignored=function(a){};shaka.util.Functional.noop=function(){};shaka.util.Functional.isNotNull=function(a){return null!=a};\nshaka.util.Functional.callFactory=function(a){var b=Object.create(a.prototype||Object.prototype);try{var c=a.call(b);c||(shaka.Deprecate.deprecateFeature(4,"Factories requiring new","Factories should be plain functions"),c=b)}catch(d){shaka.Deprecate.deprecateFeature(4,"Factories requiring new","Factories should be plain functions"),c=new a}return c};shaka.util.Mp4Parser=function(){this.headers_=[];this.boxDefinitions_=[];this.done_=!1};shaka.util.Mp4Parser.prototype.box=function(a,b){var c=shaka.util.Mp4Parser.typeFromString_(a);this.headers_[c]=shaka.util.Mp4Parser.BoxType_.BASIC_BOX;this.boxDefinitions_[c]=b;return this};shaka.util.Mp4Parser.prototype.fullBox=function(a,b){var c=shaka.util.Mp4Parser.typeFromString_(a);this.headers_[c]=shaka.util.Mp4Parser.BoxType_.FULL_BOX;this.boxDefinitions_[c]=b;return this};\nshaka.util.Mp4Parser.prototype.stop=function(){this.done_=!0};shaka.util.Mp4Parser.prototype.parse=function(a,b,c){a=new shaka.util.DataViewReader(a,shaka.util.DataViewReader.Endianness.BIG_ENDIAN);for(this.done_=!1;a.hasMoreData()&&!this.done_;)this.parseNext(0,a,b,c)};\nshaka.util.Mp4Parser.prototype.parseNext=function(a,b,c,d){var e=b.getPosition(),f=b.readUint32(),g=b.readUint32(),h=shaka.util.Mp4Parser.typeToString(g),k=!1;shaka.log.v2("Parsing MP4 box",h);switch(f){case 0:f=b.getLength()-e;break;case 1:f=b.readUint64(),k=!0}if(h=this.boxDefinitions_[g]){var l=null,m=null;this.headers_[g]==shaka.util.Mp4Parser.BoxType_.FULL_BOX&&(m=b.readUint32(),l=m>>>24,m&=16777215);g=e+f;c&&g>b.getLength()&&(g=b.getLength());d&&g>b.getLength()?this.done_=!0:(d=g-b.getPosition(),\nb=0<d?b.readBytes(d):new Uint8Array(0),b=new shaka.util.DataViewReader(b,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),h({parser:this,partialOkay:c||!1,version:l,flags:m,reader:b,size:f,start:e+a,has64BitSize:k}))}else a=Math.min(e+f-b.getPosition(),b.getLength()-b.getPosition()),b.skip(a)};shaka.util.Mp4Parser.children=function(a){for(var b=shaka.util.Mp4Parser.headerSize(a);a.reader.hasMoreData()&&!a.parser.done_;)a.parser.parseNext(a.start+b,a.reader,a.partialOkay)};\nshaka.util.Mp4Parser.sampleDescription=function(a){var b=shaka.util.Mp4Parser.headerSize(a),c=a.reader.readUint32();c=$jscomp.makeIterator(shaka.util.Iterables.range(c));for(var d=c.next();!d.done&&(shaka.util.Functional.ignored(d.value),a.parser.parseNext(a.start+b,a.reader,a.partialOkay),!a.parser.done_);d=c.next());};shaka.util.Mp4Parser.allData=function(a){return function(b){var c=b.reader.getLength()-b.reader.getPosition();a(b.reader.readBytes(c))}};\nshaka.util.Mp4Parser.typeFromString_=function(a){goog.asserts.assert(4==a.length,"Mp4 box names must be 4 characters long");var b=0;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())b=b<<8|c.value.charCodeAt(0);return b};shaka.util.Mp4Parser.typeToString=function(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)};shaka.util.Mp4Parser.headerSize=function(a){return 8+(a.has64BitSize?8:0)+(null!=a.flags?4:0)};goog.exportSymbol("shaka.util.Mp4Parser",shaka.util.Mp4Parser);\ngoog.exportProperty(shaka.util.Mp4Parser,"headerSize",shaka.util.Mp4Parser.headerSize);goog.exportProperty(shaka.util.Mp4Parser,"typeToString",shaka.util.Mp4Parser.typeToString);goog.exportProperty(shaka.util.Mp4Parser,"allData",shaka.util.Mp4Parser.allData);goog.exportProperty(shaka.util.Mp4Parser,"sampleDescription",shaka.util.Mp4Parser.sampleDescription);goog.exportProperty(shaka.util.Mp4Parser,"children",shaka.util.Mp4Parser.children);\ngoog.exportProperty(shaka.util.Mp4Parser.prototype,"parseNext",shaka.util.Mp4Parser.prototype.parseNext);goog.exportProperty(shaka.util.Mp4Parser.prototype,"parse",shaka.util.Mp4Parser.prototype.parse);goog.exportProperty(shaka.util.Mp4Parser.prototype,"stop",shaka.util.Mp4Parser.prototype.stop);goog.exportProperty(shaka.util.Mp4Parser.prototype,"fullBox",shaka.util.Mp4Parser.prototype.fullBox);goog.exportProperty(shaka.util.Mp4Parser.prototype,"box",shaka.util.Mp4Parser.prototype.box);\nshaka.util.Mp4Parser.BoxType_={BASIC_BOX:0,FULL_BOX:1};shaka.util.DelayedTick=function(a){this.onTick_=a;this.cancelPending_=null};shaka.util.DelayedTick.prototype.tickAfter=function(a){var b=this;this.stop();var c=!0,d=null;this.cancelPending_=function(){window.clearTimeout(d);c=!1};d=window.setTimeout(function(){if(c)b.onTick_()},1E3*a);return this};shaka.util.DelayedTick.prototype.stop=function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)};shaka.util.Timer=function(a){this.onTick_=a;this.ticker_=null};shaka.util.Timer.prototype.tickNow=function(){this.stop();this.onTick_();return this};shaka.util.Timer.prototype.tickAfter=function(a){var b=this;this.stop();this.ticker_=(new shaka.util.DelayedTick(function(){b.onTick_()})).tickAfter(a);return this};shaka.util.Timer.prototype.tickEvery=function(a){var b=this;this.stop();this.ticker_=(new shaka.util.DelayedTick(function(){b.ticker_.tickAfter(a);b.onTick_()})).tickAfter(a);return this};\nshaka.util.Timer.prototype.stop=function(){this.ticker_&&(this.ticker_.stop(),this.ticker_=null)};goog.exportSymbol("shaka.util.Timer",shaka.util.Timer);goog.exportProperty(shaka.util.Timer.prototype,"stop",shaka.util.Timer.prototype.stop);goog.exportProperty(shaka.util.Timer.prototype,"tickEvery",shaka.util.Timer.prototype.tickEvery);goog.exportProperty(shaka.util.Timer.prototype,"tickAfter",shaka.util.Timer.prototype.tickAfter);goog.exportProperty(shaka.util.Timer.prototype,"tickNow",shaka.util.Timer.prototype.tickNow);shaka.util.Platform=function(){};shaka.util.Platform.supportsMediaSource=function(){return window.MediaSource&&MediaSource.isTypeSupported?!0:!1};shaka.util.Platform.supportsMediaType=function(a){return""!=shaka.util.Platform.anyMediaElement().canPlayType(a)};shaka.util.Platform.isEdge=function(){return navigator.userAgent.match(/Edge?\\//)?!0:!1};shaka.util.Platform.isLegacyEdge=function(){return navigator.userAgent.match(/Edge\\//)?!0:!1};shaka.util.Platform.isIE=function(){return shaka.util.Platform.userAgentContains_("Trident/")};\nshaka.util.Platform.isXboxOne=function(){return shaka.util.Platform.userAgentContains_("Xbox One")};shaka.util.Platform.isTizen=function(){return shaka.util.Platform.userAgentContains_("Tizen")};shaka.util.Platform.isTizen4=function(){return shaka.util.Platform.userAgentContains_("Tizen 4")};shaka.util.Platform.isTizen3=function(){return shaka.util.Platform.userAgentContains_("Tizen 3")};shaka.util.Platform.isTizen2=function(){return shaka.util.Platform.userAgentContains_("Tizen 2")};\nshaka.util.Platform.isWebOS=function(){return shaka.util.Platform.userAgentContains_("Web0S")};shaka.util.Platform.isChromecast=function(){return shaka.util.Platform.userAgentContains_("CrKey")};shaka.util.Platform.isChrome=function(){return shaka.util.Platform.userAgentContains_("Chrome")&&!shaka.util.Platform.isEdge()};shaka.util.Platform.isApple=function(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!shaka.util.Platform.isTizen()};\nshaka.util.Platform.safariVersion=function(){if(!shaka.util.Platform.isApple())return null;var a=navigator.userAgent.match(/Version\\/(\\d+)/);return a?parseInt(a[1],10):(a=navigator.userAgent.match(/OS (\\d+)(?:_\\d+)?/))?parseInt(a[1],10):null};shaka.util.Platform.isMobile=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:shaka.util.Platform.isApple()&&1<navigator.maxTouchPoints};shaka.util.Platform.userAgentContains_=function(a){return(navigator.userAgent||"").includes(a)};\nshaka.util.Platform.anyMediaElement=function(){var a=shaka.util.Platform;if(a.cachedMediaElement_)return a.cachedMediaElement_;a.cacheExpirationTimer_||(a.cacheExpirationTimer_=new shaka.util.Timer(function(){a.cachedMediaElement_=null}));a.cachedMediaElement_=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0];a.cachedMediaElement_||(a.cachedMediaElement_=document.createElement("video"));a.cacheExpirationTimer_.tickAfter(1);return a.cachedMediaElement_};\nshaka.util.Platform.requiresEncryptionInfoInAllInitSegments=function(){var a=shaka.util.Platform;return a.isTizen()||a.isXboxOne()};shaka.util.Platform.cacheExpirationTimer_=null;shaka.util.Platform.cachedMediaElement_=null;shaka.util.Uint8ArrayUtils=function(){};shaka.util.Uint8ArrayUtils.equal=function(a,b){shaka.Deprecate.deprecateFeature(4,"shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead.");return shaka.util.BufferUtils.equal(a,b)};shaka.util.Uint8ArrayUtils.toStandardBase64=function(a){a=shaka.util.StringUtils.fromCharCode(shaka.util.BufferUtils.toUint8(a));return btoa(a)};\nshaka.util.Uint8ArrayUtils.toBase64=function(a,b){b=void 0==b?!0:b;var c=shaka.util.Uint8ArrayUtils.toStandardBase64(a).replace(/\\+/g,"-").replace(/\\//g,"_");return b?c:c.replace(/[=]*$/,"")};shaka.util.Uint8ArrayUtils.fromBase64=function(a){var b=window.atob(a.replace(/-/g,"+").replace(/_/g,"/"));a=new Uint8Array(b.length);b=$jscomp.makeIterator(shaka.util.Iterables.enumerate(b));for(var c=b.next();!c.done;c=b.next())c=c.value,a[c.i]=c.item.charCodeAt(0);return a};\nshaka.util.Uint8ArrayUtils.fromHex=function(a){var b=a.length/2,c=new Uint8Array(b);b=$jscomp.makeIterator(shaka.util.Iterables.range(b));for(var d=b.next();!d.done;d=b.next())d=d.value,c[d]=window.parseInt(a.substr(2*d,2),16);return c};shaka.util.Uint8ArrayUtils.toHex=function(a){var b=shaka.util.BufferUtils.toUint8(a);a="";b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next())c=c.value,c=c.toString(16),1==c.length&&(c="0"+c),a+=c;return a};\nshaka.util.Uint8ArrayUtils.concat=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];var d=0,e=$jscomp.makeIterator(b);for(c=e.next();!c.done;c=e.next())d+=c.value.byteLength;d=new Uint8Array(d);e=0;b=$jscomp.makeIterator(b);for(c=b.next();!c.done;c=b.next())c=c.value,d.set(shaka.util.BufferUtils.toUint8(c),e),e+=c.byteLength;return d};goog.exportSymbol("shaka.util.Uint8ArrayUtils",shaka.util.Uint8ArrayUtils);goog.exportProperty(shaka.util.Uint8ArrayUtils,"concat",shaka.util.Uint8ArrayUtils.concat);\ngoog.exportProperty(shaka.util.Uint8ArrayUtils,"toHex",shaka.util.Uint8ArrayUtils.toHex);goog.exportProperty(shaka.util.Uint8ArrayUtils,"fromHex",shaka.util.Uint8ArrayUtils.fromHex);goog.exportProperty(shaka.util.Uint8ArrayUtils,"fromBase64",shaka.util.Uint8ArrayUtils.fromBase64);goog.exportProperty(shaka.util.Uint8ArrayUtils,"toBase64",shaka.util.Uint8ArrayUtils.toBase64);goog.exportProperty(shaka.util.Uint8ArrayUtils,"toStandardBase64",shaka.util.Uint8ArrayUtils.toStandardBase64);\ngoog.exportProperty(shaka.util.Uint8ArrayUtils,"equal",shaka.util.Uint8ArrayUtils.equal);shaka.media={};shaka.media.ContentWorkarounds=function(){};\nshaka.media.ContentWorkarounds.fakeEncryption=function(a){var b=shaka.media.ContentWorkarounds;a=shaka.util.BufferUtils.toUint8(a);var c=!1,d,e=[],f=function(l){e.push(l);shaka.util.Mp4Parser.children(l)},g=function(l){c=!0},h=[];(new shaka.util.Mp4Parser).box("moov",f).box("trak",f).box("mdia",f).box("minf",f).box("stbl",f).fullBox("stsd",function(l){d=l;e.push(l);shaka.util.Mp4Parser.sampleDescription(l)}).fullBox("encv",g).fullBox("enca",g).fullBox("avc1",function(l){h.push({box:l,newType:b.BOX_TYPE_ENCV_})}).fullBox("mp4a",\nfunction(l){h.push({box:l,newType:b.BOX_TYPE_ENCA_})}).parse(a);if(c)return shaka.log.debug("Init segment already indicates encryption."),a;if(0==h.length||!d)throw shaka.log.error("Failed to find boxes needed to fake encryption!"),shaka.log.v2("Failed init segment (hex):",shaka.util.Uint8ArrayUtils.toHex(a)),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.CONTENT_TRANSFORMATION_FAILED);h.reverse();f=$jscomp.makeIterator(h);for(g=f.next();!g.done;g=\nf.next()){g=g.value;var k=shaka.util.Mp4Parser.typeToString(g.newType);shaka.log.debug(\'Inserting "\'+k+\'" box into init segment.\');a=b.insertEncryptionMetadata_(a,d,g.box,e,g.newType)}return a};\nshaka.media.ContentWorkarounds.insertEncryptionMetadata_=function(a,b,c,d,e){var f=shaka.media.ContentWorkarounds,g=f.createEncryptionMetadata_(a,c,e);e=new Uint8Array(a.byteLength+g.byteLength);c=shaka.util.Platform.isXboxOne()?c.start:c.start+c.size;var h=a.subarray(0,c);a=a.subarray(c);e.set(h);e.set(g,c);e.set(a,c+g.byteLength);d=$jscomp.makeIterator(d);for(a=d.next();!a.done;a=d.next())a=a.value,goog.asserts.assert(a.start<c,"Ancestor MP4 box found in the wrong location!  Modified init segment will not make sense!"),\nf.updateBoxSize_(e,a.start,a.size+g.byteLength);f=shaka.util.BufferUtils.toDataView(e,b.start);b=shaka.util.Mp4Parser.headerSize(b);g=f.getUint32(b);f.setUint32(b,g+1);return e};\nshaka.media.ContentWorkarounds.createEncryptionMetadata_=function(a,b,c){var d=shaka.media.ContentWorkarounds,e=d.CANNED_SINF_BOX_.value(),f=a.subarray(b.start,b.start+b.size),g=shaka.util.BufferUtils.toDataView(f);a=new Uint8Array(b.size+e.byteLength);a.set(f,0);f=shaka.util.BufferUtils.toDataView(a);f.setUint32(d.BOX_TYPE_OFFSET_,c);a.set(e,b.size);c=g.getUint32(d.BOX_TYPE_OFFSET_);f.setUint32(b.size+d.CANNED_SINF_BOX_FORMAT_OFFSET_,c);d.updateBoxSize_(a,0,a.byteLength);return a};\nshaka.media.ContentWorkarounds.updateBoxSize_=function(a,b,c){var d=shaka.media.ContentWorkarounds;a=shaka.util.BufferUtils.toDataView(a,b);b=a.getUint32(d.BOX_SIZE_OFFSET_);0!=b&&(1==b?(a.setUint32(d.BOX_SIZE_64_OFFSET_,c>>32),a.setUint32(d.BOX_SIZE_64_OFFSET_+4,c&4294967295)):a.setUint32(d.BOX_SIZE_OFFSET_,c))};\nshaka.media.ContentWorkarounds.CANNED_SINF_BOX_=new shaka.util.Lazy(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});shaka.media.ContentWorkarounds.CANNED_SINF_BOX_FORMAT_OFFSET_=16;shaka.media.ContentWorkarounds.BOX_SIZE_OFFSET_=0;shaka.media.ContentWorkarounds.BOX_TYPE_OFFSET_=4;\nshaka.media.ContentWorkarounds.BOX_SIZE_64_OFFSET_=8;shaka.media.ContentWorkarounds.BOX_TYPE_ENCV_=1701733238;shaka.media.ContentWorkarounds.BOX_TYPE_ENCA_=1701733217;shaka.util.ArrayUtils=function(){};shaka.util.ArrayUtils.defaultEquals=function(a,b){return"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)?!0:a===b};shaka.util.ArrayUtils.remove=function(a,b){var c=a.indexOf(b);-1<c&&a.splice(c,1)};shaka.util.ArrayUtils.count=function(a,b){for(var c=0,d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next())c+=b(e.value)?1:0;return c};\nshaka.util.ArrayUtils.hasSameElements=function(a,b,c){c||(c=shaka.util.ArrayUtils.defaultEquals);if(a.length!=b.length)return!1;b=b.slice();var d={};a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;d={$jscomp$loop$prop$item$563:d.$jscomp$loop$prop$item$563},e=a.next()){d.$jscomp$loop$prop$item$563=e.value;e=b.findIndex(function(f){return function(g){return c(f.$jscomp$loop$prop$item$563,g)}}(d));if(-1==e)return!1;b[e]=b[b.length-1];b.pop()}return 0==b.length};\nshaka.util.ArrayUtils.equal=function(a,b,c){c||(c=shaka.util.ArrayUtils.defaultEquals);if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(!c(a[d],b[d]))return!1;return!0};shaka.text={};\nshaka.text.Cue=function(a,b,c){var d=shaka.text.Cue;this.startTime=a;this.direction=d.direction.HORIZONTAL_LEFT_TO_RIGHT;this.endTime=b;this.payload=c;this.region=new shaka.text.CueRegion;this.position=null;this.positionAlign=d.positionAlign.AUTO;this.size=0;this.textAlign=d.textAlign.CENTER;this.writingMode=d.writingMode.HORIZONTAL_TOP_TO_BOTTOM;this.lineInterpretation=d.lineInterpretation.LINE_NUMBER;this.line=null;this.lineHeight="";this.lineAlign=d.lineAlign.START;this.displayAlign=d.displayAlign.AFTER;\nthis.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="";this.fontWeight=d.fontWeight.NORMAL;this.fontStyle=d.fontStyle.NORMAL;this.linePadding=this.letterSpacing=this.fontFamily="";this.opacity=1;this.textDecoration=[];this.wrapLine=!0;this.id="";this.nestedCues=[];this.spacer=this.lineBreak=!1;this.cellResolution={columns:32,rows:15}};\nshaka.text.Cue.prototype.clone=function(){var a=new shaka.text.Cue(0,0,""),b;for(b in this)a[b]=this[b],a[b]&&a[b].constructor==Array&&(a[b]=a[b].slice());return a};\nshaka.text.Cue.equal=function(a,b){if(a.startTime!=b.startTime||a.endTime!=b.endTime||a.payload!=b.payload)return!1;for(var c in a)if("startTime"!=c&&"endTime"!=c&&"payload"!=c)if("nestedCues"==c){if(!shaka.util.ArrayUtils.equal(a.nestedCues,b.nestedCues,shaka.text.Cue.equal))return!1}else if("region"==c||"cellResolution"==c)for(var d in a[c]){if(a[c][d]!=b[c][d])return!1}else if(Array.isArray(a[c])){if(!shaka.util.ArrayUtils.equal(a[c],b[c]))return!1}else if(a[c]!=b[c])return!1;return!0};\ngoog.exportSymbol("shaka.text.Cue",shaka.text.Cue);shaka.text.Cue.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:"auto"};goog.exportProperty(shaka.text.Cue,"positionAlign",shaka.text.Cue.positionAlign);shaka.text.Cue.textAlign={LEFT:"left",RIGHT:"right",CENTER:"center",START:"start",END:"end"};goog.exportProperty(shaka.text.Cue,"textAlign",shaka.text.Cue.textAlign);shaka.text.Cue.displayAlign={BEFORE:"before",CENTER:"center",AFTER:"after"};\ngoog.exportProperty(shaka.text.Cue,"displayAlign",shaka.text.Cue.displayAlign);shaka.text.Cue.direction={HORIZONTAL_LEFT_TO_RIGHT:"ltr",HORIZONTAL_RIGHT_TO_LEFT:"rtl"};goog.exportProperty(shaka.text.Cue,"direction",shaka.text.Cue.direction);shaka.text.Cue.writingMode={HORIZONTAL_TOP_TO_BOTTOM:"horizontal-tb",VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};goog.exportProperty(shaka.text.Cue,"writingMode",shaka.text.Cue.writingMode);\nshaka.text.Cue.lineInterpretation={LINE_NUMBER:0,PERCENTAGE:1};goog.exportProperty(shaka.text.Cue,"lineInterpretation",shaka.text.Cue.lineInterpretation);shaka.text.Cue.lineAlign={CENTER:"center",START:"start",END:"end"};goog.exportProperty(shaka.text.Cue,"lineAlign",shaka.text.Cue.lineAlign);shaka.text.Cue.defaultTextColor={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};goog.exportProperty(shaka.text.Cue,"defaultTextColor",shaka.text.Cue.defaultTextColor);\nshaka.text.Cue.defaultTextBackgroundColor={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};goog.exportProperty(shaka.text.Cue,"defaultTextBackgroundColor",shaka.text.Cue.defaultTextBackgroundColor);shaka.text.Cue.fontWeight={NORMAL:400,BOLD:700};goog.exportProperty(shaka.text.Cue,"fontWeight",shaka.text.Cue.fontWeight);shaka.text.Cue.fontStyle={NORMAL:"normal",ITALIC:"italic",OBLIQUE:"oblique"};\ngoog.exportProperty(shaka.text.Cue,"fontStyle",shaka.text.Cue.fontStyle);shaka.text.Cue.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};goog.exportProperty(shaka.text.Cue,"textDecoration",shaka.text.Cue.textDecoration);\nshaka.text.CueRegion=function(){var a=shaka.text.CueRegion;this.id="";this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0;this.height=this.width=100;this.viewportAnchorUnits=this.widthUnits=this.heightUnits=a.units.PERCENTAGE;this.scroll=a.scrollMode.NONE};goog.exportSymbol("shaka.text.CueRegion",shaka.text.CueRegion);shaka.text.CueRegion.units={PX:0,PERCENTAGE:1,LINES:2};goog.exportProperty(shaka.text.CueRegion,"units",shaka.text.CueRegion.units);\nshaka.text.CueRegion.scrollMode={NONE:"",UP:"up"};goog.exportProperty(shaka.text.CueRegion,"scrollMode",shaka.text.CueRegion.scrollMode);shaka.cea={};shaka.cea.ICaptionDecoder=function(){};shaka.cea.ICaptionDecoder.prototype.extract=function(a,b){};shaka.cea.ICaptionDecoder.prototype.decode=function(){};shaka.cea.ICaptionDecoder.prototype.clear=function(){};shaka.cea.CeaUtils=function(){};\nshaka.cea.CeaUtils.getParsedCaption=function(a,b,c,d,e){if(d>=e)return null;for(var f=-1,g=-1,h=0;h<c.length;h++)if(c[h].some(function(x){return null!=x&&""!=x.getChar().trim()})){f=h;break}for(h=c.length-1;0<=h;h--)if(c[h].some(function(x){return null!=x&&""!=x.getChar().trim()})){g=h;break}if(-1===f||-1===g)return null;for(var k=h=!1,l=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,m=shaka.cea.CeaUtils.DEFAULT_BG_COLOR,n=shaka.cea.CeaUtils.createStyledCue(d,e,h,k,l,m);f<=g;f++){for(var p=c[f],q=-1,r=-1,t=\n0;t<p.length;t++)if(null!=p[t]&&""!==p[t].getChar().trim()){q=t;break}for(t=p.length-1;0<=t;t--)if(null!=p[t]&&""!==p[t].getChar().trim()){r=t;break}if(-1===q||-1===r)p=shaka.cea.CeaUtils.createLineBreakCue(d,e),a.nestedCues.push(p);else{for(;q<=r;q++)if(t=p[q]){var v=t.isUnderlined(),u=t.isItalicized(),y=t.getTextColor(),w=t.getBackgroundColor();if(v!=h||u!=k||y!=l||w!=m)n.payload&&a.nestedCues.push(n),n=shaka.cea.CeaUtils.createStyledCue(d,e,v,u,y,w),h=v,k=u,l=y,m=w;n.payload+=t.getChar()}else n.payload+=\n" ";n.payload&&a.nestedCues.push(n);f!==g&&(n=shaka.cea.CeaUtils.createLineBreakCue(d,e),a.nestedCues.push(n));n=shaka.cea.CeaUtils.createStyledCue(d,e,h,k,l,m)}}return a.nestedCues.length?{cue:a,stream:b}:null};shaka.cea.CeaUtils.createStyledCue=function(a,b,c,d,e,f){a=new shaka.text.Cue(a,b,"");c&&a.textDecoration.push(shaka.text.Cue.textDecoration.UNDERLINE);d&&(a.fontStyle=shaka.text.Cue.fontStyle.ITALIC);a.color=e;a.backgroundColor=f;return a};\nshaka.cea.CeaUtils.createLineBreakCue=function(a,b){var c=new shaka.text.Cue(a,b,"");c.lineBreak=!0;return c};shaka.cea.CeaUtils.StyledChar=function(a,b,c,d,e){this.character_=a;this.underline_=b;this.italics_=c;this.backgroundColor_=d;this.textColor_=e};shaka.cea.CeaUtils.StyledChar.prototype.getChar=function(){return this.character_};shaka.cea.CeaUtils.StyledChar.prototype.isUnderlined=function(){return this.underline_};shaka.cea.CeaUtils.StyledChar.prototype.isItalicized=function(){return this.italics_};\nshaka.cea.CeaUtils.StyledChar.prototype.getBackgroundColor=function(){return this.backgroundColor_};shaka.cea.CeaUtils.StyledChar.prototype.getTextColor=function(){return this.textColor_};shaka.cea.CeaUtils.DEFAULT_BG_COLOR="black";shaka.cea.CeaUtils.DEFAULT_TXT_COLOR="white";shaka.cea.Cea708Window=function(a){this.windowNum_=a;this.relativeToggle_=this.visible_=!1;this.colCount_=this.rowCount_=this.anchorId_=this.verticalAnchor_=this.horizontalAnchor_=0;this.justification_=shaka.cea.Cea708Window.TextJustification.CENTER;this.memory_=[];this.col_=this.row_=this.startTime_=0;this.underline_=this.italics_=!1;this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR;this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR;this.resetMemory();shaka.util.Functional.ignored(this.verticalAnchor_,\nthis.relativeToggle_,this.horizontalAnchor_,this.anchorId_,this.windowNum_)};shaka.cea.Cea708Window.prototype.defineWindow=function(a,b,c,d,e,f,g){this.visible_=a;this.verticalAnchor_=b;this.horizontalAnchor_=c;this.anchorId_=d;this.relativeToggle_=e;this.rowCount_=f;this.colCount_=g};shaka.cea.Cea708Window.prototype.resetMemory=function(){this.memory_=[];for(var a=0;a<shaka.cea.Cea708Window.MAX_ROWS;a++)this.memory_.push(this.createNewRow_())};\nshaka.cea.Cea708Window.prototype.createNewRow_=function(){for(var a=[],b=0;b<shaka.cea.Cea708Window.MAX_COLS;b++)a.push(null);return a};shaka.cea.Cea708Window.prototype.setCharacter=function(a){this.isPenInBounds_()&&(a=new shaka.cea.CeaUtils.StyledChar(a,this.underline_,this.italics_,this.backgroundColor_,this.textColor_),this.memory_[this.row_][this.col_]=a,this.col_++)};\nshaka.cea.Cea708Window.prototype.backspace=function(){!this.isPenInBounds_()||0>=this.col_&&0>=this.row_||(0>=this.col_?(this.col_=this.colCount_-1,this.row_--):this.col_--,this.memory_[this.row_][this.col_]=null)};shaka.cea.Cea708Window.prototype.isPenInBounds_=function(){var a=this.col_<this.colCount_&&0<=this.col_;return this.row_<this.rowCount_&&0<=this.row_&&a};shaka.cea.Cea708Window.prototype.isVisible=function(){return this.visible_};\nshaka.cea.Cea708Window.prototype.moveUpRows_=function(a){for(var b=0,c=a;c<shaka.cea.Cea708Window.MAX_ROWS;c++,b++)this.memory_[b]=this.memory_[c];for(c=0;c<a;c++,b++)this.memory_[b]=this.createNewRow_()};shaka.cea.Cea708Window.prototype.carriageReturn=function(){this.row_+1>=this.rowCount_?this.moveUpRows_(1):this.row_++;this.col_=0};shaka.cea.Cea708Window.prototype.horizontalCarriageReturn=function(){this.memory_[this.row_]=this.createNewRow_();this.col_=0};\nshaka.cea.Cea708Window.prototype.forceEmit=function(a,b){var c="svc"+b,d=shaka.cea.Cea708Window.TextJustification,e=new shaka.text.Cue(this.startTime_,a,"");e.textAlign=this.justification_===d.LEFT?shaka.text.Cue.textAlign.LEFT:this.justification_===d.RIGHT?shaka.text.Cue.textAlign.RIGHT:shaka.text.Cue.textAlign.CENTER;(c=shaka.cea.CeaUtils.getParsedCaption(e,c,this.memory_,this.startTime_,a))&&this.setStartTime(a);return c};\nshaka.cea.Cea708Window.prototype.setPenLocation=function(a,b){this.row_=a;this.col_=b};shaka.cea.Cea708Window.prototype.setPenBackgroundColor=function(a){this.backgroundColor_=a};shaka.cea.Cea708Window.prototype.setPenTextColor=function(a){this.textColor_=a};shaka.cea.Cea708Window.prototype.setPenUnderline=function(a){this.underline_=a};shaka.cea.Cea708Window.prototype.setPenItalics=function(a){this.italics_=a};\nshaka.cea.Cea708Window.prototype.resetPen=function(){this.col_=this.row_=0;this.italics_=this.underline_=!1;this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR;this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR};shaka.cea.Cea708Window.prototype.setJustification=function(a){this.justification_=a};shaka.cea.Cea708Window.prototype.display=function(){this.visible_=!0};shaka.cea.Cea708Window.prototype.hide=function(){this.visible_=!1};\nshaka.cea.Cea708Window.prototype.toggle=function(){this.visible_=!this.visible_};shaka.cea.Cea708Window.prototype.setStartTime=function(a){this.startTime_=a};shaka.cea.Cea708Window.TextJustification={LEFT:0,RIGHT:1,CENTER:2,FULL:3};shaka.cea.Cea708Window.MAX_COLS=42;shaka.cea.Cea708Window.MAX_ROWS=15;shaka.cea.DtvccPacketBuilder=function(){this.builtPackets_=[];this.currentPacketBeingBuilt_=null;this.bytesLeftToAddInCurrentPacket_=0};\nshaka.cea.DtvccPacketBuilder.prototype.addByte=function(a){a.type===shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_START?(this.bytesLeftToAddInCurrentPacket_=2*(a.value&63)-1,this.currentPacketBeingBuilt_=[]):this.currentPacketBeingBuilt_&&(0<this.bytesLeftToAddInCurrentPacket_&&(this.currentPacketBeingBuilt_.push(a),this.bytesLeftToAddInCurrentPacket_--),0===this.bytesLeftToAddInCurrentPacket_&&(a=new shaka.cea.DtvccPacket(this.currentPacketBeingBuilt_),this.builtPackets_.push(a),this.currentPacketBeingBuilt_=\nnull,this.bytesLeftToAddInCurrentPacket_=0))};shaka.cea.DtvccPacketBuilder.prototype.getBuiltPackets=function(){return this.builtPackets_};shaka.cea.DtvccPacketBuilder.prototype.clearBuiltPackets=function(){this.builtPackets_=[]};shaka.cea.DtvccPacketBuilder.prototype.clear=function(){this.builtPackets_=[];this.currentPacketBeingBuilt_=[];this.bytesLeftToAddInCurrentPacket_=0};shaka.cea.DtvccPacket=function(a){this.pos_=0;this.packetData_=a};\nshaka.cea.DtvccPacket.prototype.hasMoreData=function(){return this.pos_<this.packetData_.length};shaka.cea.DtvccPacket.prototype.getPosition=function(){return this.pos_};shaka.cea.DtvccPacket.prototype.readByte=function(){if(!this.hasMoreData())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS);return this.packetData_[this.pos_++]};\nshaka.cea.DtvccPacket.prototype.skip=function(a){if(this.pos_+a>this.packetData_.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS);this.pos_+=a};shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_DATA=2;shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_START=3;shaka.cea.Cea708Service=function(a){this.serviceNumber_=a;this.windows_=[null,null,null,null,null,null,null,null];this.currentWindow_=null};\nshaka.cea.Cea708Service.prototype.handleCea708ControlCode=function(a){var b=a.readByte(),c=b.value;b=b.pts;if(c===shaka.cea.Cea708Service.EXT_CEA708_CTRL_CODE_BYTE1){var d=a.readByte();c=c<<16|d.value}if(0<=c&&31>=c)return this.handleC0_(c,b);if(128<=c&&159>=c)return this.handleC1_(a,c,b);4096<=c&&4127>=c?this.handleC2_(a,c&255):4224<=c&&4255>=c?this.handleC3_(a,c&255):32<=c&&127>=c?this.handleG0_(c):160<=c&&255>=c?this.handleG1_(c):4128<=c&&4223>=c?this.handleG2_(c&255):4256<=c&&4351>=c&&this.handleG3_(c&\n255);return null};shaka.cea.Cea708Service.prototype.handleG0_=function(a){this.currentWindow_&&(127===a?this.currentWindow_.setCharacter("\\u266a"):this.currentWindow_.setCharacter(String.fromCharCode(a)))};shaka.cea.Cea708Service.prototype.handleG1_=function(a){this.currentWindow_&&this.currentWindow_.setCharacter(String.fromCharCode(a))};\nshaka.cea.Cea708Service.prototype.handleG2_=function(a){this.currentWindow_&&(shaka.cea.Cea708Service.G2Charset.has(a)?(a=shaka.cea.Cea708Service.G2Charset.get(a),this.currentWindow_.setCharacter(a)):this.currentWindow_.setCharacter("_"))};shaka.cea.Cea708Service.prototype.handleG3_=function(a){this.currentWindow_&&(160!=a?this.currentWindow_.setCharacter("_"):this.currentWindow_.setCharacter("[CC]"))};\nshaka.cea.Cea708Service.prototype.handleC0_=function(a,b){if(!this.currentWindow_)return null;var c=this.currentWindow_,d=null;switch(a){case shaka.cea.Cea708Service.ASCII_BACKSPACE:c.backspace();break;case shaka.cea.Cea708Service.ASCII_CARRIAGE_RETURN:c.isVisible()&&(d=c.forceEmit(b,this.serviceNumber_));c.carriageReturn();break;case shaka.cea.Cea708Service.ASCII_HOR_CARRIAGE_RETURN:c.isVisible()&&(d=c.forceEmit(b,this.serviceNumber_));c.horizontalCarriageReturn();break;case shaka.cea.Cea708Service.ASCII_FORM_FEED:c.isVisible()&&\n(d=c.forceEmit(b,this.serviceNumber_)),c.resetMemory(),c.setPenLocation(0,0)}return d};\nshaka.cea.Cea708Service.prototype.handleC1_=function(a,b,c){if(128<=b&&135>=b)this.setCurrentWindow_(b&7);else{if(136===b)return a=a.readByte().value,this.clearWindows_(a,c);if(137===b)a=a.readByte().value,this.displayWindows_(a,c);else{if(138===b)return a=a.readByte().value,this.hideWindows_(a,c);if(139===b)return a=a.readByte().value,this.toggleWindows_(a,c);if(140===b)return a=a.readByte().value,this.deleteWindows_(a,c);if(143===b)return this.reset_(c);144===b?this.setPenAttributes_(a):145===b?\nthis.setPenColor_(a):146===b?this.setPenLocation_(a):151===b?this.setWindowAttributes_(a):152<=b&&159>=b&&this.defineWindow_(a,(b&15)-8,c)}}return null};shaka.cea.Cea708Service.prototype.handleC2_=function(a,b){8<=b&&15>=b?a.skip(1):16<=b&&23>=b?a.skip(2):24<=b&&31>=b&&a.skip(3)};shaka.cea.Cea708Service.prototype.handleC3_=function(a,b){128<=b&&135>=b?a.skip(4):136<=b&&143>=b&&a.skip(5)};shaka.cea.Cea708Service.prototype.setCurrentWindow_=function(a){this.windows_[a]&&(this.currentWindow_=this.windows_[a])};\nshaka.cea.Cea708Service.prototype.getSpecifiedWindowIds_=function $jscomp$generator$function(a){var c,d,e=this;return $jscomp.generator.createGenerator($jscomp$generator$function,function(f){1==f.nextAddress&&(c=0);if(5!=f.nextAddress)return 8>c?(d=1===(a&1))&&e.windows_[c]?f.yield(c,5):f.jumpTo(5):f.jumpTo(0);a>>=1;c++;return f.jumpTo(2)})};\nshaka.cea.Cea708Service.prototype.clearWindows_=function(a,b){for(var c=null,d=$jscomp.makeIterator(this.getSpecifiedWindowIds_(a)),e=d.next();!e.done;e=d.next())e=this.windows_[e.value],e.isVisible()&&(c=e.forceEmit(b,this.serviceNumber_)),e.resetMemory();return c};shaka.cea.Cea708Service.prototype.displayWindows_=function(a,b){for(var c=$jscomp.makeIterator(this.getSpecifiedWindowIds_(a)),d=c.next();!d.done;d=c.next())d=this.windows_[d.value],d.isVisible()||d.setStartTime(b),d.display()};\nshaka.cea.Cea708Service.prototype.hideWindows_=function(a,b){for(var c=null,d=$jscomp.makeIterator(this.getSpecifiedWindowIds_(a)),e=d.next();!e.done;e=d.next())e=this.windows_[e.value],e.isVisible()&&(c=e.forceEmit(b,this.serviceNumber_)),e.hide();return c};\nshaka.cea.Cea708Service.prototype.toggleWindows_=function(a,b){for(var c=null,d=$jscomp.makeIterator(this.getSpecifiedWindowIds_(a)),e=d.next();!e.done;e=d.next())e=this.windows_[e.value],e.isVisible()?c=e.forceEmit(b,this.serviceNumber_):e.setStartTime(b),e.toggle();return c};\nshaka.cea.Cea708Service.prototype.deleteWindows_=function(a,b){for(var c=null,d=$jscomp.makeIterator(this.getSpecifiedWindowIds_(a)),e=d.next();!e.done;e=d.next()){e=e.value;var f=this.windows_[e];f.isVisible()&&(c=f.forceEmit(b,this.serviceNumber_));this.windows_[e]=null}return c};shaka.cea.Cea708Service.prototype.reset_=function(a){a=this.deleteWindows_(255,a);this.clear();return a};\nshaka.cea.Cea708Service.prototype.clear=function(){this.currentWindow_=null;this.windows_=[null,null,null,null,null,null,null,null]};shaka.cea.Cea708Service.prototype.setPenAttributes_=function(a){a.skip(1);a=a.readByte().value;if(this.currentWindow_){var b=0<(a&64);this.currentWindow_.setPenItalics(0<(a&128));this.currentWindow_.setPenUnderline(b)}};\nshaka.cea.Cea708Service.prototype.setPenColor_=function(a){var b=a.readByte().value,c=a.readByte().value;a.skip(1);if(this.currentWindow_){a=c&3;var d=(c&12)>>2;c=(c&48)>>4;b=this.rgbColorToHex_((b&48)>>4,(b&12)>>2,b&3);a=this.rgbColorToHex_(c,d,a);this.currentWindow_.setPenTextColor(b);this.currentWindow_.setPenBackgroundColor(a)}};\nshaka.cea.Cea708Service.prototype.setPenLocation_=function(a){var b=a.readByte().value;a=a.readByte().value;this.currentWindow_&&this.currentWindow_.setPenLocation(b&15,a&63)};shaka.cea.Cea708Service.prototype.setWindowAttributes_=function(a){a.skip(1);a.skip(1);var b=a.readByte().value;a.skip(1);this.currentWindow_&&this.currentWindow_.setJustification(b&3)};\nshaka.cea.Cea708Service.prototype.defineWindow_=function(a,b,c){var d=null!==this.windows_[b];if(!d){var e=new shaka.cea.Cea708Window(b);e.setStartTime(c);this.windows_[b]=e}var f=a.readByte().value,g=a.readByte().value;c=a.readByte().value;var h=a.readByte().value;e=a.readByte().value;a=a.readByte().value;f=0<(f&32);var k=g&127;g=0<(g&128);var l=(h&15)+1;h=(h&240)>>4;e=(e&63)+1;d&&0===(a&7)||this.windows_[b].resetPen();this.windows_[b].defineWindow(f,k,c,h,g,l,e);this.currentWindow_=this.windows_[b]};\nshaka.cea.Cea708Service.prototype.rgbColorToHex_=function(a,b,c){var d={0:0,1:0,2:1,3:1};a=d[a];b=d[b];c=d[c];return shaka.cea.Cea708Service.Colors[a<<2|b<<1|c]};shaka.cea.Cea708Service.ASCII_BACKSPACE=8;shaka.cea.Cea708Service.ASCII_FORM_FEED=12;shaka.cea.Cea708Service.ASCII_CARRIAGE_RETURN=13;shaka.cea.Cea708Service.ASCII_HOR_CARRIAGE_RETURN=14;shaka.cea.Cea708Service.EXT_CEA708_CTRL_CODE_BYTE1=16;\nshaka.cea.Cea708Service.G2Charset=new Map([[32," "],[33,"\\u00a0"],[37,"\\u2026"],[42,"\\u0160"],[44,"\\u0152"],[48,"\\u2588"],[49,"\\u2018"],[50,"\\u2019"],[51,"\\u201c"],[52,"\\u201d"],[53,"\\u2022"],[57,"\\u2122"],[58,"\\u0161"],[60,"\\u0153"],[61,"\\u2120"],[63,"\\u0178"],[118,"\\u215b"],[119,"\\u215c"],[120,"\\u215d"],[121,"\\u215e"],[122,"\\u2502"],[123,"\\u2510"],[124,"\\u2514"],[125,"\\u2500"],[126,"\\u2518"],[127,"\\u250c"]]);shaka.cea.Cea708Service.Colors="black blue green cyan red magenta yellow white".split(" ");shaka.cea.Cea608Memory=function(a,b){this.rows_=[];this.row_=1;this.scrollRows_=0;this.fieldNum_=a;this.channelNum_=b;this.italics_=this.underline_=!1;this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR;this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR;this.reset()};shaka.cea.Cea608Memory.prototype.forceEmit=function(a,b){var c="CC"+(this.fieldNum_<<1|this.channelNum_+1),d=new shaka.text.Cue(a,b,"");return shaka.cea.CeaUtils.getParsedCaption(d,c,this.rows_,a,b)};\nshaka.cea.Cea608Memory.prototype.reset=function(){this.resetAllRows();this.row_=1};shaka.cea.Cea608Memory.prototype.getRow=function(){return this.row_};shaka.cea.Cea608Memory.prototype.setRow=function(a){this.row_=a};shaka.cea.Cea608Memory.prototype.getScrollSize=function(){return this.scrollRows_};shaka.cea.Cea608Memory.prototype.setScrollSize=function(a){this.scrollRows_=a};\nshaka.cea.Cea608Memory.prototype.addChar=function(a,b){if(!(32>b||127<b)){var c="";switch(a){case shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN:c=shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars.has(b)?shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars.get(b):String.fromCharCode(b);break;case shaka.cea.Cea608Memory.CharSet.SPECIAL_NORTH_AMERICAN:c=shaka.cea.Cea608Memory.CharSet.SpecialNorthAmericanChars.get(b);break;case shaka.cea.Cea608Memory.CharSet.SPANISH_FRENCH:this.eraseChar();\nc=shaka.cea.Cea608Memory.CharSet.ExtendedSpanishFrench.get(b);break;case shaka.cea.Cea608Memory.CharSet.PORTUGUESE_GERMAN:this.eraseChar(),c=shaka.cea.Cea608Memory.CharSet.ExtendedPortugueseGerman.get(b)}c&&(c=new shaka.cea.CeaUtils.StyledChar(c,this.underline_,this.italics_,this.backgroundColor_,this.textColor_),this.rows_[this.row_].push(c))}};shaka.cea.Cea608Memory.prototype.eraseChar=function(){this.rows_[this.row_].pop()};\nshaka.cea.Cea608Memory.prototype.moveRows=function(a,b,c){if(a>=b)for(--c;0<=c;c--)this.rows_[a+c]=this.rows_[b+c].map(function(e){return e});else for(var d=0;d<c;d++)this.rows_[a+d]=this.rows_[b+d].map(function(e){return e})};shaka.cea.Cea608Memory.prototype.resetRows=function(a,b){for(var c=0;c<=b;c++)this.rows_[a+c]=[]};shaka.cea.Cea608Memory.prototype.resetAllRows=function(){this.resetRows(0,shaka.cea.Cea608Memory.CC_ROWS)};\nshaka.cea.Cea608Memory.prototype.eraseBuffer=function(){this.row_=0<this.scrollRows_?this.scrollRows_:0;this.resetAllRows()};shaka.cea.Cea608Memory.prototype.setUnderline=function(a){this.underline_=a};shaka.cea.Cea608Memory.prototype.setItalics=function(a){this.italics_=a};shaka.cea.Cea608Memory.prototype.setTextColor=function(a){this.textColor_=a};shaka.cea.Cea608Memory.prototype.setBackgroundColor=function(a){this.backgroundColor_=a};shaka.cea.Cea608Memory.CC_ROWS=15;\nshaka.cea.Cea608Memory.CharSet={BASIC_NORTH_AMERICAN:0,SPECIAL_NORTH_AMERICAN:1,SPANISH_FRENCH:2,PORTUGUESE_GERMAN:3};shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars=new Map([[39,"\\u2019"],[42,"\\u00e1"],[92,"\\u00e9"],[92,"\\u00e9"],[94,"\\u00ed"],[95,"\\u00f3"],[96,"\\u00fa"],[123,"\\u00e7"],[124,"\\u00f7"],[125,"\\u00d1"],[126,"\\u00f1"],[127,"\\u2588"]]);\nshaka.cea.Cea608Memory.CharSet.SpecialNorthAmericanChars=new Map([[48,"\\u00ae"],[49,"\\u00b0"],[50,"\\u00bd"],[51,"\\u00bf"],[52,"\\u2122"],[53,"\\u00a2"],[54,"\\u00a3"],[55,"\\u266a"],[56,"\\u00e0"],[57,"\\u2800"],[58,"\\u00e8"],[59,"\\u00e2"],[60,"\\u00ea"],[61,"\\u00ee"],[62,"\\u00f4"],[63,"\\u00fb"]]);\nshaka.cea.Cea608Memory.CharSet.ExtendedSpanishFrench=new Map([[32,"\\u00c1"],[33,"\\u00c9"],[34,"\\u00d3"],[35,"\\u00da"],[36,"\\u00dc"],[37,"\\u00fc"],[38,"\\u2018"],[39,"\\u00a1"],[40,"*"],[41,"\'"],[42,"\\u2500"],[43,"\\u00a9"],[44,"\\u2120"],[45,"\\u00b7"],[46,"\\u201c"],[47,"\\u201d"],[48,"\\u00c0"],[49,"\\u00c2"],[50,"\\u00c7"],[51,"\\u00c8"],[52,"\\u00ca"],[53,"\\u00cb"],[54,"\\u00eb"],[55,"\\u00ce"],[56,"\\u00cf"],[57,"\\u00ef"],[58,"\\u00d4"],[59,"\\u00d9"],[60,"\\u00f9"],[61,"\\u00db"],[62,"\\u00ab"],[63,"\\u00bb"]]);\nshaka.cea.Cea608Memory.CharSet.ExtendedPortugueseGerman=new Map([[32,"\\u00c3"],[33,"\\u00e3"],[34,"\\u00cd"],[35,"\\u00cc"],[36,"\\u00ec"],[37,"\\u00d2"],[38,"\\u00f2"],[39,"\\u00d5"],[40,"\\u00f5"],[41,"{"],[42,"}"],[43,"\\\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"\\u00c4"],[49,"\\u00e4"],[50,"\\u00d6"],[51,"\\u00f6"],[52,"\\u00df"],[53,"\\u00a5"],[54,"\\u00a4"],[55,"\\u2502"],[56,"\\u00c5"],[57,"\\u00e5"],[58,"\\u00d8"],[59,"\\u00f8"],[60,"\\u250c"],[61,"\\u2510"],[62,"\\u2514"],[63,"\\u2518"]]);shaka.cea.Cea608DataChannel=function(a,b){this.type_=shaka.cea.Cea608DataChannel.CaptionType.NONE;this.text_=new shaka.cea.Cea608Memory(a,b);this.displayedMemory_=new shaka.cea.Cea608Memory(a,b);this.nonDisplayedMemory_=new shaka.cea.Cea608Memory(a,b);this.curbuf_=this.displayedMemory_;this.prevEndTime_=0;this.lastcp_=null};\nshaka.cea.Cea608DataChannel.prototype.reset=function(){this.type_=shaka.cea.Cea608DataChannel.CaptionType.PAINTON;this.curbuf_=this.displayedMemory_;this.lastcp_=null;this.displayedMemory_.reset();this.nonDisplayedMemory_.reset();this.text_.reset()};shaka.cea.Cea608DataChannel.prototype.pacToRow_=function(a,b){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(a&7)<<1|b>>5&1]};\nshaka.cea.Cea608DataChannel.prototype.controlPac_=function(a,b){var c=this.pacToRow_(a,b),d=(b&30)>>1,e=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,f=!1;7>d?e=shaka.cea.Cea608DataChannel.TEXT_COLORS[d]:7===d&&(f=!0);d=1===(b&1);if(this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT){var g=this.curbuf_;if(this.type_===shaka.cea.Cea608DataChannel.CaptionType.ROLLUP&&c!==g.getRow()){var h=1+g.getRow()-g.getScrollSize(),k=1+c-g.getScrollSize();g.moveRows(k,h,g.getScrollSize());g.resetRows(0,k-1);g.resetRows(c+\n1,shaka.cea.Cea608Memory.CC_ROWS-c)}g.setRow(c);this.curbuf_.setUnderline(d);this.curbuf_.setItalics(f);this.curbuf_.setTextColor(e);this.curbuf_.setBackgroundColor(shaka.cea.CeaUtils.DEFAULT_BG_COLOR)}};\nshaka.cea.Cea608DataChannel.prototype.controlMidrow_=function(a){this.curbuf_.setUnderline(!1);this.curbuf_.setItalics(!1);this.curbuf_.setTextColor(shaka.cea.CeaUtils.DEFAULT_TXT_COLOR);this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,32);var b=!1;var c=shaka.cea.Cea608DataChannel.TEXT_COLORS[(a&14)>>1];"white_italics"===c&&(c="white",b=!0);this.curbuf_.setUnderline(1===(a&1));this.curbuf_.setItalics(b);this.curbuf_.setTextColor(c)};\nshaka.cea.Cea608DataChannel.prototype.controlBackgroundAttribute_=function(a,b){var c=shaka.cea.CeaUtils.DEFAULT_BG_COLOR;0===(a&7)&&(c=shaka.cea.Cea608DataChannel.BG_COLORS[(b&14)>>1]);this.curbuf_.setBackgroundColor(c)};\nshaka.cea.Cea608DataChannel.prototype.controlMiscellaneous_=function(a){var b=shaka.cea.Cea608DataChannel.MiscCmd_,c=a.pts,d=null;switch(a.ccData2){case b.RCL:this.controlRcl_();break;case b.BS:this.controlBs_();break;case b.RU2:d=this.controlRu_(2,c);break;case b.RU3:d=this.controlRu_(3,c);break;case b.RU4:d=this.controlRu_(4,c);break;case b.FON:this.controlFon_();break;case b.RDC:this.controlRdc_(c);break;case b.TR:this.controlTr_();break;case b.RTD:this.controlRtd_();break;case b.EDM:d=this.controlEdm_(c);\nbreak;case b.CR:d=this.controlCr_(c);break;case b.ENM:this.controlEnm_();break;case b.EOC:d=this.controlEoc_(c)}return d};shaka.cea.Cea608DataChannel.prototype.controlCr_=function(a){var b=this.curbuf_;if(this.type_!==shaka.cea.Cea608DataChannel.CaptionType.ROLLUP)return null;var c=b.forceEmit(this.prevEndTime_,a),d=b.getRow()-b.getScrollSize()+1;b.moveRows(d-1,d,b.getScrollSize());b.resetRows(0,d-1);b.resetRows(b.getRow(),shaka.cea.Cea608Memory.CC_ROWS-b.getRow());this.prevEndTime_=a;return c};\nshaka.cea.Cea608DataChannel.prototype.controlRu_=function(a,b){var c=this.curbuf_=this.displayedMemory_,d=null;this.type_!==shaka.cea.Cea608DataChannel.CaptionType.ROLLUP&&this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(d=c.forceEmit(this.prevEndTime_,b),this.displayedMemory_.eraseBuffer(),this.nonDisplayedMemory_.eraseBuffer(),c.setRow(shaka.cea.Cea608Memory.CC_ROWS));this.type_=shaka.cea.Cea608DataChannel.CaptionType.ROLLUP;c.setScrollSize(a);return d};\nshaka.cea.Cea608DataChannel.prototype.controlFon_=function(){this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,32)};shaka.cea.Cea608DataChannel.prototype.controlEdm_=function(a){var b=this.displayedMemory_,c=null;this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(c=b.forceEmit(this.prevEndTime_,a));b.resetAllRows();return c};\nshaka.cea.Cea608DataChannel.prototype.controlRdc_=function(a){this.type_=shaka.cea.Cea608DataChannel.CaptionType.PAINTON;this.curbuf_=this.displayedMemory_;this.curbuf_.setScrollSize(0);this.prevEndTime_=a};shaka.cea.Cea608DataChannel.prototype.controlEnm_=function(){this.nonDisplayedMemory_.resetAllRows()};\nshaka.cea.Cea608DataChannel.prototype.controlEoc_=function(a){var b=null;this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(b=this.displayedMemory_.forceEmit(this.prevEndTime_,a));var c=this.nonDisplayedMemory_;this.nonDisplayedMemory_=this.displayedMemory_;this.displayedMemory_=c;this.controlRcl_();this.prevEndTime_=a;return b};shaka.cea.Cea608DataChannel.prototype.controlRcl_=function(){this.type_=shaka.cea.Cea608DataChannel.CaptionType.POPON;this.curbuf_=this.nonDisplayedMemory_;this.curbuf_.setScrollSize(0)};\nshaka.cea.Cea608DataChannel.prototype.controlBs_=function(){this.curbuf_.eraseChar()};shaka.cea.Cea608DataChannel.prototype.controlTr_=function(){this.text_.reset();this.controlRtd_()};shaka.cea.Cea608DataChannel.prototype.controlRtd_=function(){shaka.log.warnOnce("Cea608DataChannel","CEA-608 text mode entered, but is unsupported");this.curbuf_=this.text_;this.type_=shaka.cea.Cea608DataChannel.CaptionType.TEXT};\nshaka.cea.Cea608DataChannel.prototype.handleBasicNorthAmericanChar=function(a,b){this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,a);this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,b)};shaka.cea.Cea608DataChannel.prototype.handleExtendedWesternEuropeanChar_=function(a,b){this.curbuf_.addChar(a&1?shaka.cea.Cea608Memory.CharSet.PORTUGUESE_GERMAN:shaka.cea.Cea608Memory.CharSet.SPANISH_FRENCH,b)};\nshaka.cea.Cea608DataChannel.prototype.handleControlCode=function(a){var b=a.ccData1,c=a.ccData2;if(this.lastcp_===(b<<8|c))return this.lastcp_=null;this.lastcp_=b<<8|c;if(this.isPAC_(b,c))this.controlPac_(b,c);else if(this.isMidrowStyleChange_(b,c))this.controlMidrow_(c);else if(this.isBackgroundAttribute_(b,c))this.controlBackgroundAttribute_(b,c);else if(this.isSpecialNorthAmericanChar_(b,c))this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.SPECIAL_NORTH_AMERICAN,c);else if(this.isExtendedWesternEuropeanChar_(b,\nc))this.handleExtendedWesternEuropeanChar_(b,c);else if(this.isMiscellaneous_(b,c))return this.controlMiscellaneous_(a);return null};shaka.cea.Cea608DataChannel.prototype.isMiscellaneous_=function(a,b){return 20===(a&246)&&32===(b&240)};shaka.cea.Cea608DataChannel.prototype.isPAC_=function(a,b){return 16===(a&240)&&64===(b&192)};shaka.cea.Cea608DataChannel.prototype.isMidrowStyleChange_=function(a,b){return 17===(a&247)&&32===(b&240)};\nshaka.cea.Cea608DataChannel.prototype.isBackgroundAttribute_=function(a,b){return 16===(a&247)&&32===(b&240)||23===(a&247)&&45===(b&255)};shaka.cea.Cea608DataChannel.prototype.isSpecialNorthAmericanChar_=function(a,b){return 17===(a&247)&&48===(b&240)};shaka.cea.Cea608DataChannel.prototype.isExtendedWesternEuropeanChar_=function(a,b){return 18===(a&246)&&32===(b&224)};shaka.cea.Cea608DataChannel.isControlCode=function(a){return 16===(a&112)};\nshaka.cea.Cea608DataChannel.MiscCmd_={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};shaka.cea.Cea608DataChannel.CaptionType={NONE:0,POPON:1,PAINTON:2,ROLLUP:3,TEXT:4};shaka.cea.Cea608DataChannel.BG_COLORS="black green blue cyan red yellow magenta black".split(" ");shaka.cea.Cea608DataChannel.TEXT_COLORS="white green blue cyan red yellow magenta white_italics".split(" ");shaka.cea.CeaDecoder=function(){this.cea608DataArray_=[];this.cea708DataArray_=[];this.dtvccPacketBuilder_=new shaka.cea.DtvccPacketBuilder;this.badFrames_=0;this.cea608ModeToStream_=new Map([["CC1",new shaka.cea.Cea608DataChannel(0,0)],["CC2",new shaka.cea.Cea608DataChannel(0,1)],["CC3",new shaka.cea.Cea608DataChannel(1,0)],["CC4",new shaka.cea.Cea608DataChannel(1,1)]]);this.currentField2Channel_=this.currentField1Channel_=0;this.serviceNumberToService_=new Map;this.reset()};\nshaka.cea.CeaDecoder.prototype.clear=function(){this.badFrames_=0;this.cea608DataArray_=[];this.cea708DataArray_=[];this.dtvccPacketBuilder_.clear();this.reset();for(var a=$jscomp.makeIterator(this.serviceNumberToService_.values()),b=a.next();!b.done;b=a.next())b.value.clear()};shaka.cea.CeaDecoder.prototype.reset=function(){this.currentField2Channel_=this.currentField1Channel_=0;for(var a=$jscomp.makeIterator(this.cea608ModeToStream_.values()),b=a.next();!b.done;b=a.next())b.value.reset()};\nshaka.cea.CeaDecoder.prototype.extract=function(a,b){var c=new shaka.util.DataViewReader(a,shaka.util.DataViewReader.Endianness.BIG_ENDIAN);if(c.readUint8()===shaka.cea.CeaDecoder.USA_COUNTRY_CODE&&c.readUint16()===shaka.cea.CeaDecoder.ATSC_PROVIDER_CODE&&c.readUint32()===shaka.cea.CeaDecoder.ATSC1_USER_IDENTIFIER&&3===c.readUint8()){var d=c.readUint8();if(0!==(d&64)){d&=31;c.skip(1);for(var e=0;e<d;e++){var f=c.readUint8(),g=(f&4)>>2,h=c.readUint8(),k=c.readUint8();g&&(f&=3,f===shaka.cea.CeaDecoder.NTSC_CC_FIELD_1||\nf===shaka.cea.CeaDecoder.NTSC_CC_FIELD_2?this.cea608DataArray_.push({pts:b,type:f,ccData1:h,ccData2:k,order:this.cea608DataArray_.length}):(this.cea708DataArray_.push({pts:b,type:f,value:h,order:this.cea708DataArray_.length}),this.cea708DataArray_.push({pts:b,type:shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_DATA,value:k,order:this.cea708DataArray_.length})))}}}};\nshaka.cea.CeaDecoder.prototype.decode=function(){var a=[],b=function(d,e){return d.pts-e.pts||d.order-e.order};this.cea608DataArray_.sort(b);this.cea708DataArray_.sort(b);b=$jscomp.makeIterator(this.cea608DataArray_);for(var c=b.next();!c.done;c=b.next())(c=this.decodeCea608_(c.value))&&a.push(c);b=$jscomp.makeIterator(this.cea708DataArray_);for(c=b.next();!c.done;c=b.next())this.dtvccPacketBuilder_.addByte(c.value);b=this.dtvccPacketBuilder_.getBuiltPackets();b=$jscomp.makeIterator(b);for(c=b.next();!c.done;c=\nb.next())c=this.decodeCea708_(c.value),a.push.apply(a,$jscomp.arrayFromIterable(c));this.dtvccPacketBuilder_.clearBuiltPackets();this.cea608DataArray_=[];this.cea708DataArray_=[];return a};\nshaka.cea.CeaDecoder.prototype.decodeCea608_=function(a){var b=a.type;if(shaka.cea.Cea608DataChannel.isControlCode(a.ccData1)){var c=a.ccData1>>3&1;0===b?this.currentField1Channel_=c:this.currentField2Channel_=c}b=this.cea608ModeToStream_.get("CC"+(b<<1|(b?this.currentField2Channel_:this.currentField1Channel_)+1));if(255===a.ccData1&&255===a.ccData2||!a.ccData1&&!a.ccData2||!this.isOddParity_(a.ccData1)||!this.isOddParity_(a.ccData2))return 45<=++this.badFrames_&&this.reset(),null;this.badFrames_=\n0;a.ccData1&=127;a.ccData2&=127;if(!a.ccData1&&!a.ccData2)return null;c=null;shaka.cea.Cea608DataChannel.isControlCode(a.ccData1)?c=b.handleControlCode(a):b.handleBasicNorthAmericanChar(a.ccData1,a.ccData2);return c};\nshaka.cea.CeaDecoder.prototype.decodeCea708_=function(a){var b=[];try{for(;a.hasMoreData();){var c=a.readByte().value,d=(c&224)>>5,e=c&31;7===d&&0!=e&&(d=a.readByte().value&63);if(0!=d){if(!this.serviceNumberToService_.has(d)){var f=new shaka.cea.Cea708Service(d);this.serviceNumberToService_.set(d,f)}for(var g=this.serviceNumberToService_.get(d),h=a.getPosition();a.getPosition()-h<e;){var k=g.handleCea708ControlCode(a);k&&b.push(k)}}}}catch(l){if(l instanceof shaka.util.Error&&l.code===shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS)shaka.log.warnOnce("CEA708_INVALID_DATA",\n"Buffer read out of bounds / invalid CEA-708 Data.");else throw l;}return b};shaka.cea.CeaDecoder.prototype.isOddParity_=function(a){for(var b=0;a;)b^=a&1,a>>=1;return 1===b};shaka.cea.CeaDecoder.ATSC_PROVIDER_CODE=49;shaka.cea.CeaDecoder.ATSC1_USER_IDENTIFIER=1195456820;shaka.cea.CeaDecoder.NTSC_CC_FIELD_1=0;shaka.cea.CeaDecoder.NTSC_CC_FIELD_2=1;shaka.cea.CeaDecoder.USA_COUNTRY_CODE=181;shaka.cea.ICeaParser=function(){};shaka.cea.ICeaParser.prototype.init=function(a){};shaka.cea.ICeaParser.prototype.parse=function(a){};shaka.cea.ICeaParser.NALU_TYPE_SEI=6;shaka.cea.ICeaParser.DEFAULT_TIMESCALE_VALUE=9E4;shaka.cea.SeiProcessor=function(){};shaka.cea.SeiProcessor.prototype.process=function $jscomp$generator$function(a){var c=this,d,e,f,g;return $jscomp.generator.createGenerator($jscomp$generator$function,function(h){1==h.nextAddress&&(d=c.removeEmu_(a),e=0);if(4!=h.nextAddress){if(!(e+d<a.length))return h.jumpTo(0);for(f=0;255==a[e];)f+=255,e++;f+=a[e++];for(g=0;255==a[e];)g+=255,e++;g+=a[e++];return 4!=f?h.jumpTo(4):h.yield(a.subarray(e,e+g),4)}e+=g;return h.jumpTo(2)})};\nshaka.cea.SeiProcessor.prototype.removeEmu_=function(a){for(var b=0,c=0,d=0;c<a.length;)2==b&&3==a[c]?b=0:(0==a[c]?b++:b=0,a[d]=a[c],d++),c++;return c-d};shaka.util.Mp4BoxParsers=function(){};shaka.util.Mp4BoxParsers.parseTFHD=function(a,b){var c=null,d=null,e=a.readUint32();b&1&&a.skip(8);b&2&&a.skip(4);b&8&&(c=a.readUint32());b&16&&(d=a.readUint32());return{trackId:e,defaultSampleDuration:c,defaultSampleSize:d}};shaka.util.Mp4BoxParsers.parseTFDT=function(a,b){return{baseMediaDecodeTime:1==b?a.readUint64():a.readUint32()}};shaka.util.Mp4BoxParsers.parseMDHD=function(a,b){1==b?(a.skip(8),a.skip(8)):(a.skip(4),a.skip(4));return{timescale:a.readUint32()}};\nshaka.util.Mp4BoxParsers.parseTREX=function(a){a.skip(4);a.skip(4);var b=a.readUint32();a=a.readUint32();return{defaultSampleDuration:b,defaultSampleSize:a}};\nshaka.util.Mp4BoxParsers.parseTRUN=function(a,b,c){var d=a.readUint32(),e=[];c&1&&a.skip(4);c&4&&a.skip(4);for(var f=$jscomp.makeIterator(shaka.util.Iterables.range(d)),g=f.next();!g.done;g=f.next())shaka.util.Functional.ignored(g.value),g={sampleDuration:null,sampleSize:null,sampleCompositionTimeOffset:null},c&256&&(g.sampleDuration=a.readUint32()),c&512&&(g.sampleSize=a.readUint32()),c&1024&&a.skip(4),c&2048&&(g.sampleCompositionTimeOffset=0==b?a.readUint32():a.readInt32()),e.push(g);return{sampleCount:d,\nsampleData:e}};shaka.util.Mp4BoxParsers.parseTKHD=function(a,b){if(1==b){a.skip(8);a.skip(8);var c=a.readUint64()}else a.skip(4),a.skip(4),c=a.readUint32();return{trackId:c}};shaka.cea.Mp4CeaParser=function(){this.seiProcessor_=new shaka.cea.SeiProcessor;this.trackIdToTimescale_=new Map;this.defaultSampleSize_=this.defaultSampleDuration_=0};\nshaka.cea.Mp4CeaParser.prototype.init=function(a){var b=this,c=shaka.util.Mp4Parser,d=[],e=[];(new c).box("moov",c.children).box("mvex",c.children).fullBox("trex",function(f){f=shaka.util.Mp4BoxParsers.parseTREX(f.reader);b.defaultSampleDuration_=f.defaultSampleDuration;b.defaultSampleSize_=f.defaultSampleSize}).box("trak",c.children).fullBox("tkhd",function(f){goog.asserts.assert(null!=f.version,"TKHD is a full box and should have a valid version.");f=shaka.util.Mp4BoxParsers.parseTKHD(f.reader,\nf.version);d.push(f.trackId)}).box("mdia",c.children).fullBox("mdhd",function(f){goog.asserts.assert(null!=f.version,"MDHD is a full box and should have a valid version.");f=shaka.util.Mp4BoxParsers.parseMDHD(f.reader,f.version);e.push(f.timescale)}).parse(a,!0);if(!d.length||!e.length||d.length!=e.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_CEA);d.forEach(function(f,g){b.trackIdToTimescale_.set(f,e[g])})};\nshaka.cea.Mp4CeaParser.prototype.parse=function(a){var b=this,c=shaka.util.Mp4Parser,d=[],e=this.defaultSampleDuration_,f=this.defaultSampleSize_,g=[],h=null,k=shaka.cea.ICeaParser.DEFAULT_TIMESCALE_VALUE;(new c).box("moof",c.children).box("traf",c.children).fullBox("trun",function(l){goog.asserts.assert(null!=l.version&&null!=l.flags,"TRUN is a full box and should have a valid version & flags.");g=shaka.util.Mp4BoxParsers.parseTRUN(l.reader,l.version,l.flags).sampleData}).fullBox("tfhd",function(l){goog.asserts.assert(null!=\nl.flags,"TFHD is a full box and should have valid flags.");l=shaka.util.Mp4BoxParsers.parseTFHD(l.reader,l.flags);e=l.defaultSampleDuration||b.defaultSampleDuration_;f=l.defaultSampleSize||b.defaultSampleSize_;l=l.trackId;b.trackIdToTimescale_.has(l)&&(k=b.trackIdToTimescale_.get(l))}).fullBox("tfdt",function(l){goog.asserts.assert(null!=l.version,"TFDT is a full box and should have a valid version.");h=shaka.util.Mp4BoxParsers.parseTFDT(l.reader,l.version).baseMediaDecodeTime}).box("mdat",function(l){if(null===\nh)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_CEA);b.parseMdat_(l.reader,h,k,e,f,g,d)}).parse(a,!1);return d};\nshaka.cea.Mp4CeaParser.prototype.parseMdat_=function(a,b,c,d,e,f,g){var h=0,k=e;for(f.length&&(k=f[0].sampleSize||e);a.hasMoreData();){var l=a.readUint32();if((a.readUint8()&31)==shaka.cea.ICeaParser.NALU_TYPE_SEI){var m=0;f.length>h&&(m=f[h].sampleCompositionTimeOffset||0);m=(b+m)/c;for(var n=$jscomp.makeIterator(this.seiProcessor_.process(a.readBytes(l-1))),p=n.next();!p.done;p=n.next())g.push({packet:p.value,pts:m})}else a.skip(l-1);k-=l+4;0==k&&(b=f.length>h?b+(f[h].sampleDuration||d):b+d,h++,\nk=f.length>h?f[h].sampleSize||e:e)}};shaka.media.IClosedCaptionParser=function(){};shaka.media.IClosedCaptionParser.prototype.init=function(a){};shaka.media.IClosedCaptionParser.prototype.parseFrom=function(a){};shaka.media.IClosedCaptionParser.prototype.reset=function(){};shaka.media.ClosedCaptionParser=function(){this.ceaParser_=new shaka.cea.Mp4CeaParser;this.ceaDecoder_=new shaka.cea.CeaDecoder};shaka.media.ClosedCaptionParser.prototype.init=function(a){this.ceaParser_.init(a)};\nshaka.media.ClosedCaptionParser.prototype.parseFrom=function(a){a=this.ceaParser_.parse(a);a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){b=b.value;var c=shaka.util.BufferUtils.toUint8(b.packet);this.ceaDecoder_.extract(c,b.pts)}return this.ceaDecoder_.decode()};shaka.media.ClosedCaptionParser.prototype.reset=function(){this.ceaDecoder_.clear()};shaka.media.TimeRangesUtils=function(){};shaka.media.TimeRangesUtils.bufferStart=function(a){return!a||1==a.length&&1E-6>a.end(0)-a.start(0)?null:1==a.length&&0>a.start(0)?0:a.length?a.start(0):null};shaka.media.TimeRangesUtils.bufferEnd=function(a){return!a||1==a.length&&1E-6>a.end(0)-a.start(0)?null:a.length?a.end(a.length-1):null};shaka.media.TimeRangesUtils.isBuffered=function(a,b,c){c=void 0===c?0:c;return!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0)||b>a.end(a.length-1)?!1:b+c>=a.start(0)};\nshaka.media.TimeRangesUtils.bufferedAheadOf=function(a,b){if(!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0))return 0;for(var c=0,d=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(a)),e=d.next();!e.done;e=d.next()){var f=e.value;e=f.start;f=f.end;f>b&&(c+=f-Math.max(e,b))}return c};\nshaka.media.TimeRangesUtils.getGapIndex=function(a,b,c){var d=shaka.media.TimeRangesUtils;if(!a||!a.length||1==a.length&&1E-6>a.end(0)-a.start(0))return null;a=d.getBufferedInfo(a).findIndex(function(e,f,g){return e.start>b&&(0==f||g[f-1].end-b<=c)});return 0<=a?a:null};shaka.media.TimeRangesUtils.getBufferedInfo=function(a){if(!a)return[];for(var b=[],c=$jscomp.makeIterator(shaka.util.Iterables.range(a.length)),d=c.next();!d.done;d=c.next())d=d.value,b.push({start:a.start(d),end:a.end(d)});return b};shaka.util.IDestroyable=function(){};shaka.util.IDestroyable.prototype.destroy=function(){};/*\n @license\n Copyright 2008 The Closure Library Authors\n SPDX-License-Identifier: Apache-2.0\n*/\ngoog.uri={};goog.uri.utils={};goog.uri.utils.splitRe_=/^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$/;goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7};goog.uri.utils.split=function(a){return a.match(goog.uri.utils.splitRe_)};/*\n @license\n Copyright 2006 The Closure Library Authors\n SPDX-License-Identifier: Apache-2.0\n*/\ngoog.Uri=function(a){var b;a instanceof goog.Uri?(this.setScheme(a.getScheme()),this.setUserInfo(a.getUserInfo()),this.setDomain(a.getDomain()),this.setPort(a.getPort()),this.setPath(a.getPath()),this.setQueryData(a.getQueryData().clone()),this.setFragment(a.getFragment())):a&&(b=goog.uri.utils.split(String(a)))?(this.setScheme(b[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(b[goog.uri.utils.ComponentIndex.USER_INFO]||"",!0),this.setDomain(b[goog.uri.utils.ComponentIndex.DOMAIN]||\n"",!0),this.setPort(b[goog.uri.utils.ComponentIndex.PORT]),this.setPath(b[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(b[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(b[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):this.queryData_=new goog.Uri.QueryData(null,null)};goog.Uri.prototype.scheme_="";goog.Uri.prototype.userInfo_="";goog.Uri.prototype.domain_="";goog.Uri.prototype.port_=null;goog.Uri.prototype.path_="";goog.Uri.prototype.fragment_="";\ngoog.Uri.prototype.toString=function(){var a=[],b=this.getScheme();b&&a.push(goog.Uri.encodeSpecialChars_(b,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),":");if(b=this.getDomain()){a.push("//");var c=this.getUserInfo();c&&a.push(goog.Uri.encodeSpecialChars_(c,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),"@");a.push(goog.Uri.removeDoubleEncoding_(encodeURIComponent(b)));b=this.getPort();null!=b&&a.push(":",String(b))}if(b=this.getPath())this.hasDomain()&&"/"!=b.charAt(0)&&a.push("/"),a.push(goog.Uri.encodeSpecialChars_(b,\n"/"==b.charAt(0)?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,!0));(b=this.getEncodedQuery())&&a.push("?",b);(b=this.getFragment())&&a.push("#",goog.Uri.encodeSpecialChars_(b,goog.Uri.reDisallowedInFragment_));return a.join("")};\ngoog.Uri.prototype.resolve=function(a){var b=this.clone();"data"===b.scheme_&&(b=new goog.Uri);var c=a.hasScheme();c?b.setScheme(a.getScheme()):c=a.hasUserInfo();c?b.setUserInfo(a.getUserInfo()):c=a.hasDomain();c?b.setDomain(a.getDomain()):c=a.hasPort();var d=a.getPath();if(c)b.setPort(a.getPort());else if(c=a.hasPath()){if("/"!=d.charAt(0))if(this.hasDomain()&&!this.hasPath())d="/"+d;else{var e=b.getPath().lastIndexOf("/");-1!=e&&(d=b.getPath().substr(0,e+1)+d)}d=goog.Uri.removeDotSegments(d)}c?\nb.setPath(d):c=a.hasQuery();c?b.setQueryData(a.getQueryData().clone()):c=a.hasFragment();c&&b.setFragment(a.getFragment());return b};goog.Uri.prototype.clone=function(){return new goog.Uri(this)};goog.Uri.prototype.getScheme=function(){return this.scheme_};goog.Uri.prototype.setScheme=function(a,b){if(this.scheme_=b?goog.Uri.decodeOrEmpty_(a,!0):a)this.scheme_=this.scheme_.replace(/:$/,"");return this};goog.Uri.prototype.hasScheme=function(){return!!this.scheme_};goog.Uri.prototype.getUserInfo=function(){return this.userInfo_};\ngoog.Uri.prototype.setUserInfo=function(a,b){this.userInfo_=b?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_};goog.Uri.prototype.getDomain=function(){return this.domain_};goog.Uri.prototype.setDomain=function(a,b){this.domain_=b?goog.Uri.decodeOrEmpty_(a,!0):a;return this};goog.Uri.prototype.hasDomain=function(){return!!this.domain_};goog.Uri.prototype.getPort=function(){return this.port_};\ngoog.Uri.prototype.setPort=function(a){if(a){a=Number(a);if(isNaN(a)||0>a)throw Error("Bad port number "+a);this.port_=a}else this.port_=null;return this};goog.Uri.prototype.hasPort=function(){return null!=this.port_};goog.Uri.prototype.getPath=function(){return this.path_};goog.Uri.prototype.setPath=function(a,b){this.path_=b?goog.Uri.decodeOrEmpty_(a,!0):a;return this};goog.Uri.prototype.hasPath=function(){return!!this.path_};goog.Uri.prototype.hasQuery=function(){return""!==this.queryData_.toString()};\ngoog.Uri.prototype.setQueryData=function(a,b){a instanceof goog.Uri.QueryData?this.queryData_=a:(b||(a=goog.Uri.encodeSpecialChars_(a,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(a,null));return this};goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()};goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()};goog.Uri.prototype.getQueryData=function(){return this.queryData_};goog.Uri.prototype.getFragment=function(){return this.fragment_};\ngoog.Uri.prototype.setFragment=function(a,b){this.fragment_=b?goog.Uri.decodeOrEmpty_(a):a;return this};goog.Uri.prototype.hasFragment=function(){return!!this.fragment_};\ngoog.Uri.removeDotSegments=function(a){if(".."==a||"."==a)return"";if(-1==a.indexOf("./")&&-1==a.indexOf("/."))return a;var b=0==a.lastIndexOf("/",0);a=a.split("/");for(var c=[],d=0;d<a.length;){var e=a[d++];"."==e?b&&d==a.length&&c.push(""):".."==e?((1<c.length||1==c.length&&""!=c[0])&&c.pop(),b&&d==a.length&&c.push("")):(c.push(e),b=!0)}return c.join("/")};goog.Uri.decodeOrEmpty_=function(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""};\ngoog.Uri.encodeSpecialChars_=function(a,b,c){return null!=a?(a=encodeURI(a).replace(b,goog.Uri.encodeChar_),c&&(a=goog.Uri.removeDoubleEncoding_(a)),a):null};goog.Uri.encodeChar_=function(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)};goog.Uri.removeDoubleEncoding_=function(a){return a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")};goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\\/\\?@]/g;goog.Uri.reDisallowedInRelativePath_=/[#\\?:]/g;goog.Uri.reDisallowedInAbsolutePath_=/[#\\?]/g;\ngoog.Uri.reDisallowedInQuery_=/[#\\?@]/g;goog.Uri.reDisallowedInFragment_=/#/g;goog.Uri.QueryData=function(a,b){this.encodedQuery_=a||null};\ngoog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_={},this.count_=0,this.encodedQuery_))for(var a=this.encodedQuery_.split("&"),b=0;b<a.length;b++){var c=a[b].indexOf("="),d=null;if(0<=c){var e=a[b].substring(0,c);d=a[b].substring(c+1)}else e=a[b];e=decodeURIComponent(e.replace(/\\+/g," "));d=d||"";this.add(e,decodeURIComponent(d.replace(/\\+/g," ")))}};goog.Uri.QueryData.prototype.keyMap_=null;goog.Uri.QueryData.prototype.count_=null;\ngoog.Uri.QueryData.prototype.getCount=function(){this.ensureKeyMapInitialized_();return this.count_};goog.Uri.QueryData.prototype.add=function(a,b){this.ensureKeyMapInitialized_();this.encodedQuery_=null;var c=this.keyMap_.hasOwnProperty(a)&&this.keyMap_[a];c||(this.keyMap_[a]=c=[]);c.push(b);goog.asserts.assert(null!=this.count_,"Should not be null.");this.count_++;return this};\ngoog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";var a=[],b;for(b in this.keyMap_)for(var c=encodeURIComponent(b),d=this.keyMap_[b],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e]));a.push(f)}return this.encodedQuery_=a.join("&")};goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())};\ngoog.Uri.QueryData.prototype.clone=function(){var a=new goog.Uri.QueryData;a.encodedQuery_=this.encodedQuery_;if(this.keyMap_){var b={},c;for(c in this.keyMap_)b[c]=this.keyMap_[c].concat();a.keyMap_=b;a.count_=this.count_}return a};shaka.util.ManifestParserUtils=function(){};shaka.util.ManifestParserUtils.resolveUris=function(a,b){var c=shaka.util.Functional;if(0==b.length)return a;var d=b.map(function(e){return new goog.Uri(e)});return a.map(function(e){return new goog.Uri(e)}).map(function(e){return d.map(function(f){return e.resolve(f)})}).reduce(c.collapseArrays,[]).map(function(e){return e.toString()})};\nshaka.util.ManifestParserUtils.createDrmInfo=function(a,b){return{keySystem:a,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,sessionType:"",initData:b||[],keyIds:new Set}};\nshaka.util.ManifestParserUtils.guessCodecs=function(a,b){if(1==b.length)return b[0];var c=shaka.util.ManifestParserUtils.guessCodecsSafe(a,b);if(null!=c)return c;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_GUESS_CODECS,b);};\nshaka.util.ManifestParserUtils.guessCodecsSafe=function(a,b){for(var c=$jscomp.makeIterator(shaka.util.ManifestParserUtils.CODEC_REGEXPS_BY_CONTENT_TYPE_[a]),d=c.next();!d.done;d=c.next()){d=d.value;for(var e=$jscomp.makeIterator(b),f=e.next();!f.done;f=e.next())if(f=f.value,d.test(f.trim()))return f.trim()}return a==shaka.util.ManifestParserUtils.ContentType.TEXT?"":null};shaka.util.ManifestParserUtils.ContentType={VIDEO:"video",AUDIO:"audio",TEXT:"text",IMAGE:"image",APPLICATION:"application"};\nshaka.util.ManifestParserUtils.TextStreamKind={SUBTITLE:"subtitle",CLOSED_CAPTION:"caption"};shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS=1/15;shaka.util.ManifestParserUtils.VIDEO_CODEC_REGEXPS_=[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/];shaka.util.ManifestParserUtils.AUDIO_CODEC_REGEXPS_=[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/];shaka.util.ManifestParserUtils.TEXT_CODEC_REGEXPS_=[/^vtt$/,/^wvtt/,/^stpp/];\nshaka.util.ManifestParserUtils.CODEC_REGEXPS_BY_CONTENT_TYPE_={audio:shaka.util.ManifestParserUtils.AUDIO_CODEC_REGEXPS_,video:shaka.util.ManifestParserUtils.VIDEO_CODEC_REGEXPS_,text:shaka.util.ManifestParserUtils.TEXT_CODEC_REGEXPS_};shaka.util.PublicPromise=function(){var a,b,c=new Promise(function(d,e){a=d;b=e});c.resolve=a;c.reject=b;return c};shaka.util.PublicPromise.prototype.resolve=function(a){};shaka.util.PublicPromise.prototype.reject=function(a){};shaka.dependencies=function(){};shaka.dependencies.add=function(a,b){if(!shaka.dependencies.Allowed[a])throw Error(a+" is not supported");shaka.dependencies.dependencies_.set(a,b)};shaka.dependencies.has=function(a){return shaka.dependencies.dependencies_.has(a)};shaka.dependencies.muxjs=function(){return shaka.dependencies.dependencies_.get(shaka.dependencies.Allowed.muxjs)};goog.exportSymbol("shaka.dependencies",shaka.dependencies);goog.exportProperty(shaka.dependencies,"has",shaka.dependencies.has);\ngoog.exportProperty(shaka.dependencies,"add",shaka.dependencies.add);shaka.dependencies.dependencies_=new Map;shaka.dependencies.Allowed={muxjs:"muxjs"};goog.exportProperty(shaka.dependencies,"Allowed",shaka.dependencies.Allowed);shaka.dependencies.dependencies_.set(shaka.dependencies.Allowed.muxjs,window.muxjs);shaka.media.Transmuxer=function(){var a=this;this.muxjs_=shaka.dependencies.muxjs();this.muxTransmuxer_=new this.muxjs_.mp4.Transmuxer({keepOriginalTimestamps:!0});this.transmuxPromise_=null;this.transmuxedData_=[];this.captions_=[];this.metadata_=[];this.isTransmuxing_=!1;this.muxTransmuxer_.on("data",function(b){return a.onTransmuxed_(b)});this.muxTransmuxer_.on("done",function(){return a.onTransmuxDone_()})};\nshaka.media.Transmuxer.prototype.destroy=function(){this.muxTransmuxer_.dispose();this.muxTransmuxer_=null;return Promise.resolve()};shaka.media.Transmuxer.isSupported=function(a,b){var c=shaka.media.Transmuxer;if(!shaka.dependencies.muxjs()||!c.isTsContainer(a))return!1;if(b)return MediaSource.isTypeSupported(c.convertTsCodecs(b,a));var d=shaka.util.ManifestParserUtils.ContentType,e=c.convertTsCodecs(d.AUDIO,a);c=c.convertTsCodecs(d.VIDEO,a);return MediaSource.isTypeSupported(e)||MediaSource.isTypeSupported(c)};\nshaka.media.Transmuxer.isTsContainer=function(a){return"mp2t"==a.toLowerCase().split(";")[0].split("/")[1]};\nshaka.media.Transmuxer.convertTsCodecs=function(a,b){var c=shaka.util.ManifestParserUtils.ContentType,d=b.replace(/mp2t/i,"mp4");a==c.AUDIO&&(d=d.replace("video","audio"));if(c=/avc1\\.(66|77|100)\\.(\\d+)/.exec(d)){var e="avc1.",f=c[1];"66"==f?e+="4200":"77"==f?e+="4d00":(goog.asserts.assert("100"==f,"Legacy avc1 parsing code out of sync with regex!"),e+="6400");f=Number(c[2]);goog.asserts.assert(256>f,"Invalid legacy avc1 level number!");e+=(f>>4).toString(16);e+=(f&15).toString(16);d=d.replace(c[0],\ne)}return d};\nshaka.media.Transmuxer.prototype.transmux=function(a){goog.asserts.assert(!this.isTransmuxing_,"No transmuxing should be in progress.");this.isTransmuxing_=!0;this.transmuxPromise_=new shaka.util.PublicPromise;this.transmuxedData_=[];this.captions_=[];this.metadata_=[];a=shaka.util.BufferUtils.toUint8(a);this.muxTransmuxer_.push(a);this.muxTransmuxer_.flush();this.isTransmuxing_&&this.transmuxPromise_.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.TRANSMUXING_FAILED));\nreturn this.transmuxPromise_};shaka.media.Transmuxer.prototype.onTransmuxed_=function(a){this.captions_=a.captions;this.metadata_=a.metadata;this.transmuxedData_.push(shaka.util.Uint8ArrayUtils.concat(a.initSegment,a.data))};\nshaka.media.Transmuxer.prototype.onTransmuxDone_=function(){var a={data:shaka.util.Uint8ArrayUtils.concat.apply(shaka.util.Uint8ArrayUtils,$jscomp.arrayFromIterable(this.transmuxedData_)),captions:this.captions_,metadata:this.metadata_};this.transmuxPromise_.resolve(a);this.isTransmuxing_=!1};shaka.util.MimeUtils=function(){};shaka.util.MimeUtils.getFullType=function(a,b){var c=a;b&&(c+=\'; codecs="\'+b+\'"\');return c};shaka.util.MimeUtils.getFullOrConvertedType=function(a,b,c){a=shaka.util.MimeUtils.getFullType(a,b);return shaka.dependencies.muxjs()&&shaka.media.Transmuxer.isTsContainer(a)?shaka.media.Transmuxer.convertTsCodecs(c,a):a};\nshaka.util.MimeUtils.getExtendedType=function(a){var b=[a.mimeType];shaka.util.MimeUtils.EXTENDED_MIME_PARAMETERS_.forEach(function(c,d){var e=a[d];e&&b.push(c+\'="\'+e+\'"\')});"PQ"==a.hdr&&b.push(\'eotf="smpte2084"\');return b.join(";")};shaka.util.MimeUtils.getContainerType=function(a){return a.split(";")[0].split("/")[1]};shaka.util.MimeUtils.splitCodecs=function(a){return a.split(",")};shaka.util.MimeUtils.getCodecBase=function(a){return shaka.util.MimeUtils.getCodecParts_(a)[0]};\nshaka.util.MimeUtils.getCodecParts_=function(a){var b=a.split(".");a=b[0];b.pop();b=b.join(".");return[a,b]};shaka.util.MimeUtils.EXTENDED_MIME_PARAMETERS_=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE="application/cea-608";shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE="application/cea-708";shaka.text.TextEngine=function(a){this.parser_=null;this.displayer_=a;this.appendWindowStart_=this.timestampOffset_=0;this.appendWindowEnd_=Infinity;this.bufferEnd_=this.bufferStart_=null;this.selectedClosedCaptionId_="";this.closedCaptionsMap_=new Map};shaka.text.TextEngine.registerParser=function(a,b){shaka.text.TextEngine.parserMap_[a]=b};shaka.text.TextEngine.unregisterParser=function(a){delete shaka.text.TextEngine.parserMap_[a]};shaka.text.TextEngine.findParser=function(a){return shaka.text.TextEngine.parserMap_[a]};\nshaka.text.TextEngine.isTypeSupported=function(a){return shaka.text.TextEngine.parserMap_[a]||a==shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE||a==shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE?!0:!1};shaka.text.TextEngine.prototype.destroy=function(){this.displayer_=this.parser_=null;this.closedCaptionsMap_.clear();return Promise.resolve()};shaka.text.TextEngine.prototype.setDisplayer=function(a){this.displayer_=a};\nshaka.text.TextEngine.prototype.initParser=function(a){a!=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE&&a!=shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE&&(a=shaka.text.TextEngine.parserMap_[a],goog.asserts.assert(a,"Text type negotiation should have happened already"),this.parser_=shaka.util.Functional.callFactory(a))};\nshaka.text.TextEngine.prototype.appendBuffer=function(a,b,c){var d=this,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return goog.asserts.assert(d.parser_,"The parser should already be initialized"),h.yield(Promise.resolve(),2);if(!d.parser_||!d.displayer_)return h["return"]();if(null==b||null==c)return d.parser_.parseInit(shaka.util.BufferUtils.toUint8(a)),h["return"]();e={periodStart:d.timestampOffset_,segmentStart:b,segmentEnd:c};f=d.parser_.parseMedia(shaka.util.BufferUtils.toUint8(a),\ne);g=f.filter(function(k){return k.startTime>=d.appendWindowStart_&&k.startTime<d.appendWindowEnd_});d.displayer_.append(g);null==d.bufferStart_?d.bufferStart_=Math.max(b,d.appendWindowStart_):(goog.asserts.assert(null!=d.bufferEnd_,"There should already be a buffered range end."),goog.asserts.assert(1>=b-d.bufferEnd_,"There should not be a gap in text references >1s"));d.bufferEnd_=Math.min(c,d.appendWindowEnd_);h.jumpToEnd()})};\nshaka.text.TextEngine.prototype.remove=function(a,b){var c=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(Promise.resolve(),2);c.displayer_&&c.displayer_.remove(a,b)&&(null==c.bufferStart_?goog.asserts.assert(null==c.bufferEnd_,"end must be null if startTime is null"):(goog.asserts.assert(null!=c.bufferEnd_,"end must be non-null if startTime is non-null"),b<=c.bufferStart_||a>=c.bufferEnd_||(a<=c.bufferStart_&&b>=c.bufferEnd_?c.bufferStart_=\nc.bufferEnd_=null:a<=c.bufferStart_&&b<c.bufferEnd_?c.bufferStart_=b:a>c.bufferStart_&&b>=c.bufferEnd_?c.bufferEnd_=a:goog.asserts.assert(!1,"removal from the middle is not supported by TextEngine"))));d.jumpToEnd()})};shaka.text.TextEngine.prototype.setTimestampOffset=function(a){this.timestampOffset_=a};shaka.text.TextEngine.prototype.setAppendWindow=function(a,b){this.appendWindowStart_=a;this.appendWindowEnd_=b};shaka.text.TextEngine.prototype.bufferStart=function(){return this.bufferStart_};\nshaka.text.TextEngine.prototype.bufferEnd=function(){return this.bufferEnd_};shaka.text.TextEngine.prototype.isBuffered=function(a){return null==this.bufferStart_||null==this.bufferEnd_?!1:a>=this.bufferStart_&&a<this.bufferEnd_};shaka.text.TextEngine.prototype.bufferedAheadOf=function(a){if(null==this.bufferEnd_||this.bufferEnd_<a)return 0;goog.asserts.assert(null!=this.bufferStart_,"start should not be null if end is not null");return this.bufferEnd_-Math.max(a,this.bufferStart_)};\nshaka.text.TextEngine.prototype.setSelectedClosedCaptionId=function(a,b){this.selectedClosedCaptionId_=a;var c=this.closedCaptionsMap_.get(a);if(c)for(var d=$jscomp.makeIterator(c.keys()),e=d.next();!e.done;e=d.next())(e=c.get(e.value).filter(function(f){return f.endTime<=b}))&&this.displayer_.append(e)};\nshaka.text.TextEngine.prototype.convertMuxjsCaptionsToShakaCaptions=function(a){var b=[];a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;var d=new shaka.text.Cue(c.startTime,c.endTime,c.text);b.push({stream:c.stream,cue:d})}return b};\nshaka.text.TextEngine.prototype.storeAndAppendClosedCaptions=function(a,b,c,d){var e=b+" "+c,f=new Map;a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;g=a.next()){var h=g.value;g=h.stream;h=h.cue;f.has(g)||f.set(g,new Map);f.get(g).has(e)||f.get(g).set(e,[]);h.startTime+=d;h.endTime+=d;h.startTime>=this.appendWindowStart_&&h.startTime<this.appendWindowEnd_&&(f.get(g).get(e).push(h),g==this.selectedClosedCaptionId_&&this.displayer_.append([h]))}d=$jscomp.makeIterator(f.keys());for(e=d.next();!e.done;e=\nd.next())for(e=e.value,this.closedCaptionsMap_.has(e)||this.closedCaptionsMap_.set(e,new Map),a=$jscomp.makeIterator(f.get(e).keys()),g=a.next();!g.done;g=a.next())g=g.value,h=f.get(e).get(g),this.closedCaptionsMap_.get(e).set(g,h);this.bufferStart_=null==this.bufferStart_?Math.max(b,this.appendWindowStart_):Math.min(this.bufferStart_,Math.max(b,this.appendWindowStart_));this.bufferEnd_=Math.max(this.bufferEnd_,Math.min(c,this.appendWindowEnd_))};\nshaka.text.TextEngine.prototype.getNumberOfClosedCaptionChannels=function(){return this.closedCaptionsMap_.size};shaka.text.TextEngine.prototype.getNumberOfClosedCaptionsInChannel=function(a){return(a=this.closedCaptionsMap_.get(a))?a.size:0};goog.exportSymbol("shaka.text.TextEngine",shaka.text.TextEngine);goog.exportProperty(shaka.text.TextEngine.prototype,"destroy",shaka.text.TextEngine.prototype.destroy);goog.exportProperty(shaka.text.TextEngine,"findParser",shaka.text.TextEngine.findParser);\ngoog.exportProperty(shaka.text.TextEngine,"unregisterParser",shaka.text.TextEngine.unregisterParser);goog.exportProperty(shaka.text.TextEngine,"registerParser",shaka.text.TextEngine.registerParser);shaka.text.TextEngine.parserMap_={};shaka.util.Destroyer=function(a){this.destroyed_=!1;this.waitOnDestroy_=new shaka.util.PublicPromise;this.onDestroy_=a};shaka.util.Destroyer.prototype.destroyed=function(){return this.destroyed_};shaka.util.Destroyer.prototype.destroy=function(){var a=this;if(this.destroyed_)return this.waitOnDestroy_;this.destroyed_=!0;return this.onDestroy_().then(function(){a.waitOnDestroy_.resolve()},function(){a.waitOnDestroy_.resolve()})};\nshaka.util.Destroyer.prototype.ensureNotDestroyed=function(a){if(this.destroyed_){if(a instanceof shaka.util.Error&&a.code==shaka.util.Error.Code.OBJECT_DESTROYED)throw a;throw shaka.util.Destroyer.destroyedError(a);}};shaka.util.Destroyer.destroyedError=function(a){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OBJECT_DESTROYED,a)};shaka.util.IReleasable=function(){};shaka.util.IReleasable.prototype.release=function(){};shaka.util.MultiMap=function(){this.map_={}};shaka.util.MultiMap.prototype.push=function(a,b){this.map_.hasOwnProperty(a)?this.map_[a].push(b):this.map_[a]=[b]};shaka.util.MultiMap.prototype.get=function(a){return(a=this.map_[a])?a.slice():null};shaka.util.MultiMap.prototype.getAll=function(){var a=[],b;for(b in this.map_)a.push.apply(a,$jscomp.arrayFromIterable(this.map_[b]));return a};\nshaka.util.MultiMap.prototype.remove=function(a,b){a in this.map_&&(this.map_[a]=this.map_[a].filter(function(c){return c!=b}),0==this.map_[a].length&&delete this.map_[a])};shaka.util.MultiMap.prototype.clear=function(){this.map_={}};shaka.util.MultiMap.prototype.forEach=function(a){for(var b in this.map_)a(b,this.map_[b])};shaka.util.MultiMap.prototype.size=function(){return Object.keys(this.map_).length};shaka.util.EventManager=function(){this.bindingMap_=new shaka.util.MultiMap};shaka.util.EventManager.prototype.release=function(){this.removeAll();this.bindingMap_=null};shaka.util.EventManager.prototype.listen=function(a,b,c,d){this.bindingMap_&&(a=new shaka.util.EventManager.Binding_(a,b,c,d),this.bindingMap_.push(b,a))};shaka.util.EventManager.prototype.listenOnce=function(a,b,c,d){var e=this,f=function(g){e.unlisten(a,b,f);c(g)};this.listen(a,b,f,d)};\nshaka.util.EventManager.prototype.unlisten=function(a,b,c){if(this.bindingMap_){var d=this.bindingMap_.get(b)||[];d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())e=e.value,e.target!=a||c!=e.listener&&c||(e.unlisten(),this.bindingMap_.remove(b,e))}};shaka.util.EventManager.prototype.removeAll=function(){if(this.bindingMap_){var a=this.bindingMap_.getAll();a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b.value.unlisten();this.bindingMap_.clear()}};\ngoog.exportSymbol("shaka.util.EventManager",shaka.util.EventManager);goog.exportProperty(shaka.util.EventManager.prototype,"removeAll",shaka.util.EventManager.prototype.removeAll);goog.exportProperty(shaka.util.EventManager.prototype,"unlisten",shaka.util.EventManager.prototype.unlisten);goog.exportProperty(shaka.util.EventManager.prototype,"listenOnce",shaka.util.EventManager.prototype.listenOnce);goog.exportProperty(shaka.util.EventManager.prototype,"listen",shaka.util.EventManager.prototype.listen);\ngoog.exportProperty(shaka.util.EventManager.prototype,"release",shaka.util.EventManager.prototype.release);shaka.util.EventManager.Binding_=function(a,b,c,d){this.target=a;this.type=b;this.listener=c;this.options=shaka.util.EventManager.Binding_.convertOptions_(a,d);this.target.addEventListener(b,c,this.options)};\nshaka.util.EventManager.Binding_.prototype.unlisten=function(){goog.asserts.assert(this.target,"Missing target");this.target.removeEventListener(this.type,this.listener,this.options);this.listener=this.target=null;this.options=!1};\nshaka.util.EventManager.Binding_.convertOptions_=function(a,b){if(void 0==b)return!1;if("boolean"==typeof b)return b;var c=new Set(["passive","capture"]),d=Object.keys(b).filter(function(e){return!c.has(e)});goog.asserts.assert(0==d.length,"Unsupported flag(s) to addEventListener: "+d.join(","));return shaka.util.EventManager.Binding_.doesSupportObject_(a)?b:b.capture||!1};\nshaka.util.EventManager.Binding_.doesSupportObject_=function(a){var b=shaka.util.EventManager.Binding_.supportsObject_;if(void 0==b){b=!1;try{var c={},d={get:function(){b=!0;return!1}};Object.defineProperty(c,"passive",d);Object.defineProperty(c,"capture",d);d=function(){};a.addEventListener("test",d,c);a.removeEventListener("test",d,c)}catch(e){b=!1}shaka.util.EventManager.Binding_.supportsObject_=b}return b||!1};shaka.util.EventManager.Binding_.supportsObject_=void 0;shaka.media.MediaSourceEngine=function(a,b,c,d){var e=this;this.video_=a;this.textDisplayer_=c;this.sourceBuffers_={};this.sourceBufferTypes_={};this.textEngine_=null;a=function(f,g,h){};this.onMetadata_=d||a;this.queues_={};this.eventManager_=new shaka.util.EventManager;this.transmuxers_={};this.captionParser_=b;this.mediaSourceOpen_=new shaka.util.PublicPromise;this.mediaSource_=this.createMediaSource(this.mediaSourceOpen_);this.destroyer_=new shaka.util.Destroyer(function(){return e.doDestroy_()});\nthis.url_=""};shaka.media.MediaSourceEngine.prototype.createMediaSource=function(a){var b=this,c=new MediaSource;this.eventManager_.listenOnce(c,"sourceopen",function(){return b.onSourceOpen_(a)});this.url_=shaka.media.MediaSourceEngine.createObjectURL(c);this.video_.src=this.url_;return c};shaka.media.MediaSourceEngine.prototype.onSourceOpen_=function(a){URL.revokeObjectURL(this.url_);a.resolve()};\nshaka.media.MediaSourceEngine.isStreamSupported=function(a){var b=shaka.util.MimeUtils.getFullType(a.mimeType,a.codecs),c=shaka.util.MimeUtils.getExtendedType(a);return shaka.text.TextEngine.isTypeSupported(b)||MediaSource.isTypeSupported(c)||shaka.media.Transmuxer.isSupported(b,a.type)};\nshaka.media.MediaSourceEngine.probeSupport=function(){for(var a={},b=$jscomp.makeIterator(\'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"\'.split(",")),c=\nb.next();!c.done;c=b.next()){c=c.value;shaka.util.Platform.supportsMediaSource()?shaka.text.TextEngine.isTypeSupported(c)?a[c]=!0:a[c]=MediaSource.isTypeSupported(c)||shaka.media.Transmuxer.isSupported(c):a[c]=shaka.util.Platform.supportsMediaType(c);var d=c.split(";")[0];a[d]=a[d]||a[c]}return a};shaka.media.MediaSourceEngine.prototype.destroy=function(){return this.destroyer_.destroy()};\nshaka.media.MediaSourceEngine.prototype.doDestroy_=function(){var a=this,b,c,d,e,f,g,h,k,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){b=shaka.util.Functional;c=[];for(d in a.queues_)for(e=a.queues_[d],f=e[0],a.queues_[d]=e.slice(0,1),f&&c.push(f.p["catch"](b.noop)),g=$jscomp.makeIterator(e.slice(1)),h=g.next();!h.done;h=g.next())k=h.value,k.p.reject(shaka.util.Destroyer.destroyedError());a.textEngine_&&c.push(a.textEngine_.destroy());a.textDisplayer_&&c.push(a.textDisplayer_.destroy());\nfor(l in a.transmuxers_)c.push(a.transmuxers_[l].destroy());return n.yield(Promise.all(c),2)}a.eventManager_&&(a.eventManager_.release(),a.eventManager_=null);a.video_&&(a.video_.removeAttribute("src"),a.video_.load(),a.video_=null);a.mediaSource_=null;a.textEngine_=null;a.textDisplayer_=null;a.sourceBuffers_={};a.transmuxers_={};a.captionParser_=null;if(goog.DEBUG)for(m in a.queues_)goog.asserts.assert(0==a.queues_[m].length,m+" queue should be empty after destroy!");a.queues_={};n.jumpToEnd()})};\nshaka.media.MediaSourceEngine.prototype.open=function(){return this.mediaSourceOpen_};\nshaka.media.MediaSourceEngine.prototype.init=function(a,b){var c=this,d,e,f,g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress)return d=shaka.util.ManifestParserUtils.ContentType,m.yield(c.mediaSourceOpen_,2);e={};f=$jscomp.makeIterator(a.keys());for(g=f.next();!g.done;e={$jscomp$loop$prop$contentType$566:e.$jscomp$loop$prop$contentType$566},g=f.next())e.$jscomp$loop$prop$contentType$566=g.value,h=a.get(e.$jscomp$loop$prop$contentType$566),goog.asserts.assert(shaka.media.MediaSourceEngine.isStreamSupported(h),\n"Type negotiation should happen before MediaSourceEngine.init!"),k=shaka.util.MimeUtils.getFullType(h.mimeType,h.codecs),e.$jscomp$loop$prop$contentType$566==d.TEXT?c.reinitText(k):(!b&&MediaSource.isTypeSupported(k)||!shaka.media.Transmuxer.isSupported(k,e.$jscomp$loop$prop$contentType$566)||(c.transmuxers_[e.$jscomp$loop$prop$contentType$566]=new shaka.media.Transmuxer,k=shaka.media.Transmuxer.convertTsCodecs(e.$jscomp$loop$prop$contentType$566,k)),l=c.mediaSource_.addSourceBuffer(k),c.eventManager_.listen(l,\n"error",function(n){return function(){return c.onError_(n.$jscomp$loop$prop$contentType$566)}}(e)),c.eventManager_.listen(l,"updateend",function(n){return function(){return c.onUpdateEnd_(n.$jscomp$loop$prop$contentType$566)}}(e)),c.sourceBuffers_[e.$jscomp$loop$prop$contentType$566]=l,c.sourceBufferTypes_[e.$jscomp$loop$prop$contentType$566]=k,c.queues_[e.$jscomp$loop$prop$contentType$566]=[]);m.jumpToEnd()})};\nshaka.media.MediaSourceEngine.prototype.reinitText=function(a){this.textEngine_||(this.textEngine_=new shaka.text.TextEngine(this.textDisplayer_));this.textEngine_.initParser(a)};shaka.media.MediaSourceEngine.prototype.ended=function(){return this.mediaSource_?"ended"==this.mediaSource_.readyState:!0};shaka.media.MediaSourceEngine.prototype.bufferStart=function(a){return a==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.bufferStart():shaka.media.TimeRangesUtils.bufferStart(this.getBuffered_(a))};\nshaka.media.MediaSourceEngine.prototype.bufferEnd=function(a){return a==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.bufferEnd():shaka.media.TimeRangesUtils.bufferEnd(this.getBuffered_(a))};shaka.media.MediaSourceEngine.prototype.isBuffered=function(a,b,c){if(a==shaka.util.ManifestParserUtils.ContentType.TEXT)return this.textEngine_.isBuffered(b);a=this.getBuffered_(a);return shaka.media.TimeRangesUtils.isBuffered(a,b,c)};\nshaka.media.MediaSourceEngine.prototype.bufferedAheadOf=function(a,b){if(a==shaka.util.ManifestParserUtils.ContentType.TEXT)return this.textEngine_.bufferedAheadOf(b);var c=this.getBuffered_(a);return shaka.media.TimeRangesUtils.bufferedAheadOf(c,b)};\nshaka.media.MediaSourceEngine.prototype.getBufferedInfo=function(){var a=shaka.util.ManifestParserUtils.ContentType,b=shaka.media.TimeRangesUtils;a={total:b.getBufferedInfo(this.video_.buffered),audio:b.getBufferedInfo(this.getBuffered_(a.AUDIO)),video:b.getBufferedInfo(this.getBuffered_(a.VIDEO)),text:[]};if(this.textEngine_){b=this.textEngine_.bufferStart();var c=this.textEngine_.bufferEnd();null!=b&&null!=c&&a.text.push({start:b,end:c})}return a};\nshaka.media.MediaSourceEngine.prototype.getBuffered_=function(a){try{return this.sourceBuffers_[a].buffered}catch(b){return a in this.sourceBuffers_&&shaka.log.error("failed to get buffered range for "+a,b),null}};\nshaka.media.MediaSourceEngine.prototype.appendBuffer=function(a,b,c,d,e){var f=this,g,h,k,l,m,n,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){g=shaka.util.ManifestParserUtils.ContentType;if(a==g.TEXT)return r.yield(f.textEngine_.appendBuffer(b,c,d),0);if(f.transmuxers_[a])return r.yield(f.transmuxers_[a].transmux(b),10);if(e)return f.textEngine_||f.reinitText("text/vtt"),null==c&&null==d?f.captionParser_.init(b):(h=f.captionParser_.parseFrom(b),h.length&&\n(k=f.sourceBuffers_[g.VIDEO].timestampOffset,f.textEngine_.storeAndAppendClosedCaptions(h,c,d,k))),b=f.workAroundBrokenPlatforms_(b,c,a),r.yield(f.enqueueOperation_(a,function(){return f.append_(a,b)}),0);b=f.workAroundBrokenPlatforms_(b,c,a);return r.yield(f.enqueueOperation_(a,function(){return f.append_(a,b)}),0)}l=r.yieldResult;f.textEngine_||f.reinitText("text/vtt");l.metadata&&(m=f.sourceBuffers_[a].timestampOffset,f.onMetadata_(l.metadata,m,d));l.captions&&l.captions.length&&(n=f.sourceBuffers_[g.VIDEO].timestampOffset,\np=f.textEngine_.convertMuxjsCaptionsToShakaCaptions(l.captions),f.textEngine_.storeAndAppendClosedCaptions(p,c,d,n));q=l.data;q=f.workAroundBrokenPlatforms_(q,c,a);return r.yield(f.enqueueOperation_(a,function(){return f.append_(a,q)}),0)})};shaka.media.MediaSourceEngine.prototype.setSelectedClosedCaptionId=function(a){var b=this.bufferEnd(shaka.util.ManifestParserUtils.ContentType.VIDEO)||0;this.textEngine_.setSelectedClosedCaptionId(a,b)};\nshaka.media.MediaSourceEngine.prototype.clearSelectedClosedCaptionId=function(){this.textEngine_&&this.textEngine_.setSelectedClosedCaptionId("",0)};shaka.media.MediaSourceEngine.prototype.remove=function(a,b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){e=shaka.util.ManifestParserUtils.ContentType;return a==e.TEXT?f.yield(d.textEngine_.remove(b,c),0):f.yield(d.enqueueOperation_(a,function(){return d.remove_(a,b,c)}),0)})};\nshaka.media.MediaSourceEngine.prototype.clear=function(a){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){c=shaka.util.ManifestParserUtils.ContentType;return a==c.TEXT?b.textEngine_?d.yield(b.textEngine_.remove(0,Infinity),0):d["return"]():d.yield(b.enqueueOperation_(a,function(){return b.remove_(a,0,b.mediaSource_.duration)}),0)})};shaka.media.MediaSourceEngine.prototype.resetCaptionParser=function(){this.captionParser_.reset()};\nshaka.media.MediaSourceEngine.prototype.flush=function(a){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){c=shaka.util.ManifestParserUtils.ContentType;return a==c.TEXT?d["return"]():d.yield(b.enqueueOperation_(a,function(){return b.flush_(a)}),0)})};\nshaka.media.MediaSourceEngine.prototype.setStreamProperties=function(a,b,c,d){var e=this,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){f=shaka.util.ManifestParserUtils.ContentType;return a==f.TEXT?(e.textEngine_.setTimestampOffset(b),e.textEngine_.setAppendWindow(c,d),g["return"]()):g.yield(Promise.all([e.enqueueOperation_(a,function(){return e.abort_(a)}),e.enqueueOperation_(a,function(){return e.setTimestampOffset_(a,b)}),e.enqueueOperation_(a,function(){return e.setAppendWindow_(a,\nc,d)})]),0)})};shaka.media.MediaSourceEngine.prototype.endOfStream=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return c.yield(b.enqueueBlockingOperation_(function(){b.ended()||(a?b.mediaSource_.endOfStream(a):b.mediaSource_.endOfStream())}),0)})};\nshaka.media.MediaSourceEngine.prototype.setDuration=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){goog.asserts.assert(isNaN(b.mediaSource_.duration)||b.mediaSource_.duration<=a,"duration cannot decrease: "+b.mediaSource_.duration+" -> "+a);return c.yield(b.enqueueBlockingOperation_(function(){b.mediaSource_.duration=a}),0)})};shaka.media.MediaSourceEngine.prototype.getDuration=function(){return this.mediaSource_.duration};\nshaka.media.MediaSourceEngine.prototype.append_=function(a,b){this.sourceBuffers_[a].appendBuffer(b)};shaka.media.MediaSourceEngine.prototype.remove_=function(a,b,c){if(c<=b)this.onUpdateEnd_(a);else this.sourceBuffers_[a].remove(b,c)};shaka.media.MediaSourceEngine.prototype.abort_=function(a){var b=this.sourceBuffers_[a].appendWindowStart,c=this.sourceBuffers_[a].appendWindowEnd;this.sourceBuffers_[a].abort();this.sourceBuffers_[a].appendWindowStart=b;this.sourceBuffers_[a].appendWindowEnd=c;this.onUpdateEnd_(a)};\nshaka.media.MediaSourceEngine.prototype.flush_=function(a){goog.asserts.assert(0==this.video_.buffered.length,"MediaSourceEngine.flush_ should only be used after clearing all data!");this.video_.currentTime-=.001;this.onUpdateEnd_(a)};shaka.media.MediaSourceEngine.prototype.setTimestampOffset_=function(a,b){0>b&&(b+=.001);this.sourceBuffers_[a].timestampOffset=b;this.onUpdateEnd_(a)};\nshaka.media.MediaSourceEngine.prototype.setAppendWindow_=function(a,b,c){this.sourceBuffers_[a].appendWindowStart=0;this.sourceBuffers_[a].appendWindowEnd=c;this.sourceBuffers_[a].appendWindowStart=b;this.onUpdateEnd_(a)};\nshaka.media.MediaSourceEngine.prototype.onError_=function(a){var b=this.queues_[a][0];goog.asserts.assert(b,"Spurious error event!");goog.asserts.assert(!this.sourceBuffers_[a].updating,"SourceBuffer should not be updating on error!");b.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_FAILED,this.video_.error?this.video_.error.code:0))};\nshaka.media.MediaSourceEngine.prototype.onUpdateEnd_=function(a){var b=this.queues_[a][0];goog.asserts.assert(b,"Spurious updateend event!");b&&(goog.asserts.assert(!this.sourceBuffers_[a].updating,"SourceBuffer should not be updating on updateend!"),b.p.resolve(),this.popFromQueue_(a))};\nshaka.media.MediaSourceEngine.prototype.enqueueOperation_=function(a,b){this.destroyer_.ensureNotDestroyed();var c={start:b,p:new shaka.util.PublicPromise};this.queues_[a].push(c);1==this.queues_[a].length&&this.startOperation_(a);return c.p};\nshaka.media.MediaSourceEngine.prototype.enqueueBlockingOperation_=function(a){var b=this,c,d,e,f,g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:b.destroyer_.ensureNotDestroyed();c=[];d={};for(e in b.sourceBuffers_)d.$jscomp$loop$prop$ready$568=new shaka.util.PublicPromise,f={start:function(n){return function(){return n.$jscomp$loop$prop$ready$568.resolve()}}(d),p:d.$jscomp$loop$prop$ready$568},b.queues_[e].push(f),c.push(d.$jscomp$loop$prop$ready$568),\n1==b.queues_[e].length&&f.start(),d={$jscomp$loop$prop$ready$568:d.$jscomp$loop$prop$ready$568};m.setCatchFinallyBlocks(2);return m.yield(Promise.all(c),4);case 4:m.leaveTryBlock(3);break;case 2:g=m.enterCatchBlock();goog.asserts.assert(b.destroyer_.destroyed(),"Should be destroyed by now");if(goog.DEBUG)for(h in b.sourceBuffers_)b.queues_[h].length&&(goog.asserts.assert(1==b.queues_[h].length,"Should be at most one item in queue!"),goog.asserts.assert(c.includes(b.queues_[h][0].p),"The item in queue should be one of our waiters!"),\nb.queues_[h].shift());throw g;case 3:if(goog.DEBUG)for(k in b.sourceBuffers_)goog.asserts.assert(0==b.sourceBuffers_[k].updating,"SourceBuffers should not be updating after a blocking op!");try{a()}catch(n){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_THREW,n);}finally{for(l in b.sourceBuffers_)b.popFromQueue_(l)}m.jumpToEnd()}})};\nshaka.media.MediaSourceEngine.prototype.popFromQueue_=function(a){this.queues_[a].shift();this.startOperation_(a)};\nshaka.media.MediaSourceEngine.prototype.startOperation_=function(a){var b=this.queues_[a][0];if(b)try{b.start()}catch(c){"QuotaExceededError"==c.name?b.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.QUOTA_EXCEEDED_ERROR,a)):b.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_THREW,c)),this.popFromQueue_(a)}};\nshaka.media.MediaSourceEngine.prototype.getTextDisplayer=function(){goog.asserts.assert(this.textDisplayer_,"TextDisplayer should only be null when this is destroyed");return this.textDisplayer_};shaka.media.MediaSourceEngine.prototype.setTextDisplayer=function(a){var b=this.textDisplayer_;this.textDisplayer_=a;b&&(a.setTextVisibility(b.isTextVisible()),b.destroy());this.textEngine_&&this.textEngine_.setDisplayer(a)};\nshaka.media.MediaSourceEngine.prototype.workAroundBrokenPlatforms_=function(a,b,c){var d=this.video_.mediaKeys;null==b&&d&&shaka.util.Platform.requiresEncryptionInfoInAllInitSegments()&&"mp4"==shaka.util.MimeUtils.getContainerType(this.sourceBufferTypes_[c])&&(shaka.log.debug("Forcing fake encryption information in init segment."),a=shaka.media.ContentWorkarounds.fakeEncryption(a));return a};shaka.media.MediaSourceEngine.createObjectURL=window.URL.createObjectURL;shaka.util.LanguageUtils=function(){};shaka.util.LanguageUtils.areLocaleCompatible=function(a,b){var c=shaka.util.LanguageUtils;a=c.normalize(a);b=c.normalize(b);return a==b};shaka.util.LanguageUtils.areLanguageCompatible=function(a,b){var c=shaka.util.LanguageUtils;a=c.normalize(a);b=c.normalize(b);var d=c.disassembleLocale_(a);c=c.disassembleLocale_(b);return d[0]==c[0]};\nshaka.util.LanguageUtils.isParentOf=function(a,b){var c=shaka.util.LanguageUtils;a=c.normalize(a);b=c.normalize(b);var d=c.disassembleLocale_(a);c=c.disassembleLocale_(b);return d[0]==c[0]&&1==d.length&&2==c.length};shaka.util.LanguageUtils.isSiblingOf=function(a,b){var c=shaka.util.LanguageUtils;a=c.normalize(a);b=c.normalize(b);var d=c.disassembleLocale_(a);c=c.disassembleLocale_(b);return 2==d.length&&2==c.length&&d[0]==c[0]};\nshaka.util.LanguageUtils.normalize=function(a){var b=shaka.util.LanguageUtils,c=a.split("-");a=c[0]||"";c=c[1]||"";a=a.toLowerCase();a=b.isoMap_.get(a)||a;return(c=c.toUpperCase())?a+"-"+c:a};shaka.util.LanguageUtils.areSiblings=function(a,b){var c=shaka.util.LanguageUtils,d=c.getBase(a);c=c.getBase(b);return a!=d&&b!=c&&d==c};\nshaka.util.LanguageUtils.relatedness=function(a,b){var c=shaka.util.LanguageUtils;a=c.normalize(a);b=c.normalize(b);return b==a?4:c.isParentOf(b,a)?3:c.isSiblingOf(b,a)?2:c.isParentOf(a,b)?1:0};shaka.util.LanguageUtils.getBase=function(a){var b=shaka.util.LanguageUtils,c=a.indexOf("-");a=0<=c?a.substring(0,c):a;a=a.toLowerCase();return a=b.isoMap_.get(a)||a};\nshaka.util.LanguageUtils.getLocaleForText=function(a){var b=shaka.util.LanguageUtils;goog.asserts.assert(a.type==shaka.util.ManifestParserUtils.ContentType.TEXT,"Can only get language from text streams");return b.normalize(a.language||"und")};shaka.util.LanguageUtils.getLocaleForVariant=function(a){var b=shaka.util.LanguageUtils;return a.language?b.normalize(a.language):a.audio&&a.audio.language?b.normalize(a.audio.language):a.video&&a.video.language?b.normalize(a.video.language):"und"};\nshaka.util.LanguageUtils.findClosestLocale=function(a,b){for(var c=shaka.util.LanguageUtils,d=c.normalize(a),e=new Set,f=$jscomp.makeIterator(b),g=f.next();!g.done;g=f.next())e.add(c.normalize(g.value));f=$jscomp.makeIterator(e);for(g=f.next();!g.done;g=f.next())if(g=g.value,g==d)return g;f=$jscomp.makeIterator(e);for(g=f.next();!g.done;g=f.next())if(g=g.value,c.isParentOf(g,d))return g;f=$jscomp.makeIterator(e);for(g=f.next();!g.done;g=f.next())if(g=g.value,c.isSiblingOf(g,d))return g;e=$jscomp.makeIterator(e);\nfor(g=e.next();!g.done;g=e.next())if(g=g.value,c.isParentOf(d,g))return g;return null};shaka.util.LanguageUtils.disassembleLocale_=function(a){var b=a.split("-");goog.asserts.assert(2>=b.length,["Locales should not have more than 2 components. ",a," has too many components."].join());return b};\nshaka.util.LanguageUtils.isoMap_=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre",\n"cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye",\n"hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah",\n"mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus",\n"ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb",\n"uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);shaka.util.StreamUtils=function(){};shaka.util.StreamUtils.chooseCodecsAndFilterManifest=function(a,b){var c=shaka.util.StreamUtils,d=c.filterVariantsByAudioChannelCount(a.variants,b);d=c.getVariantsByCodecs_(d);d=c.filterVariantsByDensity_(d);var e=c.findBestCodecs_(d);a.variants=a.variants.filter(function(f){if(c.getGroupVariantCodecs_(f)==e)return!0;shaka.log.debug("Dropping Variant (better codec available)",f);return!1})};\nshaka.util.StreamUtils.getVariantsByCodecs_=function(a){var b=new shaka.util.MultiMap;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;var d=shaka.util.StreamUtils.getGroupVariantCodecs_(c);b.push(d,c)}return b};\nshaka.util.StreamUtils.filterVariantsByDensity_=function(a){var b=0,c=new Map,d=a.size();a.forEach(function(e,f){for(var g=$jscomp.makeIterator(f),h=g.next();!h.done;h=g.next()){h=h.value;var k=h.video;if(k&&k.width&&k.height){k=k.width*k.height*(k.frameRate||1);c.has(k)||c.set(k,new shaka.util.MultiMap);var l=c.get(k);l.push(e,h);l.size()===d&&(b=Math.max(b,k))}}});return b?c.get(b):a};\nshaka.util.StreamUtils.findBestCodecs_=function(a){var b="",c=Infinity;a.forEach(function(d,e){for(var f=0,g=0,h=$jscomp.makeIterator(e),k=h.next();!k.done;k=h.next())f+=k.value.bandwidth||0,++g;f/=g;shaka.log.debug("codecs",d,"avg bandwidth",f);f<c&&(b=d,c=f)});goog.asserts.assert(""!==b,"Should have chosen codecs!");goog.asserts.assert(!isNaN(c),"Bandwidth should be a number!");return b};\nshaka.util.StreamUtils.getGroupVariantCodecs_=function(a){var b="";a.video&&(b=shaka.util.MimeUtils.getCodecBase(a.video.codecs));var c="";a.audio&&(c=shaka.util.MimeUtils.getCodecBase(a.audio.codecs));return b+"-"+c};shaka.util.StreamUtils.filterByRestrictions=function(a,b,c){a.variants=a.variants.filter(function(d){return shaka.util.StreamUtils.meetsRestrictions(d,b,c)})};\nshaka.util.StreamUtils.meetsRestrictions=function(a,b,c){var d=function(f,g,h){return f>=g&&f<=h},e=a.video;return e&&e.width&&e.height&&(!d(e.width,b.minWidth,Math.min(b.maxWidth,c.width))||!d(e.height,b.minHeight,Math.min(b.maxHeight,c.height))||!d(e.width*e.height,b.minPixels,b.maxPixels))||a&&a.video&&a.video.frameRate&&!d(a.video.frameRate,b.minFrameRate,b.maxFrameRate)||!d(a.bandwidth,b.minBandwidth,b.maxBandwidth)?!1:!0};\nshaka.util.StreamUtils.applyRestrictions=function(a,b,c){var d=!1;a=$jscomp.makeIterator(a);for(var e=a.next();!e.done;e=a.next()){e=e.value;var f=e.allowedByApplication;e.allowedByApplication=shaka.util.StreamUtils.meetsRestrictions(e,b,c);f!=e.allowedByApplication&&(d=!0)}return d};\nshaka.util.StreamUtils.filterManifest=function(a,b,c,d){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return d?e.yield(shaka.util.StreamUtils.filterManifestByMediaCapabilities(c,0<c.offlineSessionIds.length),2):(shaka.util.StreamUtils.filterManifestByDrm(c,a),shaka.util.StreamUtils.filterManifestByMediaSource(c),e.jumpTo(2));shaka.util.StreamUtils.filterManifestByCurrentVariant(b,c);shaka.util.StreamUtils.filterTextStreams_(c);shaka.util.StreamUtils.filterImageStreams_(c);\ne.jumpToEnd()})};shaka.util.StreamUtils.filterManifestByDrm=function(a,b){a.variants=a.variants.filter(function(c){if(b&&b.initialized()&&!b.supportsVariant(c))return shaka.log.debug("Dropping variant - not compatible with key system",c),!1;shaka.log.debug("DrmEngine is not initialized yet.");return!0})};\nshaka.util.StreamUtils.filterManifestByMediaCapabilities=function(a,b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return goog.asserts.assert(navigator.mediaCapabilities,"MediaCapabilities should be valid."),c.yield(shaka.util.StreamUtils.getDecodingInfosForVariants(a.variants,b),2);a.variants=a.variants.filter(function(d){var e=d.decodingInfos.some(function(f){return f.supported});e||shaka.log.debug("Dropping variant - not compatible with platform",shaka.util.StreamUtils.getVariantSummaryString_(d));\nreturn e});c.jumpToEnd()})};\nshaka.util.StreamUtils.filterManifestByMediaSource=function(a){var b=shaka.util.StreamUtils;a.variants=a.variants.filter(function(c){var d=c.audio;c=c.video;return d&&!shaka.media.MediaSourceEngine.isStreamSupported(d)?(shaka.log.debug("Dropping variant - audio not compatible with platform",b.getStreamSummaryString_(d)),!1):c&&!shaka.media.MediaSourceEngine.isStreamSupported(c)?(shaka.log.debug("Dropping variant - video not compatible with platform",b.getStreamSummaryString_(c)),!1):!0})};\nshaka.util.StreamUtils.getDecodingInfosForVariants=function(a,b){var c,d,e,f,g,h,k,l,m,n,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(c=a.some(function(r){return r.decodingInfos.length}))return shaka.log.debug("Already got the variants\' decodingInfo."),q["return"]();d=navigator.mediaCapabilities;e=[];f=function(r,t){var v,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return y.setCatchFinallyBlocks(2),y.yield(d.decodingInfo(t),4);if(2!=\ny.nextAddress)return v=y.yieldResult,r.decodingInfos.push(v),y.leaveTryBlock(0);u=y.enterCatchBlock();shaka.log.info("MediaCapabilities.decodingInfo() failed.",JSON.stringify(t),u);y.jumpToEnd()})};g=$jscomp.makeIterator(a);for(h=g.next();!h.done;h=g.next())for(k=h.value,l=shaka.util.StreamUtils.getDecodingConfigs_(k,b),m=$jscomp.makeIterator(l),n=m.next();!n.done;n=m.next())p=n.value,e.push(f(k,p));return q.yield(Promise.all(e),0)})};\nshaka.util.StreamUtils.getDecodingConfigs_=function(a,b){var c=a.audio,d=a.video,e=shaka.util.ManifestParserUtils.ContentType,f={type:"media-source"};if(d){var g=d.codecs;if(d.codecs.includes(",")){var h=d.codecs.split(",");g=shaka.util.ManifestParserUtils.guessCodecs(e.VIDEO,h);g=shaka.util.StreamUtils.patchVp9(g);h=shaka.util.ManifestParserUtils.guessCodecs(e.AUDIO,h);h=shaka.util.MimeUtils.getFullOrConvertedType(d.mimeType,h,e.AUDIO);f.audio={contentType:h,channels:2,bitrate:a.bandwidth||1,samplerate:1,\nspatialRendering:!1}}g=shaka.util.StreamUtils.patchVp9(g);g=shaka.util.MimeUtils.getFullOrConvertedType(d.mimeType,g,e.VIDEO);f.video={contentType:g,width:d.width||1,height:d.height||1,bitrate:d.bandwidth||a.bandwidth||1,framerate:d.frameRate||1}}c&&(g="ac-3"==c.codecs.toLowerCase()&&shaka.util.Platform.isTizen()?"ec-3":c.codecs,e=shaka.util.MimeUtils.getFullOrConvertedType(c.mimeType,g,e.AUDIO),f.audio={contentType:e,channels:c.channelsCount||2,bitrate:c.bandwidth||a.bandwidth||1,samplerate:c.audioSamplingRate||\n1,spatialRendering:c.spatialAudio});h=(a.video?a.video.drmInfos:[]).concat(a.audio?a.audio.drmInfos:[]);if(!h.length)return[f];e=[];g=new Map;h=$jscomp.makeIterator(h);for(var k=h.next();!k.done;k=h.next()){var l=k.value;g.get(l.keySystem)||g.set(l.keySystem,[]);g.get(l.keySystem).push(l)}h=b?"required":"optional";l=b?["persistent-license"]:["temporary"];for(var m=$jscomp.makeIterator(g.keys()),n=m.next();!n.done;n=m.next()){var p=n.value;n=Object.assign({},f);var q=g.get(p);p={keySystem:p,initDataType:"cenc",\npersistentState:h,distinctiveIdentifier:"optional",sessionTypes:l};q=$jscomp.makeIterator(q);for(k=q.next();!k.done;k=q.next()){k=k.value;if(k.initData&&k.initData.length){for(var r=new Set,t=$jscomp.makeIterator(k.initData),v=t.next();!v.done;v=t.next())r.add(v.value.initDataType);1<r.size&&shaka.log.v2("DrmInfo contains more than one initDataType,","and we use the initDataType of the first initData.",k);p.initDataType=k.initData[0].initDataType}k.distinctiveIdentifierRequired&&(p.distinctiveIdentifier=\n"required");k.persistentStateRequired&&(p.persistentState="required");k.sessionType&&(p.sessionTypes=[k.sessionType]);c&&(p.audio?p.audio.robustness=p.audio.robustness||k.audioRobustness:p.audio={robustness:k.audioRobustness});d&&(p.video?p.video.robustness=p.video.robustness||k.videoRobustness:p.video={robustness:k.videoRobustness})}n.keySystemConfiguration=p;e.push(n)}return e};shaka.util.StreamUtils.patchVp9=function(a){return"vp9"==a?"vp09.00.10.08":a};\nshaka.util.StreamUtils.filterManifestByCurrentVariant=function(a,b){var c=shaka.util.StreamUtils;b.variants=b.variants.filter(function(d){var e=d.audio;d=d.video;return e&&a&&a.audio&&!c.areStreamsCompatible_(e,a.audio)?(shaka.log.debug("Droping variant - not compatible with active audio","active audio",c.getStreamSummaryString_(a.audio),"variant.audio",c.getStreamSummaryString_(e)),!1):d&&a&&a.video&&!c.areStreamsCompatible_(d,a.video)?(shaka.log.debug("Droping variant - not compatible with active video",\n"active video",c.getStreamSummaryString_(a.video),"variant.video",c.getStreamSummaryString_(d)),!1):!0})};shaka.util.StreamUtils.filterTextStreams_=function(a){a.textStreams=a.textStreams.filter(function(b){var c=shaka.util.MimeUtils.getFullType(b.mimeType,b.codecs);(c=shaka.text.TextEngine.isTypeSupported(c))||shaka.log.debug("Dropping text stream. Is not supported by the platform.",b);return c})};\nshaka.util.StreamUtils.filterImageStreams_=function(a){a.imageStreams=a.imageStreams.filter(function(b){var c=["image/svg+xml","image/png","image/jpeg"],d=shaka.util.Platform;(d.isWebOS()||d.isTizen()||d.isChromecast())&&c.push("image/webp");(c=c.includes(b.mimeType))||shaka.log.debug("Dropping image stream. Is not supported by the platform.",b);return c})};shaka.util.StreamUtils.areStreamsCompatible_=function(a,b){return a.mimeType!=b.mimeType||a.codecs.split(".")[0]!=b.codecs.split(".")[0]?!1:!0};\nshaka.util.StreamUtils.variantToTrack=function(a){var b=a.audio,c=a.video,d=b?b.codecs:null,e=c?c.codecs:null,f=[];e&&f.push(e);d&&f.push(d);var g=[];c&&g.push(c.mimeType);b&&g.push(b.mimeType);g=g[0]||null;var h=[];b&&h.push(b.kind);c&&h.push(c.kind);h=h[0]||null;var k=new Set;if(b)for(var l=$jscomp.makeIterator(b.roles),m=l.next();!m.done;m=l.next())k.add(m.value);if(c)for(l=$jscomp.makeIterator(c.roles),m=l.next();!m.done;m=l.next())k.add(m.value);a={id:a.id,active:!1,type:"variant",bandwidth:a.bandwidth,\nlanguage:a.language,label:null,kind:h,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:g,codecs:f.join(", "),audioCodec:d,videoCodec:e,primary:a.primary,roles:Array.from(k),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null};c&&(a.videoId=c.id,a.originalVideoId=c.originalId,\na.width=c.width||null,a.height=c.height||null,a.frameRate=c.frameRate||null,a.pixelAspectRatio=c.pixelAspectRatio||null,a.videoBandwidth=c.bandwidth||null);b&&(a.audioId=b.id,a.originalAudioId=b.originalId,a.channelsCount=b.channelsCount,a.audioSamplingRate=b.audioSamplingRate,a.audioBandwidth=b.bandwidth||null,a.label=b.label,a.audioRoles=b.roles);return a};\nshaka.util.StreamUtils.textStreamToTrack=function(a){return{id:a.id,active:!1,type:shaka.util.ManifestParserUtils.ContentType.TEXT,bandwidth:0,language:a.language,label:a.label,kind:a.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:a.mimeType,codecs:a.codecs||null,audioCodec:null,videoCodec:null,primary:a.primary,roles:a.roles,audioRoles:null,forced:a.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,\naudioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:a.originalId,originalImageId:null}};\nshaka.util.StreamUtils.imageStreamToTrack=function(a){return{id:a.id,active:!1,type:shaka.util.ManifestParserUtils.ContentType.IMAGE,bandwidth:a.bandwidth||0,language:"",label:null,kind:null,width:a.width||null,height:a.height||null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:a.mimeType,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:a.tilesLayout||null,\naudioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:a.originalId}};shaka.util.StreamUtils.html5TrackId=function(a){a.__shaka_id||(a.__shaka_id=shaka.util.StreamUtils.nextTrackId_++);return a.__shaka_id};\nshaka.util.StreamUtils.html5TextTrackToTrack=function(a){var b=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE,c=shaka.util.StreamUtils.html5TrackToGenericShakaTrack_(a);c.active="disabled"!=a.mode;c.type="text";c.originalTextId=a.id;"captions"==a.kind&&(c.mimeType=b);a.kind&&(c.roles=[a.kind]);"forced"==a.kind&&(c.forced=!0);return c};\nshaka.util.StreamUtils.html5AudioTrackToTrack=function(a){var b=shaka.util.StreamUtils.html5TrackToGenericShakaTrack_(a);b.active=a.enabled;b.type="variant";b.originalAudioId=a.id;"main"==a.kind&&(b.primary=!0);a.kind&&(b.roles=[a.kind],b.audioRoles=[a.kind],b.label=a.label);return b};\nshaka.util.StreamUtils.html5TrackToGenericShakaTrack_=function(a){return{id:shaka.util.StreamUtils.html5TrackId(a),active:!1,type:"",bandwidth:0,language:shaka.util.LanguageUtils.normalize(a.language),label:a.label,kind:a.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,\naudioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}};shaka.util.StreamUtils.isPlayable=function(a){return a.allowedByApplication&&a.allowedByKeySystem};shaka.util.StreamUtils.getPlayableVariants=function(a){return a.filter(function(b){return shaka.util.StreamUtils.isPlayable(b)})};\nshaka.util.StreamUtils.filterVariantsByAudioChannelCount=function(a,b){var c=a.filter(function(g){return g.audio&&g.audio.channelsCount}),d=new Map;c=$jscomp.makeIterator(c);for(var e=c.next();!e.done;e=c.next()){e=e.value;var f=e.audio.channelsCount;goog.asserts.assert(null!=f,"Must have count after filtering!");d.has(f)||d.set(f,[]);d.get(f).push(e)}c=Array.from(d.keys());if(0==c.length)return a;e=c.filter(function(g){return g<=b});return e.length?d.get(Math.max.apply(Math,$jscomp.arrayFromIterable(e))):\nd.get(Math.min.apply(Math,$jscomp.arrayFromIterable(c)))};\nshaka.util.StreamUtils.filterStreamsByLanguageAndRole=function(a,b,c,d){var e=shaka.util.LanguageUtils,f=a,g=a.filter(function(l){return l.primary});g.length&&(f=g);var h=f.length?f[0].language:"";f=f.filter(function(l){return l.language==h});if(b){var k=e.findClosestLocale(e.normalize(b),a.map(function(l){return l.language}));k&&(f=a.filter(function(l){return e.normalize(l.language)==k}))}f=f.filter(function(l){return l.forced==d});if(c){a=shaka.util.StreamUtils.filterTextStreamsByRole_(f,c);if(a.length)return a;\nshaka.log.warning("No exact match for the text role could be found.")}else if(a=f.filter(function(l){return 0==l.roles.length}),a.length)return a;a=f.map(function(l){return l.roles}).reduce(shaka.util.Functional.collapseArrays,[]);return a.length?shaka.util.StreamUtils.filterTextStreamsByRole_(f,a[0]):f};shaka.util.StreamUtils.filterTextStreamsByRole_=function(a,b){return a.filter(function(c){return c.roles.includes(b)})};shaka.util.StreamUtils.isAudio=function(a){return a.type==shaka.util.ManifestParserUtils.ContentType.AUDIO};\nshaka.util.StreamUtils.isVideo=function(a){return a.type==shaka.util.ManifestParserUtils.ContentType.VIDEO};shaka.util.StreamUtils.getVariantStreams=function(a){var b=[];a.audio&&b.push(a.audio);a.video&&b.push(a.video);return b};shaka.util.StreamUtils.getVariantSummaryString_=function(a){var b=[];a.audio&&b.push(shaka.util.StreamUtils.getStreamSummaryString_(a.audio));a.video&&b.push(shaka.util.StreamUtils.getStreamSummaryString_(a.video));return b.join(", ")};\nshaka.util.StreamUtils.getStreamSummaryString_=function(a){return shaka.util.StreamUtils.isAudio(a)?"type=audio codecs="+a.codecs+" bandwidth="+a.bandwidth+" channelsCount="+a.channelsCount+" audioSamplingRate="+a.audioSamplingRate:shaka.util.StreamUtils.isVideo(a)?"type=video codecs="+a.codecs+" bandwidth="+a.bandwidth+" frameRate="+a.frameRate+" width="+a.width+" height="+a.height:"unexpected stream type"};shaka.util.StreamUtils.nextTrackId_=0;shaka.abr.SimpleAbrManager=function(){var a=this;this.switch_=null;this.enabled_=!1;this.bandwidthEstimator_=new shaka.abr.EwmaBandwidthEstimator;navigator.connection&&navigator.connection.addEventListener("change",function(){if(a.config_.useNetworkInformation){a.bandwidthEstimator_=new shaka.abr.EwmaBandwidthEstimator;var b=a.chooseVariant();b&&a.switch_(b)}});this.variants_=[];this.playbackRate_=1;this.startupComplete_=!1;this.config_=this.lastTimeChosenMs_=null};\nshaka.abr.SimpleAbrManager.prototype.stop=function(){this.switch_=null;this.enabled_=!1;this.variants_=[];this.playbackRate_=1;this.lastTimeChosenMs_=null};shaka.abr.SimpleAbrManager.prototype.init=function(a){this.switch_=a};\nshaka.abr.SimpleAbrManager.prototype.chooseVariant=function(){var a=shaka.abr.SimpleAbrManager,b=a.filterAndSortVariants_(this.config_.restrictions,this.variants_),c=this.getDefaultBandwidth_();c=this.bandwidthEstimator_.getBandwidthEstimate(c);this.variants_.length&&!b.length&&(shaka.log.warning("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),b=a.filterAndSortVariants_(null,this.variants_),b=[b[0]]);a=b[0]||null;b=$jscomp.makeIterator(shaka.util.Iterables.enumerate(b));\nfor(var d=b.next();!d.done;d=b.next()){var e=d.value;d=e.item;var f=e.next,g=isNaN(this.playbackRate_)?1:Math.abs(this.playbackRate_);e=g*d.bandwidth;var h=e/this.config_.bandwidthDowngradeTarget;f=g*(f||{bandwidth:Infinity}).bandwidth/this.config_.bandwidthUpgradeTarget;shaka.log.v2("Bandwidth ranges:",(e/1E6).toFixed(3),(h/1E6).toFixed(3),(f/1E6).toFixed(3));c>=h&&c<=f&&(a=d)}this.lastTimeChosenMs_=Date.now();return a};shaka.abr.SimpleAbrManager.prototype.enable=function(){this.enabled_=!0};\nshaka.abr.SimpleAbrManager.prototype.disable=function(){this.enabled_=!1};shaka.abr.SimpleAbrManager.prototype.segmentDownloaded=function(a,b){shaka.log.v2("Segment downloaded:","deltaTimeMs="+a,"numBytes="+b,"lastTimeChosenMs="+this.lastTimeChosenMs_,"enabled="+this.enabled_);goog.asserts.assert(0<=a,"expected a non-negative duration");this.bandwidthEstimator_.sample(a,b);null!=this.lastTimeChosenMs_&&this.enabled_&&this.suggestStreams_()};\nshaka.abr.SimpleAbrManager.prototype.getBandwidthEstimate=function(){return this.bandwidthEstimator_.getBandwidthEstimate(this.config_.defaultBandwidthEstimate)};shaka.abr.SimpleAbrManager.prototype.setVariants=function(a){this.variants_=a};shaka.abr.SimpleAbrManager.prototype.playbackRateChanged=function(a){this.playbackRate_=a};shaka.abr.SimpleAbrManager.prototype.configure=function(a){this.config_=a};\nshaka.abr.SimpleAbrManager.prototype.suggestStreams_=function(){shaka.log.v2("Suggesting Streams...");goog.asserts.assert(null!=this.lastTimeChosenMs_,"lastTimeChosenMs_ should not be null");if(!this.startupComplete_){if(!this.bandwidthEstimator_.hasGoodEstimate()){shaka.log.v2("Still waiting for a good estimate...");return}this.startupComplete_=!0}else if(Date.now()-this.lastTimeChosenMs_<1E3*this.config_.switchInterval){shaka.log.v2("Still within switch interval...");return}var a=this.chooseVariant(),\nb=this.getDefaultBandwidth_();b=this.bandwidthEstimator_.getBandwidthEstimate(b);b=Math.round(b/1E3);a&&(shaka.log.debug("Calling switch_(), bandwidth="+b+" kbps"),this.switch_(a))};shaka.abr.SimpleAbrManager.prototype.getDefaultBandwidth_=function(){var a=this.config_.defaultBandwidthEstimate;navigator.connection&&navigator.connection.downlink&&this.config_.useNetworkInformation&&(a=1E6*navigator.connection.downlink);return a};\nshaka.abr.SimpleAbrManager.filterAndSortVariants_=function(a,b){a&&(b=b.filter(function(c){goog.asserts.assert(a,"Restrictions should exist!");return shaka.util.StreamUtils.meetsRestrictions(c,a,{width:Infinity,height:Infinity})}));return b.sort(function(c,d){return c.bandwidth-d.bandwidth})};goog.exportSymbol("shaka.abr.SimpleAbrManager",shaka.abr.SimpleAbrManager);goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"configure",shaka.abr.SimpleAbrManager.prototype.configure);\ngoog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"playbackRateChanged",shaka.abr.SimpleAbrManager.prototype.playbackRateChanged);goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"setVariants",shaka.abr.SimpleAbrManager.prototype.setVariants);goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"getBandwidthEstimate",shaka.abr.SimpleAbrManager.prototype.getBandwidthEstimate);goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"segmentDownloaded",shaka.abr.SimpleAbrManager.prototype.segmentDownloaded);\ngoog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"disable",shaka.abr.SimpleAbrManager.prototype.disable);goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"enable",shaka.abr.SimpleAbrManager.prototype.enable);goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"chooseVariant",shaka.abr.SimpleAbrManager.prototype.chooseVariant);goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"init",shaka.abr.SimpleAbrManager.prototype.init);\ngoog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"stop",shaka.abr.SimpleAbrManager.prototype.stop);shaka.media.AdaptationSet=function(a,b){this.root_=a;this.variants_=new Set([a]);b=b||[];for(var c=$jscomp.makeIterator(b),d=c.next();!d.done;d=c.next())this.add(d.value)};shaka.media.AdaptationSet.prototype.add=function(a){if(this.canInclude(a))return this.variants_.add(a),!0;shaka.log.warning("Rejecting variant - not compatible with root.");return!1};shaka.media.AdaptationSet.prototype.canInclude=function(a){return shaka.media.AdaptationSet.areAdaptable(this.root_,a)};\nshaka.media.AdaptationSet.areAdaptable=function(a,b){var c=shaka.media.AdaptationSet;if(!!a.audio!=!!b.audio||!!a.video!=!!b.video||a.language!=b.language)return!1;goog.asserts.assert(!!a.audio==!!b.audio,"Both should either have audio or not have audio.");if(a.audio&&b.audio&&!c.areAudiosCompatible_(a.audio,b.audio))return!1;goog.asserts.assert(!!a.video==!!b.video,"Both should either have video or not have video.");return a.video&&b.video&&!c.areVideosCompatible_(a.video,b.video)?!1:!0};\nshaka.media.AdaptationSet.prototype.values=function(){return this.variants_.values()};shaka.media.AdaptationSet.areAudiosCompatible_=function(a,b){var c=shaka.media.AdaptationSet;return(!a.channelsCount||!b.channelsCount||2<a.channelsCount||2<b.channelsCount)&&a.channelsCount!=b.channelsCount||!c.canTransitionBetween_(a,b)||!c.areRolesEqual_(a.roles,b.roles)?!1:!0};\nshaka.media.AdaptationSet.areVideosCompatible_=function(a,b){var c=shaka.media.AdaptationSet;return c.canTransitionBetween_(a,b)&&c.areRolesEqual_(a.roles,b.roles)?!0:!1};\nshaka.media.AdaptationSet.canTransitionBetween_=function(a,b){if(a.mimeType!=b.mimeType)return!1;var c=shaka.util.MimeUtils.splitCodecs(a.codecs).map(function(g){return shaka.util.MimeUtils.getCodecBase(g)}),d=shaka.util.MimeUtils.splitCodecs(b.codecs).map(function(g){return shaka.util.MimeUtils.getCodecBase(g)});if(c.length!=d.length)return!1;c.sort();d.sort();for(var e=$jscomp.makeIterator(shaka.util.Iterables.range(c.length)),f=e.next();!f.done;f=e.next())if(f=f.value,c[f]!=d[f])return!1;return!0};\nshaka.media.AdaptationSet.areRolesEqual_=function(a,b){var c=new Set(a),d=new Set(b);c["delete"]("main");d["delete"]("main");if(c.size!=d.size)return!1;c=$jscomp.makeIterator(c);for(var e=c.next();!e.done;e=c.next())if(!d.has(e.value))return!1;return!0};shaka.media.AdaptationSetCriteria=function(){};shaka.media.AdaptationSetCriteria.prototype.create=function(a){};shaka.media.ExampleBasedCriteria=function(a){this.example_=a;this.fallback_=new shaka.media.PreferenceBasedCriteria(a.language,"",a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,"")};\nshaka.media.ExampleBasedCriteria.prototype.create=function(a){var b=this,c=a.filter(function(d){return shaka.media.AdaptationSet.areAdaptable(b.example_,d)});return c.length?new shaka.media.AdaptationSet(c[0],c):this.fallback_.create(a)};shaka.media.PreferenceBasedCriteria=function(a,b,c,d){this.language_=a;this.role_=b;this.channelCount_=c;this.label_=void 0===d?"":d};\nshaka.media.PreferenceBasedCriteria.prototype.create=function(a){var b=shaka.media.PreferenceBasedCriteria,c=shaka.util.StreamUtils,d=[];d=b.filterByLanguage_(a,this.language_);var e=a.filter(function(f){return f.primary});d=d.length?d:e.length?e:a;a=b.filterVariantsByRole_(d,this.role_);a.length?d=a:shaka.log.warning("No exact match for variant role could be found.");this.channelCount_&&(c=c.filterVariantsByAudioChannelCount(d,this.channelCount_),c.length?d=c:shaka.log.warning("No exact match for the channel count could be found."));\nthis.label_&&(b=b.filterVariantsByLabel_(d,this.label_),b.length?d=b:shaka.log.warning("No exact match for variant label could be found."));b=new shaka.media.AdaptationSet(d[0]);d=$jscomp.makeIterator(d);for(c=d.next();!c.done;c=d.next())c=c.value,b.canInclude(c)&&b.add(c);return b};\nshaka.media.PreferenceBasedCriteria.filterByLanguage_=function(a,b){var c=shaka.util.LanguageUtils,d=c.normalize(b),e=c.findClosestLocale(d,a.map(function(f){return c.getLocaleForVariant(f)}));return e?a.filter(function(f){return e==c.getLocaleForVariant(f)}):[]};shaka.media.PreferenceBasedCriteria.filterVariantsByRole_=function(a,b){return a.filter(function(c){return c.audio?b?c.audio.roles.includes(b):0==c.audio.roles.length:!1})};\nshaka.media.PreferenceBasedCriteria.filterVariantsByLabel_=function(a,b){return a.filter(function(c){if(!c.audio)return!1;c=c.audio.label.toLowerCase();var d=b.toLowerCase();return c==d})};shaka.media.BufferingObserver=function(a,b){var c=shaka.media.BufferingObserver.State;this.previousState_=c.SATISFIED;this.thresholds_=(new Map).set(c.SATISFIED,b).set(c.STARVING,a)};shaka.media.BufferingObserver.prototype.setThresholds=function(a,b){var c=shaka.media.BufferingObserver.State;this.thresholds_.set(c.SATISFIED,b).set(c.STARVING,a)};\nshaka.media.BufferingObserver.prototype.update=function(a,b){var c=shaka.media.BufferingObserver.State,d=this.thresholds_.get(this.previousState_),e=this.previousState_;this.previousState_=c=b||a>=d?c.SATISFIED:c.STARVING;return e!=c};shaka.media.BufferingObserver.prototype.setState=function(a){this.previousState_=a};shaka.media.BufferingObserver.prototype.getState=function(){return this.previousState_};shaka.media.BufferingObserver.State={STARVING:0,SATISFIED:1};shaka.net={};\nshaka.net.Backoff=function(a,b){b=void 0===b?!1:b;var c=shaka.net.Backoff.defaultRetryParameters();this.maxAttempts_=null==a.maxAttempts?c.maxAttempts:a.maxAttempts;goog.asserts.assert(1<=this.maxAttempts_,"maxAttempts should be >= 1");this.baseDelay_=null==a.baseDelay?c.baseDelay:a.baseDelay;goog.asserts.assert(0<=this.baseDelay_,"baseDelay should be >= 0");this.fuzzFactor_=null==a.fuzzFactor?c.fuzzFactor:a.fuzzFactor;goog.asserts.assert(0<=this.fuzzFactor_,"fuzzFactor should be >= 0");this.backoffFactor_=\nnull==a.backoffFactor?c.backoffFactor:a.backoffFactor;goog.asserts.assert(0<=this.backoffFactor_,"backoffFactor should be >= 0");this.numAttempts_=0;this.nextUnfuzzedDelay_=this.baseDelay_;if(this.autoReset_=b)goog.asserts.assert(2<=this.maxAttempts_,"maxAttempts must be >= 2 for autoReset == true"),this.numAttempts_=1};\nshaka.net.Backoff.prototype.attempt=function(){var a=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress){if(a.numAttempts_>=a.maxAttempts_)if(a.autoReset_)a.reset_();else throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.ATTEMPTS_EXHAUSTED);b=a.numAttempts_;a.numAttempts_++;if(0==b)return goog.asserts.assert(!a.autoReset_,"Failed to delay with auto-reset!"),d["return"]();c=shaka.net.Backoff.fuzz_(a.nextUnfuzzedDelay_,\na.fuzzFactor_);return d.yield(new Promise(function(e){shaka.net.Backoff.defer(c,e)}),2)}a.nextUnfuzzedDelay_*=a.backoffFactor_;d.jumpToEnd()})};shaka.net.Backoff.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1E3,backoffFactor:2,fuzzFactor:.5,timeout:3E4,stallTimeout:5E3,connectionTimeout:1E4}};shaka.net.Backoff.fuzz_=function(a,b){return a*(1+(2*Math.random()-1)*b)};\nshaka.net.Backoff.prototype.reset_=function(){goog.asserts.assert(this.autoReset_,"Should only be used for auto-reset!");this.numAttempts_=1;this.nextUnfuzzedDelay_=this.baseDelay_};shaka.net.Backoff.defer=function(a,b){(new shaka.util.Timer(b)).tickAfter(a/1E3)};shaka.util.AbortableOperation=function(a,b){this.promise=a;this.onAbort_=b;this.aborted_=!1};shaka.util.AbortableOperation.failed=function(a){return new shaka.util.AbortableOperation(Promise.reject(a),function(){return Promise.resolve()})};shaka.util.AbortableOperation.aborted=function(){var a=Promise.reject(shaka.util.AbortableOperation.abortError());a["catch"](function(){});return new shaka.util.AbortableOperation(a,function(){return Promise.resolve()})};\nshaka.util.AbortableOperation.abortError=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED)};shaka.util.AbortableOperation.completed=function(a){return new shaka.util.AbortableOperation(Promise.resolve(a),function(){return Promise.resolve()})};shaka.util.AbortableOperation.notAbortable=function(a){return new shaka.util.AbortableOperation(a,function(){return a["catch"](function(){})})};\nshaka.util.AbortableOperation.prototype.abort=function(){this.aborted_=!0;return this.onAbort_()};shaka.util.AbortableOperation.all=function(a){return new shaka.util.AbortableOperation(Promise.all(a.map(function(b){return b.promise})),function(){return Promise.all(a.map(function(b){return b.abort()}))})};shaka.util.AbortableOperation.prototype["finally"]=function(a){this.promise.then(function(b){return a(!0)},function(b){return a(!1)});return this};\nshaka.util.AbortableOperation.prototype.chain=function(a,b){var c=this,d=new shaka.util.PublicPromise,e=shaka.util.AbortableOperation.abortError(),f=function(){d.reject(e);return c.abort()},g=function(h){return function(k){if(c.aborted_&&h)d.reject(e);else{var l=h?a:b;l?f=shaka.util.AbortableOperation.wrapChainCallback_(l,k,d):(h?d.resolve:d.reject)(k)}}};this.promise.then(g(!0),g(!1));return new shaka.util.AbortableOperation(d,function(){return f()})};\nshaka.util.AbortableOperation.wrapChainCallback_=function(a,b,c){try{var d=a(b);if(d&&d.promise&&d.abort)return c.resolve(d.promise),function(){return d.abort()};c.resolve(d);return function(){return Promise.resolve(d).then(function(){},function(){})}}catch(e){return c.reject(e),function(){return Promise.resolve()}}};goog.exportSymbol("shaka.util.AbortableOperation",shaka.util.AbortableOperation);goog.exportProperty(shaka.util.AbortableOperation.prototype,"chain",shaka.util.AbortableOperation.prototype.chain);\ngoog.exportProperty(shaka.util.AbortableOperation.prototype,"finally",shaka.util.AbortableOperation.prototype["finally"]);goog.exportProperty(shaka.util.AbortableOperation,"all",shaka.util.AbortableOperation.all);goog.exportProperty(shaka.util.AbortableOperation.prototype,"abort",shaka.util.AbortableOperation.prototype.abort);goog.exportProperty(shaka.util.AbortableOperation,"notAbortable",shaka.util.AbortableOperation.notAbortable);goog.exportProperty(shaka.util.AbortableOperation,"completed",shaka.util.AbortableOperation.completed);\ngoog.exportProperty(shaka.util.AbortableOperation,"aborted",shaka.util.AbortableOperation.aborted);goog.exportProperty(shaka.util.AbortableOperation,"failed",shaka.util.AbortableOperation.failed);shaka.util.FakeEvent=function(a,b){b=void 0===b?{}:b;for(var c in b)Object.defineProperty(this,c,{value:b[c],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1;this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now();this.type=a;this.isTrusted=!1;this.target=this.currentTarget=null;this.stopped=!1};shaka.util.FakeEvent.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)};\nshaka.util.FakeEvent.prototype.stopImmediatePropagation=function(){this.stopped=!0};shaka.util.FakeEvent.prototype.stopPropagation=function(){};goog.exportSymbol("shaka.util.FakeEvent",shaka.util.FakeEvent);shaka.util.FakeEventTarget=function(){this.listeners_=new shaka.util.MultiMap;this.dispatchTarget=this};shaka.util.FakeEventTarget.prototype.addEventListener=function(a,b,c){this.listeners_.push(a,b)};shaka.util.FakeEventTarget.prototype.listenToAllEvents=function(a){this.addEventListener(shaka.util.FakeEventTarget.ALL_EVENTS_,a)};shaka.util.FakeEventTarget.prototype.removeEventListener=function(a,b,c){this.listeners_.remove(a,b)};\nshaka.util.FakeEventTarget.prototype.dispatchEvent=function(a){goog.asserts.assert(a instanceof shaka.util.FakeEvent,"FakeEventTarget can only dispatch FakeEvents!");var b=this.listeners_.get(a.type)||[],c=this.listeners_.get(shaka.util.FakeEventTarget.ALL_EVENTS_);c&&(b=b.concat(c));b=$jscomp.makeIterator(b);for(c=b.next();!c.done;c=b.next()){c=c.value;a.target=this.dispatchTarget;a.currentTarget=this.dispatchTarget;try{c.handleEvent?c.handleEvent(a):c.call(this,a)}catch(d){shaka.log.error("Uncaught exception in event handler",\nd,d?d.message:null,d?d.stack:null)}if(a.stopped)break}return a.defaultPrevented};shaka.util.FakeEventTarget.ALL_EVENTS_="All";shaka.util.ObjectUtils=function(){};shaka.util.ObjectUtils.cloneObject=function(a){var b=new Set,c=function(d){switch(typeof d){case "undefined":case "boolean":case "number":case "string":case "symbol":case "function":return d;default:if(!d||d.buffer&&d.buffer.constructor==ArrayBuffer)return d;if(b.has(d))return null;var e=d.constructor==Array;if(d.constructor!=Object&&!e)return null;b.add(d);var f=e?[]:{},g;for(g in d)f[g]=c(d[g]);e&&(f.length=d.length);return f}};return c(a)};\nshaka.util.ObjectUtils.shallowCloneObject=function(a){var b={},c;for(c in a)b[c]=a[c];return b};shaka.util.OperationManager=function(){this.operations_=[]};shaka.util.OperationManager.prototype.manage=function(a){var b=this;this.operations_.push(a["finally"](function(){shaka.util.ArrayUtils.remove(b.operations_,a)}))};shaka.util.OperationManager.prototype.destroy=function(){for(var a=[],b=$jscomp.makeIterator(this.operations_),c=b.next();!c.done;c=b.next())c=c.value,c.promise["catch"](function(){}),a.push(c.abort());this.operations_=[];return Promise.all(a)};shaka.net.NetworkingEngine=function(a){shaka.util.FakeEventTarget.call(this);this.destroyed_=!1;this.operationManager_=new shaka.util.OperationManager;this.requestFilters_=new Set;this.responseFilters_=new Set;this.onProgressUpdated_=a||null;this.forceHTTPS_=!1};$jscomp.inherits(shaka.net.NetworkingEngine,shaka.util.FakeEventTarget);shaka.net.NetworkingEngine.prototype.setForceHTTPS=function(a){this.forceHTTPS_=a};\nshaka.net.NetworkingEngine.registerScheme=function(a,b,c,d){d=void 0===d?!1:d;goog.asserts.assert(void 0==c||0<c,"explicit priority must be > 0");c=c||shaka.net.NetworkingEngine.PluginPriority.APPLICATION;var e=shaka.net.NetworkingEngine.schemes_[a];if(!e||c>=e.priority)shaka.net.NetworkingEngine.schemes_[a]={priority:c,plugin:b,progressSupport:d}};shaka.net.NetworkingEngine.unregisterScheme=function(a){delete shaka.net.NetworkingEngine.schemes_[a]};\nshaka.net.NetworkingEngine.prototype.registerRequestFilter=function(a){this.requestFilters_.add(a)};shaka.net.NetworkingEngine.prototype.unregisterRequestFilter=function(a){this.requestFilters_["delete"](a)};shaka.net.NetworkingEngine.prototype.clearAllRequestFilters=function(){this.requestFilters_.clear()};shaka.net.NetworkingEngine.prototype.registerResponseFilter=function(a){this.responseFilters_.add(a)};shaka.net.NetworkingEngine.prototype.unregisterResponseFilter=function(a){this.responseFilters_["delete"](a)};\nshaka.net.NetworkingEngine.prototype.clearAllResponseFilters=function(){this.responseFilters_.clear()};shaka.net.NetworkingEngine.defaultRetryParameters=function(){return shaka.net.Backoff.defaultRetryParameters()};shaka.net.NetworkingEngine.makeRequest=function(a,b,c){return{uris:a,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:b,licenseRequestType:null,sessionId:null,streamDataCallback:void 0===c?null:c}};\nshaka.net.NetworkingEngine.prototype.destroy=function(){this.destroyed_=!0;this.requestFilters_.clear();this.responseFilters_.clear();return this.operationManager_.destroy()};\nshaka.net.NetworkingEngine.prototype.request=function(a,b){var c=this,d=shaka.util.ObjectUtils,e=new shaka.net.NetworkingEngine.NumBytesRemainingClass;if(this.destroyed_)return d=Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED)),d["catch"](function(){}),new shaka.net.NetworkingEngine.PendingRequest(d,function(){return Promise.resolve()},e);goog.asserts.assert(b.uris&&b.uris.length,"Request without URIs!");\nb.method=b.method||"GET";b.headers=b.headers||{};b.retryParameters=b.retryParameters?d.cloneObject(b.retryParameters):shaka.net.NetworkingEngine.defaultRetryParameters();b.uris=d.cloneObject(b.uris);d=this.filterRequest_(a,b);var f=d.chain(function(){return c.makeRequestWithRetry_(a,b,e)}),g=f.chain(function(n){return c.filterResponse_(a,n)}),h=Date.now(),k=0;d.promise.then(function(){k=Date.now()-h},function(){});var l=0;f.promise.then(function(){l=Date.now()},function(){});var m=g.chain(function(n){var p=\nDate.now()-l,q=n.response;q.timeMs+=k;q.timeMs+=p;if(!n.gotProgress&&c.onProgressUpdated_&&!q.fromCache&&a==shaka.net.NetworkingEngine.RequestType.SEGMENT)c.onProgressUpdated_(q.timeMs,q.data.byteLength);return q},function(n){n&&(goog.asserts.assert(n instanceof shaka.util.Error,"Wrong error type"),n.severity=shaka.util.Error.Severity.CRITICAL);throw n;});d=new shaka.net.NetworkingEngine.PendingRequest(m.promise,function(){return m.abort()},e);this.operationManager_.manage(d);return d};\nshaka.net.NetworkingEngine.prototype.filterRequest_=function(a,b){for(var c=shaka.util.AbortableOperation.completed(void 0),d={},e=$jscomp.makeIterator(this.requestFilters_),f=e.next();!f.done;d={$jscomp$loop$prop$requestFilter$570:d.$jscomp$loop$prop$requestFilter$570},f=e.next())d.$jscomp$loop$prop$requestFilter$570=f.value,c=c.chain(function(g){return function(){b.body&&(b.body=shaka.util.BufferUtils.toArrayBuffer(b.body));return g.$jscomp$loop$prop$requestFilter$570(a,b)}}(d));return c.chain(void 0,\nfunction(g){if(g instanceof shaka.util.Error&&g.code==shaka.util.Error.Code.OPERATION_ABORTED)throw g;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.REQUEST_FILTER_ERROR,g);})};shaka.net.NetworkingEngine.prototype.makeRequestWithRetry_=function(a,b,c){var d=new shaka.net.Backoff(b.retryParameters,!1);return this.send_(a,b,d,0,null,c)};\nshaka.net.NetworkingEngine.prototype.send_=function(a,b,c,d,e,f){var g=this;this.forceHTTPS_&&(b.uris[d]=b.uris[d].replace("http://","https://"));var h=new goog.Uri(b.uris[d]),k=h.getScheme(),l=!1;k||(k=shaka.net.NetworkingEngine.getLocationProtocol_(),goog.asserts.assert(":"==k[k.length-1],"location.protocol expected to end with a colon!"),k=k.slice(0,-1),h.setScheme(k),b.uris[d]=h.toString());k=k.toLowerCase();var m=(k=shaka.net.NetworkingEngine.schemes_[k])?k.plugin:null;if(!m)return shaka.util.AbortableOperation.failed(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.NETWORK,shaka.util.Error.Code.UNSUPPORTED_SCHEME,h));var n=k.progressSupport,p=null,q=null,r=!1,t;return shaka.util.AbortableOperation.notAbortable(c.attempt()).chain(function(){if(g.destroyed_)return shaka.util.AbortableOperation.aborted();t=Date.now();var v=shaka.net.NetworkingEngine.RequestType.SEGMENT,u=m(b.uris[d],b,a,function(x,z,A){p&&p.stop();q&&q.tickAfter(w/1E3);g.onProgressUpdated_&&a==v&&(g.onProgressUpdated_(x,z),l=!0,f.setBytes(A))});if(!n)return u;var y=b.retryParameters.connectionTimeout;\ny&&(p=new shaka.util.Timer(function(){r=!0;u.abort()}),p.tickAfter(y/1E3));var w=b.retryParameters.stallTimeout;w&&(q=new shaka.util.Timer(function(){r=!0;u.abort()}));return u}).chain(function(v){p&&p.stop();q&&q.stop();void 0==v.timeMs&&(v.timeMs=Date.now()-t);return{response:v,gotProgress:l}},function(v){p&&p.stop();q&&q.stop();if(g.destroyed_)return shaka.util.AbortableOperation.aborted();r&&(v=new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,\nb.uris[d],a));if(v instanceof shaka.util.Error){if(v.code==shaka.util.Error.Code.OPERATION_ABORTED)throw v;if(v.code==shaka.util.Error.Code.ATTEMPTS_EXHAUSTED)throw goog.asserts.assert(e,"Should have last error"),e;if(v.severity==shaka.util.Error.Severity.RECOVERABLE){var u=new shaka.util.FakeEvent("retry",{error:v});g.dispatchEvent(u);d=(d+1)%b.uris.length;return g.send_(a,b,c,d,v,f)}}throw v;})};\nshaka.net.NetworkingEngine.prototype.filterResponse_=function(a,b){for(var c=shaka.util.AbortableOperation.completed(void 0),d={},e=$jscomp.makeIterator(this.responseFilters_),f=e.next();!f.done;d={$jscomp$loop$prop$responseFilter$572:d.$jscomp$loop$prop$responseFilter$572},f=e.next())d.$jscomp$loop$prop$responseFilter$572=f.value,c=c.chain(function(g){return function(){var h=b.response;h.data&&(h.data=shaka.util.BufferUtils.toArrayBuffer(h.data));return g.$jscomp$loop$prop$responseFilter$572(a,h)}}(d));\nreturn c.chain(function(){return b},function(g){var h=shaka.util.Error.Severity.CRITICAL;if(g instanceof shaka.util.Error){if(g.code==shaka.util.Error.Code.OPERATION_ABORTED)throw g;h=g.severity}throw new shaka.util.Error(h,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.RESPONSE_FILTER_ERROR,g);})};shaka.net.NetworkingEngine.getLocationProtocol_=function(){return location.protocol};goog.exportSymbol("shaka.net.NetworkingEngine",shaka.net.NetworkingEngine);\ngoog.exportProperty(shaka.net.NetworkingEngine.prototype,"request",shaka.net.NetworkingEngine.prototype.request);goog.exportProperty(shaka.net.NetworkingEngine.prototype,"destroy",shaka.net.NetworkingEngine.prototype.destroy);goog.exportProperty(shaka.net.NetworkingEngine,"makeRequest",shaka.net.NetworkingEngine.makeRequest);goog.exportProperty(shaka.net.NetworkingEngine,"defaultRetryParameters",shaka.net.NetworkingEngine.defaultRetryParameters);\ngoog.exportProperty(shaka.net.NetworkingEngine.prototype,"clearAllResponseFilters",shaka.net.NetworkingEngine.prototype.clearAllResponseFilters);goog.exportProperty(shaka.net.NetworkingEngine.prototype,"unregisterResponseFilter",shaka.net.NetworkingEngine.prototype.unregisterResponseFilter);goog.exportProperty(shaka.net.NetworkingEngine.prototype,"registerResponseFilter",shaka.net.NetworkingEngine.prototype.registerResponseFilter);\ngoog.exportProperty(shaka.net.NetworkingEngine.prototype,"clearAllRequestFilters",shaka.net.NetworkingEngine.prototype.clearAllRequestFilters);goog.exportProperty(shaka.net.NetworkingEngine.prototype,"unregisterRequestFilter",shaka.net.NetworkingEngine.prototype.unregisterRequestFilter);goog.exportProperty(shaka.net.NetworkingEngine.prototype,"registerRequestFilter",shaka.net.NetworkingEngine.prototype.registerRequestFilter);goog.exportProperty(shaka.net.NetworkingEngine,"unregisterScheme",shaka.net.NetworkingEngine.unregisterScheme);\ngoog.exportProperty(shaka.net.NetworkingEngine,"registerScheme",shaka.net.NetworkingEngine.registerScheme);goog.exportProperty(shaka.net.NetworkingEngine.prototype,"setForceHTTPS",shaka.net.NetworkingEngine.prototype.setForceHTTPS);shaka.net.NetworkingEngine.NumBytesRemainingClass=function(){this.bytesToLoad_=0};shaka.net.NetworkingEngine.NumBytesRemainingClass.prototype.setBytes=function(a){this.bytesToLoad_=a};shaka.net.NetworkingEngine.NumBytesRemainingClass.prototype.getBytes=function(){return this.bytesToLoad_};\ngoog.exportProperty(shaka.net.NetworkingEngine,"NumBytesRemainingClass",shaka.net.NetworkingEngine.NumBytesRemainingClass);shaka.net.NetworkingEngine.PendingRequest=function(a,b,c){shaka.util.AbortableOperation.call(this,a,b);this.bytesRemaining_=c};$jscomp.inherits(shaka.net.NetworkingEngine.PendingRequest,shaka.util.AbortableOperation);shaka.net.NetworkingEngine.PendingRequest.prototype.getBytesRemaining=function(){return this.bytesRemaining_.getBytes()};\ngoog.exportProperty(shaka.net.NetworkingEngine,"PendingRequest",shaka.net.NetworkingEngine.PendingRequest);shaka.net.NetworkingEngine.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4};goog.exportProperty(shaka.net.NetworkingEngine,"RequestType",shaka.net.NetworkingEngine.RequestType);shaka.net.NetworkingEngine.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};goog.exportProperty(shaka.net.NetworkingEngine,"PluginPriority",shaka.net.NetworkingEngine.PluginPriority);\nshaka.net.NetworkingEngine.schemes_={};shaka.util.FairPlayUtils=function(){};shaka.util.FairPlayUtils.defaultGetContentId=function(a){a=shaka.util.StringUtils.fromBytesAutoDetect(a);return(new goog.Uri(a)).getDomain()};\nshaka.util.FairPlayUtils.initDataTransform=function(a,b,c){if(!c||!c.byteLength)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.SERVER_CERTIFICATE_REQUIRED);b="string"==typeof b?shaka.util.StringUtils.toUTF16(b,!0):b;a=shaka.util.StringUtils.fromBytesAutoDetect(a);a=shaka.util.StringUtils.toUTF16(a,!0);var d=new Uint8Array(12+a.byteLength+b.byteLength+c.byteLength),e=0,f=function(g){shaka.util.BufferUtils.toDataView(d).setUint32(e,\ng.byteLength,!0);e+=4;d.set(shaka.util.BufferUtils.toUint8(g),e);e+=g.byteLength};f(a);f(b);f(c);goog.asserts.assert(e==d.length,"Inconsistent init data length");return d};goog.exportSymbol("shaka.util.FairPlayUtils",shaka.util.FairPlayUtils);goog.exportProperty(shaka.util.FairPlayUtils,"initDataTransform",shaka.util.FairPlayUtils.initDataTransform);goog.exportProperty(shaka.util.FairPlayUtils,"defaultGetContentId",shaka.util.FairPlayUtils.defaultGetContentId);shaka.util.MapUtils=function(){};shaka.util.MapUtils.asMap=function(a){for(var b=new Map,c=$jscomp.makeIterator(Object.keys(a)),d=c.next();!d.done;d=c.next())d=d.value,b.set(d,a[d]);return b};shaka.util.MapUtils.asObject=function(a){var b={};a.forEach(function(c,d){b[d]=c});return b};\nshaka.util.MapUtils.hasSameElements=function(a,b){if(a||b){if(a&&!b||b&&!a)return!1}else return!0;if(a.size!=b.size)return!1;for(var c=$jscomp.makeIterator(a),d=c.next();!d.done;d=c.next()){var e=$jscomp.makeIterator(d.value);d=e.next().value;e=e.next().value;if(!b.has(d))return!1;d=b.get(d);if(d!=e||void 0==d)return!1}return!0};shaka.media.DrmEngine=function(a,b){var c=this;b=void 0===b?1:b;this.playerInterface_=a;this.supportedTypes_=new Set;this.video_=this.mediaKeys_=null;this.initializedForStorage_=this.initialized_=!1;this.licenseTimeSeconds_=0;this.currentDrmInfo_=null;this.eventManager_=new shaka.util.EventManager;this.activeSessions_=new Map;this.offlineSessionIds_=[];this.allSessionsLoaded_=new shaka.util.PublicPromise;this.config_=null;this.onError_=function(d){c.allSessionsLoaded_.reject(d);a.onError(d)};this.keyStatusByKeyId_=\nnew Map;this.announcedKeyStatusByKeyId_=new Map;this.keyStatusTimer_=new shaka.util.Timer(function(){return c.processKeyStatusChanges_()});this.usePersistentLicenses_=!1;this.mediaKeyMessageEvents_=[];this.initialRequestsSent_=!1;this.expirationTimer_=(new shaka.util.Timer(function(){c.pollExpiration_()})).tickEvery(b);this.allSessionsLoaded_["catch"](function(){});this.destroyer_=new shaka.util.Destroyer(function(){return c.destroyNow_()})};shaka.media.DrmEngine.prototype.destroy=function(){return this.destroyer_.destroy()};\nshaka.media.DrmEngine.prototype.destroyNow_=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:return a.eventManager_.release(),a.eventManager_=null,a.allSessionsLoaded_.reject(),a.expirationTimer_.stop(),a.expirationTimer_=null,a.keyStatusTimer_.stop(),a.keyStatusTimer_=null,b.yield(a.closeOpenSessions_(),2);case 2:if(!a.video_){b.jumpTo(3);break}goog.asserts.assert(!a.video_.src,"video src must be removed first!");b.setCatchFinallyBlocks(4);\nreturn b.yield(a.video_.setMediaKeys(null),6);case 6:b.leaveTryBlock(5);break;case 4:b.enterCatchBlock();case 5:a.video_=null;case 3:a.currentDrmInfo_=null,a.supportedTypes_.clear(),a.mediaKeys_=null,a.offlineSessionIds_=[],a.config_=null,a.onError_=function(){},a.playerInterface_=null,b.jumpToEnd()}})};shaka.media.DrmEngine.prototype.configure=function(a){this.config_=a};\nshaka.media.DrmEngine.prototype.initForStorage=function(a,b,c){this.initializedForStorage_=!0;this.offlineSessionIds_=[];this.usePersistentLicenses_=b;return this.init_(a,!!c)};shaka.media.DrmEngine.prototype.initForPlayback=function(a,b,c){this.offlineSessionIds_=b;this.usePersistentLicenses_=0<b.length;return this.init_(a,!!c)};\nshaka.media.DrmEngine.prototype.initForRemoval=function(a,b,c,d,e){var f=new Map;d={audioCapabilities:d,videoCapabilities:e,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:a};d.drmInfos=[{keySystem:a,licenseServerUri:b,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:c,initData:null,keyIds:null}];f.set(a,d);return this.queryMediaKeys_(f,[],!1)};\nshaka.media.DrmEngine.prototype.init_=function(a,b){var c=this,d,e,f,g,h,k,l,m,n,p,q,r,t,v,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress){goog.asserts.assert(c.config_,"DrmEngine configure() must be called before init()!");if(d=c.configureClearKey_())for(e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next())g=f.value,g.video&&(g.video.drmInfos=[d]),g.audio&&(g.audio.drmInfos=[d]);h=a.some(function(w){return w.video&&w.video.drmInfos.length||w.audio&&w.audio.drmInfos.length?\n!0:!1});h||(k=shaka.util.MapUtils.asMap(c.config_.servers),shaka.media.DrmEngine.replaceDrmInfo_(a,k));l=$jscomp.makeIterator(a);for(f=l.next();!f.done;f=l.next())for(m=f.value,n=c.getVariantDrmInfos_(m),p=$jscomp.makeIterator(n),q=p.next();!q.done;q=p.next())r=q.value,shaka.media.DrmEngine.fillInDrmInfoDefaults_(r,shaka.util.MapUtils.asMap(c.config_.servers),shaka.util.MapUtils.asMap(c.config_.advanced||{}));return b?y.yield(shaka.util.StreamUtils.getDecodingInfosForVariants(a,c.usePersistentLicenses_),\n2):(t=c.prepareMediaKeyConfigsForVariants_(a),y.jumpTo(2))}v=h||Object.keys(c.config_.servers).length;if(!v)return c.initialized_=!0,y["return"](Promise.resolve());u=c.queryMediaKeys_(t,a,b);return y["return"](h?u:u["catch"](function(){}))})};\nshaka.media.DrmEngine.prototype.attach=function(a){var b=this,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(!b.mediaKeys_)return b.eventManager_.listenOnce(a,"encrypted",function(f){b.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO))}),e["return"]();b.video_=a;b.eventManager_.listenOnce(b.video_,"play",function(){return b.onPlay_()});"webkitCurrentPlaybackTargetIsWireless"in\nb.video_&&b.eventManager_.listen(b.video_,"webkitcurrentplaybacktargetiswirelesschanged",function(){return b.closeOpenSessions_()});c=b.video_.setMediaKeys(b.mediaKeys_);c=c["catch"](function(f){goog.asserts.assert(f instanceof Error,"Wrong error type!");return Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_ATTACH_TO_VIDEO,f.message))});return e.yield(c,2)}b.destroyer_.ensureNotDestroyed();b.createOrLoad();b.currentDrmInfo_.initData.length||\nb.offlineSessionIds_.length||(d=function(f){return b.newInitData(f.initDataType,shaka.util.BufferUtils.toUint8(f.initData))},b.eventManager_.listen(b.video_,"encrypted",d));e.jumpToEnd()})};\nshaka.media.DrmEngine.prototype.setServerCertificate=function(){var a=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress){goog.asserts.assert(a.initialized_,"Must call init() before setServerCertificate");if(!(a.mediaKeys_&&a.currentDrmInfo_&&a.currentDrmInfo_.serverCertificate&&a.currentDrmInfo_.serverCertificate.length))return d.jumpTo(0);d.setCatchFinallyBlocks(3);return d.yield(a.mediaKeys_.setServerCertificate(a.currentDrmInfo_.serverCertificate),5)}if(3!=\nd.nextAddress)return(b=d.yieldResult)||shaka.log.warning("Server certificates are not supported by the key system.  The server certificate has been ignored."),d.leaveTryBlock(0);c=d.enterCatchBlock();throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.INVALID_SERVER_CERTIFICATE,c.message);})};\nshaka.media.DrmEngine.prototype.removeSession=function(a){var b=this,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return goog.asserts.assert(b.mediaKeys_,"Must call init() before removeSession"),f.yield(b.loadOfflineSession_(a),2);c=f.yieldResult;if(!c)return shaka.log.v2("Ignoring attempt to remove missing session",a),f["return"]();d=[];if(e=b.activeSessions_.get(c))e.updatePromise=new shaka.util.PublicPromise,d.push(e.updatePromise);shaka.log.v2("Attempting to remove session",\na);d.push(c.remove());return f.yield(Promise.all(d),0)})};shaka.media.DrmEngine.prototype.createOrLoad=function(){for(var a=(this.currentDrmInfo_?this.currentDrmInfo_.initData:[])||[],b=$jscomp.makeIterator(a),c=b.next();!c.done;c=b.next())c=c.value,this.newInitData(c.initDataType,c.initData);b=$jscomp.makeIterator(this.offlineSessionIds_);for(c=b.next();!c.done;c=b.next())this.loadOfflineSession_(c.value);a.length||this.offlineSessionIds_.length||this.allSessionsLoaded_.resolve();return this.allSessionsLoaded_};\nshaka.media.DrmEngine.prototype.newInitData=function(a,b){var c=this.activeSessions_.values();c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())if(shaka.util.BufferUtils.equal(b,d.value.initData)&&!shaka.util.Platform.isTizen2()){shaka.log.debug("Ignoring duplicate init data.");return}this.createTemporarySession_(a,b)};shaka.media.DrmEngine.prototype.initialized=function(){return this.initialized_};shaka.media.DrmEngine.keySystem=function(a){return a?a.keySystem:""};\nshaka.media.DrmEngine.isPlayReadyKeySystem=function(a){return a?!!a.match(/^com\\.(microsoft|chromecast)\\.playready/):!1};shaka.media.DrmEngine.prototype.willSupport=function(a){if(shaka.util.Platform.isLegacyEdge())return!0;a=a.toLowerCase();if(shaka.util.Platform.isTizen()&&a.includes(\'codecs="ac-3"\')){var b=a.replace("ac-3","ec-3");return this.supportedTypes_.has(a)||this.supportedTypes_.has(b)}return this.supportedTypes_.has(a)};\nshaka.media.DrmEngine.prototype.getSessionIds=function(){var a=this.activeSessions_.keys();a=shaka.util.Iterables.map(a,function(b){return b.sessionId});return Array.from(a)};shaka.media.DrmEngine.prototype.getExpiration=function(){var a=Infinity,b=this.activeSessions_.keys();b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next())c=c.value,isNaN(c.expiration)||(a=Math.min(a,c.expiration));return a};\nshaka.media.DrmEngine.prototype.getLicenseTime=function(){return this.licenseTimeSeconds_?this.licenseTimeSeconds_:NaN};shaka.media.DrmEngine.prototype.getDrmInfo=function(){return this.currentDrmInfo_};shaka.media.DrmEngine.prototype.getMediaKeys=function(){return this.mediaKeys_};shaka.media.DrmEngine.prototype.getKeyStatuses=function(){return shaka.util.MapUtils.asObject(this.announcedKeyStatusByKeyId_)};\nshaka.media.DrmEngine.prototype.prepareMediaKeyConfigsForVariants_=function(a){for(var b=shaka.util.ManifestParserUtils.ContentType,c=new Set,d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next()){e=this.getVariantDrmInfos_(e.value);var f=$jscomp.makeIterator(e);for(e=f.next();!e.done;e=f.next())c.add(e.value)}d=$jscomp.makeIterator(c);for(e=d.next();!e.done;e=d.next())shaka.media.DrmEngine.fillInDrmInfoDefaults_(e.value,shaka.util.MapUtils.asMap(this.config_.servers),shaka.util.MapUtils.asMap(this.config_.advanced||\n{}));f=this.usePersistentLicenses_?"required":"optional";var g=this.usePersistentLicenses_?["persistent-license"]:["temporary"];d=new Map;c=$jscomp.makeIterator(c);for(e=c.next();!e.done;e=c.next())e=e.value,d.set(e.keySystem,{initDataTypes:["cenc"],audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:f,sessionTypes:g,label:e.keySystem,drmInfos:[]});a=$jscomp.makeIterator(a);for(e=a.next();!e.done;e=a.next())for(e=e.value,c=$jscomp.makeIterator([e.audio,e.video]),\ne=c.next();!e.done;e=c.next())if(f=e.value){g=shaka.media.DrmEngine.computeMimeType_(f);var h=null;"ac-3"==f.codecs.toLowerCase()&&shaka.util.Platform.isTizen()&&(h=shaka.media.DrmEngine.computeMimeType_(f,"ec-3"));var k=$jscomp.makeIterator(f.drmInfos);for(e=k.next();!e.done;e=k.next()){var l=e.value;e=d.get(l.keySystem);goog.asserts.assert(e,"Any missing configs should have be filled in before.");e.drmInfos.push(l);l.initData&&l.initData.length&&(e.initDataTypes=[].concat($jscomp.arrayFromIterable(new Set(l.initData.map(function(n){return n.initDataType})))));\nl.distinctiveIdentifierRequired&&(e.distinctiveIdentifier="required");l.persistentStateRequired&&(e.persistentState="required");l.sessionType&&(e.sessionTypes=[l.sessionType]);l=f.type==b.AUDIO?l.audioRobustness:l.videoRobustness;var m={robustness:l||"",contentType:g};f.type==b.AUDIO?e.audioCapabilities.push(m):e.videoCapabilities.push(m);h&&(l={robustness:l||"",contentType:h},f.type==b.AUDIO?e.audioCapabilities.push(l):e.videoCapabilities.push(l))}}return d};\nshaka.media.DrmEngine.computeMimeType_=function(a,b){var c=shaka.util.MimeUtils.getFullType(a.mimeType,b||a.codecs);return shaka.media.Transmuxer.isSupported(c)?shaka.media.Transmuxer.convertTsCodecs(a.type,c):c};\nshaka.media.DrmEngine.prototype.queryMediaKeys_=function(a,b,c){var d=this,e,f,g,h,k,l,m,n,p,q,r,t,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:e=new Map;if(c){f=d.getKeySystemAccessFromVariants_(b,e);u.jumpTo(2);break}return u.yield(d.getKeySystemAccessByConfigs_(a),3);case 3:f=u.yieldResult;case 2:g=f;if(!g)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE);\nd.destroyer_.ensureNotDestroyed();u.setCatchFinallyBlocks(4);d.supportedTypes_.clear();h=g.getConfiguration();shaka.log.v2("Got MediaKeySystemAccess with configuration",h);k=h.audioCapabilities||[];l=h.videoCapabilities||[];m=$jscomp.makeIterator(k);for(n=m.next();!n.done;n=m.next())p=n.value,d.supportedTypes_.add(p.contentType.toLowerCase());q=$jscomp.makeIterator(l);for(n=q.next();!n.done;n=q.next())r=n.value,d.supportedTypes_.add(r.contentType.toLowerCase());goog.asserts.assert(d.supportedTypes_.size,\n"We should get at least one supported MIME type");d.currentDrmInfo_=c?d.createDrmInfoByInfos_(g.keySystem,e.get(g.keySystem)):shaka.media.DrmEngine.createDrmInfoByConfigs_(g.keySystem,a.get(g.keySystem));if(!d.currentDrmInfo_.licenseServerUri)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_LICENSE_SERVER_GIVEN,d.currentDrmInfo_.keySystem);return u.yield(g.createMediaKeys(),6);case 6:return t=u.yieldResult,d.destroyer_.ensureNotDestroyed(),\nshaka.log.info("Created MediaKeys object for key system",d.currentDrmInfo_.keySystem),d.mediaKeys_=t,d.initialized_=!0,u.yield(d.setServerCertificate(),7);case 7:d.destroyer_.ensureNotDestroyed();u.leaveTryBlock(0);break;case 4:v=u.enterCatchBlock();d.destroyer_.ensureNotDestroyed(v);d.currentDrmInfo_=null;d.supportedTypes_.clear();if(v instanceof shaka.util.Error)throw v;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_CDM,\nv.message);}})};\nshaka.media.DrmEngine.prototype.getKeySystemAccessFromVariants_=function(a,b){for(var c=$jscomp.makeIterator(a),d=c.next();!d.done;d=c.next()){var e=this.getVariantDrmInfos_(d.value);e=$jscomp.makeIterator(e);for(d=e.next();!d.done;d=e.next()){var f=d.value;b.has(f.keySystem)||b.set(f.keySystem,[]);b.get(f.keySystem).push(f)}}if(1==b.size&&b.has(""))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_RECOGNIZED_KEY_SYSTEMS);c=$jscomp.makeIterator([!0,\n!1]);for(e=c.next();!e.done;e=c.next())for(e=e.value,f=$jscomp.makeIterator(a),d=f.next();!d.done;d=f.next()){var g=$jscomp.makeIterator(d.value.decodingInfos);for(d=g.next();!d.done;d=g.next()){var h=d.value;if(h.supported&&h.keySystemAccess){d=b.get(h.keySystemAccess.keySystem);var k=$jscomp.makeIterator(d);for(d=k.next();!d.done;d=k.next())if(!!d.value.licenseServerUri==e)return h.keySystemAccess}}}return null};\nshaka.media.DrmEngine.prototype.getKeySystemAccessByConfigs_=function(a){var b=this,c,d,e,f,g,h,k,l,m,n,p,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){switch(t.nextAddress){case 1:if(1==a.size&&a.has(""))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_RECOGNIZED_KEY_SYSTEMS);d=$jscomp.makeIterator(a.values());for(e=d.next();!e.done;e=d.next())f=e.value,0==f.audioCapabilities.length&&delete f.audioCapabilities,\n0==f.videoCapabilities.length&&delete f.videoCapabilities;g=$jscomp.makeIterator([!0,!1]);h=g.next();case 2:if(h.done){t.jumpTo(4);break}k=h.value;l=$jscomp.makeIterator(a.keys());m=l.next();case 5:if(m.done){h=g.next();t.jumpTo(2);break}n=m.value;p=a.get(n);q=p.drmInfos.some(function(v){return!!v.licenseServerUri});if(q!=k){t.jumpTo(6);break}t.setCatchFinallyBlocks(8);return t.yield(navigator.requestMediaKeySystemAccess(n,[p]),10);case 10:return c=t.yieldResult,t["return"](c);case 8:r=t.enterCatchBlock(),\nshaka.log.v2("Requesting",n,"failed with config",p,r);case 9:b.destroyer_.ensureNotDestroyed();case 6:m=l.next();t.jumpTo(5);break;case 4:return t["return"](c)}})};\nshaka.media.DrmEngine.prototype.configureClearKey_=function(){var a=shaka.util.MapUtils.asMap(this.config_.clearKeys);if(0==a.size)return null;var b=shaka.util.StringUtils,c=shaka.util.Uint8ArrayUtils,d=[],e=[];a.forEach(function(g,h){var k=c.fromHex(h),l=c.fromHex(g);k={kty:"oct",kid:c.toBase64(k,!1),k:c.toBase64(l,!1)};d.push(k);e.push(k.kid)});a=JSON.stringify({keys:d});var f=JSON.stringify({kids:e});b=[{initData:shaka.util.BufferUtils.toUint8(b.toUTF8(f)),initDataType:"keyids"}];return{keySystem:"org.w3.clearkey",\nlicenseServerUri:"data:application/json;base64,"+window.btoa(a),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,sessionType:"",initData:b,keyIds:new Set(e)}};\nshaka.media.DrmEngine.prototype.loadOfflineSession_=function(a){var b=this,c,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:try{shaka.log.v1("Attempting to load an offline session",a),c=b.mediaKeys_.createSession("persistent-license")}catch(k){return d=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,k.message),b.onError_(d),h["return"](Promise.reject(d))}b.eventManager_.listen(c,\n"message",function(k){return b.onSessionMessage_(k)});b.eventManager_.listen(c,"keystatuseschange",function(k){return b.onKeyStatusesChange_(k)});e={initData:null,loaded:!1,oldExpiration:Infinity,updatePromise:null,type:"persistent-license"};b.activeSessions_.set(c,e);h.setCatchFinallyBlocks(2);return h.yield(c.load(a),4);case 4:f=h.yieldResult;b.destroyer_.ensureNotDestroyed();shaka.log.v2("Loaded offline session",a,f);if(!f)return b.activeSessions_["delete"](c),b.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.DRM,shaka.util.Error.Code.OFFLINE_SESSION_REMOVED)),h["return"](Promise.resolve());e.loaded=!0;b.areAllSessionsLoaded_()&&b.allSessionsLoaded_.resolve();return h["return"](c);case 2:g=h.enterCatchBlock(),b.destroyer_.ensureNotDestroyed(g),b.activeSessions_["delete"](c),b.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,g.message));case 3:return h["return"](Promise.resolve())}})};\nshaka.media.DrmEngine.prototype.createTemporarySession_=function(a,b){var c=this;goog.asserts.assert(this.mediaKeys_,"mediaKeys_ should be valid when creating temporary session.");var d=this.currentDrmInfo_.sessionType;try{shaka.log.info("Creating new",d,"session");var e=this.mediaKeys_.createSession(d)}catch(f){this.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,f.message));return}this.eventManager_.listen(e,\n"message",function(f){return c.onSessionMessage_(f)});this.eventManager_.listen(e,"keystatuseschange",function(f){return c.onKeyStatusesChange_(f)});this.activeSessions_.set(e,{initData:b,loaded:!1,oldExpiration:Infinity,updatePromise:null,type:d});try{b=this.config_.initDataTransform(b,a,this.currentDrmInfo_)}catch(f){d=f;f instanceof shaka.util.Error||(d=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.INIT_DATA_TRANSFORM_ERROR,f));this.onError_(d);\nreturn}this.config_.logLicenseExchange&&(d=shaka.util.Uint8ArrayUtils.toBase64(b),shaka.log.info("EME init data: type=",a,"data=",d));e.generateRequest(a,b)["catch"](function(f){if(!c.destroyer_.destroyed()){goog.asserts.assert(f instanceof Error,"Wrong error type!");c.activeSessions_["delete"](e);var g=f.errorCode;if(g&&g.systemCode){var h=g.systemCode;0>h&&(h+=Math.pow(2,32));h="0x"+h.toString(16)}c.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_GENERATE_LICENSE_REQUEST,\nf.message,f,h))}})};shaka.media.DrmEngine.defaultInitDataTransform=function(a,b,c){"skd"==b&&(b=c.serverCertificate,c=shaka.util.FairPlayUtils.defaultGetContentId(a),a=shaka.util.FairPlayUtils.initDataTransform(a,c,b));return a};shaka.media.DrmEngine.prototype.onSessionMessage_=function(a){this.delayLicenseRequest_()?this.mediaKeyMessageEvents_.push(a):this.sendLicenseRequest_(a)};\nshaka.media.DrmEngine.prototype.delayLicenseRequest_=function(){return this.video_?this.config_.delayLicenseRequestUntilPlayed&&this.video_.paused&&!this.initialRequestsSent_:!1};\nshaka.media.DrmEngine.prototype.sendLicenseRequest_=function(a){var b=this,c,d,e,f,g,h,k,l,m,n,p,q,r,t,v,u,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return c=a.target,shaka.log.v1("Sending license request for session",c.sessionId,"of type",a.messageType),b.config_.logLicenseExchange&&(d=shaka.util.Uint8ArrayUtils.toBase64(a.message),shaka.log.info("EME license request",d)),e=b.activeSessions_.get(c),f=b.currentDrmInfo_.licenseServerUri,g=b.config_.advanced[b.currentDrmInfo_.keySystem],\n"individualization-request"==a.messageType&&g&&g.individualizationServer&&(f=g.individualizationServer),h=shaka.net.NetworkingEngine.RequestType.LICENSE,k=shaka.net.NetworkingEngine.makeRequest([f],b.config_.retryParameters),k.body=a.message,k.method="POST",k.licenseRequestType=a.messageType,k.sessionId=c.sessionId,shaka.media.DrmEngine.isPlayReadyKeySystem(b.currentDrmInfo_.keySystem)&&b.unpackPlayReadyRequest_(k),l=Date.now(),w.setCatchFinallyBlocks(2),n=b.playerInterface_.netEngine.request(h,k),\nw.yield(n.promise,4);case 4:m=w.yieldResult;w.leaveTryBlock(3);break;case 2:return p=w.enterCatchBlock(),goog.asserts.assert(p instanceof shaka.util.Error,"Wrong NetworkingEngine error type!"),q=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.LICENSE_REQUEST_FAILED,p),b.onError_(q),e&&e.updatePromise&&e.updatePromise.reject(q),w["return"]();case 3:if(b.destroyer_.destroyed())return w["return"]();b.licenseTimeSeconds_+=(Date.now()-l)/1E3;\nb.config_.logLicenseExchange&&(r=shaka.util.Uint8ArrayUtils.toBase64(m.data),shaka.log.info("EME license response",r));w.setCatchFinallyBlocks(5);shaka.log.v1("Updating session",c.sessionId);return w.yield(c.update(m.data),7);case 7:w.leaveTryBlock(6);break;case 5:return t=w.enterCatchBlock(),v=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.LICENSE_RESPONSE_REJECTED,t.message),b.onError_(v),e&&e.updatePromise&&e.updatePromise.reject(v),\nw["return"]();case 6:u=new shaka.util.FakeEvent("drmsessionupdate"),b.playerInterface_.onEvent(u),e&&(e.updatePromise&&e.updatePromise.resolve(),y=new shaka.util.Timer(function(){e.loaded=!0;b.areAllSessionsLoaded_()&&b.allSessionsLoaded_.resolve()}),y.tickAfter(shaka.media.DrmEngine.SESSION_LOAD_TIMEOUT_)),w.jumpToEnd()}})};\nshaka.media.DrmEngine.prototype.unpackPlayReadyRequest_=function(a){var b=shaka.util.StringUtils.fromUTF16(a.body,!0,!0);if(b.includes("PlayReadyKeyMessage")){shaka.log.debug("Unwrapping PlayReady request.");b=(new DOMParser).parseFromString(b,"application/xml");var c=b.getElementsByTagName("HttpHeader");c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next()){var e=d.value;d=e.getElementsByTagName("name")[0];e=e.getElementsByTagName("value")[0];goog.asserts.assert(d&&e,"Malformed PlayReady headers!");\na.headers[d.textContent]=e.textContent}b=b.getElementsByTagName("Challenge")[0];goog.asserts.assert(b,"Malformed PlayReady challenge!");goog.asserts.assert("base64encoded"==b.getAttribute("encoding"),"Unexpected PlayReady challenge encoding!");a.body=shaka.util.Uint8ArrayUtils.fromBase64(b.textContent)}else shaka.log.debug("PlayReady request is already unwrapped."),a.headers["Content-Type"]="text/xml; charset=utf-8"};\nshaka.media.DrmEngine.prototype.onKeyStatusesChange_=function(a){var b=this;a=a.target;shaka.log.v2("Key status changed for session",a.sessionId);var c=this.activeSessions_.get(a),d=!1;a.keyStatuses.forEach(function(f,g){if("string"==typeof g){var h=g;g=f;f=h}if(shaka.media.DrmEngine.isPlayReadyKeySystem(b.currentDrmInfo_.keySystem)&&16==g.byteLength&&shaka.util.Platform.isEdge()){h=shaka.util.BufferUtils.toDataView(g);var k=h.getUint32(0,!0),l=h.getUint16(4,!0),m=h.getUint16(6,!0);h.setUint32(0,\nk,!1);h.setUint16(4,l,!1);h.setUint16(6,m,!1)}"status-pending"!=f&&(c.loaded=!0);c||goog.asserts.assert("usable"!=f,"Usable keys found in closed session");"expired"==f&&(d=!0);h=shaka.util.Uint8ArrayUtils.toHex(g);b.keyStatusByKeyId_.set(h,f)});var e=a.expiration-Date.now();(0>e||d&&1E3>e)&&c&&!c.updatePromise&&(shaka.log.debug("Session has expired",a.sessionId),this.activeSessions_["delete"](a),a.close()["catch"](function(){}));this.areAllSessionsLoaded_()&&(this.allSessionsLoaded_.resolve(),this.keyStatusTimer_.tickAfter(shaka.media.DrmEngine.KEY_STATUS_BATCH_TIME))};\nshaka.media.DrmEngine.prototype.processKeyStatusChanges_=function(){var a=this.keyStatusByKeyId_,b=this.announcedKeyStatusByKeyId_;b.clear();a.forEach(function(c,d){return b.set(d,c)});a=Array.from(b.values());if(a.length&&a.every(function(c){return"expired"==c}))this.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.EXPIRED));this.playerInterface_.onKeyStatus(shaka.util.MapUtils.asObject(b))};\nshaka.media.DrmEngine.isBrowserSupported=function(){return!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration};\nshaka.media.DrmEngine.probeSupport=function(){var a,b,c,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return 1==k.nextAddress?(goog.asserts.assert(shaka.media.DrmEngine.isBrowserSupported(),"Must have basic EME support"),a="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),b=[{contentType:\'video/mp4; codecs="avc1.42E01E"\'},{contentType:\'video/webm; codecs="vp8"\'}],\nc={initDataTypes:["cenc"],videoCapabilities:b},d={videoCapabilities:b,persistentState:"required",sessionTypes:["persistent-license"]},e=[d,c],f=new Map,g=function(l){var m,n,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:return q.setCatchFinallyBlocks(2),q.yield(navigator.requestMediaKeySystemAccess(l,e),4);case 4:return m=q.yieldResult,p=(n=m.getConfiguration().sessionTypes)?n.includes("persistent-license"):!1,shaka.util.Platform.isTizen3()&&(p=!1),\nf.set(l,{persistentState:p}),q.yield(m.createMediaKeys(),5);case 5:q.leaveTryBlock(0);break;case 2:q.enterCatchBlock(),f.set(l,null),q.jumpToEnd()}})},h=a.map(function(l){return g(l)}),k.yield(Promise.all(h),2)):k["return"](shaka.util.MapUtils.asObject(f))})};shaka.media.DrmEngine.prototype.onPlay_=function(){for(var a=$jscomp.makeIterator(this.mediaKeyMessageEvents_),b=a.next();!b.done;b=a.next())this.sendLicenseRequest_(b.value);this.initialRequestsSent_=!0;this.mediaKeyMessageEvents_=[]};\nshaka.media.DrmEngine.prototype.closeSession_=function(a){var b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return b=shaka.media.DrmEngine,c=new Promise(function(e,f){(new shaka.util.Timer(f)).tickAfter(b.CLOSE_TIMEOUT_)}),d.setCatchFinallyBlocks(2),d.yield(Promise.race([Promise.all([a.close(),a.closed]),c]),4);if(2!=d.nextAddress)return d.leaveTryBlock(0);d.enterCatchBlock();shaka.log.warning("Timeout waiting for session close");d.jumpToEnd()})};\nshaka.media.DrmEngine.prototype.closeOpenSessions_=function(){var a=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){b=Array.from(a.activeSessions_.entries());a.activeSessions_.clear();return c.yield(Promise.all(b.map(function(d){d=$jscomp.makeIterator(d);var e=d.next().value,f=d.next().value,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){h.setCatchFinallyBlocks(2);if(!a.initializedForStorage_&&!a.offlineSessionIds_.includes(e.sessionId)&&\n"persistent-license"===f.type)return shaka.log.v1("Removing session",e.sessionId),h.yield(e.remove(),5);shaka.log.v1("Closing session",e.sessionId,f);return h.yield(a.closeSession_(e),5)}if(2!=h.nextAddress)return h.leaveTryBlock(0);g=h.enterCatchBlock();shaka.log.error("Failed to close or remove the session",g);h.jumpToEnd()})})),0)})};\nshaka.media.DrmEngine.prototype.supportsVariant=function(a){var b=a.audio,c=a.video;if(b&&b.encrypted&&(b=shaka.media.DrmEngine.computeMimeType_(b),!this.willSupport(b))||c&&c.encrypted&&(c=shaka.media.DrmEngine.computeMimeType_(c),!this.willSupport(c)))return!1;var d=shaka.media.DrmEngine.keySystem(this.currentDrmInfo_);a=this.getVariantDrmInfos_(a);return 0==a.length||a.some(function(e){return e.keySystem==d})};\nshaka.media.DrmEngine.areDrmCompatible=function(a,b){return a.length&&b.length?0<shaka.media.DrmEngine.getCommonDrmInfos(a,b).length:!0};\nshaka.media.DrmEngine.getCommonDrmInfos=function(a,b){if(!a.length)return b;if(!b.length)return a;for(var c=[],d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next()){e=e.value;for(var f=$jscomp.makeIterator(b),g=f.next();!g.done;g=f.next())if(g=g.value,e.keySystem==g.keySystem){f=[];f=f.concat(e.initData||[]);f=f.concat(g.initData||[]);var h=e.keyIds&&g.keyIds?new Set([].concat($jscomp.arrayFromIterable(e.keyIds),$jscomp.arrayFromIterable(g.keyIds))):e.keyIds||g.keyIds;c.push({keySystem:e.keySystem,\nlicenseServerUri:e.licenseServerUri||g.licenseServerUri,distinctiveIdentifierRequired:e.distinctiveIdentifierRequired||g.distinctiveIdentifierRequired,persistentStateRequired:e.persistentStateRequired||g.persistentStateRequired,videoRobustness:e.videoRobustness||g.videoRobustness,audioRobustness:e.audioRobustness||g.audioRobustness,serverCertificate:e.serverCertificate||g.serverCertificate,initData:f,keyIds:h});break}}return c};\nshaka.media.DrmEngine.prototype.getVariantDrmInfos_=function(a){return(a.video?a.video.drmInfos:[]).concat(a.audio?a.audio.drmInfos:[])};shaka.media.DrmEngine.prototype.pollExpiration_=function(){var a=this;this.activeSessions_.forEach(function(b,c){var d=b.oldExpiration,e=c.expiration;isNaN(e)&&(e=Infinity);e!=d&&(a.playerInterface_.onExpirationUpdated(c.sessionId,e),b.oldExpiration=e)})};\nshaka.media.DrmEngine.prototype.areAllSessionsLoaded_=function(){var a=this.activeSessions_.values();return shaka.util.Iterables.every(a,function(b){return b.loaded})};\nshaka.media.DrmEngine.replaceDrmInfo_=function(a,b){var c=[];b.forEach(function(f,g){c.push({keySystem:g,licenseServerUri:f,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:new Set})});for(var d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next())e=e.value,e.video&&(e.video.drmInfos=c),e.audio&&(e.audio.drmInfos=c)};\nshaka.media.DrmEngine.prototype.createDrmInfoByInfos_=function(a,b){var c=[],d=[],e=[],f=new Set;shaka.media.DrmEngine.processDrmInfos_(b,c,d,e,f);1<d.length&&shaka.log.warning("Multiple unique server certificates found! Only the first will be used.");1<c.length&&shaka.log.warning("Multiple unique license server URIs found! Only the first will be used.");var g=this.usePersistentLicenses_?"persistent-license":"temporary";c={keySystem:a,licenseServerUri:c[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,\npersistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||g,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:d[0],initData:e,keyIds:f};d=$jscomp.makeIterator(b);for(e=d.next();!e.done;e=d.next())e=e.value,e.distinctiveIdentifierRequired&&(c.distinctiveIdentifierRequired=e.distinctiveIdentifierRequired),e.persistentStateRequired&&(c.persistentStateRequired=e.persistentStateRequired);return c};\nshaka.media.DrmEngine.createDrmInfoByConfigs_=function(a,b){var c=[],d=[],e=[],f=new Set;shaka.media.DrmEngine.processDrmInfos_(b.drmInfos,c,d,e,f);1<d.length&&shaka.log.warning("Multiple unique server certificates found! Only the first will be used.");1<c.length&&shaka.log.warning("Multiple unique license server URIs found! Only the first will be used.");return{keySystem:a,licenseServerUri:c[0],distinctiveIdentifierRequired:"required"==b.distinctiveIdentifier,persistentStateRequired:"required"==\nb.persistentState,sessionType:b.sessionTypes[0]||"temporary",audioRobustness:(b.audioCapabilities?b.audioCapabilities[0].robustness:"")||"",videoRobustness:(b.videoCapabilities?b.videoCapabilities[0].robustness:"")||"",serverCertificate:d[0],initData:e,keyIds:f}};\nshaka.media.DrmEngine.processDrmInfos_=function(a,b,c,d,e){var f={};a=$jscomp.makeIterator(a);for(var g=a.next();!g.done;f={$jscomp$loop$prop$drmInfo$574:f.$jscomp$loop$prop$drmInfo$574},g=a.next()){f.$jscomp$loop$prop$drmInfo$574=g.value;b.includes(f.$jscomp$loop$prop$drmInfo$574.licenseServerUri)||b.push(f.$jscomp$loop$prop$drmInfo$574.licenseServerUri);f.$jscomp$loop$prop$drmInfo$574.serverCertificate&&(c.some(function(l){return function(m){return shaka.util.BufferUtils.equal(m,l.$jscomp$loop$prop$drmInfo$574.serverCertificate)}}(f))||\nc.push(f.$jscomp$loop$prop$drmInfo$574.serverCertificate));if(f.$jscomp$loop$prop$drmInfo$574.initData){g={};for(var h=$jscomp.makeIterator(f.$jscomp$loop$prop$drmInfo$574.initData),k=h.next();!k.done;g={$jscomp$loop$prop$initDataOverride$576:g.$jscomp$loop$prop$initDataOverride$576},k=h.next())g.$jscomp$loop$prop$initDataOverride$576=k.value,d.some(function(l){return function(m){var n=l.$jscomp$loop$prop$initDataOverride$576;m=m.keyId&&m.keyId==n.keyId?!0:m.initDataType==n.initDataType&&shaka.util.BufferUtils.equal(m.initData,\nn.initData);return m}}(g))||d.push(g.$jscomp$loop$prop$initDataOverride$576)}if(f.$jscomp$loop$prop$drmInfo$574.keyIds)for(g=$jscomp.makeIterator(f.$jscomp$loop$prop$drmInfo$574.keyIds),h=g.next();!h.done;h=g.next())e.add(h.value)}};\nshaka.media.DrmEngine.fillInDrmInfoDefaults_=function(a,b,c){if(a.keySystem&&("org.w3.clearkey"!=a.keySystem||!a.licenseServerUri)){b.size&&(b=b.get(a.keySystem)||"",a.licenseServerUri=b);a.keyIds||(a.keyIds=new Set);if(c=c.get(a.keySystem))a.distinctiveIdentifierRequired||(a.distinctiveIdentifierRequired=c.distinctiveIdentifierRequired),a.persistentStateRequired||(a.persistentStateRequired=c.persistentStateRequired),a.videoRobustness||(a.videoRobustness=c.videoRobustness),a.audioRobustness||(a.audioRobustness=\nc.audioRobustness),a.serverCertificate||(a.serverCertificate=c.serverCertificate),c.sessionType&&(a.sessionType=c.sessionType);window.cast&&window.cast.__platform__&&"com.microsoft.playready"==a.keySystem&&(a.keySystem="com.chromecast.playready")}};shaka.media.DrmEngine.CLOSE_TIMEOUT_=1;shaka.media.DrmEngine.SESSION_LOAD_TIMEOUT_=5;shaka.media.DrmEngine.KEY_STATUS_BATCH_TIME=.5;shaka.media.DrmEngine.DUMMY_KEY_ID=new shaka.util.Lazy(function(){return shaka.util.BufferUtils.toArrayBuffer(new Uint8Array([0]))});shaka.media.ManifestParser=function(){};shaka.media.ManifestParser.registerParserByExtension=function(a,b){shaka.media.ManifestParser.parsersByExtension[a]=b};shaka.media.ManifestParser.registerParserByMime=function(a,b){shaka.media.ManifestParser.parsersByMime[a]=b};shaka.media.ManifestParser.unregisterParserByMime=function(a){delete shaka.media.ManifestParser.parsersByMime[a]};\nshaka.media.ManifestParser.probeSupport=function(){var a=shaka.media.ManifestParser,b={};if(shaka.util.Platform.supportsMediaSource()){for(var c in a.parsersByMime)b[c]=!0;for(var d in a.parsersByExtension)b[d]=!0}c={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};d=$jscomp.makeIterator(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var e=d.next();!e.done;e=d.next())e=e.value,shaka.util.Platform.supportsMediaSource()?\nb[e]=!!a.parsersByMime[e]:b[e]=shaka.util.Platform.supportsMediaType(e);for(var f in c)shaka.util.Platform.supportsMediaSource()?b[f]=!!a.parsersByExtension[f]:b[f]=shaka.util.Platform.supportsMediaType(c[f]);return b};\nshaka.media.ManifestParser.getFactory=function(a,b,c,d){var e,f,g,h,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress){e=shaka.media.ManifestParser;if(d){if(f=e.parsersByMime[d.toLowerCase()])return l["return"](f);shaka.log.warning("Could not determine manifest type using MIME type ",d)}if(g=e.getExtension(a)){if(h=e.parsersByExtension[g])return l["return"](h);shaka.log.warning("Could not determine manifest type for extension ",g)}else shaka.log.warning("Could not find extension for ",\na);return d?l.jumpTo(2):l.yield(e.getMimeType(a,b,c),3)}if(2!=l.nextAddress&&(d=l.yieldResult)){if(k=shaka.media.ManifestParser.parsersByMime[d])return l["return"](k);shaka.log.warning("Could not determine manifest type using MIME type",d)}throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.UNABLE_TO_GUESS_MANIFEST_TYPE,a);})};\nshaka.media.ManifestParser.getMimeType=function(a,b,c){var d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return d=shaka.net.NetworkingEngine.RequestType.MANIFEST,e=shaka.net.NetworkingEngine.makeRequest([a],c),e.method="HEAD",h.yield(b.request(d,e).promise,2);f=h.yieldResult;g=f.headers["content-type"];return h["return"](g?g.toLowerCase().split(";").shift():"")})};\nshaka.media.ManifestParser.getExtension=function(a){a=(new goog.Uri(a)).getPath().split("/").pop().split(".");return 1==a.length?"":a.pop().toLowerCase()};shaka.media.ManifestParser.isSupported=function(a,b){return shaka.util.Platform.supportsMediaSource()?b in shaka.media.ManifestParser.parsersByMime||shaka.media.ManifestParser.getExtension(a)in shaka.media.ManifestParser.parsersByExtension?!0:!1:!1};goog.exportSymbol("shaka.media.ManifestParser",shaka.media.ManifestParser);\ngoog.exportProperty(shaka.media.ManifestParser,"unregisterParserByMime",shaka.media.ManifestParser.unregisterParserByMime);goog.exportProperty(shaka.media.ManifestParser,"registerParserByMime",shaka.media.ManifestParser.registerParserByMime);goog.exportProperty(shaka.media.ManifestParser,"registerParserByExtension",shaka.media.ManifestParser.registerParserByExtension);shaka.media.ManifestParser.parsersByMime={};shaka.media.ManifestParser.parsersByExtension={};shaka.media.InitSegmentReference=function(a,b,c){this.getUris=a;this.startByte=b;this.endByte=c};shaka.media.InitSegmentReference.prototype.getStartByte=function(){return this.startByte};shaka.media.InitSegmentReference.prototype.getEndByte=function(){return this.endByte};shaka.media.InitSegmentReference.prototype.getSize=function(){return this.endByte?this.endByte-this.startByte:null};\nshaka.media.InitSegmentReference.equal=function(a,b){var c=shaka.util.ArrayUtils;return a&&b?a.getStartByte()==b.getStartByte()&&a.getEndByte()==b.getEndByte()&&c.equal(a.getUris(),b.getUris()):a==b};goog.exportSymbol("shaka.media.InitSegmentReference",shaka.media.InitSegmentReference);goog.exportProperty(shaka.media.InitSegmentReference.prototype,"getEndByte",shaka.media.InitSegmentReference.prototype.getEndByte);goog.exportProperty(shaka.media.InitSegmentReference.prototype,"getStartByte",shaka.media.InitSegmentReference.prototype.getStartByte);\nshaka.media.SegmentReference=function(a,b,c,d,e,f,g,h,k,l){l=void 0===l?[]:l;goog.asserts.assert(a<=b,"startTime must be less than or equal to endTime");goog.asserts.assert(null==e||d<e,"startByte must be < endByte");this.startTime=a;this.endTime=b;this.getUrisInner=c;this.startByte=d;this.endByte=e;this.initSegmentReference=f;this.timestampOffset=g;this.appendWindowStart=h;this.appendWindowEnd=k;this.partialReferences=l};shaka.media.SegmentReference.prototype.getUris=function(){return this.getUrisInner()};\nshaka.media.SegmentReference.prototype.getStartTime=function(){return this.startTime};shaka.media.SegmentReference.prototype.getEndTime=function(){return this.endTime};shaka.media.SegmentReference.prototype.getStartByte=function(){return this.startByte};shaka.media.SegmentReference.prototype.getEndByte=function(){return this.endByte};shaka.media.SegmentReference.prototype.getSize=function(){return this.endByte?this.endByte-this.startByte:null};\nshaka.media.SegmentReference.prototype.hasPartialSegments=function(){return 0<this.partialReferences.length};goog.exportSymbol("shaka.media.SegmentReference",shaka.media.SegmentReference);goog.exportProperty(shaka.media.SegmentReference.prototype,"getEndByte",shaka.media.SegmentReference.prototype.getEndByte);goog.exportProperty(shaka.media.SegmentReference.prototype,"getStartByte",shaka.media.SegmentReference.prototype.getStartByte);\ngoog.exportProperty(shaka.media.SegmentReference.prototype,"getEndTime",shaka.media.SegmentReference.prototype.getEndTime);goog.exportProperty(shaka.media.SegmentReference.prototype,"getStartTime",shaka.media.SegmentReference.prototype.getStartTime);goog.exportProperty(shaka.media.SegmentReference.prototype,"getUris",shaka.media.SegmentReference.prototype.getUris);shaka.media.PresentationTimeline=function(a,b,c){this.presentationStartTime_=a;this.presentationDelay_=b;this.segmentAvailabilityDuration_=this.duration_=Infinity;this.maxSegmentDuration_=1;this.maxSegmentEndTime_=this.minSegmentStartTime_=null;this.clockOffset_=0;this.static_=!0;this.userSeekStart_=0;this.autoCorrectDrift_=void 0===c?!0:c;this.availabilityTimeOffset_=0};shaka.media.PresentationTimeline.prototype.getDuration=function(){return this.duration_};\nshaka.media.PresentationTimeline.prototype.getMaxSegmentDuration=function(){return this.maxSegmentDuration_};shaka.media.PresentationTimeline.prototype.setDuration=function(a){goog.asserts.assert(0<a,"duration must be > 0");this.duration_=a};shaka.media.PresentationTimeline.prototype.getPresentationStartTime=function(){return this.presentationStartTime_};shaka.media.PresentationTimeline.prototype.setClockOffset=function(a){this.clockOffset_=a};\nshaka.media.PresentationTimeline.prototype.setStatic=function(a){this.static_=a};shaka.media.PresentationTimeline.prototype.setSegmentAvailabilityDuration=function(a){goog.asserts.assert(0<=a,"segmentAvailabilityDuration must be >= 0");this.segmentAvailabilityDuration_=a};shaka.media.PresentationTimeline.prototype.setDelay=function(a){goog.asserts.assert(0<=a,"delay must be >= 0");this.presentationDelay_=a};shaka.media.PresentationTimeline.prototype.getDelay=function(){return this.presentationDelay_};\nshaka.media.PresentationTimeline.prototype.notifySegments=function(a){if(0!=a.length){var b=a[a.length-1].endTime;this.notifyMinSegmentStartTime(a[0].startTime);this.maxSegmentDuration_=a.reduce(function(c,d){return Math.max(c,d.endTime-d.startTime)},this.maxSegmentDuration_);this.maxSegmentEndTime_=Math.max(this.maxSegmentEndTime_,b);null!=this.presentationStartTime_&&this.autoCorrectDrift_&&(this.presentationStartTime_=(Date.now()+this.clockOffset_)/1E3-this.maxSegmentEndTime_-this.maxSegmentDuration_);\nshaka.log.v1("notifySegments:","maxSegmentDuration="+this.maxSegmentDuration_)}};shaka.media.PresentationTimeline.prototype.notifyMinSegmentStartTime=function(a){this.minSegmentStartTime_=null==this.minSegmentStartTime_?a:Math.min(this.minSegmentStartTime_,a)};shaka.media.PresentationTimeline.prototype.notifyMaxSegmentDuration=function(a){this.maxSegmentDuration_=Math.max(this.maxSegmentDuration_,a);shaka.log.v1("notifyNewSegmentDuration:","maxSegmentDuration="+this.maxSegmentDuration_)};\nshaka.media.PresentationTimeline.prototype.offset=function(a){null!=this.minSegmentStartTime_&&(this.minSegmentStartTime_+=a);null!=this.maxSegmentEndTime_&&(this.maxSegmentEndTime_+=a)};shaka.media.PresentationTimeline.prototype.isLive=function(){return Infinity==this.duration_&&!this.static_};shaka.media.PresentationTimeline.prototype.isInProgress=function(){return Infinity!=this.duration_&&!this.static_};\nshaka.media.PresentationTimeline.prototype.getSegmentAvailabilityStart=function(){goog.asserts.assert(0<=this.segmentAvailabilityDuration_,"The availability duration should be positive");var a=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_;return Math.max(this.userSeekStart_,a)};shaka.media.PresentationTimeline.prototype.setUserSeekStart=function(a){this.userSeekStart_=a};\nshaka.media.PresentationTimeline.prototype.getSegmentAvailabilityEnd=function(){return this.isLive()||this.isInProgress()?Math.min(this.getLiveEdge_()+this.availabilityTimeOffset_,this.duration_):this.duration_};\nshaka.media.PresentationTimeline.prototype.getSafeSeekRangeStart=function(a){var b=Math.max(this.minSegmentStartTime_,this.userSeekStart_);if(Infinity==this.segmentAvailabilityDuration_)return Math.ceil(1E3*b)/1E3;var c=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_;a=Math.min(c+a,this.getSeekRangeEnd());return Math.max(b,a)};shaka.media.PresentationTimeline.prototype.getSeekRangeStart=function(){return this.getSafeSeekRangeStart(0)};\nshaka.media.PresentationTimeline.prototype.getSeekRangeEnd=function(){var a=this.isLive()||this.isInProgress()?this.presentationDelay_:0;return Math.max(0,this.getSegmentAvailabilityEnd()-a)};shaka.media.PresentationTimeline.prototype.usingPresentationStartTime=function(){return null==this.presentationStartTime_||null!=this.maxSegmentEndTime_&&this.autoCorrectDrift_?!1:!0};\nshaka.media.PresentationTimeline.prototype.getLiveEdge_=function(){goog.asserts.assert(null!=this.presentationStartTime_,"Cannot compute timeline live edge without start time");var a=(Date.now()+this.clockOffset_)/1E3;return Math.max(0,a-this.maxSegmentDuration_-this.presentationStartTime_)};shaka.media.PresentationTimeline.prototype.setAvailabilityTimeOffset=function(a){this.availabilityTimeOffset_=a};\nshaka.media.PresentationTimeline.prototype.assertIsValid=function(){goog.DEBUG&&(this.isLive()?goog.asserts.assert(null!=this.presentationStartTime_,"Detected as live stream, but does not match our model of live!"):this.isInProgress()?goog.asserts.assert(null!=this.presentationStartTime_&&Infinity==this.segmentAvailabilityDuration_,"Detected as IPR stream, but does not match our model of IPR!"):goog.asserts.assert(Infinity==this.segmentAvailabilityDuration_&&Infinity!=this.duration_&&this.static_,\n"Detected as VOD stream, but does not match our model of VOD!"))};goog.exportSymbol("shaka.media.PresentationTimeline",shaka.media.PresentationTimeline);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setAvailabilityTimeOffset",shaka.media.PresentationTimeline.prototype.setAvailabilityTimeOffset);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"usingPresentationStartTime",shaka.media.PresentationTimeline.prototype.usingPresentationStartTime);\ngoog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSeekRangeEnd",shaka.media.PresentationTimeline.prototype.getSeekRangeEnd);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSeekRangeStart",shaka.media.PresentationTimeline.prototype.getSeekRangeStart);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSafeSeekRangeStart",shaka.media.PresentationTimeline.prototype.getSafeSeekRangeStart);\ngoog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSegmentAvailabilityEnd",shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityEnd);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setUserSeekStart",shaka.media.PresentationTimeline.prototype.setUserSeekStart);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSegmentAvailabilityStart",shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityStart);\ngoog.exportProperty(shaka.media.PresentationTimeline.prototype,"isInProgress",shaka.media.PresentationTimeline.prototype.isInProgress);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"isLive",shaka.media.PresentationTimeline.prototype.isLive);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"offset",shaka.media.PresentationTimeline.prototype.offset);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifyMaxSegmentDuration",shaka.media.PresentationTimeline.prototype.notifyMaxSegmentDuration);\ngoog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifyMinSegmentStartTime",shaka.media.PresentationTimeline.prototype.notifyMinSegmentStartTime);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifySegments",shaka.media.PresentationTimeline.prototype.notifySegments);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getDelay",shaka.media.PresentationTimeline.prototype.getDelay);\ngoog.exportProperty(shaka.media.PresentationTimeline.prototype,"setDelay",shaka.media.PresentationTimeline.prototype.setDelay);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setSegmentAvailabilityDuration",shaka.media.PresentationTimeline.prototype.setSegmentAvailabilityDuration);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setStatic",shaka.media.PresentationTimeline.prototype.setStatic);\ngoog.exportProperty(shaka.media.PresentationTimeline.prototype,"setClockOffset",shaka.media.PresentationTimeline.prototype.setClockOffset);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getPresentationStartTime",shaka.media.PresentationTimeline.prototype.getPresentationStartTime);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setDuration",shaka.media.PresentationTimeline.prototype.setDuration);\ngoog.exportProperty(shaka.media.PresentationTimeline.prototype,"getMaxSegmentDuration",shaka.media.PresentationTimeline.prototype.getMaxSegmentDuration);goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getDuration",shaka.media.PresentationTimeline.prototype.getDuration);shaka.media.StallDetector=function(a,b){this.implementation_=a;this.wasMakingProgress_=a.shouldBeMakingProgress();this.value_=a.getPresentationSeconds();this.lastUpdateSeconds_=a.getWallSeconds();this.didJump_=!1;this.stallThresholdSeconds_=b;this.onStall_=function(){}};shaka.media.StallDetector.prototype.release=function(){this.implementation_=null;this.onStall_=function(){}};shaka.media.StallDetector.prototype.onStall=function(a){this.onStall_=a};\nshaka.media.StallDetector.prototype.poll=function(){var a=this.implementation_,b=a.shouldBeMakingProgress(),c=a.getPresentationSeconds(),d=a.getWallSeconds();if(this.value_!=c||this.wasMakingProgress_!=b)this.lastUpdateSeconds_=d,this.value_=c,this.wasMakingProgress_=b,this.didJump_=!1;c=d-this.lastUpdateSeconds_;if(b=c>=this.stallThresholdSeconds_&&b&&!this.didJump_)this.onStall_(this.value_,c),this.didJump_=!0,this.value_=a.getPresentationSeconds();return b};\nshaka.media.StallDetector.Implementation=function(){};shaka.media.StallDetector.Implementation.prototype.shouldBeMakingProgress=function(){};shaka.media.StallDetector.Implementation.prototype.getPresentationSeconds=function(){};shaka.media.StallDetector.Implementation.prototype.getWallSeconds=function(){};shaka.media.StallDetector.MediaElementImplementation=function(a){this.mediaElement_=a};\nshaka.media.StallDetector.MediaElementImplementation.prototype.shouldBeMakingProgress=function(){return this.mediaElement_.paused||0==this.mediaElement_.playbackRate||0==this.mediaElement_.buffered.length?!1:shaka.media.StallDetector.MediaElementImplementation.hasContentFor_(this.mediaElement_.buffered,this.mediaElement_.currentTime)};shaka.media.StallDetector.MediaElementImplementation.prototype.getPresentationSeconds=function(){return this.mediaElement_.currentTime};\nshaka.media.StallDetector.MediaElementImplementation.prototype.getWallSeconds=function(){return Date.now()/1E3};shaka.media.StallDetector.MediaElementImplementation.hasContentFor_=function(a,b){for(var c=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(a)),d=c.next();!d.done;d=c.next())if(d=d.value,!(b<d.start-.1||b>d.end-.5))return!0;return!1};shaka.media.GapJumpingController=function(a,b,c,d,e){var f=this;this.video_=a;this.timeline_=b;this.config_=c;this.onEvent_=e;this.eventManager_=new shaka.util.EventManager;this.seekingEventReceived_=!1;this.prevReadyState_=a.readyState;this.didFireLargeGap_=!1;this.stallDetector_=d;this.hadSegmentAppended_=!1;this.eventManager_.listen(a,"waiting",function(){return f.onPollGapJump_()});this.gapJumpTimer_=(new shaka.util.Timer(function(){f.onPollGapJump_()})).tickEvery(.25)};\nshaka.media.GapJumpingController.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null);null!=this.gapJumpTimer_&&(this.gapJumpTimer_.stop(),this.gapJumpTimer_=null);this.stallDetector_&&(this.stallDetector_.release(),this.stallDetector_=null);this.video_=this.timeline_=this.onEvent_=null};shaka.media.GapJumpingController.prototype.onSegmentAppended=function(){this.hadSegmentAppended_=!0;this.onPollGapJump_()};\nshaka.media.GapJumpingController.prototype.onSeeking=function(){this.seekingEventReceived_=!0;this.didFireLargeGap_=this.hadSegmentAppended_=!1};\nshaka.media.GapJumpingController.prototype.onPollGapJump_=function(){if(0!=this.video_.readyState){if(this.video_.seeking){if(!this.seekingEventReceived_)return}else this.seekingEventReceived_=!1;if(!this.video_.paused||0==this.video_.currentTime)if(this.video_.readyState!=this.prevReadyState_&&(this.didFireLargeGap_=!1,this.prevReadyState_=this.video_.readyState),!this.stallDetector_||!this.stallDetector_.poll()){var a=this.config_.smallGapLimit,b=this.video_.currentTime,c=this.video_.buffered,d=\nshaka.media.TimeRangesUtils.getGapIndex(c,b,this.config_.gapDetectionThreshold);if(null!=d&&(0!=d||this.hadSegmentAppended_)){var e=c.start(d),f=this.timeline_.getSeekRangeEnd();if(!(e>=f)){f=e-b;a=f<=a;var g=!1;if(!(f<shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE)){if(!a&&!this.didFireLargeGap_){this.didFireLargeGap_=!0;var h=new shaka.util.FakeEvent("largegap",{currentTime:b,gapSize:f});h.cancelable=!0;this.onEvent_(h);this.config_.jumpLargeGaps&&!h.defaultPrevented?g=!0:shaka.log.info("Ignoring large gap at",\nb,"size",f)}if(a||g)0==d?shaka.log.info("Jumping forward",f,"seconds because of gap before start time of",e):shaka.log.info("Jumping forward",f,"seconds because of gap starting at",c.end(d-1),"and ending at",e),this.video_.currentTime=e}}}}}};shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE=.001;shaka.util.MediaReadyState=function(){};shaka.util.MediaReadyState.waitForReadyState=function(a,b,c,d){b==HTMLMediaElement.HAVE_NOTHING||a.readyState>=b?d():(b=shaka.util.MediaReadyState.READY_STATES_TO_EVENT_NAMES_.value().get(b),c.listenOnce(a,b,d))};\nshaka.util.MediaReadyState.READY_STATES_TO_EVENT_NAMES_=new shaka.util.Lazy(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});shaka.media.VideoWrapper=function(a,b,c){var d=this;this.video_=a;this.onSeek_=b;this.startTime_=c;this.started_=!1;this.eventManager_=new shaka.util.EventManager;this.mover_=new shaka.media.VideoWrapper.PlayheadMover(a,10);shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){d.setStartTime_(d.startTime_)})};\nshaka.media.VideoWrapper.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null);null!=this.mover_&&(this.mover_.release(),this.mover_=null);this.onSeek_=function(){};this.video_=null};shaka.media.VideoWrapper.prototype.getTime=function(){return this.started_?this.video_.currentTime:this.startTime_};\nshaka.media.VideoWrapper.prototype.setTime=function(a){var b=this;0<this.video_.readyState?this.mover_.moveTo(a):shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){b.setStartTime_(b.startTime_)})};\nshaka.media.VideoWrapper.prototype.setStartTime_=function(a){var b=this;.001>Math.abs(this.video_.currentTime-a)?this.startListeningToSeeks_():(this.eventManager_.listenOnce(this.video_,"seeking",function(){b.startListeningToSeeks_()}),this.mover_.moveTo(0==this.video_.currentTime?a:this.video_.currentTime))};\nshaka.media.VideoWrapper.prototype.startListeningToSeeks_=function(){var a=this;goog.asserts.assert(0<this.video_.readyState,"The media element should be ready before we listen for seeking.");this.started_=!0;this.eventManager_.listen(this.video_,"seeking",function(){return a.onSeek_()})};shaka.media.VideoWrapper.PlayheadMover=function(a,b){var c=this;this.mediaElement_=a;this.maxAttempts_=b;this.targetTime_=this.originTime_=this.remainingAttempts_=0;this.timer_=new shaka.util.Timer(function(){return c.onTick_()})};\nshaka.media.VideoWrapper.PlayheadMover.prototype.release=function(){this.timer_&&(this.timer_.stop(),this.timer_=null);this.mediaElement_=null};shaka.media.VideoWrapper.PlayheadMover.prototype.moveTo=function(a){this.originTime_=this.mediaElement_.currentTime;this.targetTime_=a;this.remainingAttempts_=this.maxAttempts_;this.mediaElement_.currentTime=a;this.timer_.tickEvery(.1)};\nshaka.media.VideoWrapper.PlayheadMover.prototype.onTick_=function(){0>=this.remainingAttempts_?(shaka.log.warning(["Failed to move playhead from",this.originTime_,"to",this.targetTime_].join(" ")),this.timer_.stop()):this.mediaElement_.currentTime!=this.originTime_?this.timer_.stop():(this.mediaElement_.currentTime=this.targetTime_,this.remainingAttempts_--)};shaka.media.Playhead=function(){};shaka.media.Playhead.prototype.setStartTime=function(a){};shaka.media.Playhead.prototype.getTime=function(){};shaka.media.Playhead.prototype.notifyOfBufferingChange=function(){};\nshaka.media.SrcEqualsPlayhead=function(a){var b=this;this.mediaElement_=a;this.started_=!1;this.startTime_=null;this.eventManager_=new shaka.util.EventManager;var c=function(){null==b.startTime_?b.started_=!0:(b.eventManager_.listenOnce(b.mediaElement_,"seeking",function(){b.started_=!0}),b.mediaElement_.currentTime=Math.max(0,b.mediaElement_.currentTime+b.startTime_))};shaka.util.MediaReadyState.waitForReadyState(this.mediaElement_,HTMLMediaElement.HAVE_CURRENT_DATA,this.eventManager_,function(){c()})};\nshaka.media.SrcEqualsPlayhead.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null);this.mediaElement_=null};shaka.media.SrcEqualsPlayhead.prototype.setStartTime=function(a){this.startTime_=this.started_?this.startTime_:a};shaka.media.SrcEqualsPlayhead.prototype.getTime=function(){return(this.started_?this.mediaElement_.currentTime:this.startTime_)||0};shaka.media.SrcEqualsPlayhead.prototype.notifyOfBufferingChange=function(){};\nshaka.media.MediaSourcePlayhead=function(a,b,c,d,e,f){var g=this;this.minSeekRange_=3;this.mediaElement_=a;this.timeline_=b.presentationTimeline;this.minBufferTime_=b.minBufferTime||0;this.config_=c;this.onSeek_=e;this.lastCorrectiveSeek_=null;this.gapController_=new shaka.media.GapJumpingController(a,b.presentationTimeline,c,this.createStallDetector_(a,c),f);this.videoWrapper_=new shaka.media.VideoWrapper(a,function(){return g.onSeeking_()},this.getStartTime_(d));this.checkWindowTimer_=(new shaka.util.Timer(function(){g.onPollWindow_()})).tickEvery(.25)};\nshaka.media.MediaSourcePlayhead.prototype.release=function(){this.videoWrapper_&&(this.videoWrapper_.release(),this.videoWrapper_=null);this.gapController_&&(this.gapController_.release(),this.gapController_=null);this.checkWindowTimer_&&(this.checkWindowTimer_.stop(),this.checkWindowTimer_=null);this.mediaElement_=this.videoWrapper_=this.timeline_=this.config_=null;this.onSeek_=function(){}};shaka.media.MediaSourcePlayhead.prototype.setStartTime=function(a){this.videoWrapper_.setTime(a)};\nshaka.media.MediaSourcePlayhead.prototype.getTime=function(){var a=this.videoWrapper_.getTime();return 0<this.mediaElement_.readyState&&!this.mediaElement_.paused?this.clampTime_(a):a};shaka.media.MediaSourcePlayhead.prototype.getStartTime_=function(a){null==a?a=Infinity>this.timeline_.getDuration()?this.timeline_.getSeekRangeStart():this.timeline_.getSeekRangeEnd():0>a&&(a=this.timeline_.getSeekRangeEnd()+a);return this.clampSeekToDuration_(this.clampTime_(a))};\nshaka.media.MediaSourcePlayhead.prototype.notifyOfBufferingChange=function(){this.gapController_.onSegmentAppended()};\nshaka.media.MediaSourcePlayhead.prototype.onPollWindow_=function(){if(0!=this.mediaElement_.readyState&&!this.mediaElement_.paused){var a=this.videoWrapper_.getTime(),b=this.timeline_.getSeekRangeStart(),c=this.timeline_.getSeekRangeEnd();c-b<this.minSeekRange_&&(b=c-this.minSeekRange_);a<b&&(b=this.reposition_(a),shaka.log.info("Jumping forward "+(b-a)+" seconds to catch up with the seek range."),this.mediaElement_.currentTime=b)}};\nshaka.media.MediaSourcePlayhead.prototype.onSeeking_=function(){this.gapController_.onSeeking();var a=this.videoWrapper_.getTime(),b=this.reposition_(a);if(Math.abs(b-a)>shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE){var c=Date.now()/1E3;if(!this.lastCorrectiveSeek_||this.lastCorrectiveSeek_<c-1){this.lastCorrectiveSeek_=c;this.videoWrapper_.setTime(b);return}}shaka.log.v1("Seek to "+a);this.onSeek_()};\nshaka.media.MediaSourcePlayhead.prototype.clampSeekToDuration_=function(a){var b=this.timeline_.getDuration();return a>=b?(goog.asserts.assert(0<=this.config_.durationBackoff,"Duration backoff must be non-negative!"),b-this.config_.durationBackoff):a};\nshaka.media.MediaSourcePlayhead.prototype.reposition_=function(a){goog.asserts.assert(this.config_,"Cannot reposition playhead when it has beeen destroyed");var b=Math.max(this.minBufferTime_,this.config_.rebufferingGoal),c=this.config_.safeSeekOffset,d=this.timeline_.getSeekRangeStart(),e=this.timeline_.getSeekRangeEnd(),f=this.timeline_.getDuration();e-d<this.minSeekRange_&&(d=e-this.minSeekRange_);var g=this.timeline_.getSafeSeekRangeStart(b),h=this.timeline_.getSafeSeekRangeStart(c);b=this.timeline_.getSafeSeekRangeStart(b+\nc);if(a>=f)return shaka.log.v1("Playhead past duration."),this.clampSeekToDuration_(a);if(a>e)return shaka.log.v1("Playhead past end."),e;if(a<d){if(shaka.media.TimeRangesUtils.isBuffered(this.mediaElement_.buffered,h))return shaka.log.v1("Playhead before start & start is buffered"),h;shaka.log.v1("Playhead before start & start is unbuffered");return b}if(a>=g||shaka.media.TimeRangesUtils.isBuffered(this.mediaElement_.buffered,a))return shaka.log.v1("Playhead in safe region or in buffered region."),\na;shaka.log.v1("Playhead outside safe region & in unbuffered region.");return b};shaka.media.MediaSourcePlayhead.prototype.clampTime_=function(a){var b=this.timeline_.getSeekRangeStart();if(a<b)return b;b=this.timeline_.getSeekRangeEnd();return a>b?b:a};\nshaka.media.MediaSourcePlayhead.prototype.createStallDetector_=function(a,b){if(!b.stallEnabled)return null;var c=b.stallThreshold,d=b.stallSkip;c=new shaka.media.StallDetector(new shaka.media.StallDetector.MediaElementImplementation(a),c);c.onStall(function(e,f){shaka.log.debug("Stall detected at "+e+" for "+f+" seconds.");d?(shaka.log.debug("Seeking forward "+d+" seconds to break stall."),a.currentTime+=d):(shaka.log.debug("Pausing and unpausing to break stall."),a.pause(),a.play())});return c};shaka.media.SegmentIndex=function(a){goog.DEBUG&&shaka.media.SegmentIndex.assertCorrectReferences_(a);this.references=a;this.timer_=null;this.numEvicted=0;this.immutable_=!1};shaka.media.SegmentIndex.prototype.destroy=function(){shaka.Deprecate.deprecateFeature(4,"shaka.media.SegmentIndex","Please use release() instead of destroy().");this.release();return Promise.resolve()};\nshaka.media.SegmentIndex.prototype.release=function(){this.immutable_||(this.references=[],this.timer_&&this.timer_.stop(),this.timer_=null)};shaka.media.SegmentIndex.prototype.markImmutable=function(){this.immutable_=!0};\nshaka.media.SegmentIndex.prototype.find=function(a){for(var b=this.references.length-1,c=b;0<=c;--c){var d=this.references[c],e=c<b?this.references[c+1].startTime:d.endTime;if(a>=d.startTime&&a<e)return c+this.numEvicted}return this.references.length&&a<this.references[0].startTime?this.numEvicted:null};shaka.media.SegmentIndex.prototype.get=function(a){if(0==this.references.length)return null;a-=this.numEvicted;return 0>a||a>=this.references.length?null:this.references[a]};\nshaka.media.SegmentIndex.prototype.offset=function(a){if(!this.immutable_)for(var b=$jscomp.makeIterator(this.references),c=b.next();!c.done;c=b.next())c=c.value,c.startTime+=a,c.endTime+=a,c.timestampOffset+=a};\nshaka.media.SegmentIndex.prototype.merge=function(a){goog.DEBUG&&shaka.media.SegmentIndex.assertCorrectReferences_(a);!this.immutable_&&a.length&&(this.references=this.references.filter(function(b){return b.startTime<a[0].startTime}),this.references.push.apply(this.references,$jscomp.arrayFromIterable(a)),goog.DEBUG&&shaka.media.SegmentIndex.assertCorrectReferences_(this.references))};\nshaka.media.SegmentIndex.prototype.mergeAndEvict=function(a,b){a=a.filter(function(c){return c.endTime>b});this.merge(a);this.evict(b)};shaka.media.SegmentIndex.prototype.evict=function(a){if(!this.immutable_){var b=this.references.length;this.references=this.references.filter(function(c){return c.endTime>a});this.numEvicted+=b-this.references.length}};\nshaka.media.SegmentIndex.prototype.fit=function(a,b,c){c=void 0===c?!1:c;goog.asserts.assert(null!=b,"Content duration must be known for static content!");goog.asserts.assert(Infinity!=b,"Content duration must be finite for static content!");if(!this.immutable_){for(;this.references.length;)if(this.references[this.references.length-1].startTime>=b)this.references.pop();else break;for(;this.references.length;)if(this.references[0].endTime<=a)this.references.shift(),c||this.numEvicted++;else break;\n0!=this.references.length&&(a=this.references[this.references.length-1],this.references[this.references.length-1]=new shaka.media.SegmentReference(a.startTime,b,a.getUrisInner,a.startByte,a.endByte,a.initSegmentReference,a.timestampOffset,a.appendWindowStart,a.appendWindowEnd))}};\nshaka.media.SegmentIndex.prototype.updateEvery=function(a,b){var c=this;goog.asserts.assert(!this.timer_,"SegmentIndex timer already started!");this.immutable_||(this.timer_&&this.timer_.stop(),this.timer_=new shaka.util.Timer(function(){var d=b();d?c.references.push.apply(c.references,$jscomp.arrayFromIterable(d)):(c.timer_.stop(),c.timer_=null)}),this.timer_.tickEvery(a))};shaka.media.SegmentIndex.prototype[Symbol.iterator]=function(){return this.getIteratorForTime(0)};\nshaka.media.SegmentIndex.prototype.getIteratorForTime=function(a){var b=this.find(a);null==b?b=-1:b--;var c=this.get(b+1),d=-1;if(c&&c.hasPartialSegments())for(var e=c.partialReferences.length-1;0<=e;--e){var f=c.partialReferences[e];if(a>=f.startTime&&a<f.endTime){b++;d=e-1;break}}return new shaka.media.SegmentIterator(this,b,d)};shaka.media.SegmentIndex.forSingleSegment=function(a,b,c){a=new shaka.media.SegmentReference(a,a+b,function(){return c},0,null,null,a,a,a+b);return new shaka.media.SegmentIndex([a])};\ngoog.exportSymbol("shaka.media.SegmentIndex",shaka.media.SegmentIndex);goog.exportProperty(shaka.media.SegmentIndex,"forSingleSegment",shaka.media.SegmentIndex.forSingleSegment);goog.exportProperty(shaka.media.SegmentIndex.prototype,"getIteratorForTime",shaka.media.SegmentIndex.prototype.getIteratorForTime);goog.exportProperty(shaka.media.SegmentIndex.prototype,"updateEvery",shaka.media.SegmentIndex.prototype.updateEvery);goog.exportProperty(shaka.media.SegmentIndex.prototype,"fit",shaka.media.SegmentIndex.prototype.fit);\ngoog.exportProperty(shaka.media.SegmentIndex.prototype,"evict",shaka.media.SegmentIndex.prototype.evict);goog.exportProperty(shaka.media.SegmentIndex.prototype,"mergeAndEvict",shaka.media.SegmentIndex.prototype.mergeAndEvict);goog.exportProperty(shaka.media.SegmentIndex.prototype,"merge",shaka.media.SegmentIndex.prototype.merge);goog.exportProperty(shaka.media.SegmentIndex.prototype,"offset",shaka.media.SegmentIndex.prototype.offset);goog.exportProperty(shaka.media.SegmentIndex.prototype,"get",shaka.media.SegmentIndex.prototype.get);\ngoog.exportProperty(shaka.media.SegmentIndex.prototype,"find",shaka.media.SegmentIndex.prototype.find);goog.exportProperty(shaka.media.SegmentIndex.prototype,"markImmutable",shaka.media.SegmentIndex.prototype.markImmutable);goog.exportProperty(shaka.media.SegmentIndex.prototype,"release",shaka.media.SegmentIndex.prototype.release);goog.exportProperty(shaka.media.SegmentIndex.prototype,"destroy",shaka.media.SegmentIndex.prototype.destroy);\ngoog.DEBUG&&(shaka.media.SegmentIndex.assertCorrectReferences_=function(a){goog.asserts.assert(a.every(function(b,c){if(0==c)return!0;var d=a[c-1];return d.startTime<b.startTime?!0:d.startTime>b.startTime?!1:d.endTime<=b.endTime?!0:!1}),"SegmentReferences are incorrect")});shaka.media.SegmentIterator=function(a,b,c){this.segmentIndex_=a;this.currentPosition_=b;this.currentPartialPosition_=c};\nshaka.media.SegmentIterator.prototype.seek=function(a){shaka.Deprecate.deprecateFeature(4,"shaka.media.SegmentIterator","Please use SegmentIndex.getIteratorForTime instead of seek().");a=this.segmentIndex_.getIteratorForTime(a);this.currentPosition_=a.currentPosition_;this.currentPartialPosition_=a.currentPartialPosition_;return this.next().value};\nshaka.media.SegmentIterator.prototype.current=function(){var a=this.segmentIndex_.get(this.currentPosition_);a&&a.hasPartialSegments()&&a.getUris().length&&this.currentPartialPosition_>=a.partialReferences.length&&(this.currentPosition_++,this.currentPartialPosition_=0,a=this.segmentIndex_.get(this.currentPosition_));return a&&a.hasPartialSegments()?a.partialReferences[this.currentPartialPosition_]:a};\nshaka.media.SegmentIterator.prototype.next=function(){var a=this.segmentIndex_.get(this.currentPosition_);a&&a.hasPartialSegments()?(this.currentPartialPosition_++,a.getUris().length&&this.currentPartialPosition_==a.partialReferences.length&&(this.currentPosition_++,this.currentPartialPosition_=0)):(this.currentPosition_++,this.currentPartialPosition_=0);a=this.current();return{value:a,done:!a}};goog.exportSymbol("shaka.media.SegmentIterator",shaka.media.SegmentIterator);\ngoog.exportProperty(shaka.media.SegmentIterator.prototype,"next",shaka.media.SegmentIterator.prototype.next);goog.exportProperty(shaka.media.SegmentIterator.prototype,"current",shaka.media.SegmentIterator.prototype.current);goog.exportProperty(shaka.media.SegmentIterator.prototype,"seek",shaka.media.SegmentIterator.prototype.seek);shaka.media.MetaSegmentIndex=function(){shaka.media.SegmentIndex.call(this,[]);this.indexes_=[]};$jscomp.inherits(shaka.media.MetaSegmentIndex,shaka.media.SegmentIndex);\nshaka.media.MetaSegmentIndex.prototype.appendSegmentIndex=function(a){goog.asserts.assert(0==this.indexes_.length||0==a.numEvicted,"Should not append a new segment index with already-evicted segments");this.indexes_.push(a)};shaka.media.MetaSegmentIndex.prototype.clone=function(){var a=new shaka.media.MetaSegmentIndex;a.indexes_=this.indexes_.slice();return a};\nshaka.media.MetaSegmentIndex.prototype.release=function(){for(var a=$jscomp.makeIterator(this.indexes_),b=a.next();!b.done;b=a.next())b.value.release();this.indexes_=[]};shaka.media.MetaSegmentIndex.prototype.find=function(a){for(var b=0,c=$jscomp.makeIterator(this.indexes_),d=c.next();!d.done;d=c.next()){d=d.value;var e=d.find(a);if(null!=e)return e+b;b+=d.numEvicted+d.references.length}return null};\nshaka.media.MetaSegmentIndex.prototype.get=function(a){for(var b=0,c=!1,d=$jscomp.makeIterator(this.indexes_),e=d.next();!e.done;e=d.next()){e=e.value;goog.asserts.assert(!c||0==e.numEvicted,"Should not see evicted segments after available segments");var f=e.get(a-b);if(f)return f;b+=e.numEvicted+e.references.length;c=c||0!=e.references.length}return null};shaka.media.MetaSegmentIndex.prototype.offset=function(a){goog.asserts.assert(!1,"offset() should not be used in MetaSegmentIndex!")};\nshaka.media.MetaSegmentIndex.prototype.merge=function(a){goog.asserts.assert(!1,"merge() should not be used in MetaSegmentIndex!")};shaka.media.MetaSegmentIndex.prototype.evict=function(a){goog.asserts.assert(!1,"evict() should not be used in MetaSegmentIndex!")};shaka.media.MetaSegmentIndex.prototype.mergeAndEvict=function(a,b){goog.asserts.assert(!1,"mergeAndEvict() should not be used in MetaSegmentIndex!")};shaka.media.MetaSegmentIndex.prototype.fit=function(a,b){goog.asserts.assert(!1,"fit() should not be used in MetaSegmentIndex!")};\nshaka.media.MetaSegmentIndex.prototype.updateEvery=function(a,b){goog.asserts.assert(!1,"updateEvery() should not be used in MetaSegmentIndex!")};goog.exportSymbol("shaka.media.MetaSegmentIndex",shaka.media.MetaSegmentIndex);goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"updateEvery",shaka.media.MetaSegmentIndex.prototype.updateEvery);goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"fit",shaka.media.MetaSegmentIndex.prototype.fit);\ngoog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"mergeAndEvict",shaka.media.MetaSegmentIndex.prototype.mergeAndEvict);goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"evict",shaka.media.MetaSegmentIndex.prototype.evict);goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"merge",shaka.media.MetaSegmentIndex.prototype.merge);goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"offset",shaka.media.MetaSegmentIndex.prototype.offset);\ngoog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"get",shaka.media.MetaSegmentIndex.prototype.get);goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"find",shaka.media.MetaSegmentIndex.prototype.find);goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"release",shaka.media.MetaSegmentIndex.prototype.release);shaka.media.PlayRateController=function(a){var b=this;this.harness_=a;this.isBuffering_=!1;this.rate_=this.harness_.getRate();this.pollRate_=.25;this.timer_=new shaka.util.Timer(function(){b.harness_.movePlayhead(b.rate_*b.pollRate_)})};shaka.media.PlayRateController.prototype.release=function(){this.timer_&&(this.timer_.stop(),this.timer_=null);this.harness_=null};shaka.media.PlayRateController.prototype.setBuffering=function(a){this.isBuffering_=a;this.apply_()};\nshaka.media.PlayRateController.prototype.set=function(a){goog.asserts.assert(0!=a,"Should never set rate of 0 explicitly!");this.rate_=a;this.apply_()};shaka.media.PlayRateController.prototype.getRealRate=function(){return this.rate_};shaka.media.PlayRateController.prototype.getDefaultRate=function(){return this.harness_.getDefaultRate()};\nshaka.media.PlayRateController.prototype.apply_=function(){this.timer_.stop();var a=this.calculateCurrentRate_();shaka.log.v1("Changing effective playback rate to",a);if(0<=a)try{this.applyRate_(a);return}catch(b){}this.timer_.tickEvery(this.pollRate_);this.applyRate_(0)};shaka.media.PlayRateController.prototype.calculateCurrentRate_=function(){return this.isBuffering_?0:this.rate_};\nshaka.media.PlayRateController.prototype.applyRate_=function(a){var b=this.harness_.getRate();b!=a&&this.harness_.setRate(a);return b!=a};shaka.media.IPlayheadObserver=function(){};shaka.media.IPlayheadObserver.prototype.poll=function(a,b){};shaka.media.PlayheadObserverManager=function(a){var b=this;this.mediaElement_=a;this.observers_=new Set;this.pollingLoop_=(new shaka.util.Timer(function(){b.pollAllObservers_(!1)})).tickEvery(.25)};shaka.media.PlayheadObserverManager.prototype.release=function(){this.pollingLoop_.stop();for(var a=$jscomp.makeIterator(this.observers_),b=a.next();!b.done;b=a.next())b.value.release();this.observers_.clear()};\nshaka.media.PlayheadObserverManager.prototype.manage=function(a){this.observers_.add(a)};shaka.media.PlayheadObserverManager.prototype.notifyOfSeek=function(){this.pollAllObservers_(!0)};shaka.media.PlayheadObserverManager.prototype.pollAllObservers_=function(a){for(var b=$jscomp.makeIterator(this.observers_),c=b.next();!c.done;c=b.next())c.value.poll(this.mediaElement_.currentTime,a)};shaka.media.RegionTimeline=function(a){var b=this;this.onAddRegion_=function(c){};this.regions_=new Set;this.getSeekRange_=a;this.filterTimer_=(new shaka.util.Timer(function(){b.filterBySeekRange_()})).tickEvery(shaka.media.RegionTimeline.REGION_FILTER_INTERVAL)};shaka.media.RegionTimeline.prototype.release=function(){this.onAddRegion_=function(a){};this.regions_.clear();this.filterTimer_.stop()};shaka.media.RegionTimeline.prototype.setListeners=function(a){this.onAddRegion_=a};\nshaka.media.RegionTimeline.prototype.addRegion=function(a){null==this.findSimilarRegion_(a)&&(this.regions_.add(a),this.onAddRegion_(a))};shaka.media.RegionTimeline.prototype.filterBySeekRange_=function(){for(var a=this.getSeekRange_(),b=$jscomp.makeIterator(this.regions_),c=b.next();!c.done;c=b.next())c=c.value,c.endTime<a.start&&this.regions_["delete"](c)};\nshaka.media.RegionTimeline.prototype.findSimilarRegion_=function(a){for(var b=$jscomp.makeIterator(this.regions_),c=b.next();!c.done;c=b.next())if(c=c.value,c.schemeIdUri==a.schemeIdUri&&c.id==a.id&&c.startTime==a.startTime&&c.endTime==a.endTime)return c;return null};shaka.media.RegionTimeline.prototype.regions=function(){return this.regions_};shaka.media.RegionTimeline.REGION_FILTER_INTERVAL=2;shaka.media.RegionObserver=function(a){var b=this;this.timeline_=a;this.oldPosition_=new Map;this.onEnter_=function(e,f){};this.onExit_=function(e,f){};this.onSkip_=function(e,f){};var c=shaka.media.RegionObserver.RelativePosition_;a=c.BEFORE_THE_REGION;var d=c.IN_THE_REGION;c=c.AFTER_THE_REGION;this.rules_=[{weWere:null,weAre:d,invoke:function(e,f){return b.onEnter_(e,f)}},{weWere:a,weAre:d,invoke:function(e,f){return b.onEnter_(e,f)}},{weWere:c,weAre:d,invoke:function(e,f){return b.onEnter_(e,f)}},\n{weWere:d,weAre:a,invoke:function(e,f){return b.onExit_(e,f)}},{weWere:d,weAre:c,invoke:function(e,f){return b.onExit_(e,f)}},{weWere:a,weAre:c,invoke:function(e,f){return b.onSkip_(e,f)}},{weWere:c,weAre:a,invoke:function(e,f){return b.onSkip_(e,f)}}]};shaka.media.RegionObserver.prototype.release=function(){this.timeline_=null;this.oldPosition_.clear();this.onEnter_=function(a,b){};this.onExit_=function(a,b){};this.onSkip_=function(a,b){}};\nshaka.media.RegionObserver.prototype.poll=function(a,b){for(var c=shaka.media.RegionObserver,d=$jscomp.makeIterator(this.timeline_.regions()),e=d.next();!e.done;e=d.next()){e=e.value;var f=this.oldPosition_.get(e),g=c.determinePositionRelativeTo_(e,a);this.oldPosition_.set(e,g);for(var h=$jscomp.makeIterator(this.rules_),k=h.next();!k.done;k=h.next())k=k.value,k.weWere==f&&k.weAre==g&&k.invoke(e,b)}};\nshaka.media.RegionObserver.prototype.setListeners=function(a,b,c){this.onEnter_=a;this.onExit_=b;this.onSkip_=c};shaka.media.RegionObserver.determinePositionRelativeTo_=function(a,b){var c=shaka.media.RegionObserver.RelativePosition_;return b<a.startTime?c.BEFORE_THE_REGION:b>a.endTime?c.AFTER_THE_REGION:c.IN_THE_REGION};shaka.media.RegionObserver.RelativePosition_={BEFORE_THE_REGION:1,IN_THE_REGION:2,AFTER_THE_REGION:3};shaka.util.Networking=function(){};shaka.util.Networking.createSegmentRequest=function(a,b,c,d,e){a=shaka.net.NetworkingEngine.makeRequest(a,d,e);if(0!=b||null!=c)a.headers.Range=c?"bytes="+b+"-"+c:"bytes="+b+"-";return a};shaka.media.StreamingEngine=function(a,b){var c=this;this.playerInterface_=b;this.manifest_=a;this.config_=null;this.bufferingGoalScale_=1;this.currentTextStream_=this.currentVariant_=null;this.mediaStates_=new Map;this.startupComplete_=!1;this.failureCallbackBackoff_=null;this.fatalError_=!1;this.destroyer_=new shaka.util.Destroyer(function(){return c.doDestroy_()})};shaka.media.StreamingEngine.prototype.destroy=function(){return this.destroyer_.destroy()};\nshaka.media.StreamingEngine.prototype.doDestroy_=function(){var a=this,b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress){b=[];c=$jscomp.makeIterator(a.mediaStates_.values());for(d=c.next();!d.done;d=c.next())e=d.value,a.cancelUpdate_(e),b.push(a.abortOperations_(e));return f.yield(Promise.all(b),2)}a.mediaStates_.clear();a.playerInterface_=null;a.manifest_=null;a.config_=null;f.jumpToEnd()})};\nshaka.media.StreamingEngine.prototype.configure=function(a){this.config_=a;this.failureCallbackBackoff_=new shaka.net.Backoff({maxAttempts:Math.max(a.retryParameters.maxAttempts,2),baseDelay:a.retryParameters.baseDelay,backoffFactor:a.retryParameters.backoffFactor,fuzzFactor:a.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)};\nshaka.media.StreamingEngine.prototype.start=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return goog.asserts.assert(a.config_,"StreamingEngine configure() must be called before init()!"),b.yield(a.initStreams_(),2);a.destroyer_.ensureNotDestroyed();shaka.log.debug("init: completed initial Stream setup");a.startupComplete_=!0;b.jumpToEnd()})};shaka.media.StreamingEngine.prototype.getCurrentVariant=function(){return this.currentVariant_};\nshaka.media.StreamingEngine.prototype.getCurrentTextStream=function(){return this.currentTextStream_};\nshaka.media.StreamingEngine.prototype.loadNewTextStream_=function(a){var b=this,c,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return c=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(!b.mediaStates_.has(c.TEXT),"Should not call loadNewTextStream_ while streaming text!"),k.setCatchFinallyBlocks(2),k.yield(b.playerInterface_.mediaSourceEngine.clear(c.TEXT),4);case 4:k.leaveTryBlock(3);break;case 2:if(d=k.enterCatchBlock(),b.playerInterface_)b.playerInterface_.onError(d);\ncase 3:e=shaka.util.MimeUtils.getFullType(a.mimeType,a.codecs);b.playerInterface_.mediaSourceEngine.reinitText(e);f=b.playerInterface_.mediaSourceEngine.getTextDisplayer();if(g=f.isTextVisible()||b.config_.alwaysStreamText)h=b.createMediaState_(a),b.mediaStates_.set(c.TEXT,h),b.scheduleUpdate_(h,0);k.jumpToEnd()}})};\nshaka.media.StreamingEngine.prototype.unloadTextStream=function(){var a=shaka.util.ManifestParserUtils.ContentType,b=this.mediaStates_.get(a.TEXT);b&&(this.cancelUpdate_(b),this.abortOperations_(b)["catch"](function(){}),this.mediaStates_["delete"](a.TEXT));this.currentTextStream_=null};\nshaka.media.StreamingEngine.prototype.setTrickPlay=function(a){var b=this.mediaStates_.get(shaka.util.ManifestParserUtils.ContentType.VIDEO);if(b){var c=b.stream;if(c)if(shaka.log.debug("setTrickPlay",a),a)(a=c.trickModeVideo)&&!b.restoreStreamAfterTrickPlay&&(shaka.log.debug("Engaging trick mode stream",a),this.switchInternal_(a,!1,0,!1),b.restoreStreamAfterTrickPlay=c);else if(c=b.restoreStreamAfterTrickPlay)shaka.log.debug("Restoring non-trick-mode stream",c),b.restoreStreamAfterTrickPlay=null,\nthis.switchInternal_(c,!0,0,!1)}};shaka.media.StreamingEngine.prototype.switchVariant=function(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;this.currentVariant_=a;this.startupComplete_&&(a.video&&this.switchInternal_(a.video,b,c,!1),a.audio&&this.switchInternal_(a.audio,b,c,!1))};\nshaka.media.StreamingEngine.prototype.switchTextStream=function(a){this.currentTextStream_=a;if(this.startupComplete_){var b=shaka.util.ManifestParserUtils.ContentType;goog.asserts.assert(a&&a.type==b.TEXT,"Wrong stream type passed to switchTextStream!");this.switchInternal_(a,!0,0,!1)}};shaka.media.StreamingEngine.prototype.reloadTextStream=function(){var a=this.mediaStates_.get(shaka.util.ManifestParserUtils.ContentType.TEXT);a&&this.switchInternal_(a.stream,!0,0,!0)};\nshaka.media.StreamingEngine.prototype.switchInternal_=function(a,b,c,d){var e=this,f=shaka.util.ManifestParserUtils.ContentType,g=this.mediaStates_.get(a.type);g||a.type!=f.TEXT?(goog.asserts.assert(g,"switch: expected mediaState to exist"),g&&(g.restoreStreamAfterTrickPlay&&(shaka.log.debug("switch during trick play mode",a),a.trickModeVideo?(g.restoreStreamAfterTrickPlay=a,a=a.trickModeVideo,shaka.log.debug("switch found trick play stream",a)):(g.restoreStreamAfterTrickPlay=null,shaka.log.debug("switch found no special trick play stream"))),\ng.stream!=a||d?(a.type==f.TEXT&&(d=shaka.util.MimeUtils.getFullType(a.mimeType,a.codecs),this.playerInterface_.mediaSourceEngine.reinitText(d)),g.stream=a,g.segmentIterator=null,a=shaka.media.StreamingEngine.logPrefix_(g),shaka.log.debug("switch: switching to Stream "+a),b&&(g.clearingBuffer?g.waitingToFlushBuffer=!0:g.performingUpdate?(g.waitingToClearBuffer=!0,g.clearBufferSafeMargin=c,g.waitingToFlushBuffer=!0):(this.cancelUpdate_(g),this.clearBuffer_(g,!0,c)["catch"](function(h){e.playerInterface_&&\n(goog.asserts.assert(h instanceof shaka.util.Error,"Wrong error type!"),e.playerInterface_.onError(h))}))),this.makeAbortDecision_(g)["catch"](function(h){e.playerInterface_&&(goog.asserts.assert(h instanceof shaka.util.Error,"Wrong error type!"),e.playerInterface_.onError(h))})):(b=shaka.media.StreamingEngine.logPrefix_(g),shaka.log.debug("switch: Stream "+b+" already active")))):this.loadNewTextStream_(a)};\nshaka.media.StreamingEngine.prototype.makeAbortDecision_=function(a){var b=this,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(!a.operation)return e["return"]();c=a.stream;d=a.operation;return c.segmentIndex?e.jumpTo(2):e.yield(c.createSegmentIndex(),2)}if(a.operation!=d||a.stream!=c)return e["return"]();goog.asserts.assert(a.stream.segmentIndex,"Segment index should exist by now!");b.shouldAbortCurrentRequest_(a)&&(shaka.log.info("Aborting current segment request."),\na.operation.abort());e.jumpToEnd()})};\nshaka.media.StreamingEngine.prototype.shouldAbortCurrentRequest_=function(a){goog.asserts.assert(a.operation,"Abort logic requires an ongoing operation!");goog.asserts.assert(a.stream&&a.stream.segmentIndex,"Abort logic requires a segment index");var b=this.playerInterface_.getPresentationTime(),c=this.playerInterface_.mediaSourceEngine.bufferEnd(a.type),d=this.getTimeNeeded_(a,b);d=a.stream.segmentIndex.find(d);var e=null==d?null:a.stream.segmentIndex.get(d);d=e?e.getSize():null;e&&!d&&(d=(e.getEndTime()-\ne.getStartTime())*(a.stream.bandwidth||0)/8);if(!d)return!1;(e=e.initSegmentReference)&&(d+=e.getSize()||0);e=this.playerInterface_.getBandwidthEstimate();return 8*d/e<(c||0)-b-Math.max(this.manifest_.minBufferTime||0,this.config_.rebufferingGoal)||a.operation.getBytesRemaining()>d?!0:!1};\nshaka.media.StreamingEngine.prototype.seeked=function(){for(var a=this.playerInterface_.getPresentationTime(),b=this.config_.smallGapLimit,c=shaka.util.ManifestParserUtils.ContentType,d=!1,e=$jscomp.makeIterator(this.mediaStates_.keys()),f=e.next();!f.done;f=e.next()){f=f.value;var g=this.mediaStates_.get(f),h=shaka.media.StreamingEngine.logPrefix_(g);g.segmentIterator=null;this.playerInterface_.mediaSourceEngine.isBuffered(f,a,b)||(null!=this.playerInterface_.mediaSourceEngine.bufferEnd(f)&&(this.forceClearBuffer_(g),\nd=!0),g.operation&&(g.operation.abort(),shaka.log.debug(h,"Aborting operation due to seek"),g.operation=null),f===c.TEXT&&this.playerInterface_.mediaSourceEngine.resetCaptionParser())}d||shaka.log.debug("(all): seeked: buffered seek: presentationTime="+a)};\nshaka.media.StreamingEngine.prototype.forceClearBuffer_=function(a){var b=this,c=shaka.media.StreamingEngine.logPrefix_(a);a.clearingBuffer?shaka.log.debug(c,"clear: already clearing the buffer"):a.waitingToClearBuffer?shaka.log.debug(c,"clear: already waiting"):a.performingUpdate?(shaka.log.debug(c,"clear: currently updating"),a.waitingToClearBuffer=!0,a.clearBufferSafeMargin=0):null==this.playerInterface_.mediaSourceEngine.bufferStart(a.type)?(shaka.log.debug(c,"clear: nothing buffered"),null==\na.updateTimer&&this.scheduleUpdate_(a,0)):(shaka.log.debug(c,"clear: handling right now"),this.cancelUpdate_(a),this.clearBuffer_(a,!1,0)["catch"](function(d){b.playerInterface_&&(goog.asserts.assert(d instanceof shaka.util.Error,"Wrong error type!"),b.playerInterface_.onError(d))}))};\nshaka.media.StreamingEngine.prototype.initStreams_=function(){var a=this,b,c,d,e,f,g,h,k,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){b=shaka.util.ManifestParserUtils.ContentType;goog.asserts.assert(a.config_,"StreamingEngine configure() must be called before init()!");if(!a.currentVariant_)throw shaka.log.error("init: no Streams chosen"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STREAMING,shaka.util.Error.Code.STREAMING_ENGINE_STARTUP_INVALID_STATE);\nc=new Map;d=new Set;a.currentVariant_.audio&&(c.set(b.AUDIO,a.currentVariant_.audio),d.add(a.currentVariant_.audio));a.currentVariant_.video&&(c.set(b.VIDEO,a.currentVariant_.video),d.add(a.currentVariant_.video));a.currentTextStream_&&(c.set(b.TEXT,a.currentTextStream_),d.add(a.currentTextStream_));e=a.playerInterface_.mediaSourceEngine;f=a.config_.forceTransmuxTS;return n.yield(e.init(c,f),2)}a.destroyer_.ensureNotDestroyed();a.setDuration_();g=$jscomp.makeIterator(c.keys());for(h=g.next();!h.done;h=\ng.next())k=h.value,l=c.get(k),a.mediaStates_.has(k)||(m=a.createMediaState_(l),a.mediaStates_.set(k,m),a.scheduleUpdate_(m,0));n.jumpToEnd()})};\nshaka.media.StreamingEngine.prototype.createMediaState_=function(a){return{stream:a,type:a.type,segmentIterator:null,lastSegmentReference:null,lastInitSegmentReference:null,lastTimestampOffset:null,lastAppendWindowStart:null,lastAppendWindowEnd:null,restoreStreamAfterTrickPlay:null,endOfStream:!1,performingUpdate:!1,updateTimer:null,waitingToClearBuffer:!1,clearBufferSafeMargin:0,waitingToFlushBuffer:!1,clearingBuffer:!1,recovering:!1,hasError:!1,operation:null}};\nshaka.media.StreamingEngine.prototype.setDuration_=function(){var a=this.manifest_.presentationTimeline.getDuration();Infinity>a?this.playerInterface_.mediaSourceEngine.setDuration(a):this.playerInterface_.mediaSourceEngine.setDuration(Math.pow(2,32))};\nshaka.media.StreamingEngine.prototype.onUpdate_=function(a){var b=this,c,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:b.destroyer_.ensureNotDestroyed();c=shaka.media.StreamingEngine.logPrefix_(a);goog.asserts.assert(!a.performingUpdate&&null!=a.updateTimer,c+" unexpected call to onUpdate_()");if(a.performingUpdate||null==a.updateTimer)return k["return"]();goog.asserts.assert(!a.clearingBuffer,c+" onUpdate_() should not be called when clearing the buffer");\nif(a.clearingBuffer)return k["return"]();a.updateTimer=null;if(!a.waitingToClearBuffer){k.jumpTo(2);break}shaka.log.debug(c,"skipping update and clearing the buffer");return k.yield(b.clearBuffer_(a,a.waitingToFlushBuffer,a.clearBufferSafeMargin),3);case 3:return k["return"]();case 2:if(a.stream.segmentIndex){k.jumpTo(4);break}d=a.stream;return k.yield(a.stream.createSegmentIndex(),5);case 5:if(d!=a.stream)return null==a.updateTimer&&b.scheduleUpdate_(a,0),k["return"]();case 4:k.setCatchFinallyBlocks(6);\ne=b.update_(a);null!=e&&(b.scheduleUpdate_(a,e),a.hasError=!1);k.leaveTryBlock(7);break;case 6:return f=k.enterCatchBlock(),k.yield(b.handleStreamingError_(f),8);case 8:return k["return"]();case 7:g=Array.from(b.mediaStates_.values());if(!b.startupComplete_||!g.every(function(l){return l.endOfStream})){k.jumpTo(0);break}shaka.log.v1(c,"calling endOfStream()...");return k.yield(b.playerInterface_.mediaSourceEngine.endOfStream(),10);case 10:b.destroyer_.ensureNotDestroyed(),h=b.playerInterface_.mediaSourceEngine.getDuration(),\n0!=h&&h<b.manifest_.presentationTimeline.getDuration()&&b.manifest_.presentationTimeline.setDuration(h),k.jumpToEnd()}})};\nshaka.media.StreamingEngine.prototype.update_=function(a){goog.asserts.assert(this.manifest_,"manifest_ should not be null");goog.asserts.assert(this.config_,"config_ should not be null");var b=shaka.util.ManifestParserUtils.ContentType;if(shaka.media.StreamingEngine.isEmbeddedText_(a))return this.playerInterface_.mediaSourceEngine.setSelectedClosedCaptionId(a.stream.originalId||""),null;a.type==b.TEXT&&this.playerInterface_.mediaSourceEngine.clearSelectedClosedCaptionId();var c=shaka.media.StreamingEngine.logPrefix_(a),\nd=this.playerInterface_.getPresentationTime(),e=this.getTimeNeeded_(a,d);shaka.log.v2(c,"timeNeeded="+e);var f=this.playerInterface_.mediaSourceEngine.bufferedAheadOf(a.type,d);shaka.log.v2(c,"update_:","presentationTime="+d,"bufferedAhead="+f);var g=Math.max(this.manifest_.minBufferTime||0,this.config_.rebufferingGoal,this.config_.bufferingGoal)*this.bufferingGoalScale_;if(e>=this.manifest_.presentationTimeline.getDuration())return shaka.log.debug(c,"buffered to end of presentation"),a.endOfStream=\n!0,a.type==b.VIDEO&&(a=this.mediaStates_.get(b.TEXT))&&shaka.media.StreamingEngine.isEmbeddedText_(a)&&(a.endOfStream=!0),null;a.endOfStream=!1;if(f>=g)return shaka.log.v2(c,"buffering goal met"),.5;b=this.playerInterface_.mediaSourceEngine.bufferEnd(a.type);b=this.getSegmentReferenceNeeded_(a,d,b);if(!b)return 1;f=Infinity;g=Array.from(this.mediaStates_.values());g=$jscomp.makeIterator(g);for(var h=g.next();!h.done;h=g.next())h=h.value,shaka.media.StreamingEngine.isEmbeddedText_(h)||h.segmentIterator&&\n!h.segmentIterator.current()||(h=this.getTimeNeeded_(h,d),f=Math.min(f,h));g=this.manifest_.presentationTimeline.getMaxSegmentDuration()*shaka.media.StreamingEngine.MAX_RUN_AHEAD_SEGMENTS_;if(e>=f+g)return shaka.log.v2(c,"waiting for other streams to buffer"),1;this.fetchAndAppend_(a,d,b)["catch"](function(){});return null};shaka.media.StreamingEngine.prototype.getTimeNeeded_=function(a,b){return a.lastSegmentReference?a.lastSegmentReference.endTime:b};\nshaka.media.StreamingEngine.prototype.getSegmentReferenceNeeded_=function(a,b,c){var d=shaka.media.StreamingEngine.logPrefix_(a);goog.asserts.assert(a.stream.segmentIndex,"segment index should have been generated already");if(a.segmentIterator)return a.segmentIterator.current();if(a.lastSegmentReference||c)return b=a.lastSegmentReference?a.lastSegmentReference.endTime:c,goog.asserts.assert(null!=b,"Should have a time to search"),shaka.log.v1(d,"looking up segment from new stream endTime:",b),a.segmentIterator=\na.stream.segmentIndex.getIteratorForTime(b),a=a.segmentIterator.next().value,null==a&&shaka.log.warning(d,"cannot find segment","endTime:",b),a;c=this.config_.inaccurateManifestTolerance;var e=Math.max(b-c,0);shaka.log.v1(d,"looking up segment","lookupTime:",e,"presentationTime:",b);var f=null;c&&(a.segmentIterator=a.stream.segmentIndex.getIteratorForTime(e),f=a.segmentIterator.next().value);f||(a.segmentIterator=a.stream.segmentIndex.getIteratorForTime(b),f=a.segmentIterator.next().value);null==\nf&&shaka.log.warning(d,"cannot find segment","lookupTime:",e,"presentationTime:",b);return f};\nshaka.media.StreamingEngine.prototype.fetchAndAppend_=function(a,b,c){var d=this,e,f,g,h,k,l,m,n,p,q,r,t,v,u,y,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:e=shaka.util.ManifestParserUtils.ContentType;f=shaka.media.StreamingEngine;g=f.logPrefix_(a);shaka.log.v1(g,"fetchAndAppend_:","presentationTime="+b,"reference.startTime="+c.startTime,"reference.endTime="+c.endTime);h=a.stream;k=a.segmentIterator;a.performingUpdate=!0;l=d.initSourceBuffer_(a,c);\nshaka.log.v2(g,"fetching segment");x.setCatchFinallyBlocks(2);m="video/mp4"==h.mimeType||"audio/mp4"==h.mimeType;n=window.ReadableStream;if(d.config_.lowLatencyMode&&n&&m)return r=new Uint8Array(0),t=function(z){var A,C,D;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){if(1==B.nextAddress)return B.yield(l,2);d.destroyer_.ensureNotDestroyed();if(d.fatalError_)return B["return"]();r=d.concatArray_(r,z);A=!1;C=0;(new shaka.util.Mp4Parser).box("mdat",function(E){C=E.size+E.start;A=!0}).parse(r,\n!1,!0);if(!A)return B.jumpTo(0);D=r.subarray(0,C);r=r.subarray(C);return B.yield(d.append_(a,b,h,c,D),0)})},x.yield(d.fetch_(a,c,t),5);d.config_.lowLatencyMode&&!n&&shaka.log.warning("Low latency streaming mode is enabled, but ReadableStream is not supported by the browser.");p=d.fetch_(a,c);return x.yield(Promise.all([l,p]),6);case 6:return q=x.yieldResult,d.destroyer_.ensureNotDestroyed(),d.fatalError_?x["return"]():a.waitingToClearBuffer?(shaka.log.info(g,"waitingToClearBuffer, skip append"),a.performingUpdate=\n!1,d.scheduleUpdate_(a,0),x["return"]()):x.yield(d.append_(a,b,h,c,q[1]),5);case 5:d.destroyer_.ensureNotDestroyed();if(d.fatalError_)return x["return"]();a.lastSegmentReference=c;v=k.next().value;shaka.log.v2(g,"advancing to next segment",v);a.performingUpdate=!1;a.recovering=!1;u=d.playerInterface_.mediaSourceEngine.getBufferedInfo();y=u[a.type];shaka.log.v1(g,"finished fetch and append",JSON.stringify(y));if(!a.waitingToClearBuffer)d.playerInterface_.onSegmentAppended();d.scheduleUpdate_(a,0);\nx.leaveTryBlock(0);break;case 2:w=x.enterCatchBlock();d.destroyer_.ensureNotDestroyed(w);if(d.fatalError_)return x["return"]();goog.asserts.assert(w instanceof shaka.util.Error,"Should only receive a Shaka error");a.performingUpdate=!1;if(a.type==e.TEXT&&d.config_.ignoreTextStreamFailures)w.code==shaka.util.Error.Code.BAD_HTTP_STATUS?shaka.log.warning(g,"Text stream failed to download. Proceeding without it."):shaka.log.warning(g,"Text stream failed to parse. Proceeding without it."),d.mediaStates_["delete"](e.TEXT),\nx.jumpTo(0);else if(w.code==shaka.util.Error.Code.OPERATION_ABORTED)a.performingUpdate=!1,a.updateTimer=null,d.scheduleUpdate_(a,0),x.jumpTo(0);else if(w.code==shaka.util.Error.Code.QUOTA_EXCEEDED_ERROR)d.handleQuotaExceeded_(a,w),x.jumpTo(0);else if(w.code==shaka.util.Error.Code.BAD_HTTP_STATUS&&w.data&&404==w.data[1])shaka.log.v2(g,"segment not available."),a.performingUpdate=!1,a.updateTimer=null,d.scheduleUpdate_(a,1),x.jumpTo(0);else return shaka.log.error(g,"failed fetch and append: code="+\nw.code),a.hasError=!0,w.severity=shaka.util.Error.Severity.CRITICAL,x.yield(d.handleStreamingError_(w),0)}})};\nshaka.media.StreamingEngine.prototype.retry=function(){if(this.destroyer_.destroyed())return shaka.log.error("Unable to retry after StreamingEngine is destroyed!"),!1;if(this.fatalError_)return shaka.log.error("Unable to retry after StreamingEngine encountered a fatal error!"),!1;for(var a=$jscomp.makeIterator(this.mediaStates_.values()),b=a.next();!b.done;b=a.next()){b=b.value;var c=shaka.media.StreamingEngine.logPrefix_(b);b.hasError&&(shaka.log.info(c,"Retrying after failure..."),b.hasError=!1,\nthis.scheduleUpdate_(b,.1))}return!0};shaka.media.StreamingEngine.prototype.concatArray_=function(a,b){var c=new Uint8Array(a.length+b.length);c.set(a);c.set(b,a.length);return c};\nshaka.media.StreamingEngine.prototype.handleQuotaExceeded_=function(a,b){var c=shaka.media.StreamingEngine.logPrefix_(a);if(Array.from(this.mediaStates_.values()).some(function(e){return e!=a&&e.recovering}))shaka.log.debug(c,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var d=Math.round(100*this.bufferingGoalScale_);if(20<d)this.bufferingGoalScale_-=.2;else if(4<d)this.bufferingGoalScale_-=.04;else{shaka.log.error(c,"MediaSource threw QuotaExceededError too many times");\nthis.fatalError_=a.hasError=!0;this.playerInterface_.onError(b);return}shaka.log.warning(c,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*this.bufferingGoalScale_))+"%");a.recovering=!0}this.scheduleUpdate_(a,4)};\nshaka.media.StreamingEngine.prototype.initSourceBuffer_=function(a,b){var c=this,d,e,f,g,h,k,l,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){d=shaka.media.StreamingEngine;e=d.logPrefix_(a);f=[];g=Math.max(0,b.appendWindowStart-d.APPEND_WINDOW_START_FUDGE_);h=b.appendWindowEnd+d.APPEND_WINDOW_END_FUDGE_;goog.asserts.assert(b.startTime<=h,e+" segment should start before append window end");k=b.timestampOffset;if(k!=a.lastTimestampOffset||g!=a.lastAppendWindowStart||h!=a.lastAppendWindowEnd)shaka.log.v1(e,\n"setting timestamp offset to "+k),shaka.log.v1(e,"setting append window start to "+g),shaka.log.v1(e,"setting append window end to "+h),l=function(){var q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.setCatchFinallyBlocks(2),a.lastAppendWindowStart=g,a.lastAppendWindowEnd=h,a.lastTimestampOffset=k,r.yield(c.playerInterface_.mediaSourceEngine.setStreamProperties(a.type,k,g,h),4);if(2!=r.nextAddress)return r.leaveTryBlock(0);q=r.enterCatchBlock();a.lastAppendWindowStart=\nnull;a.lastAppendWindowEnd=null;a.lastTimestampOffset=null;throw q;})},f.push(l());!shaka.media.InitSegmentReference.equal(b.initSegmentReference,a.lastInitSegmentReference)&&(a.lastInitSegmentReference=b.initSegmentReference)&&(shaka.log.v1(e,"fetching init segment"),m=c.fetch_(a,b.initSegmentReference),n=function(){var q,r,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:return v.setCatchFinallyBlocks(2),v.yield(m,4);case 4:return q=v.yieldResult,c.destroyer_.ensureNotDestroyed(),\nshaka.log.v1(e,"appending init segment"),r=a.stream.closedCaptions&&0<a.stream.closedCaptions.size,v.yield(c.playerInterface_.mediaSourceEngine.appendBuffer(a.type,q,null,null,r),5);case 5:v.leaveTryBlock(0);break;case 2:throw t=v.enterCatchBlock(),a.lastInitSegmentReference=null,t;}})},f.push(n()));return p.yield(Promise.all(f),0)})};\nshaka.media.StreamingEngine.prototype.append_=function(a,b,c,d,e){var f=this,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return g=shaka.media.StreamingEngine.logPrefix_(a),h=c.closedCaptions&&0<c.closedCaptions.size,null!=c.emsgSchemeIdUris&&0<c.emsgSchemeIdUris.length&&(new shaka.util.Mp4Parser).fullBox("emsg",function(l){return f.parseEMSG_(d,c.emsgSchemeIdUris,l)}).parse(e),k.yield(f.evict_(a,b),2);if(3!=k.nextAddress)return f.destroyer_.ensureNotDestroyed(),\nshaka.log.v1(g,"appending media segment"),k.yield(f.playerInterface_.mediaSourceEngine.appendBuffer(a.type,e,d.startTime,d.endTime,h),3);f.destroyer_.ensureNotDestroyed();shaka.log.v2(g,"appended media segment");k.jumpToEnd()})};\nshaka.media.StreamingEngine.prototype.parseEMSG_=function(a,b,c){if(0===c.version){var d=c.reader.readTerminatedString();var e=c.reader.readTerminatedString();var f=c.reader.readUint32();var g=c.reader.readUint32();var h=c.reader.readUint32();var k=c.reader.readUint32();var l=a.startTime+g/f}else f=c.reader.readUint32(),l=c.reader.readUint64()/f+a.timestampOffset,g=l-a.startTime,h=c.reader.readUint32(),k=c.reader.readUint32(),d=c.reader.readTerminatedString(),e=c.reader.readTerminatedString();a=c.reader.readBytes(c.reader.getLength()-\nc.reader.getPosition());if(b.includes(d))if("urn:mpeg:dash:event:2012"==d)this.playerInterface_.onManifestUpdate();else b=new shaka.util.FakeEvent(shaka.Player.EventName.Emsg,{detail:{startTime:l,endTime:l+h/f,schemeIdUri:d,value:e,timescale:f,presentationTimeDelta:g,eventDuration:h,id:k,messageData:a}}),this.playerInterface_.onEvent(b)};\nshaka.media.StreamingEngine.prototype.evict_=function(a,b){var c=this,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){d=shaka.media.StreamingEngine.logPrefix_(a);shaka.log.v2(d,"checking buffer length");e=Math.max(c.config_.bufferBehind,c.manifest_.presentationTimeline.getMaxSegmentDuration());f=c.playerInterface_.mediaSourceEngine.bufferStart(a.type);if(null==f)return shaka.log.v2(d,"buffer behind okay because nothing buffered:","presentationTime="+b,\n"bufferBehind="+e),k["return"]();g=b-f;h=g-e;if(.01>=h)return shaka.log.v2(d,"buffer behind okay:","presentationTime="+b,"bufferedBehind="+g,"bufferBehind="+e,"underflow="+Math.abs(h)),k["return"]();shaka.log.v1(d,"buffer behind too large:","presentationTime="+b,"bufferedBehind="+g,"bufferBehind="+e,"overflow="+h);return k.yield(c.playerInterface_.mediaSourceEngine.remove(a.type,f,f+h),2)}c.destroyer_.ensureNotDestroyed();shaka.log.v1(d,"evicted "+h+" seconds");k.jumpToEnd()})};\nshaka.media.StreamingEngine.isEmbeddedText_=function(a){var b=shaka.util.MimeUtils,c=b.CEA608_CLOSED_CAPTION_MIMETYPE;b=b.CEA708_CLOSED_CAPTION_MIMETYPE;return a&&a.type==shaka.util.ManifestParserUtils.ContentType.TEXT&&(a.stream.mimeType==c||a.stream.mimeType==b)};\nshaka.media.StreamingEngine.prototype.fetch_=function(a,b,c){var d=this,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return e=shaka.net.NetworkingEngine.RequestType.SEGMENT,f=shaka.util.Networking.createSegmentRequest(b.getUris(),b.startByte,b.endByte,d.config_.retryParameters,c),shaka.log.v2("fetching: reference=",b),g=d.playerInterface_.netEngine.request(e,f),a.operation=g,k.yield(g.promise,2);h=k.yieldResult;a.operation=null;return k["return"](h.data)})};\nshaka.media.StreamingEngine.prototype.clearBuffer_=function(a,b,c){var d=this,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return e=shaka.media.StreamingEngine.logPrefix_(a),goog.asserts.assert(!a.performingUpdate&&null==a.updateTimer,e+" unexpected call to clearBuffer_()"),a.waitingToClearBuffer=!1,a.waitingToFlushBuffer=!1,a.clearBufferSafeMargin=0,a.clearingBuffer=!0,a.lastSegmentReference=null,a.lastInitSegmentReference=null,a.segmentIterator=null,shaka.log.debug(e,\n"clearing buffer"),c?(f=d.playerInterface_.getPresentationTime(),g=d.playerInterface_.mediaSourceEngine.getDuration(),h.yield(d.playerInterface_.mediaSourceEngine.remove(a.type,f+c,g),3)):h.yield(d.playerInterface_.mediaSourceEngine.clear(a.type),4);if(3!=h.nextAddress)return d.destroyer_.ensureNotDestroyed(),b?h.yield(d.playerInterface_.mediaSourceEngine.flush(a.type),3):h.jumpTo(3);d.destroyer_.ensureNotDestroyed();shaka.log.debug(e,"cleared buffer");a.clearingBuffer=!1;a.endOfStream=!1;d.scheduleUpdate_(a,\n0);h.jumpToEnd()})};\nshaka.media.StreamingEngine.prototype.scheduleUpdate_=function(a,b){var c=this,d=shaka.media.StreamingEngine.logPrefix_(a),e=a.type;e!=shaka.util.ManifestParserUtils.ContentType.TEXT||this.mediaStates_.has(e)?(shaka.log.v2(d,"updating in "+b+" seconds"),goog.asserts.assert(null==a.updateTimer,d+" did not expect update to be scheduled"),a.updateTimer=(new shaka.util.DelayedTick(function(){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return g.setCatchFinallyBlocks(2),g.yield(c.onUpdate_(a),\n4);if(2!=g.nextAddress)return g.leaveTryBlock(0);f=g.enterCatchBlock();if(c.playerInterface_)c.playerInterface_.onError(f);g.jumpToEnd()})})).tickAfter(b)):shaka.log.v1(d,"Text stream is unloaded. No update is needed.")};shaka.media.StreamingEngine.prototype.cancelUpdate_=function(a){null!=a.updateTimer&&(a.updateTimer.stop(),a.updateTimer=null)};\nshaka.media.StreamingEngine.prototype.abortOperations_=function(a){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return a.operation?b.yield(a.operation.abort(),0):b.jumpTo(0)})};\nshaka.media.StreamingEngine.prototype.handleStreamingError_=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(b.failureCallbackBackoff_.attempt(),2);b.destroyer_.ensureNotDestroyed();b.playerInterface_.onError(a);a.handled||b.config_.failureCallback(a);c.jumpToEnd()})};shaka.media.StreamingEngine.logPrefix_=function(a){return"("+a.type+":"+a.stream.id+")"};shaka.media.StreamingEngine.APPEND_WINDOW_START_FUDGE_=.1;\nshaka.media.StreamingEngine.APPEND_WINDOW_END_FUDGE_=.01;shaka.media.StreamingEngine.MAX_RUN_AHEAD_SEGMENTS_=1;shaka.routing={};shaka.routing.Walker=function(a,b,c){var d=this;this.implementation_=c;this.currentlyAt_=a;this.currentlyWith_=b;this.waitForWork_=null;this.requests_=[];this.currentStep_=this.currentRoute_=null;this.mainLoopPromise_=Promise.resolve().then(function(){return d.mainLoop_()});this.destroyer_=new shaka.util.Destroyer(function(){return d.doDestroy_()})};shaka.routing.Walker.prototype.getCurrentPayload=function(){return this.currentlyWith_};shaka.routing.Walker.prototype.destroy=function(){return this.destroyer_.destroy()};\nshaka.routing.Walker.prototype.doDestroy_=function(){var a=this,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return a.currentStep_&&a.currentStep_.abort(),a.unblockMainLoop_(),e.yield(a.mainLoopPromise_,2);if(a.currentRoute_)a.currentRoute_.listeners.onCancel();b=$jscomp.makeIterator(a.requests_);for(c=b.next();!c.done;c=b.next())d=c.value,d.listeners.onCancel();a.currentRoute_=null;a.requests_=[];a.implementation_=null;e.jumpToEnd()})};\nshaka.routing.Walker.prototype.startNewRoute=function(a){var b={onStart:function(){},onEnd:function(){},onCancel:function(){},onError:function(c){},onSkip:function(){},onEnter:function(){}};this.requests_.push({create:a,listeners:b});this.currentStep_&&this.currentStep_.abort();this.unblockMainLoop_();return b};\nshaka.routing.Walker.prototype.mainLoop_=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return a.destroyer_.destroyed()?b.jumpTo(0):b.yield(a.doOneThing_(),1)})};\nshaka.routing.Walker.prototype.doOneThing_=function(){if(this.tryNewRoute_())return Promise.resolve();if(this.currentRoute_)return this.takeNextStep_();goog.asserts.assert(null==this.waitForWork_,"We should not have a promise yet.");this.implementation_.onIdle(this.currentlyAt_);return this.waitForWork_=new shaka.util.PublicPromise};\nshaka.routing.Walker.prototype.tryNewRoute_=function(){goog.asserts.assert(null==this.currentStep_,"We should never have a current step between taking steps.");if(0==this.requests_.length||this.currentRoute_&&!this.currentRoute_.interruptible)return!1;this.currentRoute_&&(this.currentRoute_.listeners.onCancel(),this.currentRoute_=null);var a=this.requests_.shift(),b=a.create(this.currentlyWith_);if(b)a.listeners.onStart(),this.currentRoute_={node:b.node,payload:b.payload,interruptible:b.interruptible,\nlisteners:a.listeners};else a.listeners.onSkip();return!0};\nshaka.routing.Walker.prototype.takeNextStep_=function(){var a=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return goog.asserts.assert(a.currentRoute_,"We need a current route to take the next step."),a.currentlyAt_=a.implementation_.getNext(a.currentlyAt_,a.currentlyWith_,a.currentRoute_.node,a.currentRoute_.payload),a.currentRoute_.listeners.onEnter(a.currentlyAt_),d.setCatchFinallyBlocks(2),a.currentStep_=a.implementation_.enterNode(a.currentlyAt_,\na.currentlyWith_,a.currentRoute_.payload),d.yield(a.currentStep_.promise,4);case 4:a.currentStep_=null;a.currentlyAt_==a.currentRoute_.node&&(a.currentRoute_.listeners.onEnd(),a.currentRoute_=null);d.leaveTryBlock(0);break;case 2:b=d.enterCatchBlock();if(b.code==shaka.util.Error.Code.OPERATION_ABORTED)goog.asserts.assert(a.currentRoute_.interruptible,"Do not put abortable steps in non-interruptible routes!"),a.currentRoute_.listeners.onCancel();else a.currentRoute_.listeners.onError(b);a.currentRoute_=\nnull;a.currentStep_=null;c=a;return d.yield(a.implementation_.handleError(a.currentlyWith_,b),5);case 5:c.currentlyAt_=d.yieldResult,d.jumpToEnd()}})};shaka.routing.Walker.prototype.unblockMainLoop_=function(){this.waitForWork_&&(this.waitForWork_.resolve(),this.waitForWork_=null)};shaka.text.SimpleTextDisplayer=function(a){this.textTrack_=null;for(var b=$jscomp.makeIterator(Array.from(a.textTracks)),c=b.next();!c.done;c=b.next())c=c.value,c.mode="disabled",c.label==shaka.Player.TextTrackLabel&&(this.textTrack_=c);this.textTrack_||(this.textTrack_=a.addTextTrack("subtitles",shaka.Player.TextTrackLabel));this.textTrack_.mode="hidden"};\nshaka.text.SimpleTextDisplayer.prototype.remove=function(a,b){if(!this.textTrack_)return!1;shaka.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(c){return c.startTime<b&&c.endTime>a});return!0};\nshaka.text.SimpleTextDisplayer.prototype.append=function(a){var b=function(g){var h=[],k=g.fontWeight>=shaka.text.Cue.fontWeight.BOLD,l=g.fontStyle==shaka.text.Cue.fontStyle.ITALIC,m=g.textDecoration.includes(shaka.text.Cue.textDecoration.UNDERLINE);k&&h.push("b");l&&h.push("i");m&&h.push("u");k=h.reduce(function(n,p){return n+"<"+p+">"},"");h=h.reduceRight(function(n,p){return n+"</"+p+">"},"");return g.lineBreak||g.spacer?(g.spacer&&shaka.Deprecate.deprecateFeature(4,"shaka.extern.Cue","Please use lineBreak instead of spacer."),\n"\\n"):g.nestedCues.length?g.nestedCues.map(b).join(""):k+g.payload+h},c=a.map(function(g){if(g.nestedCues.length){var h=g.clone();h.nestedCues=[];h.payload=b(g);return h}return g}),d=[];a=this.textTrack_.cues?Array.from(this.textTrack_.cues):[];var e={};c=$jscomp.makeIterator(c);for(var f=c.next();!f.done;e={$jscomp$loop$prop$inCue$578:e.$jscomp$loop$prop$inCue$578},f=c.next())e.$jscomp$loop$prop$inCue$578=f.value,a.some(function(g){return function(h){return h.startTime==g.$jscomp$loop$prop$inCue$578.startTime&&\nh.endTime==g.$jscomp$loop$prop$inCue$578.endTime&&h.text==g.$jscomp$loop$prop$inCue$578.payload?!0:!1}}(e))||(f=shaka.text.SimpleTextDisplayer.convertToTextTrackCue_(e.$jscomp$loop$prop$inCue$578))&&d.push(f);a=d.slice().sort(function(g,h){return g.startTime!=h.startTime?g.startTime-h.startTime:g.endTime!=h.endTime?g.endTime-h.startTime:"line"in VTTCue.prototype?d.indexOf(h)-d.indexOf(g):d.indexOf(g)-d.indexOf(h)});a=$jscomp.makeIterator(a);for(e=a.next();!e.done;e=a.next())this.textTrack_.addCue(e.value)};\nshaka.text.SimpleTextDisplayer.prototype.destroy=function(){this.textTrack_&&(shaka.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(a){return!0}),this.textTrack_.mode="disabled");this.textTrack_=null;return Promise.resolve()};shaka.text.SimpleTextDisplayer.prototype.isTextVisible=function(){return"showing"==this.textTrack_.mode};shaka.text.SimpleTextDisplayer.prototype.setTextVisibility=function(a){this.textTrack_.mode=a?"showing":"hidden"};\nshaka.text.SimpleTextDisplayer.convertToTextTrackCue_=function(a){if(a.startTime>=a.endTime)return shaka.log.warning("Invalid cue times: "+a.startTime+" - "+a.endTime),null;var b=shaka.text.Cue,c=new VTTCue(a.startTime,a.endTime,a.payload);c.lineAlign=a.lineAlign;c.positionAlign=a.positionAlign;a.size&&(c.size=a.size);try{c.align=a.textAlign}catch(d){}"center"==a.textAlign&&"center"!=c.align&&(c.align="middle");a.writingMode==b.writingMode.VERTICAL_LEFT_TO_RIGHT?c.vertical="lr":a.writingMode==b.writingMode.VERTICAL_RIGHT_TO_LEFT&&\n(c.vertical="rl");a.lineInterpretation==b.lineInterpretation.PERCENTAGE&&(c.snapToLines=!1);null!=a.line&&(c.line=a.line);null!=a.position&&(c.position=a.position);return c};shaka.text.SimpleTextDisplayer.removeWhere_=function(a,b){var c=a.mode,d="showing"==c?"showing":"hidden";a.mode=d;goog.asserts.assert(a.cues,\'Cues should be accessible when mode is set to "\'+d+\'".\');d=$jscomp.makeIterator(Array.from(a.cues));for(var e=d.next();!e.done;e=d.next())(e=e.value)&&b(e)&&a.removeCue(e);a.mode=c};\ngoog.exportSymbol("shaka.text.SimpleTextDisplayer",shaka.text.SimpleTextDisplayer);goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"setTextVisibility",shaka.text.SimpleTextDisplayer.prototype.setTextVisibility);goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"isTextVisible",shaka.text.SimpleTextDisplayer.prototype.isTextVisible);goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"destroy",shaka.text.SimpleTextDisplayer.prototype.destroy);\ngoog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"append",shaka.text.SimpleTextDisplayer.prototype.append);goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"remove",shaka.text.SimpleTextDisplayer.prototype.remove);shaka.util.Dom=function(){};shaka.util.Dom.createHTMLElement=function(a){return document.createElement(a)};shaka.util.Dom.createButton=function(){return document.createElement("button")};shaka.util.Dom.asHTMLElement=function(a){return a};shaka.util.Dom.asHTMLMediaElement=function(a){return a};shaka.util.Dom.getElementByClassName=function(a,b){var c=b.getElementsByClassName(a);goog.asserts.assert(1==c.length,"Should only be one element with class name "+a);return shaka.util.Dom.asHTMLElement(c[0])};\nshaka.util.Dom.removeAllChildren=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};goog.exportSymbol("shaka.util.Dom",shaka.util.Dom);goog.exportProperty(shaka.util.Dom,"removeAllChildren",shaka.util.Dom.removeAllChildren);shaka.text.UITextDisplayer=function(a,b){var c=this;goog.asserts.assert(b,"videoContainer should be valid.");this.isTextVisible_=!1;this.cues_=[];this.video_=a;this.videoContainer_=b;this.textContainer_=shaka.util.Dom.createHTMLElement("div");this.textContainer_.classList.add("shaka-text-container");this.textContainer_.style.textAlign="center";this.textContainer_.style.display="flex";this.textContainer_.style.flexDirection="column";this.textContainer_.style.alignItems="center";this.textContainer_.style.justifyContent=\n"flex-end";this.videoContainer_.appendChild(this.textContainer_);this.captionsTimer_=(new shaka.util.Timer(function(){c.updateCaptions_()})).tickEvery(.25);this.currentCuesMap_=new Map};\nshaka.text.UITextDisplayer.prototype.append=function(a){var b=[].concat($jscomp.arrayFromIterable(this.cues_)),c={};a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;c={$jscomp$loop$prop$cue$580:c.$jscomp$loop$prop$cue$580},d=a.next())c.$jscomp$loop$prop$cue$580=d.value,b.some(function(e){return function(f){return shaka.text.Cue.equal(f,e.$jscomp$loop$prop$cue$580)}}(c))||this.cues_.push(c.$jscomp$loop$prop$cue$580);this.updateCaptions_()};\nshaka.text.UITextDisplayer.prototype.destroy=function(){this.videoContainer_.removeChild(this.textContainer_);this.textContainer_=null;this.isTextVisible_=!1;this.cues_=[];this.captionsTimer_&&this.captionsTimer_.stop();this.currentCuesMap_.clear()};shaka.text.UITextDisplayer.prototype.remove=function(a,b){if(!this.textContainer_)return!1;this.cues_=this.cues_.filter(function(c){return c.startTime<a||c.endTime>=b});this.updateCaptions_();return!0};\nshaka.text.UITextDisplayer.prototype.isTextVisible=function(){return this.isTextVisible_};shaka.text.UITextDisplayer.prototype.setTextVisibility=function(a){this.isTextVisible_=a};\nshaka.text.UITextDisplayer.prototype.updateCaptions_=function(){for(var a=this,b=this.video_.currentTime,c=function(g){return a.cues_.includes(g)&&a.isTextVisible_&&g.startTime<=b&&g.endTime>b},d=$jscomp.makeIterator(this.currentCuesMap_.keys()),e=d.next();!e.done;e=d.next())if(e=e.value,!c(e)){var f=this.currentCuesMap_.get(e);this.textContainer_.removeChild(f);this.currentCuesMap_["delete"](e)}d=new Set(this.currentCuesMap_.values());e=$jscomp.makeIterator(Array.from(this.textContainer_.childNodes));\nfor(f=e.next();!f.done;f=e.next())f=f.value,d.has(f)||this.textContainer_.removeChild(f);d=this.cues_.filter(function(g){return c(g)&&!a.currentCuesMap_.has(g)}).sort(function(g,h){return g.startTime!=h.startTime?g.startTime-h.startTime:g.endTime-h.endTime});d=$jscomp.makeIterator(d);for(e=d.next();!e.done;e=d.next())e=e.value,f=this.displayCue_(this.textContainer_,e,!1),this.currentCuesMap_.set(e,f)};\nshaka.text.UITextDisplayer.prototype.displayCue_=function(a,b,c){var d=c?"span":"div";if(b.lineBreak||b.spacer)b.spacer&&shaka.Deprecate.deprecateFeature(4,"shaka.extern.Cue","Please use lineBreak instead of spacer."),d="br";var e=shaka.util.Dom.createHTMLElement(d);if("br"!=d)for(this.setCaptionStyles_(e,b,c),b=$jscomp.makeIterator(b.nestedCues),c=b.next();!c.done;c=b.next())this.displayCue_(e,c.value,!0);a.appendChild(e);return e};\nshaka.text.UITextDisplayer.prototype.setCaptionStyles_=function(a,b,c){var d=shaka.text.Cue,e=a.style,f=0==b.nestedCues.length;e.whiteSpace="pre-wrap";var g=b.payload.replace(/\\s+$/g,function(h){return"\\u00a0".repeat(h.length)});c?a.textContent=g:g.length&&(e=shaka.util.Dom.createHTMLElement("span"),e.textContent=g,a.appendChild(e),e=e.style);e.backgroundColor=b.backgroundColor;e.border=b.border;e.color=b.color;e.direction=b.direction;e.opacity=b.opacity;e.paddingLeft=shaka.text.UITextDisplayer.convertLengthValue_(b.linePadding,\nb,this.videoContainer_);e.paddingRight=shaka.text.UITextDisplayer.convertLengthValue_(b.linePadding,b,this.videoContainer_);b.backgroundImage&&(e.backgroundImage="url(\'"+b.backgroundImage+"\')",e.backgroundRepeat="no-repeat",e.backgroundSize="contain",e.backgroundPosition="center",""==b.backgroundColor&&(e.backgroundColor="transparent"));e.verticalAlign=b.displayAlign==d.displayAlign.BEFORE?"top":b.displayAlign==d.displayAlign.CENTER?"middle":"bottom";f||(e.margin="0");e.fontFamily=b.fontFamily;e.fontWeight=\nb.fontWeight.toString();e.fontStyle=b.fontStyle;e.letterSpacing=b.letterSpacing;e.fontSize=shaka.text.UITextDisplayer.convertLengthValue_(b.fontSize,b,this.videoContainer_);b.line?b.lineInterpretation==d.lineInterpretation.PERCENTAGE&&(e.position="absolute",b.writingMode==d.writingMode.HORIZONTAL_TOP_TO_BOTTOM?b.lineAlign==d.lineAlign.START?e.top=b.line+"%":b.lineAlign==d.lineAlign.END&&(e.bottom=b.line+"%"):b.writingMode==d.writingMode.VERTICAL_LEFT_TO_RIGHT?b.lineAlign==d.lineAlign.START?e.left=\nb.line+"%":b.lineAlign==d.lineAlign.END&&(e.right=b.line+"%"):b.lineAlign==d.lineAlign.START?e.right=b.line+"%":b.lineAlign==d.lineAlign.END&&(e.left=b.line+"%")):b.region&&b.region.id&&(!c&&!f||b.backgroundImage)&&(a=shaka.text.CueRegion.units.PERCENTAGE,c=b.region.widthUnits==a?"%":"px",f=b.region.viewportAnchorUnits==a?"%":"px",e.height=b.region.height+(b.region.heightUnits==a?"%":"px"),e.width=b.region.width+c,e.position="absolute",e.top=b.region.viewportAnchorY+f,e.left=b.region.viewportAnchorX+\nf);e.lineHeight=b.lineHeight;b.position&&(b.writingMode==d.writingMode.HORIZONTAL_TOP_TO_BOTTOM?e.paddingLeft=b.position:e.paddingTop=b.position);b.positionAlign==d.positionAlign.LEFT?e.cssFloat="left":b.positionAlign==d.positionAlign.RIGHT&&(e.cssFloat="right");e.textAlign=b.textAlign;e.textDecoration=b.textDecoration.join(" ");e.writingMode=b.writingMode;"writingMode"in document.documentElement.style&&e.writingMode==b.writingMode||(e.webkitWritingMode=b.writingMode);b.size&&(b.writingMode==d.writingMode.HORIZONTAL_TOP_TO_BOTTOM?\ne.width=b.size+"%":e.height=b.size+"%")};shaka.text.UITextDisplayer.getLengthValueInfo_=function(a){return(a=(new RegExp(/(\\d*\\.?\\d+)([a-z]+|%+)/)).exec(a))?{value:Number(a[1]),unit:a[2]}:null};\nshaka.text.UITextDisplayer.convertLengthValue_=function(a,b,c){var d=shaka.text.UITextDisplayer.getLengthValueInfo_(a);if(!d)return a;var e=d.value;switch(d.unit){case "%":return shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_(e/100,b,c);case "c":return shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_(e,b,c);default:return a}};shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_=function(a,b,c){return c.clientHeight*a/b.cellResolution.rows+"px"};\ngoog.exportSymbol("shaka.text.UITextDisplayer",shaka.text.UITextDisplayer);goog.exportProperty(shaka.text.UITextDisplayer.prototype,"setTextVisibility",shaka.text.UITextDisplayer.prototype.setTextVisibility);goog.exportProperty(shaka.text.UITextDisplayer.prototype,"isTextVisible",shaka.text.UITextDisplayer.prototype.isTextVisible);goog.exportProperty(shaka.text.UITextDisplayer.prototype,"remove",shaka.text.UITextDisplayer.prototype.remove);\ngoog.exportProperty(shaka.text.UITextDisplayer.prototype,"destroy",shaka.text.UITextDisplayer.prototype.destroy);goog.exportProperty(shaka.text.UITextDisplayer.prototype,"append",shaka.text.UITextDisplayer.prototype.append);shaka.text.WebVttGenerator=function(){};\nshaka.text.WebVttGenerator.convert=function(a){var b=function(f){var g=[],h=f.fontWeight>=shaka.text.Cue.fontWeight.BOLD,k=f.fontStyle==shaka.text.Cue.fontStyle.ITALIC,l=f.textDecoration.includes(shaka.text.Cue.textDecoration.UNDERLINE);h&&g.push("b");k&&g.push("i");l&&g.push("u");h=g.reduce(function(m,n){return m+"<"+n+">"},"");g=g.reduceRight(function(m,n){return m+"</"+n+">"},"");return f.lineBreak||f.spacer?(f.spacer&&shaka.Deprecate.deprecateFeature(4,"shaka.text.Cue","Please use lineBreak instead of spacer."),\n"\\n"):f.nestedCues.length?f.nestedCues.map(b).join(""):h+f.payload+g},c=a.map(function(f){if(f.nestedCues.length){var g=f.clone();g.nestedCues=[];g.payload=b(f);return g}return f});a="WEBVTT\\n\\n";c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var e=function(f){var g=Math.floor(f/3600),h=Math.floor(f/60%60),k=Math.floor(f%60);f=Math.floor(1E3*f%1E3);return(10>g?"0":"")+g+":"+(10>h?"0":"")+h+":"+(10>k?"0":"")+k+"."+(100>f?10>f?"00":"0":"")+f};a+=e(d.startTime)+" --\\x3e "+\ne(d.endTime)+"\\n";a+=d.payload+"\\n\\n"}return a};goog.exportSymbol("shaka.text.WebVttGenerator",shaka.text.WebVttGenerator);shaka.util.ConfigUtils=function(){};\nshaka.util.ConfigUtils.mergeConfigObjects=function(a,b,c,d,e){goog.asserts.assert(a,"Destination config must not be null!");var f=e in d,g=!0,h;for(h in b){var k=e+"."+h,l=f?d[e]:c[h];f||h in c?void 0===b[h]?void 0===l||f?delete a[h]:a[h]=shaka.util.ObjectUtils.cloneObject(l):l.constructor==Object&&b[h]&&b[h].constructor==Object?(a[h]||(a[h]=shaka.util.ObjectUtils.cloneObject(l)),k=shaka.util.ConfigUtils.mergeConfigObjects(a[h],b[h],l,d,k),g=g&&k):typeof b[h]!=typeof l||null==b[h]||"function"!=typeof b[h]&&\nb[h].constructor!=l.constructor?(shaka.log.alwaysError("Invalid config, wrong type for "+k),g=!1):("function"==typeof c[h]&&c[h].length!=b[h].length&&shaka.log.alwaysWarn("Unexpected number of arguments for "+k),a[h]=b[h]):(shaka.log.alwaysError("Invalid config, unrecognized key "+k),g=!1)}return g};\nshaka.util.ConfigUtils.convertToConfigObject=function(a,b){for(var c={},d=c,e=0,f=0;;){e=a.indexOf(".",e);if(0>e)break;if(0==e||"\\\\"!=a[e-1])f=a.substring(f,e).replace(/\\\\\\./g,"."),d[f]={},d=d[f],f=e+1;e+=1}d[a.substring(f).replace(/\\\\\\./g,".")]=b;return c};goog.exportSymbol("shaka.util.ConfigUtils",shaka.util.ConfigUtils);goog.exportProperty(shaka.util.ConfigUtils,"convertToConfigObject",shaka.util.ConfigUtils.convertToConfigObject);\ngoog.exportProperty(shaka.util.ConfigUtils,"mergeConfigObjects",shaka.util.ConfigUtils.mergeConfigObjects);shaka.util.PlayerConfiguration=function(){};\nshaka.util.PlayerConfiguration.createDefault=function(){var a=Infinity;navigator.connection&&navigator.connection.saveData&&(a=360);var b={retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:shaka.media.DrmEngine.defaultInitDataTransform,logLicenseExchange:!1,updateExpirationTime:1},c={retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),availabilityWindowOverride:NaN,disableAudio:!1,\ndisableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1E3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready",\n"urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"}},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},d={retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),failureCallback:function(g){shaka.log.error("Unhandled streaming error",g);return[g]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.1,\nsmallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1};if(shaka.util.Platform.isLegacyEdge()||shaka.util.Platform.isTizen()||shaka.util.Platform.isChromecast())d.gapDetectionThreshold=.5;if(shaka.util.Platform.isWebOS()||shaka.util.Platform.isTizen()||shaka.util.Platform.isChromecast())d.stallSkip=\n0;var e={trackSelectionCallback:function(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h["return"](g)})},downloadSizeCallback:function(g){var h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return navigator.storage&&navigator.storage.estimate?k.yield(navigator.storage.estimate(),3):k["return"](!0);h=k.yieldResult;return k["return"](h.usage+g<.95*h.quota)})},progressCallback:function(g,h){return[g,h]},usePersistentLicense:!0},f={drm:b,\nmanifest:c,streaming:d,offline:e,abrFactory:function(){return new shaka.abr.SimpleAbrManager},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1E6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:a,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",\npreferredAudioChannelCount:2,preferForcedSubs:!1,restrictions:{minWidth:0,maxWidth:Infinity,minHeight:0,maxHeight:Infinity,minPixels:0,maxPixels:Infinity,minFrameRate:0,maxFrameRate:Infinity,minBandwidth:0,maxBandwidth:Infinity},playRangeStart:0,playRangeEnd:Infinity,useMediaCapabilities:!1,textDisplayFactory:function(){return null}};e.trackSelectionCallback=function(g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return h["return"](shaka.util.PlayerConfiguration.defaultTrackSelect(g,\nf.preferredAudioLanguage))})};return f};shaka.util.PlayerConfiguration.mergeConfigObjects=function(a,b,c){var d={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return shaka.util.ConfigUtils.mergeConfigObjects(a,b,c||shaka.util.PlayerConfiguration.createDefault(),d,"")};\nshaka.util.PlayerConfiguration.defaultTrackSelect=function(a,b){var c=shaka.util.ManifestParserUtils.ContentType,d=shaka.util.LanguageUtils,e=a.filter(function(l){return"variant"==l.type}),f=[],g=d.findClosestLocale(b,e.map(function(l){return l.language}));g&&(f=e.filter(function(l){return d.normalize(l.language)==g}));0==f.length&&(f=e.filter(function(l){return l.primary}));0==f.length&&(1<(new Set(e.map(function(l){return l.language}))).size&&shaka.log.warning("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),\nf=e);var h=f.filter(function(l){return l.height&&480>=l.height});h.length&&(h.sort(function(l,m){goog.asserts.assert(null!=l.height,"Null height");goog.asserts.assert(null!=m.height,"Null height");return m.height-l.height}),f=h.filter(function(l){return l.height==h[0].height}));e=[];if(f.length){var k=Math.floor(f.length/2);f.sort(function(l,m){return l.bandwidth-m.bandwidth});e.push(f[k])}f=$jscomp.makeIterator(a);for(k=f.next();!k.done;k=f.next())k=k.value,k.type!=c.TEXT&&k.type!=c.IMAGE||e.push(k);\nreturn e};goog.exportSymbol("shaka.util.PlayerConfiguration",shaka.util.PlayerConfiguration);goog.exportProperty(shaka.util.PlayerConfiguration,"mergeConfigObjects",shaka.util.PlayerConfiguration.mergeConfigObjects);shaka.util.StateHistory=function(){this.open_=null;this.closed_=[]};shaka.util.StateHistory.prototype.update=function(a){null==this.open_?this.start_(a):this.update_(a)};shaka.util.StateHistory.prototype.getTimeSpentIn=function(a){var b=0;this.open_&&this.open_.state==a&&(b+=this.open_.duration);for(var c=$jscomp.makeIterator(this.closed_),d=c.next();!d.done;d=c.next())d=d.value,b+=d.state==a?d.duration:0;return b};\nshaka.util.StateHistory.prototype.getCopy=function(){for(var a=function(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}},b=[],c=$jscomp.makeIterator(this.closed_),d=c.next();!d.done;d=c.next())b.push(a(d.value));this.open_&&b.push(a(this.open_));return b};\nshaka.util.StateHistory.prototype.start_=function(a){goog.asserts.assert(null==this.open_,"There must be no open entry in order when we start");shaka.log.v1("Changing Player state to",a);this.open_={timestamp:this.getNowInSeconds_(),state:a,duration:0}};\nshaka.util.StateHistory.prototype.update_=function(a){goog.asserts.assert(this.open_,"There must be an open entry in order to update it");var b=this.getNowInSeconds_();this.open_.duration=b-this.open_.timestamp;this.open_.state!=a&&(shaka.log.v1("Changing Player state to",a),this.closed_.push(this.open_),this.open_={timestamp:b,state:a,duration:0})};shaka.util.StateHistory.prototype.getNowInSeconds_=function(){return Date.now()/1E3};shaka.util.SwitchHistory=function(){this.currentText_=this.currentVariant_=null;this.history_=[]};shaka.util.SwitchHistory.prototype.updateCurrentVariant=function(a,b){this.currentVariant_!=a&&(this.currentVariant_=a,this.history_.push({timestamp:this.getNowInSeconds_(),id:a.id,type:"variant",fromAdaptation:b,bandwidth:a.bandwidth}))};\nshaka.util.SwitchHistory.prototype.updateCurrentText=function(a,b){this.currentText_!=a&&(this.currentText_=a,this.history_.push({timestamp:this.getNowInSeconds_(),id:a.id,type:"text",fromAdaptation:b,bandwidth:null}))};shaka.util.SwitchHistory.prototype.getCopy=function(){for(var a=[],b=$jscomp.makeIterator(this.history_),c=b.next();!c.done;c=b.next())a.push(this.clone_(c.value));return a};shaka.util.SwitchHistory.prototype.getNowInSeconds_=function(){return Date.now()/1E3};\nshaka.util.SwitchHistory.prototype.clone_=function(a){return{timestamp:a.timestamp,id:a.id,type:a.type,fromAdaptation:a.fromAdaptation,bandwidth:a.bandwidth}};shaka.util.Stats=function(){this.bandwidthEstimate_=this.currentStreamBandwidth_=this.maxSegmentDurationSeconds_=this.liveLatencySeconds_=this.licenseTimeSeconds_=this.drmTimeSeconds_=this.manifestTimeSeconds_=this.loadLatencySeconds_=this.completionPercent_=this.totalCorruptedFrames_=this.totalDecodedFrames_=this.totalDroppedFrames_=this.height_=this.width_=NaN;this.stateHistory_=new shaka.util.StateHistory;this.switchHistory_=new shaka.util.SwitchHistory};\nshaka.util.Stats.prototype.setDroppedFrames=function(a,b){this.totalDroppedFrames_=a;this.totalDecodedFrames_=b};shaka.util.Stats.prototype.setCorruptedFrames=function(a){this.totalCorruptedFrames_=a};shaka.util.Stats.prototype.setResolution=function(a,b){this.width_=a;this.height_=b};shaka.util.Stats.prototype.setLoadLatency=function(a){this.loadLatencySeconds_=a};shaka.util.Stats.prototype.setManifestTime=function(a){this.manifestTimeSeconds_=a};\nshaka.util.Stats.prototype.setCompletionPercent=function(a){isNaN(this.completionPercent_)?this.completionPercent_=a:this.completionPercent_=Math.max(this.completionPercent_,a)};shaka.util.Stats.prototype.setDrmTime=function(a){this.drmTimeSeconds_=a};shaka.util.Stats.prototype.setLicenseTime=function(a){this.licenseTimeSeconds_=a};shaka.util.Stats.prototype.setLiveLatency=function(a){this.liveLatencySeconds_=a};\nshaka.util.Stats.prototype.setMaxSegmentDuration=function(a){this.maxSegmentDurationSeconds_=a};shaka.util.Stats.prototype.setCurrentStreamBandwidth=function(a){this.currentStreamBandwidth_=a};shaka.util.Stats.prototype.setBandwidthEstimate=function(a){this.bandwidthEstimate_=a};shaka.util.Stats.prototype.getStateHistory=function(){return this.stateHistory_};shaka.util.Stats.prototype.getSwitchHistory=function(){return this.switchHistory_};\nshaka.util.Stats.prototype.getBlob=function(){return{width:this.width_,height:this.height_,streamBandwidth:this.currentStreamBandwidth_,decodedFrames:this.totalDecodedFrames_,droppedFrames:this.totalDroppedFrames_,corruptedFrames:this.totalCorruptedFrames_,estimatedBandwidth:this.bandwidthEstimate_,completionPercent:this.completionPercent_,loadLatency:this.loadLatencySeconds_,manifestTimeSeconds:this.manifestTimeSeconds_,drmTimeSeconds:this.drmTimeSeconds_,playTime:this.stateHistory_.getTimeSpentIn("playing"),\npauseTime:this.stateHistory_.getTimeSpentIn("paused"),bufferingTime:this.stateHistory_.getTimeSpentIn("buffering"),licenseTime:this.licenseTimeSeconds_,liveLatency:this.liveLatencySeconds_,maxSegmentDuration:this.maxSegmentDurationSeconds_,stateHistory:this.stateHistory_.getCopy(),switchHistory:this.switchHistory_.getCopy()}};\nshaka.util.Stats.getEmptyBlob=function(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]}};shaka.Player=function(a,b){shaka.util.FakeEventTarget.call(this);var c=this;this.loadMode_=shaka.Player.LoadMode.NOT_LOADED;this.videoContainer_=this.video_=null;this.isTextVisible_=!1;this.eventManager_=new shaka.util.EventManager;this.abrManagerFactory_=this.abrManager_=this.assetUri_=this.manifest_=this.parserFactory_=this.parser_=this.streamingEngine_=this.regionTimeline_=this.bufferObserver_=this.bufferPoller_=this.playRateController_=this.playheadObservers_=this.playhead_=this.mediaSourceEngine_=\nthis.drmEngine_=this.networkingEngine_=null;this.nextExternalStreamId_=1E9;this.config_=this.defaultConfig_();this.maxHwRes_={width:Infinity,height:Infinity};this.stats_=null;this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(this.config_.preferredAudioLanguage,this.config_.preferredVariantRole,this.config_.preferredAudioChannelCount);this.currentTextLanguage_=this.config_.preferredTextLanguage;this.currentTextRole_=this.config_.preferredTextRole;this.currentTextForced_=this.config_.preferForcedSubs;\nthis.cleanupOnUnload_=[];b&&b(this);this.networkingEngine_=this.createNetworkingEngine();this.networkingEngine_.setForceHTTPS(this.config_.streaming.forceHTTPS);this.adManager_=null;shaka.Player.adManagerFactory_&&(this.adManager_=shaka.util.Functional.callFactory(shaka.Player.adManagerFactory_));this.eventManager_.listen(window,"online",function(){c.retryStreaming()});this.detachNode_={name:"detach"};this.attachNode_={name:"attach"};this.unloadNode_={name:"unload"};this.parserNode_={name:"manifest-parser"};\nthis.manifestNode_={name:"manifest"};this.mediaSourceNode_={name:"media-source"};this.drmNode_={name:"drm-engine"};this.loadNode_={name:"load"};this.srcEqualsDrmNode_={name:"src-equals-drm-engine"};this.srcEqualsNode_={name:"src-equals"};var d=shaka.util.AbortableOperation,e=new Map;e.set(this.attachNode_,function(f,g){return d.notAbortable(c.onAttach_(f,g))});e.set(this.detachNode_,function(f,g){return d.notAbortable(c.onDetach_(f,g))});e.set(this.unloadNode_,function(f,g){return d.notAbortable(c.onUnload_(f,\ng))});e.set(this.mediaSourceNode_,function(f,g){var h=c.onInitializeMediaSourceEngine_(f,g);return d.notAbortable(h)});e.set(this.parserNode_,function(f,g){var h=c.onInitializeParser_(f,g);return d.notAbortable(h)});e.set(this.manifestNode_,function(f,g){return c.onParseManifest_(f,g)});e.set(this.drmNode_,function(f,g){var h=c.onInitializeDrm_(f,g);return d.notAbortable(h)});e.set(this.loadNode_,function(f,g){return d.notAbortable(c.onLoad_(f,g))});e.set(this.srcEqualsDrmNode_,function(f,g){var h=\nc.onInitializeSrcEqualsDrm_(f,g);return d.notAbortable(h)});e.set(this.srcEqualsNode_,function(f,g){return c.onSrcEquals_(f,g)});this.walker_=new shaka.routing.Walker(this.detachNode_,shaka.Player.createEmptyPayload_(),{getNext:function(f,g,h,k){return c.getNextStep_(f,g,h,k)},enterNode:function(f,g,h){c.dispatchEvent(c.makeEvent_(shaka.Player.EventName.OnStateChange,{state:f.name}));return e.get(f)(g,h)},handleError:function(f,g){return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==\nh.nextAddress?(shaka.log.warning("The walker saw an error:"),g instanceof shaka.util.Error?shaka.log.warning("Error Code:",g.code):(shaka.log.warning("Error Message:",g.message),shaka.log.warning("Error Stack:",g.stack)),h.yield(c.onUnload_(f,shaka.Player.createEmptyPayload_()),2)):h["return"](f.mediaElement?c.attachNode_:c.detachNode_)})},onIdle:function(f){c.dispatchEvent(c.makeEvent_(shaka.Player.EventName.OnStateIdle,{state:f.name}))}});a&&this.attach(a,!0)};$jscomp.inherits(shaka.Player,shaka.util.FakeEventTarget);\nshaka.Player.prototype.makeEvent_=function(a,b){return new shaka.util.FakeEvent(a,b)};\nshaka.Player.prototype.destroy=function(){var a=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){switch(c.nextAddress){case 1:if(a.loadMode_==shaka.Player.LoadMode.DESTROYED)return c["return"]();a.loadMode_=shaka.Player.LoadMode.DESTROYED;b=a.walker_.startNewRoute(function(d){return{node:a.detachNode_,payload:shaka.Player.createEmptyPayload_(),interruptible:!1}});return c.yield(new Promise(function(d){b.onStart=function(){shaka.log.info("Preparing to destroy walker...")};b.onEnd=\nfunction(){d()};b.onCancel=function(){goog.asserts.assert(!1,"Our final detach call should never be cancelled.");d()};b.onError=function(){goog.asserts.assert(!1,"Our final detach call should never see an error");d()};b.onSkip=function(){goog.asserts.assert(!1,"Our final detach call should never be skipped");d()}}),2);case 2:return c.yield(a.walker_.destroy(),3);case 3:a.eventManager_&&(a.eventManager_.release(),a.eventManager_=null);a.abrManagerFactory_=null;a.abrManager_=null;a.config_=null;a.stats_=\nnull;a.videoContainer_=null;if(!a.networkingEngine_){c.jumpTo(0);break}return c.yield(a.networkingEngine_.destroy(),5);case 5:a.networkingEngine_=null,c.jumpToEnd()}})};shaka.Player.registerSupportPlugin=function(a,b){shaka.Player.supportPlugins_[a]=b};shaka.Player.setAdManagerFactory=function(a){shaka.Player.adManagerFactory_=a};\nshaka.Player.isBrowserSupported=function(){window.Promise||shaka.log.alwaysWarn("A Promise implementation or polyfill is required");window.TextDecoder&&window.TextEncoder||shaka.log.alwaysWarn("A TextDecoder/TextEncoder implementation or polyfill is required");if(!(window.Promise&&window.Uint8Array&&window.TextDecoder&&window.TextEncoder&&Array.prototype.forEach)||shaka.util.Platform.isIE())return!1;var a=shaka.util.Platform.safariVersion();return a&&12>a||!shaka.media.DrmEngine.isBrowserSupported()?\n!1:shaka.util.Platform.supportsMediaSource()?!0:shaka.util.Platform.supportsMediaType("application/x-mpegurl")};\nshaka.Player.probeSupport=function(a){a=void 0===a?!0:a;var b,c,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return goog.asserts.assert(shaka.Player.isBrowserSupported(),"Must have basic support"),b={},a?h.yield(shaka.media.DrmEngine.probeSupport(),3):h.jumpTo(2);2!=h.nextAddress&&(b=h.yieldResult);c=shaka.media.ManifestParser.probeSupport();d=shaka.media.MediaSourceEngine.probeSupport();e={manifest:c,media:d,drm:b};f=shaka.Player.supportPlugins_;for(g in f)e[g]=\nf[g]();return h["return"](e)})};\nshaka.Player.prototype.attach=function(a,b){b=void 0===b?!0:b;if(this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());var c=shaka.Player.createEmptyPayload_();c.mediaElement=a;shaka.util.Platform.supportsMediaSource()||(b=!1);var d=b?this.mediaSourceNode_:this.attachNode_,e=this.walker_.startNewRoute(function(f){return{node:d,payload:c,interruptible:!1}});e.onStart=function(){return shaka.log.info("Starting attach...")};return this.wrapWalkerListenersWithPromise_(e)};\nshaka.Player.prototype.detach=function(){var a=this;if(this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());var b=this.walker_.startNewRoute(function(c){return{node:a.detachNode_,payload:shaka.Player.createEmptyPayload_(),interruptible:!1}});b.onStart=function(){return shaka.log.info("Starting detach...")};return this.wrapWalkerListenersWithPromise_(b)};\nshaka.Player.prototype.unload=function(a){var b=this;a=void 0===a?!0:a;if(this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());shaka.util.Platform.supportsMediaSource()||(a=!1);var c=shaka.Player.createEmptyPayload_(),d=this.walker_.startNewRoute(function(e){var f=e.mediaElement&&a?b.mediaSourceNode_:e.mediaElement?b.attachNode_:b.detachNode_;goog.asserts.assert(f,"We should have picked a destination.");c.mediaElement=e.mediaElement;return{node:f,payload:c,\ninterruptible:!1}});d.onStart=function(){return shaka.log.info("Starting unload...")};return this.wrapWalkerListenersWithPromise_(d)};\nshaka.Player.prototype.load=function(a,b,c){var d=this;if(this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());this.dispatchEvent(this.makeEvent_(shaka.Player.EventName.Loading));var e=shaka.Player.createEmptyPayload_();e.uri=a;e.startTimeOfLoad=Date.now()/1E3;c&&(e.mimeType=c);void 0!==b&&(e.startTime=b);var f=this.shouldUseSrcEquals_(e)?this.srcEqualsNode_:this.loadNode_,g=this.walker_.startNewRoute(function(h){if(null==h.mediaElement)return null;e.mediaElement=\nh.mediaElement;return{node:f,payload:e,interruptible:!0}});this.stats_=new shaka.util.Stats;g.onStart=function(){return shaka.log.info("Starting load of "+a+"...")};return new Promise(function(h,k){g.onSkip=function(){return k(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.NO_VIDEO_ELEMENT))};g.onEnd=function(){h();d.dispatchEvent(d.makeEvent_(shaka.Player.EventName.Loaded))};g.onCancel=function(){return k(d.createAbortLoadError_())};\ng.onError=function(l){return k(l)}})};\nshaka.Player.prototype.shouldUseSrcEquals_=function(a){var b=shaka.util.Platform;if(!b.supportsMediaSource())return!0;var c=a.mimeType,d=a.uri||"";c||(c={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[shaka.media.ManifestParser.getExtension(d)]);if(c){a=""!=(a.mediaElement||\nb.anyMediaElement()).canPlayType(c);if(!a)return!1;c=shaka.media.ManifestParser.isSupported(d,c);if(!c)return!0;goog.asserts.assert(a&&c,"Both native and MSE playback should be possible!");if(this.config_.streaming.preferNativeHls)return!0;if(b.isApple())return this.config_.streaming.useNativeHlsOnSafari}return!1};\nshaka.Player.prototype.onAttach_=function(a,b){var c=this;goog.asserts.assert(null==a.mediaElement||a.mediaElement==b.mediaElement,"The routing logic failed. MediaElement requirement failed.");null==a.mediaElement&&(a.mediaElement=b.mediaElement,this.eventManager_.listen(a.mediaElement,"error",function(d){return c.onVideoError_(d)}));this.video_=a.mediaElement;return Promise.resolve()};\nshaka.Player.prototype.onDetach_=function(a,b){a.mediaElement&&(this.eventManager_.unlisten(a.mediaElement,"error"),a.mediaElement=null);this.video_=null;return Promise.resolve()};\nshaka.Player.prototype.onUnload_=function(a,b){var c=this,d,e,f,g,h,k,l,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return c.loadMode_!=shaka.Player.LoadMode.DESTROYED&&(c.loadMode_=shaka.Player.LoadMode.NOT_LOADED),d=c.cleanupOnUnload_.map(function(q){return q()}),c.cleanupOnUnload_=[],p.yield(Promise.all(d),2);case 2:c.dispatchEvent(c.makeEvent_(shaka.Player.EventName.Unloading));a.mimeType=null;a.startTime=null;a.uri=null;a.mediaElement&&(c.eventManager_.unlisten(a.mediaElement,\n"loadedmetadata"),c.eventManager_.unlisten(a.mediaElement,"playing"),c.eventManager_.unlisten(a.mediaElement,"pause"),c.eventManager_.unlisten(a.mediaElement,"ended"),c.eventManager_.unlisten(a.mediaElement,"ratechange"));c.playheadObservers_&&(c.playheadObservers_.release(),c.playheadObservers_=null);c.bufferPoller_&&(c.bufferPoller_.stop(),c.bufferPoller_=null);if(!c.parser_){p.jumpTo(3);break}return p.yield(c.parser_.stop(),4);case 4:c.parser_=null,c.parserFactory_=null;case 3:if(!c.abrManager_){p.jumpTo(5);\nbreak}return p.yield(c.abrManager_.stop(),5);case 5:if(!c.streamingEngine_){p.jumpTo(7);break}return p.yield(c.streamingEngine_.destroy(),8);case 8:c.streamingEngine_=null;case 7:c.playRateController_&&(c.playRateController_.release(),c.playRateController_=null);c.playhead_&&(c.playhead_.release(),c.playhead_=null);if(!c.mediaSourceEngine_){p.jumpTo(9);break}return p.yield(c.mediaSourceEngine_.destroy(),10);case 10:c.mediaSourceEngine_=null;case 9:if(c.adManager_)c.adManager_.onAssetUnload();if(!a.mediaElement||\n!a.mediaElement.src){p.jumpTo(11);break}return p.yield(new Promise(function(q){return(new shaka.util.Timer(q)).tickAfter(.1)}),12);case 12:for(a.mediaElement.removeAttribute("src"),a.mediaElement.load();a.mediaElement.lastChild;)a.mediaElement.removeChild(a.mediaElement.firstChild);case 11:if(!c.drmEngine_){p.jumpTo(13);break}return p.yield(c.drmEngine_.destroy(),14);case 14:c.drmEngine_=null;case 13:c.assetUri_=null;c.bufferObserver_=null;if(c.manifest_){e=$jscomp.makeIterator(c.manifest_.variants);\nfor(f=e.next();!f.done;f=e.next())for(g=f.value,h=$jscomp.makeIterator([g.audio,g.video]),k=h.next();!k.done;k=h.next())(l=k.value)&&l.segmentIndex&&l.segmentIndex.release();m=$jscomp.makeIterator(c.manifest_.textStreams);for(k=m.next();!k.done;k=m.next())n=k.value,n.segmentIndex&&n.segmentIndex.release()}c.manifest_=null;c.stats_=new shaka.util.Stats;c.lastTextFactory_=null;c.updateBufferState_();p.jumpToEnd()}})};\nshaka.Player.prototype.onInitializeMediaSourceEngine_=function(a,b){var c=this,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return goog.asserts.assert(shaka.util.Platform.supportsMediaSource(),"We should not be initializing media source on a platform that does not support media source."),goog.asserts.assert(a.mediaElement,"We should have a media element when initializing media source."),goog.asserts.assert(a.mediaElement==b.mediaElement,"|has| and |wants| should have the same media element when initializing media source."),\ngoog.asserts.assert(null==c.mediaSourceEngine_,"We should not have a media source engine yet."),d=new shaka.media.ClosedCaptionParser,e=c.config_.textDisplayFactory,f=shaka.util.Functional.callFactory(e),c.lastTextFactory_=e,g=c.createMediaSourceEngine(a.mediaElement,d,f,function(k,l,m){c.processTimedMetadataMediaSrc_(k,l,m)}),h.yield(g.open(),2);c.mediaSourceEngine_=g;h.jumpToEnd()})};\nshaka.Player.prototype.onInitializeParser_=function(a,b){var c=this,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return goog.asserts.assert(a.mediaElement,"We should have a media element when initializing the parser."),goog.asserts.assert(a.mediaElement==b.mediaElement,"|has| and |wants| should have the same media element when initializing the parser."),goog.asserts.assert(c.networkingEngine_,"Need networking engine when initializing the parser."),goog.asserts.assert(c.config_,\n"Need player config when initializing the parser."),a.mimeType=b.mimeType,a.uri=b.uri,goog.asserts.assert(a.uri,"We should have an asset uri when initializing the parsing."),d=a.uri,e=c.networkingEngine_,c.assetUri_=d,f=c,h.yield(shaka.media.ManifestParser.getFactory(d,e,c.config_.manifest.retryParameters,a.mimeType),2);f.parserFactory_=h.yieldResult;goog.asserts.assert(c.parserFactory_,"Must have manifest parser");c.parser_=shaka.util.Functional.callFactory(c.parserFactory_);g=shaka.util.ObjectUtils.cloneObject(c.config_.manifest);\nb.mediaElement&&"AUDIO"===b.mediaElement.nodeName&&(g.disableVideo=!0);c.parser_.configure(g);h.jumpToEnd()})};\nshaka.Player.prototype.onParseManifest_=function(a,b){var c=this;goog.asserts.assert(a.mimeType==b.mimeType,"|has| and |wants| should have the same mime type when parsing.");goog.asserts.assert(a.uri==b.uri,"|has| and |wants| should have the same uri when parsing.");goog.asserts.assert(a.uri,"|has| should have a valid uri when parsing.");goog.asserts.assert(a.uri==this.assetUri_,"|has.uri| should match the cached asset uri.");goog.asserts.assert(this.networkingEngine_,"Need networking engine to parse manifest.");\ngoog.asserts.assert(this.config_,"Need player config to parse manifest.");goog.asserts.assert(this.parser_,"|this.parser_| should have been set in an earlier step.");var d=a.uri,e=this.networkingEngine_;this.regionTimeline_=new shaka.media.RegionTimeline(function(){return c.seekRange()});this.regionTimeline_.setListeners(function(h){c.onRegionEvent_(shaka.Player.EventName.TimelineRegionAdded,h);if(c.adManager_)c.adManager_.onDashTimedMetadata(h)});var f={networkingEngine:e,filter:function(h){return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){return k["return"](c.filterManifest_(h))})},\nmakeTextStreamsForClosedCaptions:function(h){return c.makeTextStreamsForClosedCaptions_(h)},onTimelineRegionAdded:function(h){return c.regionTimeline_.addRegion(h)},onEvent:function(h){return c.dispatchEvent(h)},onError:function(h){return c.onError_(h)},isLowLatencyMode:function(){return c.isLowLatencyMode_()},isAutoLowLatencyMode:function(){return c.isAutoLowLatencyMode_()},enableLowLatencyMode:function(){c.configure("streaming.lowLatencyMode",!0)}},g=Date.now()/1E3;return new shaka.util.AbortableOperation(function(){var h,\nk,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return h=c,n.yield(c.parser_.start(d,f),2);h.manifest_=n.yieldResult;k=c.makeEvent_(shaka.Player.EventName.ManifestParsed);c.dispatchEvent(k);if(0==c.manifest_.variants.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.NO_VARIANTS);shaka.Player.filterForAVVariants_(c.manifest_);l=Date.now()/1E3;m=l-g;c.stats_.setManifestTime(m);n.jumpToEnd()})}(),\nfunction(){shaka.log.info("Aborting parser step...");return c.parser_.stop()})};\nshaka.Player.prototype.onInitializeDrm_=function(a,b){var c=this,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){return 1==f.nextAddress?(goog.asserts.assert(a.mimeType==b.mimeType,"The load graph should have ensured the mime types matched."),goog.asserts.assert(a.uri==b.uri,"The load graph should have ensured the uris matched"),goog.asserts.assert(c.networkingEngine_,"|onInitializeDrm_| should never be called after |destroy|"),goog.asserts.assert(c.config_,"|onInitializeDrm_| should never be called after |destroy|"),\ngoog.asserts.assert(c.manifest_,"|this.manifest_| should have been set in an earlier step."),goog.asserts.assert(a.mediaElement,"We should have a media element when initializing the DRM Engine."),d=Date.now()/1E3,e=!0,c.drmEngine_=c.createDrmEngine({netEngine:c.networkingEngine_,onError:function(g){c.onError_(g)},onKeyStatus:function(g){c.onKeyStatus_(g)},onExpirationUpdated:function(g,h){c.onExpirationUpdated_(g,h)},onEvent:function(g){c.dispatchEvent(g);g.type==shaka.Player.EventName.DrmSessionUpdate&&\ne&&(e=!1,g=Date.now()/1E3-d,c.stats_.setDrmTime(g))}}),c.config_.useMediaCapabilities||shaka.util.StreamUtils.filterManifestByMediaSource(c.manifest_),c.drmEngine_.configure(c.config_.drm),f.yield(c.drmEngine_.initForPlayback(c.manifest_.variants,c.manifest_.offlineSessionIds,c.config_.useMediaCapabilities),2)):3!=f.nextAddress?f.yield(c.drmEngine_.attach(a.mediaElement),3):f.yield(c.filterManifest_(c.manifest_),0)})};\nshaka.Player.prototype.onLoad_=function(a,b){var c=this,d,e,f,g,h,k,l,m,n,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){switch(r.nextAddress){case 1:goog.asserts.assert(a.mimeType==b.mimeType,"|has| and |wants| should have the same mime type when loading.");goog.asserts.assert(a.uri==b.uri,"|has| and |wants| should have the same uri when loading.");goog.asserts.assert(a.mediaElement,"We should have a media element when loading.");goog.asserts.assert(!isNaN(b.startTimeOfLoad),\n"|wants| should tell us when the load was originally requested");a.startTime=b.startTime;d=a.mediaElement;e=a.uri;c.assetUri_=e;c.playRateController_=new shaka.media.PlayRateController({getRate:function(){return a.mediaElement.playbackRate},getDefaultRate:function(){return a.mediaElement.defaultPlaybackRate},setRate:function(t){a.mediaElement.playbackRate=t},movePlayhead:function(t){a.mediaElement.currentTime+=t}});f=function(){return c.updateStateHistory_()};g=function(){return c.onRateChange_()};\nc.eventManager_.listen(d,"playing",f);c.eventManager_.listen(d,"pause",f);c.eventManager_.listen(d,"ended",f);c.eventManager_.listen(d,"ratechange",g);h=c.config_.abrFactory;c.abrManager_&&c.abrManagerFactory_==h||(c.abrManagerFactory_=h,c.abrManager_=shaka.util.Functional.callFactory(h),"function"!=typeof c.abrManager_.playbackRateChanged&&(shaka.Deprecate.deprecateFeature(4,"AbrManager","Please use an AbrManager with playbackRateChanged function."),c.abrManager_.playbackRateChanged=function(t){}),\nc.abrManager_.configure(c.config_.abr));c.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(c.config_.preferredAudioLanguage,c.config_.preferredVariantRole,c.config_.preferredAudioChannelCount);c.currentTextLanguage_=c.config_.preferredTextLanguage;shaka.Player.applyPlayRange_(c.manifest_.presentationTimeline,c.config_.playRangeStart,c.config_.playRangeEnd);c.abrManager_.init(function(t,v,u){return c.switch_(t,v,u)});c.playhead_=c.createPlayhead(a.startTime);c.playheadObservers_=\nc.createPlayheadObserversForMSE_();k=Math.max(c.manifest_.minBufferTime,c.config_.streaming.rebufferingGoal);c.startBufferManagement_(k);shaka.util.StreamUtils.chooseCodecsAndFilterManifest(c.manifest_,c.config_.preferredAudioChannelCount);c.streamingEngine_=c.createStreamingEngine();c.streamingEngine_.configure(c.config_.streaming);c.loadMode_=shaka.Player.LoadMode.MEDIA_SOURCE;c.dispatchEvent(c.makeEvent_(shaka.Player.EventName.Streaming));l=c.chooseVariant_();goog.asserts.assert(l,"Must choose an initial variant!");\nc.addVariantToSwitchHistory_(l,!0);c.streamingEngine_.switchVariant(l,!1,0);(m=c.chooseTextStream_())&&c.addTextStreamToSwitchHistory_(m,!0);c.setInitialTextState_(l,m);m&&c.shouldStreamText_()&&c.streamingEngine_.switchTextStream(m);if(!c.config_.streaming.startAtSegmentBoundary){r.jumpTo(2);break}n=c.playhead_.getTime();return r.yield(c.adjustStartTime_(l,n),3);case 3:p=r.yieldResult,c.playhead_.setStartTime(p);case 2:return r.yield(c.streamingEngine_.start(),4);case 4:c.config_.abr.enabled&&(c.abrManager_.enable(),\nc.onAbrStatusChanged_()),c.filterManifestByCurrentVariant_(),c.onTracksChanged_(),c.onAdaptation_(),c.updateAbrManagerVariants_(),q=c.manifest_.variants.some(function(t){return t.primary}),c.config_.preferredAudioLanguage||q||shaka.log.warning("No preferred audio language set.  We have chosen an arbitrary language initially"),c.eventManager_.listenOnce(d,"loadedmetadata",function(){var t=Date.now()/1E3-b.startTimeOfLoad;c.stats_.setLoadLatency(t)}),r.jumpToEnd()}})};\nshaka.Player.prototype.onInitializeSrcEqualsDrm_=function(a,b){var c=this,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){return 1==h.nextAddress?(d=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(c.networkingEngine_,"|onInitializeSrcEqualsDrm_| should never be called after |destroy|"),goog.asserts.assert(c.config_,"|onInitializeSrcEqualsDrm_| should never be called after |destroy|"),e=Date.now()/1E3,f=!0,c.drmEngine_=c.createDrmEngine({netEngine:c.networkingEngine_,\nonError:function(k){c.onError_(k)},onKeyStatus:function(k){c.onKeyStatus_(k)},onExpirationUpdated:function(k,l){c.onExpirationUpdated_(k,l)},onEvent:function(k){c.dispatchEvent(k);k.type==shaka.Player.EventName.DrmSessionUpdate&&f&&(f=!1,k=Date.now()/1E3-e,c.stats_.setDrmTime(k))}}),c.drmEngine_.configure(c.config_.drm),g={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"video/mp4",codecs:"",encrypted:!0,\ndrmInfos:[],keyIds:new Set,language:"und",label:null,type:d.VIDEO,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},h.yield(c.drmEngine_.initForPlayback([g],[]),2)):h.yield(c.drmEngine_.attach(a.mediaElement),0)})};\nshaka.Player.prototype.onSrcEquals_=function(a,b){var c=this;goog.asserts.assert(a.mediaElement,"We should have a media element when loading.");goog.asserts.assert(b.uri,"|has| should have a valid uri when loading.");goog.asserts.assert(!isNaN(b.startTimeOfLoad),"|wants| should tell us when the load was originally requested");goog.asserts.assert(this.video_==a.mediaElement,"The video element should match our media element");a.uri=b.uri;a.startTime=b.startTime;this.assetUri_=a.uri;this.playhead_=new shaka.media.SrcEqualsPlayhead(a.mediaElement);\nnull!=a.startTime&&this.playhead_.setStartTime(a.startTime);this.playRateController_=new shaka.media.PlayRateController({getRate:function(){return a.mediaElement.playbackRate},getDefaultRate:function(){return a.mediaElement.defaultPlaybackRate},setRate:function(g){a.mediaElement.playbackRate=g},movePlayhead:function(g){a.mediaElement.currentTime+=g}});this.startBufferManagement_(this.config_.streaming.rebufferingGoal);var d=function(){return c.updateStateHistory_()};this.eventManager_.listen(a.mediaElement,\n"playing",d);this.eventManager_.listen(a.mediaElement,"pause",d);this.eventManager_.listen(a.mediaElement,"ended",d);this.eventManager_.listen(a.mediaElement,"ratechange",function(){return c.onRateChange_()});"none"!=this.video_.preload&&this.eventManager_.listenOnce(this.video_,"loadedmetadata",function(){var g=Date.now()/1E3-b.startTimeOfLoad;c.stats_.setLoadLatency(g)});this.video_.audioTracks&&(this.eventManager_.listen(this.video_.audioTracks,"addtrack",function(){return c.onTracksChanged_()}),\nthis.eventManager_.listen(this.video_.audioTracks,"removetrack",function(){return c.onTracksChanged_()}),this.eventManager_.listen(this.video_.audioTracks,"change",function(){return c.onTracksChanged_()}));this.video_.textTracks&&(this.eventManager_.listen(this.video_.textTracks,"addtrack",function(g){c.onTracksChanged_();c.processTimedMetadataSrcEqls_(g)}),this.eventManager_.listen(this.video_.textTracks,"removetrack",function(){return c.onTracksChanged_()}),this.eventManager_.listen(this.video_.textTracks,\n"change",function(){return c.onTracksChanged_()}));a.mediaElement.src=a.uri;(shaka.util.Platform.isTizen()||shaka.util.Platform.isWebOS())&&a.mediaElement.load();this.loadMode_=shaka.Player.LoadMode.SRC_EQUALS;this.dispatchEvent(this.makeEvent_(shaka.Player.EventName.Streaming));var e=new shaka.util.PublicPromise;shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){e.resolve()});var f=!1;this.cleanupOnUnload_.push(function(){f=!0});\nshaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_CURRENT_DATA,this.eventManager_,function(){var g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(f)return h["return"]();c.setupPreferredAudioOnSrc_();g=c.getFilteredTextTracks_();return g.find(function(k){return"disabled"!=k.mode})?h.jumpTo(2):h.yield(new Promise(function(k){c.eventManager_.listenOnce(c.video_.textTracks,"change",k);(new shaka.util.Timer(k)).tickAfter(1)}),2)}if(f)return h["return"]();\nc.setupPreferredTextOnSrc_();h.jumpToEnd()})});this.video_.error?e.reject(this.videoErrorToShakaError_()):"none"==this.video_.preload&&(shaka.log.alwaysWarn(\'With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.\'),e.resolve());this.eventManager_.listenOnce(this.video_,"error",function(){e.reject(c.videoErrorToShakaError_())});\nreturn new shaka.util.AbortableOperation(e,function(){var g=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);e.reject(g);return Promise.resolve()})};shaka.Player.prototype.setupPreferredAudioOnSrc_=function(){var a=this.config_.preferredAudioLanguage;if(""!=a){this.selectAudioLanguage(a);var b=this.config_.preferredVariantRole;""!=b&&this.selectAudioLanguage(a,b)}};\nshaka.Player.prototype.setupPreferredTextOnSrc_=function(){var a=this.config_.preferredTextLanguage,b=this.config_.preferForcedSubs;if(""!=a){this.selectTextLanguage(a,"",b);var c=this.config_.preferredTextRole;""!=c&&this.selectTextLanguage(a,c,b)}};\nshaka.Player.prototype.processTimedMetadataSrcEqls_=function(a){var b=this,c=a.track;goog.asserts.assert(c instanceof TextTrack,"Wrong track type!");"metadata"==c.kind&&(c.mode="hidden",this.eventManager_.listen(c,"cuechange",function(){if(c.activeCues)for(var d=$jscomp.makeIterator(c.activeCues),e=d.next();!e.done;e=d.next())if(e=e.value,b.dispatchMetadataEvent_(e.startTime,e.endTime,e.type,e.value),b.adManager_)b.adManager_.onCueMetadataChange(e.value)}),(new shaka.util.Timer(function(){var d=b.getMetadataTracks_();\nd=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())e.value.mode="hidden"})).tickNow().tickAfter(.5))};shaka.Player.prototype.processTimedMetadataMediaSrc_=function(a,b,c){a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())if(d=d.value,d.data&&d.cueTime&&d.frames){for(var e=d.cueTime+b,f=c,g=$jscomp.makeIterator(d.frames),h=g.next();!h.done;h=g.next())this.dispatchMetadataEvent_(e,f,"ID3",h.value);if(this.adManager_)this.adManager_.onHlsTimedMetadata(d,e)}};\nshaka.Player.prototype.dispatchMetadataEvent_=function(a,b,c,d){goog.asserts.assert(!b||a<=b,"Metadata start time should be less or equal to the end time!");this.dispatchEvent(this.makeEvent_(shaka.Player.EventName.Metadata,{startTime:a,endTime:b,metadataType:c,payload:d}))};\nshaka.Player.filterForAVVariants_=function(a){var b=function(c){return c.video&&c.audio||c.video&&c.video.codecs.includes(",")};a.variants.some(b)&&(shaka.log.debug("Found variant with audio and video content, so filtering out audio-only content."),a.variants=a.variants.filter(b))};shaka.Player.prototype.createDrmEngine=function(a){return new shaka.media.DrmEngine(a,this.config_.drm.updateExpirationTime)};\nshaka.Player.prototype.createNetworkingEngine=function(){var a=this;return new shaka.net.NetworkingEngine(function(b,c){a.abrManager_&&a.abrManager_.segmentDownloaded(b,c)})};shaka.Player.prototype.createPlayhead=function(a){var b=this;goog.asserts.assert(this.manifest_,"Must have manifest");goog.asserts.assert(this.video_,"Must have video");return new shaka.media.MediaSourcePlayhead(this.video_,this.manifest_,this.config_.streaming,a,function(){return b.onSeek_()},function(c){return b.dispatchEvent(c)})};\nshaka.Player.prototype.createPlayheadObserversForMSE_=function(){var a=this;goog.asserts.assert(this.manifest_,"Must have manifest");goog.asserts.assert(this.regionTimeline_,"Must have region timeline");goog.asserts.assert(this.video_,"Must have video element");var b=new shaka.media.RegionObserver(this.regionTimeline_);b.setListeners(function(d,e){a.onRegionEvent_(shaka.Player.EventName.TimelineRegionEnter,d)},function(d,e){a.onRegionEvent_(shaka.Player.EventName.TimelineRegionExit,d)},function(d,\ne){e||(a.onRegionEvent_(shaka.Player.EventName.TimelineRegionEnter,d),a.onRegionEvent_(shaka.Player.EventName.TimelineRegionExit,d))});var c=new shaka.media.PlayheadObserverManager(this.video_);c.manage(b);return c};\nshaka.Player.prototype.startBufferManagement_=function(a){var b=this;goog.asserts.assert(!this.bufferObserver_,"No buffering observer should exist before initialization.");goog.asserts.assert(!this.bufferPoller_,"No buffer timer should exist before initialization.");this.bufferObserver_=new shaka.media.BufferingObserver(1,2);this.bufferObserver_.setState(shaka.media.BufferingObserver.State.STARVING);this.updateBufferingSettings_(a);this.updateBufferState_();this.bufferPoller_=(new shaka.util.Timer(function(){b.pollBufferState_()})).tickEvery(.25)};\nshaka.Player.prototype.updateBufferingSettings_=function(a){this.bufferObserver_.setThresholds(a,Math.min(shaka.Player.TYPICAL_BUFFERING_THRESHOLD_,a/2))};\nshaka.Player.prototype.pollBufferState_=function(){goog.asserts.assert(this.video_,"Need a media element to update the buffering observer");goog.asserts.assert(this.bufferObserver_,"Need a buffering observer to update");switch(this.loadMode_){case shaka.Player.LoadMode.SRC_EQUALS:var a=this.isBufferedToEndSrc_();break;case shaka.Player.LoadMode.MEDIA_SOURCE:a=this.isBufferedToEndMS_();break;default:a=!1}var b=shaka.media.TimeRangesUtils.bufferedAheadOf(this.video_.buffered,this.video_.currentTime);\nthis.bufferObserver_.update(b,a)&&this.updateBufferState_()};shaka.Player.prototype.createMediaSourceEngine=function(a,b,c,d){return new shaka.media.MediaSourceEngine(a,b,c,d)};\nshaka.Player.prototype.createStreamingEngine=function(){var a=this;goog.asserts.assert(this.playhead_&&this.abrManager_&&this.mediaSourceEngine_&&this.manifest_,"Must not be destroyed");return new shaka.media.StreamingEngine(this.manifest_,{getPresentationTime:function(){return a.playhead_.getTime()},getBandwidthEstimate:function(){return a.abrManager_.getBandwidthEstimate()},mediaSourceEngine:this.mediaSourceEngine_,netEngine:this.networkingEngine_,onError:function(b){return a.onError_(b)},onEvent:function(b){return a.dispatchEvent(b)},\nonManifestUpdate:function(){return a.onManifestUpdate_()},onSegmentAppended:function(){return a.onSegmentAppended_()}})};\nshaka.Player.prototype.configure=function(a,b){goog.asserts.assert(this.config_,"Config must not be null!");goog.asserts.assert("object"==typeof a||2==arguments.length,"String configs should have values!");2==arguments.length&&"string"==typeof a&&(a=shaka.util.ConfigUtils.convertToConfigObject(a,b));goog.asserts.assert("object"==typeof a,"Should be an object!");a.manifest&&a.manifest.dash&&"defaultPresentationDelay"in a.manifest.dash&&(shaka.Deprecate.deprecateFeature(4,"manifest.dash.defaultPresentationDelay configuration",\n"Please Use manifest.defaultPresentationDelay instead."),a.manifest.defaultPresentationDelay=a.manifest.dash.defaultPresentationDelay,delete a.manifest.dash.defaultPresentationDelay);a.streaming&&a.streaming.lowLatencyMode&&(void 0==a.streaming.inaccurateManifestTolerance&&(a.streaming.inaccurateManifestTolerance=0),void 0==a.streaming.rebufferingGoal&&(a.streaming.rebufferingGoal=.01));var c=shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,a,this.defaultConfig_());this.applyConfig_();\nreturn c};\nshaka.Player.prototype.applyConfig_=function(){if(this.parser_){var a=shaka.util.ObjectUtils.cloneObject(this.config_.manifest);this.video_&&"AUDIO"===this.video_.nodeName&&(a.disableVideo=!0);this.parser_.configure(a)}this.drmEngine_&&this.drmEngine_.configure(this.config_.drm);if(this.streamingEngine_){this.streamingEngine_.configure(this.config_.streaming);try{this.filterManifestWithRestrictions_(this.manifest_)}catch(c){this.onError_(c)}this.abrManager_&&this.updateAbrManagerVariants_();!(a=this.streamingEngine_.getCurrentVariant())||\na.allowedByApplication&&a.allowedByKeySystem||(shaka.log.debug("Choosing new variant after changing configuration"),this.chooseVariantAndSwitch_())}this.networkingEngine_&&this.networkingEngine_.setForceHTTPS(this.config_.streaming.forceHTTPS);if(this.mediaSourceEngine_&&(a=this.config_.textDisplayFactory,this.lastTextFactory_!=a)){var b=shaka.util.Functional.callFactory(a);this.mediaSourceEngine_.setTextDisplayer(b);this.lastTextFactory_=a;this.streamingEngine_&&this.streamingEngine_.reloadTextStream()}this.abrManager_&&\n(this.abrManager_.configure(this.config_.abr),this.config_.abr.enabled?this.abrManager_.enable():this.abrManager_.disable(),this.onAbrStatusChanged_());this.bufferObserver_&&(a=this.config_.streaming.rebufferingGoal,this.manifest_&&(a=Math.max(a,this.manifest_.minBufferTime)),this.updateBufferingSettings_(a));this.manifest_&&shaka.Player.applyPlayRange_(this.manifest_.presentationTimeline,this.config_.playRangeStart,this.config_.playRangeEnd)};\nshaka.Player.prototype.getConfiguration=function(){goog.asserts.assert(this.config_,"Config must not be null!");var a=this.defaultConfig_();shaka.util.PlayerConfiguration.mergeConfigObjects(a,this.config_,this.defaultConfig_());return a};shaka.Player.prototype.getSharedConfiguration=function(){goog.asserts.assert(this.config_,"Cannot call getSharedConfiguration after call destroy!");return this.config_};\nshaka.Player.prototype.resetConfiguration=function(){goog.asserts.assert(this.config_,"Cannot be destroyed");for(var a in this.config_)delete this.config_[a];shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,this.defaultConfig_(),this.defaultConfig_());this.applyConfig_()};shaka.Player.prototype.getLoadMode=function(){return this.loadMode_};shaka.Player.prototype.getMediaElement=function(){return this.video_};shaka.Player.prototype.getNetworkingEngine=function(){return this.networkingEngine_};\nshaka.Player.prototype.getAssetUri=function(){return this.assetUri_};shaka.Player.prototype.getAdManager=function(){return this.adManager_?this.adManager_:null};shaka.Player.prototype.isLive=function(){return this.manifest_?this.manifest_.presentationTimeline.isLive():this.video_&&this.video_.src?Infinity==this.video_.duration:!1};shaka.Player.prototype.isInProgress=function(){return this.manifest_?this.manifest_.presentationTimeline.isInProgress():!1};\nshaka.Player.prototype.isAudioOnly=function(){if(this.manifest_){var a=this.manifest_.variants;return a.length?!a[0].video:!1}return this.video_&&this.video_.src?this.video_.videoTracks?0==this.video_.videoTracks.length:0==this.video_.videoHeight:!1};shaka.Player.prototype.isLowLatencyMode_=function(){return this.config_.streaming.lowLatencyMode};shaka.Player.prototype.isAutoLowLatencyMode_=function(){return this.config_.streaming.autoLowLatencyMode};\nshaka.Player.prototype.seekRange=function(){if(this.manifest_){var a=this.manifest_.presentationTimeline;return{start:a.getSeekRangeStart(),end:a.getSeekRangeEnd()}}return this.video_&&this.video_.src&&(a=this.video_.seekable,a.length)?{start:a.start(0),end:a.end(a.length-1)}:{start:0,end:0}};shaka.Player.prototype.keySystem=function(){return shaka.media.DrmEngine.keySystem(this.drmInfo())};shaka.Player.prototype.drmInfo=function(){return this.drmEngine_?this.drmEngine_.getDrmInfo():null};\nshaka.Player.prototype.getExpiration=function(){return this.drmEngine_?this.drmEngine_.getExpiration():Infinity};shaka.Player.prototype.getKeyStatuses=function(){return this.drmEngine_?this.drmEngine_.getKeyStatuses():{}};shaka.Player.prototype.isBuffering=function(){var a=shaka.media.BufferingObserver.State;return this.bufferObserver_?this.bufferObserver_.getState()==a.STARVING:!1};\nshaka.Player.prototype.getPlaybackRate=function(){return this.video_?this.playRateController_?this.playRateController_.getRealRate():1:0};\nshaka.Player.prototype.trickPlay=function(a){goog.asserts.assert(0!=a,"Should never set a trick play rate of 0!");0==a?shaka.log.alwaysWarn("A trick play rate of 0 is unsupported!"):(this.video_.paused&&this.video_.play(),this.playRateController_.set(a),this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE&&(this.abrManager_.playbackRateChanged(a),this.streamingEngine_.setTrickPlay(1<Math.abs(a))))};\nshaka.Player.prototype.cancelTrickPlay=function(){var a=this.playRateController_.getDefaultRate();this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS&&this.playRateController_.set(a);this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE&&(this.playRateController_.set(a),this.abrManager_.playbackRateChanged(a),this.streamingEngine_.setTrickPlay(!1))};\nshaka.Player.prototype.getVariantTracks=function(){if(this.manifest_){for(var a=this.streamingEngine_?this.streamingEngine_.getCurrentVariant():null,b=[],c=$jscomp.makeIterator(this.manifest_.variants),d=c.next();!d.done;d=c.next())if(d=d.value,shaka.util.StreamUtils.isPlayable(d)){var e=shaka.util.StreamUtils.variantToTrack(d);e.active=d==a;b.push(e)}return b}return this.video_&&this.video_.audioTracks?Array.from(this.video_.audioTracks).map(function(f){return shaka.util.StreamUtils.html5AudioTrackToTrack(f)}):\n[]};shaka.Player.prototype.getTextTracks=function(){if(this.manifest_){for(var a=this.streamingEngine_?this.streamingEngine_.getCurrentTextStream():null,b=[],c=$jscomp.makeIterator(this.manifest_.textStreams),d=c.next();!d.done;d=c.next()){d=d.value;var e=shaka.util.StreamUtils.textStreamToTrack(d);e.active=d==a;b.push(e)}return b}if(this.video_&&this.video_.src&&this.video_.textTracks){a=this.getFilteredTextTracks_();var f=shaka.util.StreamUtils;return a.map(function(g){return f.html5TextTrackToTrack(g)})}return[]};\nshaka.Player.prototype.getImageTracks=function(){if(this.manifest_){var a=shaka.util.StreamUtils;return this.manifest_.imageStreams.map(function(b){return a.imageStreamToTrack(b)})}return[]};\nshaka.Player.prototype.getThumbnails=function(a,b){var c=this,d,e,f,g,h,k,l,m,n,p,q,r,t,v,u,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress)return c.manifest_?(d=c.manifest_.imageStreams.find(function(x){return x.id==a}))?d.segmentIndex?w.jumpTo(3):w.yield(d.createSegmentIndex(),3):w["return"](null):w.jumpTo(2);if(2!=w.nextAddress){e=d.segmentIndex.find(b);if(null==e)return w["return"](null);f=d.segmentIndex.get(e);g=/(\\d+)x(\\d+)/.exec(d.tilesLayout);if(!g)return shaka.log.warning("Tiles layout does not contain a valid format  (columns x rows)"),\nw["return"](null);h=d.width||0;k=d.height||0;l=parseInt(g[1],10);m=parseInt(g[2],10);n=h/l;p=k/m;r=q=0;t=l*m;1<t&&(v=b-f.startTime,u=f.endTime-f.startTime,y=Math.floor(v*t/u),q=y%l/l*h,r=y%m/m*k);return w["return"]({height:p,positionX:q,positionY:r,uris:f.getUris(),width:n})}return w["return"](null)})};\nshaka.Player.prototype.selectTextTrack=function(a){if(this.manifest_&&this.streamingEngine_){var b=this.manifest_.textStreams.find(function(d){return d.id==a.id});b?b==this.streamingEngine_.getCurrentTextStream()?shaka.log.debug("Text track already selected."):(this.addTextStreamToSwitchHistory_(b,!1),this.streamingEngine_.switchTextStream(b),this.onTextChanged_(),this.currentTextLanguage_=b.language):shaka.log.error("No stream with id",a.id)}else if(this.video_&&this.video_.src&&this.video_.textTracks){b=\nthis.getFilteredTextTracks_();b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next())c=c.value,shaka.util.StreamUtils.html5TrackId(c)==a.id?c.mode=this.isTextVisible_?"showing":"hidden":c.mode="disabled";this.onTextChanged_()}};\nshaka.Player.prototype.selectVariantTrack=function(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;if(this.manifest_&&this.streamingEngine_){this.config_.abr.enabled&&shaka.log.alwaysWarn("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var d=this.manifest_.variants.find(function(e){return e.id==a.id});d?shaka.util.StreamUtils.isPlayable(d)?(this.switchVariant_(d,!1,b,c),this.currentAdaptationSetCriteria_=\nnew shaka.media.ExampleBasedCriteria(d),this.updateAbrManagerVariants_()):shaka.log.error("Unable to switch to restricted track",a.id):shaka.log.error("No variant with id",a.id)}else if(this.video_&&this.video_.audioTracks)for(b=Array.from(this.video_.audioTracks),b=$jscomp.makeIterator(b),c=b.next();!c.done;c=b.next())if(c=c.value,shaka.util.StreamUtils.html5TrackId(c)==a.id){this.switchHtml5Track_(c);break}};shaka.Player.prototype.getAudioLanguagesAndRoles=function(){return shaka.Player.getLanguageAndRolesFrom_(this.getVariantTracks())};\nshaka.Player.prototype.getTextLanguagesAndRoles=function(){return shaka.Player.getLanguageAndRolesFrom_(this.getTextTracks())};shaka.Player.prototype.getAudioLanguages=function(){return Array.from(shaka.Player.getLanguagesFrom_(this.getVariantTracks()))};shaka.Player.prototype.getTextLanguages=function(){return Array.from(shaka.Player.getLanguagesFrom_(this.getTextTracks()))};\nshaka.Player.prototype.selectAudioLanguage=function(a,b){var c=shaka.util.LanguageUtils;if(this.manifest_&&this.playhead_){this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(a,b||"",0,"");if(!this.config_.abr.enabled){c=function(l,m){return l.video||m.video?l.video&&m.video?Math.abs((l.video.height||0)-(m.video.height||0))+Math.abs((l.video.width||0)-(m.video.width||0)):Infinity:0};var d=this.streamingEngine_.getCurrentVariant(),e=this.currentAdaptationSetCriteria_.create(this.manifest_.variants),\nf=null;e=$jscomp.makeIterator(e.values());for(var g=e.next();!g.done;g=e.next())if(g=g.value,!f||c(f,d)>c(g,d))f=g;if(f){c=shaka.util.StreamUtils.variantToTrack(f);this.selectVariantTrack(c,!0);return}}this.chooseVariantAndSwitch_()}else if(this.video_&&this.video_.audioTracks){g=Array.from(this.video_.audioTracks);d=c.normalize(a);e=f=null;g=$jscomp.makeIterator(g);for(var h=g.next();!h.done;h=g.next()){h=h.value;var k=shaka.util.StreamUtils.html5AudioTrackToTrack(h);c.normalize(k.language)==d&&\n(f=h,b?k.roles.includes(b)&&(e=h):0==k.roles.length&&(e=h))}e?this.switchHtml5Track_(e):f&&this.switchHtml5Track_(f)}};\nshaka.Player.prototype.selectTextLanguage=function(a,b,c){c=void 0===c?!1:c;var d=shaka.util.LanguageUtils;if(this.manifest_&&this.playhead_){if(this.currentTextLanguage_=a,this.currentTextRole_=b||"",this.currentTextForced_=c,a=this.chooseTextStream_())a==this.streamingEngine_.getCurrentTextStream()?shaka.log.debug("Text track already selected."):(this.addTextStreamToSwitchHistory_(a,!1),this.shouldStreamText_()&&(this.streamingEngine_.switchTextStream(a),this.onTextChanged_()))}else{var e=d.normalize(a);\n(a=this.getTextTracks().find(function(f){return d.normalize(f.language)==e&&(!b||f.roles.includes(b))&&f.forced==c}))&&this.selectTextTrack(a)}};\nshaka.Player.prototype.selectVariantsByLabel=function(a){if(this.manifest_&&this.playhead_){for(var b=null,c=$jscomp.makeIterator(this.manifest_.variants),d=c.next();!d.done;d=c.next())if(d=d.value,d.audio.label==a){b=d;break}null==b?shaka.log.warning("No variants were found with label: "+a+". Ignoring the request to switch."):(this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(b.language,"",0,a),this.chooseVariantAndSwitch_())}};\nshaka.Player.prototype.isTextTrackVisible=function(){var a=this.isTextVisible_;if(this.mediaSourceEngine_){var b=this.mediaSourceEngine_.getTextDisplayer().isTextVisible();goog.asserts.assert(b==a,"text visibility has fallen out of sync");return b}return this.video_&&this.video_.src&&this.video_.textTracks?this.getFilteredTextTracks_().some(function(c){return"showing"==c.mode}):a};\nshaka.Player.prototype.getFilteredTextTracks_=function(){goog.asserts.assert(this.video_.textTracks,"TextTracks should be valid.");return Array.from(this.video_.textTracks).filter(function(a){return"metadata"!=a.kind&&"chapters"!=a.kind&&a.label!=shaka.Player.TextTrackLabel})};shaka.Player.prototype.getMetadataTracks_=function(){goog.asserts.assert(this.video_.textTracks,"TextTracks should be valid.");return Array.from(this.video_.textTracks).filter(function(a){return"metadata"==a.kind})};\nshaka.Player.prototype.setTextTrackVisibility=function(a){a=!!a;if(this.isTextVisible_!=a){this.isTextVisible_=a;if(this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE)this.mediaSourceEngine_.getTextDisplayer().setTextVisibility(a),this.config_.streaming.alwaysStreamText||(a?this.streamingEngine_.getCurrentTextStream()||(a=shaka.util.StreamUtils.filterStreamsByLanguageAndRole(this.manifest_.textStreams,this.currentTextLanguage_,this.currentTextRole_,this.currentTextForced_),0<a.length&&(this.streamingEngine_.switchTextStream(a[0]),\nthis.onTextChanged_())):this.streamingEngine_.unloadTextStream());else if(this.video_&&this.video_.src&&this.video_.textTracks){var b=this.getFilteredTextTracks_();b=$jscomp.makeIterator(b);for(var c=b.next();!c.done;c=b.next())c=c.value,"disabled"!=c.mode&&(c.mode=a?"showing":"hidden")}this.onTextTrackVisibility_()}};\nshaka.Player.prototype.getPlayheadTimeAsDate=function(){if(!this.isLive())return shaka.log.warning("getPlayheadTimeAsDate is for live streams!"),null;var a=this.walker_.getCurrentPayload(),b=0;if(this.playhead_)b=this.playhead_.getTime();else if(a){if(null==a.startTime)return new Date;b=a.startTime}if(this.manifest_)return a=this.manifest_.presentationTimeline.getPresentationStartTime(),new Date(1E3*(a+b));if(this.video_&&this.video_.getStartDate)return a=this.video_.getStartDate(),isNaN(a.getTime())?\n(shaka.log.warning("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(a.getTime()+1E3*b);shaka.log.warning("No way to get playhead time as Date!");return null};\nshaka.Player.prototype.getPresentationStartTimeAsDate=function(){if(!this.isLive())return shaka.log.warning("getPresentationStartTimeAsDate is for live streams!"),null;if(this.manifest_){var a=this.manifest_.presentationTimeline.getPresentationStartTime();goog.asserts.assert(null!=a,"Presentation start time should not be null!");return new Date(1E3*a)}if(this.video_&&this.video_.getStartDate)return a=this.video_.getStartDate(),isNaN(a.getTime())?(shaka.log.warning("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),\nnull):a;shaka.log.warning("No way to get presentation start time as Date!");return null};shaka.Player.prototype.getBufferedInfo=function(){if(this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE)return this.mediaSourceEngine_.getBufferedInfo();var a={total:[],audio:[],video:[],text:[]};this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS&&(a.total=shaka.media.TimeRangesUtils.getBufferedInfo(this.video_.buffered));return a};\nshaka.Player.prototype.getStats=function(){if(this.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&this.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)return shaka.util.Stats.getEmptyBlob();this.updateStateHistory_();goog.asserts.assert(this.video_,"If we have stats, we should have video_");var a=this.video_,b=a.currentTime/a.duration;isNaN(b)||this.stats_.setCompletionPercent(Math.round(100*b));a.getVideoPlaybackQuality&&(a=a.getVideoPlaybackQuality(),this.stats_.setDroppedFrames(Number(a.droppedVideoFrames),\nNumber(a.totalVideoFrames)),this.stats_.setCorruptedFrames(Number(a.corruptedVideoFrames)));a=this.drmEngine_?this.drmEngine_.getLicenseTime():NaN;this.stats_.setLicenseTime(a);if(this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE){if(a=this.streamingEngine_.getCurrentVariant())b=(this.playRateController_?this.playRateController_.getRealRate():1)*a.bandwidth,this.stats_.setCurrentStreamBandwidth(b);a&&a.video&&this.stats_.setResolution(a.video.width||NaN,a.video.height||NaN);this.isLive()&&(a=this.getPresentationStartTimeAsDate().valueOf()+\n1E3*this.seekRange().end,a=(Date.now()-a)/1E3,this.stats_.setLiveLatency(a));this.manifest_&&this.manifest_.presentationTimeline&&(a=this.manifest_.presentationTimeline.getMaxSegmentDuration(),this.stats_.setMaxSegmentDuration(a));a=this.abrManager_.getBandwidthEstimate();this.stats_.setBandwidthEstimate(a)}return this.stats_.getBlob()};\nshaka.Player.prototype.addTextTrack=function(a,b,c,d,e,f,g){g=void 0===g?!1:g;shaka.Deprecate.deprecateFeature(4,"addTextTrack","Please use an addTextTrackAsync.");if(this.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&this.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)throw shaka.log.error("Must call load() and wait for it to resolve before adding text tracks."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.CONTENT_NOT_LOADED);if(!d){var h=\nshaka.media.ManifestParser.getExtension(a);d={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"}[h];if(!d)throw shaka.log.error("The mimeType has not been provided and it could not be deduced from its extension."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.TEXT_COULD_NOT_GUESS_MIME_TYPE,h);}if(this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS){if("text/vtt"!=\nd)throw shaka.log.error("Only WebVTT is supported when using src="),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.TEXT_ONLY_WEBVTT_SRC_EQUALS,d);g&&(c="forced");d=document.createElement("track");d.src=a;d.label=f||"";d.kind=c;d.srclang=b;this.video_.getAttribute("crossorigin")||this.video_.setAttribute("crossorigin","anonymous");this.video_.appendChild(d);if(d=this.getTextTracks().find(function(l){return l.language==b&&l.label==(f||\n"")&&l.kind==c}))return this.onTracksChanged_(),d;shaka.log.error("Cannot add this text when loaded with src=");throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS);}h=shaka.util.ManifestParserUtils.ContentType;var k=this.manifest_.presentationTimeline.getDuration();if(Infinity==k)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM);\na={id:this.nextExternalStreamId_++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:shaka.media.SegmentIndex.forSingleSegment(0,k,[a]),mimeType:d||"",codecs:e||"",kind:c,encrypted:!1,drmInfos:[],keyIds:new Set,language:b,label:f||null,type:h.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!g,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null};e=shaka.util.MimeUtils.getFullType(a.mimeType,a.codecs);if(!shaka.text.TextEngine.isTypeSupported(e))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,d);this.manifest_.textStreams.push(a);this.onTracksChanged_();return shaka.util.StreamUtils.textStreamToTrack(a)};\nshaka.Player.prototype.addTextTrackAsync=function(a,b,c,d,e,f,g){g=void 0===g?!1:g;var h=this,k,l,m,n,p,q,r,t,v,u,y,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:if(h.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&h.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)throw shaka.log.error("Must call load() and wait for it to resolve before adding text tracks."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.CONTENT_NOT_LOADED);\nif(d){x.jumpTo(2);break}k=shaka.media.ManifestParser.getExtension(a);if(d={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"}[k]){x.jumpTo(3);break}x.setCatchFinallyBlocks(4);goog.asserts.assert(h.networkingEngine_,"Need networking engine.");return x.yield(shaka.media.ManifestParser.getMimeType(a,h.networkingEngine_,h.config_.streaming.retryParameters),6);case 6:d=x.yieldResult;x.leaveTryBlock(3);\nbreak;case 4:x.enterCatchBlock();case 3:if(!d)throw shaka.log.error("The mimeType has not been provided and it could not be deduced from its extension."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.TEXT_COULD_NOT_GUESS_MIME_TYPE,k);case 2:if(h.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS){x.jumpTo(7);break}if("text/vtt"==d){x.jumpTo(8);break}goog.asserts.assert(h.networkingEngine_,"Need networking engine.");return x.yield(h.getTextData_(a,\nh.networkingEngine_,h.config_.streaming.retryParameters),9);case 9:l=x.yieldResult,m=h.convertToWebVTT_(l,d),n=new Blob([m],{type:"text/vtt"}),a=shaka.media.MediaSourceEngine.createObjectURL(n),d="text/vtt";case 8:g&&(c="forced");p=document.createElement("track");p.src=a;p.label=f||"";p.kind=c;p.srclang=b;h.video_.getAttribute("crossorigin")||h.video_.setAttribute("crossorigin","anonymous");h.video_.appendChild(p);q=h.getTextTracks();if(r=q.find(function(z){return z.language==b&&z.label==(f||"")&&\nz.kind==c}))return h.onTracksChanged_(),x["return"](r);shaka.log.error("Cannot add this text when loaded with src=");throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS);case 7:t=shaka.util.ManifestParserUtils.ContentType;v=h.manifest_.presentationTimeline.getDuration();if(Infinity==v)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM);\nu={id:h.nextExternalStreamId_++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:shaka.media.SegmentIndex.forSingleSegment(0,v,[a]),mimeType:d||"",codecs:e||"",kind:c,encrypted:!1,drmInfos:[],keyIds:new Set,language:b,label:f||null,type:t.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!g,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null};y=shaka.util.MimeUtils.getFullType(u.mimeType,u.codecs);w=shaka.text.TextEngine.isTypeSupported(y);\nif(!w)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,d);h.manifest_.textStreams.push(u);h.onTracksChanged_();return x["return"](shaka.util.StreamUtils.textStreamToTrack(u))}})};\nshaka.Player.prototype.getTextData_=function(a,b,c){var d,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return d=shaka.net.NetworkingEngine.RequestType.SEGMENT,e=shaka.net.NetworkingEngine.makeRequest([a],c),e.method="GET",g.yield(b.request(d,e).promise,2);f=g.yieldResult;return g["return"](f.data)})};\nshaka.Player.prototype.convertToWebVTT_=function(a,b){var c=shaka.text.TextEngine.findParser(b);if(c){c=c();var d={periodStart:0,segmentStart:0,segmentEnd:this.video_.duration},e=shaka.util.BufferUtils.toUint8(a);c=c.parseMedia(e,d);return shaka.text.WebVttGenerator.convert(c)}throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,b);};\nshaka.Player.prototype.setMaxHardwareResolution=function(a,b){this.maxHwRes_.width=a;this.maxHwRes_.height=b};shaka.Player.prototype.retryStreaming=function(){return this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE?this.streamingEngine_.retry():!1};\nshaka.Player.prototype.getManifest=function(){shaka.log.alwaysWarn("Shaka Player\'s internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for.");return this.manifest_};shaka.Player.prototype.getManifestParserFactory=function(){return this.parserFactory_};\nshaka.Player.prototype.addVariantToSwitchHistory_=function(a,b){this.stats_.getSwitchHistory().updateCurrentVariant(a,b)};shaka.Player.prototype.addTextStreamToSwitchHistory_=function(a,b){this.stats_.getSwitchHistory().updateCurrentText(a,b)};\nshaka.Player.prototype.defaultConfig_=function(){var a=this,b=shaka.util.PlayerConfiguration.createDefault();b.streaming.failureCallback=function(c){a.defaultStreamingFailureCallback_(c)};b.textDisplayFactory=function(){return a.videoContainer_?new shaka.text.UITextDisplayer(a.video_,a.videoContainer_):new shaka.text.SimpleTextDisplayer(a.video_)};return b};shaka.Player.prototype.setVideoContainer=function(a){this.videoContainer_=a};\nshaka.Player.prototype.defaultStreamingFailureCallback_=function(a){var b=[shaka.util.Error.Code.BAD_HTTP_STATUS,shaka.util.Error.Code.HTTP_ERROR,shaka.util.Error.Code.TIMEOUT];this.isLive()&&b.includes(a.code)&&(a.severity=shaka.util.Error.Severity.RECOVERABLE,shaka.log.warning("Live streaming error.  Retrying automatically..."),this.retryStreaming())};\nshaka.Player.prototype.makeTextStreamsForClosedCaptions_=function(a){for(var b=shaka.util.ManifestParserUtils.ContentType,c=shaka.util.ManifestParserUtils.TextStreamKind,d=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE,e=shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE,f=new Set,g=$jscomp.makeIterator(a.textStreams),h=g.next();!h.done;h=g.next())h=h.value,h.mimeType!=d&&h.mimeType!=e||f.add(h.originalId);g=$jscomp.makeIterator(a.variants);for(h=g.next();!h.done;h=g.next())if((h=h.value.video)&&\nh.closedCaptions)for(var k=$jscomp.makeIterator(h.closedCaptions.keys()),l=k.next();!l.done;l=k.next())if(l=l.value,!f.has(l)){var m=l.startsWith("CC")?d:e,n=new shaka.media.MetaSegmentIndex;m={id:this.nextExternalStreamId_++,originalId:l,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:n,mimeType:m,codecs:"",kind:c.CLOSED_CAPTION,encrypted:!1,drmInfos:[],keyIds:new Set,language:h.closedCaptions.get(l),label:null,type:b.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,\nroles:h.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null};a.textStreams.push(m);f.add(l)}};shaka.Player.prototype.filterManifest_=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(b.filterManifestWithStreamUtils_(a),2);b.filterManifestWithRestrictions_(a);c.jumpToEnd()})};\nshaka.Player.prototype.filterManifestWithStreamUtils_=function(a){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return goog.asserts.assert(a,"Manifest should exist!"),goog.asserts.assert(b.video_,"Must not be destroyed"),c=b.streamingEngine_?b.streamingEngine_.getCurrentVariant():null,d.yield(shaka.util.StreamUtils.filterManifest(b.drmEngine_,c,a,b.config_.useMediaCapabilities),2);b.checkPlayableVariants_(a);d.jumpToEnd()})};\nshaka.Player.prototype.filterManifestWithRestrictions_=function(a){if(this.loadMode_!=shaka.Player.LoadMode.DESTROYED){if(shaka.util.StreamUtils.applyRestrictions(a.variants,this.config_.restrictions,this.maxHwRes_)&&this.streamingEngine_)this.onTracksChanged_();var b=this.drmEngine_?this.drmEngine_.getDrmInfo():null;if(b&&this.drmEngine_.getMediaKeys())for(var c=$jscomp.makeIterator(a.variants),d=c.next();!d.done;d=c.next()){d=d.value;d=(d.video?d.video.drmInfos:[]).concat(d.audio?d.audio.drmInfos:\n[]);d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())if(e=e.value,e.keySystem==b.keySystem){e=$jscomp.makeIterator(e.initData||[]);for(var f=e.next();!f.done;f=e.next())f=f.value,this.drmEngine_.newInitData(f.initDataType,f.initData)}}this.checkRestrictedVariants_(a)}};\nshaka.Player.prototype.filterManifestByCurrentVariant_=function(){goog.asserts.assert(this.manifest_,"Manifest should be valid");goog.asserts.assert(this.streamingEngine_,"StreamingEngine should be valid");var a=this.streamingEngine_?this.streamingEngine_.getCurrentVariant():null;shaka.util.StreamUtils.filterManifestByCurrentVariant(a,this.manifest_);this.checkPlayableVariants_(this.manifest_)};\nshaka.Player.prototype.adjustStartTime_=function(a,b){var c,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return c=a.audio,d=a.video,e=function(k,l){var m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return k?p.yield(k.createSegmentIndex(),2):p["return"](null);m=k.segmentIndex[Symbol.iterator]().seek(l);if(!m)return p["return"](null);n=m.startTime;goog.asserts.assert(n<=l,"Segment should start before target time!");\nreturn p["return"](n)})},h.yield(e(c,b),2);if(3!=h.nextAddress)return f=h.yieldResult,h.yield(e(d,b),3);g=h.yieldResult;return null!=g&&null!=f?h["return"](Math.max(g,f)):null!=g?h["return"](g):null!=f?h["return"](f):h["return"](b)})};\nshaka.Player.prototype.updateBufferState_=function(){var a=this.isBuffering();shaka.log.v2("Player changing buffering state to",a);this.stats_&&this.bufferObserver_&&this.playhead_&&(this.playRateController_.setBuffering(a),this.updateStateHistory_());this.dispatchEvent(this.makeEvent_(shaka.Player.EventName.Buffering,{buffering:a}))};\nshaka.Player.prototype.onRateChange_=function(){var a=this.video_.playbackRate;0!=a&&(this.playRateController_&&this.playRateController_.set(a),a=this.makeEvent_(shaka.Player.EventName.RateChange),this.dispatchEvent(a))};\nshaka.Player.prototype.updateStateHistory_=function(){if(this.stats_&&this.bufferObserver_){var a=shaka.media.BufferingObserver.State,b=this.stats_.getStateHistory();this.bufferObserver_.getState()==a.STARVING?b.update("buffering"):this.video_.paused?b.update("paused"):this.video_.ended?b.update("ended"):b.update("playing")}};\nshaka.Player.prototype.onSeek_=function(){this.playheadObservers_&&this.playheadObservers_.notifyOfSeek();this.streamingEngine_&&this.streamingEngine_.seeked();this.bufferObserver_&&this.pollBufferState_()};\nshaka.Player.prototype.updateAbrManagerVariants_=function(){try{goog.asserts.assert(this.manifest_,"Manifest should exist by now!"),this.checkRestrictedVariants_(this.manifest_)}catch(b){return this.onError_(b),!1}var a=this.manifest_.variants.filter(function(b){return shaka.util.StreamUtils.isPlayable(b)});a=this.currentAdaptationSetCriteria_.create(a);this.abrManager_.setVariants(Array.from(a.values()));return!0};\nshaka.Player.prototype.chooseVariant_=function(){return this.updateAbrManagerVariants_()?this.abrManager_.chooseVariant():null};shaka.Player.prototype.chooseTextStream_=function(){return shaka.util.StreamUtils.filterStreamsByLanguageAndRole(this.manifest_.textStreams,this.currentTextLanguage_,this.currentTextRole_,this.currentTextForced_)[0]||null};\nshaka.Player.prototype.chooseVariantAndSwitch_=function(){goog.asserts.assert(this.config_,"Must not be destroyed");var a=this.chooseVariant_();a&&(this.switchVariant_(a,!0,!0,0),this.onAdaptation_())};\nshaka.Player.prototype.switchVariant_=function(a,b,c,d){var e=this.streamingEngine_.getCurrentVariant();a==e?shaka.log.debug("Variant already selected."):(this.addVariantToSwitchHistory_(a,b),this.streamingEngine_.switchVariant(a,c,d),b=null,e&&(b=shaka.util.StreamUtils.variantToTrack(e)),a=shaka.util.StreamUtils.variantToTrack(a),this.onVariantChanged_(b,a))};\nshaka.Player.prototype.switchHtml5Track_=function(a){goog.asserts.assert(this.video_&&this.video_.audioTracks,"Video and video.audioTracks should not be null!");var b=Array.from(this.video_.audioTracks).find(function(c){return c.enabled});a.enabled=!0;b=shaka.util.StreamUtils.html5AudioTrackToTrack(b);a=shaka.util.StreamUtils.html5AudioTrackToTrack(a);this.onVariantChanged_(b,a)};\nshaka.Player.prototype.setInitialTextState_=function(a,b){b?(a.audio&&this.shouldInitiallyShowText_(a.audio,b)&&(this.isTextVisible_=!0),this.isTextVisible_&&(this.mediaSourceEngine_.getTextDisplayer().setTextVisibility(!0),goog.asserts.assert(this.shouldStreamText_(),"Should be streaming text")),this.onTextTrackVisibility_()):this.isTextVisible_=!1};\nshaka.Player.prototype.shouldInitiallyShowText_=function(a,b){var c=shaka.util.LanguageUtils,d=c.normalize(this.config_.preferredTextLanguage),e=c.normalize(a.language),f=c.normalize(b.language);return c.areLanguageCompatible(f,d)&&!c.areLanguageCompatible(e,f)};shaka.Player.prototype.onManifestUpdate_=function(){this.parser_&&this.parser_.update&&this.parser_.update()};shaka.Player.prototype.onSegmentAppended_=function(){this.playhead_&&this.playhead_.notifyOfBufferingChange();this.pollBufferState_()};\nshaka.Player.prototype.switch_=function(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;shaka.log.debug("switch_");goog.asserts.assert(this.config_.abr.enabled,"AbrManager should not call switch while disabled!");goog.asserts.assert(this.manifest_,"We need a manifest to switch variants.");this.streamingEngine_&&a!=this.streamingEngine_.getCurrentVariant()&&(this.addVariantToSwitchHistory_(a,!0),this.streamingEngine_.switchVariant(a,b,c),this.onAdaptation_())};\nshaka.Player.prototype.onAdaptation_=function(){var a=this.makeEvent_(shaka.Player.EventName.Adaptation);this.delayDispatchEvent_(a)};shaka.Player.prototype.onTracksChanged_=function(){var a=this.makeEvent_(shaka.Player.EventName.TracksChanged);this.delayDispatchEvent_(a)};shaka.Player.prototype.onVariantChanged_=function(a,b){var c=this.makeEvent_(shaka.Player.EventName.VariantChanged,{oldTrack:a,newTrack:b});this.delayDispatchEvent_(c)};\nshaka.Player.prototype.onTextChanged_=function(){var a=this.makeEvent_(shaka.Player.EventName.TextChanged);this.delayDispatchEvent_(a)};shaka.Player.prototype.onTextTrackVisibility_=function(){var a=this.makeEvent_(shaka.Player.EventName.TextTrackVisibility);this.delayDispatchEvent_(a)};shaka.Player.prototype.onAbrStatusChanged_=function(){var a=this.makeEvent_(shaka.Player.EventName.AbrStatusChanged,{newStatus:this.config_.abr.enabled});this.delayDispatchEvent_(a)};\nshaka.Player.prototype.onError_=function(a){goog.asserts.assert(a instanceof shaka.util.Error,"Wrong error type!");if(this.loadMode_!=shaka.Player.LoadMode.DESTROYED){var b=this.makeEvent_(shaka.Player.EventName.Error,{detail:a});this.dispatchEvent(b);b.defaultPrevented&&(a.handled=!0)}};shaka.Player.prototype.onRegionEvent_=function(a,b){this.dispatchEvent(this.makeEvent_(a,{detail:{schemeIdUri:b.schemeIdUri,value:b.value,startTime:b.startTime,endTime:b.endTime,id:b.id,eventElement:b.eventElement}}))};\nshaka.Player.prototype.videoErrorToShakaError_=function(){goog.asserts.assert(this.video_.error,"Video error expected, but missing!");if(!this.video_.error)return null;var a=this.video_.error.code;if(1==a)return null;var b=this.video_.error.msExtendedCode;b&&(0>b&&(b+=Math.pow(2,32)),b=b.toString(16));return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.VIDEO_ERROR,a,b,this.video_.error.message)};\nshaka.Player.prototype.onVideoError_=function(a){if(a=this.videoErrorToShakaError_())this.onError_(a)};\nshaka.Player.prototype.onKeyStatus_=function(a){if(this.streamingEngine_){var b=Object.keys(a);0==b.length&&shaka.log.warning("Got a key status event without any key statuses, so we don\'t know the real key statuses. If we don\'t have all the keys, you\'ll need to set restrictions so we don\'t select those tracks.");var c=1==b.length&&"00"==b[0];c&&shaka.log.warning("Got a synthetic key status event, so we don\'t know the real key statuses. If we don\'t have all the keys, you\'ll need to set restrictions so we don\'t select those tracks.");var d=\nshaka.Player.restrictedStatuses_,e=!1;if(b.length){b=$jscomp.makeIterator(this.manifest_.variants);for(var f=b.next();!f.done;f=b.next()){f=f.value;var g=shaka.util.StreamUtils.getVariantStreams(f);g=$jscomp.makeIterator(g);for(var h=g.next();!h.done;h=g.next()){var k=h.value;h=f.allowedByKeySystem;if(k.keyIds.size){f.allowedByKeySystem=!0;k=$jscomp.makeIterator(k.keyIds);for(var l=k.next();!l.done;l=k.next())l=l.value,l=a[c?"00":l],f.allowedByKeySystem=f.allowedByKeySystem&&!!l&&!d.includes(l)}h!=\nf.allowedByKeySystem&&(e=!0)}}}e&&this.updateAbrManagerVariants_();(a=this.streamingEngine_.getCurrentVariant())&&!a.allowedByKeySystem&&(shaka.log.debug("Choosing new streams after key status changed"),this.chooseVariantAndSwitch_());if(e)this.onTracksChanged_()}};shaka.Player.prototype.onExpirationUpdated_=function(a,b){if(this.parser_&&this.parser_.onExpirationUpdated)this.parser_.onExpirationUpdated(a,b);var c=this.makeEvent_(shaka.Player.EventName.ExpirationUpdated);this.dispatchEvent(c)};\nshaka.Player.prototype.shouldStreamText_=function(){return this.config_.streaming.alwaysStreamText||this.isTextTrackVisible()};shaka.Player.applyPlayRange_=function(a,b,c){0<b&&(a.isLive()?shaka.log.warning("|playRangeStart| has been configured for live content. Ignoring the setting."):a.setUserSeekStart(b));b=a.getDuration();c<b&&(a.isLive()?shaka.log.warning("|playRangeEnd| has been configured for live content. Ignoring the setting."):a.setDuration(c))};\nshaka.Player.prototype.checkRestrictedVariants_=function(a){var b=shaka.Player.restrictedStatuses_,c=this.drmEngine_?this.drmEngine_.getKeyStatuses():{},d=Object.keys(c);d=d.length&&"00"==d[0];var e=!1,f=!1,g=new Set,h=new Set;a=$jscomp.makeIterator(a.variants);for(var k=a.next();!k.done;k=a.next()){k=k.value;var l=[];k.audio&&l.push(k.audio);k.video&&l.push(k.video);l=$jscomp.makeIterator(l);for(var m=l.next();!m.done;m=l.next())if(m=m.value,m.keyIds.size){m=$jscomp.makeIterator(m.keyIds);for(var n=\nm.next();!n.done;n=m.next()){n=n.value;var p=c[d?"00":n];p?b.includes(p)&&h.add(p):g.add(n)}}k.allowedByApplication?k.allowedByKeySystem&&(e=!0):f=!0}if(!e)throw b={hasAppRestrictions:f,missingKeys:Array.from(g),restrictedKeyStatuses:Array.from(h)},new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.RESTRICTIONS_CANNOT_BE_MET,b);};\nshaka.Player.prototype.checkPlayableVariants_=function(a){if(!a.variants.some(shaka.util.StreamUtils.isPlayable))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CONTENT_UNSUPPORTED_BY_BROWSER);};\nshaka.Player.prototype.delayDispatchEvent_=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(Promise.resolve(),2);b.loadMode_!=shaka.Player.LoadMode.DESTROYED&&b.dispatchEvent(a);c.jumpToEnd()})};shaka.Player.getLanguagesFrom_=function(a){var b=new Set;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,c.language?b.add(shaka.util.LanguageUtils.normalize(c.language)):b.add("und");return b};\nshaka.Player.getLanguageAndRolesFrom_=function(a){var b=new Map,c=new Map;a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e="und",f=[];d.language&&(e=shaka.util.LanguageUtils.normalize(d.language));(f="variant"==d.type?d.audioRoles:d.roles)&&f.length||(f=[""]);b.has(e)||b.set(e,new Set);f=$jscomp.makeIterator(f);for(var g=f.next();!g.done;g=f.next())g=g.value,b.get(e).add(g),d.label&&(c.has(e)||c.set(e,new Map),c.get(e).set(g,d.label))}var h=[];b.forEach(function(k,\nl){for(var m=$jscomp.makeIterator(k),n=m.next();!n.done;n=m.next()){n=n.value;var p=null;c.has(l)&&c.get(l).has(n)&&(p=c.get(l).get(n));h.push({language:l,role:n,label:p})}});return h};\nshaka.Player.prototype.isBufferedToEndMS_=function(){goog.asserts.assert(this.video_,"We need a video element to get buffering information");goog.asserts.assert(this.mediaSourceEngine_,"We need a media source engine to get buffering information");goog.asserts.assert(this.manifest_,"We need a manifest to get buffering information");if(this.video_.ended||this.mediaSourceEngine_.ended())return!0;if(this.manifest_.presentationTimeline.isLive()){var a=this.manifest_.presentationTimeline.getSegmentAvailabilityEnd(),\nb=shaka.media.TimeRangesUtils.bufferEnd(this.video_.buffered);if(null!=b&&b>=a)return!0}return!1};shaka.Player.prototype.isBufferedToEndSrc_=function(){goog.asserts.assert(this.video_,"We need a video element to get buffering information");if(this.video_.ended)return!0;var a=shaka.media.TimeRangesUtils.bufferEnd(this.video_.buffered);return null!=a&&a>=this.video_.duration-1};\nshaka.Player.prototype.createAbortLoadError_=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.LOAD_INTERRUPTED)};\nshaka.Player.prototype.getNextStep_=function(a,b,c,d){var e=null;a==this.detachNode_&&(e=c==this.detachNode_?this.detachNode_:this.attachNode_);a==this.attachNode_&&(e=this.getNextAfterAttach_(c,b,d));a==this.mediaSourceNode_&&(e=this.getNextAfterMediaSource_(c,b,d));a==this.parserNode_&&(e=this.getNextMatchingAllDependencies_(this.loadNode_,this.manifestNode_,this.unloadNode_,c,b,d));a==this.manifestNode_&&(e=this.getNextMatchingAllDependencies_(this.loadNode_,this.drmNode_,this.unloadNode_,c,b,\nd));a==this.drmNode_&&(e=this.getNextMatchingAllDependencies_(this.loadNode_,this.loadNode_,this.unloadNode_,c,b,d));a==this.srcEqualsDrmNode_&&(e=c==this.srcEqualsNode_&&b.mediaElement==d.mediaElement?this.srcEqualsNode_:this.unloadNode_);if(a==this.loadNode_||a==this.srcEqualsNode_)e=this.unloadNode_;a==this.unloadNode_&&(e=this.getNextAfterUnload_(c,b,d));goog.asserts.assert(e,"Missing next step!");return e};\nshaka.Player.prototype.getNextAfterAttach_=function(a,b,c){return a==this.detachNode_||b.mediaElement!=c.mediaElement?this.detachNode_:a==this.attachNode_?this.attachNode_:a==this.mediaSourceNode_||a==this.loadNode_?this.mediaSourceNode_:a==this.srcEqualsNode_?this.srcEqualsDrmNode_:null};shaka.Player.prototype.getNextAfterMediaSource_=function(a,b,c){return a==this.loadNode_&&b.mediaElement==c.mediaElement?this.parserNode_:this.unloadNode_};\nshaka.Player.prototype.getNextAfterUnload_=function(a,b,c){return c.mediaElement&&b.mediaElement==c.mediaElement?this.attachNode_:this.detachNode_};shaka.Player.prototype.getNextMatchingAllDependencies_=function(a,b,c,d,e,f){return d==a&&e.mediaElement==f.mediaElement&&e.uri==f.uri&&e.mimeType==f.mimeType?b:c};shaka.Player.createEmptyPayload_=function(){return{mediaElement:null,mimeType:null,startTime:null,startTimeOfLoad:NaN,uri:null}};\nshaka.Player.prototype.wrapWalkerListenersWithPromise_=function(a){var b=this;return new Promise(function(c,d){a.onCancel=function(){return d(b.createAbortLoadError_())};a.onEnd=function(){return c()};a.onError=function(e){return d(e)};a.onSkip=function(){return d(b.createAbortLoadError_())}})};goog.exportSymbol("shaka.Player",shaka.Player);goog.exportProperty(shaka.Player.prototype,"setVideoContainer",shaka.Player.prototype.setVideoContainer);\ngoog.exportProperty(shaka.Player.prototype,"getManifestParserFactory",shaka.Player.prototype.getManifestParserFactory);goog.exportProperty(shaka.Player.prototype,"getManifest",shaka.Player.prototype.getManifest);goog.exportProperty(shaka.Player.prototype,"retryStreaming",shaka.Player.prototype.retryStreaming);goog.exportProperty(shaka.Player.prototype,"setMaxHardwareResolution",shaka.Player.prototype.setMaxHardwareResolution);goog.exportProperty(shaka.Player.prototype,"addTextTrackAsync",shaka.Player.prototype.addTextTrackAsync);\ngoog.exportProperty(shaka.Player.prototype,"addTextTrack",shaka.Player.prototype.addTextTrack);goog.exportProperty(shaka.Player.prototype,"getStats",shaka.Player.prototype.getStats);goog.exportProperty(shaka.Player.prototype,"getBufferedInfo",shaka.Player.prototype.getBufferedInfo);goog.exportProperty(shaka.Player.prototype,"getPresentationStartTimeAsDate",shaka.Player.prototype.getPresentationStartTimeAsDate);goog.exportProperty(shaka.Player.prototype,"getPlayheadTimeAsDate",shaka.Player.prototype.getPlayheadTimeAsDate);\ngoog.exportProperty(shaka.Player.prototype,"setTextTrackVisibility",shaka.Player.prototype.setTextTrackVisibility);goog.exportProperty(shaka.Player.prototype,"isTextTrackVisible",shaka.Player.prototype.isTextTrackVisible);goog.exportProperty(shaka.Player.prototype,"selectVariantsByLabel",shaka.Player.prototype.selectVariantsByLabel);goog.exportProperty(shaka.Player.prototype,"selectTextLanguage",shaka.Player.prototype.selectTextLanguage);\ngoog.exportProperty(shaka.Player.prototype,"selectAudioLanguage",shaka.Player.prototype.selectAudioLanguage);goog.exportProperty(shaka.Player.prototype,"getTextLanguages",shaka.Player.prototype.getTextLanguages);goog.exportProperty(shaka.Player.prototype,"getAudioLanguages",shaka.Player.prototype.getAudioLanguages);goog.exportProperty(shaka.Player.prototype,"getTextLanguagesAndRoles",shaka.Player.prototype.getTextLanguagesAndRoles);\ngoog.exportProperty(shaka.Player.prototype,"getAudioLanguagesAndRoles",shaka.Player.prototype.getAudioLanguagesAndRoles);goog.exportProperty(shaka.Player.prototype,"selectVariantTrack",shaka.Player.prototype.selectVariantTrack);goog.exportProperty(shaka.Player.prototype,"selectTextTrack",shaka.Player.prototype.selectTextTrack);goog.exportProperty(shaka.Player.prototype,"getThumbnails",shaka.Player.prototype.getThumbnails);goog.exportProperty(shaka.Player.prototype,"getImageTracks",shaka.Player.prototype.getImageTracks);\ngoog.exportProperty(shaka.Player.prototype,"getTextTracks",shaka.Player.prototype.getTextTracks);goog.exportProperty(shaka.Player.prototype,"getVariantTracks",shaka.Player.prototype.getVariantTracks);goog.exportProperty(shaka.Player.prototype,"cancelTrickPlay",shaka.Player.prototype.cancelTrickPlay);goog.exportProperty(shaka.Player.prototype,"trickPlay",shaka.Player.prototype.trickPlay);goog.exportProperty(shaka.Player.prototype,"getPlaybackRate",shaka.Player.prototype.getPlaybackRate);\ngoog.exportProperty(shaka.Player.prototype,"isBuffering",shaka.Player.prototype.isBuffering);goog.exportProperty(shaka.Player.prototype,"getKeyStatuses",shaka.Player.prototype.getKeyStatuses);goog.exportProperty(shaka.Player.prototype,"getExpiration",shaka.Player.prototype.getExpiration);goog.exportProperty(shaka.Player.prototype,"drmInfo",shaka.Player.prototype.drmInfo);goog.exportProperty(shaka.Player.prototype,"keySystem",shaka.Player.prototype.keySystem);\ngoog.exportProperty(shaka.Player.prototype,"seekRange",shaka.Player.prototype.seekRange);goog.exportProperty(shaka.Player.prototype,"isAudioOnly",shaka.Player.prototype.isAudioOnly);goog.exportProperty(shaka.Player.prototype,"isInProgress",shaka.Player.prototype.isInProgress);goog.exportProperty(shaka.Player.prototype,"isLive",shaka.Player.prototype.isLive);goog.exportProperty(shaka.Player.prototype,"getAdManager",shaka.Player.prototype.getAdManager);\ngoog.exportProperty(shaka.Player.prototype,"getAssetUri",shaka.Player.prototype.getAssetUri);goog.exportProperty(shaka.Player.prototype,"getNetworkingEngine",shaka.Player.prototype.getNetworkingEngine);goog.exportProperty(shaka.Player.prototype,"getMediaElement",shaka.Player.prototype.getMediaElement);goog.exportProperty(shaka.Player.prototype,"getLoadMode",shaka.Player.prototype.getLoadMode);goog.exportProperty(shaka.Player.prototype,"resetConfiguration",shaka.Player.prototype.resetConfiguration);\ngoog.exportProperty(shaka.Player.prototype,"getConfiguration",shaka.Player.prototype.getConfiguration);goog.exportProperty(shaka.Player.prototype,"configure",shaka.Player.prototype.configure);goog.exportProperty(shaka.Player.prototype,"load",shaka.Player.prototype.load);goog.exportProperty(shaka.Player.prototype,"unload",shaka.Player.prototype.unload);goog.exportProperty(shaka.Player.prototype,"detach",shaka.Player.prototype.detach);goog.exportProperty(shaka.Player.prototype,"attach",shaka.Player.prototype.attach);\ngoog.exportProperty(shaka.Player,"probeSupport",shaka.Player.probeSupport);goog.exportProperty(shaka.Player,"isBrowserSupported",shaka.Player.isBrowserSupported);goog.exportProperty(shaka.Player,"setAdManagerFactory",shaka.Player.setAdManagerFactory);goog.exportProperty(shaka.Player,"registerSupportPlugin",shaka.Player.registerSupportPlugin);goog.exportProperty(shaka.Player.prototype,"destroy",shaka.Player.prototype.destroy);\nshaka.Player.EventName={AbrStatusChanged:"abrstatuschanged",Adaptation:"adaptation",Buffering:"buffering",DrmSessionUpdate:"drmsessionupdate",Emsg:"emsg",Error:"error",ExpirationUpdated:"expirationupdated",LargeGap:"largegap",Loaded:"loaded",Loading:"loading",ManifestParsed:"manifestparsed",Metadata:"metadata",OnStateChange:"onstatechange",OnStateIdle:"onstateidle",RateChange:"ratechange",SessionDataEvent:"sessiondata",Streaming:"streaming",TextChanged:"textchanged",TextTrackVisibility:"texttrackvisibility",\nTimelineRegionAdded:"timelineregionadded",TimelineRegionEnter:"timelineregionenter",TimelineRegionExit:"timelineregionexit",TracksChanged:"trackschanged",Unloading:"unloading",VariantChanged:"variantchanged"};shaka.Player.LoadMode={DESTROYED:0,NOT_LOADED:1,MEDIA_SOURCE:2,SRC_EQUALS:3};goog.exportProperty(shaka.Player,"LoadMode",shaka.Player.LoadMode);shaka.Player.TYPICAL_BUFFERING_THRESHOLD_=.5;shaka.Player.version="v3.1.0-debug";goog.exportProperty(shaka.Player,"version",shaka.Player.version);shaka.Deprecate.init(shaka.Player.version);\nshaka.Player.restrictedStatuses_=["output-restricted","internal-error"];shaka.Player.supportPlugins_={};shaka.Player.adManagerFactory_=null;shaka.Player.TextTrackLabel="Shaka Player TextTrack";shaka.ads={};shaka.ads.AdsStats=function(){this.loadTimes_=[];this.skipped_=this.playedCompletely_=this.started_=0};shaka.ads.AdsStats.prototype.addLoadTime=function(a){this.loadTimes_.push(a)};shaka.ads.AdsStats.prototype.incrementStarted=function(){this.started_++};shaka.ads.AdsStats.prototype.incrementPlayedCompletely=function(){this.playedCompletely_++};shaka.ads.AdsStats.prototype.incrementSkipped=function(){this.skipped_++};\nshaka.ads.AdsStats.prototype.getBlob=function(){return{loadTimes:this.loadTimes_,started:this.started_,playedCompletely:this.playedCompletely_,skipped:this.skipped_}};shaka.ads.ClientSideAd=function(a,b){var c=this;this.ad_=a;this.manager_=b;this.isPaused_=!1;this.volume_=this.manager_.getVolume();this.eventManager_=new shaka.util.EventManager;this.eventManager_.listen(this.manager_,google.ima.AdEvent.Type.PAUSED,function(){c.isPaused_=!0});this.eventManager_.listen(this.manager_,google.ima.AdEvent.Type.RESUMED,function(){c.isPaused_=!1})};shaka.ads.ClientSideAd.prototype.getDuration=function(){return this.ad_.getDuration()};\nshaka.ads.ClientSideAd.prototype.getMinSuggestedDuration=function(){return this.ad_.getMinSuggestedDuration()};shaka.ads.ClientSideAd.prototype.getRemainingTime=function(){return this.manager_.getRemainingTime()};shaka.ads.ClientSideAd.prototype.isPaused=function(){return this.isPaused_};shaka.ads.ClientSideAd.prototype.isSkippable=function(){return 0<=this.ad_.getSkipTimeOffset()};\nshaka.ads.ClientSideAd.prototype.getTimeUntilSkippable=function(){var a=this.ad_.getSkipTimeOffset();a=this.getRemainingTime()-a;return Math.max(a,0)};shaka.ads.ClientSideAd.prototype.canSkipNow=function(){return this.manager_.getAdSkippableState()};shaka.ads.ClientSideAd.prototype.skip=function(){return this.manager_.skip()};shaka.ads.ClientSideAd.prototype.setPaused=function(a){this.isPaused_=a};shaka.ads.ClientSideAd.prototype.pause=function(){return this.manager_.pause()};\nshaka.ads.ClientSideAd.prototype.play=function(){return this.manager_.resume()};shaka.ads.ClientSideAd.prototype.getVolume=function(){return this.manager_.getVolume()};shaka.ads.ClientSideAd.prototype.setVolume=function(a){return this.manager_.setVolume(a)};shaka.ads.ClientSideAd.prototype.isMuted=function(){return 0==this.manager_.getVolume()};shaka.ads.ClientSideAd.prototype.resize=function(a,b){this.manager_.resize(a,b,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)};\nshaka.ads.ClientSideAd.prototype.setMuted=function(a){a?(this.volume_=this.getVolume(),this.setVolume(0)):this.setVolume(this.volume_)};shaka.ads.ClientSideAd.prototype.getSequenceLength=function(){var a=this.ad_.getAdPodInfo();return null==a?1:a.getTotalAds()};shaka.ads.ClientSideAd.prototype.getPositionInSequence=function(){var a=this.ad_.getAdPodInfo();return null==a?1:a.getAdPosition()};shaka.ads.ClientSideAd.prototype.release=function(){this.manager_=this.ad_=null};\ngoog.exportSymbol("shaka.ads.ClientSideAd",shaka.ads.ClientSideAd);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"release",shaka.ads.ClientSideAd.prototype.release);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getPositionInSequence",shaka.ads.ClientSideAd.prototype.getPositionInSequence);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getSequenceLength",shaka.ads.ClientSideAd.prototype.getSequenceLength);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"setMuted",shaka.ads.ClientSideAd.prototype.setMuted);\ngoog.exportProperty(shaka.ads.ClientSideAd.prototype,"resize",shaka.ads.ClientSideAd.prototype.resize);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isMuted",shaka.ads.ClientSideAd.prototype.isMuted);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"setVolume",shaka.ads.ClientSideAd.prototype.setVolume);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getVolume",shaka.ads.ClientSideAd.prototype.getVolume);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"play",shaka.ads.ClientSideAd.prototype.play);\ngoog.exportProperty(shaka.ads.ClientSideAd.prototype,"pause",shaka.ads.ClientSideAd.prototype.pause);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"skip",shaka.ads.ClientSideAd.prototype.skip);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"canSkipNow",shaka.ads.ClientSideAd.prototype.canSkipNow);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getTimeUntilSkippable",shaka.ads.ClientSideAd.prototype.getTimeUntilSkippable);\ngoog.exportProperty(shaka.ads.ClientSideAd.prototype,"isSkippable",shaka.ads.ClientSideAd.prototype.isSkippable);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isPaused",shaka.ads.ClientSideAd.prototype.isPaused);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getRemainingTime",shaka.ads.ClientSideAd.prototype.getRemainingTime);goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getMinSuggestedDuration",shaka.ads.ClientSideAd.prototype.getMinSuggestedDuration);\ngoog.exportProperty(shaka.ads.ClientSideAd.prototype,"getDuration",shaka.ads.ClientSideAd.prototype.getDuration);shaka.ads.ClientSideAdManager=function(a,b,c,d){var e=this;this.adContainer_=a;this.video_=b;this.requestAdsStartTime_=NaN;this.onEvent_=d;this.ad_=null;this.eventManager_=new shaka.util.EventManager;google.ima.settings.setLocale(c);a=new google.ima.AdDisplayContainer(this.adContainer_,this.video_);a.initialize();this.adsLoader_=new google.ima.AdsLoader(a);this.adsLoader_.getSettings().setPlayerType("shaka-player");this.adsLoader_.getSettings().setPlayerVersion(shaka.Player.version);this.imaAdsManager_=\nnull;this.eventManager_.listenOnce(this.adsLoader_,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(f){e.onAdsManagerLoaded_(f)});this.eventManager_.listen(this.adsLoader_,google.ima.AdErrorEvent.Type.AD_ERROR,function(f){e.onAdError_(f)});this.video_.onended=function(){e.adsLoader_.contentComplete()}};\nshaka.ads.ClientSideAdManager.prototype.requestAds=function(a){goog.asserts.assert(a.adTagUrl||a.adsResponse,"The ad tag needs to be set up before requesting ads, or adsResponse must be filled.");this.requestAdsStartTime_=Date.now()/1E3;this.adsLoader_.requestAds(a)};shaka.ads.ClientSideAdManager.prototype.stop=function(){this.imaAdsManager_&&this.imaAdsManager_.stop();this.adContainer_&&shaka.util.Dom.removeAllChildren(this.adContainer_)};\nshaka.ads.ClientSideAdManager.prototype.onAdError_=function(a){shaka.log.warning("There was an ad error from the IMA SDK: "+a.getError());shaka.log.warning("Resuming playback.");this.onAdComplete_(null);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,{cuepoints:[]}))};\nshaka.ads.ClientSideAdManager.prototype.onAdsManagerLoaded_=function(a){var b=this;goog.asserts.assert(null!=this.video_,"Video should not be null!");var c=Date.now()/1E3-this.requestAdsStartTime_;this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.ADS_LOADED,{loadTime:c}));this.imaAdsManager_=a.getAdsManager(this.video_);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.IMA_AD_MANAGER_LOADED,{imaAdManager:this.imaAdsManager_}));c=this.imaAdsManager_.getCuePoints();if(c.length){a=\n[];c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next())d=new shaka.ads.CuePoint(d.value),a.push(d);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,{cuepoints:a}))}this.addImaEventListeners_();try{this.imaAdsManager_.init(this.video_.offsetWidth,this.video_.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),this.eventManager_.listen(this.video_,"loadeddata",function(){b.imaAdsManager_.resize(b.video_.offsetWidth,\nb.video_.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),this.imaAdsManager_.start()}catch(e){this.onAdComplete_(null)}};\nshaka.ads.ClientSideAdManager.prototype.addImaEventListeners_=function(){var a=this;this.eventManager_.listen(this.imaAdsManager_,google.ima.AdErrorEvent.Type.AD_ERROR,function(b){a.onAdError_(b)});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(b){a.onAdStart_(b)});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.STARTED,function(b){a.onAdStart_(b)});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.FIRST_QUARTILE,\nfunction(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_FIRST_QUARTILE,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.MIDPOINT,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_MIDPOINT,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.THIRD_QUARTILE,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_THIRD_QUARTILE,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,\ngoogle.ima.AdEvent.Type.COMPLETE,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_COMPLETE,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(b){a.onAdComplete_(b)});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(b){a.onAdComplete_(b)});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.SKIPPED,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_SKIPPED,\n{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.VOLUME_CHANGED,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_VOLUME_CHANGED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.VOLUME_MUTED,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_MUTED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.PAUSED,function(b){goog.asserts.assert(null!=\na.ad_,"Ad should not be null!");a.ad_.setPaused(!0);a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_PAUSED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.RESUMED,function(b){goog.asserts.assert(null!=a.ad_,"Ad should not be null!");a.ad_.setPaused(!1);a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_RESUMED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(b){goog.asserts.assert(null!=\na.ad_,"Ad should not be null!");a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_SKIP_STATE_CHANGED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CLICK,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_CLICKED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_PROGRESS,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_PROGRESS,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,\ngoogle.ima.AdEvent.Type.AD_BUFFERING,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_BUFFERING,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.IMPRESSION,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_IMPRESSION,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.DURATION_CHANGE,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_DURATION_CHANGED,{originalEvent:b}))});\nthis.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.USER_CLOSE,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_CLOSED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LOADED,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_LOADED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.ALL_ADS_COMPLETED,\n{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LINEAR_CHANGED,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_LINEAR_CHANGED,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_METADATA,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_METADATA,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LOG,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_RECOVERABLE_ERROR,\n{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_BREAK_READY,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_BREAK_READY,{originalEvent:b}))});this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.INTERACTION,function(b){a.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_INTERACTION,{originalEvent:b}))})};\nshaka.ads.ClientSideAdManager.prototype.onAdStart_=function(a){goog.asserts.assert(this.imaAdsManager_,"Should have an ads manager at this point!");var b=a.getAd();this.ad_=new shaka.ads.ClientSideAd(b,this.imaAdsManager_);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STARTED,{ad:this.ad_,sdkAdObject:b,originalEvent:a}));this.adContainer_.setAttribute("ad-active","true");this.video_.pause()};\nshaka.ads.ClientSideAdManager.prototype.onAdComplete_=function(a){this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED,{originalEvent:a}));this.adContainer_.removeAttribute("ad-active");this.video_.play()};shaka.ads.ServerSideAd=function(a,b){this.ad_=a;this.adProgressData_=null;this.video_=b};shaka.ads.ServerSideAd.prototype.setProgressData=function(a){this.adProgressData_=a};shaka.ads.ServerSideAd.prototype.getDuration=function(){return this.adProgressData_?this.adProgressData_.duration:-1};shaka.ads.ServerSideAd.prototype.getMinSuggestedDuration=function(){return this.getDuration()};\nshaka.ads.ServerSideAd.prototype.getRemainingTime=function(){return this.adProgressData_?this.adProgressData_.duration-this.adProgressData_.currentTime:-1};shaka.ads.ServerSideAd.prototype.isPaused=function(){return this.video_.paused};shaka.ads.ServerSideAd.prototype.isSkippable=function(){return this.ad_.isSkippable()};shaka.ads.ServerSideAd.prototype.getTimeUntilSkippable=function(){var a=this.ad_.getSkipTimeOffset();a=this.getRemainingTime()-a;return Math.max(a,0)};\nshaka.ads.ServerSideAd.prototype.canSkipNow=function(){return 0==this.getTimeUntilSkippable()};shaka.ads.ServerSideAd.prototype.skip=function(){this.video_.currentTime+=this.getRemainingTime()};shaka.ads.ServerSideAd.prototype.pause=function(){return this.video_.pause()};shaka.ads.ServerSideAd.prototype.play=function(){return this.video_.play()};shaka.ads.ServerSideAd.prototype.getVolume=function(){return this.video_.volume};\nshaka.ads.ServerSideAd.prototype.setVolume=function(a){this.video_.volume=a};shaka.ads.ServerSideAd.prototype.isMuted=function(){return this.video_.muted};shaka.ads.ServerSideAd.prototype.resize=function(a,b){};shaka.ads.ServerSideAd.prototype.setMuted=function(a){this.video_.muted=a};shaka.ads.ServerSideAd.prototype.getSequenceLength=function(){var a=this.ad_.getAdPodInfo();return null==a?1:a.getTotalAds()};\nshaka.ads.ServerSideAd.prototype.getPositionInSequence=function(){var a=this.ad_.getAdPodInfo();return null==a?1:a.getAdPosition()};shaka.ads.ServerSideAd.prototype.release=function(){this.video_=this.adProgressData_=this.ad_=null};goog.exportSymbol("shaka.ads.ServerSideAd",shaka.ads.ServerSideAd);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"release",shaka.ads.ServerSideAd.prototype.release);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getPositionInSequence",shaka.ads.ServerSideAd.prototype.getPositionInSequence);\ngoog.exportProperty(shaka.ads.ServerSideAd.prototype,"getSequenceLength",shaka.ads.ServerSideAd.prototype.getSequenceLength);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"setMuted",shaka.ads.ServerSideAd.prototype.setMuted);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"resize",shaka.ads.ServerSideAd.prototype.resize);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isMuted",shaka.ads.ServerSideAd.prototype.isMuted);\ngoog.exportProperty(shaka.ads.ServerSideAd.prototype,"setVolume",shaka.ads.ServerSideAd.prototype.setVolume);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getVolume",shaka.ads.ServerSideAd.prototype.getVolume);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"play",shaka.ads.ServerSideAd.prototype.play);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"pause",shaka.ads.ServerSideAd.prototype.pause);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"skip",shaka.ads.ServerSideAd.prototype.skip);\ngoog.exportProperty(shaka.ads.ServerSideAd.prototype,"canSkipNow",shaka.ads.ServerSideAd.prototype.canSkipNow);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getTimeUntilSkippable",shaka.ads.ServerSideAd.prototype.getTimeUntilSkippable);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isSkippable",shaka.ads.ServerSideAd.prototype.isSkippable);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isPaused",shaka.ads.ServerSideAd.prototype.isPaused);\ngoog.exportProperty(shaka.ads.ServerSideAd.prototype,"getRemainingTime",shaka.ads.ServerSideAd.prototype.getRemainingTime);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getMinSuggestedDuration",shaka.ads.ServerSideAd.prototype.getMinSuggestedDuration);goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getDuration",shaka.ads.ServerSideAd.prototype.getDuration);shaka.ads.ServerSideAdManager=function(a,b,c,d){var e=this;this.adContainer_=a;this.video_=b;this.streamPromise_=null;this.streamRequestStartTime_=NaN;this.onEvent_=d;this.isLiveContent_=!1;this.adProgressData_=this.ad_=this.snapForwardTime_=null;this.backupUrl_="";this.eventManager_=new shaka.util.EventManager;a=new google.ima.dai.api.UiSettings;a.setLocale(c);this.streamManager_=new google.ima.dai.api.StreamManager(this.video_,this.adContainer_,a);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED,\n{imaStreamManager:this.streamManager_}));this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.LOADED,function(f){shaka.log.info("Ad SS Loaded");e.onLoaded_(f)});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.ERROR,function(){shaka.log.info("Ad SS Error");e.onError_()});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){shaka.log.info("Ad Break Started")});this.eventManager_.listen(this.streamManager_,\ngoogle.ima.dai.api.StreamEvent.Type.STARTED,function(f){shaka.log.info("Ad Started");e.onAdStart_(f)});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){shaka.log.info("Ad Break Ended");e.onAdBreakEnded_()});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(f){e.onAdProgress_(f)});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){shaka.log.info("Ad event: First Quartile");\ne.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_FIRST_QUARTILE))});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){shaka.log.info("Ad event: Midpoint");e.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_MIDPOINT))});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){shaka.log.info("Ad event: Third Quartile");e.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_THIRD_QUARTILE))});\nthis.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){shaka.log.info("Ad event: Complete");e.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_COMPLETE));e.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED));e.adContainer_.removeAttribute("ad-active");e.ad_=null});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){shaka.log.info("Ad event: Skipped");e.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_SKIPPED));\ne.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED))});this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(f){shaka.log.info("Ad event: Cue points changed");e.onCuePointsChanged_(f)})};\nshaka.ads.ServerSideAdManager.prototype.streamRequest=function(a,b){if(this.streamPromise_)return Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CURRENT_DAI_REQUEST_NOT_FINISHED));a instanceof google.ima.dai.api.LiveStreamRequest&&(this.isLiveContent_=!0);this.streamPromise_=new shaka.util.PublicPromise;this.streamManager_.requestStream(a);this.backupUrl_=b||"";this.streamRequestStartTime_=Date.now()/1E3;return this.streamPromise_};\nshaka.ads.ServerSideAdManager.prototype.replaceAdTagParameters=function(a){this.streamManager_.replaceAdTagParameters(a)};shaka.ads.ServerSideAdManager.prototype.stop=function(){this.streamManager_.reset();this.backupUrl_="";this.snapForwardTime_=null};shaka.ads.ServerSideAdManager.prototype.onTimedMetadata=function(a,b,c){this.streamManager_.processMetadata(a,b,c)};shaka.ads.ServerSideAdManager.prototype.onCueMetadataChange=function(a){if(a.key&&a.data){var b={};b[a.key]=a.data;this.streamManager_.onTimedMetadata(b)}};\nshaka.ads.ServerSideAdManager.prototype.checkForSnapback_=function(){var a=this.video_.currentTime;if(0!=a){this.streamManager_.streamTimeForContentTime(a);var b=this.streamManager_.previousCuePointForStreamTime(a);b&&!b.played&&(shaka.log.info("Seeking back to the start of the ad break at "+b.start+" and will return to "+a),this.snapForwardTime_=a,this.video_.currentTime=b.start)}};\nshaka.ads.ServerSideAdManager.prototype.onAdStart_=function(a){goog.asserts.assert(this.streamManager_,"Should have a stream manager at this point!");a=a.getAd();this.ad_=new shaka.ads.ServerSideAd(a,this.video_);this.adProgressData_&&this.ad_.setProgressData(this.adProgressData_);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STARTED,{ad:this.ad_}));this.adContainer_.setAttribute("ad-active","true")};\nshaka.ads.ServerSideAdManager.prototype.onAdBreakEnded_=function(){this.adContainer_.removeAttribute("ad-active");var a=this.video_.currentTime;this.snapForwardTime_&&this.snapForwardTime_>a&&(this.video_.currentTime=this.snapForwardTime_,this.snapForwardTime_=null)};\nshaka.ads.ServerSideAdManager.prototype.onLoaded_=function(a){var b=this,c=Date.now()/1E3-this.streamRequestStartTime_;this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.ADS_LOADED,{loadTime:c}));a=a.getStreamData().url;this.streamPromise_.resolve(a);this.streamPromise_=null;this.isLiveContent_||this.eventManager_.listen(this.video_,"seeked",function(){b.checkForSnapback_()})};\nshaka.ads.ServerSideAdManager.prototype.onError_=function(){this.backupUrl_.length?(shaka.log.warning("IMA stream request returned an error. Falling back to the backup asset uri."),this.streamPromise_.resolve(this.backupUrl_)):this.streamPromise_.reject("IMA Stream request returned an error and there was no backup asset uri provided.");this.streamPromise_=null};shaka.ads.ServerSideAdManager.prototype.onAdProgress_=function(a){this.adProgressData_=a.getStreamData().adProgressData;this.ad_&&this.ad_.setProgressData(this.adProgressData_)};\nshaka.ads.ServerSideAdManager.prototype.onCuePointsChanged_=function(a){var b=a.getStreamData();a=[];b=$jscomp.makeIterator(b.cuepoints);for(var c=b.next();!c.done;c=b.next())c=c.value,c=new shaka.ads.CuePoint(c.start,c.end),a.push(c);this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,{cuepoints:a}))};shaka.ads.AdManager=function(){shaka.util.FakeEventTarget.call(this);this.ssAdManager_=this.csAdManager_=null;this.stats_=new shaka.ads.AdsStats;this.locale_=navigator.language};$jscomp.inherits(shaka.ads.AdManager,shaka.util.FakeEventTarget);shaka.ads.AdManager.prototype.setLocale=function(a){this.locale_=a};\nshaka.ads.AdManager.prototype.initClientSide=function(a,b){var c=this;if(!window.google||!google.ima||!google.ima.AdsLoader)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CS_IMA_SDK_MISSING);this.csAdManager_=new shaka.ads.ClientSideAdManager(a,b,this.locale_,function(d){if(d&&d.type)switch(d.type){case shaka.ads.AdManager.ADS_LOADED:c.stats_.addLoadTime(d.loadTime);break;case shaka.ads.AdManager.AD_STARTED:c.stats_.incrementStarted();\nbreak;case shaka.ads.AdManager.AD_COMPLETE:c.stats_.incrementPlayedCompletely();break;case shaka.ads.AdManager.AD_SKIPPED:c.stats_.incrementSkipped()}c.dispatchEvent(d)})};shaka.ads.AdManager.prototype.onAssetUnload=function(){this.csAdManager_&&this.csAdManager_.stop();this.dispatchEvent(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED));this.stats_=new shaka.ads.AdsStats};\nshaka.ads.AdManager.prototype.requestClientSideAds=function(a){if(!this.csAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CS_AD_MANAGER_NOT_INITIALIZED);this.csAdManager_.requestAds(a)};\nshaka.ads.AdManager.prototype.initServerSide=function(a,b){var c=this;if(!window.google||!google.ima||!google.ima.dai)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_IMA_SDK_MISSING);this.ssAdManager_=new shaka.ads.ServerSideAdManager(a,b,this.locale_,function(d){if(d&&d.type)switch(d.type){case shaka.ads.AdManager.ADS_LOADED:c.stats_.addLoadTime(d.loadTime);break;case shaka.ads.AdManager.AD_STARTED:c.stats_.incrementStarted();break;\ncase shaka.ads.AdManager.AD_COMPLETE:c.stats_.incrementPlayedCompletely();break;case shaka.ads.AdManager.AD_SKIPPED:c.stats_.incrementSkipped()}c.dispatchEvent(d)})};\nshaka.ads.AdManager.prototype.requestServerSideStream=function(a,b){b=void 0===b?"":b;if(!this.ssAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_AD_MANAGER_NOT_INITIALIZED);a.adTagParameters||(a.adTagParameters={});var c=a.adTagParameters;(c.mpt||c.mpv)&&shaka.log.alwaysWarn(\'You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.\');\na.adTagParameters.mpt="shaka-player";a.adTagParameters.mpv=shaka.Player.version;return this.ssAdManager_.streamRequest(a,b)};\nshaka.ads.AdManager.prototype.replaceServerSideAdTagParameters=function(a){if(!this.ssAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_AD_MANAGER_NOT_INITIALIZED);(a.mpt||a.mpv)&&shaka.log.alwaysWarn(\'You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.\');a.mpt="Shaka Player";a.mpv=shaka.Player.version;this.ssAdManager_.replaceAdTagParameters(a)};\nshaka.ads.AdManager.prototype.getStats=function(){return this.stats_.getBlob()};shaka.ads.AdManager.prototype.onDashTimedMetadata=function(a){if(this.ssAdManager_&&"urn:google:dai:2018"==a.schemeIdUri){var b=a.schemeIdUri,c=a.eventElement?a.eventElement.getAttribute("messageData"):null;this.ssAdManager_.onTimedMetadata(b,c,a.startTime)}};shaka.ads.AdManager.prototype.onHlsTimedMetadata=function(a,b){if(this.ssAdManager_)this.ssAdManager_.onTimedMetadata("ID3",a.data,b);else shaka.log.warning("ID3 metadata processing was called without initializing server side ad logic. Ad-related metadata will not take effect")};\nshaka.ads.AdManager.prototype.onCueMetadataChange=function(a){if(this.ssAdManager_)this.ssAdManager_.onCueMetadataChange(a);else shaka.log.warning("ID3 metadata processing was called without initializing server side ad logic. Ad-related metadata will not take effect")};goog.exportSymbol("shaka.ads.AdManager",shaka.ads.AdManager);goog.exportProperty(shaka.ads.AdManager.prototype,"onCueMetadataChange",shaka.ads.AdManager.prototype.onCueMetadataChange);\ngoog.exportProperty(shaka.ads.AdManager.prototype,"onHlsTimedMetadata",shaka.ads.AdManager.prototype.onHlsTimedMetadata);goog.exportProperty(shaka.ads.AdManager.prototype,"onDashTimedMetadata",shaka.ads.AdManager.prototype.onDashTimedMetadata);goog.exportProperty(shaka.ads.AdManager.prototype,"getStats",shaka.ads.AdManager.prototype.getStats);goog.exportProperty(shaka.ads.AdManager.prototype,"replaceServerSideAdTagParameters",shaka.ads.AdManager.prototype.replaceServerSideAdTagParameters);\ngoog.exportProperty(shaka.ads.AdManager.prototype,"requestServerSideStream",shaka.ads.AdManager.prototype.requestServerSideStream);goog.exportProperty(shaka.ads.AdManager.prototype,"initServerSide",shaka.ads.AdManager.prototype.initServerSide);goog.exportProperty(shaka.ads.AdManager.prototype,"requestClientSideAds",shaka.ads.AdManager.prototype.requestClientSideAds);goog.exportProperty(shaka.ads.AdManager.prototype,"onAssetUnload",shaka.ads.AdManager.prototype.onAssetUnload);\ngoog.exportProperty(shaka.ads.AdManager.prototype,"initClientSide",shaka.ads.AdManager.prototype.initClientSide);goog.exportProperty(shaka.ads.AdManager.prototype,"setLocale",shaka.ads.AdManager.prototype.setLocale);shaka.ads.CuePoint=function(a,b){this.start=a;this.end=void 0===b?null:b};shaka.ads.AdManager.ADS_LOADED="ads-loaded";goog.exportProperty(shaka.ads.AdManager,"ADS_LOADED",shaka.ads.AdManager.ADS_LOADED);shaka.ads.AdManager.AD_STARTED="ad-started";\ngoog.exportProperty(shaka.ads.AdManager,"AD_STARTED",shaka.ads.AdManager.AD_STARTED);shaka.ads.AdManager.AD_FIRST_QUARTILE="ad-first-quartile";goog.exportProperty(shaka.ads.AdManager,"AD_FIRST_QUARTILE",shaka.ads.AdManager.AD_FIRST_QUARTILE);shaka.ads.AdManager.AD_MIDPOINT="ad-midpoint";goog.exportProperty(shaka.ads.AdManager,"AD_MIDPOINT",shaka.ads.AdManager.AD_MIDPOINT);shaka.ads.AdManager.AD_THIRD_QUARTILE="ad-third-quartile";goog.exportProperty(shaka.ads.AdManager,"AD_THIRD_QUARTILE",shaka.ads.AdManager.AD_THIRD_QUARTILE);\nshaka.ads.AdManager.AD_COMPLETE="ad-complete";goog.exportProperty(shaka.ads.AdManager,"AD_COMPLETE",shaka.ads.AdManager.AD_COMPLETE);shaka.ads.AdManager.AD_STOPPED="ad-stopped";goog.exportProperty(shaka.ads.AdManager,"AD_STOPPED",shaka.ads.AdManager.AD_STOPPED);shaka.ads.AdManager.AD_SKIPPED="ad-skipped";goog.exportProperty(shaka.ads.AdManager,"AD_SKIPPED",shaka.ads.AdManager.AD_SKIPPED);shaka.ads.AdManager.AD_VOLUME_CHANGED="ad-volume-changed";\ngoog.exportProperty(shaka.ads.AdManager,"AD_VOLUME_CHANGED",shaka.ads.AdManager.AD_VOLUME_CHANGED);shaka.ads.AdManager.AD_MUTED="ad-muted";goog.exportProperty(shaka.ads.AdManager,"AD_MUTED",shaka.ads.AdManager.AD_MUTED);shaka.ads.AdManager.AD_PAUSED="ad-paused";goog.exportProperty(shaka.ads.AdManager,"AD_PAUSED",shaka.ads.AdManager.AD_PAUSED);shaka.ads.AdManager.AD_RESUMED="ad-resumed";goog.exportProperty(shaka.ads.AdManager,"AD_RESUMED",shaka.ads.AdManager.AD_RESUMED);\nshaka.ads.AdManager.AD_SKIP_STATE_CHANGED="ad-skip-state-changed";goog.exportProperty(shaka.ads.AdManager,"AD_SKIP_STATE_CHANGED",shaka.ads.AdManager.AD_SKIP_STATE_CHANGED);shaka.ads.AdManager.CUEPOINTS_CHANGED="ad-cue-points-changed";goog.exportProperty(shaka.ads.AdManager,"CUEPOINTS_CHANGED",shaka.ads.AdManager.CUEPOINTS_CHANGED);shaka.ads.AdManager.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded";goog.exportProperty(shaka.ads.AdManager,"IMA_AD_MANAGER_LOADED",shaka.ads.AdManager.IMA_AD_MANAGER_LOADED);\nshaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded";goog.exportProperty(shaka.ads.AdManager,"IMA_STREAM_MANAGER_LOADED",shaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED);shaka.ads.AdManager.AD_CLICKED="ad-clicked";goog.exportProperty(shaka.ads.AdManager,"AD_CLICKED",shaka.ads.AdManager.AD_CLICKED);shaka.ads.AdManager.AD_PROGRESS="ad-progress";goog.exportProperty(shaka.ads.AdManager,"AD_PROGRESS",shaka.ads.AdManager.AD_PROGRESS);shaka.ads.AdManager.AD_BUFFERING="ad-buffering";\ngoog.exportProperty(shaka.ads.AdManager,"AD_BUFFERING",shaka.ads.AdManager.AD_BUFFERING);shaka.ads.AdManager.AD_IMPRESSION="ad-impression";goog.exportProperty(shaka.ads.AdManager,"AD_IMPRESSION",shaka.ads.AdManager.AD_IMPRESSION);shaka.ads.AdManager.AD_DURATION_CHANGED="ad-duration-changed";goog.exportProperty(shaka.ads.AdManager,"AD_DURATION_CHANGED",shaka.ads.AdManager.AD_DURATION_CHANGED);shaka.ads.AdManager.AD_CLOSED="ad-closed";goog.exportProperty(shaka.ads.AdManager,"AD_CLOSED",shaka.ads.AdManager.AD_CLOSED);\nshaka.ads.AdManager.AD_LOADED="ad-loaded";goog.exportProperty(shaka.ads.AdManager,"AD_LOADED",shaka.ads.AdManager.AD_LOADED);shaka.ads.AdManager.ALL_ADS_COMPLETED="all-ads-completed";goog.exportProperty(shaka.ads.AdManager,"ALL_ADS_COMPLETED",shaka.ads.AdManager.ALL_ADS_COMPLETED);shaka.ads.AdManager.AD_LINEAR_CHANGED="ad-linear-changed";goog.exportProperty(shaka.ads.AdManager,"AD_LINEAR_CHANGED",shaka.ads.AdManager.AD_LINEAR_CHANGED);shaka.ads.AdManager.AD_METADATA="ad-metadata";\ngoog.exportProperty(shaka.ads.AdManager,"AD_METADATA",shaka.ads.AdManager.AD_METADATA);shaka.ads.AdManager.AD_RECOVERABLE_ERROR="ad-recoverable-error";goog.exportProperty(shaka.ads.AdManager,"AD_RECOVERABLE_ERROR",shaka.ads.AdManager.AD_RECOVERABLE_ERROR);shaka.ads.AdManager.AD_BREAK_READY="ad-break-ready";goog.exportProperty(shaka.ads.AdManager,"AD_BREAK_READY",shaka.ads.AdManager.AD_BREAK_READY);shaka.ads.AdManager.AD_INTERACTION="ad-interaction";\ngoog.exportProperty(shaka.ads.AdManager,"AD_INTERACTION",shaka.ads.AdManager.AD_INTERACTION);shaka.Player.setAdManagerFactory(function(){return new shaka.ads.AdManager});shaka.cast={};shaka.cast.CastUtils=function(){};\nshaka.cast.CastUtils.serialize=function(a){return JSON.stringify(a,function(b,c){if("function"!=typeof c){if(c instanceof Event||c instanceof shaka.util.FakeEvent){var d={},e;for(e in c){var f=c[e];f&&"object"==typeof f?"detail"==e&&(d[e]=f):e in Event||(d[e]=f)}return d}return c instanceof Error?shaka.cast.CastUtils.unpackError_(c):c instanceof TimeRanges?shaka.cast.CastUtils.unpackTimeRanges_(c):c instanceof Uint8Array?shaka.cast.CastUtils.unpackUint8Array_(c):"number"==typeof c?isNaN(c)?"NaN":\nisFinite(c)?c:0>c?"-Infinity":"Infinity":c}})};shaka.cast.CastUtils.deserialize=function(a){return JSON.parse(a,function(b,c){return"NaN"==c?NaN:"-Infinity"==c?-Infinity:"Infinity"==c?Infinity:c&&"object"==typeof c&&"TimeRanges"==c.__type__?shaka.cast.CastUtils.simulateTimeRanges_(c):c&&"object"==typeof c&&"Uint8Array"==c.__type__?shaka.cast.CastUtils.makeUint8Array_(c):c&&"object"==typeof c&&"Error"==c.__type__?shaka.cast.CastUtils.makeError_(c):c})};\nshaka.cast.CastUtils.unpackTimeRanges_=function(a){var b={__type__:"TimeRanges",length:a.length,start:[],end:[]};a=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(a));for(var c=a.next();!c.done;c=a.next()){c=c.value;var d=c.end;b.start.push(c.start);b.end.push(d)}return b};shaka.cast.CastUtils.simulateTimeRanges_=function(a){return{length:a.length,start:function(b){return a.start[b]},end:function(b){return a.end[b]}}};\nshaka.cast.CastUtils.unpackUint8Array_=function(a){return{__type__:"Uint8Array",entries:Array.from(a)}};shaka.cast.CastUtils.makeUint8Array_=function(a){return new Uint8Array(a.entries)};\nshaka.cast.CastUtils.unpackError_=function(a){var b=new Set(["name","message","stack"]),c;for(c in a)b.add(c);var d=$jscomp.makeIterator(Object.getOwnPropertyNames(a));for(c=d.next();!c.done;c=d.next())b.add(c.value);d={};b=$jscomp.makeIterator(b);for(c=b.next();!c.done;c=b.next())c=c.value,d[c]=a[c];return{__type__:"Error",contents:d}};shaka.cast.CastUtils.makeError_=function(a){a=a.contents;var b=Error(a.message),c;for(c in a)b[c]=a[c];return b};shaka.cast.CastUtils.VideoEvents="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" ");\nshaka.cast.CastUtils.VideoAttributes="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" ");shaka.cast.CastUtils.VideoInitStateAttributes=["loop","playbackRate"];shaka.cast.CastUtils.VideoVoidMethods=["pause","play"];\nshaka.cast.CastUtils.PlayerGetterMethods={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10};\nshaka.cast.CastUtils.PlayerGetterMethodsThatRequireLive={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20};shaka.cast.CastUtils.PlayerInitState=[["getConfiguration","configure"]];shaka.cast.CastUtils.PlayerInitAfterLoadState=[["isTextTrackVisible","setTextTrackVisibility"]];shaka.cast.CastUtils.PlayerVoidMethods="addTextTrack addTextTrackAsync cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" ");\nshaka.cast.CastUtils.PlayerPromiseMethods=["attach","detach","load","unload"];shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE="urn:x-cast:com.google.shaka.v2";shaka.cast.CastUtils.GENERIC_MESSAGE_NAMESPACE="urn:x-cast:com.google.cast.media";shaka.cast.CastSender=function(a,b,c,d,e,f){var g=this;this.receiverAppId_=a;this.statusChangeTimer_=new shaka.util.Timer(b);this.onFirstCastStateUpdate_=c;this.hasJoinedExistingSession_=!1;this.onRemoteEvent_=d;this.onResumeLocal_=e;this.onInitStateRequired_=f;this.isCasting_=this.apiReady_=!1;this.receiverName_="";this.appData_=null;this.onConnectionStatusChangedBound_=function(){return g.onConnectionStatusChanged_()};this.onMessageReceivedBound_=function(h,k){return g.onMessageReceived_(h,k)};\nthis.cachedProperties_={video:{},player:{}};this.nextAsyncCallId_=0;this.asyncCallPromises_={};this.castPromise_=null;shaka.cast.CastSender.instances_.add(this)};\nshaka.cast.CastSender.prototype.destroy=function(){shaka.cast.CastSender.instances_["delete"](this);this.rejectAllPromises_();shaka.cast.CastSender.session_&&this.removeListeners_();this.statusChangeTimer_&&(this.statusChangeTimer_.stop(),this.statusChangeTimer_=null);this.onResumeLocal_=this.onRemoteEvent_=null;this.isCasting_=this.apiReady_=!1;this.onMessageReceivedBound_=this.onConnectionStatusChangedBound_=this.castPromise_=this.asyncCallPromises_=this.cachedProperties_=this.appData_=null;return Promise.resolve()};\nshaka.cast.CastSender.prototype.apiReady=function(){return this.apiReady_};shaka.cast.CastSender.prototype.hasReceivers=function(){return shaka.cast.CastSender.hasReceivers_};shaka.cast.CastSender.prototype.isCasting=function(){return this.isCasting_};shaka.cast.CastSender.prototype.receiverName=function(){return this.receiverName_};shaka.cast.CastSender.prototype.hasRemoteProperties=function(){return 0!=Object.keys(this.cachedProperties_.video).length};\nshaka.cast.CastSender.prototype.init=function(){var a=shaka.cast.CastSender;if(this.receiverAppId_.length)if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){this.apiReady_=!0;this.statusChangeTimer_.tickNow();var b=new chrome.cast.SessionRequest(this.receiverAppId_);b=new chrome.cast.ApiConfig(b,function(c){return a.onExistingSessionJoined_(c)},function(c){return a.onReceiverStatusChanged_(c)},"origin_scoped");chrome.cast.initialize(b,function(){shaka.log.debug("CastSender: init")},function(c){shaka.log.error("CastSender: init error",\nc)});shaka.cast.CastSender.hasReceivers_&&this.statusChangeTimer_.tickAfter(shaka.cast.CastSender.STATUS_DELAY);(b=shaka.cast.CastSender.session_)&&b.status!=chrome.cast.SessionStatus.STOPPED?(shaka.log.debug("CastSender: re-using existing connection"),this.onExistingSessionJoined_(b)):shaka.cast.CastSender.session_=null}else window.__onGCastApiAvailable||(window.__onGCastApiAvailable=shaka.cast.CastSender.onSdkLoaded_),window.__onGCastApiAvailable!=shaka.cast.CastSender.onSdkLoaded_&&shaka.log.alwaysWarn("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")};\nshaka.cast.CastSender.prototype.setAppData=function(a){this.appData_=a;this.isCasting_&&this.sendMessage_({type:"appData",appData:this.appData_})};\nshaka.cast.CastSender.prototype.cast=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(!b.apiReady_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.CAST,shaka.util.Error.Code.CAST_API_UNAVAILABLE);if(!shaka.cast.CastSender.hasReceivers_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.CAST,shaka.util.Error.Code.NO_CAST_RECEIVERS);if(b.isCasting_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,\nshaka.util.Error.Category.CAST,shaka.util.Error.Code.ALREADY_CASTING);b.castPromise_=new shaka.util.PublicPromise;chrome.cast.requestSession(function(d){return b.onSessionInitiated_(a,d)},function(d){return b.onConnectionError_(d)});return c.yield(b.castPromise_,0)})};shaka.cast.CastSender.prototype.showDisconnectDialog=function(){var a=this;if(this.isCasting_){var b=this.onInitStateRequired_();chrome.cast.requestSession(function(c){return a.onSessionInitiated_(b,c)},function(c){return a.onConnectionError_(c)})}};\nshaka.cast.CastSender.prototype.forceDisconnect=function(){if(this.isCasting_){this.rejectAllPromises_();if(shaka.cast.CastSender.session_){this.removeListeners_();try{shaka.cast.CastSender.session_.stop(function(){},function(){})}catch(a){}shaka.cast.CastSender.session_=null}this.onConnectionStatusChanged_()}};\nshaka.cast.CastSender.prototype.get=function(a,b){var c=this;goog.asserts.assert("video"==a||"player"==a,"Unexpected target name");var d=shaka.cast.CastUtils;if("video"==a){if(d.VideoVoidMethods.includes(b))return function(f){for(var g=[],h=0;h<arguments.length;++h)g[h-0]=arguments[h];return c.remoteCall_.apply(c,[a,b].concat($jscomp.arrayFromIterable(g)))}}else if("player"==a){if(d.PlayerGetterMethodsThatRequireLive[b]){var e=this.get("player","isLive")();goog.asserts.assert(e,b+" should be called on a live stream!");\nif(!e)return function(){}}if(d.PlayerVoidMethods.includes(b))return function(f){for(var g=[],h=0;h<arguments.length;++h)g[h-0]=arguments[h];return c.remoteCall_.apply(c,[a,b].concat($jscomp.arrayFromIterable(g)))};if(d.PlayerPromiseMethods.includes(b))return function(f){for(var g=[],h=0;h<arguments.length;++h)g[h-0]=arguments[h];return c.remoteAsyncCall_.apply(c,[a,b].concat($jscomp.arrayFromIterable(g)))};if(d.PlayerGetterMethods[b])return function(){return c.propertyGetter_(a,b)}}return this.propertyGetter_(a,\nb)};shaka.cast.CastSender.prototype.set=function(a,b,c){goog.asserts.assert("video"==a||"player"==a,"Unexpected target name");this.cachedProperties_[a][b]=c;this.sendMessage_({type:"set",targetName:a,property:b,value:c})};shaka.cast.CastSender.prototype.onSessionInitiated_=function(a,b){shaka.log.debug("CastSender: onSessionInitiated");this.onSessionCreated_(b);this.sendMessage_({type:"init",initState:a,appData:this.appData_});this.castPromise_.resolve()};\nshaka.cast.CastSender.prototype.onConnectionError_=function(a){var b=shaka.util.Error.Code.UNEXPECTED_CAST_ERROR;switch(a.code){case "cancel":b=shaka.util.Error.Code.CAST_CANCELED_BY_USER;break;case "timeout":b=shaka.util.Error.Code.CAST_CONNECTION_TIMED_OUT;break;case "receiver_unavailable":b=shaka.util.Error.Code.CAST_RECEIVER_APP_UNAVAILABLE}this.castPromise_.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.CAST,b,a))};\nshaka.cast.CastSender.prototype.propertyGetter_=function(a,b){goog.asserts.assert("video"==a||"player"==a,"Unexpected target name");return this.cachedProperties_[a][b]};shaka.cast.CastSender.prototype.remoteCall_=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];goog.asserts.assert("video"==a||"player"==a,"Unexpected target name");this.sendMessage_({type:"call",targetName:a,methodName:b,args:d})};\nshaka.cast.CastSender.prototype.remoteAsyncCall_=function(a,b,c){for(var d=[],e=2;e<arguments.length;++e)d[e-2]=arguments[e];goog.asserts.assert("video"==a||"player"==a,"Unexpected target name");e=new shaka.util.PublicPromise;var f=this.nextAsyncCallId_.toString();this.nextAsyncCallId_++;this.asyncCallPromises_[f]=e;try{this.sendMessage_({type:"asyncCall",targetName:a,methodName:b,args:d,id:f})}catch(g){e.reject(g)}return e};\nshaka.cast.CastSender.onExistingSessionJoined_=function(a){for(var b=$jscomp.makeIterator(shaka.cast.CastSender.instances_),c=b.next();!c.done;c=b.next())c.value.onExistingSessionJoined_(a)};shaka.cast.CastSender.prototype.onExistingSessionJoined_=function(a){shaka.log.debug("CastSender: onExistingSessionJoined");var b=this.onInitStateRequired_();this.castPromise_=new shaka.util.PublicPromise;this.hasJoinedExistingSession_=!0;this.onSessionInitiated_(b,a)};\nshaka.cast.CastSender.onReceiverStatusChanged_=function(a){for(var b=$jscomp.makeIterator(shaka.cast.CastSender.instances_),c=b.next();!c.done;c=b.next())c.value.onReceiverStatusChanged_(a)};shaka.cast.CastSender.prototype.onReceiverStatusChanged_=function(a){shaka.log.debug("CastSender: receiver status",a);shaka.cast.CastSender.hasReceivers_="available"==a;this.statusChangeTimer_.tickNow()};\nshaka.cast.CastSender.prototype.onSessionCreated_=function(a){shaka.cast.CastSender.session_=a;a.addUpdateListener(this.onConnectionStatusChangedBound_);a.addMessageListener(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_);this.onConnectionStatusChanged_()};\nshaka.cast.CastSender.prototype.removeListeners_=function(){var a=shaka.cast.CastSender.session_;a.removeUpdateListener(this.onConnectionStatusChangedBound_);a.removeMessageListener(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_)};\nshaka.cast.CastSender.prototype.onConnectionStatusChanged_=function(){var a=shaka.cast.CastSender.session_?"connected"==shaka.cast.CastSender.session_.status:!1;shaka.log.debug("CastSender: connection status",a);if(this.isCasting_&&!a){this.onResumeLocal_();for(var b in this.cachedProperties_)this.cachedProperties_[b]={};this.rejectAllPromises_()}this.receiverName_=(this.isCasting_=a)?shaka.cast.CastSender.session_.receiver.friendlyName:"";this.statusChangeTimer_.tickNow()};\nshaka.cast.CastSender.prototype.rejectAllPromises_=function(){for(var a in this.asyncCallPromises_){var b=this.asyncCallPromises_[a];delete this.asyncCallPromises_[a];b.reject(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.LOAD_INTERRUPTED))}};\nshaka.cast.CastSender.prototype.onMessageReceived_=function(a,b){var c=shaka.cast.CastUtils.deserialize(b);shaka.log.v2("CastSender: message",c);switch(c.type){case "event":var d=c.targetName;c=c.event;c=new shaka.util.FakeEvent(c.type,c);this.onRemoteEvent_(d,c);break;case "update":d=c.update;for(var e in d){c=this.cachedProperties_[e]||{};for(var f in d[e])c[f]=d[e][f]}this.hasJoinedExistingSession_&&(this.onFirstCastStateUpdate_(),this.hasJoinedExistingSession_=!1);break;case "asyncComplete":if(e=\nc.id,c=c.error,f=this.asyncCallPromises_[e],delete this.asyncCallPromises_[e],goog.asserts.assert(f,"Unexpected async id"),f)if(c){e=new shaka.util.Error(c.severity,c.category,c.code);for(d in c)e[d]=c[d];f.reject(e)}else f.resolve()}};\nshaka.cast.CastSender.prototype.sendMessage_=function(a){a=shaka.cast.CastUtils.serialize(a);var b=shaka.cast.CastSender.session_;try{b.sendMessage(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,a,function(){},shaka.log.error)}catch(c){throw shaka.log.error("Cast session sendMessage threw",c),a=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.CAST,shaka.util.Error.Code.CAST_CONNECTION_TIMED_OUT,c),b=new shaka.util.FakeEvent("error",{detail:a}),this.onRemoteEvent_("player",\nb),this.forceDisconnect(),a;}};shaka.cast.CastSender.STATUS_DELAY=.02;shaka.cast.CastSender.hasReceivers_=!1;shaka.cast.CastSender.session_=null;shaka.cast.CastSender.instances_=new Set;shaka.cast.CastSender.onSdkLoaded_=function(a){if(a){a=$jscomp.makeIterator(shaka.cast.CastSender.instances_);for(var b=a.next();!b.done;b=a.next())b.value.init()}};shaka.cast.CastProxy=function(a,b,c){shaka.util.FakeEventTarget.call(this);var d=this;this.localVideo_=a;this.localPlayer_=b;this.eventManager_=this.playerEventTarget_=this.videoEventTarget_=this.playerProxy_=this.videoProxy_=null;this.receiverAppId_=c;this.compiledToExternNames_=new Map;this.sender_=new shaka.cast.CastSender(c,function(){return d.onCastStatusChanged_()},function(){return d.onFirstCastStateUpdate_()},function(e,f){return d.onRemoteEvent_(e,f)},function(){return d.onResumeLocal_()},\nfunction(){return d.getInitState_()});this.init_()};$jscomp.inherits(shaka.cast.CastProxy,shaka.util.FakeEventTarget);shaka.cast.CastProxy.prototype.destroy=function(a){a&&this.sender_.forceDisconnect();this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null);a=[];this.localPlayer_&&(a.push(this.localPlayer_.destroy()),this.localPlayer_=null);this.sender_&&(a.push(this.sender_.destroy()),this.sender_=null);this.playerProxy_=this.videoProxy_=this.localVideo_=null;return Promise.all(a)};\nshaka.cast.CastProxy.prototype.getVideo=function(){return this.videoProxy_};shaka.cast.CastProxy.prototype.getPlayer=function(){return this.playerProxy_};shaka.cast.CastProxy.prototype.canCast=function(){return this.sender_.apiReady()&&this.sender_.hasReceivers()};shaka.cast.CastProxy.prototype.isCasting=function(){return this.sender_.isCasting()};shaka.cast.CastProxy.prototype.receiverName=function(){return this.sender_.receiverName()};\nshaka.cast.CastProxy.prototype.cast=function(){var a=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?(b=a.getInitState_(),c.yield(a.sender_.cast(b),2)):a.localPlayer_?c.yield(a.localPlayer_.unload(),0):c["return"]()})};shaka.cast.CastProxy.prototype.setAppData=function(a){this.sender_.setAppData(a)};shaka.cast.CastProxy.prototype.suggestDisconnect=function(){this.sender_.showDisconnectDialog()};shaka.cast.CastProxy.prototype.forceDisconnect=function(){this.sender_.forceDisconnect()};\nshaka.cast.CastProxy.prototype.changeReceiverId=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress){if(a==b.receiverAppId_)return c["return"]();b.receiverAppId_=a;b.sender_.forceDisconnect();return c.yield(b.sender_.destroy(),2)}b.sender_=null;b.sender_=new shaka.cast.CastSender(a,function(){return b.onCastStatusChanged_()},function(){return b.onFirstCastStateUpdate_()},function(d,e){return b.onRemoteEvent_(d,e)},function(){return b.onResumeLocal_()},\nfunction(){return b.getInitState_()});b.sender_.init();c.jumpToEnd()})};\nshaka.cast.CastProxy.prototype.init_=function(){var a=this;this.sender_.init();this.eventManager_=new shaka.util.EventManager;for(var b=$jscomp.makeIterator(shaka.cast.CastUtils.VideoEvents),c=b.next();!c.done;c=b.next())this.eventManager_.listen(this.localVideo_,c.value,function(f){return a.videoProxyLocalEvent_(f)});for(var d in shaka.Player.EventName)this.eventManager_.listen(this.localPlayer_,shaka.Player.EventName[d],function(f){return a.playerProxyLocalEvent_(f)});this.videoProxy_={};b={};for(var e in this.localVideo_)b.$jscomp$loop$prop$k$583=\ne,Object.defineProperty(this.videoProxy_,b.$jscomp$loop$prop$k$583,{configurable:!1,enumerable:!0,get:function(f){return function(){return a.videoProxyGet_(f.$jscomp$loop$prop$k$583)}}(b),set:function(f){return function(g){a.videoProxySet_(f.$jscomp$loop$prop$k$583,g)}}(b)}),b={$jscomp$loop$prop$k$583:b.$jscomp$loop$prop$k$583};this.playerProxy_={};this.iterateOverPlayerMethods_(function(f,g){goog.asserts.assert(a.playerProxy_,"Must have player proxy!");Object.defineProperty(a.playerProxy_,f,{configurable:!1,\nenumerable:!0,get:function(){return a.playerProxyGet_(f)}})});COMPILED&&this.mapCompiledToUncompiledPlayerMethodNames_();this.videoEventTarget_=new shaka.util.FakeEventTarget;this.videoEventTarget_.dispatchTarget=this.videoProxy_;this.playerEventTarget_=new shaka.util.FakeEventTarget;this.playerEventTarget_.dispatchTarget=this.playerProxy_};\nshaka.cast.CastProxy.prototype.mapCompiledToUncompiledPlayerMethodNames_=function(){var a=this,b=new Map;this.iterateOverPlayerMethods_(function(c,d){if(b.has(d)){var e=b.get(d);c.length<e.length?a.compiledToExternNames_.set(c,e):a.compiledToExternNames_.set(e,c)}else b.set(d,c)})};\nshaka.cast.CastProxy.prototype.iterateOverPlayerMethods_=function(a){function b(k){return"constructor"==k||"function"!=typeof c[k]?!1:!d.has(k)}goog.asserts.assert(this.localPlayer_,"Must have player!");var c=this.localPlayer_,d=new Set;for(e in c)b(e)&&(d.add(e),a(e,c[e]));var e=Object.getPrototypeOf(c);for(var f=Object.getPrototypeOf({});e&&e!=f;){for(var g=$jscomp.makeIterator(Object.getOwnPropertyNames(e)),h=g.next();!h.done;h=g.next())h=h.value,b(h)&&(d.add(h),a(h,c[h]));e=Object.getPrototypeOf(e)}};\nshaka.cast.CastProxy.prototype.getInitState_=function(){var a={video:{},player:{},playerAfterLoad:{},manifest:this.localPlayer_.getAssetUri(),startTime:null};this.localVideo_.pause();for(var b=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes),c=b.next();!c.done;c=b.next())c=c.value,a.video[c]=this.localVideo_[c];this.localVideo_.ended||(a.startTime=this.localVideo_.currentTime);b=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitState);for(c=b.next();!c.done;c=b.next()){var d=\nc.value;c=d[1];d=this.localPlayer_[d[0]]();a.player[c]=d}b=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitAfterLoadState);for(c=b.next();!c.done;c=b.next())d=c.value,c=d[1],d=this.localPlayer_[d[0]](),a.playerAfterLoad[c]=d;return a};shaka.cast.CastProxy.prototype.onCastStatusChanged_=function(){var a=new shaka.util.FakeEvent("caststatuschanged");this.dispatchEvent(a)};\nshaka.cast.CastProxy.prototype.onFirstCastStateUpdate_=function(){var a=new shaka.util.FakeEvent(this.videoProxy_.paused?"pause":"play");this.videoEventTarget_.dispatchEvent(a)};\nshaka.cast.CastProxy.prototype.onResumeLocal_=function(){for(var a=this,b=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitState),c=b.next();!c.done;c=b.next()){var d=c.value;c=d[1];d=this.sender_.get("player",d[0])();this.localPlayer_[c](d)}var e=this.sender_.get("player","getAssetUri")();c=this.sender_.get("video","ended");b=Promise.resolve();var f=this.localVideo_.autoplay;d=null;c||(d=this.sender_.get("video","currentTime"));e&&(this.localVideo_.autoplay=!1,b=this.localPlayer_.load(e,d));var g=\n{};c=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes);for(d=c.next();!d.done;d=c.next())d=d.value,g[d]=this.sender_.get("video",d);b.then(function(){if(a.localVideo_){for(var h=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes),k=h.next();!k.done;k=h.next())k=k.value,a.localVideo_[k]=g[k];h=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitAfterLoadState);for(k=h.next();!k.done;k=h.next()){var l=k.value;k=l[1];l=a.sender_.get("player",l[0])();a.localPlayer_[k](l)}a.localVideo_.autoplay=\nf;e&&a.localVideo_.play()}},function(h){goog.asserts.assert(h instanceof shaka.util.Error,"Wrong error type!");h=new shaka.util.FakeEvent(shaka.Player.EventName.Error,{detail:h});a.localPlayer_.dispatchEvent(h)})};\nshaka.cast.CastProxy.prototype.videoProxyGet_=function(a){var b=this;if("addEventListener"==a)return function(d,e,f){return b.videoEventTarget_.addEventListener(d,e,f)};if("removeEventListener"==a)return function(d,e,f){return b.videoEventTarget_.removeEventListener(d,e,f)};if(this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()){var c=this.localVideo_[a];if("function"!=typeof c)return c}return this.sender_.isCasting()?this.sender_.get("video",a):(a=this.localVideo_[a],"function"==typeof a&&\n(a=a.bind(this.localVideo_)),a)};shaka.cast.CastProxy.prototype.videoProxySet_=function(a,b){this.sender_.isCasting()?this.sender_.set("video",a,b):this.localVideo_[a]=b};shaka.cast.CastProxy.prototype.videoProxyLocalEvent_=function(a){this.sender_.isCasting()||(a=new shaka.util.FakeEvent(a.type,a),this.videoEventTarget_.dispatchEvent(a))};\nshaka.cast.CastProxy.prototype.playerProxyGet_=function(a){var b=this;this.compiledToExternNames_.has(a)&&(a=this.compiledToExternNames_.get(a));if("addEventListener"==a)return function(d,e,f){return b.playerEventTarget_.addEventListener(d,e,f)};if("removeEventListener"==a)return function(d,e,f){return b.playerEventTarget_.removeEventListener(d,e,f)};if("getMediaElement"==a)return function(){return b.videoProxy_};if("getSharedConfiguration"==a)return shaka.log.warning("Can\'t share configuration across a network. Returning copy."),\nthis.sender_.get("player","getConfiguration");if("getNetworkingEngine"==a)return this.sender_.isCasting()&&shaka.log.warning("NOTE: getNetworkingEngine() is always local!"),function(){return b.localPlayer_.getNetworkingEngine()};if("getAdManager"==a)return this.sender_.isCasting()&&shaka.log.warning("NOTE: getAdManager() is always local!"),function(){return b.localPlayer_.getAdManager()};if("setVideoContainer"==a)return this.sender_.isCasting()&&shaka.log.warning("NOTE: setVideoContainer() is always local!"),\nfunction(d){return b.localPlayer_.setVideoContainer(d)};if(this.sender_.isCasting()){if("getManifest"==a||"drmInfo"==a)return function(){shaka.log.alwaysWarn(a+"() does not work while casting!");return null};if("attach"==a||"detach"==a)return function(){shaka.log.alwaysWarn(a+"() does not work while casting!");return Promise.resolve()}}if(this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()&&shaka.cast.CastUtils.PlayerGetterMethods[a]){var c=this.localPlayer_[a];goog.asserts.assert("function"==\ntypeof c,"only methods on Player");return c.bind(this.localPlayer_)}return this.sender_.isCasting()?this.sender_.get("player",a):(c=this.localPlayer_[a],goog.asserts.assert("function"==typeof c,"only methods on Player"),c.bind(this.localPlayer_))};shaka.cast.CastProxy.prototype.playerProxyLocalEvent_=function(a){this.sender_.isCasting()||this.playerEventTarget_.dispatchEvent(a)};\nshaka.cast.CastProxy.prototype.onRemoteEvent_=function(a,b){goog.asserts.assert(this.sender_.isCasting(),"Should only receive remote events while casting");this.sender_.isCasting()&&("video"==a?this.videoEventTarget_.dispatchEvent(b):"player"==a&&this.playerEventTarget_.dispatchEvent(b))};goog.exportSymbol("shaka.cast.CastProxy",shaka.cast.CastProxy);goog.exportProperty(shaka.cast.CastProxy.prototype,"changeReceiverId",shaka.cast.CastProxy.prototype.changeReceiverId);\ngoog.exportProperty(shaka.cast.CastProxy.prototype,"forceDisconnect",shaka.cast.CastProxy.prototype.forceDisconnect);goog.exportProperty(shaka.cast.CastProxy.prototype,"suggestDisconnect",shaka.cast.CastProxy.prototype.suggestDisconnect);goog.exportProperty(shaka.cast.CastProxy.prototype,"setAppData",shaka.cast.CastProxy.prototype.setAppData);goog.exportProperty(shaka.cast.CastProxy.prototype,"cast",shaka.cast.CastProxy.prototype.cast);\ngoog.exportProperty(shaka.cast.CastProxy.prototype,"receiverName",shaka.cast.CastProxy.prototype.receiverName);goog.exportProperty(shaka.cast.CastProxy.prototype,"isCasting",shaka.cast.CastProxy.prototype.isCasting);goog.exportProperty(shaka.cast.CastProxy.prototype,"canCast",shaka.cast.CastProxy.prototype.canCast);goog.exportProperty(shaka.cast.CastProxy.prototype,"getPlayer",shaka.cast.CastProxy.prototype.getPlayer);goog.exportProperty(shaka.cast.CastProxy.prototype,"getVideo",shaka.cast.CastProxy.prototype.getVideo);\ngoog.exportProperty(shaka.cast.CastProxy.prototype,"destroy",shaka.cast.CastProxy.prototype.destroy);shaka.cast.CastReceiver=function(a,b,c,d){shaka.util.FakeEventTarget.call(this);var e=this;this.video_=a;this.player_=b;this.eventManager_=new shaka.util.EventManager;this.targets_={video:a,player:b};this.appDataCallback_=c||function(){};this.contentIdCallback_=d||function(f){return f};this.metadata_=null;this.isConnected_=!1;this.isIdle_=!0;this.updateNumber_=0;this.startUpdatingUpdateNumber_=!1;this.initialStatusUpdatePending_=!0;this.genericBus_=this.shakaBus_=null;this.pollTimer_=new shaka.util.Timer(function(){e.pollAttributes_()});\nthis.init_()};$jscomp.inherits(shaka.cast.CastReceiver,shaka.util.FakeEventTarget);shaka.cast.CastReceiver.prototype.isConnected=function(){return this.isConnected_};shaka.cast.CastReceiver.prototype.isIdle=function(){return this.isIdle_};shaka.cast.CastReceiver.prototype.setContentMetadata=function(a){this.metadata_=a};shaka.cast.CastReceiver.prototype.clearContentMetadata=function(){this.metadata_=null};\nshaka.cast.CastReceiver.prototype.setContentTitle=function(a){this.metadata_||(this.metadata_={metadataType:cast.receiver.media.MetadataType.GENERIC});this.metadata_.title=a};shaka.cast.CastReceiver.prototype.setContentImage=function(a){this.metadata_||(this.metadata_={metadataType:cast.receiver.media.MetadataType.GENERIC});this.metadata_.images=[{url:a}]};\nshaka.cast.CastReceiver.prototype.setContentArtist=function(a){this.metadata_||(this.metadata_={});this.metadata_.artist=a;this.metadata_.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK};\nshaka.cast.CastReceiver.prototype.destroy=function(){var a=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return a.eventManager_&&(a.eventManager_.release(),a.eventManager_=null),b=[],a.player_&&(b.push(a.player_.destroy()),a.player_=null),a.pollTimer_&&(a.pollTimer_.stop(),a.pollTimer_=null),a.video_=null,a.targets_=null,a.appDataCallback_=null,a.isConnected_=!1,a.isIdle_=!0,a.shakaBus_=null,a.genericBus_=null,d.yield(Promise.all(b),2);c=cast.receiver.CastReceiverManager.getInstance();\nc.stop();d.jumpToEnd()})};\nshaka.cast.CastReceiver.prototype.init_=function(){var a=this,b=cast.receiver.CastReceiverManager.getInstance();b.onSenderConnected=function(){return a.onSendersChanged_()};b.onSenderDisconnected=function(){return a.onSendersChanged_()};b.onSystemVolumeChanged=function(){return a.fakeVolumeChangeEvent_()};this.genericBus_=b.getCastMessageBus(shaka.cast.CastUtils.GENERIC_MESSAGE_NAMESPACE);this.genericBus_.onMessage=function(e){return a.onGenericMessage_(e)};this.shakaBus_=b.getCastMessageBus(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE);\nthis.shakaBus_.onMessage=function(e){return a.onShakaMessage_(e)};goog.DEBUG?shaka.util.Platform.isChromecast()&&b.start():b.start();b=$jscomp.makeIterator(shaka.cast.CastUtils.VideoEvents);for(var c=b.next();!c.done;c=b.next())this.eventManager_.listen(this.video_,c.value,function(e){return a.proxyEvent_("video",e)});for(var d in shaka.Player.EventName)this.eventManager_.listen(this.player_,shaka.Player.EventName[d],function(e){return a.proxyEvent_("player",e)});cast.__platform__&&cast.__platform__.canDisplayType(\'video/mp4; codecs="avc1.640028"; width=3840; height=2160\')?\nthis.player_.setMaxHardwareResolution(3840,2160):this.player_.setMaxHardwareResolution(1920,1080);this.eventManager_.listen(this.video_,"loadeddata",function(){a.startUpdatingUpdateNumber_=!0});this.eventManager_.listen(this.player_,"loading",function(){a.isIdle_=!1;a.onCastStatusChanged_()});this.eventManager_.listen(this.video_,"playing",function(){a.isIdle_=!1;a.onCastStatusChanged_()});this.eventManager_.listen(this.video_,"pause",function(){a.onCastStatusChanged_()});this.eventManager_.listen(this.player_,\n"unloading",function(){a.isIdle_=!0;a.onCastStatusChanged_()});this.eventManager_.listen(this.video_,"ended",function(){(new shaka.util.Timer(function(){a.video_&&a.video_.ended&&(a.isIdle_=!0,a.onCastStatusChanged_())})).tickAfter(shaka.cast.CastReceiver.IDLE_INTERVAL)})};shaka.cast.CastReceiver.prototype.onSendersChanged_=function(){this.updateNumber_=0;this.initialStatusUpdatePending_=!0;this.isConnected_=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length;this.onCastStatusChanged_()};\nshaka.cast.CastReceiver.prototype.onCastStatusChanged_=function(){var a=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.yield(Promise.resolve(),2);if(!a.player_)return c["return"]();b=new shaka.util.FakeEvent("caststatuschanged");a.dispatchEvent(b);a.maybeSendMediaInfoMessage_()||a.sendMediaStatus_();c.jumpToEnd()})};\nshaka.cast.CastReceiver.prototype.initState_=function(a,b){var c=this,d,e,f,g,h,k,l,m,n,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:for(d in a.player)e=a.player[d],c.player_[d](e);c.appDataCallback_(b);f=c.video_.autoplay;return a.manifest?(c.video_.autoplay=!1,q.setCatchFinallyBlocks(5),q.yield(c.player_.load(a.manifest,a.startTime),7)):q.yield(Promise.resolve(),3);case 7:q.leaveTryBlock(3);break;case 5:return g=q.enterCatchBlock(),goog.asserts.assert(g instanceof\nshaka.util.Error,"Wrong error type!"),h=shaka.Player.EventName.Error,k=new shaka.util.FakeEvent(h,{detail:g}),c.player_&&c.player_.dispatchEvent(k),q["return"]();case 3:if(!c.player_)return q["return"]();for(l in a.video)m=a.video[l],c.video_[l]=m;for(n in a.playerAfterLoad)p=a.playerAfterLoad[n],c.player_[n](p);c.video_.autoplay=f;a.manifest&&(c.video_.play(),c.sendMediaStatus_());q.jumpToEnd()}})};\nshaka.cast.CastReceiver.prototype.proxyEvent_=function(a,b){this.player_&&(this.pollAttributes_(),this.sendMessage_({type:"event",targetName:a,event:b},this.shakaBus_))};\nshaka.cast.CastReceiver.prototype.pollAttributes_=function(){this.pollTimer_.tickAfter(shaka.cast.CastReceiver.POLL_INTERVAL);for(var a={video:{},player:{}},b=$jscomp.makeIterator(shaka.cast.CastUtils.VideoAttributes),c=b.next();!c.done;c=b.next())c=c.value,a.video[c]=this.video_[c];if(this.player_.isLive()){b=shaka.cast.CastUtils.PlayerGetterMethodsThatRequireLive;for(var d in b)0==this.updateNumber_%b[d]&&(a.player[d]=this.player_[d]())}for(var e in shaka.cast.CastUtils.PlayerGetterMethods)0==this.updateNumber_%\nshaka.cast.CastUtils.PlayerGetterMethods[e]&&(a.player[e]=this.player_[e]());if(d=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())a.video.volume=d.level,a.video.muted=d.muted;this.startUpdatingUpdateNumber_&&(this.updateNumber_+=1);this.sendMessage_({type:"update",update:a},this.shakaBus_);this.maybeSendMediaInfoMessage_()};\nshaka.cast.CastReceiver.prototype.maybeSendMediaInfoMessage_=function(){return this.initialStatusUpdatePending_&&(this.video_.duration||this.player_.isLive())?(this.sendMediaInfoMessage_(),this.initialStatusUpdatePending_=!1,!0):!1};\nshaka.cast.CastReceiver.prototype.sendMediaInfoMessage_=function(a){a=void 0===a?0:a;var b={contentId:this.player_.getAssetUri(),streamType:this.player_.isLive()?"LIVE":"BUFFERED",contentType:""};this.player_.isLive()||(b.duration=this.video_.duration);this.metadata_&&(b.metadata=this.metadata_);this.sendMediaStatus_(a,b)};\nshaka.cast.CastReceiver.prototype.fakeVolumeChangeEvent_=function(){var a=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();goog.asserts.assert(a,"System volume should not be null!");a&&this.sendMessage_({type:"update",update:{video:{volume:a.level,muted:a.muted}}},this.shakaBus_);this.sendMessage_({type:"event",targetName:"video",event:{type:"volumechange"}},this.shakaBus_)};\nshaka.cast.CastReceiver.prototype.onShakaMessage_=function(a){var b=this,c=shaka.cast.CastUtils.deserialize(a.data);shaka.log.debug("CastReceiver: message",c);switch(c.type){case "init":this.updateNumber_=0;this.startUpdatingUpdateNumber_=!1;this.initialStatusUpdatePending_=!0;this.initState_(c.initState,c.appData);this.pollAttributes_();break;case "appData":this.appDataCallback_(c.appData);break;case "set":var d=c.targetName,e=c.property;c=c.value;if("video"==d)if(a=cast.receiver.CastReceiverManager.getInstance(),\n"volume"==e){a.setSystemVolumeLevel(c);break}else if("muted"==e){a.setSystemVolumeMuted(c);break}this.targets_[d][e]=c;break;case "call":d=this.targets_[c.targetName];d[c.methodName].apply(d,c.args);break;case "asyncCall":d=c.targetName;e=c.methodName;"player"==d&&"load"==e&&(this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1);var f=c.id,g=a.senderId;a=this.targets_[d];c=a[e].apply(a,c.args);"player"==d&&"load"==e&&(c=c.then(function(){b.initialStatusUpdatePending_=!0}));c.then(function(){return b.sendAsyncComplete_(g,\nf,null)},function(h){return b.sendAsyncComplete_(g,f,h)})}};\nshaka.cast.CastReceiver.prototype.onGenericMessage_=function(a){var b=this,c=shaka.cast.CastUtils.deserialize(a.data);shaka.log.debug("CastReceiver: message",c);switch(c.type){case "PLAY":this.video_.play();this.sendMediaStatus_();break;case "PAUSE":this.video_.pause();this.sendMediaStatus_();break;case "SEEK":a=c.currentTime;var d=c.resumeState;null!=a&&(this.video_.currentTime=Number(a));d&&"PLAYBACK_START"==d?(this.video_.play(),this.sendMediaStatus_()):d&&"PLAYBACK_PAUSE"==d&&(this.video_.pause(),\nthis.sendMediaStatus_());break;case "STOP":this.player_.unload().then(function(){b.player_&&b.sendMediaStatus_()});break;case "GET_STATUS":this.sendMediaInfoMessage_(Number(c.requestId));break;case "VOLUME":d=c.volume;a=d.level;d=d.muted;var e=this.video_.volume,f=this.video_.muted;null!=a&&(this.video_.volume=Number(a));null!=d&&(this.video_.muted=d);e==this.video_.volume&&f==this.video_.muted||this.sendMediaStatus_();break;case "LOAD":this.updateNumber_=0;this.initialStatusUpdatePending_=this.startUpdatingUpdateNumber_=\n!1;a=c.media;d=c.currentTime;e=this.contentIdCallback_(a.contentId);f=c.autoplay||!0;this.appDataCallback_(a.customData);f&&(this.video_.autoplay=!0);this.player_.load(e,d).then(function(){b.player_&&b.sendMediaInfoMessage_()})["catch"](function(g){goog.asserts.assert(g instanceof shaka.util.Error,"Wrong error type!");var h="LOAD_FAILED";g.category==shaka.util.Error.Category.PLAYER&&g.code==shaka.util.Error.Code.LOAD_INTERRUPTED&&(h="LOAD_CANCELLED");b.sendMessage_({requestId:Number(c.requestId),\ntype:h},b.genericBus_)});break;default:shaka.log.warning("Unrecognized message type from the generic Chromecast controller!",c.type),this.sendMessage_({requestId:Number(c.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.genericBus_)}};shaka.cast.CastReceiver.prototype.sendAsyncComplete_=function(a,b,c){this.player_&&this.sendMessage_({type:"asyncComplete",id:b,error:c},this.shakaBus_,a)};\nshaka.cast.CastReceiver.prototype.sendMessage_=function(a,b,c){this.isConnected_&&(a=shaka.cast.CastUtils.serialize(a),c?b.getCastChannel(c).send(a):b.broadcast(a))};shaka.cast.CastReceiver.prototype.getPlayState_=function(){var a=shaka.cast.CastReceiver.PLAY_STATE;return this.isIdle_?a.IDLE:this.player_.isBuffering()?a.BUFFERING:this.video_.paused?a.PAUSED:a.PLAYING};\nshaka.cast.CastReceiver.prototype.sendMediaStatus_=function(a,b){a=void 0===a?0:a;b=void 0===b?null:b;var c={mediaSessionId:0,playbackRate:this.video_.playbackRate,playerState:this.getPlayState_(),currentTime:this.video_.currentTime,supportedMediaCommands:63,volume:{level:this.video_.volume,muted:this.video_.muted}};b&&(c.media=b);this.sendMessage_({requestId:a,type:"MEDIA_STATUS",status:[c]},this.genericBus_)};goog.exportSymbol("shaka.cast.CastReceiver",shaka.cast.CastReceiver);\ngoog.exportProperty(shaka.cast.CastReceiver.prototype,"destroy",shaka.cast.CastReceiver.prototype.destroy);goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentArtist",shaka.cast.CastReceiver.prototype.setContentArtist);goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentImage",shaka.cast.CastReceiver.prototype.setContentImage);goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentTitle",shaka.cast.CastReceiver.prototype.setContentTitle);\ngoog.exportProperty(shaka.cast.CastReceiver.prototype,"clearContentMetadata",shaka.cast.CastReceiver.prototype.clearContentMetadata);goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentMetadata",shaka.cast.CastReceiver.prototype.setContentMetadata);goog.exportProperty(shaka.cast.CastReceiver.prototype,"isIdle",shaka.cast.CastReceiver.prototype.isIdle);goog.exportProperty(shaka.cast.CastReceiver.prototype,"isConnected",shaka.cast.CastReceiver.prototype.isConnected);\nshaka.cast.CastReceiver.POLL_INTERVAL=.5;shaka.cast.CastReceiver.IDLE_INTERVAL=5;shaka.cast.CastReceiver.PLAY_STATE={IDLE:"IDLE",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED"};shaka.util.Pssh=function(a){var b=this;this.systemIds=[];this.cencKeyIds=[];this.data=[];(new shaka.util.Mp4Parser).box("moov",shaka.util.Mp4Parser.children).fullBox("pssh",function(c){return b.parsePsshBox_(c)}).parse(a);0==this.data.length&&shaka.log.warning("No pssh box found!")};\nshaka.util.Pssh.prototype.parsePsshBox_=function(a){goog.asserts.assert(null!=a.version,"PSSH boxes are full boxes and must have a valid version");goog.asserts.assert(null!=a.flags,"PSSH boxes are full boxes and must have a valid flag");if(1<a.version)shaka.log.warning("Unrecognized PSSH version found!");else{var b=a.reader.getDataView();goog.asserts.assert(12<=b.byteOffset,"DataView at incorrect position");b=shaka.util.BufferUtils.toUint8(b,-12,a.size);this.data.push(b);this.systemIds.push(shaka.util.Uint8ArrayUtils.toHex(a.reader.readBytes(16)));\nif(0<a.version){b=a.reader.readUint32();b=$jscomp.makeIterator(shaka.util.Iterables.range(b));for(var c=b.next();!c.done;c=b.next())shaka.util.Functional.ignored(c.value),c=shaka.util.Uint8ArrayUtils.toHex(a.reader.readBytes(16)),this.cencKeyIds.push(c)}}};\nshaka.util.Pssh.createPssh=function(a,b){goog.asserts.assert(16==b.byteLength,"Invalid system ID length");var c=a.length,d=12+b.length+4+c,e=new Uint8Array(d),f=shaka.util.BufferUtils.toDataView(e),g=0;f.setUint32(g,d);g+=4;f.setUint32(g,1886614376);g+=4;f.setUint32(g,0);g+=4;e.set(b,g);g+=b.length;f.setUint32(g,c);g+=4;e.set(a,g);goog.asserts.assert(g+c===d,"PSSH invalid length.");return e};\nshaka.util.Pssh.normaliseInitData=function(a){if(!a)return a;var b=new shaka.util.Pssh(a);if(1>=b.data.length)return a;a=[];var c={};b=$jscomp.makeIterator(b.data);for(var d=b.next();!d.done;c={$jscomp$loop$prop$initData$490$585:c.$jscomp$loop$prop$initData$490$585},d=b.next())c.$jscomp$loop$prop$initData$490$585=d.value,a.some(function(e){return function(f){return shaka.util.BufferUtils.equal(f,e.$jscomp$loop$prop$initData$490$585)}}(c))||a.push(c.$jscomp$loop$prop$initData$490$585);return shaka.util.Uint8ArrayUtils.concat.apply(shaka.util.Uint8ArrayUtils,\n$jscomp.arrayFromIterable(a))};shaka.util.XmlUtils=function(){};shaka.util.XmlUtils.findChild=function(a,b){var c=shaka.util.XmlUtils.findChildren(a,b);return 1!=c.length?null:c[0]};shaka.util.XmlUtils.findChildNS=function(a,b,c){a=shaka.util.XmlUtils.findChildrenNS(a,b,c);return 1!=a.length?null:a[0]};shaka.util.XmlUtils.findChildren=function(a,b){return Array.from(a.childNodes).filter(function(c){return c instanceof Element&&c.tagName==b})};\nshaka.util.XmlUtils.getChildren=function(a){return Array.from(a.childNodes).filter(function(b){return b instanceof Element})};shaka.util.XmlUtils.findChildrenNS=function(a,b,c){return Array.from(a.childNodes).filter(function(d){return d instanceof Element&&d.localName==c&&d.namespaceURI==b})};shaka.util.XmlUtils.getAttributeNS=function(a,b,c){return a.hasAttributeNS(b,c)?a.getAttributeNS(b,c):null};\nshaka.util.XmlUtils.getContents=function(a){var b=shaka.util.XmlUtils;return Array.from(a.childNodes).every(b.isText)?a.textContent.trim():null};shaka.util.XmlUtils.isText=function(a){return a.nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE};shaka.util.XmlUtils.parseAttr=function(a,b,c,d){d=void 0===d?null:d;var e=null;a=a.getAttribute(b);null!=a&&(e=c(a));return null==e?d:e};\nshaka.util.XmlUtils.parseDate=function(a){if(!a)return null;/^\\d+-\\d+-\\d+T\\d+:\\d+:\\d+(\\.\\d+)?$/.test(a)&&(a+="Z");a=Date.parse(a);return isNaN(a)?null:Math.floor(a/1E3)};\nshaka.util.XmlUtils.parseDuration=function(a){if(!a)return null;var b=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(a);if(!b)return shaka.log.warning("Invalid duration string:",a),null;a=31536E3*Number(b[1]||null)+2592E3*Number(b[2]||null)+86400*Number(b[3]||null)+3600*Number(b[4]||null)+60*Number(b[5]||null)+Number(b[6]||null);return isFinite(a)?a:null};\nshaka.util.XmlUtils.parseRange=function(a){var b=/([0-9]+)-([0-9]+)/.exec(a);if(!b)return null;a=Number(b[1]);if(!isFinite(a))return null;b=Number(b[2]);return isFinite(b)?{start:a,end:b}:null};shaka.util.XmlUtils.parseInt=function(a){a=Number(a);return 0===a%1?a:null};shaka.util.XmlUtils.parsePositiveInt=function(a){a=Number(a);return 0===a%1&&0<a?a:null};shaka.util.XmlUtils.parseNonNegativeInt=function(a){a=Number(a);return 0===a%1&&0<=a?a:null};\nshaka.util.XmlUtils.parseFloat=function(a){a=Number(a);return isNaN(a)?null:a};shaka.util.XmlUtils.evalDivision=function(a){var b;a=(b=a.match(/^(\\d+)\\/(\\d+)$/))?Number(b[1])/Number(b[2]):Number(a);return isNaN(a)?null:a};shaka.util.XmlUtils.parseXmlString=function(a,b){var c=new DOMParser,d=null,e=null;try{e=c.parseFromString(a,"text/xml")}catch(f){}e&&e.documentElement.tagName==b&&(d=e.documentElement);return d&&0<d.getElementsByTagName("parsererror").length?null:d};\nshaka.util.XmlUtils.parseXml=function(a,b){try{var c=shaka.util.StringUtils.fromUTF8(a);return shaka.util.XmlUtils.parseXmlString(c,b)}catch(d){return null}};shaka.dash={};shaka.dash.ContentProtection=function(){};\nshaka.dash.ContentProtection.parseFromAdaptationSet=function(a,b,c){var d=shaka.dash.ContentProtection,e=shaka.util.ManifestParserUtils,f=d.parseElements_(a),g=null;a=[];var h=[],k=new Set(f.map(function(l){return l.keyId}));k["delete"](null);if(1<k.size)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_CONFLICTING_KEY_IDS);b||(h=f.filter(function(l){return l.schemeUri==d.MP4Protection_?(goog.asserts.assert(!l.init||l.init.length,\n"Init data must be null or non-empty."),g=l.init||g,!1):!0}),h.length&&(a=d.convertElements_(g,h,c),0==a.length&&(a=[e.createDrmInfo("",g)])));if(f.length&&(b||!h.length))for(a=[],b=$jscomp.makeIterator(Object.values(c)),c=b.next();!c.done;c=b.next())c=c.value,"org.w3.clearkey"!=c&&(c=e.createDrmInfo(c,g),a.push(c));if(e=Array.from(k)[0]||null)for(k=$jscomp.makeIterator(a),b=k.next();!b.done;b=k.next())for(b=$jscomp.makeIterator(b.value.initData),c=b.next();!c.done;c=b.next())c.value.keyId=e;return{defaultKeyId:e,\ndefaultInit:g,drmInfos:a,firstRepresentation:!0}};\nshaka.dash.ContentProtection.parseFromRepresentation=function(a,b,c,d){var e=shaka.dash.ContentProtection.parseFromAdaptationSet(a,c,d);if(b.firstRepresentation){a=1==b.drmInfos.length&&!b.drmInfos[0].keySystem;c=0==e.drmInfos.length;if(0==b.drmInfos.length||a&&!c)b.drmInfos=e.drmInfos;b.firstRepresentation=!1}else if(0<e.drmInfos.length&&(b.drmInfos=b.drmInfos.filter(function(f){return e.drmInfos.some(function(g){return g.keySystem==f.keySystem})}),0==b.drmInfos.length))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_COMMON_KEY_SYSTEM);return e.defaultKeyId||b.defaultKeyId};shaka.dash.ContentProtection.getWidevineLicenseUrl=function(a){return(a=shaka.util.XmlUtils.findChildNS(a.node,"urn:microsoft","laurl"))?a.getAttribute("licenseUrl")||"":""};\nshaka.dash.ContentProtection.parseMsProRecords_=function(a,b){for(var c=[];b<a.byteLength-1;){var d=a.getUint16(b,!0);b+=2;var e=a.getUint16(b,!0);b+=2;if(0!=(e&1)||e+b>a.byteLength)return shaka.log.warning("Malformed MS PRO object"),[];var f=shaka.util.BufferUtils.toUint8(a,b,e);c.push({type:d,value:f});b+=e}return c};\nshaka.dash.ContentProtection.parseMsPro_=function(a){var b=0,c=shaka.util.BufferUtils.toDataView(a),d=c.getUint32(b,!0);b+=4;return d!=a.byteLength?(shaka.log.warning("PlayReady Object with invalid length encountered."),[]):shaka.dash.ContentProtection.parseMsProRecords_(c,b+2)};\nshaka.dash.ContentProtection.getLaurl_=function(a){a=$jscomp.makeIterator(a.getElementsByTagName("DATA"));for(var b=a.next();!b.done;b=a.next()){b=$jscomp.makeIterator(b.value.childNodes);for(var c=b.next();!c.done;c=b.next())if(c=c.value,c instanceof Element&&"LA_URL"==c.tagName)return c.textContent}return""};\nshaka.dash.ContentProtection.getPlayReadyLicenseUrl=function(a){var b=shaka.util.XmlUtils.findChildNS(a.node,"urn:microsoft:playready","pro");if(!b)return"";a=shaka.dash.ContentProtection;var c=a.PLAYREADY_RECORD_TYPES;b=shaka.util.Uint8ArrayUtils.fromBase64(b.textContent);b=a.parseMsPro_(b).filter(function(d){return d.type===c.RIGHTS_MANAGEMENT})[0];if(!b)return"";b=shaka.util.StringUtils.fromUTF16(b.value,!0);return(b=shaka.util.XmlUtils.parseXmlString(b,"WRMHEADER"))?a.getLaurl_(b):""};\nshaka.dash.ContentProtection.getInitDataFromPro_=function(a){var b=shaka.util.XmlUtils.findChildNS(a.node,"urn:microsoft:playready","pro");if(!b)return null;b=shaka.util.Uint8ArrayUtils.fromBase64(b.textContent);var c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);return[{initData:shaka.util.Pssh.createPssh(b,c),initDataType:"cenc",keyId:a.keyId}]};\nshaka.dash.ContentProtection.convertElements_=function(a,b,c){var d=shaka.dash.ContentProtection,e=shaka.util.ManifestParserUtils,f=d.licenseUrlParsers_,g=[];b=$jscomp.makeIterator(b);for(var h=b.next();!h.done;h=b.next()){h=h.value;var k=c[h.schemeUri];if(k){goog.asserts.assert(!h.init||h.init.length,"Init data must be null or non-empty.");var l=d.getInitDataFromPro_(h);l=e.createDrmInfo(k,h.init||a||l);if(k=f.get(k))l.licenseServerUri=k(h);g.push(l)}}return g};\nshaka.dash.ContentProtection.parseElements_=function(a){var b=[];a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())(c=shaka.dash.ContentProtection.parseElement_(c.value))&&b.push(c);return b};\nshaka.dash.ContentProtection.parseElement_=function(a){var b=shaka.dash.ContentProtection.CencNamespaceUri_,c=a.getAttribute("schemeIdUri"),d=shaka.util.XmlUtils.getAttributeNS(a,b,"default_KID");b=shaka.util.XmlUtils.findChildrenNS(a,b,"pssh").map(shaka.util.XmlUtils.getContents);if(!c)return shaka.log.error("Missing required schemeIdUri attribute on","ContentProtection element",a),null;c=c.toLowerCase();if(d&&(d=d.replace(/-/g,"").toLowerCase(),d.includes(" ")))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED);var e=[];try{e=b.map(function(f){return{initDataType:"cenc",initData:shaka.util.Uint8ArrayUtils.fromBase64(f),keyId:null}})}catch(f){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_PSSH_BAD_ENCODING);}return{node:a,schemeUri:c,keyId:d,init:0<e.length?e:null}};\nshaka.dash.ContentProtection.PLAYREADY_RECORD_TYPES={RIGHTS_MANAGEMENT:1,RESERVED:2,EMBEDDED_LICENSE:3};\nshaka.dash.ContentProtection.licenseUrlParsers_=(new Map).set("com.widevine.alpha",shaka.dash.ContentProtection.getWidevineLicenseUrl).set("com.microsoft.playready",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.recommendation",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.software",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.hardware",shaka.dash.ContentProtection.getPlayReadyLicenseUrl);\nshaka.dash.ContentProtection.MP4Protection_="urn:mpeg:dash:mp4protection:2011";shaka.dash.ContentProtection.CencNamespaceUri_="urn:mpeg:cenc:2013";shaka.dash.MpdUtils=function(){};\nshaka.dash.MpdUtils.fillUriTemplate=function(a,b,c,d,e){var f={RepresentationID:b,Number:c,Bandwidth:d,Time:e};return a.replace(/\\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\\$/g,function(g,h,k,l){if("$$"==g)return"$";var m=f[h];goog.asserts.assert(void 0!==m,"Unrecognized identifier");if(null==m)return shaka.log.warning("URL template does not have an available substitution for ",\'identifier "\'+h+\'":\',a),g;"RepresentationID"==h&&k&&(shaka.log.warning("URL template should not contain a width specifier for identifier",\'"RepresentationID":\',\na),k=void 0);"Time"==h&&(goog.asserts.assert("number"==typeof m,"Time value should be a number!"),goog.asserts.assert(.2>Math.abs(m-Math.round(m)),"Calculated $Time$ values must be close to integers"),m=Math.round(m));switch(l){case void 0:case "d":case "i":case "u":g=m.toString();break;case "o":g=m.toString(8);break;case "x":g=m.toString(16);break;case "X":g=m.toString(16).toUpperCase();break;default:goog.asserts.assert(!1,"Unhandled format specifier"),g=m.toString()}k=window.parseInt(k,10)||1;return Array(Math.max(0,\nk-g.length)+1).join("0")+g})};\nshaka.dash.MpdUtils.createTimeline=function(a,b,c,d){goog.asserts.assert(0<b&&Infinity>b,"timescale must be a positive, finite integer");goog.asserts.assert(0<d,"period duration must be a positive integer");var e=shaka.util.XmlUtils,f=e.findChildren(a,"S");a=[];var g=-c;f=$jscomp.makeIterator(shaka.util.Iterables.enumerate(f));for(var h=f.next();!h.done;h=f.next()){h=h.value;var k=h.item,l=h.next,m=e.parseAttr(k,"t",e.parseNonNegativeInt);h=e.parseAttr(k,"d",e.parseNonNegativeInt);var n=e.parseAttr(k,\n"r",e.parseInt);null!=m&&(m-=c);if(!h){shaka.log.warning(\'"S" element must have a duration:\',\'ignoring the remaining "S" elements.\',k);break}m=null!=m?m:g;n=n||0;if(0>n)if(l){l=e.parseAttr(l,"t",e.parseNonNegativeInt);if(null==l){shaka.log.warning(\'An "S" element cannot have a negative repeat\',\'if the next "S" element does not have a valid start time:\',\'ignoring the remaining "S" elements.\',k);break}else if(m>=l){shaka.log.warning(\'An "S" element cannot have a negative repeatif its start \',\'time exceeds the next "S" element\\\'s start time:\',\n\'ignoring the remaining "S" elements.\',k);break}n=Math.ceil((l-m)/h)-1}else{if(Infinity==d){shaka.log.warning(\'The last "S" element cannot have a negative repeat\',"if the Period has an infinite duration:",\'ignoring the last "S" element.\',k);break}else if(m/b>=d){shaka.log.warning(\'The last "S" element cannot have a negative repeat\',"if its start time exceeds the Period\'s duration:",\'igoring the last "S" element.\',k);break}n=Math.ceil((d*b-m)/h)-1}0<a.length&&m!=g&&(Math.abs((m-g)/b)>=shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS&&\nshaka.log.warning("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",k),a[a.length-1].end=m/b);k=$jscomp.makeIterator(shaka.util.Iterables.range(n+1));for(l=k.next();!l.done;l=k.next())shaka.util.Functional.ignored(l.value),g=m+h,a.push({start:m/b,end:g/b,unscaledStart:m}),m=g}return a};\nshaka.dash.MpdUtils.parseSegmentInfo=function(a,b){goog.asserts.assert(b(a.representation),"There must be at least one element of the given type.");var c=shaka.dash.MpdUtils,d=shaka.util.XmlUtils,e=c.inheritAttribute(a,b,"timescale"),f=1;e&&(f=d.parsePositiveInt(e)||1);var g=c.inheritAttribute(a,b,"duration");e=d.parsePositiveInt(g||"");a.representation.contentType==shaka.util.ManifestParserUtils.ContentType.IMAGE&&(e=d.parseFloat(g||""));e&&(e/=f);var h=c.inheritAttribute(a,b,"startNumber");g=Number(c.inheritAttribute(a,\nb,"presentationTimeOffset"))||0;d=d.parseNonNegativeInt(h||"");if(null==h||null==d)d=1;h=c.inheritChild(a,b,"SegmentTimeline");var k=null;h&&(k=c.createTimeline(h,f,g,a.periodInfo.duration||Infinity));return{timescale:f,segmentDuration:e,startNumber:d,scaledPresentationTimeOffset:g/f||0,unscaledPresentationTimeOffset:g,timeline:k}};\nshaka.dash.MpdUtils.inheritAttribute=function(a,b,c){var d=shaka.util.Functional;goog.asserts.assert(b(a.representation),"There must be at least one element of the given type");return[b(a.representation),b(a.adaptationSet),b(a.period)].filter(d.isNotNull).map(function(e){return e.getAttribute(c)}).reduce(function(e,f){return e||f})};\nshaka.dash.MpdUtils.inheritChild=function(a,b,c){var d=shaka.util.Functional;goog.asserts.assert(b(a.representation),"There must be at least one element of the given type");a=[b(a.representation),b(a.adaptationSet),b(a.period)].filter(d.isNotNull);var e=shaka.util.XmlUtils;return a.map(function(f){return e.findChild(f,c)}).reduce(function(f,g){return f||g})};\nshaka.dash.MpdUtils.handleXlinkInElement_=function(a,b,c,d,e,f){var g=shaka.util.XmlUtils,h=shaka.util.Error,k=shaka.util.ManifestParserUtils,l=shaka.dash.MpdUtils.XlinkNamespaceUri_,m=g.getAttributeNS(a,l,"href");g=g.getAttributeNS(a,l,"actuate")||"onRequest";for(var n=$jscomp.makeIterator(Array.from(a.attributes)),p=n.next();!p.done;p=n.next())p=p.value,p.namespaceURI==l&&a.removeAttributeNS(p.namespaceURI,p.localName);if(5<=f)return shaka.util.AbortableOperation.failed(new h(h.Severity.CRITICAL,\nh.Category.MANIFEST,h.Code.DASH_XLINK_DEPTH_LIMIT));if("onLoad"!=g)return shaka.util.AbortableOperation.failed(new h(h.Severity.CRITICAL,h.Category.MANIFEST,h.Code.DASH_UNSUPPORTED_XLINK_ACTUATE));var q=k.resolveUris([d],[m]);d=shaka.net.NetworkingEngine.RequestType.MANIFEST;k=shaka.net.NetworkingEngine.makeRequest(q,b);d=e.request(d,k);goog.asserts.assert(d instanceof shaka.util.AbortableOperation,"Unexpected implementation of IAbortableOperation!");return d.chain(function(r){r=shaka.util.XmlUtils.parseXml(r.data,\na.tagName);if(!r)return shaka.util.AbortableOperation.failed(new h(h.Severity.CRITICAL,h.Category.MANIFEST,h.Code.DASH_INVALID_XML,m));for(;a.childNodes.length;)a.removeChild(a.childNodes[0]);for(;r.childNodes.length;){var t=r.childNodes[0];r.removeChild(t);a.appendChild(t)}r=$jscomp.makeIterator(Array.from(r.attributes));for(t=r.next();!t.done;t=r.next())a.setAttributeNode(t.value.cloneNode(!1));return shaka.dash.MpdUtils.processXlinks(a,b,c,q[0],e,f+1)})};\nshaka.dash.MpdUtils.processXlinks=function(a,b,c,d,e,f){f=void 0===f?0:f;var g=shaka.dash.MpdUtils,h=shaka.util.XmlUtils,k=g.XlinkNamespaceUri_;if(h.getAttributeNS(a,k,"href"))return h=g.handleXlinkInElement_(a,b,c,d,e,f),c&&(h=h.chain(void 0,function(p){return g.processXlinks(a,b,c,d,e,f)})),h;for(var l=[],m=$jscomp.makeIterator(Array.from(a.childNodes)),n=m.next();!n.done;n=m.next())n=n.value,n instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==h.getAttributeNS(n,k,"href")?a.removeChild(n):\n"SegmentTimeline"!=n.tagName&&l.push(shaka.dash.MpdUtils.processXlinks(n,b,c,d,e,f)));return shaka.util.AbortableOperation.all(l).chain(function(){return a})};shaka.dash.MpdUtils.XlinkNamespaceUri_="http://www.w3.org/1999/xlink";shaka.media.Mp4SegmentIndexParser=function(){};shaka.media.Mp4SegmentIndexParser.parse=function(a,b,c,d,e,f,g){var h=shaka.media.Mp4SegmentIndexParser,k,l=(new shaka.util.Mp4Parser).fullBox("sidx",function(m){k=h.parseSIDX_(b,d,e,f,g,c,m)});a&&l.parse(a);if(k)return k;shaka.log.error(\'Invalid box type, expected "sidx".\');throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_WRONG_BOX_TYPE);};\nshaka.media.Mp4SegmentIndexParser.parseSIDX_=function(a,b,c,d,e,f,g){goog.asserts.assert(null!=g.version,"SIDX is a full box and should have a valid version.");var h=[];g.reader.skip(4);var k=g.reader.readUint32();if(0==k)throw shaka.log.error("Invalid timescale."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_INVALID_TIMESCALE);if(0==g.version){var l=g.reader.readUint32();var m=g.reader.readUint32()}else l=g.reader.readUint64(),\nm=g.reader.readUint64();g.reader.skip(2);var n=g.reader.readUint16();a=a+g.size+m;n=$jscomp.makeIterator(shaka.util.Iterables.range(n));for(m=n.next();!m.done;m=n.next()){shaka.util.Functional.ignored(m.value);var p=g.reader.readUint32();m=(p&2147483648)>>>31;p&=2147483647;var q=g.reader.readUint32();g.reader.skip(4);if(1==m)throw shaka.log.error("Heirarchical SIDXs are not supported."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_TYPE_NOT_SUPPORTED);\nh.push(new shaka.media.SegmentReference(l/k+c,(l+q)/k+c,function(){return f},a,a+p-1,b,c,d,e));l+=q;a+=p}g.parser.stop();return h};shaka.util.EbmlParser=function(a){this.dataView_=shaka.util.BufferUtils.toDataView(a);this.reader_=new shaka.util.DataViewReader(this.dataView_,shaka.util.DataViewReader.Endianness.BIG_ENDIAN)};shaka.util.EbmlParser.prototype.hasMoreData=function(){return this.reader_.hasMoreData()};\nshaka.util.EbmlParser.prototype.parseElement=function(){var a=this.parseId_(),b=this.parseVint_();b=shaka.util.EbmlParser.isDynamicSizeValue_(b)?this.dataView_.byteLength-this.reader_.getPosition():shaka.util.EbmlParser.getVintValue_(b);b=this.reader_.getPosition()+b<=this.dataView_.byteLength?b:this.dataView_.byteLength-this.reader_.getPosition();var c=shaka.util.BufferUtils.toDataView(this.dataView_,this.reader_.getPosition(),b);this.reader_.skip(b);return new shaka.util.EbmlElement(a,c)};\nshaka.util.EbmlParser.prototype.parseId_=function(){var a=this.parseVint_();if(7<a.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);var b=0;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())b=256*b+c.value;return b};\nshaka.util.EbmlParser.prototype.parseVint_=function(){var a=this.reader_.getPosition(),b=this.reader_.readUint8();if(0==b)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);b=8-Math.floor(Math.log2(b));goog.asserts.assert(8>=b&&1<=b,"Incorrect log2 value");this.reader_.skip(b-1);return shaka.util.BufferUtils.toUint8(this.dataView_,a,b)};\nshaka.util.EbmlParser.getVintValue_=function(a){if(8==a.length&&a[1]&224)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);for(var b=0,c=$jscomp.makeIterator(shaka.util.Iterables.enumerate(a)),d=c.next();!d.done;d=c.next()){d=d.value;var e=d.item;b=0==d.i?e&(1<<8-a.length)-1:256*b+e}return b};\nshaka.util.EbmlParser.isDynamicSizeValue_=function(a){for(var b=shaka.util.BufferUtils,c=$jscomp.makeIterator(shaka.util.EbmlParser.DYNAMIC_SIZES),d=c.next();!d.done;d=c.next())if(b.equal(a,new Uint8Array(d.value)))return!0;return!1};shaka.util.EbmlParser.DYNAMIC_SIZES=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];shaka.util.EbmlElement=function(a,b){this.id=a;this.dataView_=b};\nshaka.util.EbmlElement.prototype.getOffset=function(){return this.dataView_.byteOffset};shaka.util.EbmlElement.prototype.createParser=function(){return new shaka.util.EbmlParser(this.dataView_)};\nshaka.util.EbmlElement.prototype.getUint=function(){if(8<this.dataView_.byteLength)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);if(8==this.dataView_.byteLength&&this.dataView_.getUint8(0)&224)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);for(var a=0,b=$jscomp.makeIterator(shaka.util.Iterables.range(this.dataView_.byteLength)),\nc=b.next();!c.done;c=b.next())c=this.dataView_.getUint8(c.value),a=256*a+c;return a};shaka.util.EbmlElement.prototype.getFloat=function(){if(4==this.dataView_.byteLength)return this.dataView_.getFloat32(0);if(8==this.dataView_.byteLength)return this.dataView_.getFloat64(0);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_BAD_FLOATING_POINT_SIZE);};shaka.media.WebmSegmentIndexParser=function(){};\nshaka.media.WebmSegmentIndexParser.parse=function(a,b,c,d,e,f,g){b=shaka.media.WebmSegmentIndexParser.parseWebmContainer_(b);a=(new shaka.util.EbmlParser(a)).parseElement();if(a.id!=shaka.media.WebmSegmentIndexParser.CUES_ID)throw shaka.log.error("Not a Cues element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUES_ELEMENT_MISSING);return shaka.media.WebmSegmentIndexParser.parseCues_(a,b.segmentOffset,b.timecodeScale,b.duration,\nc,d,e,f,g)};\nshaka.media.WebmSegmentIndexParser.parseWebmContainer_=function(a){a=new shaka.util.EbmlParser(a);if(a.parseElement().id!=shaka.media.WebmSegmentIndexParser.EBML_ID)throw shaka.log.error("Not an EBML element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_EBML_HEADER_ELEMENT_MISSING);var b=a.parseElement();if(b.id!=shaka.media.WebmSegmentIndexParser.SEGMENT_ID)throw shaka.log.error("Not a Segment element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,\nshaka.util.Error.Code.WEBM_SEGMENT_ELEMENT_MISSING);a=b.getOffset();b=shaka.media.WebmSegmentIndexParser.parseSegment_(b);return{segmentOffset:a,timecodeScale:b.timecodeScale,duration:b.duration}};\nshaka.media.WebmSegmentIndexParser.parseSegment_=function(a){a=a.createParser();for(var b=null;a.hasMoreData();){var c=a.parseElement();if(c.id==shaka.media.WebmSegmentIndexParser.INFO_ID){b=c;break}}if(!b)throw shaka.log.error("Not an Info element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_INFO_ELEMENT_MISSING);return shaka.media.WebmSegmentIndexParser.parseInfo_(b)};\nshaka.media.WebmSegmentIndexParser.parseInfo_=function(a){var b=a.createParser(),c=1E6;for(a=null;b.hasMoreData();){var d=b.parseElement();d.id==shaka.media.WebmSegmentIndexParser.TIMECODE_SCALE_ID?c=d.getUint():d.id==shaka.media.WebmSegmentIndexParser.DURATION_ID&&(a=d.getFloat())}if(null==a)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_DURATION_ELEMENT_MISSING);b=c/1E9;return{timecodeScale:b,duration:a*b}};\nshaka.media.WebmSegmentIndexParser.parseCues_=function(a,b,c,d,e,f,g,h,k){var l=[],m=function(){return e};a=a.createParser();for(var n=null,p=null;a.hasMoreData();){var q=a.parseElement();if(q.id==shaka.media.WebmSegmentIndexParser.CUE_POINT_ID){var r=shaka.media.WebmSegmentIndexParser.parseCuePoint_(q);r&&(q=c*r.unscaledTime,r=b+r.relativeOffset,null!=n&&(goog.asserts.assert(null!=p,"last offset cannot be null"),l.push(new shaka.media.SegmentReference(n+g,q+g,m,p,r-1,f,g,h,k))),n=q,p=r)}}null!=n&&\n(goog.asserts.assert(null!=p,"last offset cannot be null"),l.push(new shaka.media.SegmentReference(n+g,d+g,m,p,null,f,g,h,k)));return l};\nshaka.media.WebmSegmentIndexParser.parseCuePoint_=function(a){var b=a.createParser();a=b.parseElement();if(a.id!=shaka.media.WebmSegmentIndexParser.CUE_TIME_ID)throw shaka.log.warning("Not a CueTime element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUE_TIME_ELEMENT_MISSING);a=a.getUint();b=b.parseElement();if(b.id!=shaka.media.WebmSegmentIndexParser.CUE_TRACK_POSITIONS_ID)throw shaka.log.warning("Not a CueTrackPositions element."),\nnew shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING);b=b.createParser();for(var c=0;b.hasMoreData();){var d=b.parseElement();if(d.id==shaka.media.WebmSegmentIndexParser.CUE_CLUSTER_POSITION){c=d.getUint();break}}return{unscaledTime:a,relativeOffset:c}};shaka.media.WebmSegmentIndexParser.EBML_ID=440786851;shaka.media.WebmSegmentIndexParser.SEGMENT_ID=408125543;\nshaka.media.WebmSegmentIndexParser.INFO_ID=357149030;shaka.media.WebmSegmentIndexParser.TIMECODE_SCALE_ID=2807729;shaka.media.WebmSegmentIndexParser.DURATION_ID=17545;shaka.media.WebmSegmentIndexParser.CUES_ID=475249515;shaka.media.WebmSegmentIndexParser.CUE_POINT_ID=187;shaka.media.WebmSegmentIndexParser.CUE_TIME_ID=179;shaka.media.WebmSegmentIndexParser.CUE_TRACK_POSITIONS_ID=183;shaka.media.WebmSegmentIndexParser.CUE_CLUSTER_POSITION=241;shaka.dash.SegmentBase=function(){};shaka.dash.SegmentBase.createInitSegment=function(a,b){var c=shaka.util.XmlUtils,d=shaka.util.ManifestParserUtils,e=shaka.dash.MpdUtils.inheritChild(a,b,"Initialization");if(!e)return null;var f=a.representation.baseUris,g=e.getAttribute("sourceURL");g&&(f=d.resolveUris(a.representation.baseUris,[g]));d=0;g=null;if(c=c.parseAttr(e,"range",c.parseRange))d=c.start,g=c.end;return new shaka.media.InitSegmentReference(function(){return f},d,g)};\nshaka.dash.SegmentBase.createStreamInfo=function(a,b){goog.asserts.assert(a.representation.segmentBase,"Should only be called with SegmentBase");var c=shaka.dash.MpdUtils,d=shaka.dash.SegmentBase,e=shaka.util.XmlUtils,f=Number(c.inheritAttribute(a,d.fromInheritance_,"presentationTimeOffset"))||0;c=c.inheritAttribute(a,d.fromInheritance_,"timescale");var g=1;c&&(g=e.parsePositiveInt(c)||1);var h=f/g||0,k=d.createInitSegment(a,d.fromInheritance_);d.checkSegmentIndexRangeSupport_(a,k);var l=shaka.util.ObjectUtils.shallowCloneObject(a);\nreturn{generateSegmentIndex:function(){return d.generateSegmentIndex_(l,b,k,h)}}};\nshaka.dash.SegmentBase.generateSegmentIndexFromUris=function(a,b,c,d,e,f,g){var h,k,l,m,n,p,q,r,t,v,u,y,w,x,z;return $jscomp.asyncExecutePromiseGeneratorProgram(function(A){if(1==A.nextAddress)return h=a.presentationTimeline,k=!a.dynamic||!a.periodInfo.isLastPeriod,l=a.periodInfo.start,m=a.periodInfo.duration,n=a.representation.mimeType.split("/")[1],p=b,q=null,r=[p(d,e,f),"webm"==n?p(c.getUris(),c.startByte,c.endByte):null],p=null,A.yield(Promise.all(r),2);t=A.yieldResult;v=t[0];u=t[1]||null;y=null;\nw=l-g;x=l;z=m?l+m:Infinity;"mp4"==n?y=shaka.media.Mp4SegmentIndexParser.parse(v,e,d,c,w,x,z):(goog.asserts.assert(u,"WebM requires init data"),y=shaka.media.WebmSegmentIndexParser.parse(v,u,d,c,w,x,z));h.notifySegments(y);goog.asserts.assert(!q,"Should not call generateSegmentIndex twice");q=new shaka.media.SegmentIndex(y);k&&q.fit(x,z,!0);return A["return"](q)})};shaka.dash.SegmentBase.fromInheritance_=function(a){return a.segmentBase};\nshaka.dash.SegmentBase.computeIndexRange_=function(a){var b=shaka.dash.MpdUtils,c=shaka.dash.SegmentBase,d=shaka.util.XmlUtils,e=b.inheritChild(a,c.fromInheritance_,"RepresentationIndex");a=b.inheritAttribute(a,c.fromInheritance_,"indexRange");a=d.parseRange(a||"");e&&(a=d.parseAttr(e,"range",d.parseRange,a));return a};\nshaka.dash.SegmentBase.computeIndexUris_=function(a){var b=shaka.util.ManifestParserUtils,c=shaka.dash.MpdUtils.inheritChild(a,shaka.dash.SegmentBase.fromInheritance_,"RepresentationIndex"),d=a.representation.baseUris;c&&(c=c.getAttribute("sourceURL"))&&(d=b.resolveUris(a.representation.baseUris,[c]));return d};\nshaka.dash.SegmentBase.checkSegmentIndexRangeSupport_=function(a,b){var c=shaka.dash.SegmentBase;c.checkSegmentIndexSupport(a,b);if(!c.computeIndexRange_(a))throw shaka.log.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",a.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);};\nshaka.dash.SegmentBase.checkSegmentIndexSupport=function(a,b){var c=shaka.util.ManifestParserUtils.ContentType,d=a.representation.contentType,e=a.representation.mimeType.split("/")[1];if(d!=c.TEXT&&"mp4"!=e&&"webm"!=e)throw shaka.log.error("SegmentBase specifies an unsupported container type.",a.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_UNSUPPORTED_CONTAINER);if("webm"==e&&!b)throw shaka.log.error("SegmentBase does not contain sufficient segment information:",\n"the SegmentBase uses a WebM container,","but does not contain an Initialization element.",a.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_WEBM_MISSING_INIT);};\nshaka.dash.SegmentBase.generateSegmentIndex_=function(a,b,c,d){var e=shaka.dash.SegmentBase,f=e.computeIndexUris_(a);e=e.computeIndexRange_(a);goog.asserts.assert(e,"Index range should not be null!");return shaka.dash.SegmentBase.generateSegmentIndexFromUris(a,b,c,f,e.start,e.end,d)};shaka.dash.SegmentList=function(){};\nshaka.dash.SegmentList.createStreamInfo=function(a,b){goog.asserts.assert(a.representation.segmentList,"Should only be called with SegmentList");var c=shaka.dash.SegmentList,d=shaka.dash.SegmentBase.createInitSegment(a,c.fromInheritance_),e=c.parseSegmentListInfo_(a);c.checkSegmentListInfo_(a,e);var f=null,g=null;a.period.id&&a.representation.id&&(g=a.period.id+","+a.representation.id,f=b[g]);c=c.createSegmentReferences_(a.periodInfo.start,a.periodInfo.duration,e.startNumber,a.representation.baseUris,\ne,d);d=!f;f?(g=a.presentationTimeline.getSegmentAvailabilityStart(),f.mergeAndEvict(c,g)):(a.presentationTimeline.notifySegments(c),f=new shaka.media.SegmentIndex(c),g&&a.dynamic&&(b[g]=f));a.dynamic&&a.periodInfo.isLastPeriod||f.fit(a.periodInfo.start,a.periodInfo.duration?a.periodInfo.start+a.periodInfo.duration:Infinity,d);return{generateSegmentIndex:function(){return Promise.resolve(f)}}};shaka.dash.SegmentList.fromInheritance_=function(a){return a.segmentList};\nshaka.dash.SegmentList.parseSegmentListInfo_=function(a){var b=shaka.dash.SegmentList,c=shaka.dash.MpdUtils,d=b.parseMediaSegments_(a);a=c.parseSegmentInfo(a,b.fromInheritance_);b=a.startNumber;0==b&&(shaka.log.warning("SegmentList@startNumber must be > 0"),b=1);c=0;a.segmentDuration?c=a.segmentDuration*(b-1):a.timeline&&0<a.timeline.length&&(c=a.timeline[0].start);return{segmentDuration:a.segmentDuration,startTime:c,startNumber:b,scaledPresentationTimeOffset:a.scaledPresentationTimeOffset,timeline:a.timeline,\nmediaSegments:d}};\nshaka.dash.SegmentList.checkSegmentListInfo_=function(a,b){if(!b.segmentDuration&&!b.timeline&&1<b.mediaSegments.length)throw shaka.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",a.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);if(!b.segmentDuration&&!a.periodInfo.duration&&\n!b.timeline&&1==b.mediaSegments.length)throw shaka.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",a.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);if(b.timeline&&0==b.timeline.length)throw shaka.log.warning("SegmentList does not contain sufficient segment information:",\n"the SegmentList has an empty timeline.",a.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);};\nshaka.dash.SegmentList.createSegmentReferences_=function(a,b,c,d,e,f){c=shaka.util.ManifestParserUtils;var g=e.mediaSegments.length;e.timeline&&e.timeline.length!=e.mediaSegments.length&&(g=Math.min(e.timeline.length,e.mediaSegments.length),shaka.log.warning("The number of items in the segment timeline and the number of ","segment URLs do not match, truncating",e.mediaSegments.length,"to",g));var h=a-e.scaledPresentationTimeOffset,k=b?a+b:Infinity,l=[],m=e.startTime,n={};g=$jscomp.makeIterator(shaka.util.Iterables.range(g));\nfor(var p=g.next();!p.done;n={$jscomp$loop$prop$mediaUri$587:n.$jscomp$loop$prop$mediaUri$587},p=g.next()){var q=p.value;p=e.mediaSegments[q];n.$jscomp$loop$prop$mediaUri$587=c.resolveUris(d,[p.mediaUri]);var r=void 0;null!=e.segmentDuration?r=m+e.segmentDuration:e.timeline?r=e.timeline[q].end:(goog.asserts.assert(1==e.mediaSegments.length&&b,"There should be exactly one segment with a Period duration."),r=m+b);q=function(t){return function(){return t.$jscomp$loop$prop$mediaUri$587}}(n);l.push(new shaka.media.SegmentReference(a+\nm,a+r,q,p.start,p.end,f,h,a,k));m=r}return l};\nshaka.dash.SegmentList.parseMediaSegments_=function(a){var b=[a.representation.segmentList,a.adaptationSet.segmentList,a.period.segmentList].filter(shaka.util.Functional.isNotNull),c=shaka.util.XmlUtils;return b.map(function(d){return c.findChildren(d,"SegmentURL")}).reduce(function(d,e){return 0<d.length?d:e}).map(function(d){d.getAttribute("indexRange")&&!a.indexRangeWarningGiven&&(a.indexRangeWarningGiven=!0,shaka.log.warning("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var e=\nd.getAttribute("media");d=c.parseAttr(d,"mediaRange",c.parseRange,{start:0,end:null});return{mediaUri:e,start:d.start,end:d.end}})};shaka.dash.SegmentTemplate=function(){};\nshaka.dash.SegmentTemplate.createStreamInfo=function(a,b,c,d,e){goog.asserts.assert(a.representation.segmentTemplate,"Should only be called with SegmentTemplate");var f=shaka.dash.SegmentTemplate,g=f.createInitSegment_(a),h=f.parseSegmentTemplateInfo_(a);f.checkSegmentTemplateInfo_(a,h);var k=shaka.util.ObjectUtils.shallowCloneObject(a);if(h.indexTemplate)return shaka.dash.SegmentBase.checkSegmentIndexSupport(a,g),{generateSegmentIndex:function(){return f.generateSegmentIndexFromIndexTemplate_(k,b,\ng,h)}};if(h.segmentDuration)return d||(a.presentationTimeline.notifyMaxSegmentDuration(h.segmentDuration),a.presentationTimeline.notifyMinSegmentStartTime(a.periodInfo.start)),{generateSegmentIndex:function(){return f.generateSegmentIndexFromDuration_(k,h,e,g)}};var l=null;d=null;a.period.id&&a.representation.id&&(d=a.period.id+","+a.representation.id,l=c[d]);var m=f.createFromTimeline_(k,h,g),n=a.periodInfo.start,p=a.periodInfo.duration?a.periodInfo.start+a.periodInfo.duration:Infinity,q=Infinity!=\np;l?(q&&(new shaka.media.SegmentIndex(m)).fit(n,p,!0),l.mergeAndEvict(m,a.presentationTimeline.getSegmentAvailabilityStart())):(a.presentationTimeline.notifySegments(m),l=new shaka.media.SegmentIndex(m),d&&a.dynamic&&(c[d]=l));q&&l.fit(n,p);return{generateSegmentIndex:function(){return Promise.resolve(l)}}};shaka.dash.SegmentTemplate.fromInheritance_=function(a){return a.segmentTemplate};\nshaka.dash.SegmentTemplate.parseSegmentTemplateInfo_=function(a){var b=shaka.dash.SegmentTemplate,c=shaka.dash.MpdUtils,d=c.parseSegmentInfo(a,b.fromInheritance_),e=c.inheritAttribute(a,b.fromInheritance_,"media");a=c.inheritAttribute(a,b.fromInheritance_,"index");return{segmentDuration:d.segmentDuration,timescale:d.timescale,startNumber:d.startNumber,scaledPresentationTimeOffset:d.scaledPresentationTimeOffset,unscaledPresentationTimeOffset:d.unscaledPresentationTimeOffset,timeline:d.timeline,mediaTemplate:e,\nindexTemplate:a}};\nshaka.dash.SegmentTemplate.checkSegmentTemplateInfo_=function(a,b){var c=b.indexTemplate?1:0;c+=b.timeline?1:0;c+=b.segmentDuration?1:0;if(0==c)throw shaka.log.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",a.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);1!=c&&(shaka.log.warning("SegmentTemplate containes multiple segment information sources:",\n"the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",a.representation),b.indexTemplate?(shaka.log.info("Using the index URL template by default."),b.timeline=null):(goog.asserts.assert(b.timeline,"There should be a timeline"),shaka.log.info("Using the SegmentTimeline by default.")),b.segmentDuration=null);if(!b.indexTemplate&&!b.mediaTemplate)throw shaka.log.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate\'s media URL template is missing.",\na.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);};\nshaka.dash.SegmentTemplate.generateSegmentIndexFromIndexTemplate_=function(a,b,c,d){var e=shaka.dash.MpdUtils,f=shaka.util.ManifestParserUtils;goog.asserts.assert(d.indexTemplate,"must be using index template");e=e.fillUriTemplate(d.indexTemplate,a.representation.id,null,a.bandwidth||null,null);f=f.resolveUris(a.representation.baseUris,[e]);return shaka.dash.SegmentBase.generateSegmentIndexFromUris(a,b,c,f,0,null,d.scaledPresentationTimeOffset)};\nshaka.dash.SegmentTemplate.generateSegmentIndexFromDuration_=function(a,b,c,d){goog.asserts.assert(b.mediaTemplate,"There should be a media template with duration");var e=shaka.dash.MpdUtils,f=shaka.util.ManifestParserUtils,g=a.presentationTimeline,h=a.periodInfo.start,k=a.periodInfo.duration,l=k?h+k:Infinity,m=b.segmentDuration;goog.asserts.assert(null!=m,"Segment duration must not be null!");var n=b.startNumber,p=b.timescale,q=b.mediaTemplate,r=a.bandwidth||null,t=a.representation.id,v=a.representation.baseUris,\nu=h-b.scaledPresentationTimeOffset,y=function(){var D=[Math.max(g.getSegmentAvailabilityStart(),h),Math.min(g.getSegmentAvailabilityEnd(),l)];goog.asserts.assert(D.every(isFinite),"Available presentation times must be finite!");goog.asserts.assert(D.every(function(B){return 0<=B}),"Available presentation times must be positive!");goog.asserts.assert(null!=m,"Segment duration must not be null!");D=D.map(function(B){return B-h});return[Math.ceil(D[0]/m),Math.ceil(D[1]/m)-1].map(function(B){return B+\nn})};k=y();a=a.dynamic?Math.max(k[0],k[1]-c+1):k[0];c=k[1];k=[];for(var w=function(D){goog.asserts.assert(null!=m,"Segment duration must not be null!");var B=(D-n)*m,E=B+b.scaledPresentationTimeOffset;B+=h;var H=Math.min(B+m,l);goog.asserts.assert(B<H,"Generated a segment outside of the period!");return new shaka.media.SegmentReference(B,H,function(){var F=e.fillUriTemplate(q,t,D,r,E*p);return f.resolveUris(v,[F])},0,null,d,u,h,l)},x=a;x<=c;++x){var z=w(x);k.push(z)}var A=new shaka.media.SegmentIndex(k);\nif(g.getSegmentAvailabilityEnd()<l){var C=Math.max(a,c+1);A.updateEvery(m,function(){A.evict(g.getSegmentAvailabilityStart());var D=$jscomp.makeIterator(y());D.next();D=D.next().value;for(var B=[];C<=D;){var E=w(C);B.push(E);C++}return g.getSegmentAvailabilityEnd()>=l&&!B.length?null:B})}return Promise.resolve(A)};\nshaka.dash.SegmentTemplate.createFromTimeline_=function(a,b,c){var d=shaka.dash.MpdUtils,e=shaka.util.ManifestParserUtils,f=a.periodInfo.start,g=a.periodInfo.duration,h=f-b.scaledPresentationTimeOffset;g=g?f+g:Infinity;for(var k=[],l={},m=$jscomp.makeIterator(shaka.util.Iterables.enumerate(b.timeline)),n=m.next();!n.done;l={$jscomp$loop$prop$mediaTemplate$589:l.$jscomp$loop$prop$mediaTemplate$589,$jscomp$loop$prop$repId$590:l.$jscomp$loop$prop$repId$590,$jscomp$loop$prop$segmentReplacement$591:l.$jscomp$loop$prop$segmentReplacement$591,\n$jscomp$loop$prop$bandwidth$592:l.$jscomp$loop$prop$bandwidth$592,$jscomp$loop$prop$timeReplacement$593:l.$jscomp$loop$prop$timeReplacement$593,$jscomp$loop$prop$baseUris$594:l.$jscomp$loop$prop$baseUris$594},n=m.next()){var p=n.value,q=p.item;n=q.start;var r=q.unscaledStart;q=q.end;l.$jscomp$loop$prop$segmentReplacement$591=p.i+b.startNumber;l.$jscomp$loop$prop$timeReplacement$593=r+b.unscaledPresentationTimeOffset;l.$jscomp$loop$prop$repId$590=a.representation.id;l.$jscomp$loop$prop$bandwidth$592=\na.bandwidth||null;l.$jscomp$loop$prop$mediaTemplate$589=b.mediaTemplate;l.$jscomp$loop$prop$baseUris$594=a.representation.baseUris;p=function(t){return function(){goog.asserts.assert(t.$jscomp$loop$prop$mediaTemplate$589,"There should be a media template with a timeline");var v=d.fillUriTemplate(t.$jscomp$loop$prop$mediaTemplate$589,t.$jscomp$loop$prop$repId$590,t.$jscomp$loop$prop$segmentReplacement$591,t.$jscomp$loop$prop$bandwidth$592||null,t.$jscomp$loop$prop$timeReplacement$593);return e.resolveUris(t.$jscomp$loop$prop$baseUris$594,\n[v]).map(function(u){return u.toString()})}}(l);k.push(new shaka.media.SegmentReference(f+n,f+q,p,0,null,c,h,f,g))}return k};\nshaka.dash.SegmentTemplate.createInitSegment_=function(a){var b=shaka.dash.MpdUtils,c=shaka.util.ManifestParserUtils,d=b.inheritAttribute(a,shaka.dash.SegmentTemplate.fromInheritance_,"initialization");if(!d)return null;var e=a.representation.id,f=a.bandwidth||null,g=a.representation.baseUris;return new shaka.media.InitSegmentReference(function(){goog.asserts.assert(d,"Should have returned earler");var h=b.fillUriTemplate(d,e,null,f,null);return c.resolveUris(g,[h])},0,null)};shaka.util.PeriodCombiner=function(){this.variants_=[];this.audioStreams_=[];this.videoStreams_=[];this.textStreams_=[];this.imageStreams_=[];this.usedPeriodIds_=new Set};\nshaka.util.PeriodCombiner.prototype.release=function(){var a=this.audioStreams_.concat(this.videoStreams_,this.textStreams_,this.imageStreams_);a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,b.segmentIndex&&b.segmentIndex.release();this.audioStreams_=[];this.videoStreams_=[];this.textStreams_=[];this.imageStreams_=[];this.variants_=[]};shaka.util.PeriodCombiner.prototype.getVariants=function(){return this.variants_};shaka.util.PeriodCombiner.prototype.getTextStreams=function(){return this.textStreams_};\nshaka.util.PeriodCombiner.prototype.getImageStreams=function(){return this.imageStreams_};\nshaka.util.PeriodCombiner.prototype.combinePeriods=function(a,b){var c=this,d,e,f,g,h,k,l,m,n,p,q,r,t,v,u,y,w,x,z,A,C,D,B,E,H,F,I,G,J,L,K,Q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(M){switch(M.nextAddress){case 1:d=shaka.util.ManifestParserUtils.ContentType;e=shaka.util.Iterables;shaka.util.PeriodCombiner.filterOutAudioStreamDuplicates_(a);shaka.util.PeriodCombiner.filterOutVideoStreamDuplicates_(a);shaka.util.PeriodCombiner.filterOutTextStreamDuplicates_(a);if(!b&&1==a.length){f=\na[0];c.audioStreams_=f.audioStreams;c.videoStreams_=f.videoStreams;c.textStreams_=f.textStreams;c.imageStreams_=f.imageStreams;M.jumpTo(2);break}g=-1;h=$jscomp.makeIterator(e.enumerate(a));for(k=h.next();!k.done;k=h.next())m=l=k.value,n=m.i,p=m.item,c.usedPeriodIds_.has(p.id)||(c.usedPeriodIds_.add(p.id),-1==g&&(g=n));if(-1==g)return M["return"]();q=a.map(function(N){return N.audioStreams});r=a.map(function(N){return N.videoStreams});t=a.map(function(N){return N.textStreams});v=a.map(function(N){return N.imageStreams});\nu=$jscomp.makeIterator(t);for(y=u.next();!y.done;y=u.next())w=y.value,w.push(shaka.util.PeriodCombiner.dummyTextStream_());return M.yield(shaka.util.PeriodCombiner.combine_(c.audioStreams_,q,g,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),3);case 3:return M.yield(shaka.util.PeriodCombiner.combine_(c.videoStreams_,r,g,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),4);case 4:return M.yield(shaka.util.PeriodCombiner.combine_(c.textStreams_,\nt,g,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),5);case 5:return M.yield(shaka.util.PeriodCombiner.combine_(c.imageStreams_,v,g,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),2);case 2:x=0;z=[];if(c.videoStreams_.length&&c.audioStreams_.length)for(H=$jscomp.makeIterator(c.audioStreams_),F=H.next();!F.done;F=H.next())for(I=F.value,G=$jscomp.makeIterator(c.videoStreams_),J=G.next();!J.done;J=G.next())L=J.value,K=shaka.media.DrmEngine.getCommonDrmInfos(I.drmInfos,\nL.drmInfos),I.drmInfos.length&&L.drmInfos.length&&!K.length?shaka.log.warning("Incompatible DRM in audio & video, skipping variant creation.",I,L):(Q=x++,z.push({id:Q,language:I.language,primary:I.primary,audio:I,video:L,bandwidth:(I.bandwidth||0)+(L.bandwidth||0),drmInfos:K,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(A=c.videoStreams_.concat(c.audioStreams_),C=$jscomp.makeIterator(A),D=C.next();!D.done;D=C.next())B=D.value,E=x++,z.push({id:E,language:B.language,primary:B.primary,\naudio:B.type==d.AUDIO?B:null,video:B.type==d.VIDEO?B:null,bandwidth:B.bandwidth||0,drmInfos:B.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});c.variants_=z;M.jumpToEnd()}})};\nshaka.util.PeriodCombiner.filterOutAudioStreamDuplicates_=function(a){var b=shaka.util.ArrayUtils;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;for(var d=[],e=$jscomp.makeIterator(c.audioStreams),f=e.next();!f.done;f=e.next()){f=f.value;for(var g=!1,h=$jscomp.makeIterator(d),k=h.next();!k.done;k=h.next())k=k.value,f.id!=k.id&&f.channelsCount==k.channelsCount&&f.language==k.language&&f.bandwidth==k.bandwidth&&f.label==k.label&&f.codecs==k.codecs&&f.mimeType==k.mimeType&&\nb.hasSameElements(f.roles,k.roles)&&f.audioSamplingRate==k.audioSamplingRate&&f.primary==k.primary&&(g=!0);g||d.push(f)}c.audioStreams=d}};\nshaka.util.PeriodCombiner.filterOutTextStreamDuplicates_=function(a){var b=shaka.util.ArrayUtils;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;for(var d=[],e=$jscomp.makeIterator(c.textStreams),f=e.next();!f.done;f=e.next()){f=f.value;for(var g=!1,h=$jscomp.makeIterator(d),k=h.next();!k.done;k=h.next())k=k.value,f.id!=k.id&&f.language==k.language&&f.label==k.label&&f.codecs==k.codecs&&f.mimeType==k.mimeType&&b.hasSameElements(f.roles,k.roles)&&(g=!0);g||d.push(f)}c.textStreams=\nd}};\nshaka.util.PeriodCombiner.filterOutVideoStreamDuplicates_=function(a){var b=shaka.util.ArrayUtils,c=shaka.util.MapUtils;a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;for(var e=[],f=$jscomp.makeIterator(d.videoStreams),g=f.next();!g.done;g=f.next()){g=g.value;for(var h=!1,k=$jscomp.makeIterator(e),l=k.next();!l.done;l=k.next())l=l.value,g.id!=l.id&&g.width==l.width&&g.frameRate==l.frameRate&&g.codecs==l.codecs&&g.mimeType==l.mimeType&&g.label==l.label&&b.hasSameElements(g.roles,l.roles)&&\nc.hasSameElements(g.closedCaptions,l.closedCaptions)&&g.bandwidth==l.bandwidth&&(h=!0);h||e.push(g)}d.videoStreams=e}};\nshaka.util.PeriodCombiner.combineDbStreams=function(a){var b,c,d,e,f,g,h,k,l,m,n,p,q,r,t,v,u,y,w,x,z,A;return $jscomp.asyncExecutePromiseGeneratorProgram(function(C){switch(C.nextAddress){case 1:b=shaka.util.ManifestParserUtils.ContentType;if(1==a.length)return C["return"](a[0]);c=a.map(function(D){return D.filter(function(B){return B.type==b.AUDIO})});d=a.map(function(D){return D.filter(function(B){return B.type==b.VIDEO})});e=a.map(function(D){return D.filter(function(B){return B.type==b.TEXT})});\nf=$jscomp.makeIterator(e);for(g=f.next();!g.done;g=f.next())h=g.value,h.push(shaka.util.PeriodCombiner.dummyTextStreamDB_());return C.yield(shaka.util.PeriodCombiner.combine_([],c,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),2);case 2:return k=C.yieldResult,C.yield(shaka.util.PeriodCombiner.combine_([],d,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),3);case 3:return l=C.yieldResult,C.yield(shaka.util.PeriodCombiner.combine_([],\ne,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),4);case 4:m=C.yieldResult;n=0;if(l.length&&k.length)for(v=$jscomp.makeIterator(k),u=v.next();!u.done;u=v.next())for(y=u.value,w=$jscomp.makeIterator(l),x=w.next();!x.done;x=w.next())z=x.value,A=n++,z.variantIds.push(A),y.variantIds.push(A);else for(p=l.concat(k),q=$jscomp.makeIterator(p),r=q.next();!r.done;r=q.next())t=r.value,t.variantIds=[n++];return C["return"](l.concat(k).concat(m))}})};\nshaka.util.PeriodCombiner.combine_=function(a,b,c,d,e){var f,g,h,k,l,m,n,p,q,r,t,v,u,y,w,x,z,A,C,D,B,E,H,F,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:f=shaka.util.ManifestParserUtils.ContentType;g=shaka.util.Iterables;h=[];k=$jscomp.makeIterator(g.enumerate(b));for(l=k.next();!l.done;l=k.next())n=m=l.value,p=n.i,q=n.item,p>=c?h.push(new Set(q)):h.push(new Set);r=$jscomp.makeIterator(a);t=r.next();case 2:if(t.done){G.jumpTo(4);break}v=t.value;return G.yield(shaka.util.PeriodCombiner.extendExistingOutputStream_(v,\nb,c,e,h),5);case 5:u=G.yieldResult;if(!u)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.PERIOD_FLATTENING_FAILED);t=r.next();G.jumpTo(2);break;case 4:y=$jscomp.makeIterator(h),w=y.next();case 6:if(w.done){G.jumpTo(8);break}x=w.value;z=$jscomp.makeIterator(x);A=z.next();case 9:if(A.done){w=y.next();G.jumpTo(6);break}C=A.value;return G.yield(shaka.util.PeriodCombiner.createNewOutputStream_(C,b,d,e,h),12);case 12:(D=G.yieldResult)&&\na.push(D);A=z.next();G.jumpTo(9);break;case 8:B=$jscomp.makeIterator(h);for(w=B.next();!w.done;w=B.next())for(E=w.value,H={},F=$jscomp.makeIterator(E),A=F.next();!A.done;H={$jscomp$loop$prop$stream$497$596:H.$jscomp$loop$prop$stream$497$596},A=F.next())if(H.$jscomp$loop$prop$stream$497$596=A.value,H.$jscomp$loop$prop$stream$497$596.type!=f.TEXT||H.$jscomp$loop$prop$stream$497$596.language)if(I=a.some(function(J){return function(L){return L.mimeType==J.$jscomp$loop$prop$stream$497$596.mimeType&&shaka.util.MimeUtils.getCodecBase(L.codecs)==\nshaka.util.MimeUtils.getCodecBase(J.$jscomp$loop$prop$stream$497$596.codecs)}}(H)))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.PERIOD_FLATTENING_FAILED);return G["return"](a)}})};\nshaka.util.PeriodCombiner.extendExistingOutputStream_=function(a,b,c,d,e){var f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress){f=shaka.util.PeriodCombiner.findMatchesInAllPeriods_(b,a);if(!f)return g["return"](!1);goog.asserts.assert(a.createSegmentIndex,"outputStream should be a Stream type!");return g.yield(Promise.all(f.map(function(h){return h.createSegmentIndex()})),2)}goog.asserts.assert(f,"Matches should be non-null");shaka.util.PeriodCombiner.extendOutputStream_(a,\nf,c,d,e);return g["return"](!0)})};\nshaka.util.PeriodCombiner.createNewOutputStream_=function(a,b,c,d,e){var f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return f=c(a),(g=shaka.util.PeriodCombiner.findMatchesInAllPeriods_(b,f))?f.createSegmentIndex?h.yield(Promise.all(g.map(function(k){return k.createSegmentIndex()})),2):h.jumpTo(2):h["return"](null);goog.asserts.assert(g,"Matches should be non-null");shaka.util.PeriodCombiner.extendOutputStream_(f,g,0,d,e);return h["return"](f)})};\nshaka.util.PeriodCombiner.extendOutputStream_=function(a,b,c,d,e){var f=shaka.util.ManifestParserUtils.ContentType,g=shaka.util.LanguageUtils;b=$jscomp.makeIterator(shaka.util.Iterables.enumerate(b));for(var h=b.next();!h.done;h=b.next()){var k=h.value;h=k.i;k=k.item;if(h>=c){d(a,k);var l=!0;a.type==f.AUDIO&&0==g.relatedness(a.language,k.language)&&(l=!1);l&&e[h]["delete"](k)}}};\nshaka.util.PeriodCombiner.cloneStream_=function(a){a=Object.assign({},a);a.originalId=null;a.createSegmentIndex=function(){return Promise.resolve()};a.segmentIndex=new shaka.media.MetaSegmentIndex;a.emsgSchemeIdUris=[];a.keyIds=new Set;a.closedCaptions=null;a.trickModeVideo=null;return a};shaka.util.PeriodCombiner.cloneStreamDB_=function(a){a=Object.assign({},a);a.keyIds=new Set;a.segments=[];a.variantIds=[];a.closedCaptions=null;return a};\nshaka.util.PeriodCombiner.concatenateStreams_=function(a,b){a.roles=Array.from(new Set(a.roles.concat(b.roles)));b.emsgSchemeIdUris&&(a.emsgSchemeIdUris=Array.from(new Set(a.emsgSchemeIdUris.concat(b.emsgSchemeIdUris))));var c=b.keyIds;c=new Set([].concat($jscomp.arrayFromIterable(a.keyIds),$jscomp.arrayFromIterable(c)));a.keyIds=c;a.originalId=null==a.originalId?b.originalId:a.originalId+(","+(b.originalId||""));c=shaka.media.DrmEngine.getCommonDrmInfos(a.drmInfos,b.drmInfos);if(b.drmInfos.length&&\na.drmInfos.length&&!c.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.INCONSISTENT_DRM_ACROSS_PERIODS);a.drmInfos=c;a.encrypted=a.encrypted||b.encrypted;if(b.closedCaptions){a.closedCaptions||(a.closedCaptions=new Map);c=$jscomp.makeIterator(b.closedCaptions);for(var d=c.next();!d.done;d=c.next()){var e=$jscomp.makeIterator(d.value);d=e.next().value;e=e.next().value;a.closedCaptions.set(d,e)}}goog.asserts.assert(a.segmentIndex instanceof\nshaka.media.MetaSegmentIndex,"Output streams should have a MetaSegmentIndex!");goog.asserts.assert(b.segmentIndex,"Input segment index should have been created by now!");a.segmentIndex.appendSegmentIndex(b.segmentIndex);b.trickModeVideo?(a.trickModeVideo||(a.trickModeVideo=shaka.util.PeriodCombiner.cloneStream_(b.trickModeVideo),a.trickModeVideo.segmentIndex=a.segmentIndex.clone()),shaka.util.PeriodCombiner.concatenateStreams_(a.trickModeVideo,b.trickModeVideo)):a.trickModeVideo&&shaka.util.PeriodCombiner.concatenateStreams_(a.trickModeVideo,\nb)};\nshaka.util.PeriodCombiner.concatenateStreamDBs_=function(a,b){a.roles=Array.from(new Set(a.roles.concat(b.roles)));var c=b.keyIds;c=new Set([].concat($jscomp.arrayFromIterable(a.keyIds),$jscomp.arrayFromIterable(c)));a.keyIds=c;a.encrypted=a.encrypted&&b.encrypted;a.segments.push.apply(a.segments,$jscomp.arrayFromIterable(b.segments));if(b.closedCaptions){a.closedCaptions||(a.closedCaptions=new Map);c=$jscomp.makeIterator(b.closedCaptions);for(var d=c.next();!d.done;d=c.next()){var e=$jscomp.makeIterator(d.value);d=\ne.next().value;e=e.next().value;a.closedCaptions.set(d,e)}}};shaka.util.PeriodCombiner.findMatchesInAllPeriods_=function(a,b){for(var c=[],d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next()){e=shaka.util.PeriodCombiner.findBestMatchInPeriod_(e.value,b);if(!e)return null;c.push(e)}return c};\nshaka.util.PeriodCombiner.findBestMatchInPeriod_=function(a,b){for(var c={audio:shaka.util.PeriodCombiner.areAVStreamsCompatible_,video:shaka.util.PeriodCombiner.areAVStreamsCompatible_,text:shaka.util.PeriodCombiner.areTextStreamsCompatible_,image:shaka.util.PeriodCombiner.areImageStreamsCompatible_}[b.type],d={audio:shaka.util.PeriodCombiner.isAudioStreamBetterMatch_,video:shaka.util.PeriodCombiner.isVideoStreamBetterMatch_,text:shaka.util.PeriodCombiner.isTextStreamBetterMatch_,image:shaka.util.PeriodCombiner.isImageStreamBetterMatch_}[b.type],\ne=null,f=$jscomp.makeIterator(a),g=f.next();!g.done;g=f.next())g=g.value,!c(b,g)||e&&!d(b,e,g)||(e=g);return e};shaka.util.PeriodCombiner.areAVStreamsCompatible_=function(a,b){return b.mimeType!=a.mimeType||shaka.util.MimeUtils.getCodecBase(b.codecs)!=shaka.util.MimeUtils.getCodecBase(a.codecs)||a.drmInfos&&!shaka.media.DrmEngine.areDrmCompatible(a.drmInfos,b.drmInfos)?!1:!0};\nshaka.util.PeriodCombiner.areTextStreamsCompatible_=function(a,b){return a.language?b.language?0==shaka.util.LanguageUtils.relatedness(a.language,b.language)||b.kind!=a.kind?!1:!0:!0:!1};shaka.util.PeriodCombiner.areImageStreamsCompatible_=function(a,b){return a.tilesLayout?!0:!1};\nshaka.util.PeriodCombiner.isAudioStreamBetterMatch_=function(a,b,c){var d=shaka.util.LanguageUtils,e=shaka.util.PeriodCombiner.BetterOrWorse,f=e.BETTER;e=e.WORSE;if(a.id==c.id)return!0;var g=d.relatedness(a.language,b.language);d=d.relatedness(a.language,c.language);if(d>g)return!0;if(d<g)return!1;if(!b.primary&&c.primary)return!0;if(b.primary&&!c.primary)return!1;if(a.roles.length)return f=b.roles.filter(function(h){return a.roles.includes(h)}),e=c.roles.filter(function(h){return a.roles.includes(h)}),\ne.length>f.length?!0:e.length<f.length?!1:c.roles.length<b.roles.length;if(!c.roles.length&&b.roles.length)return!0;if(c.roles.length&&!b.roles.length)return!1;d=shaka.util.PeriodCombiner.compareClosestPreferLower(a.channelsCount,b.channelsCount,c.channelsCount);if(d==f)return!0;if(d==e)return!1;d=shaka.util.PeriodCombiner.compareClosestPreferLower(a.audioSamplingRate,b.audioSamplingRate,c.audioSamplingRate);return d==f?!0:d==e?!1:a.bandwidth&&shaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_(a.bandwidth,\nb.bandwidth,c.bandwidth)==f?!0:!1};\nshaka.util.PeriodCombiner.isVideoStreamBetterMatch_=function(a,b,c){var d=shaka.util.PeriodCombiner.BetterOrWorse,e=d.BETTER;d=d.WORSE;if(a.id==c.id)return!0;var f=shaka.util.PeriodCombiner.compareClosestPreferLower(a.width*a.height,b.width*b.height,c.width*c.height);if(f==e)return!0;if(f==d)return!1;if(a.frameRate){f=shaka.util.PeriodCombiner.compareClosestPreferLower(a.frameRate,b.frameRate,c.frameRate);if(f==e)return!0;if(f==d)return!1}return a.bandwidth&&shaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_(a.bandwidth,b.bandwidth,\nc.bandwidth)==e?!0:!1};\nshaka.util.PeriodCombiner.isTextStreamBetterMatch_=function(a,b,c){var d=shaka.util.LanguageUtils;if(a.id==c.id)return!0;var e=d.relatedness(a.language,b.language);d=d.relatedness(a.language,c.language);if(d>e)return!0;if(d<e)return!1;if(!b.primary&&c.primary)return!0;if(b.primary&&!c.primary)return!1;if(a.roles.length){e=b.roles.filter(function(f){return a.roles.includes(f)});d=c.roles.filter(function(f){return a.roles.includes(f)});if(d.length>e.length)return!0;if(d.length<e.length)return!1}else{if(!c.roles.length&&\nb.roles.length)return!0;if(c.roles.length&&!b.roles.length)return!1}return c.mimeType!=a.mimeType||c.codecs!=a.codecs||b.mimeType==a.mimeType&&b.codecs==a.codecs?!1:!0};shaka.util.PeriodCombiner.isImageStreamBetterMatch_=function(a,b,c){return a.id==c.id||c.mimeType==a.mimeType?!0:!1};\nshaka.util.PeriodCombiner.dummyTextStreamDB_=function(){return{id:0,originalId:"",primary:!1,type:shaka.util.ManifestParserUtils.ContentType.TEXT,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}};\nshaka.util.PeriodCombiner.dummyTextStream_=function(){var a=shaka.util.ManifestParserUtils.ContentType;return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new shaka.media.SegmentIndex([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:a.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}};\nshaka.util.PeriodCombiner.compareClosestPreferLower=function(a,b,c){var d=shaka.util.PeriodCombiner.BetterOrWorse,e=d.BETTER,f=d.WORSE;if(b==a&&a!=c)return f;if(c==a&&a!=b)return e;if(b>a){if(c<=a||c-a<b-a)return e;if(c-a>b-a)return f}else{if(c>a)return f;if(a-c<a-b)return e;if(a-c>a-b)return f}return d.EQUAL};\nshaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_=function(a,b,c){var d=shaka.util.PeriodCombiner.BetterOrWorse,e=d.BETTER,f=d.WORSE;b=Math.abs(a-b);a=Math.abs(a-c);return a<b?e:b<a?f:d.EQUAL};shaka.util.PeriodCombiner.BetterOrWorse={BETTER:1,EQUAL:0,WORSE:-1};shaka.dash.DashParser=function(){var a=this;this.playerInterface_=this.config_=null;this.manifestUris_=[];this.manifest_=null;this.globalId_=1;this.segmentIndexMap_={};this.periodCombiner_=new shaka.util.PeriodCombiner;this.updatePeriod_=0;this.averageUpdateDuration_=new shaka.abr.Ewma(5);this.updateTimer_=new shaka.util.Timer(function(){a.onUpdate_()});this.operationManager_=new shaka.util.OperationManager;this.minTotalAvailabilityTimeOffset_=Infinity;this.lowLatencyMode_=!1};\nshaka.dash.DashParser.prototype.configure=function(a){goog.asserts.assert(null!=a.dash,"DashManifestConfiguration should not be null!");this.config_=a};\nshaka.dash.DashParser.prototype.start=function(a,b){var c=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return goog.asserts.assert(c.config_,"Must call configure() before start()!"),c.lowLatencyMode_=b.isLowLatencyMode(),c.manifestUris_=[a],c.playerInterface_=b,e.yield(c.requestManifest_(),2);d=e.yieldResult;c.playerInterface_&&c.setUpdateTimer_(d);if(!c.playerInterface_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,\nshaka.util.Error.Code.OPERATION_ABORTED);goog.asserts.assert(c.manifest_,"Manifest should be non-null!");return e["return"](c.manifest_)})};\nshaka.dash.DashParser.prototype.stop=function(){for(var a=$jscomp.makeIterator(Object.values(this.segmentIndexMap_)),b=a.next();!b.done;b=a.next())b.value.release();this.periodCombiner_&&this.periodCombiner_.release();this.config_=this.playerInterface_=null;this.manifestUris_=[];this.manifest_=null;this.segmentIndexMap_={};this.periodCombiner_=null;null!=this.updateTimer_&&(this.updateTimer_.stop(),this.updateTimer_=null);return this.operationManager_.destroy()};\nshaka.dash.DashParser.prototype.update=function(){var a=this,b;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return c.setCatchFinallyBlocks(2),c.yield(a.requestManifest_(),4);if(2!=c.nextAddress)return c.leaveTryBlock(0);b=c.enterCatchBlock();if(!a.playerInterface_||!b)return c["return"]();goog.asserts.assert(b instanceof shaka.util.Error,"Bad error type");a.playerInterface_.onError(b);c.jumpToEnd()})};\nshaka.dash.DashParser.prototype.onExpirationUpdated=function(a,b){};\nshaka.dash.DashParser.prototype.requestManifest_=function(){var a=this,b,c,d,e,f,g,h,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return b=shaka.net.NetworkingEngine.RequestType.MANIFEST,c=shaka.net.NetworkingEngine.makeRequest(a.manifestUris_,a.config_.retryParameters),d=a.playerInterface_.networkingEngine,e=Date.now(),f=d.request(b,c),a.operationManager_.manage(f),l.yield(f.promise,2);if(3!=l.nextAddress){g=l.yieldResult;if(!a.playerInterface_)return l["return"](0);\ng.uri&&!a.manifestUris_.includes(g.uri)&&a.manifestUris_.unshift(g.uri);return l.yield(a.parseManifest_(g.data,g.uri),3)}h=Date.now();k=(h-e)/1E3;a.averageUpdateDuration_.sample(1,k);return l["return"](k)})};\nshaka.dash.DashParser.prototype.parseManifest_=function(a,b){var c=this,d,e,f,g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){d=shaka.util.Error;e=shaka.dash.MpdUtils;f=shaka.util.XmlUtils.parseXml(a,"MPD");if(!f)throw new d(d.Severity.CRITICAL,d.Category.MANIFEST,d.Code.DASH_INVALID_XML,b);if(g=c.config_.dash.disableXlinkProcessing)return m["return"](c.processManifest_(f,b));h=c.config_.dash.xlinkFailGracefully;k=e.processXlinks(f,c.config_.retryParameters,\nh,b,c.playerInterface_.networkingEngine);c.operationManager_.manage(k);return m.yield(k.promise,2)}l=m.yieldResult;return m["return"](c.processManifest_(l,b))})};\nshaka.dash.DashParser.prototype.processManifest_=function(a,b){var c=this,d,e,f,g,h,k,l,m,n,p,q,r,t,v,u,y,w,x,z,A,C,D,B,E,H,F,I,G,J,L,K,Q,M,N;return $jscomp.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:d=shaka.util.Functional;e=shaka.util.XmlUtils;f=[b];g=e.findChildren(a,"Location").map(e.getContents).filter(d.isNotNull);0<g.length&&(h=shaka.util.ManifestParserUtils.resolveUris(f,g),f=c.manifestUris_=h);k=e.findChildren(a,"BaseURL");l=k.map(e.getContents);m=shaka.util.ManifestParserUtils.resolveUris(f,\nl);n=0;k&&k.length&&(n=e.parseAttr(k[0],"availabilityTimeOffset",e.parseFloat)||0);p=c.config_.dash.ignoreMinBufferTime;q=0;p||(q=e.parseAttr(a,"minBufferTime",e.parseDuration)||0);c.updatePeriod_=e.parseAttr(a,"minimumUpdatePeriod",e.parseDuration,-1);r=e.parseAttr(a,"availabilityStartTime",e.parseDate);t=e.parseAttr(a,"timeShiftBufferDepth",e.parseDuration);v=c.config_.dash.ignoreSuggestedPresentationDelay;u=null;v||(u=e.parseAttr(a,"suggestedPresentationDelay",e.parseDuration));y=c.config_.dash.ignoreMaxSegmentDuration;\nw=null;y||(w=e.parseAttr(a,"maxSegmentDuration",e.parseDuration));x=a.getAttribute("type")||"static";if(c.manifest_)for(z=c.manifest_.presentationTimeline,A=$jscomp.makeIterator(Object.values(c.segmentIndexMap_)),C=A.next();!C.done;C=A.next())D=C.value,D.evict(z.getSegmentAvailabilityStart());else B=c.config_.defaultPresentationDelay||1.5*q,E=null!=u?u:B,z=new shaka.media.PresentationTimeline(r,E,c.config_.dash.autoCorrectDrift);H=a.getAttribute("profiles")||"";F={dynamic:"static"!=x,presentationTimeline:z,\nperiod:null,periodInfo:null,adaptationSet:null,representation:null,bandwidth:0,indexRangeWarningGiven:!1,availabilityTimeOffset:n,profiles:H.split(",")};I=c.parsePeriods_(F,m,a);G=I.duration;J=I.periods;z.setStatic("static"==x);"static"!=x&&I.durationDerivedFromPeriods||z.setDuration(G||Infinity);c.minTotalAvailabilityTimeOffset_&&!c.lowLatencyMode_&&(L=c.playerInterface_.isAutoLowLatencyMode())&&(c.playerInterface_.enableLowLatencyMode(),c.lowLatencyMode_=c.playerInterface_.isLowLatencyMode());c.lowLatencyMode_?\nz.setAvailabilityTimeOffset(c.minTotalAvailabilityTimeOffset_):c.minTotalAvailabilityTimeOffset_&&shaka.log.alwaysWarn("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");(K=z.isLive())&&!isNaN(c.config_.availabilityWindowOverride)&&(t=c.config_.availabilityWindowOverride);null==t&&(t=Infinity);z.setSegmentAvailabilityDuration(t);z.notifyMaxSegmentDuration(w||\n1);goog.DEBUG&&z.assertIsValid();return P.yield(c.periodCombiner_.combinePeriods(J,F.dynamic),2);case 2:if(c.manifest_){c.manifest_.variants=c.periodCombiner_.getVariants();c.manifest_.textStreams=c.periodCombiner_.getTextStreams();c.manifest_.imageStreams=c.periodCombiner_.getImageStreams();c.playerInterface_.filter(c.manifest_);P.jumpTo(3);break}c.manifest_={presentationTimeline:z,variants:c.periodCombiner_.getVariants(),textStreams:c.periodCombiner_.getTextStreams(),imageStreams:c.periodCombiner_.getImageStreams(),\nofflineSessionIds:[],minBufferTime:q||0};if(!z.usingPresentationStartTime()){P.jumpTo(3);break}Q=shaka.util.XmlUtils;M=Q.findChildren(a,"UTCTiming");return P.yield(c.parseUtcTiming_(m,M),5);case 5:N=P.yieldResult;if(!c.playerInterface_)return P["return"]();z.setClockOffset(N);case 3:c.playerInterface_.makeTextStreamsForClosedCaptions(c.manifest_),P.jumpToEnd()}})};\nshaka.dash.DashParser.prototype.parsePeriods_=function(a,b,c){var d=shaka.util.XmlUtils,e=d.parseAttr(c,"mediaPresentationDuration",d.parseDuration),f=[],g=0;c=d.findChildren(c,"Period");c=$jscomp.makeIterator(shaka.util.Iterables.enumerate(c));for(var h=c.next();!h.done;h=c.next()){var k=h.value;h=k.i;var l=k.item;k=k.next;g=d.parseAttr(l,"start",d.parseDuration,g);var m=d.parseAttr(l,"duration",d.parseDuration),n=null;if(k){var p=d.parseAttr(k,"start",d.parseDuration);null!=p&&(n=p-g)}else null!=\ne&&(n=e-g);p=shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS;n&&m&&Math.abs(n-m)>p&&shaka.log.warning("There is a gap/overlap between Periods",l);null==n&&(n=m);l=this.parsePeriod_(a,b,{start:g,duration:n,node:l,isLastPeriod:null==n||!k});f.push(l);if(null==n){k&&shaka.log.warning("Skipping Period",h+1,"and any subsequent Periods:","Period",h+1,"does not have a valid start time.",k);g=null;break}g+=n}return null!=e?(g!=e&&shaka.log.warning("@mediaPresentationDuration does not match the total duration of ",\n"all Periods."),{periods:f,duration:e,durationDerivedFromPeriods:!1}):{periods:f,duration:g,durationDerivedFromPeriods:!0}};\nshaka.dash.DashParser.prototype.parsePeriod_=function(a,b,c){var d=this,e=shaka.util.Functional,f=shaka.util.XmlUtils,g=shaka.util.ManifestParserUtils.ContentType;a.period=this.createFrame_(c.node,null,b);a.periodInfo=c;a.period.availabilityTimeOffset=a.availabilityTimeOffset;a.period.id||(shaka.log.info("No Period ID given for Period with start time "+c.start+",  Assigning a default"),a.period.id="__shaka_period_"+c.start);b=f.findChildren(c.node,"EventStream");b=$jscomp.makeIterator(b);for(var h=\nb.next();!h.done;h=b.next())this.parseEventStream_(c.start,c.duration,h.value);e=f.findChildren(c.node,"AdaptationSet").map(function(n){return d.parseAdaptationSet_(a,n)}).filter(e.isNotNull);if(a.dynamic){c=[];f=$jscomp.makeIterator(e);for(b=f.next();!b.done;b=f.next())for(b=$jscomp.makeIterator(b.value.representationIds),h=b.next();!h.done;h=b.next())c.push(h.value);f=new Set(c);if(c.length!=f.size)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,\nshaka.util.Error.Code.DASH_DUPLICATE_REPRESENTATION_ID);}c=e.filter(function(n){return!n.trickModeFor});e=e.filter(function(n){return n.trickModeFor});e=$jscomp.makeIterator(e);for(f=e.next();!f.done;f=e.next()){f=f.value;b=f.trickModeFor.split(" ");h=$jscomp.makeIterator(c);for(var k=h.next();!k.done;k=h.next()){var l=k.value;if(b.includes(l.id)){k={};l=$jscomp.makeIterator(l.streams);for(var m=l.next();!m.done;k={$jscomp$loop$prop$stream$598:k.$jscomp$loop$prop$stream$598},m=l.next())k.$jscomp$loop$prop$stream$598=\nm.value,k.$jscomp$loop$prop$stream$598.trickModeVideo=f.streams.find(function(n){return function(p){return shaka.util.MimeUtils.getCodecBase(n.$jscomp$loop$prop$stream$598.codecs)==shaka.util.MimeUtils.getCodecBase(p.codecs)}}(k))}}}f=this.config_.disableAudio?[]:this.getSetsOfType_(c,g.AUDIO);b=this.config_.disableVideo?[]:this.getSetsOfType_(c,g.VIDEO);e=this.config_.disableText?[]:this.getSetsOfType_(c,g.TEXT);c=this.config_.disableThumbnails?[]:this.getSetsOfType_(c,g.IMAGE);if(!b.length&&!f.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_EMPTY_PERIOD);g=[];f=$jscomp.makeIterator(f);for(h=f.next();!h.done;h=f.next())g.push.apply(g,$jscomp.arrayFromIterable(h.value.streams));f=[];b=$jscomp.makeIterator(b);for(h=b.next();!h.done;h=b.next())f.push.apply(f,$jscomp.arrayFromIterable(h.value.streams));b=[];e=$jscomp.makeIterator(e);for(h=e.next();!h.done;h=e.next())b.push.apply(b,$jscomp.arrayFromIterable(h.value.streams));e=[];c=$jscomp.makeIterator(c);for(h=c.next();!h.done;h=\nc.next())e.push.apply(e,$jscomp.arrayFromIterable(h.value.streams));return{id:a.period.id,audioStreams:g,videoStreams:f,textStreams:b,imageStreams:e}};shaka.dash.DashParser.prototype.getSetsOfType_=function(a,b){return a.filter(function(c){return c.contentType==b})};\nshaka.dash.DashParser.prototype.parseAdaptationSet_=function(a,b){var c=this,d=shaka.util.XmlUtils,e=shaka.util.Functional,f=shaka.util.ManifestParserUtils,g=f.ContentType,h=shaka.dash.ContentProtection;a.adaptationSet=this.createFrame_(b,a.period,null);var k=!1,l=d.findChildren(b,"Role"),m=l.map(function(B){return B.getAttribute("value")}).filter(e.isNotNull),n=void 0;if(e=a.adaptationSet.contentType==g.TEXT)n=f.TextStreamKind.SUBTITLE;l=$jscomp.makeIterator(l);for(var p=l.next();!p.done;p=l.next()){p=\np.value;var q=p.getAttribute("schemeIdUri");if(null==q||"urn:mpeg:dash:role:2011"==q)switch(p=p.getAttribute("value"),p){case "main":k=!0;break;case "caption":case "subtitle":n=p}}q=d.findChildren(b,"EssentialProperty");l=null;p=!1;q=$jscomp.makeIterator(q);for(var r=q.next();!r.done;r=q.next()){var t=r.value;"http://dashif.org/guidelines/trickmode"==t.getAttribute("schemeIdUri")?l=t.getAttribute("value"):p=!0}t=d.findChildren(b,"Accessibility");q=shaka.util.LanguageUtils;var v=new Map;t=$jscomp.makeIterator(t);\nfor(r=t.next();!r.done;r=t.next()){var u=r.value;r=u.getAttribute("schemeIdUri");u=u.getAttribute("value");if("urn:scte:dash:cc:cea-608:2015"==r)if(r=1,null!=u){u=u.split(";");for(var y=$jscomp.makeIterator(u),w=y.next();!w.done;w=y.next()){var x=w.value,z=w=void 0;x.includes("=")?(x=x.split("="),w=x[0].startsWith("CC")?x[0]:"CC"+x[0],z=x[1]):(w="CC"+r,2==u.length?r+=2:r++,z=x);v.set(w,q.normalize(z))}}else v.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==r)if(r=1,null!=u)for(u=$jscomp.makeIterator(u.split(";")),\nw=u.next();!w.done;w=u.next())w=w.value,x=y=void 0,w.includes("=")?(w=w.split("="),y="svc"+w[0],x=w[1].split(",")[0].split(":").pop()):(y="svc"+r,r++,x=w),v.set(y,q.normalize(x));else v.set("svc1","und");else"urn:mpeg:dash:role:2011"==r&&null!=u&&(m.push(u),"captions"==u&&(n=f.TextStreamKind.CLOSED_CAPTION))}if(p)return null;f=d.findChildren(b,"ContentProtection");var A=h.parseFromAdaptationSet(f,this.config_.dash.ignoreDrmInfo,this.config_.dash.keySystemsByURI),C=shaka.util.LanguageUtils.normalize(b.getAttribute("lang")||\n"und"),D=b.getAttribute("label");(h=d.findChildren(b,"Label"))&&h.length&&(h=h[0],h.textContent&&(D=h.textContent));h=d.findChildren(b,"Representation");d=h.map(function(B){return c.parseRepresentation_(a,A,n,C,D,k,m,v,B)}).filter(function(B){return!!B});if(0==d.length){l=a.adaptationSet.contentType==g.IMAGE;if(this.config_.dash.ignoreEmptyAdaptationSet||e||l)return null;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_EMPTY_ADAPTATION_SET);\n}if(!a.adaptationSet.contentType||a.adaptationSet.contentType==g.APPLICATION)for(a.adaptationSet.contentType=shaka.dash.DashParser.guessContentType_(d[0].mimeType,d[0].codecs),g=$jscomp.makeIterator(d),e=g.next();!e.done;e=g.next())e.value.type=a.adaptationSet.contentType;g=$jscomp.makeIterator(d);for(e=g.next();!e.done;e=g.next())for(e=e.value,f=$jscomp.makeIterator(A.drmInfos),p=f.next();!p.done;p=f.next())p=p.value,p.keyIds=p.keyIds&&e.keyIds?new Set([].concat($jscomp.arrayFromIterable(p.keyIds),\n$jscomp.arrayFromIterable(e.keyIds))):p.keyIds||e.keyIds;g=h.map(function(B){return B.getAttribute("id")}).filter(shaka.util.Functional.isNotNull);return{id:a.adaptationSet.id||"__fake__"+this.globalId_++,contentType:a.adaptationSet.contentType,language:C,main:k,streams:d,drmInfos:A.drmInfos,trickModeFor:l,representationIds:g}};\nshaka.dash.DashParser.prototype.parseRepresentation_=function(a,b,c,d,e,f,g,h,k){var l=this,m=shaka.util.XmlUtils,n=shaka.util.ManifestParserUtils.ContentType;a.representation=this.createFrame_(k,a.adaptationSet,null);this.minTotalAvailabilityTimeOffset_=Math.min(this.minTotalAvailabilityTimeOffset_,a.representation.availabilityTimeOffset);if(!this.verifyRepresentation_(a.representation))return shaka.log.warning("Skipping Representation",a.representation),null;var p=a.periodInfo.start;a.bandwidth=\nm.parseAttr(k,"bandwidth",m.parsePositiveInt)||0;var q=a.representation.contentType,r=q==n.TEXT||q==n.APPLICATION;n=q==n.IMAGE;try{if(q=function(C,D,B){return l.requestInitSegment_(C,D,B)},a.representation.segmentBase)var t=shaka.dash.SegmentBase.createStreamInfo(a,q);else if(a.representation.segmentList)t=shaka.dash.SegmentList.createStreamInfo(a,this.segmentIndexMap_);else if(a.representation.segmentTemplate)t=shaka.dash.SegmentTemplate.createStreamInfo(a,q,this.segmentIndexMap_,!!this.manifest_,\nthis.config_.dash.initialSegmentLimit);else{goog.asserts.assert(r,"Must have Segment* with non-text streams.");var v=a.representation.baseUris,u=a.periodInfo.duration||0;t={generateSegmentIndex:function(){return Promise.resolve(shaka.media.SegmentIndex.forSingleSegment(p,u,v))}}}}catch(C){if((r||n)&&C.code==shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)return null;throw C;}q=m.findChildren(k,"ContentProtection");q=shaka.dash.ContentProtection.parseFromRepresentation(q,b,this.config_.dash.ignoreDrmInfo,\nthis.config_.dash.keySystemsByURI);q=new Set(q?[q]:[]);var y=!1;m.findChildren(k,"SupplementalProperty").some(function(C){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==C.getAttribute("schemeIdUri")&&"JOC"==C.getAttribute("value")})&&(a.representation.mimeType="audio/eac3-joc",y=!0);var w=!1;r&&(w=g.includes("forced_subtitle"));var x;if(n&&((k=m.findChildren(k,"EssentialProperty").find(function(C){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(C.getAttribute("schemeIdUri"))}))&&\n(x=k.getAttribute("value")),!x))return null;var z;k=a.representation.codecs;a.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(k.includes("hvc1.2.4.L153.B0")||k.includes("hev1.2.4.L153.B0"))&&(z="PQ");var A={id:this.globalId_++,originalId:a.representation.id,createSegmentIndex:function(){var C;return $jscomp.asyncExecutePromiseGeneratorProgram(function(D){if(1==D.nextAddress){if(A.segmentIndex)return D.jumpTo(0);C=A;return D.yield(t.generateSegmentIndex(),3)}C.segmentIndex=\nD.yieldResult;D.jumpToEnd()})},segmentIndex:null,mimeType:a.representation.mimeType,codecs:a.representation.codecs,frameRate:a.representation.frameRate,pixelAspectRatio:a.representation.pixelAspectRatio,bandwidth:a.bandwidth,width:a.representation.width,height:a.representation.height,kind:c,encrypted:0<b.drmInfos.length,drmInfos:b.drmInfos,keyIds:q,language:d,label:e,type:a.adaptationSet.contentType,primary:f,trickModeVideo:null,emsgSchemeIdUris:a.representation.emsgSchemeIdUris,roles:g,forced:w,\nchannelsCount:a.representation.numChannels,audioSamplingRate:a.representation.audioSamplingRate,spatialAudio:y,closedCaptions:h,hdr:z,tilesLayout:x};return A};\nshaka.dash.DashParser.prototype.onUpdate_=function(){var a=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){switch(d.nextAddress){case 1:return goog.asserts.assert(0<=a.updatePeriod_,"There should be an update period"),shaka.log.info("Updating manifest..."),b=0,d.setCatchFinallyBlocks(2),d.yield(a.requestManifest_(),4);case 4:b=d.yieldResult;d.leaveTryBlock(3);break;case 2:c=d.enterCatchBlock(),goog.asserts.assert(c instanceof shaka.util.Error,"Should only receive a Shaka error"),\na.playerInterface_&&(c.severity=shaka.util.Error.Severity.RECOVERABLE,a.playerInterface_.onError(c));case 3:if(!a.playerInterface_)return d["return"]();a.setUpdateTimer_(b);d.jumpToEnd()}})};shaka.dash.DashParser.prototype.setUpdateTimer_=function(a){0>this.updatePeriod_||(a=Math.max(shaka.dash.DashParser.MIN_UPDATE_PERIOD_,this.updatePeriod_-a,this.averageUpdateDuration_.getEstimate()),this.updateTimer_.tickAfter(a))};\nshaka.dash.DashParser.prototype.createFrame_=function(a,b,c){goog.asserts.assert(b||c,"Must provide either parent or baseUris");var d=shaka.util.ManifestParserUtils,e=shaka.util.XmlUtils;b=b||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,numChannels:null,audioSamplingRate:null,availabilityTimeOffset:0};c=c||b.baseUris;var f=e.parseNonNegativeInt,g=e.evalDivision,h=e.findChildren(a,"BaseURL"),k=h.map(e.getContents),l=a.getAttribute("contentType")||\nb.contentType,m=a.getAttribute("mimeType")||b.mimeType,n=a.getAttribute("codecs")||b.codecs;g=e.parseAttr(a,"frameRate",g)||b.frameRate;var p=a.getAttribute("sar")||b.pixelAspectRatio,q=this.emsgSchemeIdUris_(e.findChildren(a,"InbandEventStream"),b.emsgSchemeIdUris),r=e.findChildren(a,"AudioChannelConfiguration");r=this.parseAudioChannels_(r)||b.numChannels;var t=e.parseAttr(a,"audioSamplingRate",f)||b.audioSamplingRate;l||(l=shaka.dash.DashParser.guessContentType_(m,n));var v=e.findChild(a,"SegmentBase"),\nu=e.findChild(a,"SegmentTemplate"),y=v?e.parseAttr(v,"availabilityTimeOffset",e.parseFloat)||0:0,w=u?e.parseAttr(u,"availabilityTimeOffset",e.parseFloat)||0:0;h=h&&h.length?e.parseAttr(h[0],"availabilityTimeOffset",e.parseFloat)||0:0;h=b.availabilityTimeOffset+h+y+w;return{baseUris:d.resolveUris(c,k),segmentBase:v||b.segmentBase,segmentList:e.findChild(a,"SegmentList")||b.segmentList,segmentTemplate:u||b.segmentTemplate,width:e.parseAttr(a,"width",f)||b.width,height:e.parseAttr(a,"height",f)||b.height,\ncontentType:l,mimeType:m,codecs:n,frameRate:g,pixelAspectRatio:p,emsgSchemeIdUris:q,id:a.getAttribute("id"),numChannels:r,audioSamplingRate:t,availabilityTimeOffset:h}};shaka.dash.DashParser.prototype.emsgSchemeIdUris_=function(a,b){for(var c=b.slice(),d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next())e=e.value.getAttribute("schemeIdUri"),c.includes(e)||c.push(e);return c};\nshaka.dash.DashParser.prototype.parseAudioChannels_=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){var c=b.value;if(b=c.getAttribute("schemeIdUri"))if(c=c.getAttribute("value"))switch(b){case "urn:mpeg:dash:outputChannelPositionList:2012":return c.trim().split(/ +/).length;case "urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case "urn:dts:dash:audio_channel_configuration:2012":var d=parseInt(c,10);if(!d){shaka.log.warning("Channel parsing failure! Ignoring scheme and value",\nb,c);continue}return d;case "tag:dolby.com,2014:dash:audio_channel_configuration:2011":case "urn:dolby:dash:audio_channel_configuration:2011":d=parseInt(c,16);if(!d){shaka.log.warning("Channel parsing failure! Ignoring scheme and value",b,c);continue}for(a=0;d;)d&1&&++a,d>>=1;return a;case "urn:mpeg:mpegB:cicp:ChannelConfiguration":d=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14];var e=parseInt(c,10);if(!e){shaka.log.warning("Channel parsing failure! Ignoring scheme and value",b,c);continue}if(0<\ne&&e<d.length)return d[e];continue;default:shaka.log.warning("Unrecognized audio channel scheme:",b,c)}}return null};\nshaka.dash.DashParser.prototype.verifyRepresentation_=function(a){var b=shaka.util.ManifestParserUtils.ContentType;var c=a.segmentBase?1:0;c+=a.segmentList?1:0;c+=a.segmentTemplate?1:0;if(0==c){if(a.contentType==b.TEXT||a.contentType==b.APPLICATION)return!0;shaka.log.warning("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",\'SegmentTemplate, or explicitly indicate that it is "text".\',a);return!1}1!=c&&(shaka.log.warning("Representation contains multiple segment information sources:",\n"the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",a),a.segmentBase?(shaka.log.info("Using SegmentBase by default."),a.segmentList=null):(goog.asserts.assert(a.segmentList,"There should be a SegmentList"),shaka.log.info("Using SegmentList by default.")),a.segmentTemplate=null);return!0};\nshaka.dash.DashParser.prototype.requestForTiming_=function(a,b,c){var d=this,e,f,g,h,k,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return e=shaka.util.ManifestParserUtils.resolveUris(a,[b]),f=shaka.net.NetworkingEngine.makeRequest(e,d.config_.retryParameters),f.method=c,g=shaka.net.NetworkingEngine.RequestType.TIMING,h=d.playerInterface_.networkingEngine.request(g,f),d.operationManager_.manage(h),n.yield(h.promise,2);k=n.yieldResult;if("HEAD"==c){if(!k.headers||\n!k.headers.date)return shaka.log.warning("UTC timing response is missing","expected date header"),n["return"](0);l=k.headers.date}else l=shaka.util.StringUtils.fromUTF8(k.data);m=Date.parse(l);return isNaN(m)?(shaka.log.warning("Unable to parse date from UTC timing response"),n["return"](0)):n["return"](m-Date.now())})};\nshaka.dash.DashParser.prototype.parseUtcTiming_=function(a,b){var c=this,d,e,f,g,h,k,l,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:d=b.map(function(q){return{scheme:q.getAttribute("schemeIdUri"),value:q.getAttribute("value")}}),e=c.config_.dash.clockSyncUri,!d.length&&e&&d.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:e}),f=$jscomp.makeIterator(d),g=f.next();case 2:if(g.done){p.jumpTo(4);break}h=g.value;p.setCatchFinallyBlocks(5);k=h.scheme;\nl=h.value;switch(k){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":return p.jumpTo(7);case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":return p.jumpTo(8);case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":return m=Date.parse(l),p["return"](isNaN(m)?0:m-Date.now());case "urn:mpeg:dash:utc:http-ntp:2014":case "urn:mpeg:dash:utc:ntp:2014":case "urn:mpeg:dash:utc:sntp:2014":shaka.log.alwaysWarn("NTP UTCTiming scheme is not supported");\nbreak;default:shaka.log.alwaysWarn("Unrecognized scheme in UTCTiming element",k)}p.jumpTo(9);break;case 7:return p.yield(c.requestForTiming_(a,l,"HEAD"),10);case 10:return p["return"](p.yieldResult);case 8:return p.yield(c.requestForTiming_(a,l,"GET"),11);case 11:return p["return"](p.yieldResult);case 9:p.leaveTryBlock(3);break;case 5:n=p.enterCatchBlock(),shaka.log.warning("Error fetching time from UTCTiming elem",n.message);case 3:g=f.next();p.jumpTo(2);break;case 4:return shaka.log.alwaysWarn("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),\np["return"](0)}})};\nshaka.dash.DashParser.prototype.parseEventStream_=function(a,b,c){var d=shaka.util.XmlUtils,e=d.parseNonNegativeInt,f=c.getAttribute("schemeIdUri")||"",g=c.getAttribute("value")||"",h=d.parseAttr(c,"timescale",e)||1;c=$jscomp.makeIterator(d.findChildren(c,"Event"));for(var k=c.next();!k.done;k=c.next()){k=k.value;var l=d.parseAttr(k,"presentationTime",e)||0,m=d.parseAttr(k,"duration",e)||0;l=l/h+a;m=l+m/h;null!=b&&(l=Math.min(l,a+b),m=Math.min(m,a+b));k={schemeIdUri:f,value:g,startTime:l,endTime:m,\nid:k.getAttribute("id")||"",eventElement:k};this.playerInterface_.onTimelineRegionAdded(k)}};\nshaka.dash.DashParser.prototype.requestInitSegment_=function(a,b,c){var d=this,e,f,g,h,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=shaka.net.NetworkingEngine.RequestType.SEGMENT,f=shaka.util.Networking.createSegmentRequest(a,b,c,d.config_.retryParameters),g=d.playerInterface_.networkingEngine,h=g.request(e,f),d.operationManager_.manage(h),l.yield(h.promise,2);k=l.yieldResult;return l["return"](k.data)})};\nshaka.dash.DashParser.guessContentType_=function(a,b){var c=shaka.util.MimeUtils.getFullType(a,b);return shaka.text.TextEngine.isTypeSupported(c)?shaka.util.ManifestParserUtils.ContentType.TEXT:a.split("/")[0]};goog.exportSymbol("shaka.dash.DashParser",shaka.dash.DashParser);shaka.dash.DashParser.MIN_UPDATE_PERIOD_=3;shaka.media.ManifestParser.registerParserByExtension("mpd",function(){return new shaka.dash.DashParser});shaka.media.ManifestParser.registerParserByMime("application/dash+xml",function(){return new shaka.dash.DashParser});\nshaka.media.ManifestParser.registerParserByMime("video/vnd.mpeg.dash.mpd",function(){return new shaka.dash.DashParser});shaka.hls={};shaka.hls.Playlist=function(a,b,c,d){this.absoluteUri=a;this.type=b;this.tags=c;this.segments=d||null};shaka.hls.PlaylistType={MASTER:0,MEDIA:1};shaka.hls.Tag=function(a,b,c,d){this.id=a;this.name=b;this.attributes=c;this.value=void 0===d?null:d};\nshaka.hls.Tag.prototype.toString=function(){var a=function(c){var d=isNaN(Number(c.value))?\'"\'+c.value+\'"\':c.value;return c.name+"="+d},b="#"+this.name;a=this.attributes?this.attributes.map(a):[];this.value&&a.unshift(this.value);0<a.length&&(b+=":"+a.join(","));return b};shaka.hls.Tag.prototype.addAttribute=function(a){this.attributes.push(a)};\nshaka.hls.Tag.prototype.getAttribute=function(a){var b=this.attributes.filter(function(c){return c.name==a});goog.asserts.assert(2>b.length,"A tag should not have multiple attributes with the same name!");return b.length?b[0]:null};shaka.hls.Tag.prototype.getAttributeValue=function(a,b){var c=this.getAttribute(a);return c?c.value:b||null};\nshaka.hls.Tag.prototype.getRequiredAttrValue=function(a){var b=this.getAttribute(a);if(!b)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_ATTRIBUTE_MISSING,a);return b.value};shaka.hls.Tag.prototype.setName=function(a){this.name=a};shaka.hls.Segment=function(a,b,c){c=void 0===c?[]:c;this.tags=b;this.absoluteUri=a;this.partialSegments=c};shaka.hls.Attribute=function(a,b){this.name=a;this.value=b};shaka.hls.Utils=function(){};shaka.hls.Utils.filterTagsByName=function(a,b){return a.filter(function(c){return c.name==b})};shaka.hls.Utils.filterTagsByType=function(a,b){return a.filter(function(c){return c.getRequiredAttrValue("TYPE")==b})};shaka.hls.Utils.getFirstTagWithName=function(a,b){var c=shaka.hls.Utils.filterTagsByName(a,b);return c.length?c[0]:null};\nshaka.hls.Utils.getFirstTagWithNameAsNumber=function(a,b,c){c=void 0===c?0:c;return(a=shaka.hls.Utils.getFirstTagWithName(a,b))?Number(a.value):c};shaka.hls.Utils.constructAbsoluteUri=function(a,b){return shaka.util.ManifestParserUtils.resolveUris([a],[b])[0]};shaka.hls.Utils.isComment=function(a){return/^#(?!EXT)/m.test(a)};shaka.util.TextParser=function(a){this.data_=a;this.position_=0};shaka.util.TextParser.prototype.atEnd=function(){return this.position_==this.data_.length};shaka.util.TextParser.prototype.readLine=function(){return this.readRegexReturnCapture_(/(.*?)(\\n|$)/gm,1)};shaka.util.TextParser.prototype.readWord=function(){return this.readRegexReturnCapture_(/[^ \\t\\n]*/gm,0)};shaka.util.TextParser.prototype.skipWhitespace=function(){this.readRegex(/[ \\t]+/gm)};\nshaka.util.TextParser.prototype.readRegex=function(a){a=this.indexOf_(a);if(this.atEnd()||null==a||a.position!=this.position_)return null;this.position_+=a.length;return a.results};shaka.util.TextParser.prototype.readRegexReturnCapture_=function(a,b){if(this.atEnd())return null;var c=this.readRegex(a);return c?c[b]:null};\nshaka.util.TextParser.prototype.indexOf_=function(a){goog.asserts.assert(a.global,"global flag should be set");a.lastIndex=this.position_;a=a.exec(this.data_);return null==a?null:{position:a.index,length:a[0].length,results:a}};shaka.hls.ManifestTextParser=function(){this.globalId_=0};\nshaka.hls.ManifestTextParser.prototype.parsePlaylist=function(a,b){var c=shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS,d=shaka.hls.ManifestTextParser.SEGMENT_TAGS,e=shaka.util.StringUtils.fromUTF8(a);e=e.replace(/\\r\\n|\\r(?=[^\\n]|$)/gm,"\\n").trim();var f=e.split(/\\n+/m);if(!/^#EXTM3U($|[ \\t\\n])/m.test(f[0]))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_PLAYLIST_HEADER_MISSING);e=shaka.hls.PlaylistType.MASTER;for(var g=\n!0,h=$jscomp.makeIterator(f),k=h.next();!k.done;k=h.next())if(k=k.value,shaka.hls.Utils.isComment(k)||g)g=!1;else if(k=this.parseTag_(k),--this.globalId_,c.includes(k.name)){e=shaka.hls.PlaylistType.MEDIA;break}else"EXT-X-STREAM-INF"==k.name&&(g=!0);c=[];g=!0;h=$jscomp.makeIterator(shaka.util.Iterables.enumerate(f));for(k=h.next();!k.done;k=h.next()){var l=k.value;k=l.i;var m=l.item;l=l.next;if(shaka.hls.Utils.isComment(m)||g)g=!1;else{m=this.parseTag_(m);if(d.includes(m.name)){if(e!=shaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);d=f.splice(k,f.length-k);d=this.parseSegments_(b,d,c);return new shaka.hls.Playlist(b,e,c,d)}c.push(m);"EXT-X-STREAM-INF"==m.name&&(g=new shaka.hls.Attribute("URI",l),m.addAttribute(g),g=!0)}}return new shaka.hls.Playlist(b,e,c)};\nshaka.hls.ManifestTextParser.prototype.parseSegments_=function(a,b,c){var d=[],e=[],f=[],g=null;b=$jscomp.makeIterator(b);for(var h=b.next();!h.done;h=b.next())h=h.value,/^(#EXT)/.test(h)?(h=this.parseTag_(h),shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS.includes(h.name)?c.push(h):"EXT-X-MAP"==h.name?g=h:"EXT-X-PART"==h.name?f.push(h):"EXT-X-PRELOAD-HINT"==h.name?"PART"==h.getAttributeValue("TYPE")?f.push(h):"MAP"==h.getAttributeValue("TYPE")&&(h.setName("EXT-X-MAP"),g=h):e.push(h)):shaka.hls.Utils.isComment(h)||\n(h=h.trim(),h=shaka.hls.Utils.constructAbsoluteUri(a,h),g&&e.push(g),e=new shaka.hls.Segment(h,e,f),d.push(e),e=[],f=[]);f.length&&(g&&e.push(g),a=new shaka.hls.Segment("",e,f),d.push(a));return d};shaka.hls.ManifestTextParser.prototype.parseTag_=function(a){return shaka.hls.ManifestTextParser.parseTag(this.globalId_++,a)};\nshaka.hls.ManifestTextParser.parseTag=function(a,b){var c=b.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!c)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.INVALID_HLS_TAG,b);var d=c[1],e=c[2];c=[];var f;if(e){e=new shaka.util.TextParser(e);var g,h=e.readRegex(/^([^,=]+)(?:,|$)/g);h&&(f=h[1]);for(h=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;g=e.readRegex(h);)g=new shaka.hls.Attribute(g[1],g[2]||g[3]),c.push(g)}return new shaka.hls.Tag(a,\nd,c,f)};shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" ");shaka.hls.ManifestTextParser.SEGMENT_TAGS="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");shaka.net.DataUriPlugin=function(){};shaka.net.DataUriPlugin.parse=function(a,b,c,d){try{var e=shaka.net.DataUriPlugin.parseRaw(a);return shaka.util.AbortableOperation.completed({uri:a,originalUri:a,data:e.data,headers:{"content-type":e.contentType}})}catch(f){return shaka.util.AbortableOperation.failed(f)}};\nshaka.net.DataUriPlugin.parseRaw=function(a){var b=a.split(":");if(2>b.length||"data"!=b[0])throw shaka.log.error("Bad data URI, failed to parse scheme"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_DATA_URI,a);b=b.slice(1).join(":").split(",");if(2>b.length)throw shaka.log.error("Bad data URI, failed to extract encoding and MIME type"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,\nshaka.util.Error.Code.MALFORMED_DATA_URI,a);var c=b[0];a=window.decodeURIComponent(b.slice(1).join(","));b=c.split(";");c=b[0];var d=!1;1<b.length&&"base64"==b[b.length-1]&&(d=!0,b.pop());return{data:d?shaka.util.Uint8ArrayUtils.fromBase64(a):shaka.util.StringUtils.toUTF8(a),contentType:c}};goog.exportSymbol("shaka.net.DataUriPlugin",shaka.net.DataUriPlugin);goog.exportProperty(shaka.net.DataUriPlugin,"parse",shaka.net.DataUriPlugin.parse);shaka.net.NetworkingEngine.registerScheme("data",shaka.net.DataUriPlugin.parse);shaka.hls.HlsParser=function(){var a=this;this.config_=this.playerInterface_=null;this.globalId_=1;this.globalVariables_=new Map;this.groupIdToStreamInfosMap_=new Map;this.variantUriSet_=new Set;this.uriToStreamInfosMap_=new Map;this.presentationTimeline_=null;this.masterPlaylistUri_="";this.manifestTextParser_=new shaka.hls.ManifestTextParser;this.updatePlaylistDelay_=0;this.updatePlaylistTimer_=new shaka.util.Timer(function(){a.onUpdate_()});this.presentationType_=shaka.hls.HlsParser.PresentationType_.VOD;\nthis.manifest_=null;this.maxTargetDuration_=0;this.minTargetDuration_=Infinity;this.lowLatencyPresentationDelay_=this.partialTargetDuration_=0;this.operationManager_=new shaka.util.OperationManager;this.segmentsToNotifyByStream_=[];this.groupIdToClosedCaptionsMap_=new Map;this.aesEncrypted_=!1;this.groupIdToCodecsMap_=new Map;this.playlistStartTime_=null;this.mapTagToInitSegmentRefMap_=new Map;this.discontinuityToTso_=new Map;this.lowLatencyMode_=!1};\nshaka.hls.HlsParser.prototype.configure=function(a){this.config_=a};\nshaka.hls.HlsParser.prototype.start=function(a,b){var c=this,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return goog.asserts.assert(c.config_,"Must call configure() before start()!"),c.playerInterface_=b,c.lowLatencyMode_=b.isLowLatencyMode(),f.yield(c.requestManifest_(a),2);if(3!=f.nextAddress)return d=f.yieldResult,c.masterPlaylistUri_=d.uri,goog.asserts.assert(d.data,"Response data should be non-null!"),f.yield(c.parseManifest_(d.data),3);e=c.updatePlaylistDelay_;\n0<e&&c.updatePlaylistTimer_.tickAfter(e);goog.asserts.assert(c.manifest_,"Manifest should be non-null");return f["return"](c.manifest_)})};\nshaka.hls.HlsParser.prototype.stop=function(){this.updatePlaylistTimer_&&(this.updatePlaylistTimer_.stop(),this.updatePlaylistTimer_=null);var a=[];this.operationManager_&&(a.push(this.operationManager_.destroy()),this.operationManager_=null);this.config_=this.playerInterface_=null;this.variantUriSet_.clear();this.manifest_=null;this.uriToStreamInfosMap_.clear();this.groupIdToStreamInfosMap_.clear();this.groupIdToCodecsMap_.clear();this.globalVariables_.clear();return Promise.all(a)};\nshaka.hls.HlsParser.prototype.update=function(){var a=this,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress){if(!a.isLive_())return e["return"]();b=[];a.playlistStartTime_=null;c=Array.from(a.uriToStreamInfosMap_.values());return c.length?e.yield(a.updateStream_(c[0]),2):e.jumpTo(2)}for(d=1;d<c.length;d++)b.push(a.updateStream_(c[d]));return e.yield(Promise.all(b),0)})};\nshaka.hls.HlsParser.prototype.updateStream_=function(a){var b=this,c,d,e,f,g,h,k,l,m,n,p,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){if(1==t.nextAddress)return c=shaka.hls.HlsParser.PresentationType_,d=a.absoluteMediaPlaylistUri,e=new goog.Uri(d),b.lowLatencyMode_&&a.canSkipSegments&&e.setQueryData(new goog.Uri.QueryData("_HLS_skip=YES")),t.yield(b.requestManifest_(e.toString()),2);if(3!=t.nextAddress){f=t.yieldResult;g=b.manifestTextParser_.parsePlaylist(f.data,f.uri);if(g.type!=\nshaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);h=shaka.hls.Utils.filterTagsByName(g.tags,"EXT-X-DEFINE");k=b.parseMediaVariables_(h);l=a.stream;return t.yield(b.createSegments_(a.verbatimMediaPlaylistUri,g,l.type,l.mimeType,a.mediaSequenceToStartTime,k,a.discontinuityToMediaSequence),3)}m=t.yieldResult;l.segmentIndex.mergeAndEvict(m,b.presentationTimeline_.getSegmentAvailabilityStart());\nm.length&&(n=shaka.hls.Utils.getFirstTagWithNameAsNumber(g.tags,"EXT-X-MEDIA-SEQUENCE",0),p=a.mediaSequenceToStartTime.get(n),l.segmentIndex.evict(p));q=m[m.length-1];goog.asserts.assert(q,"Should have segments!");if(r=shaka.hls.Utils.getFirstTagWithName(g.tags,"EXT-X-ENDLIST"))b.setPresentationType_(c.VOD),b.presentationTimeline_.setDuration(q.endTime);t.jumpToEnd()})};shaka.hls.HlsParser.prototype.onExpirationUpdated=function(a,b){};\nshaka.hls.HlsParser.prototype.parseManifest_=function(a){var b=this,c,d,e,f,g,h,k,l,m,n,p,q,r,t,v,u,y,w,x,z,A,C,D,B,E,H;return $jscomp.asyncExecutePromiseGeneratorProgram(function(F){switch(F.nextAddress){case 1:c=shaka.hls.Utils;goog.asserts.assert(b.masterPlaylistUri_,"Master playlist URI must be set before calling parseManifest_!");d=b.manifestTextParser_.parsePlaylist(a,b.masterPlaylistUri_);if(d.type!=shaka.hls.PlaylistType.MASTER)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_MASTER_PLAYLIST_NOT_PROVIDED);e=c.filterTagsByName(d.tags,"EXT-X-DEFINE");b.parseMasterVariables_(e);f=c.filterTagsByName(d.tags,"EXT-X-MEDIA");g=c.filterTagsByName(d.tags,"EXT-X-STREAM-INF");b.parseCodecs_(g);h=c.filterTagsByName(d.tags,"EXT-X-SESSION-DATA");k=$jscomp.makeIterator(h);for(l=k.next();!l.done;l=k.next())if(m=l.value,n=m.getAttributeValue("DATA-ID"),p=m.getAttributeValue("URI"),q=m.getAttributeValue("LANGUAGE"),r=m.getAttributeValue("VALUE"),\nt={id:n},p&&(t.uri=shaka.hls.Utils.constructAbsoluteUri(b.masterPlaylistUri_,p)),q&&(t.language=q),r&&(t.value=r),v=new shaka.util.FakeEvent("sessiondata",t),b.playerInterface_)b.playerInterface_.onEvent(v);return F.yield(b.createStreamInfosFromMediaTags_(f),2);case 2:return b.parseClosedCaptions_(f),F.yield(b.createVariantsForTags_(g),3);case 3:return u=F.yieldResult,F.yield(b.parseTexts_(f),4);case 4:y=F.yieldResult;if(!b.playerInterface_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);if(b.aesEncrypted_&&0==u.length)throw shaka.log.info("No stream is created, because we don\'t support AES-128","encryption yet"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_AES_128_ENCRYPTION_NOT_SUPPORTED);x=w=Infinity;z=$jscomp.makeIterator(b.uriToStreamInfosMap_.values());for(A=z.next();!A.done;A=z.next())C=A.value,w=Math.min(w,C.minTimestamp),"text"!=\nC.stream.type&&(x=Math.min(x,C.maxTimestamp-C.minTimestamp));goog.asserts.assert(null==b.presentationTimeline_,"Presentation timeline created early!");b.createPresentationTimeline_();goog.asserts.assert(b.presentationTimeline_,"Presentation timeline not created!");if(b.isLive_())b.updatePlaylistDelay_=b.minTargetDuration_,D=shaka.hls.HlsParser.PresentationType_,b.presentationType_==D.LIVE&&(B=b.presentationTimeline_.getDelay(),isNaN(b.config_.availabilityWindowOverride)||(B=b.config_.availabilityWindowOverride),\nb.presentationTimeline_.setSegmentAvailabilityDuration(B));else for(b.presentationTimeline_.setDuration(x),b.presentationTimeline_.offset(-w),E=$jscomp.makeIterator(b.uriToStreamInfosMap_.values()),A=E.next();!A.done;A=E.next())H=A.value,H.stream.segmentIndex.offset(-w),H.stream.segmentIndex.fit(0,x);b.manifest_={presentationTimeline:b.presentationTimeline_,variants:u,textStreams:y,imageStreams:[],offlineSessionIds:[],minBufferTime:0};b.playerInterface_.makeTextStreamsForClosedCaptions(b.manifest_);\nF.jumpToEnd()}})};shaka.hls.HlsParser.prototype.parseMasterVariables_=function(a){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){var c=b.value;b=c.getAttributeValue("NAME");c=c.getAttributeValue("VALUE");b&&c&&(this.globalVariables_.has(b)||this.globalVariables_.set(b,c))}};\nshaka.hls.HlsParser.prototype.parseMediaVariables_=function(a){var b=new Map;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value;c=d.getAttributeValue("NAME");var e=d.getAttributeValue("VALUE");d=d.getAttributeValue("IMPORT");c&&e&&b.set(c,e);d&&(c=this.globalVariables_.get(d))&&b.set(d,c)}return b};\nshaka.hls.HlsParser.prototype.parseCodecs_=function(a){var b=shaka.util.ManifestParserUtils.ContentType;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){var d=c.value,e=d.getAttributeValue("AUDIO");c=d.getAttributeValue("VIDEO");var f=d.getAttributeValue("SUBTITLES");d=this.getCodecsForVariantTag_(d);if(f){var g=shaka.util.ManifestParserUtils.guessCodecsSafe(b.TEXT,d);goog.asserts.assert(null!=g,"Text codecs should be valid.");this.groupIdToCodecsMap_.set(f,g);shaka.util.ArrayUtils.remove(d,\ng)}e&&(f=shaka.util.ManifestParserUtils.guessCodecs(b.AUDIO,d),this.groupIdToCodecsMap_.set(e,f));c&&(e=shaka.util.ManifestParserUtils.guessCodecs(b.VIDEO,d),this.groupIdToCodecsMap_.set(c,e))}};\nshaka.hls.HlsParser.prototype.parseTexts_=function(a){var b=this,c,d,e,f,g,h,k,l,m,n,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return c=shaka.hls.Utils.filterTagsByType(a,"SUBTITLES"),d=c.map(function(t){var v,u,y;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){if(1==w.nextAddress){if(v=b.config_.disableText)return w["return"](null);w.setCatchFinallyBlocks(2);return w.yield(b.createStreamInfoFromMediaTag_(t),4)}if(2!=w.nextAddress)return u=\nw.yieldResult,goog.asserts.assert(u,"Should always have a streamInfo for text"),w["return"](u.stream);y=w.enterCatchBlock();if(b.config_.hls.ignoreTextStreamFailures)return w["return"](null);throw y;})}),r.yield(Promise.all(d),2);e=r.yieldResult;f=$jscomp.makeIterator(c);for(g=f.next();!g.done;g=f.next())if(h=g.value,k=h.getRequiredAttrValue("GROUP-ID"),l=b.groupIdToCodecsMap_.get(k))if(m=b.groupIdToStreamInfosMap_.get(k))for(n=$jscomp.makeIterator(m),p=n.next();!p.done;p=n.next())q=p.value,q.stream.codecs=\nl;return r["return"](e.filter(function(t){return t}))})};\nshaka.hls.HlsParser.prototype.createStreamInfosFromMediaTags_=function(a){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return a=a.filter(function(e){var f=e.getAttributeValue("URI")||"";return"SUBTITLES"!=e.getAttributeValue("TYPE")&&""!=f}),a.length?d.yield(b.createStreamInfoFromMediaTag_(a[0]),2):d.jumpTo(2);c=a.slice(1).map(function(e){return b.createStreamInfoFromMediaTag_(e)});return d.yield(Promise.all(c),0)})};\nshaka.hls.HlsParser.prototype.createVariantsForTags_=function(a){var b=this,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return c=a.map(function(g){var h,k,l,m,n,p,q,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(t){return 1==t.nextAddress?(h=g.getAttributeValue("FRAME-RATE"),k=Number(g.getRequiredAttrValue("BANDWIDTH")),l=g.getAttributeValue("RESOLUTION"),m=$jscomp.makeIterator(l?l.split("x"):[null,null]),n=m.next().value,p=m.next().value,\nq=g.getAttributeValue("VIDEO-RANGE"),t.yield(b.createStreamInfosForVariantTag_(g,l,h),2)):(r=t.yieldResult)?(goog.asserts.assert(r.audio.length||r.video.length,"We should have created a stream!"),t["return"](b.createVariants_(r.audio,r.video,k,n,p,h,q))):t["return"]([])})}),f.yield(Promise.all(c),2);d=f.yieldResult;e=d.reduce(shaka.util.Functional.collapseArrays,[]);e=e.filter(function(g){return null!=g});return f["return"](e)})};\nshaka.hls.HlsParser.prototype.createStreamInfosForVariantTag_=function(a,b,c){var d=this,e,f,g,h,k,l,m,n,p,q,r,t,v,u;return $jscomp.asyncExecutePromiseGeneratorProgram(function(y){if(1==y.nextAddress)return e=shaka.util.ManifestParserUtils.ContentType,f=d.getCodecsForVariantTag_(a),g=a.getAttributeValue("AUDIO"),h=a.getAttributeValue("VIDEO"),goog.asserts.assert(null==g||null==h,"Unexpected: both video and audio described by media tags!"),l=(k=g||h)&&d.groupIdToStreamInfosMap_.has(k)?d.groupIdToStreamInfosMap_.get(k):\n[],m={audio:g?l:[],video:h?l:[]},shaka.log.debug("Guessing stream type for",a.toString()),p=!1,q=a.getRequiredAttrValue("URI"),r=m.audio.find(function(w){return w&&w.verbatimMediaPlaylistUri==q}),t=shaka.util.ManifestParserUtils.guessCodecsSafe(e.VIDEO,f),(v=shaka.util.ManifestParserUtils.guessCodecsSafe(e.AUDIO,f))&&!t?(n=e.AUDIO,shaka.log.debug("Guessing audio-only.")):!l.length&&v&&t?(shaka.log.debug("Guessing multiplexed audio+video."),n=e.VIDEO,f=[[t,v].join()]):m.audio.length&&r?(shaka.log.debug("Guessing audio-only."),\nn=e.AUDIO,p=!0):m.video.length?(shaka.log.debug("Guessing audio-only."),n=e.AUDIO):(shaka.log.debug("Guessing video-only."),n=e.VIDEO),p?y.jumpTo(2):y.yield(d.createStreamInfoFromVariantTag_(a,f,n),3);2!=y.nextAddress&&(u=y.yieldResult);if(u)m[u.stream.type]=[u];else if(null===u)return shaka.log.debug("streamInfo is null"),y["return"](null);d.filterLegacyCodecs_(m);return y["return"](m)})};\nshaka.hls.HlsParser.prototype.getCodecsForVariantTag_=function(a){var b=[];this.config_.disableVideo||b.push("avc1.42E01E");this.config_.disableAudio||b.push("mp4a.40.2");b=b.join(",");var c=a.getAttributeValue("CODECS",b).split(/\\s*,\\s*/);a=new Set;b=[];c=$jscomp.makeIterator(c);for(var d=c.next();!d.done;d=c.next()){d=d.value;var e=shaka.util.MimeUtils.getCodecBase(d);a.has(e)?shaka.log.debug("Ignoring duplicate codec"):(b.push(d),a.add(e))}return b};\nshaka.hls.HlsParser.prototype.getChannelsCount_=function(a){a=a.getAttributeValue("CHANNELS");if(!a)return null;a=a.split("/")[0];return parseInt(a,10)};shaka.hls.HlsParser.prototype.isSpatialAudio_=function(a){return(a=a.getAttributeValue("CHANNELS"))?a.includes("/JOC"):!1};\nshaka.hls.HlsParser.prototype.getClosedCaptions_=function(a,b){var c=shaka.util.ManifestParserUtils.ContentType,d=a.getAttributeValue("CLOSED-CAPTIONS");return b==c.VIDEO&&d&&"NONE"!=d?this.groupIdToClosedCaptionsMap_.get(d):null};shaka.hls.HlsParser.prototype.getLanguage_=function(a){var b=shaka.util.LanguageUtils;a=a.getAttributeValue("LANGUAGE")||"und";return b.normalize(a)};\nshaka.hls.HlsParser.prototype.getType_=function(a){a=a.getRequiredAttrValue("TYPE").toLowerCase();"subtitles"==a&&(a=shaka.util.ManifestParserUtils.ContentType.TEXT);return a};shaka.hls.HlsParser.prototype.filterLegacyCodecs_=function(a){a=$jscomp.makeIterator(a.audio.concat(a.video));for(var b=a.next();!b.done;b=a.next())if(b=b.value){var c=b.stream.codecs.split(",");c=c.filter(function(d){return"mp4a.40.34"!=d});b.stream.codecs=c.join(",")}};\nshaka.hls.HlsParser.prototype.createVariants_=function(a,b,c,d,e,f,g){for(var h=shaka.util.ManifestParserUtils.ContentType,k=shaka.media.DrmEngine,l=$jscomp.makeIterator(b),m=l.next();!m.done;m=l.next())this.addVideoAttributes_(m.value.stream,d,e,f,g);d=this.config_.disableAudio;if(!a.length||d)a=[null];d=this.config_.disableVideo;if(!b.length||d)b=[null];d=[];a=$jscomp.makeIterator(a);for(e=a.next();!e.done;e=a.next())for(e=e.value,f=$jscomp.makeIterator(b),g=f.next();!g.done;g=f.next()){var n=g.value;\ng=e?e.stream:null;l=n?n.stream:null;m=e?e.stream.drmInfos:null;var p=n?n.stream.drmInfos:null;n=(n?n.verbatimMediaPlaylistUri:"")+" - "+(e?e.verbatimMediaPlaylistUri:"");g&&l&&!k.areDrmCompatible(m,p)?shaka.log.warning("Incompatible DRM info in HLS variant.  Skipping."):this.variantUriSet_.has(n)?shaka.log.debug("Skipping variant which only differs in text streams."):(goog.asserts.assert(!g||g.type==h.AUDIO,"Audio parameter mismatch!"),goog.asserts.assert(!l||l.type==h.VIDEO,"Video parameter mismatch!"),\ng={id:this.globalId_++,language:g?g.language:"und",primary:!!g&&g.primary||!!l&&l.primary,audio:g,video:l,bandwidth:c,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},d.push(g),this.variantUriSet_.add(n))}return d};\nshaka.hls.HlsParser.prototype.parseClosedCaptions_=function(a){a=shaka.hls.Utils.filterTagsByType(a,"CLOSED-CAPTIONS");a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){var c=b.value;goog.asserts.assert("EXT-X-MEDIA"==c.name,"Should only be called on media tags!");b=this.getLanguage_(c);var d=c.getRequiredAttrValue("GROUP-ID");c=c.getRequiredAttrValue("INSTREAM-ID");this.groupIdToClosedCaptionsMap_.get(d)||this.groupIdToClosedCaptionsMap_.set(d,new Map);this.groupIdToClosedCaptionsMap_.get(d).set(c,\nb)}};\nshaka.hls.HlsParser.prototype.createStreamInfoFromMediaTag_=function(a){var b=this,c,d,e,f,g,h,k,l,m,n,p,q,r,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress){goog.asserts.assert("EXT-X-MEDIA"==a.name,"Should only be called on media tags!");c=a.getRequiredAttrValue("GROUP-ID");d="";e=b.getType_(a);e!=shaka.util.ManifestParserUtils.ContentType.TEXT&&c&&b.groupIdToCodecsMap_.has(c)&&(d=b.groupIdToCodecsMap_.get(c));f=b.variableSubstitution_(a.getRequiredAttrValue("URI"),b.globalVariables_);\nif(b.uriToStreamInfosMap_.has(f))return v["return"](b.uriToStreamInfosMap_.get(f));g=b.getLanguage_(a);h=a.getAttributeValue("NAME");k=a.getAttribute("DEFAULT");l="YES"==k;m="audio"==e?b.getChannelsCount_(a):null;n="audio"==e?b.isSpatialAudio_(a):!1;p=a.getAttributeValue("CHARACTERISTICS");q=a.getAttributeValue("FORCED");r="YES"==q;return v.yield(b.createStreamInfo_(f,d,e,g,l,h,m,null,p,r,n),2)}t=v.yieldResult;b.groupIdToStreamInfosMap_.has(c)?b.groupIdToStreamInfosMap_.get(c).push(t):b.groupIdToStreamInfosMap_.set(c,\n[t]);if(null==t)return v["return"](null);if(b.uriToStreamInfosMap_.has(f))return v["return"](b.uriToStreamInfosMap_.get(f));b.uriToStreamInfosMap_.set(f,t);return v["return"](t)})};\nshaka.hls.HlsParser.prototype.createStreamInfoFromVariantTag_=function(a,b,c){var d=this,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){goog.asserts.assert("EXT-X-STREAM-INF"==a.name,"Should only be called on variant tags!");e=d.variableSubstitution_(a.getRequiredAttrValue("URI"),d.globalVariables_);if(d.uriToStreamInfosMap_.has(e))return k["return"](d.uriToStreamInfosMap_.get(e));f=d.getClosedCaptions_(a,c);g=shaka.util.ManifestParserUtils.guessCodecs(c,\nb);return k.yield(d.createStreamInfo_(e,g,c,"und",!1,null,null,f,null,!1,!1),2)}h=k.yieldResult;if(null==h)return k["return"](null);if(d.uriToStreamInfosMap_.has(e))return k["return"](d.uriToStreamInfosMap_.get(e));d.uriToStreamInfosMap_.set(e,h);return k["return"](h)})};\nshaka.hls.HlsParser.prototype.createStreamInfo_=function(a,b,c,d,e,f,g,h,k,l,m){var n=this,p,q,r,t,v,u,y,w,x,z,A,C,D,B,E,H,F,I,G,J,L,K,Q,M,N,P,R,T,W,X,Y,Z,U,V,S,aa,ba,ca,da;return $jscomp.asyncExecutePromiseGeneratorProgram(function(O){switch(O.nextAddress){case 1:return p=shaka.hls.Utils.constructAbsoluteUri(n.masterPlaylistUri_,a),O.yield(n.requestManifest_(p),2);case 2:q=O.yieldResult;p=q.uri;r=n.manifestTextParser_.parsePlaylist(q.data,p);if(r.type!=shaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);t=[];if(r.segments)for(v=$jscomp.makeIterator(r.segments),u=v.next();!u.done;u=v.next())y=u.value,w=shaka.hls.Utils.filterTagsByName(y.tags,"EXT-X-KEY"),t.push.apply(t,$jscomp.arrayFromIterable(w));x=!1;z=[];A=new Set;C=$jscomp.makeIterator(t);for(D=C.next();!D.done;D=C.next())if(B=D.value,E=B.getRequiredAttrValue("METHOD"),"NONE"!=E){x=!0;if("AES-128"==E)return shaka.log.warning("Unsupported HLS Encryption",\nE),n.aesEncrypted_=!0,O["return"](null);H=B.getRequiredAttrValue("KEYFORMAT");if(I=(F=shaka.hls.HlsParser.KEYFORMATS_TO_DRM_PARSERS_[H])?F(B):null){if(I.keyIds)for(G=$jscomp.makeIterator(I.keyIds),J=G.next();!J.done;J=G.next())L=J.value,A.add(L);z.push(I)}else shaka.log.warning("Unsupported HLS KEYFORMAT",H)}if(x&&!z.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_KEYFORMATS_NOT_SUPPORTED);K=shaka.hls.Utils.filterTagsByName(r.tags,\n"EXT-X-DEFINE");Q=n.parseMediaVariables_(K);goog.asserts.assert(null!=r.segments,"Media playlist should have segments!");n.determinePresentationType_(r);return O.yield(n.guessMimeType_(c,b,r,Q),3);case 3:return M=O.yieldResult,shaka.hls.HlsParser.RAW_FORMATS_.includes(M)&&(b=""),N=new Map,P=new Map,O.setCatchFinallyBlocks(4),O.yield(n.createSegments_(a,r,c,M,N,Q,P),6);case 6:R=O.yieldResult;O.leaveTryBlock(5);break;case 4:T=O.enterCatchBlock();if(T.code==shaka.util.Error.Code.HLS_INTERNAL_SKIP_STREAM)return shaka.log.alwaysWarn("Skipping unsupported HLS stream",\nM,a),O["return"](null);throw T;case 5:W=R[0].startTime;X=R[R.length-1].endTime;Y=new shaka.media.SegmentIndex(R);Z=c==shaka.util.ManifestParserUtils.ContentType.TEXT?shaka.util.ManifestParserUtils.TextStreamKind.SUBTITLE:void 0;U=[];if(k)for(V=$jscomp.makeIterator(k.split(",")),S=V.next();!S.done;S=V.next())aa=S.value,U.push(aa);ca=(ba=shaka.hls.Utils.getFirstTagWithName(r.tags,"EXT-X-SERVER-CONTROL"))?null!=ba.getAttribute("CAN-SKIP-UNTIL"):!1;da={id:n.globalId_++,originalId:f,createSegmentIndex:function(){return Promise.resolve()},\nsegmentIndex:Y,mimeType:M,codecs:b,kind:Z,encrypted:x,drmInfos:z,keyIds:A,language:d,label:f,type:c,primary:e,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:U,forced:l,channelsCount:g,audioSamplingRate:null,spatialAudio:m,closedCaptions:h,hdr:void 0,tilesLayout:void 0};return O["return"]({stream:da,verbatimMediaPlaylistUri:a,absoluteMediaPlaylistUri:p,minTimestamp:W,maxTimestamp:X,mediaSequenceToStartTime:N,discontinuityToMediaSequence:P,\ncanSkipSegments:ca})}})};\nshaka.hls.HlsParser.prototype.determinePresentationType_=function(a){var b=shaka.hls.HlsParser.PresentationType_,c=shaka.hls.Utils.getFirstTagWithName(a.tags,"EXT-X-PLAYLIST-TYPE"),d=shaka.hls.Utils.getFirstTagWithName(a.tags,"EXT-X-ENDLIST");d=c&&"VOD"==c.value||d;c=c&&"EVENT"==c.value&&!d;c=!d&&!c;d?this.setPresentationType_(b.VOD):(c?this.setPresentationType_(b.LIVE):this.setPresentationType_(b.EVENT),b=this.getRequiredTag_(a.tags,"EXT-X-TARGETDURATION"),b=Number(b.value),d=shaka.hls.Utils.getFirstTagWithName(a.tags,\n"EXT-X-PART-INF"),this.lowLatencyMode_&&d?(this.partialTargetDuration_=Number(d.getRequiredAttrValue("PART-TARGET")),this.minTargetDuration_=Math.min(this.partialTargetDuration_,this.minTargetDuration_),this.lowLatencyPresentationDelay_=(a=shaka.hls.Utils.getFirstTagWithName(a.tags,"EXT-X-SERVER-CONTROL"))?Number(a.getRequiredAttrValue("PART-HOLD-BACK")):0):this.minTargetDuration_=Math.min(b,this.minTargetDuration_),this.maxTargetDuration_=Math.max(b,this.maxTargetDuration_))};\nshaka.hls.HlsParser.prototype.createPresentationTimeline_=function(){this.isLive_()?(this.presentationTimeline_=new shaka.media.PresentationTimeline(0,this.config_.defaultPresentationDelay?this.config_.defaultPresentationDelay:this.lowLatencyPresentationDelay_?this.lowLatencyPresentationDelay_:3*this.maxTargetDuration_),this.presentationTimeline_.setStatic(!1)):(this.presentationTimeline_=new shaka.media.PresentationTimeline(null,0),this.presentationTimeline_.setStatic(!0));this.notifySegments_();\ngoog.asserts.assert(!this.presentationTimeline_.usingPresentationStartTime(),"We should not be using the presentation start time in HLS!")};\nshaka.hls.HlsParser.prototype.getInitSegmentReference_=function(a,b,c){b=shaka.hls.Utils.getFirstTagWithName(b,"EXT-X-MAP");if(!b)return null;var d=b.getRequiredAttrValue("URI");c=this.variableSubstitution_(shaka.hls.Utils.constructAbsoluteUri(a,d),c);a=[c,b.getAttributeValue("BYTERANGE","")].join("-");this.mapTagToInitSegmentRefMap_.has(a)||(b=this.createInitSegmentReference_(c,b),this.mapTagToInitSegmentRefMap_.set(a,b));return this.mapTagToInitSegmentRefMap_.get(a)};\nshaka.hls.HlsParser.prototype.createInitSegmentReference_=function(a,b){var c=0,d=null,e=b.getAttributeValue("BYTERANGE");e&&(c=e.split("@"),d=Number(c[0]),c=Number(c[1]),d=c+d-1);return new shaka.media.InitSegmentReference(function(){return[a]},c,d)};\nshaka.hls.HlsParser.prototype.createSegmentReference_=function(a,b,c,d,e,f,g){var h=c.tags,k=this.variableSubstitution_(c.absoluteUri,f),l=shaka.hls.Utils.getFirstTagWithName(h,"EXTINF"),m=0;f=0;var n=null,p=[];if(this.lowLatencyMode_&&c.partialSegments.length){m={};c=$jscomp.makeIterator(shaka.util.Iterables.enumerate(c.partialSegments));for(var q=c.next();!q.done;m={$jscomp$loop$prop$pAbsoluteUri$600:m.$jscomp$loop$prop$pAbsoluteUri$600},q=c.next()){q=q.value;var r=q.i;q=q.item;var t=0==r?b:p[p.length-\n1];r=0==r?d:t.endTime;var v=Number(q.getAttributeValue("DURATION"));v=r+v;var u=0,y=null;"EXT-X-PRELOAD-HINT"==q.name?u=(t=q.getAttributeValue("BYTERANGE-START"))?Number(t):0:(u=q.getAttributeValue("BYTERANGE"),t=$jscomp.makeIterator(this.parseByteRange_(t,u)),u=t.next().value,y=t.next().value);q=q.getAttributeValue("URI");m.$jscomp$loop$prop$pAbsoluteUri$600=shaka.hls.Utils.constructAbsoluteUri(g,q);q=new shaka.media.SegmentReference(r,v,function(w){return function(){return[w.$jscomp$loop$prop$pAbsoluteUri$600]}}(m),\nu,y,a,e,0,Infinity);p.push(q)}}else if(!l)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_TAG_MISSING,"EXTINF");l?(g=l.value.split(","),m=d+Number(g[0])):m=p[p.length-1].endTime;(h=shaka.hls.Utils.getFirstTagWithName(h,"EXT-X-BYTERANGE"))?(b=$jscomp.makeIterator(this.parseByteRange_(b,h.value)),f=b.next().value,n=b.next().value):p.length&&(f=p[0].startByte,n=p[p.length-1].endByte);return new shaka.media.SegmentReference(d,\nm,function(){return k.length?[k]:[]},f,n,a,e,0,Infinity,p)};shaka.hls.HlsParser.prototype.parseByteRange_=function(a,b){var c=0,d=null;b&&(c=b.split("@"),d=Number(c[0]),c[1]?c=Number(c[1]):(goog.asserts.assert(a,"Cannot refer back to previous HLS segment!"),c=a.endByte+1),d=c+d-1);return[c,d]};\nshaka.hls.HlsParser.prototype.notifySegments_=function(){if(this.presentationTimeline_){for(var a=$jscomp.makeIterator(this.segmentsToNotifyByStream_),b=a.next();!b.done;b=a.next())this.presentationTimeline_.notifySegments(b.value);this.segmentsToNotifyByStream_=[]}};\nshaka.hls.HlsParser.prototype.createSegments_=function(a,b,c,d,e,f,g){var h=this,k,l,m,n,p,q,r,t,v,u,y,w,x,z,A,C,D,B,E,H,F,I,G,J,L;return $jscomp.asyncExecutePromiseGeneratorProgram(function(K){switch(K.nextAddress){case 1:k=b.segments;goog.asserts.assert(k.length,"Playlist should have segments!");m=shaka.hls.Utils.getFirstTagWithNameAsNumber(b.tags,"EXT-X-MEDIA-SEQUENCE",0);p=(n=shaka.hls.Utils.getFirstTagWithName(b.tags,"EXT-X-SKIP"))?Number(n.getAttributeValue("SKIPPED-SEGMENTS")):0;q=m+p;if(h.isLive_()&&\ne.has(q)){r=e.get(q);K.jumpTo(2);break}if(null!=h.playlistStartTime_){K.jumpTo(3);break}l=h.getInitSegmentReference_(b.absoluteUri,k[0].tags,f);goog.asserts.assert(c!=shaka.util.ManifestParserUtils.ContentType.TEXT,"Should only get start time from audio or video streams");t=h;return K.yield(h.getStartTime_(a,l,d,q,!1,k[0],f),4);case 4:t.playlistStartTime_=K.yieldResult;case 3:r=h.playlistStartTime_;case 2:v=k[0].absoluteUri;shaka.log.debug("First segment",v.split("/").pop(),"starts at",r);u=shaka.hls.Utils.getFirstTagWithNameAsNumber(b.tags,\n"EXT-X-DISCONTINUITY-SEQUENCE");if(h.lowLatencyMode_&&(g.has(u)||g.set(u,q),p))for(;g.has(u+1)&&g.get(u+1)<q;)u++;y=h.discontinuityToTso_.get(u)||0;w=[];x=function(Q){return shaka.util.Iterables.enumerate(Q)};z=$jscomp.makeIterator(x(k));A=z.next();case 5:if(A.done){K.jumpTo(7);break}D=C=A.value;B=D.i;E=D.item;H=w[w.length-1];F=0==B?r:H.endTime;q=m+p+B;e.set(q,F);l=h.getInitSegmentReference_(b.absoluteUri,E.tags,f);I=shaka.hls.Utils.getFirstTagWithName(E.tags,"EXT-X-DISCONTINUITY");if(!I){K.jumpTo(8);\nbreak}u++;g.set(u,q);return K.yield(h.getTimestampOffset_(u,a,l,d,q,E,f,F),9);case 9:y=K.yieldResult;case 8:!h.lowLatencyMode_&&(G=h.playerInterface_.isAutoLowLatencyMode())&&(h.playerInterface_.enableLowLatencyMode(),h.lowLatencyMode_=h.playerInterface_.isLowLatencyMode());J=shaka.hls.Utils.getFirstTagWithName(E.tags,"EXTINF");h.lowLatencyMode_||J?(L=h.createSegmentReference_(l,H,E,F,y,f,b.absoluteUri),w.push(L)):h.lowLatencyMode_||shaka.log.alwaysWarn("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");\nA=z.next();K.jumpTo(5);break;case 7:return h.segmentsToNotifyByStream_.push(w),h.notifySegments_(),K["return"](w)}})};\nshaka.hls.HlsParser.prototype.getTimestampOffset_=function(a,b,c,d,e,f,g,h){var k=this,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return l=0,k.discontinuityToTso_.has(a)?(l=k.discontinuityToTso_.get(a),n.jumpTo(2)):n.yield(k.getStartTime_(b,c,d,e,!0,f,g),3);2!=n.nextAddress&&(m=n.yieldResult,l=h-m,shaka.log.v1("Segment timestampOffset =",l),k.discontinuityToTso_.set(a,l));return n["return"](l)})};\nshaka.hls.HlsParser.prototype.fetchStartOfSegment_=function(a){var b=this,c,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:c=shaka.net.NetworkingEngine.RequestType.SEGMENT;d=shaka.util.Networking.createSegmentRequest(a.getUris(),a.startByte,a.endByte,b.config_.retryParameters);if(b.config_.hls.useFullSegmentsForStartTime)return k["return"](b.makeNetworkRequest_(d,c));e=shaka.util.Networking.createSegmentRequest(a.getUris(),a.startByte,a.startByte+\nshaka.hls.HlsParser.START_OF_SEGMENT_SIZE_-1,b.config_.retryParameters);k.setCatchFinallyBlocks(2);return k.yield(b.makeNetworkRequest_(e,c),4);case 4:return f=k.yieldResult,k["return"](f);case 2:g=k.enterCatchBlock();if(g.code==shaka.util.Error.Code.OPERATION_ABORTED)throw g;shaka.log.alwaysWarn("Unable to fetch the starting part of HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",e.uris[0]);return k.yield(b.makeNetworkRequest_(d,\nc),5);case 5:return h=k.yieldResult,k["return"](h)}})};\nshaka.hls.HlsParser.prototype.getStartTime_=function(a,b,c,d,e,f,g){var h=this,k,l,m,n,p,q,r,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){switch(v.nextAddress){case 1:k=h.createSegmentReference_(b,null,f,0,0,g,"");if(h.manifest_&&!e){l=h.uriToStreamInfosMap_.get(a);m=l.mediaSequenceToStartTime.get(d);if(void 0!=m)return shaka.log.v1("Found segment start time in previous manifest",m),v["return"](m);shaka.log.debug("Unable to find segment start time in previous manifest!")}shaka.log.v1("Fetching segment to find start time");c=\nc.toLowerCase();if(shaka.hls.HlsParser.RAW_FORMATS_.includes(c))throw shaka.log.alwaysWarn("Raw formats are not yet supported.  Skipping "+c),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INTERNAL_SKIP_STREAM);if("video/webm"==c)throw shaka.log.alwaysWarn("WebM in HLS is not yet supported.  Skipping."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INTERNAL_SKIP_STREAM);\nif("video/mp4"!=c&&"audio/mp4"!=c){v.jumpTo(2);break}n=[h.fetchStartOfSegment_(k)];b&&n.push(h.fetchStartOfSegment_(b));return v.yield(Promise.all(n),3);case 3:return p=v.yieldResult,q=p[0],r=p[1]||p[0],v["return"](h.getStartTimeFromMp4Segment_(a,q.uri,q.data,r.data));case 2:if("video/mp2t"!=c){v.jumpTo(4);break}return v.yield(h.fetchStartOfSegment_(k),5);case 5:return t=v.yieldResult,goog.asserts.assert(t.data,"Should have a response body!"),v["return"](h.getStartTimeFromTsSegment_(a,t.uri,t.data));\ncase 4:throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME,a);}})};\nshaka.hls.HlsParser.prototype.getStartTimeFromMp4Segment_=function(a,b,c,d){var e=shaka.util.Mp4Parser,f=0;(new e).box("moov",e.children).box("trak",e.children).box("mdia",e.children).fullBox("mdhd",function(k){goog.asserts.assert(0==k.version||1==k.version,"MDHD version can only be 0 or 1");f=shaka.util.Mp4BoxParsers.parseMDHD(k.reader,k.version).timescale;k.parser.stop()}).parse(d,!0);if(!f)throw shaka.log.error("Unable to find timescale in init segment!"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME,a,b);var g=0,h=!1;(new e).box("moof",e.children).box("traf",e.children).fullBox("tfdt",function(k){goog.asserts.assert(0==k.version||1==k.version,"TFDT version can only be 0 or 1");g=shaka.util.Mp4BoxParsers.parseTFDT(k.reader,k.version).baseMediaDecodeTime/f;h=!0;k.parser.stop()}).parse(c,!0);if(!h)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME,\na,b);return g};\nshaka.hls.HlsParser.prototype.getStartTimeFromTsSegment_=function(a,b,c){var d=new shaka.util.DataViewReader(c,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),e=function(){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_PARSE_SEGMENT_START_TIME,a,b);},f=0,g=0;for(c=function(){d.seek(f+188);g=d.readUint8();71!=g&&(d.seek(f+192),g=d.readUint8());71!=g&&(d.seek(f+204),g=d.readUint8());71!=g&&e();d.rewind(1)};;){f=d.getPosition();\ng=d.readUint8();71!=g&&e();var h=d.readUint16();if(8191==(h&8191))c();else if(h&16384)if(h=(d.readUint8()&48)>>4,0!=h&&2!=h||e(),3==h&&(h=d.readUint8(),d.skip(h)),1!=d.readUint32()>>8)c();else{d.skip(3);c=d.readUint8()>>6;0!=c&&1!=c||e();h=d.readUint8();0==h&&e();2==c?goog.asserts.assert(5==h,"Bad PES header?"):3==c&&goog.asserts.assert(10==h,"Bad PES header?");c=d.readUint8();h=d.readUint16();var k=d.readUint16();return(1073741824*((c&14)>>1)+((h&65534)<<14|(k&65534)>>1))/shaka.hls.HlsParser.TS_TIMESCALE_}else c()}};\nshaka.hls.HlsParser.prototype.variableSubstitution_=function(a,b){var c=String(a).replace(/%7B/g,"{").replace(/%7D/g,"}"),d=c.match(/{\\$\\w*}/g);if(d){d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next()){e=e.value;var f=e.slice(2,e.length-1),g=b.get(f);if(g)c=c.replace(e,g);else throw shaka.log.error("A variable has been found that is not declared",f),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_VARIABLE_NOT_FOUND,\nf);}}return c};\nshaka.hls.HlsParser.prototype.guessMimeType_=function(a,b,c,d){var e=this,f,g,h,k,l,m,n,p,q,r,t,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){if(1==u.nextAddress){f=shaka.hls.HlsParser;g=shaka.util.ManifestParserUtils.ContentType;h=shaka.net.NetworkingEngine.RequestType.SEGMENT;goog.asserts.assert(c.segments.length,"Playlist should have segments!");k=e.variableSubstitution_(c.segments[0].absoluteUri,d);l=new goog.Uri(k);m=l.getPath().split(".").pop();n=f.EXTENSION_MAP_BY_CONTENT_TYPE_[a];if(p=\nn[m])return u["return"](p);if(a==g.TEXT)return b&&"vtt"!=b&&"wvtt"!=b?u["return"]("application/mp4"):u["return"]("text/vtt");q=shaka.net.NetworkingEngine.makeRequest([k],e.config_.retryParameters);q.method="HEAD";return u.yield(e.makeNetworkRequest_(q,h),2)}r=u.yieldResult;t=r.headers["content-type"];return t?u["return"](t.split(";")[0]):(v=n.mp4,u["return"](v))})};\nshaka.hls.HlsParser.prototype.getRequiredTag_=function(a,b){var c=shaka.hls.Utils.getFirstTagWithName(a,b);if(!c)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_TAG_MISSING,b);return c};shaka.hls.HlsParser.prototype.addVideoAttributes_=function(a,b,c,d,e){a&&(a.width=Number(b)||void 0,a.height=Number(c)||void 0,a.frameRate=Number(d)||void 0,a.hdr=e||void 0)};\nshaka.hls.HlsParser.prototype.requestManifest_=function(a){var b=shaka.net.NetworkingEngine.RequestType.MANIFEST;a=shaka.net.NetworkingEngine.makeRequest([a],this.config_.retryParameters);return this.makeNetworkRequest_(a,b)};\nshaka.hls.HlsParser.prototype.onUpdate_=function(){var a=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress){shaka.log.info("Updating manifest...");goog.asserts.assert(0<a.updatePlaylistDelay_,"We should only call |onUpdate_| when we are suppose to be updating.");if(!a.playerInterface_)return d["return"]();d.setCatchFinallyBlocks(2);return d.yield(a.update(),4)}if(2!=d.nextAddress)return b=a.updatePlaylistDelay_,a.updatePlaylistTimer_.tickAfter(b),d.leaveTryBlock(0);\nc=d.enterCatchBlock();if(!a.playerInterface_)return d["return"]();goog.asserts.assert(c instanceof shaka.util.Error,"Should only receive a Shaka error");c.severity=shaka.util.Error.Severity.RECOVERABLE;a.playerInterface_.onError(c);a.updatePlaylistTimer_.tickAfter(.1);d.jumpToEnd()})};shaka.hls.HlsParser.prototype.isLive_=function(){return this.presentationType_!=shaka.hls.HlsParser.PresentationType_.VOD};\nshaka.hls.HlsParser.prototype.setPresentationType_=function(a){this.presentationType_=a;this.presentationTimeline_&&this.presentationTimeline_.setStatic(!this.isLive_());this.isLive_()||this.updatePlaylistTimer_.stop()};\nshaka.hls.HlsParser.prototype.makeNetworkRequest_=function(a,b){if(!this.operationManager_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);var c=this.playerInterface_.networkingEngine.request(b,a);this.operationManager_.manage(c);return c.promise};\nshaka.hls.HlsParser.widevineDrmParser_=function(a){var b=a.getRequiredAttrValue("METHOD"),c=["SAMPLE-AES","SAMPLE-AES-CTR"];if(!c.includes(b))return shaka.log.error("Widevine in HLS is only supported with [",c.join(", "),"], not",b),null;b=a.getRequiredAttrValue("URI");b=shaka.net.DataUriPlugin.parseRaw(b);b=shaka.util.BufferUtils.toUint8(b.data);b=shaka.util.ManifestParserUtils.createDrmInfo("com.widevine.alpha",[{initDataType:"cenc",initData:b}]);if(a=a.getAttributeValue("KEYID"))a=a.toLowerCase(),\ngoog.asserts.assert(a.startsWith("0x"),"Incorrect KEYID format!"),b.keyIds=new Set([a.substr(2)]);return b};\nshaka.hls.HlsParser.playreadyDrmParser_=function(a){var b=a.getRequiredAttrValue("METHOD"),c=["SAMPLE-AES","SAMPLE-AES-CTR"];if(!c.includes(b))return shaka.log.error("PlayReady in HLS is only supported with [",c.join(", "),"], not",b),null;a=a.getRequiredAttrValue("URI");a=shaka.net.DataUriPlugin.parseRaw(a);a=shaka.util.BufferUtils.toUint8(a.data);b=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);a=shaka.util.Pssh.createPssh(a,b);return shaka.util.ManifestParserUtils.createDrmInfo("com.microsoft.playready",\n[{initDataType:"cenc",initData:a}])};goog.exportSymbol("shaka.hls.HlsParser",shaka.hls.HlsParser);shaka.hls.HlsParser.AUDIO_EXTENSIONS_TO_MIME_TYPES_={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"};shaka.hls.HlsParser.RAW_FORMATS_=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];\nshaka.hls.HlsParser.VIDEO_EXTENSIONS_TO_MIME_TYPES_={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"};shaka.hls.HlsParser.TEXT_EXTENSIONS_TO_MIME_TYPES_={mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"};\nshaka.hls.HlsParser.EXTENSION_MAP_BY_CONTENT_TYPE_={audio:shaka.hls.HlsParser.AUDIO_EXTENSIONS_TO_MIME_TYPES_,video:shaka.hls.HlsParser.VIDEO_EXTENSIONS_TO_MIME_TYPES_,text:shaka.hls.HlsParser.TEXT_EXTENSIONS_TO_MIME_TYPES_};shaka.hls.HlsParser.KEYFORMATS_TO_DRM_PARSERS_={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":shaka.hls.HlsParser.widevineDrmParser_,"com.microsoft.playready":shaka.hls.HlsParser.playreadyDrmParser_};shaka.hls.HlsParser.PresentationType_={VOD:"VOD",EVENT:"EVENT",LIVE:"LIVE"};\nshaka.hls.HlsParser.TS_TIMESCALE_=9E4;shaka.hls.HlsParser.START_OF_SEGMENT_SIZE_=2048;shaka.media.ManifestParser.registerParserByExtension("m3u8",function(){return new shaka.hls.HlsParser});shaka.media.ManifestParser.registerParserByMime("application/x-mpegurl",function(){return new shaka.hls.HlsParser});shaka.media.ManifestParser.registerParserByMime("application/vnd.apple.mpegurl",function(){return new shaka.hls.HlsParser});shaka.net.HttpPluginUtils=function(){};\nshaka.net.HttpPluginUtils.makeResponse=function(a,b,c,d,e,f){if(200<=c&&299>=c&&202!=c)return{uri:e||d,originalUri:d,data:b,headers:a,fromCache:!!a["x-shaka-from-cache"]};e=null;try{e=shaka.util.StringUtils.fromBytesAutoDetect(b)}catch(g){}shaka.log.debug("HTTP error text:",e);throw new shaka.util.Error(401==c||403==c?shaka.util.Error.Severity.CRITICAL:shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.BAD_HTTP_STATUS,d,c,e,a,f);};shaka.net.HttpFetchPlugin=function(){};\nshaka.net.HttpFetchPlugin.parse=function(a,b,c,d){var e=new shaka.net.HttpFetchPlugin.Headers_;shaka.util.MapUtils.asMap(b.headers).forEach(function(k,l){e.append(l,k)});var f=new shaka.net.HttpFetchPlugin.AbortController_,g={canceled:!1,timedOut:!1};a=shaka.net.HttpFetchPlugin.request_(a,c,{body:b.body||void 0,headers:e,method:b.method,signal:f.signal,credentials:b.allowCrossSiteCredentials?"include":void 0},g,d,b.streamDataCallback);a=new shaka.util.AbortableOperation(a,function(){g.canceled=!0;\nf.abort();return Promise.resolve()});if(b=b.retryParameters.timeout){var h=new shaka.util.Timer(function(){g.timedOut=!0;f.abort()});h.tickAfter(b/1E3);a["finally"](function(){h.stop()})}return a};\nshaka.net.HttpFetchPlugin.request_=function(a,b,c,d,e,f){var g,h,k,l,m,n,p,q,r,t,v,u,y,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return g=shaka.net.HttpFetchPlugin.fetch_,h=shaka.net.HttpFetchPlugin.ReadableStream_,n=m=0,p=Date.now(),x.setCatchFinallyBlocks(2),x.yield(g(a,c),4);case 4:return k=x.yieldResult,q=k.clone().body.getReader(),t=(r=k.headers.get("Content-Length"))?parseInt(r,10):0,v=function(z){var A=function(){var C,D,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(E){switch(E.nextAddress){case 1:return E.setCatchFinallyBlocks(2),\nE.yield(q.read(),4);case 4:C=E.yieldResult;E.leaveTryBlock(3);break;case 2:return D=E.enterCatchBlock(),shaka.log.v1("error reading from stream",D.message),E["return"]();case 3:C.done||(m+=C.value.byteLength,f&&f(C.value));B=Date.now();if(100<B-p||C.done)e(B-p,m-n,t-m),n=m,p=B;C.done?(goog.asserts.assert(!C.value,\'readObj should be unset when "done" is true.\'),z.close()):(z.enqueue(C.value),A());E.jumpToEnd()}})};A()},new h({start:v}),x.yield(k.arrayBuffer(),5);case 5:l=x.yieldResult;x.leaveTryBlock(3);\nbreak;case 2:u=x.enterCatchBlock();if(d.canceled)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.OPERATION_ABORTED,a,b);if(d.timedOut)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,a,b);throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.HTTP_ERROR,a,u,b);case 3:return y={},w=\nk.headers,w.forEach(function(z,A){y[A.trim()]=z}),x["return"](shaka.net.HttpPluginUtils.makeResponse(y,l,k.status,a,k.url,b))}})};shaka.net.HttpFetchPlugin.isSupported=function(){if(window.ReadableStream)try{new ReadableStream({})}catch(a){return!1}else return!1;return!(!window.fetch||!window.AbortController)};goog.exportSymbol("shaka.net.HttpFetchPlugin",shaka.net.HttpFetchPlugin);goog.exportProperty(shaka.net.HttpFetchPlugin,"isSupported",shaka.net.HttpFetchPlugin.isSupported);\ngoog.exportProperty(shaka.net.HttpFetchPlugin,"parse",shaka.net.HttpFetchPlugin.parse);shaka.net.HttpFetchPlugin.fetch_=window.fetch;shaka.net.HttpFetchPlugin.AbortController_=window.AbortController;shaka.net.HttpFetchPlugin.ReadableStream_=window.ReadableStream;shaka.net.HttpFetchPlugin.Headers_=window.Headers;\nshaka.net.HttpFetchPlugin.isSupported()&&(shaka.net.NetworkingEngine.registerScheme("http",shaka.net.HttpFetchPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.PREFERRED,!0),shaka.net.NetworkingEngine.registerScheme("https",shaka.net.HttpFetchPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.PREFERRED,!0));shaka.net.HttpXHRPlugin=function(){};\nshaka.net.HttpXHRPlugin.parse=function(a,b,c,d){var e=new shaka.net.HttpXHRPlugin.Xhr_,f=Date.now(),g=0,h=new Promise(function(k,l){e.open(b.method,a,!0);e.responseType="arraybuffer";e.timeout=b.retryParameters.timeout;e.withCredentials=b.allowCrossSiteCredentials;e.onabort=function(){l(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.OPERATION_ABORTED,a,c))};e.onload=function(p){p=p.target;goog.asserts.assert(p,"XHR onload has no target!");\nvar q=p.getAllResponseHeaders().trim().split("\\r\\n"),r={};q=$jscomp.makeIterator(q);for(var t=q.next();!t.done;t=q.next())t=t.value.split(": "),r[t[0].toLowerCase()]=t.slice(1).join(": ");try{var v=shaka.net.HttpPluginUtils.makeResponse(r,p.response,p.status,a,p.responseURL,c);k(v)}catch(u){goog.asserts.assert(u instanceof shaka.util.Error,"Wrong error type!"),l(u)}};e.onerror=function(p){l(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.HTTP_ERROR,\na,p,c))};e.ontimeout=function(p){l(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,a,c))};e.onprogress=function(p){var q=Date.now();if(100<q-f||p.lengthComputable&&p.loaded==p.total)d(q-f,p.loaded-g,p.total-p.loaded),g=p.loaded,f=q};for(var m in b.headers){var n=m.toLowerCase();e.setRequestHeader(n,b.headers[m])}e.send(b.body)});return new shaka.util.AbortableOperation(h,function(){e.abort();return Promise.resolve()})};\ngoog.exportSymbol("shaka.net.HttpXHRPlugin",shaka.net.HttpXHRPlugin);goog.exportProperty(shaka.net.HttpXHRPlugin,"parse",shaka.net.HttpXHRPlugin.parse);shaka.net.HttpXHRPlugin.Xhr_=window.XMLHttpRequest;shaka.net.NetworkingEngine.registerScheme("http",shaka.net.HttpXHRPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.FALLBACK,!0);shaka.net.NetworkingEngine.registerScheme("https",shaka.net.HttpXHRPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.FALLBACK,!0);shaka.offline={};shaka.offline.DownloadProgressEstimator=function(){this.actualDownloaded_=this.estimatedDownloaded_=this.estimatedTotal_=0;this.pending_=new Map;this.nextId_=0};shaka.offline.DownloadProgressEstimator.prototype.open=function(a){this.estimatedTotal_+=a;var b=this.nextId_;this.nextId_++;this.pending_.set(b,a);return b};\nshaka.offline.DownloadProgressEstimator.prototype.close=function(a,b){if(this.pending_.has(a)){var c=this.pending_.get(a);this.pending_["delete"](a);this.estimatedDownloaded_+=c;this.actualDownloaded_+=b}};shaka.offline.DownloadProgressEstimator.prototype.getEstimatedProgress=function(){return 0==this.estimatedTotal_?0:this.estimatedDownloaded_/this.estimatedTotal_};shaka.offline.DownloadProgressEstimator.prototype.getTotalDownloaded=function(){return this.actualDownloaded_};shaka.offline.DownloadManager=function(a){var b=this;this.networkingEngine_=a;this.groups_=new Map;this.destroyer_=new shaka.util.Destroyer(function(){var c=Array.from(b.groups_.values());return Promise.all(c.map(function(d){return d["catch"](function(){})}))});this.abortCallbacks_=[];this.onProgress_=function(c,d){};this.onInitData_=function(c,d){};this.estimator_=new shaka.offline.DownloadProgressEstimator};shaka.offline.DownloadManager.prototype.destroy=function(){return this.destroyer_.destroy()};\nshaka.offline.DownloadManager.prototype.setCallbacks=function(a,b){this.onProgress_=a;this.onInitData_=b};shaka.offline.DownloadManager.prototype.abortAll=function(){var a=this.abortCallbacks_.map(function(b){return b()});this.abortCallbacks_=[];return Promise.all(a)};\nshaka.offline.DownloadManager.prototype.queue=function(a,b,c,d,e){var f=this;this.destroyer_.ensureNotDestroyed();var g=this.estimator_.open(c);c=(this.groups_.get(a)||Promise.resolve()).then(function(){var h,k,l,m,n,p,q;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return r.yield(f.fetchSegment_(b),2);h=r.yieldResult;if(f.destroyer_.destroyed())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.OPERATION_ABORTED);\nif(d)for(m in k=shaka.util.BufferUtils.toUint8(h),l=new shaka.util.Pssh(k),l.data)n=Number(m),p=l.data[n],q=l.systemIds[n],f.onInitData_(p,q);f.estimator_.close(g,h.byteLength);f.onProgress_(f.estimator_.getEstimatedProgress(),f.estimator_.getTotalDownloaded());return r["return"](e(h))})});this.groups_.set(a,c);return c};\nshaka.offline.DownloadManager.prototype.queueWork=function(a,b){this.destroyer_.ensureNotDestroyed();var c=(this.groups_.get(a)||Promise.resolve()).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return d.yield(b(),0)})});this.groups_.set(a,c);return c};shaka.offline.DownloadManager.prototype.waitToFinish=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?b.yield(Promise.all(a.groups_.values()),2):b["return"](a.estimator_.getTotalDownloaded())})};\nshaka.offline.DownloadManager.prototype.fetchSegment_=function(a){var b=this,c,d,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){if(1==g.nextAddress)return c=shaka.net.NetworkingEngine.RequestType.SEGMENT,d=b.networkingEngine_.request(c,a),e=function(){return d.abort()},b.abortCallbacks_.push(e),g.yield(d.promise,2);f=g.yieldResult;shaka.util.ArrayUtils.remove(b.abortCallbacks_,e);return g["return"](f.data)})};shaka.offline.indexeddb={};shaka.offline.indexeddb.DBOperation=function(a,b){var c=this;this.transaction_=a;this.store_=a.objectStore(b);this.promise_=new shaka.util.PublicPromise;a.onabort=function(d){d.preventDefault();c.promise_.reject()};a.onerror=function(d){d.preventDefault();c.promise_.reject()};a.oncomplete=function(d){c.promise_.resolve()}};\nshaka.offline.indexeddb.DBOperation.prototype.abort=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress){try{a.transaction_.abort()}catch(c){}b.setCatchFinallyBlocks(2);return b.yield(a.promise_,4)}if(2!=b.nextAddress)return b.leaveTryBlock(0);b.enterCatchBlock();b.jumpToEnd()})};\nshaka.offline.indexeddb.DBOperation.prototype.forEachEntry=function(a){var b=this;return new Promise(function(c,d){var e=b.store_.openCursor();e.onerror=d;e.onsuccess=function(f){var g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(null==e.result)return c(),h["return"]();g=e.result;return h.yield(a(g.key,g.value,g),2)}g["continue"]();h.jumpToEnd()})}})};shaka.offline.indexeddb.DBOperation.prototype.store=function(){return this.store_};\nshaka.offline.indexeddb.DBOperation.prototype.promise=function(){return this.promise_};shaka.offline.indexeddb.DBConnection=function(a){this.connection_=a;this.pending_=[]};shaka.offline.indexeddb.DBConnection.prototype.destroy=function(){return Promise.all(this.pending_.map(function(a){return a.abort()}))};shaka.offline.indexeddb.DBConnection.prototype.startReadOnlyOperation=function(a){return this.startOperation_(a,"readonly")};shaka.offline.indexeddb.DBConnection.prototype.startReadWriteOperation=function(a){return this.startOperation_(a,"readwrite")};\nshaka.offline.indexeddb.DBConnection.prototype.startOperation_=function(a,b){var c=this,d=this.connection_.transaction([a],b),e=new shaka.offline.indexeddb.DBOperation(d,a);this.pending_.push(e);e.promise().then(function(){return c.stopTracking_(e)},function(){return c.stopTracking_(e)});return e};shaka.offline.indexeddb.DBConnection.prototype.stopTracking_=function(a){shaka.util.ArrayUtils.remove(this.pending_,a)};shaka.offline.indexeddb.BaseStorageCell=function(a,b,c){this.connection_=new shaka.offline.indexeddb.DBConnection(a);this.segmentStore_=b;this.manifestStore_=c};shaka.offline.indexeddb.BaseStorageCell.prototype.destroy=function(){return this.connection_.destroy()};shaka.offline.indexeddb.BaseStorageCell.prototype.hasFixedKeySpace=function(){return!0};shaka.offline.indexeddb.BaseStorageCell.prototype.addSegments=function(a){return this.rejectAdd(this.segmentStore_)};\nshaka.offline.indexeddb.BaseStorageCell.prototype.removeSegments=function(a,b){return this.remove_(this.segmentStore_,a,b)};shaka.offline.indexeddb.BaseStorageCell.prototype.getSegments=function(a){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(b.get_(b.segmentStore_,a),2);c=d.yieldResult;return d["return"](c.map(function(e){return b.convertSegmentData(e)}))})};shaka.offline.indexeddb.BaseStorageCell.prototype.addManifests=function(a){return this.rejectAdd(this.manifestStore_)};\nshaka.offline.indexeddb.BaseStorageCell.prototype.updateManifestExpiration=function(a,b){var c=this.connection_.startReadWriteOperation(this.manifestStore_),d=c.store();d.get(a).onsuccess=function(e){if(e=e.target.result)e.expiration=b,d.put(e,a)};return c.promise()};shaka.offline.indexeddb.BaseStorageCell.prototype.removeManifests=function(a,b){return this.remove_(this.manifestStore_,a,b)};\nshaka.offline.indexeddb.BaseStorageCell.prototype.getManifests=function(a){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.yield(b.get_(b.manifestStore_,a),2);c=d.yieldResult;return d["return"](Promise.all(c.map(function(e){return b.convertManifest(e)})))})};\nshaka.offline.indexeddb.BaseStorageCell.prototype.getAllManifests=function(){var a=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(b=a.connection_.startReadOnlyOperation(a.manifestStore_),c=new Map,d.yield(b.forEachEntry(function(e,f){var g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress)return h.yield(a.convertManifest(f),2);g=h.yieldResult;c.set(e,g);h.jumpToEnd()})}),2)):3!=d.nextAddress?d.yield(b.promise(),3):\nd["return"](c)})};shaka.offline.indexeddb.BaseStorageCell.prototype.convertSegmentData=function(a){return a};shaka.offline.indexeddb.BaseStorageCell.prototype.convertManifest=function(a){return Promise.resolve(a)};shaka.offline.indexeddb.BaseStorageCell.prototype.rejectAdd=function(a){return Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.NEW_KEY_OPERATION_NOT_SUPPORTED,"Cannot add new value to "+a))};\nshaka.offline.indexeddb.BaseStorageCell.prototype.add=function(a,b){var c=this,d,e,f,g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){d=c.connection_.startReadWriteOperation(a);e=d.store();f=[];g={};h=$jscomp.makeIterator(b);for(k=h.next();!k.done;g={$jscomp$loop$prop$request$602:g.$jscomp$loop$prop$request$602},k=h.next())l=k.value,g.$jscomp$loop$prop$request$602=e.add(l),g.$jscomp$loop$prop$request$602.onsuccess=function(n){return function(p){f.push(n.$jscomp$loop$prop$request$602.result)}}(g);\nreturn m.yield(d.promise(),2)}return m["return"](f)})};shaka.offline.indexeddb.BaseStorageCell.prototype.remove_=function(a,b,c){a=this.connection_.startReadWriteOperation(a);var d=a.store(),e={};b=$jscomp.makeIterator(b);for(var f=b.next();!f.done;e={$jscomp$loop$prop$key$604:e.$jscomp$loop$prop$key$604},f=b.next())e.$jscomp$loop$prop$key$604=f.value,d["delete"](e.$jscomp$loop$prop$key$604).onsuccess=function(g){return function(){return c(g.$jscomp$loop$prop$key$604)}}(e);return a.promise()};\nshaka.offline.indexeddb.BaseStorageCell.prototype.get_=function(a,b){var c=this,d,e,f,g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==m.nextAddress){d=c.connection_.startReadOnlyOperation(a);e=d.store();f={};g=[];h={};k=$jscomp.makeIterator(b);for(l=k.next();!l.done;h={$jscomp$loop$prop$request$606:h.$jscomp$loop$prop$request$606,$jscomp$loop$prop$key$607:h.$jscomp$loop$prop$key$607},l=k.next())h.$jscomp$loop$prop$key$607=l.value,h.$jscomp$loop$prop$request$606=e.get(h.$jscomp$loop$prop$key$607),\nh.$jscomp$loop$prop$request$606.onsuccess=function(n){return function(){void 0==n.$jscomp$loop$prop$request$606.result&&g.push(n.$jscomp$loop$prop$key$607);f[n.$jscomp$loop$prop$key$607]=n.$jscomp$loop$prop$request$606.result}}(h);return m.yield(d.promise(),2)}if(g.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+g);return m["return"](b.map(function(n){return f[n]}))})};shaka.offline.indexeddb.EmeSessionStorageCell=function(a,b){this.connection_=new shaka.offline.indexeddb.DBConnection(a);this.store_=b};shaka.offline.indexeddb.EmeSessionStorageCell.prototype.destroy=function(){return this.connection_.destroy()};\nshaka.offline.indexeddb.EmeSessionStorageCell.prototype.getAll=function(){var a=this,b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(b=a.connection_.startReadOnlyOperation(a.store_),c=[],d.yield(b.forEachEntry(function(e,f){c.push(f)}),2)):3!=d.nextAddress?d.yield(b.promise(),3):d["return"](c)})};\nshaka.offline.indexeddb.EmeSessionStorageCell.prototype.add=function(a){var b=this.connection_.startReadWriteOperation(this.store_),c=b.store();a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())c.add(d.value);return b.promise()};\nshaka.offline.indexeddb.EmeSessionStorageCell.prototype.remove=function(a){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){return 1==d.nextAddress?(c=b.connection_.startReadWriteOperation(b.store_),d.yield(c.forEachEntry(function(e,f,g){a.includes(f.sessionId)&&g["delete"]()}),2)):d.yield(c.promise(),0)})};shaka.offline.StorageMuxer=function(){this.mechanisms_=new Map};shaka.offline.StorageMuxer.prototype.destroy=function(){for(var a=[],b=$jscomp.makeIterator(this.mechanisms_.values()),c=b.next();!c.done;c=b.next())a.push(c.value.destroy());this.mechanisms_.clear();return Promise.all(a)};\nshaka.offline.StorageMuxer.prototype.init=function(){var a=this;shaka.offline.StorageMuxer.getRegistry_().forEach(function(e,f){var g=e();g?a.mechanisms_.set(f,g):shaka.log.info("Skipping "+f+" as it is not supported on this platform")});for(var b=[],c=$jscomp.makeIterator(this.mechanisms_.values()),d=c.next();!d.done;d=c.next())b.push(d.value.init());return Promise.all(b)};\nshaka.offline.StorageMuxer.prototype.getActive=function(){var a=null;this.mechanisms_.forEach(function(b,c){b.getCells().forEach(function(d,e){d.hasFixedKeySpace()||a||(a={path:{mechanism:c,cell:e},cell:d})})});if(a)return a;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find a cell that supports add-operations");};\nshaka.offline.StorageMuxer.prototype.forEachCell=function(a){this.mechanisms_.forEach(function(b,c){b.getCells().forEach(function(d,e){a({mechanism:c,cell:e},d)})})};\nshaka.offline.StorageMuxer.prototype.getCell=function(a,b){var c=this.mechanisms_.get(a);if(!c)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find mechanism with name "+a);c=c.getCells().get(b);if(!c)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find cell with name "+b);return c};\nshaka.offline.StorageMuxer.prototype.forEachEmeSessionCell=function(a){this.mechanisms_.forEach(function(b,c){a(b.getEmeSessionCell())})};shaka.offline.StorageMuxer.prototype.getEmeSessionCell=function(){var a=Array.from(this.mechanisms_.keys());if(!a.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_NOT_SUPPORTED,"No supported storage mechanisms found");return this.mechanisms_.get(a[0]).getEmeSessionCell()};\nshaka.offline.StorageMuxer.prototype.resolvePath=function(a){var b=this.mechanisms_.get(a.mechanism);return b?b.getCells().get(a.cell):null};\nshaka.offline.StorageMuxer.prototype.erase=function(){var a=this,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){return 1==e.nextAddress?(b=Array.from(a.mechanisms_.values()),c=0<b.length,c||(d=shaka.offline.StorageMuxer.getRegistry_(),d.forEach(function(f,g){var h=f();h&&b.push(h)})),e.yield(Promise.all(b.map(function(f){return f.erase()})),2)):c?e.jumpTo(0):e.yield(Promise.all(b.map(function(f){return f.destroy()})),0)})};\nshaka.offline.StorageMuxer.register=function(a,b){shaka.offline.StorageMuxer.registry_.set(a,b)};shaka.offline.StorageMuxer.unregister=function(a){shaka.offline.StorageMuxer.registry_["delete"](a)};shaka.offline.StorageMuxer.support=function(){var a=shaka.offline.StorageMuxer.getRegistry_();a=$jscomp.makeIterator(a.values());for(var b=a.next();!b.done;b=a.next())if(b=b.value,b=b())return b.destroy(),!0;return!1};\nshaka.offline.StorageMuxer.overrideSupport=function(a){shaka.offline.StorageMuxer.override_=a};shaka.offline.StorageMuxer.clearOverride=function(){shaka.offline.StorageMuxer.override_=null};shaka.offline.StorageMuxer.getRegistry_=function(){var a=shaka.offline.StorageMuxer.override_,b=shaka.offline.StorageMuxer.registry_;return COMPILED?b:a||b};goog.exportSymbol("shaka.offline.StorageMuxer",shaka.offline.StorageMuxer);goog.exportProperty(shaka.offline.StorageMuxer,"unregister",shaka.offline.StorageMuxer.unregister);\ngoog.exportProperty(shaka.offline.StorageMuxer,"register",shaka.offline.StorageMuxer.register);goog.exportProperty(shaka.offline.StorageMuxer.prototype,"destroy",shaka.offline.StorageMuxer.prototype.destroy);shaka.offline.StorageMuxer.override_=null;shaka.offline.StorageMuxer.registry_=new Map;shaka.offline.indexeddb.V1StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)};$jscomp.inherits(shaka.offline.indexeddb.V1StorageCell,shaka.offline.indexeddb.BaseStorageCell);\nshaka.offline.indexeddb.V1StorageCell.prototype.updateManifestExpiration=function(a,b){var c=this,d,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){d=c.connection_.startReadWriteOperation(c.manifestStore_);e=d.store();f=new shaka.util.PublicPromise;e.get(a).onsuccess=function(h){(h=h.target.result)?(goog.asserts.assert(h.key==a,"With in-line keys, the keys should match"),h.expiration=b,e.put(h),f.resolve()):f.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,\nshaka.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+a))};return g.yield(Promise.all([d.promise(),f]),0)})};\nshaka.offline.indexeddb.V1StorageCell.prototype.convertManifest=function(a){var b,c,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){b=shaka.offline.indexeddb.V1StorageCell;c=[];for(d=0;d<a.periods.length;++d)e=d==a.periods.length-1?a.duration:a.periods[d+1].startTime,f=e-a.periods[d].startTime,g=b.convertPeriod_(a.periods[d],f),c.push(g);return k.yield(shaka.util.PeriodCombiner.combineDbStreams(c),2)}h=k.yieldResult;return k["return"]({creationTime:0,\noriginalManifestUri:a.originalManifestUri,duration:a.duration,size:a.size,expiration:null==a.expiration?Infinity:a.expiration,streams:h,sessionIds:a.sessionIds,drmInfo:a.drmInfo,appMetadata:a.appMetadata})})};\nshaka.offline.indexeddb.V1StorageCell.convertPeriod_=function(a,b){var c=shaka.offline.indexeddb.V1StorageCell;c.fillMissingVariants_(a);for(var d=$jscomp.makeIterator(a.streams),e=d.next();!e.done;e=d.next())goog.asserts.assert(e.value.variantIds,"After filling in missing variants, each stream should have variant ids");return a.streams.map(function(f){return c.convertStream_(f,a.startTime,b)})};\nshaka.offline.indexeddb.V1StorageCell.convertStream_=function(a,b,c){var d=shaka.offline.indexeddb.V1StorageCell,e=a.initSegmentUri?d.getKeyFromSegmentUri_(a.initSegmentUri):null,f=b+a.presentationTimeOffset,g=b+c;return{id:a.id,originalId:null,primary:a.primary,type:a.contentType,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:a.kind,language:a.language,label:a.label,width:a.width,height:a.height,initSegmentKey:e,encrypted:a.encrypted,keyIds:new Set([a.keyId]),\nsegments:a.segments.map(function(h){return d.convertSegment_(h,e,b,g,f)}),variantIds:a.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}};shaka.offline.indexeddb.V1StorageCell.convertSegment_=function(a,b,c,d,e){var f=shaka.offline.indexeddb.V1StorageCell.getKeyFromSegmentUri_(a.uri);return{startTime:c+a.startTime,endTime:c+a.endTime,dataKey:f,initSegmentKey:b,appendWindowStart:c,appendWindowEnd:d,timestampOffset:e}};\nshaka.offline.indexeddb.V1StorageCell.prototype.convertSegmentData=function(a){return{data:a.data}};shaka.offline.indexeddb.V1StorageCell.getKeyFromSegmentUri_=function(a){var b;if((b=/^offline:[0-9]+\\/[0-9]+\\/([0-9]+)$/.exec(a))||(b=/^offline:segment\\/([0-9]+)$/.exec(a)))return Number(b[1]);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,"Could not parse uri "+a);};\nshaka.offline.indexeddb.V1StorageCell.fillMissingVariants_=function(a){var b=shaka.util.ManifestParserUtils.ContentType.AUDIO,c=shaka.util.ManifestParserUtils.ContentType.VIDEO,d=a.streams.filter(function(l){return l.contentType==b});a=a.streams.filter(function(l){return l.contentType==c});if(!d.every(function(l){return l.variantIds})||!a.every(function(l){return l.variantIds})){goog.asserts.assert(d.every(function(l){return!l.variantIds}),"Some audio streams have variant ids and some do not.");goog.asserts.assert(a.every(function(l){return!l.variantIds}),\n"Some video streams have variant ids and some do not.");for(var e=$jscomp.makeIterator(d),f=e.next();!f.done;f=e.next())f.value.variantIds=[];e=$jscomp.makeIterator(a);for(f=e.next();!f.done;f=e.next())f.value.variantIds=[];e=0;if(a.length&&!d.length){shaka.log.debug("Found video-only content. Creating variants for video.");var g=e++,h=$jscomp.makeIterator(a);for(f=h.next();!f.done;f=h.next())f.value.variantIds.push(g)}if(!a.length&&d.length)for(shaka.log.debug("Found audio-only content. Creating variants for audio."),\ng=e++,h=$jscomp.makeIterator(d),f=h.next();!f.done;f=h.next())f.value.variantIds.push(g);if(a.length&&d.length)for(shaka.log.debug("Found audio-video content. Creating variants."),d=$jscomp.makeIterator(d),f=d.next();!f.done;f=d.next())for(f=f.value,g=$jscomp.makeIterator(a),h=g.next();!h.done;h=g.next()){h=h.value;var k=e++;f.variantIds.push(k);h.variantIds.push(k)}}};shaka.offline.indexeddb.V2StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)};$jscomp.inherits(shaka.offline.indexeddb.V2StorageCell,shaka.offline.indexeddb.BaseStorageCell);\nshaka.offline.indexeddb.V2StorageCell.prototype.convertManifest=function(a){var b=this,c,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){c=[];for(d=0;d<a.periods.length;++d)e=d==a.periods.length-1?a.duration:a.periods[d+1].startTime,f=e-a.periods[d].startTime,g=b.convertPeriod_(a.periods[d],f),c.push(g);return k.yield(shaka.util.PeriodCombiner.combineDbStreams(c),2)}h=k.yieldResult;return k["return"]({appMetadata:a.appMetadata,creationTime:0,drmInfo:a.drmInfo,\nduration:a.duration,expiration:null==a.expiration?Infinity:a.expiration,originalManifestUri:a.originalManifestUri,sessionIds:a.sessionIds,size:a.size,streams:h})})};shaka.offline.indexeddb.V2StorageCell.prototype.convertPeriod_=function(a,b){for(var c=[],d=$jscomp.makeIterator(a.streams),e=d.next();!e.done;e=d.next())e=e.value,0!=e.variantIds.length&&c.push(this.convertStream_(e,a.startTime,a.startTime+b));return c};\nshaka.offline.indexeddb.V2StorageCell.prototype.convertStream_=function(a,b,c){var d=this;return{id:a.id,originalId:a.originalId,primary:a.primary,type:a.contentType,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,hdr:void 0,kind:a.kind,language:a.language,label:a.label,width:a.width,height:a.height,encrypted:a.encrypted,keyIds:new Set([a.keyId]),segments:a.segments.map(function(e){return d.convertSegment_(e,a.initSegmentKey,b,c,a.presentationTimeOffset)}),\nvariantIds:a.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}};shaka.offline.indexeddb.V2StorageCell.prototype.convertSegment_=function(a,b,c,d,e){return{startTime:c+a.startTime,endTime:c+a.endTime,initSegmentKey:b,appendWindowStart:c,appendWindowEnd:d,timestampOffset:c-e,dataKey:a.dataKey}};shaka.offline.indexeddb.V5StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)};$jscomp.inherits(shaka.offline.indexeddb.V5StorageCell,shaka.offline.indexeddb.BaseStorageCell);shaka.offline.indexeddb.V5StorageCell.prototype.hasFixedKeySpace=function(){return!1};shaka.offline.indexeddb.V5StorageCell.prototype.addSegments=function(a){return this.add(this.segmentStore_,a)};\nshaka.offline.indexeddb.V5StorageCell.prototype.addManifests=function(a){return this.add(this.manifestStore_,a)};shaka.offline.indexeddb.V5StorageCell.prototype.convertManifest=function(a){null==a.expiration&&(a.expiration=Infinity);return Promise.resolve(a)};shaka.offline.indexeddb.StorageMechanism=function(){this.sessions_=this.v5_=this.v3_=this.v2_=this.v1_=this.db_=null};\nshaka.offline.indexeddb.StorageMechanism.prototype.init=function(){var a=this,b=shaka.offline.indexeddb.StorageMechanism.DB_NAME,c=shaka.offline.indexeddb.StorageMechanism.VERSION,d=new shaka.util.PublicPromise,e=window.indexedDB.open(b,c);e.onsuccess=function(f){f=e.result;a.db_=f;a.v1_=shaka.offline.indexeddb.StorageMechanism.createV1_(f);a.v2_=shaka.offline.indexeddb.StorageMechanism.createV2_(f);a.v3_=shaka.offline.indexeddb.StorageMechanism.createV3_(f);a.v5_=shaka.offline.indexeddb.StorageMechanism.createV5_(f);\na.sessions_=shaka.offline.indexeddb.StorageMechanism.createEmeSessionCell_(f);d.resolve()};e.onupgradeneeded=function(f){a.createStores_(e.result)};e.onerror=function(f){d.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.INDEXED_DB_ERROR,e.error));f.preventDefault()};return d};\nshaka.offline.indexeddb.StorageMechanism.prototype.destroy=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:if(!a.v1_){b.jumpTo(2);break}return b.yield(a.v1_.destroy(),2);case 2:if(!a.v2_){b.jumpTo(4);break}return b.yield(a.v2_.destroy(),4);case 4:if(!a.v3_){b.jumpTo(6);break}return b.yield(a.v3_.destroy(),6);case 6:if(!a.v5_){b.jumpTo(8);break}return b.yield(a.v5_.destroy(),8);case 8:if(!a.sessions_){b.jumpTo(10);break}return b.yield(a.sessions_.destroy(),\n10);case 10:a.db_&&a.db_.close(),b.jumpToEnd()}})};shaka.offline.indexeddb.StorageMechanism.prototype.getCells=function(){var a=new Map;this.v1_&&a.set("v1",this.v1_);this.v2_&&a.set("v2",this.v2_);this.v3_&&a.set("v3",this.v3_);this.v5_&&a.set("v5",this.v5_);return a};shaka.offline.indexeddb.StorageMechanism.prototype.getEmeSessionCell=function(){goog.asserts.assert(this.sessions_,"Cannot be destroyed.");return this.sessions_};\nshaka.offline.indexeddb.StorageMechanism.prototype.erase=function(){var a=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){switch(b.nextAddress){case 1:if(!a.v1_){b.jumpTo(2);break}return b.yield(a.v1_.destroy(),2);case 2:if(!a.v2_){b.jumpTo(4);break}return b.yield(a.v2_.destroy(),4);case 4:if(!a.v3_){b.jumpTo(6);break}return b.yield(a.v3_.destroy(),6);case 6:if(!a.v5_){b.jumpTo(8);break}return b.yield(a.v5_.destroy(),8);case 8:return a.db_&&a.db_.close(),b.yield(shaka.offline.indexeddb.StorageMechanism.deleteAll_(),\n10);case 10:return a.db_=null,a.v1_=null,a.v2_=null,a.v3_=null,a.v5_=null,b.yield(a.init(),0)}})};shaka.offline.indexeddb.StorageMechanism.createV1_=function(a){var b=shaka.offline.indexeddb.StorageMechanism,c=b.V1_SEGMENT_STORE;b=b.V1_MANIFEST_STORE;var d=a.objectStoreNames;return d.contains(b)&&d.contains(c)?(shaka.log.debug("Mounting v1 idb storage cell"),new shaka.offline.indexeddb.V1StorageCell(a,c,b)):null};\nshaka.offline.indexeddb.StorageMechanism.createV2_=function(a){var b=shaka.offline.indexeddb.StorageMechanism,c=b.V2_SEGMENT_STORE;b=b.V2_MANIFEST_STORE;var d=a.objectStoreNames;return d.contains(b)&&d.contains(c)?(shaka.log.debug("Mounting v2 idb storage cell"),new shaka.offline.indexeddb.V2StorageCell(a,c,b)):null};\nshaka.offline.indexeddb.StorageMechanism.createV3_=function(a){var b=shaka.offline.indexeddb.StorageMechanism,c=b.V3_SEGMENT_STORE;b=b.V3_MANIFEST_STORE;var d=a.objectStoreNames;return d.contains(b)&&d.contains(c)?(shaka.log.debug("Mounting v3 idb storage cell"),new shaka.offline.indexeddb.V2StorageCell(a,c,b)):null};\nshaka.offline.indexeddb.StorageMechanism.createV5_=function(a){var b=shaka.offline.indexeddb.StorageMechanism,c=b.V5_SEGMENT_STORE;b=b.V5_MANIFEST_STORE;var d=a.objectStoreNames;return d.contains(b)&&d.contains(c)?(shaka.log.debug("Mounting v5 idb storage cell"),new shaka.offline.indexeddb.V5StorageCell(a,c,b)):null};\nshaka.offline.indexeddb.StorageMechanism.createEmeSessionCell_=function(a){var b=shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE;return a.objectStoreNames.contains(b)?(shaka.log.debug("Mounting session ID idb storage cell"),new shaka.offline.indexeddb.EmeSessionStorageCell(a,b)):null};\nshaka.offline.indexeddb.StorageMechanism.prototype.createStores_=function(a){for(var b=$jscomp.makeIterator([shaka.offline.indexeddb.StorageMechanism.V5_SEGMENT_STORE,shaka.offline.indexeddb.StorageMechanism.V5_MANIFEST_STORE,shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE]),c=b.next();!c.done;c=b.next())c=c.value,a.objectStoreNames.contains(c)||a.createObjectStore(c,{autoIncrement:!0})};\nshaka.offline.indexeddb.StorageMechanism.deleteAll_=function(){var a=shaka.offline.indexeddb.StorageMechanism.DB_NAME,b=new shaka.util.PublicPromise,c=window.indexedDB.deleteDatabase(a);c.onblocked=function(d){shaka.log.warning("Deleting",a,"is being blocked")};c.onsuccess=function(d){b.resolve()};c.onerror=function(d){b.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.INDEXED_DB_ERROR,c.error));d.preventDefault()};return b};\nshaka.offline.indexeddb.StorageMechanism.DB_NAME="shaka_offline_db";shaka.offline.indexeddb.StorageMechanism.VERSION=5;shaka.offline.indexeddb.StorageMechanism.V1_SEGMENT_STORE="segment";shaka.offline.indexeddb.StorageMechanism.V2_SEGMENT_STORE="segment-v2";shaka.offline.indexeddb.StorageMechanism.V3_SEGMENT_STORE="segment-v3";shaka.offline.indexeddb.StorageMechanism.V5_SEGMENT_STORE="segment-v5";shaka.offline.indexeddb.StorageMechanism.V1_MANIFEST_STORE="manifest";\nshaka.offline.indexeddb.StorageMechanism.V2_MANIFEST_STORE="manifest-v2";shaka.offline.indexeddb.StorageMechanism.V3_MANIFEST_STORE="manifest-v3";shaka.offline.indexeddb.StorageMechanism.V5_MANIFEST_STORE="manifest-v5";shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE="session-ids";shaka.offline.StorageMuxer.register("idb",function(){return shaka.util.Platform.isChromecast()||!window.indexedDB?null:new shaka.offline.indexeddb.StorageMechanism});shaka.offline.OfflineUri=function(a,b,c,d){this.type_=a;this.mechanism_=b;this.cell_=c;this.key_=d;this.asString_=["offline:",a,"/",b,"/",c,"/",d].join("")};shaka.offline.OfflineUri.prototype.isManifest=function(){return"manifest"==this.type_};shaka.offline.OfflineUri.prototype.isSegment=function(){return"segment"==this.type_};shaka.offline.OfflineUri.prototype.mechanism=function(){return this.mechanism_};shaka.offline.OfflineUri.prototype.cell=function(){return this.cell_};\nshaka.offline.OfflineUri.prototype.key=function(){return this.key_};shaka.offline.OfflineUri.prototype.toString=function(){return this.asString_};shaka.offline.OfflineUri.parse=function(a){a=/^offline:([a-z]+)\\/([^/]+)\\/([^/]+)\\/([0-9]+)$/.exec(a);if(null==a)return null;var b=a[1];if("manifest"!=b&&"segment"!=b)return null;var c=a[2];if(!c)return null;var d=a[3];return d&&null!=b?new shaka.offline.OfflineUri(b,c,d,Number(a[4])):null};\nshaka.offline.OfflineUri.manifest=function(a,b,c){return new shaka.offline.OfflineUri("manifest",a,b,c)};shaka.offline.OfflineUri.segment=function(a,b,c){return new shaka.offline.OfflineUri("segment",a,b,c)};shaka.offline.ManifestConverter=function(a,b){this.mechanism_=a;this.cell_=b};\nshaka.offline.ManifestConverter.prototype.fromManifestDB=function(a){var b=this,c=new shaka.media.PresentationTimeline(null,0);c.setDuration(a.duration);var d=a.streams.filter(function(l){return b.isAudio_(l)}),e=a.streams.filter(function(l){return b.isVideo_(l)});d=this.createVariants(d,e,c);e=a.streams.filter(function(l){return b.isText_(l)}).map(function(l){return b.fromStreamDB_(l,c)});var f=a.streams.filter(function(l){return b.isImage_(l)}).map(function(l){return b.fromStreamDB_(l,c)}),g=a.drmInfo?\n[a.drmInfo]:[];if(a.drmInfo)for(var h=$jscomp.makeIterator(d.values()),k=h.next();!k.done;k=h.next())k=k.value,k.audio&&k.audio.encrypted&&(k.audio.drmInfos=g),k.video&&k.video.encrypted&&(k.video.drmInfos=g);return{presentationTimeline:c,minBufferTime:2,offlineSessionIds:a.sessionIds,variants:Array.from(d.values()),textStreams:e,imageStreams:f}};\nshaka.offline.ManifestConverter.prototype.createVariants=function(a,b,c){for(var d=new Set,e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next()){var g=$jscomp.makeIterator(f.value.variantIds);for(f=g.next();!f.done;f=g.next())d.add(f.value)}e=$jscomp.makeIterator(b);for(f=e.next();!f.done;f=e.next())for(g=$jscomp.makeIterator(f.value.variantIds),f=g.next();!f.done;f=g.next())d.add(f.value);e=new Map;d=$jscomp.makeIterator(d);for(f=d.next();!f.done;f=d.next())f=f.value,e.set(f,this.createEmptyVariant_(f));\na=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())for(d=d.value,f=this.fromStreamDB_(d,c),g=$jscomp.makeIterator(d.variantIds),d=g.next();!d.done;d=g.next())d=e.get(d.value),goog.asserts.assert(!d.audio,"A variant should only have one audio stream"),d.language=f.language,d.primary=d.primary||f.primary,d.audio=f;b=$jscomp.makeIterator(b);for(a=b.next();!a.done;a=b.next())for(d=a.value,a=this.fromStreamDB_(d,c),f=$jscomp.makeIterator(d.variantIds),d=f.next();!d.done;d=f.next())d=e.get(d.value),\ngoog.asserts.assert(!d.video,"A variant should only have one video stream"),d.primary=d.primary||a.primary,d.video=a;return e};\nshaka.offline.ManifestConverter.prototype.fromStreamDB_=function(a,b){var c=this,d=a.segments.map(function(e,f){return c.fromSegmentDB_(f,e)});b.notifySegments(d);d=new shaka.media.SegmentIndex(d);return{id:a.id,originalId:a.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:d,mimeType:a.mimeType,codecs:a.codecs,width:a.width||void 0,height:a.height||void 0,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,hdr:a.hdr,kind:a.kind,encrypted:a.encrypted,drmInfos:[],\nkeyIds:a.keyIds,language:a.language,label:a.label,type:a.type,primary:a.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:a.roles,forced:a.forced,channelsCount:a.channelsCount,audioSamplingRate:a.audioSamplingRate,spatialAudio:a.spatialAudio,closedCaptions:a.closedCaptions,tilesLayout:a.tilesLayout}};\nshaka.offline.ManifestConverter.prototype.fromSegmentDB_=function(a,b){var c=shaka.offline.OfflineUri.segment(this.mechanism_,this.cell_,b.dataKey),d=null!=b.initSegmentKey?this.fromInitSegmentDB_(b.initSegmentKey):null;return new shaka.media.SegmentReference(b.startTime,b.endTime,function(){return[c.toString()]},0,null,d,b.timestampOffset,b.appendWindowStart,b.appendWindowEnd)};\nshaka.offline.ManifestConverter.prototype.fromInitSegmentDB_=function(a){var b=shaka.offline.OfflineUri.segment(this.mechanism_,this.cell_,a);return new shaka.media.InitSegmentReference(function(){return[b.toString()]},0,null)};shaka.offline.ManifestConverter.prototype.isAudio_=function(a){return a.type==shaka.util.ManifestParserUtils.ContentType.AUDIO};shaka.offline.ManifestConverter.prototype.isVideo_=function(a){return a.type==shaka.util.ManifestParserUtils.ContentType.VIDEO};\nshaka.offline.ManifestConverter.prototype.isText_=function(a){return a.type==shaka.util.ManifestParserUtils.ContentType.TEXT};shaka.offline.ManifestConverter.prototype.isImage_=function(a){return a.type==shaka.util.ManifestParserUtils.ContentType.IMAGE};shaka.offline.ManifestConverter.prototype.createEmptyVariant_=function(a){return{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}};shaka.offline.OfflineManifestParser=function(){this.uri_=null};shaka.offline.OfflineManifestParser.prototype.configure=function(a){};\nshaka.offline.OfflineManifestParser.prototype.start=function(a,b){var c=this,d,e,f,g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){switch(m.nextAddress){case 1:d=shaka.offline.OfflineUri.parse(a);c.uri_=d;if(null==d||!d.isManifest())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,a);e=new shaka.offline.StorageMuxer;m.setFinallyBlock(2);return m.yield(e.init(),4);case 4:return m.yield(e.getCell(d.mechanism(),\nd.cell()),5);case 5:return f=m.yieldResult,m.yield(f.getManifests([d.key()]),6);case 6:return g=m.yieldResult,h=g[0],k=new shaka.offline.ManifestConverter(d.mechanism(),d.cell()),l=k.fromManifestDB(h),b.makeTextStreamsForClosedCaptions(l),m["return"](l);case 2:return m.enterFinallyBlock(),m.yield(e.destroy(),7);case 7:m.leaveFinallyBlock(0)}})};shaka.offline.OfflineManifestParser.prototype.stop=function(){return Promise.resolve()};shaka.offline.OfflineManifestParser.prototype.update=function(){};\nshaka.offline.OfflineManifestParser.prototype.onExpirationUpdated=function(a,b){var c=this,d,e,f,g,h,k,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return goog.asserts.assert(c.uri_,"Should not get update event before start has been called"),d=c.uri_,e=new shaka.offline.StorageMuxer,n.setCatchFinallyBlocks(2,3),n.yield(e.init(),5);case 5:return n.yield(e.getCell(d.mechanism(),d.cell()),6);case 6:return f=n.yieldResult,n.yield(f.getManifests([d.key()]),\n7);case 7:g=n.yieldResult;h=g[0];k=h.sessionIds.includes(a);l=void 0==h.expiration||h.expiration>b;if(!k||!l){n.jumpTo(3);break}shaka.log.debug("Updating expiration for stored content");return n.yield(f.updateManifestExpiration(d.key(),b),3);case 3:return n.enterFinallyBlock(),n.yield(e.destroy(),10);case 10:n.leaveFinallyBlock(0);break;case 2:m=n.enterCatchBlock(),shaka.log.error("There was an error updating",d,m),n.jumpTo(3)}})};\nshaka.media.ManifestParser.registerParserByMime("application/x-offline-manifest",function(){return new shaka.offline.OfflineManifestParser});shaka.offline.OfflineScheme=function(){};shaka.offline.OfflineScheme.plugin=function(a,b,c,d){return(b=shaka.offline.OfflineUri.parse(a))&&b.isManifest()?shaka.offline.OfflineScheme.getManifest_(a):b&&b.isSegment()?shaka.offline.OfflineScheme.getSegment_(b.key(),b):shaka.util.AbortableOperation.failed(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,a))};\nshaka.offline.OfflineScheme.getManifest_=function(a){a={uri:a,originalUri:a,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return shaka.util.AbortableOperation.completed(a)};\nshaka.offline.OfflineScheme.getSegment_=function(a,b){goog.asserts.assert(b.isSegment(),"Only segment uri\'s should be given to getSegment");var c=new shaka.offline.StorageMuxer;return shaka.util.AbortableOperation.completed(void 0).chain(function(){return c.init()}).chain(function(){return c.getCell(b.mechanism(),b.cell())}).chain(function(d){return d.getSegments([b.key()])}).chain(function(d){return{uri:b,data:d[0].data,headers:{}}})["finally"](function(){return c.destroy()})};\ngoog.exportSymbol("shaka.offline.OfflineScheme",shaka.offline.OfflineScheme);goog.exportProperty(shaka.offline.OfflineScheme,"plugin",shaka.offline.OfflineScheme.plugin);shaka.net.NetworkingEngine.registerScheme("offline",shaka.offline.OfflineScheme.plugin);shaka.offline.SessionDeleter=function(){};shaka.offline.SessionDeleter.prototype["delete"]=function(a,b,c){var d=this,e,f,g,h,k,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:e=shaka.offline.SessionDeleter,f=[],g=$jscomp.makeIterator(e.createBuckets_(c)),h=g.next();case 2:if(h.done){n.jumpTo(4);break}k=h.value;l=d.doDelete_(a,b,k);return n.yield(l,5);case 5:m=n.yieldResult;f=f.concat(m);h=g.next();n.jumpTo(2);break;case 4:return n["return"](f)}})};\nshaka.offline.SessionDeleter.prototype.doDelete_=function(a,b,c){var d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){switch(h.nextAddress){case 1:return d=new shaka.media.DrmEngine({netEngine:b,onError:function(){},onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),h.setCatchFinallyBlocks(2),d.configure(a),h.yield(d.initForRemoval(c.info.keySystem,c.info.licenseUri,c.info.serverCertificate,c.info.audioCapabilities,c.info.videoCapabilities),4);case 4:h.leaveTryBlock(3);\nbreak;case 2:return e=h.enterCatchBlock(),shaka.log.warning("Error initializing EME",e),h.yield(d.destroy(),5);case 5:return h["return"]([]);case 3:return h.setCatchFinallyBlocks(6),h.yield(d.setServerCertificate(),8);case 8:h.leaveTryBlock(7);break;case 6:return f=h.enterCatchBlock(),shaka.log.warning("Error setting server certificate",f),h.yield(d.destroy(),9);case 9:return h["return"]([]);case 7:return g=[],h.yield(Promise.all(c.sessionIds.map(function(k){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(m){if(1==\nm.nextAddress)return m.setCatchFinallyBlocks(2),m.yield(d.removeSession(k),4);if(2!=m.nextAddress)return g.push(k),m.leaveTryBlock(0);l=m.enterCatchBlock();shaka.log.warning("Error deleting offline session",l);m.jumpToEnd()})})),10);case 10:return h.yield(d.destroy(),11);case 11:return h["return"](g)}})};\nshaka.offline.SessionDeleter.createBuckets_=function(a){var b=shaka.offline.SessionDeleter,c=[];a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;for(var e=!1,f=$jscomp.makeIterator(c),g=f.next();!g.done;g=f.next())if(g=g.value,b.isCompatible_(g.info,d)){g.sessionIds.push(d.sessionId);e=!0;break}e||c.push({info:d,sessionIds:[d.sessionId]})}return c};\nshaka.offline.SessionDeleter.isCompatible_=function(a,b){var c=shaka.util.ArrayUtils,d=function(e,f){return e.robustness==f.robustness&&e.contentType==f.contentType};return a.keySystem==b.keySystem&&a.licenseUri==b.licenseUri&&c.hasSameElements(a.audioCapabilities,b.audioCapabilities,d)&&c.hasSameElements(a.videoCapabilities,b.videoCapabilities,d)};shaka.offline.StoredContentUtils=function(){};shaka.offline.StoredContentUtils.fromManifest=function(a,b,c,d){goog.asserts.assert(b.variants.length,"Cannot create stored content from manifest with no variants.");var e=b.presentationTimeline.getDuration();b=shaka.offline.StoredContentUtils.getTracks_(b);return{offlineUri:null,originalManifestUri:a,duration:e,size:c,expiration:Infinity,tracks:b,appMetadata:d}};\nshaka.offline.StoredContentUtils.fromManifestDB=function(a,b){goog.asserts.assert(b.streams.length,"Cannot create stored content from manifestDB with no streams.");var c=(new shaka.offline.ManifestConverter(a.mechanism(),a.cell())).fromManifestDB(b),d=b.appMetadata||{};c=shaka.offline.StoredContentUtils.getTracks_(c);goog.asserts.assert(null!=b.expiration,"Manifest expiration must be set by now!");return{offlineUri:a.toString(),originalManifestUri:b.originalManifestUri,duration:b.duration,size:b.size,\nexpiration:b.expiration,tracks:c,appMetadata:d}};shaka.offline.StoredContentUtils.getTracks_=function(a){var b=shaka.util.StreamUtils,c=[],d=b.getPlayableVariants(a.variants);d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())c.push(b.variantToTrack(e.value));a=$jscomp.makeIterator(a.textStreams);for(d=a.next();!d.done;d=a.next())c.push(b.textStreamToTrack(d.value));return c};shaka.offline.StreamBandwidthEstimator=function(){this.estimateByStreamId_={}};\nshaka.offline.StreamBandwidthEstimator.prototype.addVariant=function(a){var b=a.audio,c=a.video;b&&!c&&this.setBitrate_(b.id,b.bandwidth||a.bandwidth);!b&&c&&this.setBitrate_(c.id,c.bandwidth||a.bandwidth);if(b&&c){var d=b.bandwidth||shaka.offline.StreamBandwidthEstimator.DEFAULT_AUDIO_BITRATE_,e=c.bandwidth||a.bandwidth-d;0>=e&&(shaka.log.warning("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant\'s bandwidth."),e=a.bandwidth);this.setBitrate_(b.id,d);this.setBitrate_(c.id,\ne)}};shaka.offline.StreamBandwidthEstimator.prototype.setBitrate_=function(a,b){this.estimateByStreamId_[a]=b};shaka.offline.StreamBandwidthEstimator.prototype.addText=function(a){this.estimateByStreamId_[a.id]=shaka.offline.StreamBandwidthEstimator.DEFAULT_TEXT_BITRATE_};shaka.offline.StreamBandwidthEstimator.prototype.addImage=function(a){this.estimateByStreamId_[a.id]=a.bandwidth||shaka.offline.StreamBandwidthEstimator.DEFAULT_IMAGE_BITRATE_};\nshaka.offline.StreamBandwidthEstimator.prototype.getSegmentEstimate=function(a,b){var c=b.endTime-b.startTime;return this.getEstimate_(a)*c};shaka.offline.StreamBandwidthEstimator.prototype.getInitSegmentEstimate=function(a){return.5*this.getEstimate_(a)};\nshaka.offline.StreamBandwidthEstimator.prototype.getEstimate_=function(a){a=this.estimateByStreamId_[a];null==a&&(a=0,shaka.log.error("Asking for bitrate of stream not given to the estimator"));0==a&&shaka.log.warning("Using bitrate of 0, this stream won\'t affect progress");return a};shaka.offline.StreamBandwidthEstimator.DEFAULT_AUDIO_BITRATE_=393216;shaka.offline.StreamBandwidthEstimator.DEFAULT_TEXT_BITRATE_=52;shaka.offline.StreamBandwidthEstimator.DEFAULT_IMAGE_BITRATE_=2048;shaka.offline.Storage=function(a){var b=this;if(a&&a.constructor!=shaka.Player)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.LOCAL_PLAYER_INSTANCE_REQUIRED);this.networkingEngine_=this.config_=null;a?(this.config_=a.getSharedConfiguration(),this.networkingEngine_=a.getNetworkingEngine(),goog.asserts.assert(this.networkingEngine_,"Storage should not be initialized with a player that had |destroy| called on it.")):(this.config_=\nshaka.util.PlayerConfiguration.createDefault(),this.networkingEngine_=new shaka.net.NetworkingEngine);this.segmentsFromStore_=[];this.openOperations_=[];this.openDownloadManagers_=[];var c=!a;this.destroyer_=new shaka.util.Destroyer(function(){var d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return k.yield(Promise.all(b.openDownloadManagers_.map(function(l){return l.abortAll()})),2);case 2:d=function(){};e=[];f=$jscomp.makeIterator(b.openOperations_);\nfor(g=f.next();!g.done;g=f.next())h=g.value,e.push(h.then(d,d));return k.yield(Promise.all(e),3);case 3:if(!c){k.jumpTo(4);break}return k.yield(b.networkingEngine_.destroy(),4);case 4:b.config_=null,b.networkingEngine_=null,k.jumpToEnd()}})})};shaka.offline.Storage.support=function(){return shaka.util.Platform.supportsMediaSource()?shaka.offline.StorageMuxer.support():!1};shaka.offline.Storage.prototype.destroy=function(){return this.destroyer_.destroy()};\nshaka.offline.Storage.prototype.configure=function(a,b){goog.asserts.assert("object"==typeof a||2==arguments.length,"String configs should have values!");2==arguments.length&&"string"==typeof a&&(a=shaka.util.ConfigUtils.convertToConfigObject(a,b));goog.asserts.assert("object"==typeof a,"Should be an object!");a.manifest&&a.manifest.dash&&"defaultPresentationDelay"in a.manifest.dash&&(shaka.Deprecate.deprecateFeature(4,"manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),\na.manifest.defaultPresentationDelay=a.manifest.dash.defaultPresentationDelay,delete a.manifest.dash.defaultPresentationDelay);goog.asserts.assert(this.config_,"Cannot reconfigure stroage after calling destroy.");return shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,a)};\nshaka.offline.Storage.prototype.getConfiguration=function(){goog.asserts.assert(this.config_,"Config must not be null!");var a=shaka.util.PlayerConfiguration.createDefault();shaka.util.PlayerConfiguration.mergeConfigObjects(a,this.config_,shaka.util.PlayerConfiguration.createDefault());return a};shaka.offline.Storage.prototype.getNetworkingEngine=function(){return this.networkingEngine_};\nshaka.offline.Storage.prototype.store=function(a,b,c){var d=this;goog.asserts.assert(this.networkingEngine_,"Cannot call |downloadManifest_| after calling |destroy|.");var e=this.getConfiguration(),f=new shaka.offline.DownloadManager(this.networkingEngine_);this.openDownloadManagers_.push(f);b=this.store_(a,b||{},function(){var h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return goog.asserts.assert(d.networkingEngine_,"Should not call |store| after |destroy|"),\nk.yield(shaka.media.ManifestParser.getFactory(a,d.networkingEngine_,e.manifest.retryParameters,c||null),2);h=k.yieldResult;return k["return"](shaka.util.Functional.callFactory(h))})},e,f);var g=new shaka.util.AbortableOperation(b,function(){return f.abortAll()});g["finally"](function(){shaka.util.ArrayUtils.remove(d.openDownloadManagers_,f)});g.then=function(h){shaka.Deprecate.deprecateFeature(4,"shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead.");\nreturn g.promise.then(h)};return this.startAbortableOperation_(g)};shaka.offline.Storage.prototype.getStoreInProgress=function(){shaka.Deprecate.deprecateFeature(4,"shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported.");return!1};\nshaka.offline.Storage.prototype.store_=function(a,b,c,d,e){var f=this,g,h,k,l,m,n,p,q,r,t,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){switch(u.nextAddress){case 1:return f.requireSupport_(),h=g=null,k=new shaka.offline.StorageMuxer,m=l=null,u.setCatchFinallyBlocks(2,3),u.yield(c(),5);case 5:return g=u.yieldResult,u.yield(f.parseManifest(a,g,d),6);case 6:n=u.yieldResult;f.ensureNotDestroyed_();p=!n.presentationTimeline.isLive()&&!n.presentationTimeline.isInProgress();if(!p)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.STORAGE,shaka.util.Error.Code.CANNOT_STORE_LIVE_OFFLINE,a);return u.yield(f.createDrmEngine(n,function(y){m=m||y},d),7);case 7:h=u.yieldResult;f.ensureNotDestroyed_();if(m)throw m;return u.yield(f.filterManifest_(n,h,d),8);case 8:return u.yield(k.init(),9);case 9:return f.ensureNotDestroyed_(),u.yield(k.getActive(),10);case 10:return l=u.yieldResult,f.ensureNotDestroyed_(),goog.asserts.assert(h,"drmEngine should be non-null here."),u.yield(f.downloadManifest_(l.cell,h,n,\na,b,d,e),11);case 11:q=u.yieldResult;f.ensureNotDestroyed_();if(m)throw m;return u.yield(l.cell.addManifests([q]),12);case 12:return r=u.yieldResult,f.ensureNotDestroyed_(),t=shaka.offline.OfflineUri.manifest(l.path.mechanism,l.path.cell,r[0]),u["return"](shaka.offline.StoredContentUtils.fromManifestDB(t,q));case 3:return u.enterFinallyBlock(),f.segmentsFromStore_=[],u.yield(k.destroy(),13);case 13:if(!g){u.jumpTo(14);break}return u.yield(g.stop(),14);case 14:if(!h){u.jumpTo(16);break}return u.yield(h.destroy(),\n16);case 16:u.leaveFinallyBlock(0);break;case 2:v=u.enterCatchBlock();if(!l){u.jumpTo(18);break}return u.yield(l.cell.removeSegments(f.segmentsFromStore_,function(){}),18);case 18:throw m||v;}})};\nshaka.offline.Storage.prototype.filterManifest_=function(a,b,c){var d,e,f,g,h,k,l,m,n,p,q,r,t,v,u,y,w,x,z,A,C,D,B,E,H,F,I;return $jscomp.asyncExecutePromiseGeneratorProgram(function(G){switch(G.nextAddress){case 1:d=shaka.util.StreamUtils;e={width:Infinity,height:Infinity};d.filterByRestrictions(a,c.restrictions,e);c.useMediaCapabilities?d.filterManifestByMediaCapabilities(a,c.offline.usePersistentLicense):(d.filterManifestByMediaSource(a),d.filterManifestByDrm(a,b));f=[];g=c.preferredAudioChannelCount;\nd.chooseCodecsAndFilterManifest(a,g);h=$jscomp.makeIterator(a.variants);for(k=h.next();!k.done;k=h.next())l=k.value,goog.asserts.assert(d.isPlayable(l),\'We should have already filtered by "is playable"\'),f.push(d.variantToTrack(l));m=$jscomp.makeIterator(a.textStreams);for(n=m.next();!n.done;n=m.next())p=n.value,f.push(d.textStreamToTrack(p));q=$jscomp.makeIterator(a.imageStreams);for(r=q.next();!r.done;r=q.next())t=r.value,f.push(d.imageStreamToTrack(t));return G.yield(c.offline.trackSelectionCallback(f),\n2);case 2:v=G.yieldResult;u=a.presentationTimeline.getDuration();y=0;w=$jscomp.makeIterator(v);for(x=w.next();!x.done;x=w.next())z=x.value,A=z.bandwidth*u/8,y+=A;G.setCatchFinallyBlocks(3);return G.yield(c.offline.downloadSizeCallback(y),5);case 5:C=G.yieldResult;if(!C)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_LIMIT_REACHED);G.leaveTryBlock(4);break;case 3:throw D=G.enterCatchBlock(),shaka.log.warning("downloadSizeCallback has produced an unexpected error",\nD),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.DOWNLOAD_SIZE_CALLBACK_ERROR);case 4:B=new Set;E=new Set;H=new Set;F=$jscomp.makeIterator(v);for(x=F.next();!x.done;x=F.next())I=x.value,"variant"==I.type&&B.add(I.id),"text"==I.type&&E.add(I.id),"image"==I.type&&H.add(I.id);a.variants=a.variants.filter(function(J){return B.has(J.id)});a.textStreams=a.textStreams.filter(function(J){return E.has(J.id)});a.imageStreams=a.imageStreams.filter(function(J){return H.has(J.id)});\nshaka.offline.Storage.validateManifest_(a);G.jumpToEnd()}})};\nshaka.offline.Storage.prototype.downloadManifest_=function(a,b,c,d,e,f,g){var h=this,k,l,m,n,p,q,r,t,v,u,y,w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(x){switch(x.nextAddress){case 1:return k=shaka.offline.StoredContentUtils.fromManifest(d,c,0,e),l=f.offline.progressCallback,m=function(z,A){k.size=A;l(k,z)},n=function(z,A){r&&f.offline.usePersistentLicense&&t==A&&b.newInitData("cenc",z)},g.setCallbacks(m,n),p=c.variants.some(function(z){var A=z.audio&&z.audio.encrypted;return z.video&&\nz.video.encrypted||A}),q=c.variants.some(function(z){return(z.video?z.video.drmInfos:[]).concat(z.audio?z.audio.drmInfos:[]).some(function(A){return A.initData&&A.initData.length})}),r=p&&!q,t=null,r&&(v=b.getDrmInfo(),t=shaka.offline.Storage.defaultSystemIds_.get(v.keySystem)),x.setFinallyBlock(2),y=u=h.createOfflineManifest_(g,a,b,c,d,e,f),x.yield(g.waitToFinish(),4);case 4:y.size=x.yieldResult;u.expiration=b.getExpiration();w=b.getSessionIds();u.sessionIds=f.offline.usePersistentLicense?w:[];if(p&&\nf.offline.usePersistentLicense&&!w.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.NO_INIT_DATA_FOR_OFFLINE);return x["return"](u);case 2:return x.enterFinallyBlock(),x.yield(g.destroy(),5);case 5:x.leaveFinallyBlock(0)}})};shaka.offline.Storage.prototype.remove=function(a){return this.startOperation_(this.remove_(a))};\nshaka.offline.Storage.prototype.remove_=function(a){var b=this,c,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:b.requireSupport_();c=shaka.offline.OfflineUri.parse(a);if(null==c||!c.isManifest())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,a);d=c;e=new shaka.offline.StorageMuxer;k.setFinallyBlock(2);return k.yield(e.init(),4);case 4:return k.yield(e.getCell(d.mechanism(),\nd.cell()),5);case 5:return f=k.yieldResult,k.yield(f.getManifests([d.key()]),6);case 6:return g=k.yieldResult,h=g[0],k.yield(Promise.all([b.removeFromDRM_(d,h,e),b.removeFromStorage_(f,d,h)]),2);case 2:return k.enterFinallyBlock(),k.yield(e.destroy(),8);case 8:k.leaveFinallyBlock(0)}})};\nshaka.offline.Storage.getCapabilities_=function(a,b){for(var c=shaka.util.MimeUtils,d=[],e=$jscomp.makeIterator(a.streams),f=e.next();!f.done;f=e.next())f=f.value,b&&"video"==f.type?d.push({contentType:c.getFullType(f.mimeType,f.codecs),robustness:a.drmInfo.videoRobustness}):b||"audio"!=f.type||d.push({contentType:c.getFullType(f.mimeType,f.codecs),robustness:a.drmInfo.audioRobustness});return d};\nshaka.offline.Storage.prototype.removeFromDRM_=function(a,b,c){var d=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){goog.asserts.assert(d.networkingEngine_,"Cannot be destroyed");return e.yield(shaka.offline.Storage.deleteLicenseFor_(d.networkingEngine_,d.config_.drm,c,b),0)})};\nshaka.offline.Storage.prototype.removeFromStorage_=function(a,b,c){var d=this,e=shaka.offline.Storage.getAllSegmentIds_(c),f=e.length+1,g=0,h=shaka.offline.StoredContentUtils.fromManifestDB(b,c);c=function(k){g+=1;d.config_.offline.progressCallback(h,g/f)};return Promise.all([a.removeSegments(e,c),a.removeManifests([b.key()],c)])};shaka.offline.Storage.prototype.removeEmeSessions=function(){return this.startOperation_(this.removeEmeSessions_())};\nshaka.offline.Storage.prototype.removeEmeSessions_=function(){var a=this,b,c,d,e,f,g,h,k,l,m,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return a.requireSupport_(),goog.asserts.assert(a.networkingEngine_,"Cannot be destroyed"),b=a.networkingEngine_,c=a.config_.drm,d=new shaka.offline.StorageMuxer,e=new shaka.offline.SessionDeleter,f=!1,p.setFinallyBlock(2),p.yield(d.init(),4);case 4:g=[],d.forEachEmeSessionCell(function(q){return g.push(q)}),h=$jscomp.makeIterator(g),\nk=h.next();case 5:if(k.done){p.jumpTo(2);break}l=k.value;return p.yield(l.getAll(),8);case 8:return m=p.yieldResult,p.yield(e["delete"](c,b,m),9);case 9:return n=p.yieldResult,p.yield(l.remove(n),10);case 10:n.length!=m.length&&(f=!0);k=h.next();p.jumpTo(5);break;case 2:return p.enterFinallyBlock(),p.yield(d.destroy(),11);case 11:p.leaveFinallyBlock(3);break;case 3:return p["return"](!f)}})};shaka.offline.Storage.prototype.list=function(){return this.startOperation_(this.list_())};\nshaka.offline.Storage.prototype.list_=function(){var a=this,b,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){switch(e.nextAddress){case 1:return a.requireSupport_(),b=[],c=new shaka.offline.StorageMuxer,e.setFinallyBlock(2),e.yield(c.init(),4);case 4:return d=Promise.resolve(),c.forEachCell(function(f,g){d=d.then(function(){var h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return k.yield(g.getAllManifests(),2);h=k.yieldResult;h.forEach(function(l,\nm){var n=shaka.offline.OfflineUri.manifest(f.mechanism,f.cell,m);n=shaka.offline.StoredContentUtils.fromManifestDB(n,l);b.push(n)});k.jumpToEnd()})})}),e.yield(d,2);case 2:return e.enterFinallyBlock(),e.yield(c.destroy(),6);case 6:e.leaveFinallyBlock(3);break;case 3:return e["return"](b)}})};\nshaka.offline.Storage.prototype.parseManifest=function(a,b,c){var d=this,e,f,g,h,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(1==l.nextAddress)return e=null,f=d.networkingEngine_,goog.asserts.assert(f,"Should be initialized!"),g={networkingEngine:f,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(m){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(m){e=m},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},\nenableLowLatencyMode:function(){}},b.configure(c.manifest),d.ensureNotDestroyed_(),l.yield(b.start(a,g),2);if(3!=l.nextAddress)return h=l.yieldResult,d.ensureNotDestroyed_(),k=shaka.offline.Storage.getAllStreamsFromManifest_(h),l.yield(Promise.all(shaka.util.Iterables.map(k,function(m){return m.createSegmentIndex()})),3);d.ensureNotDestroyed_();if(e)throw e;return l["return"](h)})};\nshaka.offline.Storage.prototype.createDrmEngine=function(a,b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return goog.asserts.assert(d.networkingEngine_,"Cannot call |createDrmEngine| after |destroy|"),e=new shaka.media.DrmEngine({netEngine:d.networkingEngine_,onError:b,onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),e.configure(c.drm),f.yield(e.initForStorage(a.variants,c.offline.usePersistentLicense,\nc.useMediaCapabilities),2);case 2:return f.yield(e.setServerCertificate(),3);case 3:return f.yield(e.createOrLoad(),4);case 4:return f["return"](e)}})};\nshaka.offline.Storage.prototype.createOfflineManifest_=function(a,b,c,d,e,f,g){var h=new shaka.offline.StreamBandwidthEstimator;a=this.createStreams_(a,b,h,c,d,g);g=g.offline.usePersistentLicense;(b=c.getDrmInfo())&&g&&(b.initData=[]);return{creationTime:Date.now(),originalManifestUri:e,duration:d.presentationTimeline.getDuration(),size:0,expiration:c.getExpiration(),streams:a,sessionIds:g?c.getSessionIds():[],drmInfo:b,appMetadata:f}};\nshaka.offline.Storage.prototype.createStreams_=function(a,b,c,d,e,f){d=$jscomp.makeIterator(e.variants);for(var g=d.next();!g.done;g=d.next())c.addVariant(g.value);d=$jscomp.makeIterator(e.textStreams);for(g=d.next();!g.done;g=d.next())c.addText(g.value);d=$jscomp.makeIterator(e.imageStreams);for(g=d.next();!g.done;g=d.next())c.addImage(g.value);g=new Map;g.set(null,Promise.resolve(null));var h=new Map,k=shaka.offline.Storage.getAllStreamsFromManifest_(e);d=new Map;k=$jscomp.makeIterator(k);for(var l=\nk.next();!l.done;l=k.next()){l=l.value;var m=this.createStream_(a,b,c,e,l,f,g,h);d.set(l.id,m)}a=$jscomp.makeIterator(e.variants);for(g=a.next();!g.done;g=a.next())b=g.value,b.audio&&d.get(b.audio.id).variantIds.push(b.id),b.video&&d.get(b.video.id).variantIds.push(b.id);return Array.from(d.values())};\nshaka.offline.Storage.prototype.createStream_=function(a,b,c,d,e,f,g,h){var k=this,l={id:e.id,originalId:e.originalId,primary:e.primary,type:e.type,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:e.hdr,kind:e.kind,language:e.language,label:e.label,width:e.width||null,height:e.height||null,encrypted:e.encrypted,keyIds:e.keyIds,segments:[],variantIds:[],roles:e.roles,forced:e.forced,channelsCount:e.channelsCount,audioSamplingRate:e.audioSamplingRate,\nspatialAudio:e.spatialAudio,closedCaptions:e.closedCaptions,tilesLayout:e.tilesLayout},m=e.id;d=d.presentationTimeline.getSegmentAvailabilityStart();shaka.offline.Storage.forEachSegment_(e,d,function(n){var p=k.getInitSegmentDbKey_(a,m,e.id,b,c,n.initSegmentReference,f,g),q=k.getSegmentDbKey_(a,m,e.id,b,c,n,f,h);a.queueWork(m,function(){var r,t;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return v.yield(p,2);if(3!=v.nextAddress)return r=v.yieldResult,v.yield(q,\n3);t=v.yieldResult;l.segments.push({initSegmentKey:r,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,dataKey:t});v.jumpToEnd()})})});return l};\nshaka.offline.Storage.prototype.getInitSegmentDbKey_=function(a,b,c,d,e,f,g,h){var k=this;if(h.has(f))return h.get(f);g=shaka.util.Networking.createSegmentRequest(f.getUris(),f.startByte,f.endByte,g.streaming.retryParameters);a=a.queue(b,g,e.getInitSegmentEstimate(c),!0,function(l){var m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(d.addSegments([{data:l}]),2);m=n.yieldResult;k.segmentsFromStore_.push(m[0]);return n["return"](m[0])})});h.set(f,\na);return a};\nshaka.offline.Storage.prototype.getSegmentDbKey_=function(a,b,c,d,e,f,g,h){var k=this,l=[f.getUris()[0],f.startByte,f.endByte].join("-");if(h.has(l))return h.get(l);g=shaka.util.Networking.createSegmentRequest(f.getUris(),f.startByte,f.endByte,g.streaming.retryParameters);a=a.queue(b,g,e.getSegmentEstimate(c,f),!1,function(m){var n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(d.addSegments([{data:m}]),2);n=p.yieldResult;k.segmentsFromStore_.push(n[0]);return p["return"](n[0])})});\nh.set(l,a);return a};shaka.offline.Storage.forEachSegment_=function(a,b,c){b=a.segmentIndex.find(b);if(null!=b)for(var d=a.segmentIndex.get(b);d;)c(d),d=a.segmentIndex.get(++b)};shaka.offline.Storage.prototype.ensureNotDestroyed_=function(){if(this.destroyer_.destroyed())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.OPERATION_ABORTED);};\nshaka.offline.Storage.prototype.requireSupport_=function(){if(!shaka.offline.Storage.support())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_NOT_SUPPORTED);};\nshaka.offline.Storage.prototype.startOperation_=function(a){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){if(1==c.nextAddress)return b.openOperations_.push(a),c.setFinallyBlock(2),c.yield(a,4);if(2!=c.nextAddress)return c["return"](c.yieldResult);c.enterFinallyBlock();shaka.util.ArrayUtils.remove(b.openOperations_,a);return c.leaveFinallyBlock(0)})};\nshaka.offline.Storage.prototype.startAbortableOperation_=function(a){var b=this,c=a.promise;this.openOperations_.push(c);return a["finally"](function(){shaka.util.ArrayUtils.remove(b.openOperations_,c)})};shaka.offline.Storage.getAllSegmentIds_=function(a){var b=[];a=$jscomp.makeIterator(a.streams);for(var c=a.next();!c.done;c=a.next()){c=$jscomp.makeIterator(c.value.segments);for(var d=c.next();!d.done;d=c.next())d=d.value,null!=d.initSegmentKey&&b.push(d.initSegmentKey),b.push(d.dataKey)}return b};\nshaka.offline.Storage.deleteAll=function(){var a;return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){return 1==b.nextAddress?(a=new shaka.offline.StorageMuxer,b.setFinallyBlock(2),b.yield(a.erase(),2)):5!=b.nextAddress?(b.enterFinallyBlock(),b.yield(a.destroy(),5)):b.leaveFinallyBlock(0)})};\nshaka.offline.Storage.deleteLicenseFor_=function(a,b,c,d){var e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){if(!d.drmInfo)return k["return"]();e=c.getEmeSessionCell();f=d.sessionIds.map(function(l){return{sessionId:l,keySystem:d.drmInfo.keySystem,licenseUri:d.drmInfo.licenseServerUri,serverCertificate:d.drmInfo.serverCertificate,audioCapabilities:shaka.offline.Storage.getCapabilities_(d,!1),videoCapabilities:shaka.offline.Storage.getCapabilities_(d,!0)}});\ng=new shaka.offline.SessionDeleter;return k.yield(g["delete"](b,a,f),2)}return 3!=k.nextAddress?(h=k.yieldResult,k.yield(e.remove(h),3)):k.yield(e.add(f.filter(function(l){return!h.includes(l.sessionId)})),0)})};\nshaka.offline.Storage.getAllStreamsFromManifest_=function(a){for(var b=new Set,c=$jscomp.makeIterator(a.textStreams),d=c.next();!d.done;d=c.next())b.add(d.value);c=$jscomp.makeIterator(a.imageStreams);for(d=c.next();!d.done;d=c.next())b.add(d.value);a=$jscomp.makeIterator(a.variants);for(c=a.next();!c.done;c=a.next())c=c.value,c.audio&&b.add(c.audio),c.video&&b.add(c.video);return b};\nshaka.offline.Storage.validateManifest_=function(a){var b=new Set(a.variants.map(function(g){return g.video})),c=new Set(a.variants.map(function(g){return g.audio}));a=a.textStreams;1<b.size&&shaka.log.warning("Multiple video tracks selected to be stored");b=$jscomp.makeIterator(c);for(var d=b.next();!d.done;d=b.next()){d=d.value;for(var e=$jscomp.makeIterator(c),f=e.next();!f.done;f=e.next())f=f.value,d!=f&&d.language==f.language&&shaka.log.warning("Similar audio tracks were selected to be stored",\nd.id,f.id)}c=$jscomp.makeIterator(a);for(b=c.next();!b.done;b=c.next())for(b=b.value,d=$jscomp.makeIterator(a),e=d.next();!e.done;e=d.next())e=e.value,b!=e&&b.language==e.language&&shaka.log.warning("Similar text tracks were selected to be stored",b.id,e.id)};goog.exportSymbol("shaka.offline.Storage",shaka.offline.Storage);goog.exportProperty(shaka.offline.Storage,"deleteAll",shaka.offline.Storage.deleteAll);goog.exportProperty(shaka.offline.Storage.prototype,"list",shaka.offline.Storage.prototype.list);\ngoog.exportProperty(shaka.offline.Storage.prototype,"removeEmeSessions",shaka.offline.Storage.prototype.removeEmeSessions);goog.exportProperty(shaka.offline.Storage.prototype,"remove",shaka.offline.Storage.prototype.remove);goog.exportProperty(shaka.offline.Storage.prototype,"getStoreInProgress",shaka.offline.Storage.prototype.getStoreInProgress);goog.exportProperty(shaka.offline.Storage.prototype,"store",shaka.offline.Storage.prototype.store);\ngoog.exportProperty(shaka.offline.Storage.prototype,"getNetworkingEngine",shaka.offline.Storage.prototype.getNetworkingEngine);goog.exportProperty(shaka.offline.Storage.prototype,"getConfiguration",shaka.offline.Storage.prototype.getConfiguration);goog.exportProperty(shaka.offline.Storage.prototype,"configure",shaka.offline.Storage.prototype.configure);goog.exportProperty(shaka.offline.Storage.prototype,"destroy",shaka.offline.Storage.prototype.destroy);\ngoog.exportProperty(shaka.offline.Storage,"support",shaka.offline.Storage.support);\nshaka.offline.Storage.defaultSystemIds_=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");\nshaka.Player.registerSupportPlugin("offline",shaka.offline.Storage.support);shaka.polyfill=function(){};shaka.polyfill.installAll=function(){for(var a=$jscomp.makeIterator(shaka.polyfill.polyfills_),b=a.next();!b.done;b=a.next()){b=b.value;try{b.callback()}catch(c){shaka.log.alwaysWarn("Error installing polyfill!",c)}}};\nshaka.polyfill.register=function(a,b){for(var c={priority:b||0,callback:a},d=$jscomp.makeIterator(shaka.util.Iterables.enumerate(shaka.polyfill.polyfills_)),e=d.next();!e.done;e=d.next()){e=e.value;var f=e.i;if(e.item.priority<c.priority){shaka.polyfill.polyfills_.splice(f,0,c);return}}shaka.polyfill.polyfills_.push(c)};goog.exportSymbol("shaka.polyfill",shaka.polyfill);goog.exportProperty(shaka.polyfill,"register",shaka.polyfill.register);goog.exportProperty(shaka.polyfill,"installAll",shaka.polyfill.installAll);\nshaka.polyfill.polyfills_=[];shaka.polyfill.EncryptionScheme=function(){};shaka.polyfill.EncryptionScheme.install=function(){EncryptionSchemePolyfills.install()};shaka.polyfill.register(shaka.polyfill.EncryptionScheme.install,-2);shaka.polyfill.Fullscreen=function(){};\nshaka.polyfill.Fullscreen.install=function(){if(window.Document){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen;a=Document.prototype;a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitCancelFullScreen;"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||\ndocument.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}}));a=shaka.polyfill.Fullscreen.proxyEvent_;document.addEventListener("webkitfullscreenchange",a);document.addEventListener("webkitfullscreenerror",a);document.addEventListener("mozfullscreenchange",a);document.addEventListener("mozfullscreenerror",a);document.addEventListener("MSFullscreenChange",\na);document.addEventListener("MSFullscreenError",a)}};shaka.polyfill.Fullscreen.proxyEvent_=function(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),c=document.createEvent("Event");c.initEvent(b,a.bubbles,a.cancelable);a.target.dispatchEvent(c)};shaka.polyfill.register(shaka.polyfill.Fullscreen.install);shaka.polyfill.MathRound=function(){};shaka.polyfill.MathRound.install=function(){shaka.log.debug("mathRound.install");var a=shaka.polyfill.MathRound.MAX_ACCURATE_INPUT_+1;if(Math.round(a)!=a){shaka.log.debug("polyfill Math.round");var b=Math.round;Math.round=function(c){var d=c;c<=shaka.polyfill.MathRound.MAX_ACCURATE_INPUT_&&(d=b(c));return d}}};shaka.polyfill.MathRound.MAX_ACCURATE_INPUT_=4503599627370496;shaka.polyfill.register(shaka.polyfill.MathRound.install);shaka.polyfill.MediaCapabilities=function(){};\nshaka.polyfill.MediaCapabilities.install=function(){shaka.log.debug("MediaCapabilities: install");!shaka.util.Platform.isChromecast()&&navigator.mediaCapabilities?shaka.log.debug("MediaCapabilities: Native mediaCapabilities support found."):window.MediaSource?(navigator.mediaCapabilities={},navigator.mediaCapabilities.decodingInfo=shaka.polyfill.MediaCapabilities.decodingInfo_):shaka.log.debug("MediaSource must be available to install mediaCapabilities ","polyfill.")};\nshaka.polyfill.MediaCapabilities.decodingInfo_=function(a){var b,c,d,e,f,g,h,k,l,m,n,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){switch(q.nextAddress){case 1:b={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:a};if(!a||a.video&&(c=a.video.contentType,d=MediaSource.isTypeSupported(c),!d)||a.audio&&(e=a.audio.contentType,f=MediaSource.isTypeSupported(e),!f))return q["return"](b);if(!a.keySystemConfiguration)return b.supported=!0,q["return"](Promise.resolve(b));\ng=a.keySystemConfiguration;h=[];k=[];g.audio&&(l={robustness:g.audio.robustness||"",contentType:a.audio.contentType},h.push(l));g.video&&(m={robustness:g.video.robustness||"",contentType:a.video.contentType},k.push(m));n={initDataTypes:[g.initDataType],distinctiveIdentifier:g.distinctiveIdentifier,persistentState:g.persistentState,sessionTypes:g.sessionTypes};h.length&&(n.audioCapabilities=h);k.length&&(n.videoCapabilities=k);q.setCatchFinallyBlocks(3);return q.yield(navigator.requestMediaKeySystemAccess(g.keySystem,\n[n]),5);case 5:p=q.yieldResult;q.leaveTryBlock(4);break;case 3:q.enterCatchBlock(),shaka.log.info("navigator.requestMediaKeySystemAccess failed.");case 4:p&&(b.supported=!0,b.keySystemAccess=p);case 2:return q["return"](b)}})};shaka.polyfill.register(shaka.polyfill.MediaCapabilities.install,-1);shaka.polyfill.MediaSource=function(){};\nshaka.polyfill.MediaSource.install=function(){shaka.log.debug("MediaSource.install");var a=shaka.util.Platform.safariVersion();window.MediaSource?window.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(shaka.log.info("Patching Chromecast MSE bugs."),shaka.polyfill.MediaSource.patchCastIsTypeSupported_()):a?(shaka.polyfill.MediaSource.rejectTsContent_(),12>=a?(shaka.log.info("Patching Safari 11 & 12 MSE bugs."),shaka.polyfill.MediaSource.stubAbort_(),shaka.polyfill.MediaSource.patchRemovalRange_()):\n(shaka.log.info("Patching Safari 13 MSE bugs."),shaka.polyfill.MediaSource.stubAbort_())):shaka.util.Platform.isTizen2()||shaka.util.Platform.isTizen3()||shaka.util.Platform.isTizen4()?(shaka.log.info("Rejecting Opus."),shaka.polyfill.MediaSource.rejectCodec_("opus")):shaka.log.info("Using native MSE as-is."):shaka.log.info("No MSE implementation available.");window.MediaSource&&MediaSource.isTypeSupported(\'video/webm; codecs="vp9"\')&&!MediaSource.isTypeSupported(\'video/webm; codecs="vp09.00.10.08"\')&&\n(shaka.log.info("Patching vp09 support queries."),shaka.polyfill.MediaSource.patchVp09_())};shaka.polyfill.MediaSource.stubAbort_=function(){var a=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(b){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];c=a.apply(this,c);c.abort=function(){};return c}};\nshaka.polyfill.MediaSource.patchRemovalRange_=function(){var a=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(b,c){return a.call(this,b,c-.001)}};shaka.polyfill.MediaSource.rejectTsContent_=function(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){return"mp2t"==b.split(/ *; */)[0].split("/")[1].toLowerCase()?!1:a(b)}};\nshaka.polyfill.MediaSource.rejectCodec_=function(a){var b=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(c){return shaka.util.MimeUtils.getCodecBase(c)!=a&&b(c)}};shaka.polyfill.MediaSource.patchCastIsTypeSupported_=function(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){var c=b.split(/ *; */);c.shift();return c.some(function(d){return d.startsWith("codecs=")})?cast.__platform__.canDisplayType(b):a(b)}};\nshaka.polyfill.MediaSource.patchVp09_=function(){var a=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(b){var c=b.split(/ *; */),d=c.findIndex(function(g){return g.startsWith("codecs=")});if(0>d)return a(b);var e=c[d].replace("codecs=","").replace(/"/g,"").split(/\\s*,\\s*/),f=e.findIndex(function(g){return g.startsWith("vp09")});0<=f&&(e[f]="vp9",c[d]=\'codecs="\'+e.join(",")+\'"\',b=c.join("; "));return a(b)}};shaka.polyfill.register(shaka.polyfill.MediaSource.install);shaka.polyfill.Orientation=function(){};shaka.polyfill.Orientation.install=function(){screen.orientation||void 0!=window.orientation&&shaka.polyfill.Orientation.installBasedOnWindowMethods_()};\nshaka.polyfill.Orientation.installBasedOnWindowMethods_=function(){var a=new shaka.polyfill.Orientation.FakeOrientation;screen.orientation=a;var b=function(){switch(window.orientation){case -90:a.type="landscape-secondary";a.angle=270;break;case 0:a.type="portrait-primary";a.angle=0;break;case 90:a.type="landscape-primary";a.angle=90;break;case 180:a.type="portrait-secondary",a.angle=180}};b();window.addEventListener("orientationchange",function(){b();a.dispatchChangeEvent()})};\nshaka.polyfill.Orientation.FakeOrientation=function(){shaka.util.FakeEventTarget.call(this);this.type="";this.angle=0};$jscomp.inherits(shaka.polyfill.Orientation.FakeOrientation,shaka.util.FakeEventTarget);shaka.polyfill.Orientation.FakeOrientation.prototype.dispatchChangeEvent=function(){var a=new shaka.util.FakeEvent("change",{});this.dispatchEvent(a)};\nshaka.polyfill.Orientation.FakeOrientation.prototype.lock=function(a){var b=function(d){return screen.lockOrientation?screen.lockOrientation(d):screen.mozLockOrientation?screen.mozLockOrientation(d):screen.msLockOrientation?screen.msLockOrientation(d):!1},c=!1;switch(a){case "natural":c=b("default");break;case "any":c=!0;this.unlock();break;default:c=b(a)}if(c)return Promise.resolve();a=Error("screen.orientation.lock() is not available on this device");a.name="NotSupportedError";a.code=DOMException.NOT_SUPPORTED_ERR;\nreturn Promise.reject(a)};shaka.polyfill.Orientation.FakeOrientation.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()};shaka.polyfill.register(shaka.polyfill.Orientation.install);shaka.polyfill.PatchedMediaKeysApple=function(){};\nshaka.polyfill.PatchedMediaKeysApple.install=function(){if(window.HTMLVideoElement&&window.WebKitMediaKeys){shaka.log.info("Using Apple-prefixed EME");var a=shaka.polyfill.PatchedMediaKeysApple;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=a.setMediaKeys;window.MediaKeys=a.MediaKeys;window.MediaKeySystemAccess=a.MediaKeySystemAccess;navigator.requestMediaKeySystemAccess=a.requestMediaKeySystemAccess}};\nshaka.polyfill.PatchedMediaKeysApple.requestMediaKeySystemAccess=function(a,b){shaka.log.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess");goog.asserts.assert(this==navigator,\'bad "this" for requestMediaKeySystemAccess\');var c=shaka.polyfill.PatchedMediaKeysApple;try{var d=new c.MediaKeySystemAccess(a,b);return Promise.resolve(d)}catch(e){return Promise.reject(e)}};\nshaka.polyfill.PatchedMediaKeysApple.setMediaKeys=function(a){shaka.log.debug("PatchedMediaKeysApple.setMediaKeys");goog.asserts.assert(this instanceof HTMLMediaElement,\'bad "this" for setMediaKeys\');var b=shaka.polyfill.PatchedMediaKeysApple,c=this.mediaKeys;c&&c!=a&&(goog.asserts.assert(c instanceof b.MediaKeys,"non-polyfill instance of oldMediaKeys"),c.setMedia(null));delete this.mediaKeys;return(this.mediaKeys=a)?(goog.asserts.assert(a instanceof b.MediaKeys,"non-polyfill instance of newMediaKeys"),\na.setMedia(this)):Promise.resolve()};\nshaka.polyfill.PatchedMediaKeysApple.onWebkitNeedKey_=function(a){shaka.log.debug("PatchedMediaKeysApple.onWebkitNeedKey_",a);goog.asserts.assert(this.mediaKeys instanceof shaka.polyfill.PatchedMediaKeysApple.MediaKeys,"non-polyfill instance of newMediaKeys");goog.asserts.assert(null!=a.initData,"missing init data!");a=shaka.util.BufferUtils.toUint8(a.initData);if(shaka.util.BufferUtils.toDataView(a).getUint32(0,!0)+4!=a.byteLength)throw new RangeError("Malformed FairPlay init data");a=shaka.util.StringUtils.fromUTF16(a.subarray(4),\n!0);a=shaka.util.StringUtils.toUTF8(a);var b=new Event("encrypted");b.initDataType="skd";b.initData=shaka.util.BufferUtils.toArrayBuffer(a);this.dispatchEvent(b)};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess=function(a,b){shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess");this.keySystem=a;if(a.startsWith("com.apple.fps"))for(var c=$jscomp.makeIterator(b),d=c.next();!d.done;d=c.next())if(d=this.checkConfig_(d.value)){this.configuration_=d;return}c=Error("Unsupported keySystem");c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.checkConfig_=function(a){if("required"==a.persistentState)return null;var b={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:a.initDataTypes,sessionTypes:["temporary"],label:a.label},c=!1,d=!1;if(a.audioCapabilities)for(var e=$jscomp.makeIterator(a.audioCapabilities),f=e.next();!f.done;f=e.next())if(f=f.value,f.contentType){c=!0;var g=f.contentType.split(";")[0];\nWebKitMediaKeys.isTypeSupported(this.keySystem,g)&&(b.audioCapabilities.push(f),d=!0)}if(a.videoCapabilities)for(a=$jscomp.makeIterator(a.videoCapabilities),f=a.next();!f.done;f=a.next())e=f.value,e.contentType&&(c=!0,f=e.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,f)&&(b.videoCapabilities.push(e),d=!0));c||(d=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));return d?b:null};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.createMediaKeys=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var a=new shaka.polyfill.PatchedMediaKeysApple.MediaKeys(this.keySystem);return Promise.resolve(a)};shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.getConfiguration=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration");return this.configuration_};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeys=function(a){shaka.log.debug("PatchedMediaKeysApple.MediaKeys");this.nativeMediaKeys_=new WebKitMediaKeys(a);this.eventManager_=new shaka.util.EventManager};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.createSession=function(a){shaka.log.debug("PatchedMediaKeysApple.MediaKeys.createSession");a=a||"temporary";if("temporary"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");return new shaka.polyfill.PatchedMediaKeysApple.MediaKeySession(this.nativeMediaKeys_,a)};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.setServerCertificate=function(a){shaka.log.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate");return Promise.resolve(!1)};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.setMedia=function(a){var b=this,c=shaka.polyfill.PatchedMediaKeysApple;this.eventManager_.removeAll();if(!a)return Promise.resolve();this.eventManager_.listen(a,"webkitneedkey",c.onWebkitNeedKey_);try{return shaka.util.MediaReadyState.waitForReadyState(a,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){a.webkitSetMediaKeys(b.nativeMediaKeys_)}),Promise.resolve()}catch(d){return Promise.reject(d)}};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySession=function(a,b){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession");shaka.util.FakeEventTarget.call(this);this.nativeMediaKeySession_=null;this.nativeMediaKeys_=a;this.updatePromise_=this.generateRequestPromise_=null;this.eventManager_=new shaka.util.EventManager;this.sessionId="";this.expiration=NaN;this.closed=new shaka.util.PublicPromise;this.keyStatuses=new shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap};\n$jscomp.inherits(shaka.polyfill.PatchedMediaKeysApple.MediaKeySession,shaka.util.FakeEventTarget);\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.generateRequest=function(a,b){var c=this;shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest");this.generateRequestPromise_=new shaka.util.PublicPromise;try{var d=this.nativeMediaKeys_.createSession("video/mp4",shaka.util.BufferUtils.toUint8(b));this.nativeMediaKeySession_=d;this.sessionId=d.sessionId||"";this.eventManager_.listen(this.nativeMediaKeySession_,"webkitkeymessage",function(e){return c.onWebkitKeyMessage_(e)});\nthis.eventManager_.listen(d,"webkitkeyadded",function(e){return c.onWebkitKeyAdded_(e)});this.eventManager_.listen(d,"webkitkeyerror",function(e){return c.onWebkitKeyError_(e)});this.updateKeyStatus_("status-pending")}catch(e){this.generateRequestPromise_.reject(e)}return this.generateRequestPromise_};shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.load=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.load");return Promise.reject(Error("MediaKeySession.load not yet supported"))};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.update=function(a){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.update");this.updatePromise_=new shaka.util.PublicPromise;try{this.nativeMediaKeySession_.update(shaka.util.BufferUtils.toUint8(a))}catch(b){this.updatePromise_.reject(b)}return this.updatePromise_};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.close=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.nativeMediaKeySession_.close(),this.closed.resolve(),this.eventManager_.removeAll()}catch(a){this.closed.reject(a)}return this.closed};shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.remove=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.remove");return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyMessage_=function(a){shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",a);goog.asserts.assert(this.generateRequestPromise_,"generateRequestPromise_ should be set before now!");this.generateRequestPromise_&&(this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null);var b=void 0==this.keyStatuses.getStatus();a=new shaka.util.FakeEvent("message",{messageType:b?"license-request":"license-renewal",message:shaka.util.BufferUtils.toArrayBuffer(a.message)});\nthis.dispatchEvent(a)};shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyAdded_=function(a){shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",a);goog.asserts.assert(!this.generateRequestPromise_,"Key added during generate!");goog.asserts.assert(this.updatePromise_,"updatePromise_ should be set before now!");this.updatePromise_&&(this.updateKeyStatus_("usable"),this.updatePromise_.resolve(),this.updatePromise_=null)};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyError_=function(a){shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyError_",a);a=Error("EME PatchedMediaKeysApple key error");a.errorCode=this.nativeMediaKeySession_.error;if(null!=this.generateRequestPromise_)this.generateRequestPromise_.reject(a),this.generateRequestPromise_=null;else if(null!=this.updatePromise_)this.updatePromise_.reject(a),this.updatePromise_=null;else switch(this.nativeMediaKeySession_.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:this.updateKeyStatus_("output-not-allowed");\nbreak;default:this.updateKeyStatus_("internal-error")}};shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.updateKeyStatus_=function(a){this.keyStatuses.setStatus(a);a=new shaka.util.FakeEvent("keystatuseschange");this.dispatchEvent(a)};shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap=function(){this.size=0;this.status_=void 0};shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.setStatus=function(a){this.size=void 0==a?0:1;this.status_=a};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.getStatus=function(){return this.status_};shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.forEach=function(a){this.status_&&a(this.status_,shaka.media.DrmEngine.DUMMY_KEY_ID.value())};shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.get=function(a){if(this.has(a))return this.status_};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.has=function(a){var b=shaka.media.DrmEngine.DUMMY_KEY_ID.value();return this.status_&&shaka.util.BufferUtils.equal(a,b)?!0:!1};shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.entries=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")};shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.keys=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")};\nshaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.values=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")};shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysApple.install);shaka.polyfill.PatchedMediaKeysMs=function(){};\nshaka.polyfill.PatchedMediaKeysMs.install=function(){if(window.HTMLVideoElement&&window.MSMediaKeys&&(!navigator.requestMediaKeySystemAccess||!MediaKeySystemAccess.prototype.getConfiguration)){shaka.log.info("Using ms-prefixed EME v20140218");var a=shaka.polyfill.PatchedMediaKeysMs;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;window.MediaKeys=a.MediaKeys;window.MediaKeySystemAccess=a.MediaKeySystemAccess;navigator.requestMediaKeySystemAccess=a.requestMediaKeySystemAccess;\nHTMLMediaElement.prototype.setMediaKeys=a.MediaKeySystemAccess.setMediaKeys}};shaka.polyfill.PatchedMediaKeysMs.requestMediaKeySystemAccess=function(a,b){shaka.log.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");goog.asserts.assert(this==navigator,\'bad "this" for requestMediaKeySystemAccess\');var c=shaka.polyfill.PatchedMediaKeysMs;try{var d=new c.MediaKeySystemAccess(a,b);return Promise.resolve(d)}catch(e){return Promise.reject(e)}};\nshaka.polyfill.PatchedMediaKeysMs.onMsNeedKey_=function(a){shaka.log.debug("PatchedMediaKeysMs.onMsNeedKey_",a);if(a.initData){var b=new CustomEvent("encrypted");b.initDataType="cenc";b.initData=shaka.util.BufferUtils.toArrayBuffer(shaka.util.Pssh.normaliseInitData(a.initData));this.dispatchEvent(b)}};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySystemAccess=function(a,b){shaka.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess");this.keySystem=a;for(var c=!1,d=$jscomp.makeIterator(b),e=d.next();!e.done;e=d.next()){e=e.value;var f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"],label:e.label},g=!1;if(e.audioCapabilities)for(var h=$jscomp.makeIterator(e.audioCapabilities),k=h.next();!k.done;k=\nh.next())if(k=k.value,k.contentType){g=!0;var l=k.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,l)&&(f.audioCapabilities.push(k),c=!0)}if(e.videoCapabilities)for(h=$jscomp.makeIterator(e.videoCapabilities),k=h.next();!k.done;k=h.next())k=k.value,k.contentType&&(g=!0,l=k.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,l)&&(f.videoCapabilities.push(k),c=!0));g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==e.persistentState&&(c=!1);\nif(c){this.configuration_=f;return}}c=Error("Unsupported keySystem");c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;};shaka.polyfill.PatchedMediaKeysMs.MediaKeySystemAccess.prototype.createMediaKeys=function(){shaka.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var a=new shaka.polyfill.PatchedMediaKeysMs.MediaKeys(this.keySystem);return Promise.resolve(a)};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySystemAccess.prototype.getConfiguration=function(){shaka.log.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration");return this.configuration_};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySystemAccess.setMediaKeys=function(a){shaka.log.debug("PatchedMediaKeysMs.setMediaKeys");goog.asserts.assert(this instanceof HTMLMediaElement,\'bad "this" for setMediaKeys\');var b=shaka.polyfill.PatchedMediaKeysMs,c=this.mediaKeys;c&&c!=a&&(goog.asserts.assert(c instanceof b.MediaKeys,"non-polyfill instance of oldMediaKeys"),c.setMedia(null));delete this.mediaKeys;return(this.mediaKeys=a)?(goog.asserts.assert(a instanceof b.MediaKeys,"non-polyfill instance of newMediaKeys"),\na.setMedia(this)):Promise.resolve()};shaka.polyfill.PatchedMediaKeysMs.MediaKeys=function(a){shaka.log.debug("PatchedMediaKeysMs.MediaKeys");this.nativeMediaKeys_=new MSMediaKeys(a);this.eventManager_=new shaka.util.EventManager};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeys.prototype.createSession=function(a){shaka.log.debug("PatchedMediaKeysMs.MediaKeys.createSession");a=a||"temporary";if("temporary"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");return new shaka.polyfill.PatchedMediaKeysMs.MediaKeySession(this.nativeMediaKeys_,a)};shaka.polyfill.PatchedMediaKeysMs.MediaKeys.prototype.setServerCertificate=function(a){shaka.log.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate");return Promise.resolve(!1)};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeys.prototype.setMedia=function(a){var b=this,c=shaka.polyfill.PatchedMediaKeysMs;this.eventManager_.removeAll();if(!a)return Promise.resolve();this.eventManager_.listen(a,"msneedkey",c.onMsNeedKey_);try{return shaka.util.MediaReadyState.waitForReadyState(a,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){a.msSetMediaKeys(b.nativeMediaKeys_)}),Promise.resolve()}catch(d){return Promise.reject(d)}};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySession=function(a,b){shaka.log.debug("PatchedMediaKeysMs.MediaKeySession");shaka.util.FakeEventTarget.call(this);this.nativeMediaKeySession_=null;this.nativeMediaKeys_=a;this.updatePromise_=this.generateRequestPromise_=null;this.eventManager_=new shaka.util.EventManager;this.sessionId="";this.expiration=NaN;this.closed=new shaka.util.PublicPromise;this.keyStatuses=new shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap};\n$jscomp.inherits(shaka.polyfill.PatchedMediaKeysMs.MediaKeySession,shaka.util.FakeEventTarget);\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.generateRequest=function(a,b){var c=this;shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest");this.generateRequestPromise_=new shaka.util.PublicPromise;try{this.nativeMediaKeySession_=this.nativeMediaKeys_.createSession("video/mp4",shaka.util.BufferUtils.toUint8(b),null),this.eventManager_.listen(this.nativeMediaKeySession_,"mskeymessage",function(d){return c.onMsKeyMessage_(d)}),this.eventManager_.listen(this.nativeMediaKeySession_,\n"mskeyadded",function(d){return c.onMsKeyAdded_(d)}),this.eventManager_.listen(this.nativeMediaKeySession_,"mskeyerror",function(d){return c.onMsKeyError_(d)}),this.updateKeyStatus_("status-pending")}catch(d){this.generateRequestPromise_.reject(d)}return this.generateRequestPromise_};shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.load=function(){shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.load");return Promise.reject(Error("MediaKeySession.load not yet supported"))};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.update=function(a){shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.update");this.updatePromise_=new shaka.util.PublicPromise;try{this.nativeMediaKeySession_.update(shaka.util.BufferUtils.toUint8(a))}catch(b){this.updatePromise_.reject(b)}return this.updatePromise_};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.close=function(){shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.nativeMediaKeySession_.close(),this.closed.resolve(),this.eventManager_.removeAll()}catch(a){this.closed.reject(a)}return this.closed};shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.remove=function(){shaka.log.debug("PatchedMediaKeysMs.MediaKeySession.remove");return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.onMsKeyMessage_=function(a){shaka.log.debug("PatchedMediaKeysMs.onMsKeyMessage_",a);goog.asserts.assert(this.generateRequestPromise_,"generateRequestPromise_ not set in onMsKeyMessage_");this.generateRequestPromise_&&(this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null);var b=void 0==this.keyStatuses.getStatus();a=new shaka.util.FakeEvent("message",{messageType:b?"license-request":"license-renewal",message:shaka.util.BufferUtils.toArrayBuffer(a.message)});\nthis.dispatchEvent(a)};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.onMsKeyAdded_=function(a){shaka.log.debug("PatchedMediaKeysMs.onMsKeyAdded_",a);this.generateRequestPromise_?(shaka.log.debug("Simulating completion for a PR persistent license."),goog.asserts.assert(!this.updatePromise_,"updatePromise_ and generateRequestPromise_ set in onMsKeyAdded_"),this.updateKeyStatus_("usable"),this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null):(goog.asserts.assert(this.updatePromise_,"updatePromise_ not set in onMsKeyAdded_"),\nthis.updatePromise_&&(this.updateKeyStatus_("usable"),this.updatePromise_.resolve(),this.updatePromise_=null))};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.onMsKeyError_=function(a){shaka.log.debug("PatchedMediaKeysMs.onMsKeyError_",a);a=Error("EME PatchedMediaKeysMs key error");a.errorCode=this.nativeMediaKeySession_.error;if(null!=this.generateRequestPromise_)this.generateRequestPromise_.reject(a),this.generateRequestPromise_=null;else if(null!=this.updatePromise_)this.updatePromise_.reject(a),this.updatePromise_=null;else switch(this.nativeMediaKeySession_.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.updateKeyStatus_("output-not-allowed");\nbreak;default:this.updateKeyStatus_("internal-error")}};shaka.polyfill.PatchedMediaKeysMs.MediaKeySession.prototype.updateKeyStatus_=function(a){this.keyStatuses.setStatus(a);a=new shaka.util.FakeEvent("keystatuseschange");this.dispatchEvent(a)};shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap=function(){this.size=0;this.status_=void 0};shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.setStatus=function(a){this.size=void 0==a?0:1;this.status_=a};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.getStatus=function(){return this.status_};shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.forEach=function(a){this.status_&&a(this.status_,shaka.media.DrmEngine.DUMMY_KEY_ID.value())};shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.get=function(a){if(this.has(a))return this.status_};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.has=function(a){var b=shaka.media.DrmEngine.DUMMY_KEY_ID.value();return this.status_&&shaka.util.BufferUtils.equal(a,b)?!0:!1};shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.entries=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")};shaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.keys=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")};\nshaka.polyfill.PatchedMediaKeysMs.MediaKeyStatusMap.prototype.values=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")};shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysMs.install);shaka.polyfill.PatchedMediaKeysNop=function(){};\nshaka.polyfill.PatchedMediaKeysNop.install=function(){if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){shaka.log.info("EME not available.");var a=shaka.polyfill.PatchedMediaKeysNop;navigator.requestMediaKeySystemAccess=a.requestMediaKeySystemAccess;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=a.setMediaKeys;window.MediaKeys=a.MediaKeys;window.MediaKeySystemAccess=\na.MediaKeySystemAccess}};shaka.polyfill.PatchedMediaKeysNop.requestMediaKeySystemAccess=function(a,b){shaka.log.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess");goog.asserts.assert(this==navigator,\'bad "this" for requestMediaKeySystemAccess\');return Promise.reject(Error("The key system specified is not supported."))};\nshaka.polyfill.PatchedMediaKeysNop.setMediaKeys=function(a){shaka.log.debug("PatchedMediaKeysNop.setMediaKeys");goog.asserts.assert(this instanceof HTMLMediaElement,\'bad "this" for setMediaKeys\');return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))};shaka.polyfill.PatchedMediaKeysNop.MediaKeys=function(){throw new TypeError("Illegal constructor.");};shaka.polyfill.PatchedMediaKeysNop.MediaKeys.prototype.createSession=function(){};\nshaka.polyfill.PatchedMediaKeysNop.MediaKeys.prototype.setServerCertificate=function(){};shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess=function(){this.keySystem="";throw new TypeError("Illegal constructor.");};shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess.prototype.getConfiguration=function(){};shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess.prototype.createMediaKeys=function(){};shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysNop.install,-10);shaka.polyfill.PatchedMediaKeysWebkit=function(){};\nshaka.polyfill.PatchedMediaKeysWebkit.install=function(){var a=shaka.polyfill.PatchedMediaKeysWebkit;if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)shaka.log.info("Using webkit-prefixed EME v0.1b"),a.prefix_="webkit";else if(HTMLMediaElement.prototype.generateKeyRequest)shaka.log.info("Using nonprefixed EME v0.1b");else return;goog.asserts.assert(HTMLMediaElement.prototype[a.prefixApi_("generateKeyRequest")],\n"PatchedMediaKeysWebkit APIs not available!");navigator.requestMediaKeySystemAccess=a.requestMediaKeySystemAccess;delete HTMLMediaElement.prototype.mediaKeys;HTMLMediaElement.prototype.mediaKeys=null;HTMLMediaElement.prototype.setMediaKeys=a.setMediaKeys;window.MediaKeys=a.MediaKeys;window.MediaKeySystemAccess=a.MediaKeySystemAccess}};shaka.polyfill.PatchedMediaKeysWebkit.prefixApi_=function(a){var b=shaka.polyfill.PatchedMediaKeysWebkit.prefix_;return b?b+a.charAt(0).toUpperCase()+a.slice(1):a};\nshaka.polyfill.PatchedMediaKeysWebkit.requestMediaKeySystemAccess=function(a,b){shaka.log.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");goog.asserts.assert(this==navigator,\'bad "this" for requestMediaKeySystemAccess\');var c=shaka.polyfill.PatchedMediaKeysWebkit;try{var d=new c.MediaKeySystemAccess(a,b);return Promise.resolve(d)}catch(e){return Promise.reject(e)}};\nshaka.polyfill.PatchedMediaKeysWebkit.setMediaKeys=function(a){shaka.log.debug("PatchedMediaKeysWebkit.setMediaKeys");goog.asserts.assert(this instanceof HTMLMediaElement,\'bad "this" for setMediaKeys\');var b=shaka.polyfill.PatchedMediaKeysWebkit,c=this.mediaKeys;c&&c!=a&&(goog.asserts.assert(c instanceof b.MediaKeys,"non-polyfill instance of oldMediaKeys"),c.setMedia(null));delete this.mediaKeys;if(this.mediaKeys=a)goog.asserts.assert(a instanceof b.MediaKeys,"non-polyfill instance of newMediaKeys"),\na.setMedia(this);return Promise.resolve()};shaka.polyfill.PatchedMediaKeysWebkit.getVideoElement_=function(){var a=document.getElementsByTagName("video");return a.length?a[0]:document.createElement("video")};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess=function(a,b){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess");this.internalKeySystem_=this.keySystem=a;var c=!1;"org.w3.clearkey"==a&&(this.internalKeySystem_="webkit-org.w3.clearkey",c=!1);for(var d=!1,e=shaka.polyfill.PatchedMediaKeysWebkit.getVideoElement_(),f=$jscomp.makeIterator(b),g=f.next();!g.done;g=f.next()){g=g.value;var h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",\ninitDataTypes:g.initDataTypes,sessionTypes:["temporary"],label:g.label},k=!1;if(g.audioCapabilities)for(var l=$jscomp.makeIterator(g.audioCapabilities),m=l.next();!m.done;m=l.next())if(m=m.value,m.contentType){k=!0;var n=m.contentType.split(";")[0];e.canPlayType(n,this.internalKeySystem_)&&(h.audioCapabilities.push(m),d=!0)}if(g.videoCapabilities)for(l=$jscomp.makeIterator(g.videoCapabilities),m=l.next();!m.done;m=l.next())m=m.value,m.contentType&&(k=!0,e.canPlayType(m.contentType,this.internalKeySystem_)&&\n(h.videoCapabilities.push(m),d=!0));k||(d=e.canPlayType("video/mp4",this.internalKeySystem_)||e.canPlayType("video/webm",this.internalKeySystem_));"required"==g.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):d=!1);if(d){this.configuration_=h;return}}c="Unsupported keySystem";if("org.w3.clearkey"==a||"com.widevine.alpha"==a)c="None of the requested configurations were supported.";c=Error(c);c.name="NotSupportedError";c.code=DOMException.NOT_SUPPORTED_ERR;throw c;\n};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess.prototype.createMediaKeys=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var a=new shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys(this.internalKeySystem_);return Promise.resolve(a)};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess.prototype.getConfiguration=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration");return this.configuration_};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys=function(a){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys");this.keySystem_=a;this.media_=null;this.eventManager_=new shaka.util.EventManager;this.newSessions_=[];this.sessionMap_=new Map};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.setMedia=function(a){var b=this;this.media_=a;this.eventManager_.removeAll();var c=shaka.polyfill.PatchedMediaKeysWebkit.prefix_;a&&(this.eventManager_.listen(a,c+"needkey",function(d){return b.onWebkitNeedKey_(d)}),this.eventManager_.listen(a,c+"keymessage",function(d){return b.onWebkitKeyMessage_(d)}),this.eventManager_.listen(a,c+"keyadded",function(d){return b.onWebkitKeyAdded_(d)}),this.eventManager_.listen(a,c+"keyerror",function(d){return b.onWebkitKeyError_(d)}))};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.createSession=function(a){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.createSession");a=a||"temporary";if("temporary"!=a&&"persistent-license"!=a)throw new TypeError("Session type "+a+" is unsupported on this platform.");var b=shaka.polyfill.PatchedMediaKeysWebkit,c=this.media_||document.createElement("video");c.src||(c.src="about:blank");a=new b.MediaKeySession(c,this.keySystem_,a);this.newSessions_.push(a);return a};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.setServerCertificate=function(a){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate");return Promise.resolve(!1)};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitNeedKey_=function(a){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",a);goog.asserts.assert(this.media_,"media_ not set in onWebkitNeedKey_");var b=new CustomEvent("encrypted");b.initDataType="cenc";b.initData=shaka.util.BufferUtils.toArrayBuffer(a.initData);this.media_.dispatchEvent(b)};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyMessage_=function(a){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",a);var b=this.findSession_(a.sessionId);if(b){var c=void 0==b.keyStatuses.getStatus();a=new shaka.util.FakeEvent("message",{messageType:c?"licenserequest":"licenserenewal",message:a.message});b.generated();b.dispatchEvent(a)}else shaka.log.error("Session not found",a.sessionId)};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyAdded_=function(a){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",a);a=this.findSession_(a.sessionId);goog.asserts.assert(a,"unable to find session in onWebkitKeyAdded_");a&&a.ready()};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyError_=function(a){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",a);var b=this.findSession_(a.sessionId);goog.asserts.assert(b,"unable to find session in onWebkitKeyError_");b&&b.handleError(a)};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.findSession_=function(a){var b=this.sessionMap_.get(a);return b?(shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",b),b):(b=this.newSessions_.shift())?(b.sessionId=a,this.sessionMap_.set(a,b),shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",b),b):null};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession=function(a,b,c){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession");shaka.util.FakeEventTarget.call(this);this.media_=a;this.initialized_=!1;this.updatePromise_=this.generatePromise_=null;this.keySystem_=b;this.type_=c;this.sessionId="";this.expiration=NaN;this.closed=new shaka.util.PublicPromise;this.keyStatuses=new shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap};\n$jscomp.inherits(shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession,shaka.util.FakeEventTarget);shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generated=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.generated");this.generatePromise_&&(this.generatePromise_.resolve(),this.generatePromise_=null)};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.ready=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.ready");this.updateKeyStatus_("usable");this.updatePromise_&&this.updatePromise_.resolve();this.updatePromise_=null};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.handleError=function(a){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",a);var b=Error("EME v0.1b key error"),c=a.errorCode;c.systemCode=a.systemCode;b.errorCode=c;!a.sessionId&&this.generatePromise_?(45==a.systemCode&&(b.message="Unsupported session type."),this.generatePromise_.reject(b),this.generatePromise_=null):a.sessionId&&this.updatePromise_?(this.updatePromise_.reject(b),this.updatePromise_=null):(b=a.systemCode,\na.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?this.updateKeyStatus_("output-restricted"):1==b?this.updateKeyStatus_("expired"):this.updateKeyStatus_("internal-error"))};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generate_=function(a,b){var c=this,d=shaka.polyfill.PatchedMediaKeysWebkit;if(this.initialized_)return Promise.reject(Error("The session is already initialized."));this.initialized_=!0;try{if("persistent-license"==this.type_){var e=shaka.util.StringUtils;if(b)var f=shaka.util.BufferUtils.toUint8(e.toUTF8("LOAD_SESSION|"+b));else{goog.asserts.assert(a,"expecting init data");var g=e.toUTF8("PERSISTENT|");f=shaka.util.Uint8ArrayUtils.concat(g,\na)}}else goog.asserts.assert("temporary"==this.type_,"expected temporary session"),goog.asserts.assert(!b,"unexpected offline session ID"),goog.asserts.assert(a,"expecting init data"),f=shaka.util.BufferUtils.toUint8(a);goog.asserts.assert(f,"init data not set!")}catch(k){return Promise.reject(k)}goog.asserts.assert(null==this.generatePromise_,"generatePromise_ should be null");this.generatePromise_=new shaka.util.PublicPromise;var h=d.prefixApi_("generateKeyRequest");try{this.media_[h](this.keySystem_,\nf)}catch(k){if("InvalidStateError"!=k.name)return this.generatePromise_=null,Promise.reject(k);(new shaka.util.Timer(function(){try{c.media_[h](c.keySystem_,f)}catch(l){c.generatePromise_.reject(l),c.generatePromise_=null}})).tickAfter(.01)}return this.generatePromise_};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.update_=function(a,b){var c=this,d=shaka.polyfill.PatchedMediaKeysWebkit;if(this.updatePromise_)this.updatePromise_.then(function(){return c.update_(a,b)})["catch"](function(){return c.update_(a,b)});else{this.updatePromise_=a;if("webkit-org.w3.clearkey"==this.keySystem_){var e=shaka.util.Uint8ArrayUtils;var f=shaka.util.StringUtils.fromUTF8(b);var g=JSON.parse(f);"oct"!=g.keys[0].kty&&(this.updatePromise_.reject(Error("Response is not a valid JSON Web Key Set.")),\nthis.updatePromise_=null);f=e.fromBase64(g.keys[0].k);e=e.fromBase64(g.keys[0].kid)}else f=shaka.util.BufferUtils.toUint8(b),e=null;d=d.prefixApi_("addKey");try{this.media_[d](this.keySystem_,f,e,this.sessionId)}catch(h){this.updatePromise_.reject(h),this.updatePromise_=null}}};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.updateKeyStatus_=function(a){this.keyStatuses.setStatus(a);a=new shaka.util.FakeEvent("keystatuseschange");this.dispatchEvent(a)};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generateRequest=function(a,b){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest");return this.generate_(b,null)};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.load=function(a){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.load");return"persistent-license"==this.type_?this.generate_(null,a):Promise.reject(Error("Not a persistent session."))};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.update=function(a){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.update",a);goog.asserts.assert(this.sessionId,"update without session ID");var b=new shaka.util.PublicPromise;this.update_(b,a);return b};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.close=function(){var a=shaka.polyfill.PatchedMediaKeysWebkit;shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.close");if("persistent-license"!=this.type_){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;a=a.prefixApi_("cancelKeyRequest");try{this.media_[a](this.keySystem_,this.sessionId)}catch(b){}}this.closed.resolve();return this.closed};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.remove=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.remove");return"persistent-license"!=this.type_?Promise.reject(Error("Not a persistent session.")):this.close()};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap=function(){this.size=0;this.status_=void 0};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.setStatus=function(a){this.size=void 0==a?0:1;this.status_=a};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.getStatus=function(){return this.status_};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.forEach=function(a){this.status_&&a(this.status_,shaka.media.DrmEngine.DUMMY_KEY_ID.value())};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.get=function(a){if(this.has(a))return this.status_};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.has=function(a){var b=shaka.media.DrmEngine.DUMMY_KEY_ID.value();return this.status_&&shaka.util.BufferUtils.equal(a,b)?!0:!1};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.entries=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")};shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.keys=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")};\nshaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.values=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")};shaka.polyfill.PatchedMediaKeysWebkit.prefix_="";shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysWebkit.install);shaka.polyfill.PiPWebkit=function(){};\nshaka.polyfill.PiPWebkit.install=function(){if(window.HTMLVideoElement){var a=HTMLVideoElement.prototype;if((!a.requestPictureInPicture||!document.exitPictureInPicture)&&a.webkitSupportsPresentationMode){var b=shaka.polyfill.PiPWebkit;shaka.log.debug("PiPWebkit.install");document.pictureInPictureEnabled=!0;document.pictureInPictureElement=null;a.requestPictureInPicture=b.requestPictureInPicture_;Object.defineProperty(a,"disablePictureInPicture",{get:b.getDisablePictureInPicture_,set:b.setDisablePictureInPicture_,\nenumerable:!0,configurable:!0});document.exitPictureInPicture=b.exitPictureInPicture_;document.addEventListener("webkitpresentationmodechanged",b.proxyEvent_,!0)}}};\nshaka.polyfill.PiPWebkit.proxyEvent_=function(a){a=a.target;if(a.webkitPresentationMode==shaka.polyfill.PiPWebkit.PIP_MODE_){document.pictureInPictureElement=a;var b=new Event("enterpictureinpicture");a.dispatchEvent(b)}else document.pictureInPictureElement==a&&(document.pictureInPictureElement=null),b=new Event("leavepictureinpicture"),a.dispatchEvent(b)};\nshaka.polyfill.PiPWebkit.requestPictureInPicture_=function(){var a=shaka.polyfill.PiPWebkit;return this.webkitSupportsPresentationMode(a.PIP_MODE_)?(this.webkitSetPresentationMode(a.PIP_MODE_),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))};\nshaka.polyfill.PiPWebkit.exitPictureInPicture_=function(){var a=shaka.polyfill.PiPWebkit,b=document.pictureInPictureElement;return b?(b.webkitSetPresentationMode(a.INLINE_MODE_),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))};shaka.polyfill.PiPWebkit.getDisablePictureInPicture_=function(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode(shaka.polyfill.PiPWebkit.PIP_MODE_)};\nshaka.polyfill.PiPWebkit.setDisablePictureInPicture_=function(a){a?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")};shaka.polyfill.PiPWebkit.PIP_MODE_="picture-in-picture";shaka.polyfill.PiPWebkit.INLINE_MODE_="inline";shaka.polyfill.register(shaka.polyfill.PiPWebkit.install);shaka.polyfill.StorageEstimate=function(){};shaka.polyfill.StorageEstimate.install=function(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=shaka.polyfill.StorageEstimate.storageEstimate_)};\nshaka.polyfill.StorageEstimate.storageEstimate_=function(){return new Promise(function(a,b){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(c,d){a({usage:c,quota:d})},b)})};shaka.polyfill.register(shaka.polyfill.StorageEstimate.install);shaka.polyfill.VideoPlayPromise=function(){};shaka.polyfill.VideoPlayPromise.install=function(){shaka.log.debug("VideoPlayPromise.install");if(window.HTMLMediaElement){var a=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var b=a.apply(this);b&&b["catch"](function(){});return b}}};shaka.polyfill.register(shaka.polyfill.VideoPlayPromise.install);shaka.polyfill.VideoPlaybackQuality=function(){};shaka.polyfill.VideoPlaybackQuality.install=function(){if(window.HTMLVideoElement){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=shaka.polyfill.VideoPlaybackQuality.webkit_)}};shaka.polyfill.VideoPlaybackQuality.webkit_=function(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}};\nshaka.polyfill.register(shaka.polyfill.VideoPlaybackQuality.install);shaka.polyfill.VTTCue=function(){};\nshaka.polyfill.VTTCue.install=function(){if(window.VTTCue)shaka.log.info("Using native VTTCue.");else if(window.TextTrackCue){var a=null,b=TextTrackCue.length;3==b?(shaka.log.info("Using VTTCue polyfill from 3 argument TextTrackCue."),a=shaka.polyfill.VTTCue.from3ArgsTextTrackCue_):6==b?(shaka.log.info("Using VTTCue polyfill from 6 argument TextTrackCue."),a=shaka.polyfill.VTTCue.from6ArgsTextTrackCue_):shaka.polyfill.VTTCue.canUse3ArgsTextTrackCue_()&&(shaka.log.info("Using VTTCue polyfill from 3 argument TextTrackCue."),a=\nshaka.polyfill.VTTCue.from3ArgsTextTrackCue_);a?window.VTTCue=function(c,d,e){return a(c,d,e)}:shaka.log.error("No recognized signature for TextTrackCue found!")}else shaka.log.error("VTTCue not available.")};shaka.polyfill.VTTCue.from3ArgsTextTrackCue_=function(a,b,c){return new window.TextTrackCue(a,b,c)};shaka.polyfill.VTTCue.from6ArgsTextTrackCue_=function(a,b,c){return new window.TextTrackCue(a+"-"+b+"-"+c,a,b,c)};\nshaka.polyfill.VTTCue.canUse3ArgsTextTrackCue_=function(){try{return!!shaka.polyfill.VTTCue.from3ArgsTextTrackCue_(1,2,"")}catch(a){return!1}};shaka.polyfill.register(shaka.polyfill.VTTCue.install);shaka.text.LrcTextParser=function(){};shaka.text.LrcTextParser.prototype.parseInit=function(a){goog.asserts.assert(!1,"LRC does not have init segments")};\nshaka.text.LrcTextParser.prototype.parseMedia=function(a,b){var c=shaka.text.LrcTextParser,d=null,e=[],f=shaka.util.StringUtils.fromUTF8(a).split(/\\r?\\n/);f=$jscomp.makeIterator(f);for(var g=f.next();!g.done;g=f.next()){var h=g.value;h&&!/^\\s+$/.test(h)&&((g=c.lyricLine_.exec(h))?(h=c.parseTime_(g[1]),g=new shaka.text.Cue(h,b.segmentEnd?b.segmentEnd:h+2,g[2]),d&&(d.endTime=h,e.push(d)),d=g):shaka.log.warning("LrcTextParser encountered an unknown line.",h))}d&&e.push(d);return e};\nshaka.text.LrcTextParser.parseTime_=function(a){var b=shaka.text.LrcTextParser.timeFormat_.exec(a);a=parseInt(b[1],10);b=parseFloat(b[2].replace(",","."));return 60*a+b};goog.exportSymbol("shaka.text.LrcTextParser",shaka.text.LrcTextParser);goog.exportProperty(shaka.text.LrcTextParser.prototype,"parseMedia",shaka.text.LrcTextParser.prototype.parseMedia);goog.exportProperty(shaka.text.LrcTextParser.prototype,"parseInit",shaka.text.LrcTextParser.prototype.parseInit);\nshaka.text.LrcTextParser.lyricLine_=/^\\[(\\d{1,2}:\\d{1,2}(?:[.,]\\d{1,3})?)\\](.*)/;shaka.text.LrcTextParser.timeFormat_=/^(\\d+):(\\d{1,2}(?:[.,]\\d{1,3})?)$/;shaka.text.TextEngine.registerParser("application/x-subtitle-lrc",function(){return new shaka.text.LrcTextParser});shaka.text.TtmlTextParser=function(){};shaka.text.TtmlTextParser.prototype.parseInit=function(a){goog.asserts.assert(!1,"TTML does not have init segments")};\nshaka.text.TtmlTextParser.prototype.parseMedia=function(a,b){var c=shaka.text.TtmlTextParser,d=shaka.util.XmlUtils,e=c.parameterNs_,f=c.styleNs_,g=shaka.util.StringUtils.fromUTF8(a),h=[],k=new DOMParser,l=null;if(""==g)return h;try{l=k.parseFromString(g,"text/xml")}catch(v){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,"Failed to parse TTML.");}if(l){if(g=l.getElementsByTagName("parsererror")[0])throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,g.textContent);var m=l.getElementsByTagName("tt")[0];if(!m)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,"TTML does not contain <tt> tag.");l=m.getElementsByTagName("body")[0];if(!l)return[];g=d.getAttributeNS(m,e,"frameRate");k=d.getAttributeNS(m,e,"subFrameRate");var n=d.getAttributeNS(m,e,"frameRateMultiplier"),p=d.getAttributeNS(m,e,"tickRate"),q=d.getAttributeNS(m,\ne,"cellResolution");e=m.getAttribute("xml:space")||"default";var r=d.getAttributeNS(m,f,"extent");if("default"!=e&&"preserve"!=e)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,"Invalid xml:space value: "+e);f="default"==e;e=new c.RateInfo_(g,k,n,p);g=c.getCellResolution_(q);k=(k=m.getElementsByTagName("metadata")[0])?d.getChildren(k):[];n=Array.from(m.getElementsByTagName("style"));m=Array.from(m.getElementsByTagName("region"));\np=[];q=$jscomp.makeIterator(m);for(var t=q.next();!t.done;t=q.next())(t=c.parseCueRegion_(t.value,n,r))&&p.push(t);if(d.findChildren(l,"p").length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"<p> can only be inside <div> in TTML");l=$jscomp.makeIterator(d.findChildren(l,"div"));for(r=l.next();!r.done;r=l.next()){r=r.value;if(d.findChildren(r,"span").length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"<span> can only be inside <p> in TTML");if((q=d.findChildren(r,"p"))&&q.length)for(r=$jscomp.makeIterator(q),q=r.next();!q.done;q=r.next())(q=c.parseCue_(q.value,b.periodStart,e,k,n,m,p,f,!1,g))&&h.push(q);else(r=c.parseCue_(r,b.periodStart,e,k,n,m,p,f,!1,g))&&h.push(r)}}return h};\nshaka.text.TtmlTextParser.parseCue_=function(a,b,c,d,e,f,g,h,k,l){var m=a.parentNode;if(a.nodeType==Node.TEXT_NODE){var n=document.createElement("span");n.textContent=a.textContent;a=n}else goog.asserts.assert(a.nodeType==Node.ELEMENT_NODE,"nodeType should be ELEMENT_NODE!");goog.asserts.assert(a,"cueElement should be non-null!");h="default"==(a.getAttribute("xml:space")||(h?"default":"preserve"));n=/\\S/.test(a.textContent);if(!(a.hasAttribute("begin")||a.hasAttribute("end")||a.hasAttribute("dur")||\nn||"br"==a.tagName||k&&!h))return null;var p=shaka.text.TtmlTextParser.parseTime_(a,c);n=p.start;for(p=p.end;m&&m.nodeType==Node.ELEMENT_NODE&&"tt"!=m.tagName;)p=shaka.text.TtmlTextParser.resolveTime_(m,c,n,p),n=p.start,p=p.end,m=m.parentNode;null==n&&(n=0);n+=b;p=null==p?Infinity:p+b;if("br"==a.tagName)return d=new shaka.text.Cue(n,p,""),d.lineBreak=!0,d;var q="";m=[];if(Array.from(a.childNodes).every(function(u){return u.nodeType==Node.TEXT_NODE}))q=a.textContent,h&&(q=q.trim(),q=q.replace(/\\s+/g,\n" "));else for(var r=$jscomp.makeIterator(a.childNodes),t=r.next();!t.done;t=r.next())(t=shaka.text.TtmlTextParser.parseCue_(t.value,b,c,d,e,f,g,h,!0,l))&&m.push(t);b=new shaka.text.Cue(n,p,q);b.nestedCues=m;l&&(b.cellResolution=l);if((f=shaka.text.TtmlTextParser.getElementsFromCollection_(a,"region",f,"")[0])&&f.getAttribute("xml:id")){var v=f.getAttribute("xml:id");b.region=g.filter(function(u){return u.id==v})[0]}g=null;l=$jscomp.makeIterator(shaka.text.TtmlTextParser.smpteNsList_);for(c=l.next();!c.done&&\n!(g=shaka.text.TtmlTextParser.getElementsFromCollection_(a,"backgroundImage",d,"#",c.value)[0]);c=l.next());shaka.text.TtmlTextParser.addStyle_(b,a,f,g,e,k,0==m.length);return b};\nshaka.text.TtmlTextParser.parseCueRegion_=function(a,b,c){var d=shaka.text.TtmlTextParser,e=new shaka.text.CueRegion,f=a.getAttribute("xml:id");if(!f)return shaka.log.warning("TtmlTextParser parser encountered a region with no id. Region will be ignored."),null;e.id=f;f=null;c&&(f=d.percentValues_.exec(c)||d.pixelValues_.exec(c));c=f?Number(f[1]):null;f=f?Number(f[2]):null;var g,h;if(g=d.getStyleAttributeFromRegion_(a,b,"extent"))g=(h=d.percentValues_.exec(g))||d.pixelValues_.exec(g),null!=g&&(e.width=\nNumber(g[1]),e.height=Number(g[2]),h||(null!=c&&(e.width=100*e.width/c),null!=f&&(e.height=100*e.height/f)),e.widthUnits=h||null!=c?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX,e.heightUnits=h||null!=f?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX);if(a=d.getStyleAttributeFromRegion_(a,b,"origin"))g=(h=d.percentValues_.exec(a))||d.pixelValues_.exec(a),null!=g&&(e.viewportAnchorX=Number(g[1]),e.viewportAnchorY=Number(g[2]),h||(null!=f&&(e.viewportAnchorY=\n100*e.viewportAnchorY/f),null!=c&&(e.viewportAnchorX=100*e.viewportAnchorX/c)),e.viewportAnchorUnits=h||null!=c?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX);return e};\nshaka.text.TtmlTextParser.addStyle_=function(a,b,c,d,e,f,g){var h=shaka.text.TtmlTextParser,k=shaka.text.Cue;f=f||g;"rtl"==h.getStyleAttribute_(b,c,e,"direction",f)&&(a.direction=k.direction.HORIZONTAL_RIGHT_TO_LEFT);g=h.getStyleAttribute_(b,c,e,"writingMode",f);"tb"==g||"tblr"==g?a.writingMode=k.writingMode.VERTICAL_LEFT_TO_RIGHT:"tbrl"==g?a.writingMode=k.writingMode.VERTICAL_RIGHT_TO_LEFT:"rltb"==g||"rl"==g?a.direction=k.direction.HORIZONTAL_RIGHT_TO_LEFT:g&&(a.direction=k.direction.HORIZONTAL_LEFT_TO_RIGHT);\n(g=h.getStyleAttribute_(b,c,e,"textAlign",f))?(a.positionAlign=h.textAlignToPositionAlign_[g],a.lineAlign=h.textAlignToLineAlign_[g],goog.asserts.assert(g.toUpperCase()in k.textAlign,g.toUpperCase()+" Should be in Cue.textAlign values!"),a.textAlign=k.textAlign[g.toUpperCase()]):a.textAlign=k.textAlign.START;if(g=h.getStyleAttribute_(b,c,e,"displayAlign",f))goog.asserts.assert(g.toUpperCase()in k.displayAlign,g.toUpperCase()+" Should be in Cue.displayAlign values!"),a.displayAlign=k.displayAlign[g.toUpperCase()];\nif(g=h.getStyleAttribute_(b,c,e,"color",f))a.color=g;if(g=h.getStyleAttribute_(b,c,e,"backgroundColor",f))a.backgroundColor=g;if(g=h.getStyleAttribute_(b,c,e,"border",f))a.border=g;if(g=h.getStyleAttribute_(b,c,e,"fontFamily",f))a.fontFamily=g;(g=h.getStyleAttribute_(b,c,e,"fontWeight",f))&&"bold"==g&&(a.fontWeight=k.fontWeight.BOLD);g=h.getStyleAttribute_(b,c,e,"wrapOption",f);a.wrapLine=g&&"noWrap"==g?!1:!0;(g=h.getStyleAttribute_(b,c,e,"lineHeight",f))&&g.match(h.unitValues_)&&(a.lineHeight=g);\n(g=h.getStyleAttribute_(b,c,e,"fontSize",f))&&(g.match(h.unitValues_)||g.match(h.percentValue_))&&(a.fontSize=g);if(g=h.getStyleAttribute_(b,c,e,"fontStyle",f))goog.asserts.assert(g.toUpperCase()in k.fontStyle,g.toUpperCase()+" Should be in Cue.fontStyle values!"),a.fontStyle=k.fontStyle[g.toUpperCase()];d&&(k=d.getAttribute("imageType")||d.getAttribute("imagetype"),g=d.getAttribute("encoding"),d=d.textContent.trim(),"PNG"==k&&"Base64"==g&&d&&(a.backgroundImage="data:image/png;base64,"+d));(d=h.getStyleAttribute_(b,\nc,e,"letterSpacing",f))&&d.match(h.unitValues_)&&(a.letterSpacing=d);(d=h.getStyleAttribute_(b,c,e,"linePadding",f))&&d.match(h.unitValues_)&&(a.linePadding=d);if(f=h.getStyleAttribute_(b,c,e,"opacity",f))a.opacity=parseFloat(f);(c=h.getStyleAttributeFromRegion_(c,e,"textDecoration"))&&h.addTextDecoration_(a,c);(b=h.getStyleAttributeFromElement_(b,e,"textDecoration"))&&h.addTextDecoration_(a,b)};\nshaka.text.TtmlTextParser.addTextDecoration_=function(a,b){for(var c=shaka.text.Cue,d=$jscomp.makeIterator(b.split(" ")),e=d.next();!e.done;e=d.next())switch(e.value){case "underline":a.textDecoration.includes(c.textDecoration.UNDERLINE)||a.textDecoration.push(c.textDecoration.UNDERLINE);break;case "noUnderline":a.textDecoration.includes(c.textDecoration.UNDERLINE)&&shaka.util.ArrayUtils.remove(a.textDecoration,c.textDecoration.UNDERLINE);break;case "lineThrough":a.textDecoration.includes(c.textDecoration.LINE_THROUGH)||\na.textDecoration.push(c.textDecoration.LINE_THROUGH);break;case "noLineThrough":a.textDecoration.includes(c.textDecoration.LINE_THROUGH)&&shaka.util.ArrayUtils.remove(a.textDecoration,c.textDecoration.LINE_THROUGH);break;case "overline":a.textDecoration.includes(c.textDecoration.OVERLINE)||a.textDecoration.push(c.textDecoration.OVERLINE);break;case "noOverline":a.textDecoration.includes(c.textDecoration.OVERLINE)&&shaka.util.ArrayUtils.remove(a.textDecoration,c.textDecoration.OVERLINE)}};\nshaka.text.TtmlTextParser.getStyleAttribute_=function(a,b,c,d,e){e=void 0===e?!0:e;var f=shaka.text.TtmlTextParser;return(a=f.getStyleAttributeFromElement_(a,c,d))?a:e?f.getStyleAttributeFromRegion_(b,c,d):null};shaka.text.TtmlTextParser.getStyleAttributeFromRegion_=function(a,b,c){if(!a)return null;var d=shaka.util.XmlUtils.getAttributeNS(a,shaka.text.TtmlTextParser.styleNs_,c);return d?d:shaka.text.TtmlTextParser.getInheritedStyleAttribute_(a,b,c)};\nshaka.text.TtmlTextParser.getStyleAttributeFromElement_=function(a,b,c){var d=shaka.util.XmlUtils.getAttributeNS(a,shaka.text.TtmlTextParser.styleNs_,c);return d?d:shaka.text.TtmlTextParser.getInheritedStyleAttribute_(a,b,c)};\nshaka.text.TtmlTextParser.getInheritedStyleAttribute_=function(a,b,c){var d=shaka.util.XmlUtils,e=shaka.text.TtmlTextParser.styleNs_,f=shaka.text.TtmlTextParser.styleEbuttsNs_;a=shaka.text.TtmlTextParser.getElementsFromCollection_(a,"style",b,"");for(var g=null,h=0;h<a.length;h++){var k=d.getAttributeNS(a[h],f,c);k||(k=d.getAttributeNS(a[h],e,c));k||(k=shaka.text.TtmlTextParser.getStyleAttributeFromElement_(a[h],b,c));k&&(g=k)}return g};\nshaka.text.TtmlTextParser.getElementsFromCollection_=function(a,b,c,d,e){var f=[];if(!a||1>c.length)return f;if(a=shaka.text.TtmlTextParser.getInheritedAttribute_(a,b,e))for(a=a.split(" "),a=$jscomp.makeIterator(a),b=a.next();!b.done;b=a.next()){b=b.value;e=$jscomp.makeIterator(c);for(var g=e.next();!g.done;g=e.next())if(g=g.value,d+g.getAttribute("xml:id")==b){f.push(g);break}}return f};\nshaka.text.TtmlTextParser.getInheritedAttribute_=function(a,b,c){for(var d=null,e=shaka.util.XmlUtils;a&&!(d=c?e.getAttributeNS(a,c,b):a.getAttribute(b))&&(a=a.parentNode,a instanceof Element););return d};shaka.text.TtmlTextParser.resolveTime_=function(a,b,c,d){a=shaka.text.TtmlTextParser.parseTime_(a,b);null==c?c=a.start:null!=a.start&&(c+=a.start);null==d?d=a.end:null!=a.start&&(d+=a.start);return{start:c,end:d}};\nshaka.text.TtmlTextParser.parseTime_=function(a,b){var c=shaka.text.TtmlTextParser.parseTimeAttribute_(a.getAttribute("begin"),b),d=shaka.text.TtmlTextParser.parseTimeAttribute_(a.getAttribute("end"),b),e=shaka.text.TtmlTextParser.parseTimeAttribute_(a.getAttribute("dur"),b);null==d&&null!=e&&(d=c+e);return{start:c,end:d}};\nshaka.text.TtmlTextParser.parseTimeAttribute_=function(a,b){var c=null,d=shaka.text.TtmlTextParser;if(d.timeColonFormatFrames_.test(a))c=d.parseColonTimeWithFrames_(b,a);else if(d.timeColonFormat_.test(a))c=d.parseTimeFromRegex_(d.timeColonFormat_,a);else if(d.timeColonFormatMilliseconds_.test(a))c=d.parseTimeFromRegex_(d.timeColonFormatMilliseconds_,a);else if(d.timeFramesFormat_.test(a))c=d.parseFramesTime_(b,a);else if(d.timeTickFormat_.test(a))c=d.parseTickTime_(b,a);else if(d.timeHMSFormat_.test(a))c=\nd.parseTimeFromRegex_(d.timeHMSFormat_,a);else if(a)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in TTML");return c};shaka.text.TtmlTextParser.parseFramesTime_=function(a,b){var c=shaka.text.TtmlTextParser.timeFramesFormat_.exec(b);return Number(c[1])/a.frameRate};\nshaka.text.TtmlTextParser.parseTickTime_=function(a,b){var c=shaka.text.TtmlTextParser.timeTickFormat_.exec(b);return Number(c[1])/a.tickRate};shaka.text.TtmlTextParser.parseColonTimeWithFrames_=function(a,b){var c=shaka.text.TtmlTextParser.timeColonFormatFrames_.exec(b),d=Number(c[1]),e=Number(c[2]),f=Number(c[3]),g=Number(c[4]);g+=(Number(c[5])||0)/a.subFrameRate;f+=g/a.frameRate;return f+60*e+3600*d};\nshaka.text.TtmlTextParser.parseTimeFromRegex_=function(a,b){var c=a.exec(b);return null==c||""==c[0]?null:(Number(c[4])||0)/1E3+(Number(c[3])||0)+60*(Number(c[2])||0)+3600*(Number(c[1])||0)};shaka.text.TtmlTextParser.getCellResolution_=function(a){if(!a)return null;var b=/^(\\d+) (\\d+)$/.exec(a);if(!b)return null;a=parseInt(b[1],10);b=parseInt(b[2],10);return{columns:a,rows:b}};goog.exportSymbol("shaka.text.TtmlTextParser",shaka.text.TtmlTextParser);\ngoog.exportProperty(shaka.text.TtmlTextParser.prototype,"parseMedia",shaka.text.TtmlTextParser.prototype.parseMedia);goog.exportProperty(shaka.text.TtmlTextParser.prototype,"parseInit",shaka.text.TtmlTextParser.prototype.parseInit);\nshaka.text.TtmlTextParser.RateInfo_=function(a,b,c,d){this.frameRate=Number(a)||30;this.subFrameRate=Number(b)||1;this.tickRate=Number(d);0==this.tickRate&&(this.tickRate=a?this.frameRate*this.subFrameRate:1);c&&(a=/^(\\d+) (\\d+)$/g.exec(c))&&(this.frameRate*=Number(a[1])/Number(a[2]))};shaka.text.TtmlTextParser.percentValues_=/^(\\d{1,2}(?:\\.\\d+)?|100(?:\\.0+)?)% (\\d{1,2}(?:\\.\\d+)?|100(?:\\.0+)?)%$/;shaka.text.TtmlTextParser.percentValue_=/^(\\d{1,2}(?:\\.\\d+)?|100)%$/;\nshaka.text.TtmlTextParser.unitValues_=/^(\\d+px|\\d+em|\\d*\\.?\\d+c)$/;shaka.text.TtmlTextParser.pixelValues_=/^(\\d+)px (\\d+)px$/;shaka.text.TtmlTextParser.timeColonFormatFrames_=/^(\\d{2,}):(\\d{2}):(\\d{2}):(\\d{2})\\.?(\\d+)?$/;shaka.text.TtmlTextParser.timeColonFormat_=/^(?:(\\d{2,}):)?(\\d{2}):(\\d{2})$/;shaka.text.TtmlTextParser.timeColonFormatMilliseconds_=/^(?:(\\d{2,}):)?(\\d{2}):(\\d{2}\\.\\d{2,})$/;shaka.text.TtmlTextParser.timeFramesFormat_=/^(\\d*(?:\\.\\d*)?)f$/;\nshaka.text.TtmlTextParser.timeTickFormat_=/^(\\d*(?:\\.\\d*)?)t$/;shaka.text.TtmlTextParser.timeHMSFormat_=/^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$/;shaka.text.TtmlTextParser.textAlignToLineAlign_={left:shaka.text.Cue.lineAlign.START,center:shaka.text.Cue.lineAlign.CENTER,right:shaka.text.Cue.lineAlign.END,start:shaka.text.Cue.lineAlign.START,end:shaka.text.Cue.lineAlign.END};\nshaka.text.TtmlTextParser.textAlignToPositionAlign_={left:shaka.text.Cue.positionAlign.LEFT,center:shaka.text.Cue.positionAlign.CENTER,right:shaka.text.Cue.positionAlign.RIGHT};shaka.text.TtmlTextParser.parameterNs_="http://www.w3.org/ns/ttml#parameter";shaka.text.TtmlTextParser.styleNs_="http://www.w3.org/ns/ttml#styling";shaka.text.TtmlTextParser.styleEbuttsNs_="urn:ebu:tt:style";shaka.text.TtmlTextParser.smpteNsList_=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];\nshaka.text.TextEngine.registerParser("application/ttml+xml",function(){return new shaka.text.TtmlTextParser});shaka.text.Mp4TtmlParser=function(){this.parser_=new shaka.text.TtmlTextParser};\nshaka.text.Mp4TtmlParser.prototype.parseInit=function(a){var b=shaka.util.Mp4Parser,c=!1;(new b).box("moov",b.children).box("trak",b.children).box("mdia",b.children).box("minf",b.children).box("stbl",b.children).fullBox("stsd",b.sampleDescription).box("stpp",function(d){c=!0;d.parser.stop()}).parse(a);if(!c)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_TTML);};\nshaka.text.Mp4TtmlParser.prototype.parseMedia=function(a,b){var c=this,d=shaka.util.Mp4Parser,e=!1,f=[];(new d).box("mdat",d.allData(function(g){e=!0;f=f.concat(c.parser_.parseMedia(g,b))})).parse(a,!1);if(!e)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_TTML);return f};goog.exportSymbol("shaka.text.Mp4TtmlParser",shaka.text.Mp4TtmlParser);goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"parseMedia",shaka.text.Mp4TtmlParser.prototype.parseMedia);\ngoog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"parseInit",shaka.text.Mp4TtmlParser.prototype.parseInit);shaka.text.TextEngine.registerParser(\'application/mp4; codecs="stpp"\',function(){return new shaka.text.Mp4TtmlParser});shaka.text.TextEngine.registerParser(\'application/mp4; codecs="stpp.ttml.im1t"\',function(){return new shaka.text.Mp4TtmlParser});shaka.text.TextEngine.registerParser(\'application/mp4; codecs="stpp.TTML.im1t"\',function(){return new shaka.text.Mp4TtmlParser});shaka.text.VttTextParser=function(){};shaka.text.VttTextParser.prototype.parseInit=function(a){goog.asserts.assert(!1,"VTT does not have init segments")};\nshaka.text.VttTextParser.prototype.parseMedia=function(a,b){var c=shaka.text.VttTextParser,d=shaka.util.StringUtils.fromUTF8(a);d=d.replace(/\\r\\n|\\r(?=[^\\n]|$)/gm,"\\n");d=d.split(/\\n{2,}/m);if(!/^WEBVTT($|[ \\t\\n])/m.test(d[0]))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_HEADER);var e=b.periodStart;if(d[0].includes("X-TIMESTAMP-MAP")){var f=d[0].match(/LOCAL:((?:(\\d{1,}):)?(\\d{2}):(\\d{2})\\.(\\d{3}))/m),g=d[0].match(/MPEGTS:(\\d+)/m);\nif(f&&g){e=new shaka.util.TextParser(f[1]);e=shaka.text.VttTextParser.parseTime_(e);if(null==e)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_HEADER);g=Number(g[1]);f=shaka.text.VttTextParser.MPEG_TIMESCALE_;for(var h=shaka.text.VttTextParser.TS_ROLLOVER_/f,k=b.segmentStart;k>=h;)k-=h,g+=shaka.text.VttTextParser.TS_ROLLOVER_;e=b.periodStart+g/f-e}}g=[];f=$jscomp.makeIterator(d[0].split("\\n"));for(h=f.next();!h.done;h=\nf.next())h=h.value,/^Region:/.test(h)&&(h=c.parseRegion_(h),g.push(h));f=new Map;c.addDefaultTextColor_(f);h=[];d=$jscomp.makeIterator(d.slice(1));for(k=d.next();!k.done;k=d.next())k=k.value.split("\\n"),c.parseStyle_(k,f),(k=c.parseCue_(k,e,g,f))&&h.push(k);return h};\nshaka.text.VttTextParser.addDefaultTextColor_=function(a){for(var b=$jscomp.makeIterator(Object.entries(shaka.text.Cue.defaultTextColor)),c=b.next();!c.done;c=b.next()){var d=$jscomp.makeIterator(c.value);c=d.next().value;d=d.next().value;var e=new shaka.text.Cue(0,0,"");e.color=d;a.set(c,e)}b=$jscomp.makeIterator(Object.entries(shaka.text.Cue.defaultTextBackgroundColor));for(c=b.next();!c.done;c=b.next())d=$jscomp.makeIterator(c.value),c=d.next().value,d=d.next().value,e=new shaka.text.Cue(0,0,""),\ne.backgroundColor=d,a.set(c,e)};shaka.text.VttTextParser.parseRegion_=function(a){var b=shaka.text.VttTextParser;a=new shaka.util.TextParser(a);var c=new shaka.text.CueRegion;a.readWord();a.skipWhitespace();for(var d=a.readWord();d;)b.parseRegionSetting_(c,d)||shaka.log.warning("VTT parser encountered an invalid VTTRegion setting: ",d," The setting will be ignored."),a.skipWhitespace(),d=a.readWord();return c};\nshaka.text.VttTextParser.parseStyle_=function(a,b){if((1!=a.length||a[0])&&!/^NOTE($|[ \\t])/.test(a[0])&&"STYLE"==a[0]&&a[1].includes("::cue")){var c="global",d=a[1].match(/\\((.*)\\)/);d&&(c=d.pop());d=a.slice(2,-1);if(a[1].includes("}")){var e=/\\{(.*?)\\}/.exec(a[1]);e&&(d=e[1].split(";"))}e=new shaka.text.Cue(0,0,"");for(var f=!1,g=0;g<d.length;g++){var h=/^\\s*([^:]+):\\s*(.*)/.exec(d[g]);if(h){var k=h[1].trim(),l=h[2].trim().replace(";","");switch(k){case "background-color":f=!0;e.backgroundColor=\nl;break;case "color":f=!0;e.color=l;break;case "font-family":f=!0;e.fontFamily=l;break;case "font-size":f=!0;e.fontSize=l;break;case "font-weight":700<=parseInt(l,10)&&(f=!0,e.fontWeight=shaka.text.Cue.fontWeight.BOLD);break;case "font-style":switch(l){case "normal":f=!0;e.fontStyle=shaka.text.Cue.fontStyle.NORMAL;break;case "italic":f=!0;e.fontStyle=shaka.text.Cue.fontStyle.ITALIC;break;case "oblique":f=!0,e.fontStyle=shaka.text.Cue.fontStyle.OBLIQUE}break;case "opacity":f=!0;e.opacity=parseFloat(l);\nbreak;case "white-space":f=!0;e.wrapLine="noWrap"!=l;break;default:shaka.log.warning("VTT parser encountered an unsupported style: ",h)}}}f&&b.set(c,e)}};\nshaka.text.VttTextParser.parseCue_=function(a,b,c,d){var e=shaka.text.VttTextParser;if(1==a.length&&!a[0]||/^NOTE($|[ \\t])/.test(a[0])||"STYLE"==a[0])return null;var f=null;a[0].includes("--\\x3e")||(f=a[0],a.splice(0,1));var g=new shaka.util.TextParser(a[0]),h=e.parseTime_(g),k=g.readRegex(/[ \\t]+--\\x3e[ \\t]+/g),l=e.parseTime_(g);if(null==h||null==k||null==l)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in WebVTT");\nh+=b;l+=b;b=a.slice(1).join("\\n").trim();d.has("global")?(a=d.get("global").clone(),a.startTime=h,a.endTime=l,a.payload=""):a=new shaka.text.Cue(h,l,"");e.parseCueStyles(b,a,d);g.skipWhitespace();for(d=g.readWord();d;)e.parseCueSetting(a,d,c)||shaka.log.warning("VTT parser encountered an invalid VTT setting: ",d," The setting will be ignored."),g.skipWhitespace(),d=g.readWord();null!=f&&(a.id=f);return a};\nshaka.text.VttTextParser.parseCueStyles=function(a,b,c){var d=shaka.text.VttTextParser;0===c.size&&d.addDefaultTextColor_(c);a=d.replaceColorPayload_(a);var e=shaka.util.XmlUtils.parseXmlString("<span>"+a+"</span>","span");if(e){var f=[];e=e.childNodes;if(1==e.length){var g=e[0];if(g.nodeType==Node.TEXT_NODE||g.nodeType==Node.CDATA_SECTION_NODE){b.payload=a;return}}a=$jscomp.makeIterator(e);for(e=a.next();!e.done;e=a.next())d.generateCueFromElement_(e.value,b,f,c);b.nestedCues=f}else shaka.log.warning("The cue\'s markup could not be parsed: ",\na),b.payload=a};shaka.text.VttTextParser.replaceColorPayload_=function(a){for(var b=[],c=-1,d="",e=0;e<a.length;e++)if("/"===a[e]){var f=a.indexOf(">",e);if(f<=e)return a;f=a.substring(e+1,f);var g=b.pop();if(g===f)d+="/"+f+">";else{if(!g.startsWith("c.")||"c"!==f)return a;d+="/"+g+">"}e+=f.length+1}else"<"===a[e]?c=e+1:">"===a[e]&&0<c&&(b.push(a.substr(c,e-c)),c=-1),d+=a[e];return d};shaka.text.VttTextParser.getOrDefault_=function(a,b){return a&&0<a.length?a:b};\nshaka.text.VttTextParser.mergeStyle_=function(a,b){if(b){var c=shaka.text.VttTextParser;a.backgroundColor=c.getOrDefault_(b.backgroundColor,a.backgroundColor);a.color=c.getOrDefault_(b.color,a.color);a.fontFamily=c.getOrDefault_(b.fontFamily,a.fontFamily);a.fontSize=c.getOrDefault_(b.fontSize,a.fontSize);a.fontWeight=b.fontWeight;a.fontStyle=b.fontStyle;a.opacity=b.opacity;a.wrapLine=b.wrapLine}};\nshaka.text.VttTextParser.generateCueFromElement_=function(a,b,c,d){var e=shaka.text.VttTextParser,f=b.clone();if(a.nodeType===Node.ELEMENT_NODE&&a.nodeName){var g=shaka.text.Cue.fontWeight.BOLD,h=shaka.text.Cue.fontStyle.ITALIC,k=shaka.text.Cue.textDecoration.UNDERLINE,l=a.nodeName.split(/[ .]+/);l=$jscomp.makeIterator(l);for(var m=l.next();!m.done;m=l.next())switch(m=m.value,d.has(m)&&e.mergeStyle_(f,d.get(m)),m){case "b":f.fontWeight=g;break;case "i":f.fontStyle=h;break;case "u":f.textDecoration.push(k)}}if(shaka.util.XmlUtils.isText(a))for(d=\na.textContent.split("\\n"),e=!0,d=$jscomp.makeIterator(d),a=d.next();!a.done;a=d.next())a=a.value,e||(e=b.clone(),e.lineBreak=!0,c.push(e)),0<a.length&&(e=f.clone(),e.payload=a,c.push(e)),e=!1;else for(b=$jscomp.makeIterator(a.childNodes),a=b.next();!a.done;a=b.next())e.generateCueFromElement_(a.value,f,c,d)};\nshaka.text.VttTextParser.parseCueSetting=function(a,b,c){var d=shaka.text.VttTextParser,e;if(e=/^align:(start|middle|center|end|left|right)$/.exec(b))d.setTextAlign_(a,e[1]);else if(e=/^vertical:(lr|rl)$/.exec(b))d.setVerticalWritingMode_(a,e[1]);else if(e=/^size:([\\d.]+)%$/.exec(b))a.size=Number(e[1]);else if(e=/^position:([\\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(b))a.position=Number(e[1]),e[2]&&d.setPositionAlign_(a,e[2]);else if(e=/^region:(.*)$/.exec(b)){if(b=d.getRegionById_(c,\ne[1]))a.region=b}else return d.parsedLineValueAndInterpretation_(a,b);return!0};shaka.text.VttTextParser.getRegionById_=function(a,b){var c=a.filter(function(d){return d.id==b});if(!c.length)return shaka.log.warning("VTT parser could not find a region with id: ",b," The region will be ignored."),null;goog.asserts.assert(1==c.length,"VTTRegion ids should be unique!");return c[0]};\nshaka.text.VttTextParser.parseRegionSetting_=function(a,b){var c;if(c=/^id=(.*)$/.exec(b))a.id=c[1];else if(c=/^width=(\\d{1,2}|100)%$/.exec(b))a.width=Number(c[1]);else if(c=/^lines=(\\d+)$/.exec(b))a.height=Number(c[1]),a.heightUnits=shaka.text.CueRegion.units.LINES;else if(c=/^regionanchor=(\\d{1,2}|100)%,(\\d{1,2}|100)%$/.exec(b))a.regionAnchorX=Number(c[1]),a.regionAnchorY=Number(c[2]);else if(c=/^viewportanchor=(\\d{1,2}|100)%,(\\d{1,2}|100)%$/.exec(b))a.viewportAnchorX=Number(c[1]),a.viewportAnchorY=\nNumber(c[2]);else if(/^scroll=up$/.exec(b))a.scroll=shaka.text.CueRegion.scrollMode.UP;else return!1;return!0};shaka.text.VttTextParser.setTextAlign_=function(a,b){var c=shaka.text.Cue;"middle"==b?a.textAlign=c.textAlign.CENTER:(goog.asserts.assert(b.toUpperCase()in c.textAlign,b.toUpperCase()+" Should be in Cue.textAlign values!"),a.textAlign=c.textAlign[b.toUpperCase()])};\nshaka.text.VttTextParser.setPositionAlign_=function(a,b){var c=shaka.text.Cue;a.positionAlign="line-left"==b||"start"==b?c.positionAlign.LEFT:"line-right"==b||"end"==b?c.positionAlign.RIGHT:c.positionAlign.CENTER};shaka.text.VttTextParser.setVerticalWritingMode_=function(a,b){var c=shaka.text.Cue;a.writingMode="lr"==b?c.writingMode.VERTICAL_LEFT_TO_RIGHT:c.writingMode.VERTICAL_RIGHT_TO_LEFT};\nshaka.text.VttTextParser.parsedLineValueAndInterpretation_=function(a,b){var c=shaka.text.Cue,d;if(d=/^line:([\\d.]+)%(?:,(start|end|center))?$/.exec(b))a.lineInterpretation=c.lineInterpretation.PERCENTAGE,a.line=Number(d[1]),d[2]&&(goog.asserts.assert(d[2].toUpperCase()in c.lineAlign,d[2].toUpperCase()+" Should be in Cue.lineAlign values!"),a.lineAlign=c.lineAlign[d[2].toUpperCase()]);else if(d=/^line:(-?\\d+)(?:,(start|end|center))?$/.exec(b))a.lineInterpretation=c.lineInterpretation.LINE_NUMBER,\na.line=Number(d[1]),d[2]&&(goog.asserts.assert(d[2].toUpperCase()in c.lineAlign,d[2].toUpperCase()+" Should be in Cue.lineAlign values!"),a.lineAlign=c.lineAlign[d[2].toUpperCase()]);else return!1;return!0};shaka.text.VttTextParser.parseTime_=function(a){a=a.readRegex(/(?:(\\d{1,}):)?(\\d{2}):(\\d{2})\\.(\\d{2,3})/g);if(null==a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1E3+c+60*b+3600*(Number(a[1])||0)};goog.exportSymbol("shaka.text.VttTextParser",shaka.text.VttTextParser);\ngoog.exportProperty(shaka.text.VttTextParser.prototype,"parseMedia",shaka.text.VttTextParser.prototype.parseMedia);goog.exportProperty(shaka.text.VttTextParser.prototype,"parseInit",shaka.text.VttTextParser.prototype.parseInit);shaka.text.VttTextParser.MPEG_TIMESCALE_=9E4;shaka.text.VttTextParser.TS_ROLLOVER_=8589934592;shaka.text.TextEngine.registerParser("text/vtt",function(){return new shaka.text.VttTextParser});shaka.text.TextEngine.registerParser(\'text/vtt; codecs="vtt"\',function(){return new shaka.text.VttTextParser});\nshaka.text.TextEngine.registerParser(\'text/vtt; codecs="wvtt"\',function(){return new shaka.text.VttTextParser});shaka.text.Mp4VttParser=function(){this.timescale_=null};\nshaka.text.Mp4VttParser.prototype.parseInit=function(a){var b=this,c=shaka.util.Mp4Parser,d=!1;(new c).box("moov",c.children).box("trak",c.children).box("mdia",c.children).fullBox("mdhd",function(e){goog.asserts.assert(0==e.version||1==e.version,"MDHD version can only be 0 or 1");e=shaka.util.Mp4BoxParsers.parseMDHD(e.reader,e.version);b.timescale_=e.timescale}).box("minf",c.children).box("stbl",c.children).fullBox("stsd",c.sampleDescription).box("wvtt",function(e){d=!0}).parse(a);if(!this.timescale_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,\nshaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);if(!d)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);};\nshaka.text.Mp4VttParser.prototype.parseMedia=function(a,b){if(!this.timescale_)throw shaka.log.error("No init segment for MP4+VTT!"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);var c=shaka.util.Mp4Parser,d=0,e=[],f,g=[],h=!1,k=!1,l=!1,m=null;(new c).box("moof",c.children).box("traf",c.children).fullBox("tfdt",function(x){h=!0;goog.asserts.assert(0==x.version||1==x.version,"TFDT version can only be 0 or 1");d=shaka.util.Mp4BoxParsers.parseTFDT(x.reader,\nx.version).baseMediaDecodeTime}).fullBox("tfhd",function(x){goog.asserts.assert(null!=x.flags,"A TFHD box should have a valid flags value");m=shaka.util.Mp4BoxParsers.parseTFHD(x.reader,x.flags).defaultSampleDuration}).fullBox("trun",function(x){k=!0;goog.asserts.assert(null!=x.version,"A TRUN box should have a valid version value");goog.asserts.assert(null!=x.flags,"A TRUN box should have a valid flags value");e=shaka.util.Mp4BoxParsers.parseTRUN(x.reader,x.version,x.flags).sampleData}).box("mdat",\nc.allData(function(x){goog.asserts.assert(!l,"VTT cues in mp4 with multiple MDAT are not currently supported");l=!0;f=x})).parse(a,!1);if(!l&&!h&&!k)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);c=d;for(var n=new shaka.util.DataViewReader(f,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),p=$jscomp.makeIterator(e),q=p.next();!q.done;q=p.next()){q=q.value;var r=q.sampleDuration||m,t=q.sampleCompositionTimeOffset?\nd+q.sampleCompositionTimeOffset:c;c=t+(r||0);var v=0;do{var u=n.readUint32();v+=u;var y=n.readUint32();y=shaka.util.Mp4Parser.typeToString(y);var w=null;"vttc"==y?8<u&&(w=n.readBytes(u-8)):("vtte"!=y&&shaka.log.error("Unknown box "+y+"! Skipping!"),n.skip(u-8));r?w&&(goog.asserts.assert(null!=this.timescale_,"Timescale should not be null!"),u=shaka.text.Mp4VttParser.parseVTTC_(w,b.periodStart+t/this.timescale_,b.periodStart+c/this.timescale_),g.push(u)):shaka.log.error("WVTT sample duration unknown, and no default found!");\ngoog.asserts.assert(!q.sampleSize||v<=q.sampleSize,"The samples do not fit evenly into the sample sizes given in the TRUN box!")}while(q.sampleSize&&v<q.sampleSize)}goog.asserts.assert(!n.hasMoreData(),"MDAT which contain VTT cues and non-VTT data are not currently supported!");return g.filter(shaka.util.Functional.isNotNull)};\nshaka.text.Mp4VttParser.parseVTTC_=function(a,b,c){var d,e,f;(new shaka.util.Mp4Parser).box("payl",shaka.util.Mp4Parser.allData(function(g){d=shaka.util.StringUtils.fromUTF8(g)})).box("iden",shaka.util.Mp4Parser.allData(function(g){e=shaka.util.StringUtils.fromUTF8(g)})).box("sttg",shaka.util.Mp4Parser.allData(function(g){f=shaka.util.StringUtils.fromUTF8(g)})).parse(a);return d?shaka.text.Mp4VttParser.assembleCue_(d,e,f,b,c):null};\nshaka.text.Mp4VttParser.assembleCue_=function(a,b,c,d,e){d=new shaka.text.Cue(d,e,"");e=new Map;shaka.text.VttTextParser.parseCueStyles(a,d,e);b&&(d.id=b);if(c)for(a=new shaka.util.TextParser(c),b=a.readWord();b;)shaka.text.VttTextParser.parseCueSetting(d,b,[])||shaka.log.warning("VTT parser encountered an invalid VTT setting: ",b," The setting will be ignored."),a.skipWhitespace(),b=a.readWord();return d};goog.exportSymbol("shaka.text.Mp4VttParser",shaka.text.Mp4VttParser);\ngoog.exportProperty(shaka.text.Mp4VttParser.prototype,"parseMedia",shaka.text.Mp4VttParser.prototype.parseMedia);goog.exportProperty(shaka.text.Mp4VttParser.prototype,"parseInit",shaka.text.Mp4VttParser.prototype.parseInit);shaka.text.TextEngine.registerParser(\'application/mp4; codecs="wvtt"\',function(){return new shaka.text.Mp4VttParser});shaka.text.SbvTextParser=function(){};shaka.text.SbvTextParser.prototype.parseInit=function(a){goog.asserts.assert(!1,"SubViewer does not have init segments")};\nshaka.text.SbvTextParser.prototype.parseMedia=function(a,b){var c=shaka.text.SbvTextParser,d=shaka.util.StringUtils.fromUTF8(a).replace(/\\r+/g,"");d=d.trim();var e=[];if(""==d)return e;d=d.split("\\n\\n");d=$jscomp.makeIterator(d);for(var f=d.next();!f.done;f=d.next()){var g=f.value.split("\\n"),h=new shaka.util.TextParser(g[0]);f=c.parseTime_(h);var k=h.readRegex(/,/g);h=c.parseTime_(h);if(null==f||null==k||null==h)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,\nshaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in SubViewer");g=g.slice(1).join("\\n").trim();f=new shaka.text.Cue(f,h,g);e.push(f)}return e};shaka.text.SbvTextParser.parseTime_=function(a){a=a.readRegex(/(?:(\\d{1,}):)?(\\d{2}):(\\d{2})\\.(\\d{2,3})/g);if(null==a)return null;var b=Number(a[2]),c=Number(a[3]);return 59<b||59<c?null:Number(a[4])/1E3+c+60*b+3600*(Number(a[1])||0)};goog.exportSymbol("shaka.text.SbvTextParser",shaka.text.SbvTextParser);\ngoog.exportProperty(shaka.text.SbvTextParser.prototype,"parseMedia",shaka.text.SbvTextParser.prototype.parseMedia);goog.exportProperty(shaka.text.SbvTextParser.prototype,"parseInit",shaka.text.SbvTextParser.prototype.parseInit);shaka.text.TextEngine.registerParser("text/x-subviewer",function(){return new shaka.text.SbvTextParser});shaka.text.SrtTextParser=function(){this.parser_=new shaka.text.VttTextParser};shaka.text.SrtTextParser.prototype.parseInit=function(a){goog.asserts.assert(!1,"SRT does not have init segments")};shaka.text.SrtTextParser.prototype.parseMedia=function(a,b){var c=shaka.text.SrtTextParser,d=shaka.util.BufferUtils,e=shaka.util.StringUtils,f=e.fromUTF8(a);c=c.srt2webvtt(f);d=d.toUint8(e.toUTF8(c));return this.parser_.parseMedia(d,b)};\nshaka.text.SrtTextParser.srt2webvtt=function(a){var b=shaka.text.SrtTextParser,c="WEBVTT\\n\\n";if(""==a)return c;a=a.replace(/\\r+/g,"");a=a.trim();a=a.split("\\n\\n");a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())c+=b.convertSrtCue_(d.value);return c};shaka.text.SrtTextParser.convertSrtCue_=function(a){a=a.split(/\\n/);a[0].match(/\\d+/)&&a.shift();a[0]=a[0].replace(/,/g,".");return a.join("\\n")+"\\n\\n"};goog.exportSymbol("shaka.text.SrtTextParser",shaka.text.SrtTextParser);\ngoog.exportProperty(shaka.text.SrtTextParser,"srt2webvtt",shaka.text.SrtTextParser.srt2webvtt);goog.exportProperty(shaka.text.SrtTextParser.prototype,"parseMedia",shaka.text.SrtTextParser.prototype.parseMedia);goog.exportProperty(shaka.text.SrtTextParser.prototype,"parseInit",shaka.text.SrtTextParser.prototype.parseInit);shaka.text.TextEngine.registerParser("text/srt",function(){return new shaka.text.SrtTextParser});shaka.text.SsaTextParser=function(){};shaka.text.SsaTextParser.prototype.parseInit=function(a){goog.asserts.assert(!1,"SSA does not have init segments")};\nshaka.text.SsaTextParser.prototype.parseMedia=function(a,b){var c=shaka.text.SsaTextParser,d="",e="",f=shaka.util.StringUtils.fromUTF8(a).split(/\\r?\\n\\s*\\r?\\n/);f=$jscomp.makeIterator(f);for(var g=f.next();!g.done;g=f.next()){g=g.value;var h=c.ssaContent_.exec(g);if(h){var k=h[1];h=h[2];if("V4 Styles"==k||"V4+ Styles"==k){d=h;continue}if("Events"==k){e=h;continue}}shaka.log.warning("SsaTextParser parser encountered an unknown part.",g)}f=[];g=null;d=d.split(/\\r?\\n/);d=$jscomp.makeIterator(d);for(h=\nd.next();!h.done;h=d.next())if(k=h.value,!/^\\s*;/.test(k)&&(h=c.lineParts_.exec(k)))if(k=h[1].trim(),h=h[2].trim(),"Format"==k)g=h.split(c.valuesFormat_);else if("Style"==k){k=h.split(c.valuesFormat_);h={};for(var l=0;l<g.length&&l<k.length;l++)h[g[l]]=k[l];f.push(h)}g=[];d=null;k=e.split(/\\r?\\n/);e={};k=$jscomp.makeIterator(k);for(h=k.next();!h.done;e={$jscomp$loop$prop$styleName$609:e.$jscomp$loop$prop$styleName$609},h=k.next())if(h=h.value,!/^\\s*;/.test(h)&&(l=c.lineParts_.exec(h)))if(h=l[1].trim(),\nl=l[2].trim(),"Format"==h)d=l.split(c.valuesFormat_);else if("Dialogue"==h){l=l.split(c.valuesFormat_);h={};for(var m=0;m<d.length&&m<l.length;m++)h[d[m]]=l[m];m=c.parseTime_(h.Start);var n=c.parseTime_(h.End);l=l.slice(d.length-1).join(",").replace(/\\\\N/g,"\\n").replace(/\\{[^}]+\\}/g,"");l=new shaka.text.Cue(m,n,l);e.$jscomp$loop$prop$styleName$609=h.Style;(h=f.find(function(p){return function(q){return q.Name==p.$jscomp$loop$prop$styleName$609}}(e)))&&c.addStyle_(l,h);g.push(l)}return g};\nshaka.text.SsaTextParser.addStyle_=function(a,b){var c=shaka.text.Cue,d=shaka.text.SsaTextParser,e=b.Fontname;e&&(a.fontFamily=e);if(e=b.Fontsize)a.fontSize=e+"px";if(e=b.PrimaryColour)if(e=d.parseSsaColor_(e))a.color=e;if(e=b.BackColour)if(d=d.parseSsaColor_(e))a.backgroundColor=d;b.Bold&&(a.fontWeight=c.fontWeight.BOLD);b.Italic&&(a.fontStyle=c.fontStyle.ITALIC);b.Underline&&a.textDecoration.push(c.textDecoration.UNDERLINE);if(d=b.Spacing)a.letterSpacing=d+"px";if(d=b.Alignment)switch(parseInt(d,\n10)){case 1:a.displayAlign=c.displayAlign.AFTER;a.textAlign=c.textAlign.START;break;case 2:a.displayAlign=c.displayAlign.AFTER;a.textAlign=c.textAlign.CENTER;break;case 3:a.displayAlign=c.displayAlign.AFTER;a.textAlign=c.textAlign.END;break;case 5:a.displayAlign=c.displayAlign.BEFORE;a.textAlign=c.textAlign.START;break;case 6:a.displayAlign=c.displayAlign.BEFORE;a.textAlign=c.textAlign.CENTER;break;case 7:a.displayAlign=c.displayAlign.BEFORE;a.textAlign=c.textAlign.END;break;case 9:a.displayAlign=\nc.displayAlign.CENTER;a.textAlign=c.textAlign.START;break;case 10:a.displayAlign=c.displayAlign.CENTER;a.textAlign=c.textAlign.CENTER;break;case 11:a.displayAlign=c.displayAlign.CENTER,a.textAlign=c.textAlign.END}if(c=b.AlphaLevel)a.opacity=parseFloat(c)};shaka.text.SsaTextParser.parseSsaColor_=function(a){a=parseInt(a.replace("&H",""),16);return 0<=a?"rgba("+(a&255)+","+(a>>8&255)+","+(a>>16&255)+","+(a>>24&255^255)/255+")":null};\nshaka.text.SsaTextParser.parseTime_=function(a){var b=shaka.text.SsaTextParser.timeFormat_.exec(a);a=b[1]?parseInt(b[1].replace(":",""),10):0;var c=parseInt(b[2],10);b=parseFloat(b[3]);return 3600*a+60*c+b};goog.exportSymbol("shaka.text.SsaTextParser",shaka.text.SsaTextParser);goog.exportProperty(shaka.text.SsaTextParser.prototype,"parseMedia",shaka.text.SsaTextParser.prototype.parseMedia);goog.exportProperty(shaka.text.SsaTextParser.prototype,"parseInit",shaka.text.SsaTextParser.prototype.parseInit);\nshaka.text.SsaTextParser.ssaContent_=/^\\s*\\[([^\\]]+)\\]\\r?\\n([\\s\\S]*)/;shaka.text.SsaTextParser.lineParts_=/^\\s*([^:]+):\\s*(.*)/;shaka.text.SsaTextParser.valuesFormat_=/\\s*,\\s*/;shaka.text.SsaTextParser.timeFormat_=/^(\\d+:)?(\\d{1,2}):(\\d{1,2}(?:[.]\\d{1,3})?)?$/;shaka.text.TextEngine.registerParser("text/x-ssa",function(){return new shaka.text.SsaTextParser});/*\n @license\n EME Encryption Scheme Polyfill\n Copyright 2019 Google LLC\n SPDX-License-Identifier: Apache-2.0\n*/\nvar EmeEncryptionSchemePolyfill=function(){};\nEmeEncryptionSchemePolyfill.install=function(){EmeEncryptionSchemePolyfill.originalRMKSA_?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(EmeEncryptionSchemePolyfill.originalRMKSA_=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.probeRMKSA_):console.debug("EmeEncryptionSchemePolyfill: EME not found")};\nEmeEncryptionSchemePolyfill.probeRMKSA_=function(a,b){var c=this,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return console.assert(c==navigator,\'bad "this" for requestMediaKeySystemAccess\'),e.yield(EmeEncryptionSchemePolyfill.originalRMKSA_.call(c,a,b),2);d=e.yieldResult;if(hasEncryptionScheme(d))return console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.originalRMKSA_,\ne["return"](d);console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.polyfillRMKSA_;return e["return"](EmeEncryptionSchemePolyfill.polyfillRMKSA_.call(c,a,b))})};\nEmeEncryptionSchemePolyfill.polyfillRMKSA_=function(a,b){var c=this,d,e,f,g,h,k,l,m,n,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(q){if(1==q.nextAddress){console.assert(c==navigator,\'bad "this" for requestMediaKeySystemAccess\');d=guessSupportedScheme(a);e=[];f=$jscomp.makeIterator(b);for(g=f.next();!g.done;g=f.next())h=g.value,k=EmeEncryptionSchemePolyfill.filterCapabilities_(h.videoCapabilities,d),l=EmeEncryptionSchemePolyfill.filterCapabilities_(h.audioCapabilities,d),h.videoCapabilities&&\nh.videoCapabilities.length&&!k.length||h.audioCapabilities&&h.audioCapabilities.length&&!l.length||(m=Object.assign({},h),m.videoCapabilities=k,m.audioCapabilities=l,e.push(m));if(!e.length)throw n=Error("Unsupported keySystem or supportedConfigurations."),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n;return q.yield(EmeEncryptionSchemePolyfill.originalRMKSA_.call(c,a,e),2)}p=q.yieldResult;return q["return"](new EmeEncryptionSchemePolyfillMediaKeySystemAccess(p,d))})};\nEmeEncryptionSchemePolyfill.filterCapabilities_=function(a,b){return a?a.filter(function(c){return!c.encryptionScheme||c.encryptionScheme==b}):a};goog.exportSymbol("EmeEncryptionSchemePolyfill",EmeEncryptionSchemePolyfill);goog.exportProperty(EmeEncryptionSchemePolyfill,"install",EmeEncryptionSchemePolyfill.install);var McEncryptionSchemePolyfill=function(){};\nMcEncryptionSchemePolyfill.install=function(){McEncryptionSchemePolyfill.originalDecodingInfo_?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(McEncryptionSchemePolyfill.originalDecodingInfo_=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.probeDecodingInfo_):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")};\nMcEncryptionSchemePolyfill.probeDecodingInfo_=function(a){var b=this,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return console.assert(b==navigator.mediaCapabilities,\'bad "this" for decodingInfo\'),e.yield(McEncryptionSchemePolyfill.originalDecodingInfo_.call(b,a),2);c=e.yieldResult;if(!a.keySystemConfiguration)return e["return"](c);if((d=c.keySystemAccess)&&hasEncryptionScheme(d))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),\nnavigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.originalDecodingInfo_,e["return"](c);console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support.");navigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.polyfillDecodingInfo_;return e["return"](McEncryptionSchemePolyfill.polyfillDecodingInfo_.call(b,a))})};\nMcEncryptionSchemePolyfill.polyfillDecodingInfo_=function(a){var b=this,c,d,e,f,g,h,k,l,m;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return console.assert(b==navigator.mediaCapabilities,\'bad "this" for decodingInfo\'),c=null,a.keySystemConfiguration&&(d=a.keySystemConfiguration,e=d.keySystem,f=d.audio&&d.audio.encryptionScheme,g=d.video&&d.video.encryptionScheme,c=guessSupportedScheme(e),h={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,\nconfiguration:a},f&&f!=c||g&&g!=c)?n["return"](h):n.yield(McEncryptionSchemePolyfill.originalDecodingInfo_.call(b,a),2);case 2:k=n.yieldResult;if(k.keySystemAccess){k.keySystemAccess=new EmeEncryptionSchemePolyfillMediaKeySystemAccess(k.keySystemAccess,c);n.jumpTo(3);break}if(!a.keySystemConfiguration){n.jumpTo(3);break}l=McEncryptionSchemePolyfill.convertToMediaKeySystemConfig_(a);m=k;return n.yield(navigator.requestMediaKeySystemAccess(a.keySystemConfiguration.keySystem,[l]),5);case 5:m.keySystemAccess=\nn.yieldResult;case 3:return n["return"](k)}})};\nMcEncryptionSchemePolyfill.convertToMediaKeySystemConfig_=function(a){var b=a.keySystemConfiguration,c=[],d=[];b.audio&&c.push({robustness:b.audio.robustness||"",contentType:a.audio.contentType});b.video&&d.push({robustness:b.video.robustness||"",contentType:a.video.contentType});a={initDataTypes:b.initDataType?[b.initDataType]:[],distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes};c.length&&(a.audioCapabilities=c);d.length&&(a.videoCapabilities=\nd);return a};goog.exportSymbol("McEncryptionSchemePolyfill",McEncryptionSchemePolyfill);goog.exportProperty(McEncryptionSchemePolyfill,"install",McEncryptionSchemePolyfill.install);var EmeEncryptionSchemePolyfillMediaKeySystemAccess=function(a,b){this.mksa_=a;this.scheme_=b;this.keySystem=a.keySystem};\nEmeEncryptionSchemePolyfillMediaKeySystemAccess.prototype.getConfiguration=function(){var a=this.mksa_.getConfiguration();if(a.videoCapabilities)for(var b=$jscomp.makeIterator(a.videoCapabilities),c=b.next();!c.done;c=b.next())c.value.encryptionScheme=this.scheme_;if(a.audioCapabilities)for(b=$jscomp.makeIterator(a.audioCapabilities),c=b.next();!c.done;c=b.next())c.value.encryptionScheme=this.scheme_;return a};EmeEncryptionSchemePolyfillMediaKeySystemAccess.prototype.createMediaKeys=function(){return this.mksa_.createMediaKeys()};\nfunction guessSupportedScheme(a){if(a.startsWith("com.widevine")||a.startsWith("com.microsoft")||a.startsWith("com.adobe")||a.startsWith("org.w3"))return"cenc";if(a.startsWith("com.apple"))return"cbcs-1-9";console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",a,"Please contribute!");return null}\nfunction hasEncryptionScheme(a){a=a.getConfiguration();var b=a.audioCapabilities&&a.audioCapabilities[0];return(a=a.videoCapabilities&&a.videoCapabilities[0]||b)&&void 0!==a.encryptionScheme?!0:!1}var EncryptionSchemePolyfills=function(){};EncryptionSchemePolyfills.install=function(){EmeEncryptionSchemePolyfill.install();McEncryptionSchemePolyfill.install()};goog.exportSymbol("EncryptionSchemePolyfills",EncryptionSchemePolyfills);goog.exportProperty(EncryptionSchemePolyfills,"install",EncryptionSchemePolyfills.install);\n(function(){"undefined"!==typeof module&&module.exports&&(module.exports=EncryptionSchemePolyfills)})();}).call(exportTo,innerGlobal,innerGlobal,undefined);if(typeof exports!="undefined")for(var k in exportTo.shaka)exports[k]=exportTo.shaka[k];else if(typeof define=="function"&&define.amd)define(function(){return exportTo.shaka});else innerGlobal.shaka=exportTo.shaka})();\n\n//# sourceMappingURL=shaka-player.compiled.debug.map', "\n//# sourceURL=").concat("node_modules/shaka-player/dist/shaka-player.compiled.debug.js")),
                        je.log("init in ".concat(Math.round(performance.now() - e), "ms"));
                        var t = window.shaka;
                        t.log.MAX_LOG_LEVEL = t.log.Level.DEBUG,
                        t.log.alwaysError = Ge.error.bind(Ge),
                        t.log.alwaysWarn = Ge.warn.bind(Ge),
                        t.log.error = Ge.warn.bind(Ge),
                        t.log.warning = Ge.warn.bind(Ge),
                        t.log.info = Ge.info.bind(Ge),
                        t.log.debug = Ge.debug.bind(Ge),
                        t.log.v1 = function() {}
                        ,
                        t.log.v2 = function() {}
                    }
                }(),
                t._player = null,
                t._simulWatch = new r.SimulWatchController(Re(Re({}, e), {}, {
                    logger: Be
                })),
                t._simulWatch.addEventListener("sidchange", (function(e) {
                    return t._onBlock()
                }
                )),
                t._playerLog = new r.PlayerLogController(Re(Re({}, e), {}, {
                    logger: Fe
                })),
                t._playerLog.contentId = e.contentId || Z(window.location.href),
                t._bindEvents(),
                t._sidAndLiveStreamNameResolved = new Promise((function(e) {
                    return t._resolveSidAndLiveStreamName = e
                }
                )),
                t
            }
            return t = l,
            (a = [{
                key: "load",
                value: (o = we(regeneratorRuntime.mark((function e(t) {
                    var a, n, i, o, s, l, u = this, d = arguments;
                    return regeneratorRuntime.wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (a = d.length > 1 && void 0 !== d[1] ? d[1] : {
                                    keepPosition: !1,
                                    part: 0
                                },
                                je.log("load", t, a),
                                this._isErrorEmitted = !1,
                                n = this.currentTime,
                                !this._player) {
                                    e.next = 9;
                                    break
                                }
                                return e.next = 7,
                                this._player.unload();
                            case 7:
                                e.next = 18;
                                break;
                            case 9:
                                this._player = new window.shaka.Player(this._video),
                                this._playerLog.watch({
                                    $video: this._video,
                                    shakaPlayer: this._player,
                                    simulWatch: this._simulWatch
                                }),
                                i = this._params.robustness || "SW_SECURE_CRYPTO",
                                this._player.configure({
                                    drm: {
                                        servers: {
                                            "com.microsoft.playready": this._params.keySystems["com.microsoft.playready"],
                                            "com.widevine.alpha": this._params.keySystems["com.widevine.alpha"],
                                            "org.w3.clearkey": this._params.keySystems["org.w3.clearkey"]
                                        },
                                        advanced: {
                                            "com.widevine.alpha": {
                                                audioRobustness: /^HW_/.test(i) ? "HW_SECURE_CRYPTO" : i,
                                                videoRobustness: i
                                            }
                                        }
                                    }
                                }),
                                "HW_SECURE_ALL" === i && (o = "com.microsoft.playready.recommendation",
                                this._player.configure({
                                    drm: {
                                        servers: xe({}, o, this._params.keySystems["com.microsoft.playready"]),
                                        advanced: xe({}, o, {
                                            audioRobustness: "2000",
                                            videoRobustness: "3000"
                                        })
                                    },
                                    manifest: {
                                        dash: {
                                            keySystemsByURI: {
                                                "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": o,
                                                "urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95": o
                                            }
                                        }
                                    }
                                })),
                                s = new Ce,
                                this._player.getNetworkingEngine().registerRequestFilter(function() {
                                    var e = we(regeneratorRuntime.mark((function e(t, a) {
                                        return regeneratorRuntime.wrap((function(e) {
                                            for (; ; )
                                                switch (e.prev = e.next) {
                                                case 0:
                                                    if (t === window.shaka.net.NetworkingEngine.RequestType.LICENSE && (a.allowCrossSiteCredentials = !0),
                                                    a.uris[0] !== u._params.keySystems["org.w3.clearkey"]) {
                                                        e.next = 5;
                                                        break
                                                    }
                                                    return e.next = 4,
                                                    s.encrypt(a.body);
                                                case 4:
                                                    a.body = e.sent;
                                                case 5:
                                                case "end":
                                                    return e.stop()
                                                }
                                        }
                                        ), e)
                                    }
                                    )));
                                    return function(t, a) {
                                        return e.apply(this, arguments)
                                    }
                                }()),
                                this._player.getNetworkingEngine().registerResponseFilter(function() {
                                    var e = we(regeneratorRuntime.mark((function e(t, a) {
                                        return regeneratorRuntime.wrap((function(e) {
                                            for (; ; )
                                                switch (e.prev = e.next) {
                                                case 0:
                                                    if (a.uri !== u._params.keySystems["org.w3.clearkey"]) {
                                                        e.next = 4;
                                                        break
                                                    }
                                                    return e.next = 3,
                                                    s.decrypt(a.data);
                                                case 3:
                                                    a.data = e.sent;
                                                case 4:
                                                case "end":
                                                    return e.stop()
                                                }
                                        }
                                        ), e)
                                    }
                                    )));
                                    return function(t, a) {
                                        return e.apply(this, arguments)
                                    }
                                }()),
                                this._bindShakaEvents();
                            case 18:
                                return this._simulWatch.stop(),
                                l = this._player.load(t),
                                this._playerLog.streamUrl = this.url = t,
                                this._playerLog.part = this.part = a.part || 0,
                                this._params.isLive ? (this._sid = a.sid || Object(r.getStreamIdForLive)(),
                                this._liveStreamName = a.liveStreamName || Object(r.getLiveStreamName)(t)) : (this._sid = a.sid || Object(r.getStreamIdFromStreamUrl)(t),
                                this._liveStreamName = void 0),
                                this._resolveSidAndLiveStreamName(),
                                this._playerLog.start({
                                    sid: this._sid
                                }),
                                e.next = 27,
                                l;
                            case 27:
                                a.keepPosition && (this.currentTime = n);
                            case 28:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e, this)
                }
                ))),
                function(e) {
                    return o.apply(this, arguments)
                }
                )
            }, {
                key: "_onBlock",
                value: function() {
                    this.pause(),
                    this.emit(n.SIMULWATCHBLOCKED)
                }
            }, {
                key: "_bindEvents",
                value: function() {
                    var e = this;
                    this.on(n.PLAY, we(regeneratorRuntime.mark((function t() {
                        return regeneratorRuntime.wrap((function(t) {
                            for (; ; )
                                switch (t.prev = t.next) {
                                case 0:
                                    return t.next = 2,
                                    e._sidAndLiveStreamNameResolved;
                                case 2:
                                    e._simulWatch.start(e._sid, e._liveStreamName).catch((function(e) {
                                        je.warn("simul watch start", e)
                                    }
                                    ));
                                case 3:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))),
                    this.on(n.PAUSE, (function() {
                        e._simulWatch.stop()
                    }
                    )),
                    this.on(n.ENDED, (function() {
                        e._simulWatch.stop()
                    }
                    )),
                    this.on(n.ERROR, (function() {
                        e._simulWatch.stop()
                    }
                    ))
                }
            }, {
                key: "_bindShakaEvents",
                value: function() {
                    var e = this;
                    this._player.addEventListener("adaptation", (function(t) {
                        var a = e._player.getVariantTracks().find((function(e) {
                            return e.active
                        }
                        ));
                        a && e.emit(n.BITRATECHANGE, Math.floor(a.bandwidth / 1e3))
                    }
                    )),
                    this._player.addEventListener("error", (function(t) {
                        e._onShakaError(t.detail)
                    }
                    ))
                }
            }, {
                key: "_onShakaError",
                value: function(e) {
                    switch (je.debug("error", e),
                    e.severity) {
                    case 1:
                        break;
                    case 2:
                        this._emitError("V".concat(e.code))
                    }
                }
            }, {
                key: "bitrate",
                get: function() {
                    return this._player.getVariantTracks().find((function(e) {
                        return e.active
                    }
                    )).bandwidth
                }
            }, {
                key: "bitrates",
                get: function() {
                    return this._player.getVariantTracks().map((function(e) {
                        return e.bandwidth
                    }
                    ))
                }
            }]) && De(t.prototype, a),
            i && De(t, i),
            l
        }(Q);
        a(437),
        a(438),
        a(439);
        function Ke(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var a = []
                  , r = !0
                  , n = !1
                  , i = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(r = (o = s.next()).done) && (a.push(o.value),
                    !t || a.length !== t); r = !0)
                        ;
                } catch (e) {
                    n = !0,
                    i = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (n)
                            throw i
                    }
                }
                return a
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return $e(e, t);
                var a = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === a && e.constructor && (a = e.constructor.name);
                if ("Map" === a || "Set" === a)
                    return Array.from(e);
                if ("Arguments" === a || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))
                    return $e(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function $e(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var a = 0, r = new Array(t); a < t; a++)
                r[a] = e[a];
            return r
        }
        function qe(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        function He(e) {
            return (He = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function We(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function Ye(e, t) {
            return !t || "object" !== He(t) && "function" != typeof t ? function(e) {
                if (void 0 === e)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }
        function ze(e) {
            var t = "function" == typeof Map ? new Map : void 0;
            return (ze = function(e) {
                if (null === e || (a = e,
                -1 === Function.toString.call(a).indexOf("[native code]")))
                    return e;
                var a;
                if ("function" != typeof e)
                    throw new TypeError("Super expression must either be null or a function");
                if (void 0 !== t) {
                    if (t.has(e))
                        return t.get(e);
                    t.set(e, r)
                }
                function r() {
                    return Xe(e, arguments, Ze(this).constructor)
                }
                return r.prototype = Object.create(e.prototype, {
                    constructor: {
                        value: r,
                        enumerable: !1,
                        writable: !0,
                        configurable: !0
                    }
                }),
                Je(r, e)
            }
            )(e)
        }
        function Xe(e, t, a) {
            return (Xe = Qe() ? Reflect.construct : function(e, t, a) {
                var r = [null];
                r.push.apply(r, t);
                var n = new (Function.bind.apply(e, r));
                return a && Je(n, a.prototype),
                n
            }
            ).apply(null, arguments)
        }
        function Qe() {
            if ("undefined" == typeof Reflect || !Reflect.construct)
                return !1;
            if (Reflect.construct.sham)
                return !1;
            if ("function" == typeof Proxy)
                return !0;
            try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}
                ))),
                !0
            } catch (e) {
                return !1
            }
        }
        function Je(e, t) {
            return (Je = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function Ze(e) {
            return (Ze = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        var et = function(e) {
            !function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && Je(e, t)
            }(n, e);
            var t, a, r = (t = n,
            a = Qe(),
            function() {
                var e, r = Ze(t);
                if (a) {
                    var n = Ze(this).constructor;
                    e = Reflect.construct(r, arguments, n)
                } else
                    e = r.apply(this, arguments);
                return Ye(this, e)
            }
            );
            function n() {
                var e;
                return We(this, n),
                (e = r.call(this, "Invalid protobuf sequence")).name = "DecodeError",
                e
            }
            return n
        }(ze(Error))
          , tt = function() {
            function e() {
                We(this, e),
                this._store = new Map
            }
            var t, a, r;
            return t = e,
            (a = [{
                key: "required",
                value: function(e) {
                    if (!this._store.has(e))
                        throw new et;
                    var t = this._store.get(e);
                    if (1 !== t.length)
                        throw new et;
                    return t[0]
                }
            }, {
                key: "optional",
                value: function(e) {
                    if (this._store.has(e)) {
                        var t = this._store.get(e);
                        if (1 !== t.length)
                            throw new et;
                        return t[0]
                    }
                }
            }, {
                key: "repeated",
                value: function(e) {
                    return this._store.has(e) ? this._store.get(e) : []
                }
            }, {
                key: "add",
                value: function(e, t) {
                    var a = this.repeated(e);
                    return a.push(t),
                    this._store.set(e, a),
                    this
                }
            }]) && qe(t.prototype, a),
            r && qe(t, r),
            e
        }();
        function at(e, t) {
            for (var a = 0, r = 1, n = t; n < e.byteLength; n++,
            r *= 128) {
                var i = e[n];
                if (a += (127 & i) * r,
                i < 128)
                    return [a, n]
            }
            throw new et
        }
        function rt(e) {
            for (var t = new tt, a = new DataView(e.buffer,e.byteOffset,e.byteLength), r = 0; r < e.byteLength; r++) {
                var n = 7 & e[r]
                  , i = e[r] >> 3;
                switch (n) {
                case 0:
                    var o = Ke(at(e, r + 1), 2)
                      , s = o[0]
                      , l = o[1];
                    t.add(i, s),
                    r = l;
                    break;
                case 1:
                    t.add(i, a.getUint32(r + 1, !0) + 4294967296 * a.getUint32(r + 5, !0)),
                    r += 8;
                    break;
                case 2:
                    var u = Ke(at(e, r + 1), 2)
                      , d = u[0]
                      , c = u[1]
                      , f = new Uint8Array(e.buffer,e.byteOffset + c + 1,d);
                    t.add(i, f),
                    r = c + d;
                    break;
                case 5:
                    t.add(i, a.getUint32(r + 1, !0)),
                    r += 4;
                    break;
                default:
                    throw new et
                }
            }
            return t
        }
        a(440);
        function nt(e) {
            if (16 !== e.byteLength)
                throw new Error("UUID must be 16 bytes length");
            var t = new DataView(e.buffer,e.byteOffset,e.byteLength);
            return t.getUint32(0).toString(16).padStart(8, "0") + "-" + t.getUint16(4).toString(16).padStart(4, "0") + "-" + t.getUint16(6).toString(16).padStart(4, "0") + "-" + t.getUint16(8).toString(16).padStart(4, "0") + "-" + t.getUint16(10).toString(16).padStart(4, "0") + t.getUint32(12).toString(16).padStart(8, "0")
        }
        function it(e) {
            return (it = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function ot(e) {
            return function(e) {
                if (Array.isArray(e))
                    return st(e)
            }(e) || function(e) {
                if ("undefined" != typeof Symbol && Symbol.iterator in Object(e))
                    return Array.from(e)
            }(e) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return st(e, t);
                var a = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === a && e.constructor && (a = e.constructor.name);
                if ("Map" === a || "Set" === a)
                    return Array.from(e);
                if ("Arguments" === a || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))
                    return st(e, t)
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function st(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var a = 0, r = new Array(t); a < t; a++)
                r[a] = e[a];
            return r
        }
        function lt(e, t, a, r, n, i, o) {
            try {
                var s = e[i](o)
                  , l = s.value
            } catch (e) {
                return void a(e)
            }
            s.done ? t(l) : Promise.resolve(l).then(r, n)
        }
        function ut(e) {
            return function() {
                var t = this
                  , a = arguments;
                return new Promise((function(r, n) {
                    var i = e.apply(t, a);
                    function o(e) {
                        lt(i, r, n, o, s, "next", e)
                    }
                    function s(e) {
                        lt(i, r, n, o, s, "throw", e)
                    }
                    o(void 0)
                }
                ))
            }
        }
        function dt(e, t) {
            var a = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                a.push.apply(a, r)
            }
            return a
        }
        function ct(e) {
            for (var t = 1; t < arguments.length; t++) {
                var a = null != arguments[t] ? arguments[t] : {};
                t % 2 ? dt(Object(a), !0).forEach((function(t) {
                    ft(e, t, a[t])
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : dt(Object(a)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                }
                ))
            }
            return e
        }
        function ft(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function ht(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        function pt(e, t) {
            return (pt = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function gt(e) {
            var t = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}
                    ))),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var a, r = yt(e);
                if (t) {
                    var n = yt(this).constructor;
                    a = Reflect.construct(r, arguments, n)
                } else
                    a = r.apply(this, arguments);
                return mt(this, a)
            }
        }
        function mt(e, t) {
            return !t || "object" !== it(t) && "function" != typeof t ? function(e) {
                if (void 0 === e)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }
        function yt(e) {
            return (yt = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        var _t = F("beacons.js:PlayerLogController")
          , vt = F("beacons.js:SimulWatchController")
          , bt = F("dmmvideo.js:HlsHtmlVideo")
          , Et = F("drm:FairPlay")
          , kt = function(e) {
            !function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && pt(e, t)
            }(l, e);
            var t, a, i, o, s = gt(l);
            function l(e) {
                var t;
                return function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, l),
                t = s.call(this, e),
                e.isLive && bt.log("live mode"),
                t._keepPosition = !1,
                t._loadedCurrentTime = 0,
                t._simulWatch = new r.SimulWatchController(ct(ct({}, e), {}, {
                    logger: vt
                })),
                t._simulWatch.addEventListener("sidchange", (function(e) {
                    return t._onBlock()
                }
                )),
                t._playerLog = new r.PlayerLogController(ct(ct({}, e), {}, {
                    logger: _t
                })),
                t._playerLog.contentId = e.contentId || Z(window.location.href),
                t.lastPlayedLiveUrl = void 0,
                t._liveLoadTimer = void 0,
                t._liveLoadTimeout = 5e3,
                t._liveFailoverTimer = void 0,
                t._liveFailoverTimeoutSec = 7,
                t._bindEvents(),
                t
            }
            return t = l,
            (a = [{
                key: "load",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        keepPosition: !1,
                        part: 0
                    };
                    bt.log("load", e, t),
                    this.lastPlayedLiveUrl = null,
                    this._clearLiveLoadTimer(),
                    this._clearLiveFailoverTimer(),
                    this._isErrorEmitted = !1,
                    this._keepPosition = t.keepPosition,
                    this._keepPosition && (this._loadedCurrentTime = this.currentTime),
                    this._playerLog.watch({
                        $video: this._video,
                        simulWatch: this._simulWatch
                    }),
                    this._playerLog.streamUrl = this.url = e,
                    this._playerLog.part = this.part = t.part || 0,
                    this._simulWatch.stop(),
                    this._video.src = e,
                    this._params.isLive ? (this._sid = t.sid || Object(r.getStreamIdForLive)(),
                    this._liveStreamName = t.liveStreamName || Object(r.getLiveStreamName)(e)) : (this._sid = t.sid || Object(r.getStreamIdFromStreamUrl)(e),
                    this._liveStreamName = void 0),
                    this._playerLog.start({
                        sid: this._sid
                    })
                }
            }, {
                key: "_onBlock",
                value: function() {
                    this.pause(),
                    this.emit(n.SIMULWATCHBLOCKED)
                }
            }, {
                key: "_startLiveLoadTimer",
                value: function() {
                    var e = this;
                    this._params.isLive && (clearTimeout(this._liveLoadTimer),
                    this._liveLoadTimer = setTimeout((function() {
                        bt.debug("emit error for live failover (loading timeout)"),
                        e._emitError("V204"),
                        clearTimeout(e._liveLoadTimer)
                    }
                    ), this._liveLoadTimeout))
                }
            }, {
                key: "_clearLiveLoadTimer",
                value: function() {
                    clearTimeout(this._liveLoadTimer),
                    this._liveLoadTimer = null
                }
            }, {
                key: "_startLiveFailoverTimer",
                value: function() {
                    var e = this;
                    if (this._params.isLive) {
                        clearInterval(this._liveFailoverTimer);
                        var t = 0
                          , a = 0;
                        this._liveFailoverTimer = setInterval((function() {
                            t === e.currentTime ? ++a >= e._liveFailoverTimeoutSec && (bt.debug("emit error for live failover (waiting timeout)"),
                            e._emitError("V204"),
                            a = 0,
                            clearInterval(e._liveFailoverTimer)) : (t = e.currentTime,
                            a = 0)
                        }
                        ), 1e3)
                    }
                }
            }, {
                key: "_clearLiveFailoverTimer",
                value: function() {
                    clearInterval(this._liveFailoverTimer),
                    this._liveFailoverTimer = null
                }
            }, {
                key: "_bindEvents",
                value: function() {
                    var e = this;
                    this.on(n.LOADSTART, (function() {
                        e._startLiveLoadTimer()
                    }
                    )),
                    this.on(n.LOADEDDATA, (function() {
                        e._clearLiveLoadTimer(),
                        e._keepPosition && (e.currentTime = e._loadedCurrentTime)
                    }
                    )),
                    this.on(n.CANPLAY, (function() {
                        e._params.isLive && (e.lastPlayedLiveUrl = e.url)
                    }
                    )),
                    this.on(n.PLAY, (function() {
                        e._simulWatch.start(e._sid, e._liveStreamName).catch((function(e) {
                            bt.warn("simul watch start", e)
                        }
                        )),
                        e._startLiveFailoverTimer()
                    }
                    )),
                    this.on(n.PAUSE, (function() {
                        e._simulWatch.stop(),
                        e._clearLiveFailoverTimer()
                    }
                    ));
                    var t = 0;
                    this.on(n.TIMEUPDATE, (function() {
                        e._video.videoWidth && e._video.videoWidth !== t && (t = e._video.videoWidth,
                        bt.log("video width changed", t),
                        e.emit(n.SAFARIWIDTHCHANGE, t))
                    }
                    )),
                    this.on(n.ENDED, (function() {
                        e._simulWatch.stop()
                    }
                    )),
                    this.on(n.ERROR, (function() {
                        e._simulWatch.stop()
                    }
                    )),
                    this._video.addEventListener("webkitneedkey", (function(t) {
                        Et.debug("webkitneedkey"),
                        e._onWebKitNeedKey(t)
                    }
                    ))
                }
            }, {
                key: "_onWebKitNeedKey",
                value: (o = ut(regeneratorRuntime.mark((function e(t) {
                    var a, r, n, i, o, s, l, u, d, c, f, h, p, g, m, y, _, v, b, E;
                    return regeneratorRuntime.wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (Et.debug("webkitneedkey", t),
                                a = t.initData,
                                this._params.keySystems && this._params.keySystems["com.apple.fps.1_0"]) {
                                    e.next = 5;
                                    break
                                }
                                return Et.warn("License URL is missing"),
                                e.abrupt("return");
                            case 5:
                                if (r = this._params.keySystems["com.apple.fps.1_0"],
                                n = r.replace(/\?.*$/, ""),
                                o = "certificate:".concat(n),
                                !(s = localStorage.getItem(o))) {
                                    e.next = 20;
                                    break
                                }
                                return e.next = 12,
                                fetch(s);
                            case 12:
                                return l = e.sent,
                                e.t0 = Uint8Array,
                                e.next = 16,
                                l.arrayBuffer();
                            case 16:
                                e.t1 = e.sent,
                                i = new e.t0(e.t1),
                                e.next = 31;
                                break;
                            case 20:
                                return e.next = 22,
                                fetch(n);
                            case 22:
                                return u = e.sent,
                                e.t2 = Uint8Array,
                                e.next = 26,
                                u.arrayBuffer();
                            case 26:
                                e.t3 = e.sent,
                                i = new e.t2(e.t3),
                                (d = new FileReader).addEventListener("load", (function(e) {
                                    return localStorage.setItem(o, d.result)
                                }
                                )),
                                d.readAsDataURL(new Blob([i]));
                            case 31:
                                if (this._video.webkitKeys || this._video.webkitSetMediaKeys(new window.WebKitMediaKeys("com.apple.fps.1_0")),
                                c = "skd://",
                                (f = String.fromCharCode.apply(String, ot(new Uint16Array(a.slice(4).buffer)))).startsWith(c)) {
                                    e.next = 37;
                                    break
                                }
                                return Et.error("Invalid URI", f),
                                e.abrupt("return");
                            case 37:
                                for (h = be(f.substring(c.length)),
                                p = rt(h),
                                g = nt(p.required(1)),
                                m = p.required(2),
                                y = String.fromCharCode.apply(String, ot(p.optional(3) || [])),
                                _ = new Uint16Array(g.length),
                                v = 0; v < g.length; v++)
                                    _[v] = g.charCodeAt(v);
                                b = new ArrayBuffer(a.byteLength + 4 + _.byteLength + 4 + i.byteLength),
                                new Uint8Array(b).set(a),
                                new DataView(b).setUint32(a.byteLength, _.byteLength, !0),
                                new Uint8Array(b).set(new Uint8Array(_.buffer), a.byteLength + 4),
                                new DataView(b).setUint32(a.byteLength + 4 + _.byteLength, i.byteLength, !0),
                                new Uint8Array(b).set(i, a.byteLength + 4 + _.byteLength + 4),
                                (E = this._video.webkitKeys.createSession("video/mp4", new Uint8Array(b))).addEventListener("webkitkeymessage", function() {
                                    var e = ut(regeneratorRuntime.mark((function e(t) {
                                        var a, n;
                                        return regeneratorRuntime.wrap((function(e) {
                                            for (; ; )
                                                switch (e.prev = e.next) {
                                                case 0:
                                                    return Et.debug("webkitkeymessage", t),
                                                    (a = new FormData).append("spc", new Blob([t.message])),
                                                    a.append("iv", new Blob([m])),
                                                    a.append("content_info", y),
                                                    e.next = 7,
                                                    fetch(r, {
                                                        method: "POST",
                                                        credentials: "include",
                                                        body: a
                                                    });
                                                case 7:
                                                    return n = e.sent,
                                                    e.t0 = E,
                                                    e.t1 = Uint8Array,
                                                    e.next = 12,
                                                    n.arrayBuffer();
                                                case 12:
                                                    e.t2 = e.sent,
                                                    e.t3 = new e.t1(e.t2),
                                                    e.t0.update.call(e.t0, e.t3);
                                                case 15:
                                                case "end":
                                                    return e.stop()
                                                }
                                        }
                                        ), e)
                                    }
                                    )));
                                    return function(t) {
                                        return e.apply(this, arguments)
                                    }
                                }()),
                                E.addEventListener("webkitkeyadded", (function(e) {
                                    return Et.debug("webkitkeyadded", e)
                                }
                                )),
                                E.addEventListener("webkitkeyerror", (function(e) {
                                    return Et.debug("webkitkeyerror", e)
                                }
                                ));
                            case 54:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e, this)
                }
                ))),
                function(e) {
                    return o.apply(this, arguments)
                }
                )
            }]) && ht(t.prototype, a),
            i && ht(t, i),
            l
        }(Q)
          , Tt = (a(443),
        a(9))
          , St = a.n(Tt);
        function At(e) {
            return (At = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function Ct(e, t, a, r, n, i, o) {
            try {
                var s = e[i](o)
                  , l = s.value
            } catch (e) {
                return void a(e)
            }
            s.done ? t(l) : Promise.resolve(l).then(r, n)
        }
        function It(e) {
            return function() {
                var t = this
                  , a = arguments;
                return new Promise((function(r, n) {
                    var i = e.apply(t, a);
                    function o(e) {
                        Ct(i, r, n, o, s, "next", e)
                    }
                    function s(e) {
                        Ct(i, r, n, o, s, "throw", e)
                    }
                    o(void 0)
                }
                ))
            }
        }
        function Pt(e, t) {
            var a = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                a.push.apply(a, r)
            }
            return a
        }
        function wt(e) {
            for (var t = 1; t < arguments.length; t++) {
                var a = null != arguments[t] ? arguments[t] : {};
                t % 2 ? Pt(Object(a), !0).forEach((function(t) {
                    Mt(e, t, a[t])
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : Pt(Object(a)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                }
                ))
            }
            return e
        }
        function Mt(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function Rt(e, t) {
            return (Rt = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function xt(e) {
            var t = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}
                    ))),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var a, r = Ot(e);
                if (t) {
                    var n = Ot(this).constructor;
                    a = Reflect.construct(r, arguments, n)
                } else
                    a = r.apply(this, arguments);
                return Dt(this, a)
            }
        }
        function Dt(e, t) {
            return !t || "object" !== At(t) && "function" != typeof t ? function(e) {
                if (void 0 === e)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }
        function Ot(e) {
            return (Ot = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        function Nt(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function Lt(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        function Ut(e, t, a) {
            return t && Lt(e.prototype, t),
            a && Lt(e, a),
            e
        }
        var Ft = F("beacons.js:PlayerLogController")
          , Bt = F("beacons.js:SimulWatchController")
          , jt = F("dmmvideo.js:HlsMseVideo")
          , Gt = function() {
            function e() {
                Nt(this, e),
                this.main = F("hls.js:main"),
                this.worker = F("hls.js:worker")
            }
            return Ut(e, [{
                key: "debug",
                value: function() {
                    var e;
                    (e = this.main).debug.apply(e, arguments)
                }
            }, {
                key: "log",
                value: function() {
                    var e;
                    (e = this.main).log.apply(e, arguments)
                }
            }, {
                key: "info",
                value: function() {
                    var e;
                    (e = this.main).info.apply(e, arguments)
                }
            }, {
                key: "warn",
                value: function() {
                    var e;
                    (e = this.main).warn.apply(e, arguments)
                }
            }, {
                key: "error",
                value: function() {
                    var e;
                    (e = this.main).error.apply(e, arguments)
                }
            }, {
                key: "toJSON",
                value: function() {
                    return this.worker.state.isEnabled
                }
            }]),
            e
        }()
          , Vt = function(e) {
            !function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && Rt(e, t)
            }(a, e);
            var t = xt(a);
            function a(e) {
                var n;
                return Nt(this, a),
                n = t.call(this, e),
                St.a.isSupported() && jt.log("support"),
                e.isLive && jt.log("live mode"),
                n._hls = null,
                n._simulWatch = new r.SimulWatchController(wt(wt({}, e), {}, {
                    logger: Bt
                })),
                n._simulWatch.addEventListener("sidchange", (function(e) {
                    return n._onBlock()
                }
                )),
                n._playerLog = new r.PlayerLogController(wt(wt({}, e), {}, {
                    logger: Ft
                })),
                n._playerLog.contentId = e.contentId || Z(window.location.href),
                n._bindEvents(),
                n._sidAndLiveStreamNameResolved = new Promise((function(e) {
                    return n._resolveSidAndLiveStreamName = e
                }
                )),
                n._liveWaitingTimeout = 7e3,
                n._liveFailoverTimer = void 0,
                n.lastPlayedLiveUrl = void 0,
                n
            }
            return Ut(a, [{
                key: "load",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        keepPosition: !1,
                        part: 0
                    };
                    jt.log("load", e, t),
                    this.lastPlayedLiveUrl = null,
                    this._clearLiveFailoverTimer(),
                    this._isErrorEmitted = !1;
                    var a = this.currentTime;
                    this._hls && (this._playerLog.unwatch(),
                    this._hls.destroy(),
                    this._resetElement());
                    var n = wt({
                        debug: new Gt,
                        xhrSetup: function(e, t) {
                            var a = new URL(t)
                              , r = a.protocol
                              , n = a.hostname
                              , i = a.port
                              , o = a.pathname;
                            r === window.location.protocol && n === window.location.hostname && i === window.location.port || /\.(m3u8|ts|cmfa|cmfv)$/.test(o) || (e.withCredentials = !0)
                        },
                        maxMaxBufferLength: 100
                    }, this._params.hlsjs);
                    t.keepPosition && (n.startPosition = j(a)),
                    this._params.isLive && (n.levelLoadingMaxRetry = 1,
                    n.levelLoadingTimeOut = 5e3,
                    n.liveMaxLatencyDurationCount = 10),
                    this._hls = new St.a(n),
                    this._bindHlsEvents(),
                    this._playerLog.watch({
                        $video: this._video,
                        hlsjsPlayer: this._hls,
                        simulWatch: this._simulWatch
                    }),
                    this._playerLog.streamUrl = this.url = e,
                    this._playerLog.part = this.part = t.part || 0,
                    this._simulWatch.stop(),
                    this._hls.attachMedia(this._video),
                    this._params.isLive ? (this._sid = t.sid || Object(r.getStreamIdForLive)(),
                    this._liveStreamName = t.liveStreamName || Object(r.getLiveStreamName)(e)) : (this._sid = t.sid || Object(r.getStreamIdFromStreamUrl)(e),
                    this._liveStreamName = void 0),
                    this._resolveSidAndLiveStreamName(),
                    this._playerLog.start({
                        sid: this._sid
                    })
                }
            }, {
                key: "switchLevel",
                value: function(e) {
                    this._hls && (this._hls.loadLevel = e)
                }
            }, {
                key: "switchLevelImmediately",
                value: function(e) {
                    this._hls && (this._hls.currentLevel = e)
                }
            }, {
                key: "_onBlock",
                value: function() {
                    this.pause(),
                    this.emit(n.SIMULWATCHBLOCKED)
                }
            }, {
                key: "_startLiveFailoverTimer",
                value: function() {
                    var e = this;
                    this._params.isLive && (clearTimeout(this._liveFailoverTimer),
                    this._liveFailoverTimer = setTimeout((function() {
                        jt.debug("emit error for live failover (waiting timeout)"),
                        e._emitError("V106")
                    }
                    ), this._liveWaitingTimeout))
                }
            }, {
                key: "_clearLiveFailoverTimer",
                value: function() {
                    clearTimeout(this._liveFailoverTimer),
                    this._liveFailoverTimer = null
                }
            }, {
                key: "_bindHlsEvents",
                value: function() {
                    var e = this;
                    this._hls.on(St.a.Events.MEDIA_ATTACHING, (function(e) {
                        jt.debug("Hls.Events.MEDIA_ATTACHING")
                    }
                    )),
                    this._hls.on(St.a.Events.MEDIA_ATTACHED, (function(t) {
                        jt.debug("Hls.Events.MEDIA_ATTACHED"),
                        e._hls.loadSource(e.url)
                    }
                    )),
                    this._hls.on(St.a.Events.MANIFEST_PARSED, (function(e, t) {
                        jt.debug("Hls.Events.MANIFEST_PARSED", {
                            bitrates: t.levels.map((function(e) {
                                return Math.floor(e.bitrate / 1e3)
                            }
                            ))
                        })
                    }
                    )),
                    this._hls.on(St.a.Events.LEVEL_SWITCHED, (function(t, a) {
                        var r = e._hls.levels[a.level].bitrate;
                        e.emit(n.BITRATECHANGE, Math.floor(r / 1e3))
                    }
                    )),
                    this._hls.on(St.a.Events.MEDIA_DETACHING, (function(e) {
                        jt.debug("Hls.Events.MEDIA_DETACHING")
                    }
                    )),
                    this._hls.on(St.a.Events.MEDIA_DETACHED, (function(e) {
                        jt.debug("Hls.Events.MEDIA_DETACHED")
                    }
                    )),
                    this._hls.on(St.a.Events.DESTROYING, (function(e) {
                        jt.debug("Hls.Events.DESTROYING")
                    }
                    )),
                    this._hls.on(St.a.Events.ERROR, (function(t, a) {
                        jt.error("Hls.Events.ERROR", a),
                        a.fatal && e._onHlsError(a.details)
                    }
                    ))
                }
            }, {
                key: "_bindEvents",
                value: function() {
                    var e = this;
                    this.on(n.CANPLAY, (function() {
                        e._params.isLive && (e.lastPlayedLiveUrl = e.url),
                        e._clearLiveFailoverTimer()
                    }
                    )),
                    this.on(n.PLAY, It(regeneratorRuntime.mark((function t() {
                        return regeneratorRuntime.wrap((function(t) {
                            for (; ; )
                                switch (t.prev = t.next) {
                                case 0:
                                    return t.next = 2,
                                    e._sidAndLiveStreamNameResolved;
                                case 2:
                                    e._simulWatch.start(e._sid, e._liveStreamName).catch((function(e) {
                                        jt.warn("simul watch start", e)
                                    }
                                    ));
                                case 3:
                                case "end":
                                    return t.stop()
                                }
                        }
                        ), t)
                    }
                    )))),
                    this.on(n.PLAYING, (function() {
                        e._clearLiveFailoverTimer()
                    }
                    )),
                    this.on(n.PAUSE, (function() {
                        e._simulWatch.stop()
                    }
                    )),
                    this.on(n.WAITING, (function() {
                        e._startLiveFailoverTimer()
                    }
                    )),
                    this.on(n.ENDED, (function() {
                        e._clearLiveFailoverTimer(),
                        e._simulWatch.stop()
                    }
                    )),
                    this.on(n.ERROR, (function() {
                        e._simulWatch.stop()
                    }
                    ))
                }
            }, {
                key: "_onHlsError",
                value: function(e) {
                    switch (e) {
                    case St.a.ErrorDetails.MANIFEST_LOAD_ERROR:
                        this._emitError("V101");
                        break;
                    case St.a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:
                        this._emitError("V102");
                        break;
                    case St.a.ErrorDetails.MANIFEST_PARSING_ERROR:
                        this._emitError("V103");
                        break;
                    case St.a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR:
                        this._emitError("V104");
                        break;
                    case St.a.ErrorDetails.LEVEL_LOAD_ERROR:
                        this._emitError("V105");
                        break;
                    case St.a.ErrorDetails.LEVEL_LOAD_TIMEOUT:
                        this._emitError("V106");
                        break;
                    case St.a.ErrorDetails.LEVEL_SWITCH_ERROR:
                        this._emitError("V107");
                        break;
                    case St.a.ErrorDetails.FRAG_LOAD_ERROR:
                        this._emitError("V108");
                        break;
                    case St.a.ErrorDetails.FRAG_LOOP_LOADING_ERROR:
                        this._emitError("V109");
                        break;
                    case St.a.ErrorDetails.FRAG_LOAD_TIMEOUT:
                        this._emitError("V110");
                        break;
                    case St.a.ErrorDetails.FRAG_DECRYPT_ERROR:
                        this._emitError("V111");
                        break;
                    case St.a.ErrorDetails.FRAG_PARSING_ERROR:
                        this._emitError("V112");
                        break;
                    case St.a.ErrorDetails.KEY_LOAD_ERROR:
                        this._emitError("V113");
                        break;
                    case St.a.ErrorDetails.KEY_LOAD_TIMEOUT:
                        this._emitError("V114");
                        break;
                    case St.a.ErrorDetails.BUFFER_APPEND_ERROR:
                        this._emitError("V115");
                        break;
                    case St.a.ErrorDetails.BUFFER_APPENDING_ERROR:
                        this._emitError("V116");
                        break;
                    case St.a.ErrorDetails.BUFFER_STALLED_ERROR:
                        this._emitError("V117");
                        break;
                    case St.a.ErrorDetails.BUFFER_FULL_ERROR:
                        this._emitError("V118");
                        break;
                    case St.a.ErrorDetails.BUFFER_SEEK_OVER_HOLE:
                        this._emitError("V119");
                        break;
                    default:
                        this._emitError("V120")
                    }
                }
            }, {
                key: "bitrate",
                get: function() {
                    return this._hls.levels[this._hls.currentLevel].bitrate
                }
            }, {
                key: "bitrates",
                get: function() {
                    return this._hls.levels.map((function(e) {
                        return e.bitrate
                    }
                    ))
                }
            }]),
            a
        }(Q);
        function Kt(e) {
            return (Kt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function $t(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        function qt(e, t) {
            return (qt = Object.setPrototypeOf || function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function Ht(e) {
            var t = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Date.prototype.toString.call(Reflect.construct(Date, [], (function() {}
                    ))),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var a, r = Yt(e);
                if (t) {
                    var n = Yt(this).constructor;
                    a = Reflect.construct(r, arguments, n)
                } else
                    a = r.apply(this, arguments);
                return Wt(this, a)
            }
        }
        function Wt(e, t) {
            return !t || "object" !== Kt(t) && "function" != typeof t ? function(e) {
                if (void 0 === e)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e
            }(e) : t
        }
        function Yt(e) {
            return (Yt = Object.setPrototypeOf ? Object.getPrototypeOf : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        var zt = F("dmmvideo.js:MP4Video")
          , Xt = function(e) {
            !function(e, t) {
                if ("function" != typeof t && null !== t)
                    throw new TypeError("Super expression must either be null or a function");
                e.prototype = Object.create(t && t.prototype, {
                    constructor: {
                        value: e,
                        writable: !0,
                        configurable: !0
                    }
                }),
                t && qt(e, t)
            }(o, e);
            var t, a, r, i = Ht(o);
            function o(e) {
                var t;
                return function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, o),
                (t = i.call(this, e))._keepPosition = !1,
                t._loadedCurrentTime = 0,
                t._bindEvents(),
                t
            }
            return t = o,
            (a = [{
                key: "load",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {
                        keepPosition: !1
                    };
                    zt.log("load", e, t),
                    this._isErrorEmitted = !1,
                    this._keepPosition = t.keepPosition,
                    this._keepPosition && (this._loadedCurrentTime = this.currentTime),
                    this.url = e,
                    this._video.src = e
                }
            }, {
                key: "_bindEvents",
                value: function() {
                    var e = this;
                    this.on(n.LOADEDDATA, (function() {
                        e._keepPosition && (e.currentTime = e._loadedCurrentTime)
                    }
                    ))
                }
            }]) && $t(t.prototype, a),
            r && $t(t, r),
            o
        }(Q)
          , Qt = ""
          , Jt = {
            V101: Qt,
            V102: Qt,
            V103: Qt,
            V104: Qt,
            V105: Qt,
            V106: Qt,
            V107: Qt,
            V108: Qt,
            V109: Qt,
            V110: Qt,
            V111: Qt,
            V112: Qt,
            V113: Qt,
            V114: Qt,
            V115: Qt,
            V116: Qt,
            V117: Qt,
            V118: Qt,
            V119: Qt,
            V120: Qt,
            V121: Qt,
            V122: Qt,
            V123: Qt,
            V124: Qt,
            V125: Qt,
            V200: Qt,
            V201: Qt,
            V202: Qt,
            V203: Qt,
            V204: Qt,
            V999: Qt
        }
          , Zt = a(75);
        function ea(e, t) {
            var a = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                a.push.apply(a, r)
            }
            return a
        }
        function ta(e) {
            for (var t = 1; t < arguments.length; t++) {
                var a = null != arguments[t] ? arguments[t] : {};
                t % 2 ? ea(Object(a), !0).forEach((function(t) {
                    aa(e, t, a[t])
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : ea(Object(a)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                }
                ))
            }
            return e
        }
        function aa(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        var ra = /\.dmm\.co\.jp$/.test(window.location.hostname) ? "dmm.co.jp" : "dmm.com";
        function na() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "production"
              , t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]
              , a = ta(ta(ta({}, Object(r.getDefaultPlayerLogSettings)(e)), Object(r.getDefaultSimulWatchSettings)(e)), {}, {
                name: Zt.a,
                version: Zt.b,
                isLive: !1,
                autoplay: !0,
                messages: Jt,
                keySystems: {
                    "com.microsoft.playready": "https://mlic.".concat(ra, "/drm/playready/rightsmanager.asmx"),
                    "com.widevine.alpha": "https://mlic.".concat(ra, "/drm/widevine/license"),
                    "com.apple.fps.1_0": "https://mlic.".concat(ra, "/drm/fairplay/license"),
                    "org.w3.clearkey": "https://mlic.".concat(ra, "/drm/clearkey/license")
                }
            });
            switch (e) {
            case "staging":
                a.keySystems = {
                    "com.microsoft.playready": "https://stg.mlic.".concat(ra, "/drm/playready/rightsmanager.asmx"),
                    "com.widevine.alpha": "https://stg.mlic.".concat(ra, "/drm/widevine/license"),
                    "com.apple.fps.1_0": "https://stg.mlic.".concat(ra, "/drm/fairplay/license"),
                    "org.w3.clearkey": "https://stg.mlic.".concat(ra, "/drm/clearkey/license")
                };
                break;
            case "development":
                a.keySystems = {
                    "com.microsoft.playready": "https://dev1.mlic.".concat(ra, "/drm/playready/rightsmanager.asmx"),
                    "com.widevine.alpha": "https://dev1.mlic.".concat(ra, "/drm/widevine/license"),
                    "com.apple.fps.1_0": "https://dev1.mlic.".concat(ra, "/drm/fairplay/license"),
                    "org.w3.clearkey": "https://dev1.mlic.".concat(ra, "/drm/clearkey/license")
                }
            }
            return t || delete a.keySystems["org.w3.clearkey"],
            a
        }
        function ia(e, t) {
            return function(e) {
                if (Array.isArray(e))
                    return e
            }(e) || function(e, t) {
                if ("undefined" == typeof Symbol || !(Symbol.iterator in Object(e)))
                    return;
                var a = []
                  , r = !0
                  , n = !1
                  , i = void 0;
                try {
                    for (var o, s = e[Symbol.iterator](); !(r = (o = s.next()).done) && (a.push(o.value),
                    !t || a.length !== t); r = !0)
                        ;
                } catch (e) {
                    n = !0,
                    i = e
                } finally {
                    try {
                        r || null == s.return || s.return()
                    } finally {
                        if (n)
                            throw i
                    }
                }
                return a
            }(e, t) || function(e, t) {
                if (!e)
                    return;
                if ("string" == typeof e)
                    return oa(e, t);
                var a = Object.prototype.toString.call(e).slice(8, -1);
                "Object" === a && e.constructor && (a = e.constructor.name);
                if ("Map" === a || "Set" === a)
                    return Array.from(e);
                if ("Arguments" === a || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))
                    return oa(e, t)
            }(e, t) || function() {
                throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function oa(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var a = 0, r = new Array(t); a < t; a++)
                r[a] = e[a];
            return r
        }
        function sa(e, t, a, r, n, i, o) {
            try {
                var s = e[i](o)
                  , l = s.value
            } catch (e) {
                return void a(e)
            }
            s.done ? t(l) : Promise.resolve(l).then(r, n)
        }
        function la(e, t) {
            var a = Object.keys(e);
            if (Object.getOwnPropertySymbols) {
                var r = Object.getOwnPropertySymbols(e);
                t && (r = r.filter((function(t) {
                    return Object.getOwnPropertyDescriptor(e, t).enumerable
                }
                ))),
                a.push.apply(a, r)
            }
            return a
        }
        function ua(e) {
            for (var t = 1; t < arguments.length; t++) {
                var a = null != arguments[t] ? arguments[t] : {};
                t % 2 ? la(Object(a), !0).forEach((function(t) {
                    da(e, t, a[t])
                }
                )) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(a)) : la(Object(a)).forEach((function(t) {
                    Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(a, t))
                }
                ))
            }
            return e
        }
        function da(e, t, a) {
            return t in e ? Object.defineProperty(e, t, {
                value: a,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }) : e[t] = a,
            e
        }
        function ca(e, t) {
            for (var a = 0; a < t.length; a++) {
                var r = t[a];
                r.enumerable = r.enumerable || !1,
                r.configurable = !0,
                "value"in r && (r.writable = !0),
                Object.defineProperty(e, r.key, r)
            }
        }
        var fa = new Set(["mp4"])
          , ha = new Set(["mp4", "webm"])
          , pa = new Map([["aac", fa], ["opus", ha], ["avc", fa], ["vp9", ha], ["av1", ha]])
          , ga = new Map([["opus", {
            codec: "opus"
        }], ["mp4a.40.2", {
            codec: "aac"
        }]])
          , ma = new Map([["av01.0.13M.08", {
            codec: "av1",
            height: 2160,
            fps: 60
        }], ["av01.0.12M.08", {
            codec: "av1",
            height: 2160,
            fps: 30
        }], ["av01.0.08M.08", {
            codec: "av1",
            height: 1080,
            fps: 30
        }], ["vp09.00.51.08", {
            codec: "vp9",
            height: 2160,
            fps: 60
        }], ["vp09.00.50.08", {
            codec: "vp9",
            height: 2160,
            fps: 30
        }], ["vp09.00.40.08", {
            codec: "vp9",
            height: 1080,
            fps: 30
        }], ["avc1.640034", {
            codec: "avc",
            height: 2160,
            fps: 60
        }], ["avc1.640033", {
            codec: "avc",
            height: 2160,
            fps: 30
        }], ["avc1.4D4028", {
            codec: "avc",
            height: 1080,
            fps: 30
        }]])
          , ya = F("dmmvideo.js:DMMVideoFactory")
          , _a = "MediaSource"in window
          , va = "MSMediaKeys"in window && /\bTrident\b/.test(navigator.userAgent)
          , ba = "MSMediaKeys"in window && /\bEdge\b/.test(navigator.userAgent)
          , Ea = "WebKitMediaKeys"in window || !_a && /\bMac OS X\b/.test(navigator.userAgent)
          , ka = /^(Win|Mac)/.test(navigator.platform);
        function Ta(e) {
            return Object.defineProperties(e, {
                audioCodecs: {
                    get: function() {
                        return ya.warn("audioCodecs is deprecated"),
                        ["AAC"]
                    }
                },
                videoCodecs: {
                    get: function() {
                        return ya.warn("videoCodecs is deprecated"),
                        ["H.264"]
                    }
                }
            })
        }
        var Sa = function() {
            function e() {
                !function(e, t) {
                    if (!(e instanceof t))
                        throw new TypeError("Cannot call a class as a function")
                }(this, e)
            }
            var t, a, r, n, i;
            return t = e,
            a = null,
            r = [{
                key: "getInstance",
                value: function(e) {
                    var t = e.env || "production"
                      , a = void 0 !== e.allowClearKey ? e.allowClearKey : ka;
                    switch (e.type) {
                    case "dash":
                        return va || ba ? (ya.debug("detected IE or Edge Legacy, using dash.js"),
                        new ye(ua(ua({}, na(t)), e))) : (ya.debug("using Shaka Player"),
                        new Ve(ua(ua({}, na(t, a)), e)));
                    case "hls":
                        return Ea ? (ya.debug("detected Safari, using native HTMLVideoElement"),
                        new kt(ua(ua({}, na(t)), e))) : (ya.debug("using hls.js"),
                        new Vt(ua(ua({}, na(t)), e)));
                    case "mss":
                        return ya.debug("using dash.js"),
                        new ye(ua(ua({}, na(t)), e));
                    case "html":
                        return ya.warn('type="html" is deprecated, use "hls" instead'),
                        new kt(ua(ua({}, na(t)), e));
                    case "hlsmse":
                        return ya.warn('type="hlsmse" is deprecated, use "hls" instead'),
                        new Vt(ua(ua({}, na(t)), e));
                    case "mp4":
                        return ya.warn('type="mp4" is deprecated'),
                        new Xt(ua(ua({}, na(t)), e));
                    default:
                        throw Error("invalid type: ".concat(e.type))
                    }
                }
            }, {
                key: "getSupportedFeatures",
                value: (n = regeneratorRuntime.mark((function e() {
                    var t, a, r, n, i, o, s, l, u, d, c, f, h, p, g, m, y;
                    return regeneratorRuntime.wrap((function(e) {
                        for (; ; )
                            switch (e.prev = e.next) {
                            case 0:
                                if (!Ea) {
                                    e.next = 3;
                                    break
                                }
                                return t = Ta({
                                    type: "hls",
                                    keySystems: "WebKitMediaKeys"in window ? ["com.apple.fps.1_0"] : [],
                                    audioCapabilities: [{
                                        format: "mp4",
                                        codec: "aac"
                                    }],
                                    videoCapabilities: [{
                                        format: "mp4",
                                        codec: "avc",
                                        height: 1080,
                                        fps: 30
                                    }]
                                }),
                                e.abrupt("return", [t]);
                            case 3:
                                if (_a) {
                                    e.next = 5;
                                    break
                                }
                                return e.abrupt("return", []);
                            case 5:
                                if (a = Ta({
                                    type: "hls",
                                    keySystems: [],
                                    audioCapabilities: [{
                                        format: "mp4",
                                        codec: "aac"
                                    }],
                                    videoCapabilities: []
                                }),
                                ma.forEach((function(e, t) {
                                    "avc" === e.codec && 0 === a.videoCapabilities.length && MediaSource.isTypeSupported('video/mp4; codecs="'.concat(t, '"')) && a.videoCapabilities.push(ua({
                                        format: "mp4"
                                    }, e))
                                }
                                )),
                                !("requestMediaKeySystemAccess"in navigator)) {
                                    e.next = 64;
                                    break
                                }
                                return r = {
                                    initDataTypes: ["cenc"],
                                    audioCapabilities: [],
                                    videoCapabilities: []
                                },
                                ga.forEach((function(e, t) {
                                    var a = pa.get(e.codec);
                                    a.has("webm") && r.audioCapabilities.push({
                                        contentType: 'audio/webm; codecs="'.concat(t, '"')
                                    }),
                                    a.has("mp4") && r.audioCapabilities.push({
                                        contentType: 'audio/mp4; codecs="'.concat(t, '"')
                                    })
                                }
                                )),
                                ma.forEach((function(e, t) {
                                    var a = pa.get(e.codec);
                                    a.has("webm") && r.videoCapabilities.push({
                                        contentType: 'video/webm; codecs="'.concat(t, '"')
                                    }),
                                    a.has("mp4") && r.videoCapabilities.push({
                                        contentType: 'video/mp4; codecs="'.concat(t, '"')
                                    })
                                }
                                )),
                                n = /^(?:audio|video)\/(mp4|webm);\s*codecs="(.*)"$/,
                                i = [],
                                e.prev = 13,
                                (o = ua({}, r)).videoCapabilities = o.videoCapabilities.filter((function(e) {
                                    var t = e.contentType
                                      , a = ia(n.exec(t), 3)[2];
                                    return "av1" !== ma.get(a).codec
                                }
                                )),
                                ya.debug("request ".concat("com.microsoft.playready"), o),
                                e.next = 19,
                                navigator.requestMediaKeySystemAccess("com.microsoft.playready", [o]);
                            case 19:
                                s = e.sent,
                                l = s.getConfiguration(),
                                ya.debug("com.microsoft.playready", l),
                                u = Ta({
                                    type: "dash",
                                    keySystems: ["com.microsoft.playready"],
                                    audioCapabilities: [],
                                    videoCapabilities: []
                                }),
                                l.audioCapabilities.forEach((function(e) {
                                    var t = e.contentType
                                      , a = ia(n.exec(t), 3)
                                      , r = a[1]
                                      , i = a[2]
                                      , o = ga.get(i);
                                    u.audioCapabilities.push(ua({
                                        format: r
                                    }, o))
                                }
                                )),
                                l.videoCapabilities.forEach((function(e) {
                                    var t = e.contentType
                                      , a = ia(n.exec(t), 3)
                                      , r = a[1]
                                      , i = a[2]
                                      , o = ma.get(i);
                                    u.videoCapabilities.some((function(e) {
                                        return e.format === r && e.codec === o.codec
                                    }
                                    )) || u.videoCapabilities.push(ua({
                                        format: r
                                    }, o))
                                }
                                )),
                                i.push(u),
                                e.next = 30;
                                break;
                            case 28:
                                e.prev = 28,
                                e.t0 = e.catch(13);
                            case 30:
                                return e.prev = 30,
                                (d = ua({}, r)).audioCapabilities = d.audioCapabilities.map((function(e) {
                                    return {
                                        contentType: e.contentType,
                                        robustness: "SW_SECURE_CRYPTO"
                                    }
                                }
                                )),
                                d.videoCapabilities = d.videoCapabilities.map((function(e) {
                                    return {
                                        contentType: e.contentType,
                                        robustness: "SW_SECURE_CRYPTO"
                                    }
                                }
                                )),
                                ya.debug("request ".concat("com.widevine.alpha"), d),
                                e.next = 37,
                                navigator.requestMediaKeySystemAccess("com.widevine.alpha", [d]);
                            case 37:
                                c = e.sent,
                                f = c.getConfiguration(),
                                ya.debug("com.widevine.alpha", f),
                                h = Ta({
                                    type: "dash",
                                    keySystems: ["com.widevine.alpha"],
                                    audioCapabilities: [],
                                    videoCapabilities: []
                                }),
                                f.audioCapabilities.forEach((function(e) {
                                    var t = e.contentType
                                      , a = ia(n.exec(t), 3)
                                      , r = a[1]
                                      , i = a[2]
                                      , o = ga.get(i);
                                    h.audioCapabilities.push(ua({
                                        format: r
                                    }, o))
                                }
                                )),
                                f.videoCapabilities.forEach((function(e) {
                                    var t = e.contentType
                                      , a = ia(n.exec(t), 3)
                                      , r = a[1]
                                      , i = a[2]
                                      , o = ma.get(i);
                                    h.videoCapabilities.some((function(e) {
                                        return e.format === r && e.codec === o.codec
                                    }
                                    )) || h.videoCapabilities.push(ua({
                                        format: r
                                    }, o))
                                }
                                )),
                                i.push(h),
                                e.next = 48;
                                break;
                            case 46:
                                e.prev = 46,
                                e.t1 = e.catch(30);
                            case 48:
                                return e.prev = 48,
                                ya.debug("request ".concat("org.w3.clearkey"), r),
                                e.next = 52,
                                navigator.requestMediaKeySystemAccess("org.w3.clearkey", [r]);
                            case 52:
                                p = e.sent,
                                g = p.getConfiguration(),
                                ya.debug("org.w3.clearkey", g),
                                m = Ta({
                                    type: "dash",
                                    keySystems: ["org.w3.clearkey"],
                                    audioCapabilities: [],
                                    videoCapabilities: []
                                }),
                                g.audioCapabilities.forEach((function(e) {
                                    var t = e.contentType
                                      , a = ia(n.exec(t), 3)
                                      , r = a[1]
                                      , i = a[2]
                                      , o = ga.get(i);
                                    m.audioCapabilities.push(ua({
                                        format: r
                                    }, o))
                                }
                                )),
                                g.videoCapabilities.forEach((function(e) {
                                    var t = e.contentType
                                      , a = ia(n.exec(t), 3)
                                      , r = a[1]
                                      , i = a[2]
                                      , o = ma.get(i);
                                    m.videoCapabilities.some((function(e) {
                                        return e.format === r && e.codec === o.codec
                                    }
                                    )) || m.videoCapabilities.push(ua({
                                        format: r
                                    }, o))
                                }
                                )),
                                i.push(m),
                                e.next = 63;
                                break;
                            case 61:
                                e.prev = 61,
                                e.t2 = e.catch(48);
                            case 63:
                                return e.abrupt("return", [].concat(i, [a]));
                            case 64:
                                if (!("MSMediaKeys"in window) || !window.MSMediaKeys.isTypeSupported("com.microsoft.playready")) {
                                    e.next = 69;
                                    break
                                }
                                return y = Ta({
                                    type: "dash",
                                    keySystems: ["com.microsoft.playready"],
                                    audioCapabilities: [],
                                    videoCapabilities: []
                                }),
                                MediaSource.isTypeSupported('audio/mp4; codecs="'.concat("mp4a.40.2", '"')) && y.audioCapabilities.push({
                                    format: "mp4",
                                    codec: "aac"
                                }),
                                ma.forEach((function(e, t) {
                                    "avc" === e.codec && 0 === y.videoCapabilities.length && MediaSource.isTypeSupported('video/mp4; codecs="'.concat(t, '"')) && y.videoCapabilities.push(ua({
                                        format: "mp4"
                                    }, e))
                                }
                                )),
                                e.abrupt("return", [y]);
                            case 69:
                                return e.abrupt("return", [a]);
                            case 70:
                            case "end":
                                return e.stop()
                            }
                    }
                    ), e, null, [[13, 28], [30, 46], [48, 61]])
                }
                )),
                i = function() {
                    var e = this
                      , t = arguments;
                    return new Promise((function(a, r) {
                        var i = n.apply(e, t);
                        function o(e) {
                            sa(i, a, r, o, s, "next", e)
                        }
                        function s(e) {
                            sa(i, a, r, o, s, "throw", e)
                        }
                        o(void 0)
                    }
                    ))
                }
                ,
                function() {
                    return i.apply(this, arguments)
                }
                )
            }],
            a && ca(t.prototype, a),
            r && ca(t, r),
            e
        }();
        t.default = {
            version: Zt.b,
            VideoEvent: n,
            DMMVideoFactory: Sa,
            EnvCode: S,
            getStreamIdFromStreamUrl: r.getStreamIdFromStreamUrl,
            convertTime: function(e) {
                return new Date(e).toISOString().slice(-13, -5)
            },
            second2millisecond: B,
            millisecond2second: j
        }
    }
    ]).default
}
));
//# sourceMappingURL=dmmvideo.min.js.map
